{"version":3,"sources":["../src/lib/directive.ts","../src/lib/dom.ts","../src/lib/part.ts","../src/lib/template.ts","../src/lib/template-instance.ts","../src/lib/template-result.ts","../src/lib/parts.ts","../src/lib/default-template-processor.ts","../src/lib/template-factory.ts","../src/lib/render.ts","src/lit-html.ts","../src/lib/modify-template.ts","../src/lib/shady-render.ts","../src/lib/updating-element.ts","../src/lib/decorators.ts","../src/lib/css-tag.ts","src/lit-element.ts","../elements/icon.js","../elements/spinner.js","../elements/btn.js","../elements/spinner-overlay.js","../util/device.js","../elements/uploader.js","../elements/paper.js","../node_modules/moment/moment.js","../elements/timer.js","../elements/empty-state.js","../elements/label.js","../elements/avatar.js","../elements/hr.js","../elements/sub.js","../elements/embed.js","../presenters/form-control/controls/range-slider.js","../util/store.js","../elements/audio.js","../elements/carousel.js","../node_modules/url-pattern/lib/url-pattern.js","../router/history-state.js","../router/history-states.js","../router/index.js","../src/directives/unsafe-html.ts","../../src/utils/isBrowser.js","../../src/utils/debounce.js","../../src/utils/isFunction.js","../../src/utils/getStyleComputedProperty.js","../../src/utils/getParentNode.js","../../src/utils/getScrollParent.js","../../src/utils/isIE.js","../../src/utils/getOffsetParent.js","../../src/utils/isOffsetContainer.js","../../src/utils/getRoot.js","../../src/utils/findCommonOffsetParent.js","../../src/utils/getScroll.js","../../src/utils/includeScroll.js","../../src/utils/getBordersSize.js","../../src/utils/getWindowSizes.js","../../src/utils/getClientRect.js","../../src/utils/getBoundingClientRect.js","../../src/utils/getOffsetRectRelativeToArbitraryNode.js","../../src/utils/getViewportOffsetRectRelativeToArtbitraryNode.js","../../src/utils/isFixed.js","../../src/utils/getFixedPositionOffsetParent.js","../../src/utils/getBoundaries.js","../../src/utils/computeAutoPlacement.js","../../src/utils/getReferenceOffsets.js","../../src/utils/getOuterSizes.js","../../src/utils/getOppositePlacement.js","../../src/utils/getPopperOffsets.js","../../src/utils/find.js","../../src/utils/findIndex.js","../../src/utils/runModifiers.js","../../src/methods/update.js","../../src/utils/isModifierEnabled.js","../../src/utils/getSupportedPropertyName.js","../../src/methods/destroy.js","../../src/utils/getWindow.js","../../src/utils/setupEventListeners.js","../../src/methods/enableEventListeners.js","../../src/utils/removeEventListeners.js","../../src/methods/disableEventListeners.js","../../src/utils/isNumeric.js","../../src/utils/setStyles.js","../../src/utils/setAttributes.js","../../src/modifiers/applyStyle.js","../../src/utils/getRoundedOffsets.js","../../src/modifiers/computeStyle.js","../../src/utils/isModifierRequired.js","../../src/modifiers/arrow.js","../../src/utils/getOppositeVariation.js","../../src/methods/placements.js","../../src/utils/clockwise.js","../../src/modifiers/flip.js","../../src/modifiers/keepTogether.js","../../src/modifiers/offset.js","../../src/modifiers/preventOverflow.js","../../src/modifiers/shift.js","../../src/modifiers/hide.js","../../src/modifiers/inner.js","../../src/modifiers/index.js","../../src/methods/defaults.js","../../src/index.js","../presenters/popover/index.js","../presenters/panel/controller.js","../presenters/panel/toolbar.js","../presenters/panel/index.js","../node_modules/fuse.js/dist/fuse.js","../presenters/form-control/controls/check-box.js","../presenters/menu/index.js","../presenters/tabs/view.js","../presenters/tabs/views.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../presenters/tabs/index.js","../presenters/form-control/form-handler.js","../presenters/form-control/form-control.css.js","../presenters/form-control/form-control.js","../presenters/dialog/make-btn.js","../presenters/dialog/dialog.js","../presenters/dialog/index.js","../presenters/form-control/controls/date-picker.js","../presenters/form-control/controls/text-field.js","../presenters/form-control/controls/select-field.js","../presenters/form-control/controls/radio-btn.js","../presenters/form-control/controls/radio-group.js","../presenters/form-control/controls/touch-ripple.js","../presenters/form-control/index.js","../node_modules/component-emitter/index.js","../presenters/list/data/source.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_baseSlice.js","../node_modules/lodash/_castSlice.js","../node_modules/lodash/_hasUnicode.js","../node_modules/lodash/_asciiToArray.js","../node_modules/lodash/_unicodeToArray.js","../node_modules/lodash/_stringToArray.js","../node_modules/lodash/_createCaseFirst.js","../node_modules/lodash/upperFirst.js","../node_modules/lodash/capitalize.js","../util/titleize.js","../presenters/list/toolbar/filter-view-date.js","../presenters/list/toolbar/filter-view-slider.js","../presenters/list/data/filters.js","../presenters/list/data/sorts.js","../presenters/list/toolbar/sort-btn.js","../presenters/list/toolbar/sort-dir-btn.js","../presenters/list/toolbar/filter-btn.js","../presenters/list/toolbar/search.js","../presenters/list/toolbar/index.js","../presenters/list/infinite-list.js","../presenters/list/index.js","../helpers/colors-list.js","demo.js","../../../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-loader.js","../../../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/loaders/browser/html-loader.js"],"names":["svgDef","require","SvgIcons","prefix","svgDefElement","__svgDefElement","div","document","createElement","innerHTML","firstChild","querySelectorAll","forEach","el","remove","names","Array","from","map","id","replace","sort","get","name","symbol","querySelector","svg","attributes","attr","setAttribute","value","svgIcons","IconElement","HTMLElement","constructor","attachShadow","mode","temp","shadowRoot","appendChild","content","cloneNode","_setSVG","_svg","removeAttribute","observedAttributes","attributeChangedCallback","oldValue","newValue","getAttribute","val","customElements","define","IconList","LitElement","properties","cols","type","Number","reflect","styles","css","render","html","SpinnerElement","shadow","BtnElement","href","String","icon","spin","Boolean","attribute","firstUpdated","addEventListener","window","location","SpinnerOverlayElement","show","label","connectedCallback","parentNode","host","spinner","parentElement","disconnectedCallback","device","is_ios","test","navigator","userAgent","MSStream","is_android","is_mobile","UploaderElement","url","disabled","accept","multiple","placeholder","files","dragging","uploading","_numUploading","_numUploaded","fn","bind","progress","length","autoUpload","hasAttribute","e","stopPropagation","_inputChange","parent","getRootNode","dragenter","dragleave","dragover","drop","removeEventListener","_acceptFile","file","doAccept","split","find","patt","trim","RegExp","chooseFile","click","_drop","preventDefault","_selectFiles","dataTransfer","target","slice","valid","invalid","push","dispatchEvent","CustomEvent","bubbles","composed","detail","upload","_dragover","_dragenter","types","includes","_dragleave","method","fileKey","formData","Error","resp","_formData","FormData","append","key","requestUpdate","uploadResp","fetch","body","then","json","PaperElement","color","empty","TimerElement","time","ms","running","__time","oldVal","dur","moment","duration","delta","add","hours","minutes","seconds","milliseconds","_lastTS","run","clearInterval","_progressInterval","Date","getTime","setInterval","_progress","start","stop","ts","elapsedTime","padStart","Math","round","format","str","join","EmptyState","Label","InvalidImages","BgdColors","DefaultBgd","AvatarElement","bgd","initials","img","style","display","classList","src","gravatar","getAttr","newVal","defaultVal","toLowerCase","num","char","charCodeAt","setProperty","size","width","height","guid","isConnected","offsetHeight","Embed","formattedURL","match","isYoutube","min","max","step","range","Object","mouseUp","mouseMove","valMin","valMax","_polishVal","parseFloat","toFixed","oldMin","oldMax","s","isArray","dmin","abs","dmax","_active","_mouseDown","_didChange","mouseDown","_len","_minLeft","_maxLeft","_trackLength","atMin","atMax","reset","update","which","pageX","_lastMousePos","offset","x","offsetLeft","y","offsetTop","offsetParent","mouseX","screenX","percent","clientWidth","ls","localStorage","undefined","data","getItem","JSON","parse","isAmplify","removeItem","stringify","setItem","formatTime","sec","ACTIVE_PLAYER","autoplay","playing","onHover","onHoverLeave","audioLoaded","audioTimeChange","pause","audioLoadError","playPause","progressSliderChanging","progressSliderChangingDone","viewSettings","audio","elapsed","remaining","loadAudio","status","paused","play","_loaded","clip","skipBack","skip","skipForward","amt","currentTime","setProgress","isNaN","playLastClip","playEndClips","seeking","setTimeout","playClip","splice","background","Infinity","wasPlaying","blur","progressHover","progressHoverLeave","setClipLength","item","clipLength","playFirstClip","onKeyPress","shiftKey","_","metaKey","_onKeyPress","views","active","v","i","navTo","__active","hidden","currentTarget","slot","assignedElements","root","factory","amd","exports","module","UrlPattern","P","astNodeContainsSegmentsForProvidedParams","astNodeToNames","astNodeToRegexString","baseAstNodeToRegexString","concatMap","defaultOptions","escapeForRegex","getParam","keysAndValuesToObject","newParser","regexGroupCount","stringConcatMap","string","array","f","results","concat","result","regex","toString","exec","keys","values","object","Result","rest","Tagged","tag","parser","input","tagged","matches","sequence","parsers","arguments","call","pick","indexes","apply","lazy","cached","baseMany","end","stringResult","atLeastOneResultRequired","endResult","parserResult","many1","concatMany1Till","firstChoice","options","U","wildcard","wildcardChar","optional","optionalSegmentStartChar","pattern","optionalSegmentEndChar","segmentNameCharset","named","segmentNameStartChar","escapedChar","escapeChar","token","segmentValueCharset","astNode","node","params","nextIndexes","sideEffects","index","maxIndex","arg1","arg2","groupCount","parsed","withoutWhitespace","isRegex","ast","TypeError","prototype","groups","APP_TITLE","title","HistoryState","props","assign","path","pathname","hash","isCurrent","history","state","isBefore","isBack","isAfter","isForward","replaceState","save","toJSON","HistoryStates","storedData","sessionStorage","states","_current","current","create","oldNum","oldStates","oldState","ROUTES","PATH_ROOT","PATH_PREFIX","Router","normalizePath","opts","requireState","newState","_changeRoute","Route","rootPath","pushState","goTo","dir","route","_change","enter","exit","routes","rootRoutes","onChange","change","matchedState","longerTimeoutBrowsers","timeoutDuration","isBrowser","indexOf","microtaskDebounce","called","Promise","resolve","taskDebounce","scheduled","supportsMicroTasks","isFunction","functionToCheck","getType","getStyleComputedProperty","element","property","nodeType","ownerDocument","defaultView","getComputedStyle","getParentNode","nodeName","getScrollParent","overflow","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","documentElement","noOffsetParent","nextElementSibling","isOffsetContainer","firstElementChild","getRoot","findCommonOffsetParent","element1","element2","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","createRange","setStart","setEnd","commonAncestorContainer","contains","element1root","getScroll","side","upperSide","scrollingElement","includeScroll","rect","subtract","scrollTop","scrollLeft","modifier","top","bottom","left","right","getBordersSize","axis","sideA","sideB","getSize","computedStyle","parseInt","getWindowSizes","getClientRect","offsets","getBoundingClientRect","sizes","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","getOffsetRectRelativeToArbitraryNode","children","fixedPosition","runIsIE","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","innerHeight","isFixed","getFixedPositionOffsetParent","getBoundaries","popper","reference","padding","boundariesElement","boundaries","boundariesNode","isPaddingNumber","getArea","computeAutoPlacement","placement","refRect","rects","sortedAreas","a","b","area","filteredAreas","filter","computedPlacement","variation","getReferenceOffsets","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","findIndex","prop","cur","obj","runModifiers","modifiers","ends","modifiersToRun","warn","enabled","isDestroyed","positionFixed","flip","originalPlacement","position","isCreated","onCreate","onUpdate","isModifierEnabled","modifierName","some","getSupportedPropertyName","prefixes","upperProp","charAt","toUpperCase","toCheck","destroy","willChange","disableEventListeners","removeOnDestroy","removeChild","getWindow","attachToScrollParents","event","callback","scrollParents","isBody","passive","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","removeEventListeners","isNumeric","n","isFinite","setStyles","unit","setAttributes","applyStyle","instance","arrowElement","arrowStyles","applyStyleOnLoad","modifierOptions","getRoundedOffsets","shouldRound","floor","noRound","referenceWidth","popperWidth","isVertical","isVariation","sameWidthParity","bothOddWidth","horizontalToInteger","verticalToInteger","isFirefox","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","devicePixelRatio","prefixedProperty","invertTop","invertLeft","arrow","isModifierRequired","requestingName","requestedName","requesting","isRequired","requested","len","sideCapitalized","altSide","opSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","getOppositeVariation","validPlacements","placements","clockwise","counter","reverse","BEHAVIORS","flipped","placementOpposite","flipOrder","behavior","FLIP","CLOCKWISE","COUNTERCLOCKWISE","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","keepTogether","toValue","parseOffset","basePlacement","useHeight","fragments","frag","divider","search","splitRegex","ops","op","mergeWithPrevious","reduce","index2","preventOverflow","transformProp","popperStyles","transform","priority","escapeWithReference","shift","shiftvariation","shiftOffsets","hide","bound","inner","subtractLength","Popper","requestAnimationFrame","debounce","Defaults","jquery","onLoad","Utils","global","PopperUtils","DefaultOpts","align","className","clickToggles","closeOnHide","maxHeight","maxHeightThreshold","onClose","onKeydown","OpenPopovers","WatchingClicks","WatchingKeyboard","WatchClicks","found","close","popover","view","_close","dd","WatchKeyboard","pop","_onKeydown","Popover","_view","Backbone","View","_onPositionCreate","_onPositionUpdate","overflowBoundry","mutationObserver","MutationObserver","viewMutated","observe","childList","subtree","targetParent","parentPopover","isNested","mutationsList","observer","_updatePosition","disconnect","indx","m","maxWidth","PanelControllers","PanelController","for","rootPanelController","panels","Map","console","panel","delete","_updatePanels","set","updateRoutes","zIndex","_updateRoute","app","sv","sheets","setHash","router","onTop","p","quickJump","menu","description","quickJumpOpened","open","text","unshift","selected","Menu","PanelToolbar","look","panelController","PanelDefaults","closeBtn","anchor","animation","closeOnEsc","controller","disableBackdropClick","RegisteredPanels","register","_initiate","_routeChange","registered","error","Panel","Modal","animationTime","defaultOpts","__route","isOpen","didEnter","opened","didExit","closed","animate","effect","main","bounce","shake","__html","toolbar","__view","_linkToolbar","lastElementChild","onBackdropClick","__panelController","_val","Controller","onOpen","__title","t","Fuse","r","o","l","c","d","defineProperty","enumerable","Symbol","toStringTag","__esModule","default","hasOwnProperty","iterator","configurable","writable","distance","threshold","h","maxPatternLength","u","caseSensitive","tokenSeparator","g","findAllMatches","minMatchCharLength","k","S","M","shouldSort","L","w","getFn","A","C","sortFn","I","score","O","tokenize","j","matchAllTokens","F","T","includeMatches","z","E","includeScore","K","$","verbose","J","isCaseSensitive","setCollection","list","limit","_log","_prepareSearchers","tokenSearchers","fullSearcher","_search","weights","_computeScore","_sort","_format","_analyze","record","resultMap","weight","arrayIndex","isMatch","output","matchedIndices","nScore","indices","log","patternAlphabet","errors","currentLocation","expectedLocation","lastIndexOf","CheckBoxElement","cssText","ripple","_onClick","code","relatedTarget","checked","minW","jumpNav","typeDelay","hasMenuIcon","onSelect","SearchDefaults","row","cn","minWidth","onClick","promise","_resolve","__menu","searchUrl","__origMenu","__fuse","displayMenu","__filteredMenu","searchIsOn","searchShouldShowAll","hideUnselected","__selected","toggleSelected","focusSearch","focus","showAll","searchParse","searchPlaceholder","searchSpinner","__searchSpinner","fetchResults","term","_fetchingTerm","presenter","appendTo","appendElement","showJumpNav","renderItem","checkbox","clearsAll","menuIcon","attrs","extras","elName","dataTitle","didClickCheckbox","tagName","_itemMenu","isSelected","menuOpts","popoverOpts","menuSelected","onLetterPress","items","activeItem","setActiveItem","scrollIntoViewIfNeeded","__lastFilterVal","clearTimeout","__searchTermDelay","_lastLetterPressTS","_lastLetterPress","li","scrollToSelected","adjustForMobile","modal","TabView","_viewName","_viewClass","__id","tabView","canDisplay","isActive","didBecomeActive","didBecomeInactive","TabViews","tabBar","first","at","last","layout","singlemenu","_resizeHandler","shouldBeSingleMenu","childNodes","textContent","_views","menuItems","__views","popoverMenu","menuClick","onModelChange","model","FormHandler","onModelSync","onModelEdited","onEditorChange","noGridArea","autoSave","patchSave","formHandler","editors","editorsByKey","gridArea","_updateEditors","_model","off","_editedAttrs","on","store","vals","storedValue","has","_isAMomentObject","control","_datePicker","trigger","isEdited","editedAttrs","changed","changes","formatted","patch","editAttr","__disabled","isInvalid","ed","FormControlElement","suffix","assignedNodes","mutations","attributeName","_onChange","$$","_setClassNames","dbValue","innerText","labelNodes","btnPresets","makeBtn","cancelBtns","Dialog","msg","btns","iconName","iconClass","btn","TemplateResult","prepend","btnInfo","resolveBtn","activeElement","onResolve","err","notif","autoClose","clickRemoves","onAutoClose","msgs","confirm","confirmDelete","alert","success","prompt","validate","required","helpText","multiline","dialog","textValue","changeEvent","details","DatePickerElement","htmlDaysHeader","weekdaysMin","startYear","endYear","years","months","monthsShort","_yearEl","_dateEl","_monthEl","_monthDays","_setDate","date","_dateSelected","clone","isValid","_renderMonth","_date","weekday","numDays","daysInMonth","days","fill","day","_lookingAtSelectedMonth","elSelected","_lookingAtToday","_today","nextMonth","prevMonth","pickYear","pickMonth","activeYear","scrollIntoView","year","month","_refresh","yearEl","monthEl","TextFieldElement","_editor","_onPaste","_onKeypress","_onFocus","_onBlur","contentEditable","dataset","doc","DOMParser","parseFromString","nodeValue","_oldVal","selection","select","execCommand","removeAllRanges","currentValue","_isInvalid","isFocused","pickDate","picker","_changeValue","clipboardData","getData","getSelection","selectNodeContents","addRange","Event","delay","_changeDelay","SelectFieldElement","_input","_value","_selected","onKeypress","toggleMenu","isEmpty","showEmpty","__options","_oldSelected","labels","focused","openMenu","RadioBtnElement","RadioGroupElement","nav","radios","radio","TouchRippleElement","DataSource","perPage","_pageFetched","lastFiltered","_rawData","_filteredData","refilter","coll","models","applyFilters","_fetching","flatMap","_fetchFromServer","pageAt","fetchSync","filters","emit","_filtering","_sorting","finally","lastChanged","filterByTerm","sorts","word","clearDates","usePreset","d1","d2","startOf","m1","m2","thisYear","sameYear","isSame","diffDays","diff","endOf","month1","month2","preset","clearVal","__value","CustomViews","FilterViewDate","FilterViewSlider","unsetValues","defaultSearch","defaultFilterby","Filters","_storeKey","queuing","resetData","didChange","changeFrom","changeTo","queuedChanges","__queue","__queuedChanges","use","__lastFilters","clear","searchOptions","Filter","__searchOptions","showSearch","searchMatches","_fuseSearch","newKey","fuse","filterData","needsDatabaseFetch","isDB","filterBy","isCustomView","customView","db","isMulti","multi","valueLabel","matchedVal","showMenu","showCustomView","viewName","_customView","viewOpts","Sorts","__lastSorts","Sort","desc","isDesc","sortCompare","sortBy","v1","v2","sortMenu","textField","count","onFilterQueuing","onFilterChange","applyQueuedFilters","resetFilters","onKeyDown","openOver","_keydownTimeout","onScroll","getContent","prevModel","scrollHeight","down","_scrollDelta","dataSource","addContent","rowElement","emptyElement","emptyView","onKeyup","__coll","refresh","__key","__filters","__sorts","onSortChange","__dataSource","listOptions","__spinner","onFilterTermChange","ctrlKey","doQueue","shouldDisplay","reload","colors","sheet","styleSheets","rules","cssRules","rule","renderTo","btnMenu","openModalPanel","listData","listSorts","utilReadme","dialogs","errorPopover","openView","bundleURL","getBundleURLCached","getBundleURL","stack","getBaseURL","loadBundlesLazy","bundles","LazyPromise","reject","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","loader","load","bundle","substring","bundleLoader","resolved","catch","executor","onSuccess","onError","loadHTMLBundle","res"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;AAoBA,MAAM,UAAU,GAAG,IAAI,OAAJ,EAAnB;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCO,MAAM,SAAS,GAAgC,CAA7B,IACpB,CAAC,GAAG,IAAJ,KAAuB;AACtB,QAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAJ,CAAX;AACA,EAAA,UAAU,CAAC,GAAX,CAAe,CAAf,EAAkB,IAAlB;AACA,SAAO,CAAP;AACD,CALE;;;;AAOA,MAAM,WAAW,GAAI,CAAD,IAAiC;AAC1D,SAAO,OAAO,CAAP,KAAa,UAAb,IAA2B,UAAU,CAAC,GAAX,CAAe,CAAf,CAAlC;AACD,CAFM;;;;;;;;;;;AC1EP;;;;;;;;;;;;;;AAsBA;;;AAGO,MAAM,YAAY,GAAG,MAAM,CAAC,cAAP,KAA0B,SAA1B,IACvB,MAAM,CAAC,cAAP,CAA4C,yBAA5C,KACG,SAFD;AAIP;;;;;;;;AAKO,MAAM,aAAa,GACtB,CAAC,SAAD,EACC,KADD,EAEC,GAAA,GAAiB,IAFlB,EAGC,MAAA,GAAoB,IAHrB,KAGmC;AACjC,SAAO,KAAK,KAAK,GAAjB,EAAsB;AACpB,UAAM,CAAC,GAAG,KAAM,CAAC,WAAjB;AACA,IAAA,SAAS,CAAC,YAAV,CAAuB,KAAvB,EAA+B,MAA/B;AACA,IAAA,KAAK,GAAG,CAAR;AACD;AACF,CAVE;AAYP;;;;;;;;AAIO,MAAM,WAAW,GACpB,CAAC,SAAD,EAAkB,KAAlB,EAAoC,GAAA,GAAiB,IAArD,KAAmE;AACjE,SAAO,KAAK,KAAK,GAAjB,EAAsB;AACpB,UAAM,CAAC,GAAG,KAAM,CAAC,WAAjB;AACA,IAAA,SAAS,CAAC,WAAV,CAAsB,KAAtB;AACA,IAAA,KAAK,GAAG,CAAR;AACD;AACF,CAPE;;;;;;;;;;;AClDP;;;;;;;;;;;;;;AA4CA;;;;AAIO,MAAM,QAAQ,GAAG,EAAjB;AAEP;;;;;AAGO,MAAM,OAAO,GAAG,EAAhB;;;;;;;;;;ACrDP;;;;;;;;;;;;;;AAoBA;;;;AAIO,MAAM,MAAM,GAAG,SAAS,MAAM,CAAC,IAAI,CAAC,MAAL,EAAD,CAAN,CAAsB,KAAtB,CAA4B,CAA5B,CAA8B,IAAtD;AAEP;;;;;;AAIO,MAAM,UAAU,GAAG,OAAO,MAAM,KAAhC;;AAEA,MAAM,WAAW,GAAG,IAAI,MAAJ,CAAW,GAAG,MAAM,IAAI,UAAU,EAAlC,CAApB;AAEP;;;;;AAGO,MAAM,oBAAoB,GAAG,OAA7B;AAEP;;;;;;AAGM,MAAO,QAAP,CAAe;AAInB,EAAA,WAAA,CAAY,MAAZ,EAAoC,OAApC,EAAgE;AAHvD,SAAA,KAAA,GAAwB,EAAxB;AAIP,SAAK,OAAL,GAAe,OAAf;AAEA,UAAM,aAAa,GAAW,EAA9B;AACA,UAAM,KAAK,GAAW,EAAtB,CAJ8D,CAK9D;;AACA,UAAM,MAAM,GAAG,QAAQ,CAAC,gBAAT,CACX,OAAO,CAAC,OADG,EAEX;AAAI;AAFO,MAGX,IAHW,EAIX,KAJW,CAAf,CAN8D,CAW9D;AACA;AACA;;AACA,QAAI,aAAa,GAAG,CAApB;AACA,QAAI,KAAK,GAAG,CAAC,CAAb;AACA,QAAI,SAAS,GAAG,CAAhB;AACA,UAAM;AAAC,MAAA,OAAD;AAAU,MAAA,MAAM,EAAE;AAAC,QAAA;AAAD;AAAlB,QAA8B,MAApC;;AACA,WAAO,SAAS,GAAG,MAAnB,EAA2B;AACzB,YAAM,IAAI,GAAG,MAAM,CAAC,QAAP,EAAb;;AACA,UAAI,IAAI,KAAK,IAAb,EAAmB;AACjB;AACA;AACA;AACA;AACA,QAAA,MAAM,CAAC,WAAP,GAAqB,KAAK,CAAC,GAAN,EAArB;AACA;AACD;;AACD,MAAA,KAAK;;AAEL,UAAI,IAAI,CAAC,QAAL,KAAkB;AAAE;AAAxB,QAAiD;AAC/C,cAAK,IAAgB,CAAC,aAAjB,EAAL,EAAuC;AACrC,kBAAM,UAAU,GAAI,IAAgB,CAAC,UAArC;AACA,kBAAM;AAAC,cAAA;AAAD,gBAAW,UAAjB,CAFqC,CAGrC;AACA;AACA;AACA;AACA;;AACA,gBAAI,KAAK,GAAG,CAAZ;;AACA,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAAiC;AAC/B,kBAAI,QAAQ,CAAC,UAAU,CAAC,CAAD,CAAV,CAAc,IAAf,EAAqB,oBAArB,CAAZ,EAAwD;AACtD,gBAAA,KAAK;AACN;AACF;;AACD,mBAAO,KAAK,KAAK,CAAjB,EAAoB;AAClB;AACA;AACA,oBAAM,aAAa,GAAG,OAAO,CAAC,SAAD,CAA7B,CAHkB,CAIlB;;AACA,oBAAM,IAAI,GAAG,sBAAsB,CAAC,IAAvB,CAA4B,aAA5B,EAA4C,CAA5C,CAAb,CALkB,CAMlB;AACA;AACA;AACA;AACA;;AACA,oBAAM,mBAAmB,GACrB,IAAI,CAAC,WAAL,KAAqB,oBADzB;AAEA,oBAAM,cAAc,GACf,IAAgB,CAAC,YAAjB,CAA8B,mBAA9B,CADL;AAEC,cAAA,IAAgB,CAAC,eAAjB,CAAiC,mBAAjC;AACD,oBAAM,OAAO,GAAG,cAAc,CAAC,KAAf,CAAqB,WAArB,CAAhB;AACA,mBAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,gBAAA,IAAI,EAAE,WAAP;AAAoB,gBAAA,KAApB;AAA2B,gBAAA,IAA3B;AAAiC,gBAAA,OAAO,EAAE;AAA1C,eAAhB;AACA,cAAA,SAAS,IAAI,OAAO,CAAC,MAAR,GAAiB,CAA9B;AACD;AACF;;AACD,cAAK,IAAgB,CAAC,OAAjB,KAA6B,UAAlC,EAA8C;AAC5C,YAAA,KAAK,CAAC,IAAN,CAAW,IAAX;AACA,YAAA,MAAM,CAAC,WAAP,GAAsB,IAA4B,CAAC,OAAnD;AACD;AACF,SAxCD,MAwCO,IAAI,IAAI,CAAC,QAAL,KAAkB;AAAE;AAAxB,QAA8C;AACnD,gBAAM,IAAI,GAAI,IAAa,CAAC,IAA5B;;AACA,cAAI,IAAI,CAAC,OAAL,CAAa,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,kBAAM,MAAM,GAAG,IAAI,CAAC,UAApB;AACA,kBAAM,OAAO,GAAG,IAAI,CAAC,KAAL,CAAW,WAAX,CAAhB;AACA,kBAAM,SAAS,GAAG,OAAO,CAAC,MAAR,GAAiB,CAAnC,CAH6B,CAI7B;AACA;;AACA,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,SAApB,EAA+B,CAAC,EAAhC,EAAoC;AAClC,kBAAI,MAAJ;AACA,kBAAI,CAAC,GAAG,OAAO,CAAC,CAAD,CAAf;;AACA,kBAAI,CAAC,KAAK,EAAV,EAAc;AACZ,gBAAA,MAAM,GAAG,YAAY,EAArB;AACD,eAFD,MAEO;AACL,sBAAM,KAAK,GAAG,sBAAsB,CAAC,IAAvB,CAA4B,CAA5B,CAAd;;AACA,oBAAI,KAAK,KAAK,IAAV,IAAkB,QAAQ,CAAC,KAAK,CAAC,CAAD,CAAN,EAAW,oBAAX,CAA9B,EAAgE;AAC9D,kBAAA,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,CAAR,EAAW,KAAK,CAAC,KAAjB,IAA0B,KAAK,CAAC,CAAD,CAA/B,GACA,KAAK,CAAC,CAAD,CAAL,CAAS,KAAT,CAAe,CAAf,EAAkB,CAAC,oBAAoB,CAAC,MAAxC,CADA,GACkD,KAAK,CAAC,CAAD,CAD3D;AAED;;AACD,gBAAA,MAAM,GAAG,QAAQ,CAAC,cAAT,CAAwB,CAAxB,CAAT;AACD;;AACD,cAAA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,IAA5B;AACA,mBAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,gBAAA,IAAI,EAAE,MAAP;AAAe,gBAAA,KAAK,EAAE,EAAE;AAAxB,eAAhB;AACD,aArB4B,CAsB7B;AACA;;;AACA,gBAAI,OAAO,CAAC,SAAD,CAAP,KAAuB,EAA3B,EAA+B;AAC7B,cAAA,MAAM,CAAC,YAAP,CAAoB,YAAY,EAAhC,EAAoC,IAApC;AACA,cAAA,aAAa,CAAC,IAAd,CAAmB,IAAnB;AACD,aAHD,MAGO;AACJ,cAAA,IAAa,CAAC,IAAd,GAAqB,OAAO,CAAC,SAAD,CAA5B;AACF,aA7B4B,CA8B7B;;;AACA,YAAA,SAAS,IAAI,SAAb;AACD;AACF,SAnCM,MAmCA,IAAI,IAAI,CAAC,QAAL,KAAkB;AAAE;AAAxB,QAAiD;AACtD,cAAK,IAAgB,CAAC,IAAjB,KAA0B,MAA/B,EAAuC;AACrC,kBAAM,MAAM,GAAG,IAAI,CAAC,UAApB,CADqC,CAErC;AACA;AACA;AACA;;AACA,gBAAI,IAAI,CAAC,eAAL,KAAyB,IAAzB,IAAiC,KAAK,KAAK,aAA/C,EAA8D;AAC5D,cAAA,KAAK;AACL,cAAA,MAAM,CAAC,YAAP,CAAoB,YAAY,EAAhC,EAAoC,IAApC;AACD;;AACD,YAAA,aAAa,GAAG,KAAhB;AACA,iBAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,cAAA,IAAI,EAAE,MAAP;AAAe,cAAA;AAAf,aAAhB,EAXqC,CAYrC;AACA;;AACA,gBAAI,IAAI,CAAC,WAAL,KAAqB,IAAzB,EAA+B;AAC5B,cAAA,IAAgB,CAAC,IAAjB,GAAwB,EAAxB;AACF,aAFD,MAEO;AACL,cAAA,aAAa,CAAC,IAAd,CAAmB,IAAnB;AACA,cAAA,KAAK;AACN;;AACD,YAAA,SAAS;AACV,WArBD,MAqBO;AACL,gBAAI,CAAC,GAAG,CAAC,CAAT;;AACA,mBAAO,CAAC,CAAC,GAAI,IAAgB,CAAC,IAAjB,CAAsB,OAAtB,CAA8B,MAA9B,EAAsC,CAAC,GAAG,CAA1C,CAAN,MAAwD,CAAC,CAAhE,EAAmE;AACjE;AACA;AACA;AACA;AACA,mBAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,gBAAA,IAAI,EAAE,MAAP;AAAe,gBAAA,KAAK,EAAE,CAAC;AAAvB,eAAhB;AACA,cAAA,SAAS;AACV;AACF;AACF;AACF,KA3I6D,CA6I9D;;;AACA,SAAK,MAAM,CAAX,IAAgB,aAAhB,EAA+B;AAC7B,MAAA,CAAC,CAAC,UAAF,CAAc,WAAd,CAA0B,CAA1B;AACD;AACF;;AArJkB;;;;AAwJrB,MAAM,QAAQ,GAAG,CAAC,GAAD,EAAc,MAAd,KAAyC;AACxD,QAAM,KAAK,GAAG,GAAG,CAAC,MAAJ,GAAa,MAAM,CAAC,MAAlC;AACA,SAAO,KAAK,IAAI,CAAT,IAAc,GAAG,CAAC,KAAJ,CAAU,KAAV,MAAqB,MAA1C;AACD,CAHD;;AA0BO,MAAM,oBAAoB,GAAI,IAAD,IAAwB,IAAI,CAAC,KAAL,KAAe,CAAC,CAArE,EAEP;AACA;;;;;AACO,MAAM,YAAY,GAAG,MAAM,QAAQ,CAAC,aAAT,CAAuB,EAAvB,CAA3B;AAEP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,MAAM,sBAAsB,GAC/B,4IADG;;;;;;;;;;AC1OP;;AAIA;;AAtBA;;;;;;;;;;;;;;AAcA;;;;AAUA;;;;AAIM,MAAO,gBAAP,CAAuB;AAM3B,EAAA,WAAA,CACI,QADJ,EACwB,SADxB,EAEI,OAFJ,EAE0B;AAPT,SAAA,OAAA,GAAiC,EAAjC;AAQf,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,OAAL,GAAe,OAAf;AACD;;AAED,EAAA,MAAM,CAAC,MAAD,EAA+B;AACnC,QAAI,CAAC,GAAG,CAAR;;AACA,SAAK,MAAM,IAAX,IAAmB,KAAK,OAAxB,EAAiC;AAC/B,UAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,QAAA,IAAI,CAAC,QAAL,CAAc,MAAM,CAAC,CAAD,CAApB;AACD;;AACD,MAAA,CAAC;AACF;;AACD,SAAK,MAAM,IAAX,IAAmB,KAAK,OAAxB,EAAiC;AAC/B,UAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,QAAA,IAAI,CAAC,MAAL;AACD;AACF;AACF;;AAED,EAAA,MAAM,GAAA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,UAAM,QAAQ,GAAG,oBACb,KAAK,QAAL,CAAc,OAAd,CAAsB,OAAtB,CAA8B,SAA9B,CAAwC,IAAxC,CADa,GAEb,QAAQ,CAAC,UAAT,CAAoB,KAAK,QAAL,CAAc,OAAd,CAAsB,OAA1C,EAAmD,IAAnD,CAFJ;AAIA,UAAM,KAAK,GAAW,EAAtB;AACA,UAAM,KAAK,GAAG,KAAK,QAAL,CAAc,KAA5B,CA5CI,CA6CJ;;AACA,UAAM,MAAM,GAAG,QAAQ,CAAC,gBAAT,CACX,QADW,EAEX;AAAI;AAFO,MAGX,IAHW,EAIX,KAJW,CAAf;AAKA,QAAI,SAAS,GAAG,CAAhB;AACA,QAAI,SAAS,GAAG,CAAhB;AACA,QAAI,IAAJ;AACA,QAAI,IAAI,GAAG,MAAM,CAAC,QAAP,EAAX,CAtDI,CAuDJ;;AACA,WAAO,SAAS,GAAG,KAAK,CAAC,MAAzB,EAAiC;AAC/B,MAAA,IAAI,GAAG,KAAK,CAAC,SAAD,CAAZ;;AACA,UAAI,CAAC,oCAAqB,IAArB,CAAL,EAAiC;AAC/B,aAAK,OAAL,CAAa,IAAb,CAAkB,SAAlB;;AACA,QAAA,SAAS;AACT;AACD,OAN8B,CAQ/B;AACA;AACA;;;AACA,aAAO,SAAS,GAAG,IAAI,CAAC,KAAxB,EAA+B;AAC7B,QAAA,SAAS;;AACT,YAAI,IAAK,CAAC,QAAN,KAAmB,UAAvB,EAAmC;AACjC,UAAA,KAAK,CAAC,IAAN,CAAW,IAAX;AACA,UAAA,MAAM,CAAC,WAAP,GAAsB,IAA4B,CAAC,OAAnD;AACD;;AACD,YAAI,CAAC,IAAI,GAAG,MAAM,CAAC,QAAP,EAAR,MAA+B,IAAnC,EAAyC;AACvC;AACA;AACA;AACA;AACA,UAAA,MAAM,CAAC,WAAP,GAAqB,KAAK,CAAC,GAAN,EAArB;AACA,UAAA,IAAI,GAAG,MAAM,CAAC,QAAP,EAAP;AACD;AACF,OAzB8B,CA2B/B;;;AACA,UAAI,IAAI,CAAC,IAAL,KAAc,MAAlB,EAA0B;AACxB,cAAM,IAAI,GAAG,KAAK,SAAL,CAAe,oBAAf,CAAoC,KAAK,OAAzC,CAAb;AACA,QAAA,IAAI,CAAC,eAAL,CAAqB,IAAK,CAAC,eAA3B;;AACA,aAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB;AACD,OAJD,MAIO;AACL,aAAK,OAAL,CAAa,IAAb,CAAkB,GAAG,KAAK,SAAL,CAAe,0BAAf,CACjB,IADiB,EACA,IAAI,CAAC,IADL,EACW,IAAI,CAAC,OADhB,EACyB,KAAK,OAD9B,CAArB;AAED;;AACD,MAAA,SAAS;AACV;;AAED,QAAI,iBAAJ,EAAkB;AAChB,MAAA,QAAQ,CAAC,SAAT,CAAmB,QAAnB;AACA,MAAA,cAAc,CAAC,OAAf,CAAuB,QAAvB;AACD;;AACD,WAAO,QAAP;AACD;;AAjI0B;;;;;;;;;;;ACV7B;;AAEA;;AApBA;;;;;;;;;;;;;;AAcA;;;AAQA,MAAM,aAAa,GAAG,IAAI,gBAAM,GAAhC;AAEA;;;;;AAIM,MAAO,cAAP,CAAqB;AAMzB,EAAA,WAAA,CACI,OADJ,EACmC,MADnC,EAEI,IAFJ,EAEkB,SAFlB,EAE8C;AAC5C,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,SAAL,GAAiB,SAAjB;AACD;AAED;;;;;AAGA,EAAA,OAAO,GAAA;AACL,UAAM,CAAC,GAAG,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAhC;AACA,QAAI,IAAI,GAAG,EAAX;AACA,QAAI,gBAAgB,GAAG,KAAvB;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AAC1B,YAAM,CAAC,GAAG,KAAK,OAAL,CAAa,CAAb,CAAV,CAD0B,CAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,YAAM,WAAW,GAAG,CAAC,CAAC,WAAF,CAAc,MAAd,CAApB,CAnB0B,CAoB1B;AACA;AACA;;AACA,MAAA,gBAAgB,GAAG,CAAC,WAAW,GAAG,CAAC,CAAf,IAAoB,gBAArB,KACf,CAAC,CAAC,OAAF,CAAU,KAAV,EAAiB,WAAW,GAAG,CAA/B,MAAsC,CAAC,CAD3C,CAvB0B,CAyB1B;AACA;AACA;;AACA,YAAM,cAAc,GAAG,iCAAuB,IAAvB,CAA4B,CAA5B,CAAvB;;AACA,UAAI,cAAc,KAAK,IAAvB,EAA6B;AAC3B;AACA;AACA;AACA;AACA;AACA,QAAA,IAAI,IAAI,CAAC,IAAI,gBAAgB,GAAG,aAAH,GAAmB,oBAAvC,CAAT;AACD,OAPD,MAOO;AACL;AACA;AACA;AACA,QAAA,IAAI,IAAI,CAAC,CAAC,MAAF,CAAS,CAAT,EAAY,cAAc,CAAC,KAA3B,IAAoC,cAAc,CAAC,CAAD,CAAlD,GACJ,cAAc,CAAC,CAAD,CADV,GACgB,8BADhB,GACuC,cAAc,CAAC,CAAD,CADrD,GAEJ,gBAFJ;AAGD;AACF;;AACD,IAAA,IAAI,IAAI,KAAK,OAAL,CAAa,CAAb,CAAR;AACA,WAAO,IAAP;AACD;;AAED,EAAA,kBAAkB,GAAA;AAChB,UAAM,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAjB;AACA,IAAA,QAAQ,CAAC,SAAT,GAAqB,KAAK,OAAL,EAArB;AACA,WAAO,QAAP;AACD;;AA5EwB;AA+E3B;;;;;;;;;;;AAOM,MAAO,iBAAP,SAAiC,cAAjC,CAA+C;AACnD,EAAA,OAAO,GAAA;AACL,WAAO,QAAQ,MAAM,OAAN,EAAe,QAA9B;AACD;;AAED,EAAA,kBAAkB,GAAA;AAChB,UAAM,QAAQ,GAAG,MAAM,kBAAN,EAAjB;AACA,UAAM,OAAO,GAAG,QAAQ,CAAC,OAAzB;AACA,UAAM,UAAU,GAAG,OAAO,CAAC,UAA3B;AACA,IAAA,OAAO,CAAC,WAAR,CAAoB,UAApB;AACA,4BAAc,OAAd,EAAuB,UAAU,CAAC,UAAlC;AACA,WAAO,QAAP;AACD;;AAZkD;;;;;;;;;;;AChGrD;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAxBA;;;;;;;;;;;;;;AAcA;;;AAcO,MAAM,WAAW,GAAI,KAAD,IAAuC;AAChE,SACI,KAAK,KAAK,IAAV,IACA,EAAE,OAAO,KAAP,KAAiB,QAAjB,IAA6B,OAAO,KAAP,KAAiB,UAAhD,CAFJ;AAGD,CAJM;;;;AAKA,MAAM,UAAU,GAAI,KAAD,IAA+C;AACvE,SAAO,KAAK,CAAC,OAAN,CAAc,KAAd,KACH;AACA,GAAC,EAAE,KAAK,IAAK,KAAa,CAAC,MAAM,CAAC,QAAR,CAAzB,CAFL;AAGD,CAJM;AAMP;;;;;;;;;AAKM,MAAO,kBAAP,CAAyB;AAO7B,EAAA,WAAA,CAAY,OAAZ,EAA8B,IAA9B,EAA4C,OAA5C,EAA0E;AAF1E,SAAA,KAAA,GAAQ,IAAR;AAGE,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,KAAL,GAAa,EAAb;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,OAAO,CAAC,MAAR,GAAiB,CAArC,EAAwC,CAAC,EAAzC,EAA6C;AAC1C,WAAK,KAAL,CAA+B,CAA/B,IAAoC,KAAK,WAAL,EAApC;AACF;AACF;AAED;;;;;AAGU,EAAA,WAAW,GAAA;AACnB,WAAO,IAAI,aAAJ,CAAkB,IAAlB,CAAP;AACD;;AAES,EAAA,SAAS,GAAA;AACjB,UAAM,OAAO,GAAG,KAAK,OAArB;AACA,UAAM,CAAC,GAAG,OAAO,CAAC,MAAR,GAAiB,CAA3B;AACA,QAAI,IAAI,GAAG,EAAX;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AAC1B,MAAA,IAAI,IAAI,OAAO,CAAC,CAAD,CAAf;AACA,YAAM,IAAI,GAAG,KAAK,KAAL,CAAW,CAAX,CAAb;;AACA,UAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,cAAM,CAAC,GAAG,IAAI,CAAC,KAAf;;AACA,YAAI,WAAW,CAAC,CAAD,CAAX,IAAkB,CAAC,UAAU,CAAC,CAAD,CAAjC,EAAsC;AACpC,UAAA,IAAI,IAAI,OAAO,CAAP,KAAa,QAAb,GAAwB,CAAxB,GAA4B,MAAM,CAAC,CAAD,CAA1C;AACD,SAFD,MAEO;AACL,eAAK,MAAM,CAAX,IAAgB,CAAhB,EAAmB;AACjB,YAAA,IAAI,IAAI,OAAO,CAAP,KAAa,QAAb,GAAwB,CAAxB,GAA4B,MAAM,CAAC,CAAD,CAA1C;AACD;AACF;AACF;AACF;;AAED,IAAA,IAAI,IAAI,OAAO,CAAC,CAAD,CAAf;AACA,WAAO,IAAP;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,QAAI,KAAK,KAAT,EAAgB;AACd,WAAK,KAAL,GAAa,KAAb;AACA,WAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,IAA/B,EAAqC,KAAK,SAAL,EAArC;AACD;AACF;;AArD4B;AAwD/B;;;;;;;AAGM,MAAO,aAAP,CAAoB;AAIxB,EAAA,WAAA,CAAY,SAAZ,EAAyC;AAFzC,SAAA,KAAA,GAAiB,SAAjB;AAGE,SAAK,SAAL,GAAiB,SAAjB;AACD;;AAED,EAAA,QAAQ,CAAC,KAAD,EAAe;AACrB,QAAI,KAAK,KAAK,cAAV,KAAuB,CAAC,WAAW,CAAC,KAAD,CAAZ,IAAuB,KAAK,KAAK,KAAK,KAA7D,CAAJ,EAAyE;AACvE,WAAK,KAAL,GAAa,KAAb,CADuE,CAEvE;AACA;AACA;;AACA,UAAI,CAAC,4BAAY,KAAZ,CAAL,EAAyB;AACvB,aAAK,SAAL,CAAe,KAAf,GAAuB,IAAvB;AACD;AACF;AACF;;AAED,EAAA,MAAM,GAAA;AACJ,WAAO,4BAAY,KAAK,KAAjB,CAAP,EAAgC;AAC9B,YAAM,SAAS,GAAG,KAAK,KAAvB;AACA,WAAK,KAAL,GAAa,cAAb;AACA,MAAA,SAAS,CAAC,IAAD,CAAT;AACD;;AACD,QAAI,KAAK,KAAL,KAAe,cAAnB,EAA6B;AAC3B;AACD;;AACD,SAAK,SAAL,CAAe,MAAf;AACD;;AA9BuB;AAiC1B;;;;;;;;;;;;AAQM,MAAO,QAAP,CAAe;AAOnB,EAAA,WAAA,CAAY,OAAZ,EAAkC;AAHlC,SAAA,KAAA,GAAiB,SAAjB;AACQ,SAAA,cAAA,GAA0B,SAA1B;AAGN,SAAK,OAAL,GAAe,OAAf;AACD;AAED;;;;;;;AAKA,EAAA,UAAU,CAAC,SAAD,EAAgB;AACxB,SAAK,SAAL,GAAiB,SAAS,CAAC,WAAV,CAAsB,6BAAtB,CAAjB;AACA,SAAK,OAAL,GAAe,SAAS,CAAC,WAAV,CAAsB,6BAAtB,CAAf;AACD;AAED;;;;;;;;;AAOA,EAAA,eAAe,CAAC,GAAD,EAAU;AACvB,SAAK,SAAL,GAAiB,GAAjB;AACA,SAAK,OAAL,GAAe,GAAG,CAAC,WAAnB;AACD;AAED;;;;;;;AAKA,EAAA,cAAc,CAAC,IAAD,EAAe;AAC3B,IAAA,IAAI,CAAC,QAAL,CAAc,KAAK,SAAL,GAAiB,6BAA/B;;AACA,IAAA,IAAI,CAAC,QAAL,CAAc,KAAK,OAAL,GAAe,6BAA7B;AACD;AAED;;;;;;;AAKA,EAAA,eAAe,CAAC,GAAD,EAAc;AAC3B,IAAA,GAAG,CAAC,QAAJ,CAAa,KAAK,SAAL,GAAiB,6BAA9B;;AACA,SAAK,OAAL,GAAe,GAAG,CAAC,OAAnB;AACA,IAAA,GAAG,CAAC,OAAJ,GAAc,KAAK,SAAnB;AACD;;AAED,EAAA,QAAQ,CAAC,KAAD,EAAe;AACrB,SAAK,cAAL,GAAsB,KAAtB;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,WAAO,4BAAY,KAAK,cAAjB,CAAP,EAAyC;AACvC,YAAM,SAAS,GAAG,KAAK,cAAvB;AACA,WAAK,cAAL,GAAsB,cAAtB;AACA,MAAA,SAAS,CAAC,IAAD,CAAT;AACD;;AACD,UAAM,KAAK,GAAG,KAAK,cAAnB;;AACA,QAAI,KAAK,KAAK,cAAd,EAAwB;AACtB;AACD;;AACD,QAAI,WAAW,CAAC,KAAD,CAAf,EAAwB;AACtB,UAAI,KAAK,KAAK,KAAK,KAAnB,EAA0B;AACxB,aAAK,YAAL,CAAkB,KAAlB;AACD;AACF,KAJD,MAIO,IAAI,KAAK,YAAY,8BAArB,EAAqC;AAC1C,WAAK,sBAAL,CAA4B,KAA5B;AACD,KAFM,MAEA,IAAI,KAAK,YAAY,IAArB,EAA2B;AAChC,WAAK,YAAL,CAAkB,KAAlB;AACD,KAFM,MAEA,IAAI,UAAU,CAAC,KAAD,CAAd,EAAuB;AAC5B,WAAK,gBAAL,CAAsB,KAAtB;AACD,KAFM,MAEA,IAAI,KAAK,KAAK,aAAd,EAAuB;AAC5B,WAAK,KAAL,GAAa,aAAb;AACA,WAAK,KAAL;AACD,KAHM,MAGA;AACL;AACA,WAAK,YAAL,CAAkB,KAAlB;AACD;AACF;;AAEO,EAAA,QAAQ,CAAC,IAAD,EAAW;AACzB,SAAK,OAAL,CAAa,UAAb,CAAyB,YAAzB,CAAsC,IAAtC,EAA4C,KAAK,OAAjD;AACD;;AAEO,EAAA,YAAY,CAAC,KAAD,EAAY;AAC9B,QAAI,KAAK,KAAL,KAAe,KAAnB,EAA0B;AACxB;AACD;;AACD,SAAK,KAAL;;AACA,SAAK,QAAL,CAAc,KAAd;;AACA,SAAK,KAAL,GAAa,KAAb;AACD;;AAEO,EAAA,YAAY,CAAC,KAAD,EAAe;AACjC,UAAM,IAAI,GAAG,KAAK,SAAL,CAAe,WAA5B;AACA,IAAA,KAAK,GAAG,KAAK,IAAI,IAAT,GAAgB,EAAhB,GAAqB,KAA7B,CAFiC,CAGjC;AACA;;AACA,UAAM,aAAa,GACf,OAAO,KAAP,KAAiB,QAAjB,GAA4B,KAA5B,GAAoC,MAAM,CAAC,KAAD,CAD9C;;AAEA,QAAI,IAAI,KAAK,KAAK,OAAL,CAAa,eAAtB,IACA,IAAI,CAAC,QAAL,KAAkB;AAAE;AADxB,MAC8C;AAC5C;AACA;AACA;AACC,QAAA,IAAa,CAAC,IAAd,GAAqB,aAArB;AACF,OAND,MAMO;AACL,WAAK,YAAL,CAAkB,QAAQ,CAAC,cAAT,CAAwB,aAAxB,CAAlB;AACD;;AACD,SAAK,KAAL,GAAa,KAAb;AACD;;AAEO,EAAA,sBAAsB,CAAC,KAAD,EAAsB;AAClD,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,eAAb,CAA6B,KAA7B,CAAjB;;AACA,QAAI,KAAK,KAAL,YAAsB,kCAAtB,IACA,KAAK,KAAL,CAAW,QAAX,KAAwB,QAD5B,EACsC;AACpC,WAAK,KAAL,CAAW,MAAX,CAAkB,KAAK,CAAC,MAAxB;AACD,KAHD,MAGO;AACL;AACA;AACA;AACA;AACA,YAAM,QAAQ,GACV,IAAI,kCAAJ,CAAqB,QAArB,EAA+B,KAAK,CAAC,SAArC,EAAgD,KAAK,OAArD,CADJ;;AAEA,YAAM,QAAQ,GAAG,QAAQ,CAAC,MAAT,EAAjB;;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,KAAK,CAAC,MAAtB;;AACA,WAAK,YAAL,CAAkB,QAAlB;;AACA,WAAK,KAAL,GAAa,QAAb;AACD;AACF;;AAEO,EAAA,gBAAgB,CAAC,KAAD,EAAyB;AAC/C;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA,QAAI,CAAC,KAAK,CAAC,OAAN,CAAc,KAAK,KAAnB,CAAL,EAAgC;AAC9B,WAAK,KAAL,GAAa,EAAb;AACA,WAAK,KAAL;AACD,KAd8C,CAgB/C;AACA;;;AACA,UAAM,SAAS,GAAG,KAAK,KAAvB;AACA,QAAI,SAAS,GAAG,CAAhB;AACA,QAAI,QAAJ;;AAEA,SAAK,MAAM,IAAX,IAAmB,KAAnB,EAA0B;AACxB;AACA,MAAA,QAAQ,GAAG,SAAS,CAAC,SAAD,CAApB,CAFwB,CAIxB;;AACA,UAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,QAAA,QAAQ,GAAG,IAAI,QAAJ,CAAa,KAAK,OAAlB,CAAX;AACA,QAAA,SAAS,CAAC,IAAV,CAAe,QAAf;;AACA,YAAI,SAAS,KAAK,CAAlB,EAAqB;AACnB,UAAA,QAAQ,CAAC,cAAT,CAAwB,IAAxB;AACD,SAFD,MAEO;AACL,UAAA,QAAQ,CAAC,eAAT,CAAyB,SAAS,CAAC,SAAS,GAAG,CAAb,CAAlC;AACD;AACF;;AACD,MAAA,QAAQ,CAAC,QAAT,CAAkB,IAAlB;AACA,MAAA,QAAQ,CAAC,MAAT;AACA,MAAA,SAAS;AACV;;AAED,QAAI,SAAS,GAAG,SAAS,CAAC,MAA1B,EAAkC;AAChC;AACA,MAAA,SAAS,CAAC,MAAV,GAAmB,SAAnB;AACA,WAAK,KAAL,CAAW,QAAQ,IAAI,QAAQ,CAAC,OAAhC;AACD;AACF;;AAED,EAAA,KAAK,CAAC,SAAA,GAAkB,KAAK,SAAxB,EAAiC;AACpC,0BACI,KAAK,SAAL,CAAe,UADnB,EACgC,SAAS,CAAC,WAD1C,EACwD,KAAK,OAD7D;AAED;;AA7LkB;AAgMrB;;;;;;;;;;;AAOM,MAAO,oBAAP,CAA2B;AAO/B,EAAA,WAAA,CAAY,OAAZ,EAA8B,IAA9B,EAA4C,OAA5C,EAA0E;AAH1E,SAAA,KAAA,GAAiB,SAAjB;AACQ,SAAA,cAAA,GAA0B,SAA1B;;AAGN,QAAI,OAAO,CAAC,MAAR,KAAmB,CAAnB,IAAwB,OAAO,CAAC,CAAD,CAAP,KAAe,EAAvC,IAA6C,OAAO,CAAC,CAAD,CAAP,KAAe,EAAhE,EAAoE;AAClE,YAAM,IAAI,KAAJ,CACF,yDADE,CAAN;AAED;;AACD,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,OAAL,GAAe,OAAf;AACD;;AAED,EAAA,QAAQ,CAAC,KAAD,EAAe;AACrB,SAAK,cAAL,GAAsB,KAAtB;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,WAAO,4BAAY,KAAK,cAAjB,CAAP,EAAyC;AACvC,YAAM,SAAS,GAAG,KAAK,cAAvB;AACA,WAAK,cAAL,GAAsB,cAAtB;AACA,MAAA,SAAS,CAAC,IAAD,CAAT;AACD;;AACD,QAAI,KAAK,cAAL,KAAwB,cAA5B,EAAsC;AACpC;AACD;;AACD,UAAM,KAAK,GAAG,CAAC,CAAC,KAAK,cAArB;;AACA,QAAI,KAAK,KAAL,KAAe,KAAnB,EAA0B;AACxB,UAAI,KAAJ,EAAW;AACT,aAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,IAA/B,EAAqC,EAArC;AACD,OAFD,MAEO;AACL,aAAK,OAAL,CAAa,eAAb,CAA6B,KAAK,IAAlC;AACD;;AACD,WAAK,KAAL,GAAa,KAAb;AACD;;AACD,SAAK,cAAL,GAAsB,cAAtB;AACD;;AAxC8B;AA2CjC;;;;;;;;;;;;;AASM,MAAO,iBAAP,SAAiC,kBAAjC,CAAmD;AAGvD,EAAA,WAAA,CAAY,OAAZ,EAA8B,IAA9B,EAA4C,OAA5C,EAA0E;AACxE,UAAM,OAAN,EAAe,IAAf,EAAqB,OAArB;AACA,SAAK,MAAL,GACK,OAAO,CAAC,MAAR,KAAmB,CAAnB,IAAwB,OAAO,CAAC,CAAD,CAAP,KAAe,EAAvC,IAA6C,OAAO,CAAC,CAAD,CAAP,KAAe,EADjE;AAED;;AAES,EAAA,WAAW,GAAA;AACnB,WAAO,IAAI,YAAJ,CAAiB,IAAjB,CAAP;AACD;;AAES,EAAA,SAAS,GAAA;AACjB,QAAI,KAAK,MAAT,EAAiB;AACf,aAAO,KAAK,KAAL,CAAW,CAAX,EAAc,KAArB;AACD;;AACD,WAAO,MAAM,SAAN,EAAP;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,QAAI,KAAK,KAAT,EAAgB;AACd,WAAK,KAAL,GAAa,KAAb,CADc,CAEd;;AACC,WAAK,OAAL,CAAqB,KAAK,IAA1B,IAAkC,KAAK,SAAL,EAAlC;AACF;AACF;;AA1BsD;;;;AA6BnD,MAAO,YAAP,SAA4B,aAA5B,CAAyC,GAE/C;AACA;AACA;AACA;;;;AACA,IAAI,qBAAqB,GAAG,KAA5B;;AAEA,IAAI;AACF,QAAM,OAAO,GAAG;AACd,QAAI,OAAJ,GAAW;AACT,MAAA,qBAAqB,GAAG,IAAxB;AACA,aAAO,KAAP;AACD;;AAJa,GAAhB,CADE,CAOF;;AACA,EAAA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,EAAgC,OAAhC,EAAgD,OAAhD,EARE,CASF;;AACA,EAAA,MAAM,CAAC,mBAAP,CAA2B,MAA3B,EAAmC,OAAnC,EAAmD,OAAnD;AACD,CAXD,CAWE,OAAO,EAAP,EAAW,CACZ;;AAKK,MAAO,SAAP,CAAgB;AASpB,EAAA,WAAA,CAAY,OAAZ,EAA8B,SAA9B,EAAiD,YAAjD,EAA2E;AAL3E,SAAA,KAAA,GAA2C,SAA3C;AAEQ,SAAA,cAAA,GAAoD,SAApD;AAIN,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,YAAL,GAAoB,YAApB;;AACA,SAAK,kBAAL,GAA2B,CAAD,IAAO,KAAK,WAAL,CAAiB,CAAjB,CAAjC;AACD;;AAED,EAAA,QAAQ,CAAC,KAAD,EAAyC;AAC/C,SAAK,cAAL,GAAsB,KAAtB;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,WAAO,4BAAY,KAAK,cAAjB,CAAP,EAAyC;AACvC,YAAM,SAAS,GAAG,KAAK,cAAvB;AACA,WAAK,cAAL,GAAsB,cAAtB;AACA,MAAA,SAAS,CAAC,IAAD,CAAT;AACD;;AACD,QAAI,KAAK,cAAL,KAAwB,cAA5B,EAAsC;AACpC;AACD;;AAED,UAAM,WAAW,GAAG,KAAK,cAAzB;AACA,UAAM,WAAW,GAAG,KAAK,KAAzB;AACA,UAAM,oBAAoB,GAAG,WAAW,IAAI,IAAf,IACzB,WAAW,IAAI,IAAf,KACK,WAAW,CAAC,OAAZ,KAAwB,WAAW,CAAC,OAApC,IACA,WAAW,CAAC,IAAZ,KAAqB,WAAW,CAAC,IADjC,IAEA,WAAW,CAAC,OAAZ,KAAwB,WAAW,CAAC,OAHzC,CADJ;AAKA,UAAM,iBAAiB,GACnB,WAAW,IAAI,IAAf,KAAwB,WAAW,IAAI,IAAf,IAAuB,oBAA/C,CADJ;;AAGA,QAAI,oBAAJ,EAA0B;AACxB,WAAK,OAAL,CAAa,mBAAb,CACI,KAAK,SADT,EACoB,KAAK,kBADzB,EAC6C,KAAK,SADlD;AAED;;AACD,QAAI,iBAAJ,EAAuB;AACrB,WAAK,SAAL,GAAiB,UAAU,CAAC,WAAD,CAA3B;AACA,WAAK,OAAL,CAAa,gBAAb,CACI,KAAK,SADT,EACoB,KAAK,kBADzB,EAC6C,KAAK,SADlD;AAED;;AACD,SAAK,KAAL,GAAa,WAAb;AACA,SAAK,cAAL,GAAsB,cAAtB;AACD;;AAED,EAAA,WAAW,CAAC,KAAD,EAAa;AACtB,QAAI,OAAO,KAAK,KAAZ,KAAsB,UAA1B,EAAsC;AACpC,WAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,YAAL,IAAqB,KAAK,OAA1C,EAAmD,KAAnD;AACD,KAFD,MAEO;AACJ,WAAK,KAAL,CAAmC,WAAnC,CAA+C,KAA/C;AACF;AACF;;AA3DmB,EA8DtB;AACA;AACA;;;;;AACA,MAAM,UAAU,GAAI,CAAD,IAA0C,CAAC,KACzD,qBAAqB,GACjB;AAAC,EAAA,OAAO,EAAE,CAAC,CAAC,OAAZ;AAAqB,EAAA,OAAO,EAAE,CAAC,CAAC,OAAhC;AAAyC,EAAA,IAAI,EAAE,CAAC,CAAC;AAAjD,CADiB,GAEjB,CAAC,CAAC,OAHmD,CAA9D;;;;;;;;;AC/eA;;AAnBA;;;;;;;;;;;;;;AAuBA;;;AAGM,MAAO,wBAAP,CAA+B;AACnC;;;;;;;;;AASA,EAAA,0BAA0B,CACtB,OADsB,EACJ,IADI,EACU,OADV,EAEtB,OAFsB,EAEA;AACxB,UAAM,MAAM,GAAG,IAAI,CAAC,CAAD,CAAnB;;AACA,QAAI,MAAM,KAAK,GAAf,EAAoB;AAClB,YAAM,SAAS,GAAG,IAAI,wBAAJ,CAAsB,OAAtB,EAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAA/B,EAA8C,OAA9C,CAAlB;AACA,aAAO,SAAS,CAAC,KAAjB;AACD;;AACD,QAAI,MAAM,KAAK,GAAf,EAAoB;AAClB,aAAO,CAAC,IAAI,gBAAJ,CAAc,OAAd,EAAuB,IAAI,CAAC,KAAL,CAAW,CAAX,CAAvB,EAAsC,OAAO,CAAC,YAA9C,CAAD,CAAP;AACD;;AACD,QAAI,MAAM,KAAK,GAAf,EAAoB;AAClB,aAAO,CAAC,IAAI,2BAAJ,CAAyB,OAAzB,EAAkC,IAAI,CAAC,KAAL,CAAW,CAAX,CAAlC,EAAiD,OAAjD,CAAD,CAAP;AACD;;AACD,UAAM,SAAS,GAAG,IAAI,yBAAJ,CAAuB,OAAvB,EAAgC,IAAhC,EAAsC,OAAtC,CAAlB;AACA,WAAO,SAAS,CAAC,KAAjB;AACD;AACD;;;;;;AAIA,EAAA,oBAAoB,CAAC,OAAD,EAAuB;AACzC,WAAO,IAAI,eAAJ,CAAa,OAAb,CAAP;AACD;;AAjCkC;;;AAoC9B,MAAM,wBAAwB,GAAG,IAAI,wBAAJ,EAAjC;;;;;;;;;;;AC3CP;;AAnBA;;;;;;;;;;;;;;AA2CA;;;;AAIM,SAAU,eAAV,CAA0B,MAA1B,EAAgD;AACpD,MAAI,aAAa,GAAG,cAAc,CAAC,GAAf,CAAmB,MAAM,CAAC,IAA1B,CAApB;;AACA,MAAI,aAAa,KAAK,SAAtB,EAAiC;AAC/B,IAAA,aAAa,GAAG;AACd,MAAA,YAAY,EAAE,IAAI,OAAJ,EADA;AAEd,MAAA,SAAS,EAAE,IAAI,GAAJ;AAFG,KAAhB;AAIA,IAAA,cAAc,CAAC,GAAf,CAAmB,MAAM,CAAC,IAA1B,EAAgC,aAAhC;AACD;;AAED,MAAI,QAAQ,GAAG,aAAa,CAAC,YAAd,CAA2B,GAA3B,CAA+B,MAAM,CAAC,OAAtC,CAAf;;AACA,MAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,WAAO,QAAP;AACD,GAbmD,CAepD;AACA;;;AACA,QAAM,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,gBAApB,CAAZ,CAjBoD,CAmBpD;;AACA,EAAA,QAAQ,GAAG,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,GAA5B,CAAX;;AACA,MAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B;AACA,IAAA,QAAQ,GAAG,IAAI,kBAAJ,CAAa,MAAb,EAAqB,MAAM,CAAC,kBAAP,EAArB,CAAX,CAF0B,CAG1B;;AACA,IAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,GAA5B,EAAiC,QAAjC;AACD,GA1BmD,CA4BpD;;;AACA,EAAA,aAAa,CAAC,YAAd,CAA2B,GAA3B,CAA+B,MAAM,CAAC,OAAtC,EAA+C,QAA/C;AACA,SAAO,QAAP;AACD;;AAiBM,MAAM,cAAc,GAAG,IAAI,GAAJ,EAAvB;;;;;;;;;;AC7EP;;AACA;;AAEA;;AArBA;;;;;;;;;;;;;;AAcA;;;AASO,MAAM,KAAK,GAAG,IAAI,OAAJ,EAAd;AAEP;;;;;;;;;;;;;;;;;;AAeO,MAAM,MAAM,GACf,CAAC,MAAD,EACC,SADD,EAEC,OAFD,KAEqC;AACnC,MAAI,IAAI,GAAG,KAAK,CAAC,GAAN,CAAU,SAAV,CAAX;;AACA,MAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,0BAAY,SAAZ,EAAuB,SAAS,CAAC,UAAjC;AACA,IAAA,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,IAAI,GAAG,IAAI,eAAJ,CAAY,MAAA,CAAA,MAAA,CAAA;AACjB,MAAA,eAAe,EAAf;AADiB,KAAA,EAEd,OAFc,CAAZ,CAA5B;AAIA,IAAA,IAAI,CAAC,UAAL,CAAgB,SAAhB;AACD;;AACD,EAAA,IAAI,CAAC,QAAL,CAAc,MAAd;AACA,EAAA,IAAI,CAAC,MAAL;AACD,CAfE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;;AACA;;AAGA;;AAEA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAGA;;AA/CA;;;;;;;;;;;;;;AAcA;;;;;;;;;;;;;;AAcA;;;;AASA;AAkBA;AACA;AACA;AACA,CAAC,MAAM,CAAC,iBAAD,CAAN,KAA8B,MAAM,CAAC,iBAAD,CAAN,GAA4B,EAA1D,CAAD,EAAgE,IAAhE,CAAqE,OAArE;AAEA;;;;;AAIO,MAAM,IAAI,GAAG,CAAC,OAAD,EAAgC,GAAG,MAAnC,KAChB,IAAI,8BAAJ,CAAmB,OAAnB,EAA4B,MAA5B,EAAoC,MAApC,EAA4C,kDAA5C,CADG;AAGP;;;;;;;;AAIO,MAAM,GAAG,GAAG,CAAC,OAAD,EAAgC,GAAG,MAAnC,KACf,IAAI,iCAAJ,CAAsB,OAAtB,EAA+B,MAA/B,EAAuC,KAAvC,EAA8C,kDAA9C,CADG;;;;;;;;;;;;ACrDP;;AAlBA;;;;;;;;;;;;;;AAcA;;;AAMA,MAAM,gBAAgB,GAAG;AAAI;AAA7B;AAEA;;;;;;;;;;;;;;;;;AAgBM,SAAU,uBAAV,CACF,QADE,EACkB,aADlB,EAC0C;AAC9C,QAAM;AAAC,IAAA,OAAO,EAAE;AAAC,MAAA;AAAD,KAAV;AAAqB,IAAA;AAArB,MAA8B,QAApC;AACA,QAAM,MAAM,GACR,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,gBAAnC,EAAqD,IAArD,EAA2D,KAA3D,CADJ;AAEA,MAAI,SAAS,GAAG,8BAA8B,CAAC,KAAD,CAA9C;AACA,MAAI,IAAI,GAAG,KAAK,CAAC,SAAD,CAAhB;AACA,MAAI,SAAS,GAAG,CAAC,CAAjB;AACA,MAAI,WAAW,GAAG,CAAlB;AACA,QAAM,uBAAuB,GAAG,EAAhC;AACA,MAAI,mBAAmB,GAAc,IAArC;;AACA,SAAO,MAAM,CAAC,QAAP,EAAP,EAA0B;AACxB,IAAA,SAAS;AACT,UAAM,IAAI,GAAG,MAAM,CAAC,WAApB,CAFwB,CAGxB;;AACA,QAAI,IAAI,CAAC,eAAL,KAAyB,mBAA7B,EAAkD;AAChD,MAAA,mBAAmB,GAAG,IAAtB;AACD,KANuB,CAOxB;;;AACA,QAAI,aAAa,CAAC,GAAd,CAAkB,IAAlB,CAAJ,EAA6B;AAC3B,MAAA,uBAAuB,CAAC,IAAxB,CAA6B,IAA7B,EAD2B,CAE3B;;AACA,UAAI,mBAAmB,KAAK,IAA5B,EAAkC;AAChC,QAAA,mBAAmB,GAAG,IAAtB;AACD;AACF,KAduB,CAexB;;;AACA,QAAI,mBAAmB,KAAK,IAA5B,EAAkC;AAChC,MAAA,WAAW;AACZ;;AACD,WAAO,IAAI,KAAK,SAAT,IAAsB,IAAI,CAAC,KAAL,KAAe,SAA5C,EAAuD;AACrD;AACA;AACA,MAAA,IAAI,CAAC,KAAL,GAAa,mBAAmB,KAAK,IAAxB,GAA+B,CAAC,CAAhC,GAAoC,IAAI,CAAC,KAAL,GAAa,WAA9D,CAHqD,CAIrD;;AACA,MAAA,SAAS,GAAG,8BAA8B,CAAC,KAAD,EAAQ,SAAR,CAA1C;AACA,MAAA,IAAI,GAAG,KAAK,CAAC,SAAD,CAAZ;AACD;AACF;;AACD,EAAA,uBAAuB,CAAC,OAAxB,CAAiC,CAAD,IAAO,CAAC,CAAC,UAAF,CAAc,WAAd,CAA0B,CAA1B,CAAvC;AACD;;AAED,MAAM,UAAU,GAAI,IAAD,IAAe;AAChC,MAAI,KAAK,GAAI,IAAI,CAAC,QAAL,KAAkB;AAAG;AAAtB,IAA2D,CAA3D,GAA+D,CAA3E;AACA,QAAM,MAAM,GAAG,QAAQ,CAAC,gBAAT,CAA0B,IAA1B,EAAgC,gBAAhC,EAAkD,IAAlD,EAAwD,KAAxD,CAAf;;AACA,SAAO,MAAM,CAAC,QAAP,EAAP,EAA0B;AACxB,IAAA,KAAK;AACN;;AACD,SAAO,KAAP;AACD,CAPD;;AASA,MAAM,8BAA8B,GAChC,CAAC,KAAD,EAAwB,UAAA,GAAqB,CAAC,CAA9C,KAAmD;AACjD,OAAK,IAAI,CAAC,GAAG,UAAU,GAAG,CAA1B,EAA6B,CAAC,GAAG,KAAK,CAAC,MAAvC,EAA+C,CAAC,EAAhD,EAAoD;AAClD,UAAM,IAAI,GAAG,KAAK,CAAC,CAAD,CAAlB;;AACA,QAAI,oCAAqB,IAArB,CAAJ,EAAgC;AAC9B,aAAO,CAAP;AACD;AACF;;AACD,SAAO,CAAC,CAAR;AACD,CATL;AAWA;;;;;;;AAKM,SAAU,sBAAV,CACF,QADE,EACkB,IADlB,EAC8B,OAAA,GAAqB,IADnD,EACuD;AAC3D,QAAM;AAAC,IAAA,OAAO,EAAE;AAAC,MAAA;AAAD,KAAV;AAAqB,IAAA;AAArB,MAA8B,QAApC,CAD2D,CAE3D;AACA;;AACA,MAAI,OAAO,KAAK,IAAZ,IAAoB,OAAO,KAAK,SAApC,EAA+C;AAC7C,IAAA,OAAO,CAAC,WAAR,CAAoB,IAApB;AACA;AACD;;AACD,QAAM,MAAM,GACR,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,gBAAnC,EAAqD,IAArD,EAA2D,KAA3D,CADJ;AAEA,MAAI,SAAS,GAAG,8BAA8B,CAAC,KAAD,CAA9C;AACA,MAAI,WAAW,GAAG,CAAlB;AACA,MAAI,WAAW,GAAG,CAAC,CAAnB;;AACA,SAAO,MAAM,CAAC,QAAP,EAAP,EAA0B;AACxB,IAAA,WAAW;AACX,UAAM,UAAU,GAAG,MAAM,CAAC,WAA1B;;AACA,QAAI,UAAU,KAAK,OAAnB,EAA4B;AAC1B,MAAA,WAAW,GAAG,UAAU,CAAC,IAAD,CAAxB;AACA,MAAA,OAAO,CAAC,UAAR,CAAoB,YAApB,CAAiC,IAAjC,EAAuC,OAAvC;AACD;;AACD,WAAO,SAAS,KAAK,CAAC,CAAf,IAAoB,KAAK,CAAC,SAAD,CAAL,CAAiB,KAAjB,KAA2B,WAAtD,EAAmE;AACjE;AACA,UAAI,WAAW,GAAG,CAAlB,EAAqB;AACnB,eAAO,SAAS,KAAK,CAAC,CAAtB,EAAyB;AACvB,UAAA,KAAK,CAAC,SAAD,CAAL,CAAiB,KAAjB,IAA0B,WAA1B;AACA,UAAA,SAAS,GAAG,8BAA8B,CAAC,KAAD,EAAQ,SAAR,CAA1C;AACD;;AACD;AACD;;AACD,MAAA,SAAS,GAAG,8BAA8B,CAAC,KAAD,EAAQ,SAAR,CAA1C;AACD;AACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHD;;AACA;;AAEA;;AACA;;AACA;;AAEA;;AAEA;;AAnCA;;;;;;;;;;;;;;AAcA;;;;;;;;AAQA;;;;AAeA;AACA,MAAM,mBAAmB,GAAG,CAAC,IAAD,EAAe,SAAf,KACxB,GAAG,IAAI,KAAK,SAAS,EADzB;;AAGA,IAAI,yBAAyB,GAAG,IAAhC;;AAEA,IAAI,OAAO,MAAM,CAAC,QAAd,KAA2B,WAA/B,EAA4C;AAC1C,EAAA,yBAAyB,GAAG,KAA5B;AACD,CAFD,MAEO,IAAI,OAAO,MAAM,CAAC,QAAP,CAAgB,kBAAvB,KAA8C,WAAlD,EAA+D;AACpE,EAAA,OAAO,CAAC,IAAR,CACI,0CAAA,GACA,qEADA,GAEA,gCAHJ;AAIA,EAAA,yBAAyB,GAAG,KAA5B;AACD;AAED;;;;;;AAIA,MAAM,oBAAoB,GAAI,SAAD,IACxB,MAAD,IAA2B;AACzB,QAAM,QAAQ,GAAG,mBAAmB,CAAC,MAAM,CAAC,IAAR,EAAc,SAAd,CAApC;;AACA,MAAI,aAAa,GAAG,gCAAe,GAAf,CAAmB,QAAnB,CAApB;;AACA,MAAI,aAAa,KAAK,SAAtB,EAAiC;AAC/B,IAAA,aAAa,GAAG;AACd,MAAA,YAAY,EAAE,IAAI,OAAJ,EADA;AAEd,MAAA,SAAS,EAAE,IAAI,GAAJ;AAFG,KAAhB;;AAIA,oCAAe,GAAf,CAAmB,QAAnB,EAA6B,aAA7B;AACD;;AAED,MAAI,QAAQ,GAAG,aAAa,CAAC,YAAd,CAA2B,GAA3B,CAA+B,MAAM,CAAC,OAAtC,CAAf;;AACA,MAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,WAAO,QAAP;AACD;;AAED,QAAM,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,gBAApB,CAAZ;AACA,EAAA,QAAQ,GAAG,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,GAA5B,CAAX;;AACA,MAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,UAAM,OAAO,GAAG,MAAM,CAAC,kBAAP,EAAhB;;AACA,QAAI,yBAAJ,EAA+B;AAC7B,MAAA,MAAM,CAAC,QAAP,CAAiB,kBAAjB,CAAoC,OAApC,EAA6C,SAA7C;AACD;;AACD,IAAA,QAAQ,GAAG,IAAI,kBAAJ,CAAa,MAAb,EAAqB,OAArB,CAAX;AACA,IAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,GAA5B,EAAiC,QAAjC;AACD;;AACD,EAAA,aAAa,CAAC,YAAd,CAA2B,GAA3B,CAA+B,MAAM,CAAC,OAAtC,EAA+C,QAA/C;AACA,SAAO,QAAP;AACD,CA7BL;;AA+BA,MAAM,cAAc,GAAG,CAAC,MAAD,EAAS,KAAT,CAAvB;AAEA;;;;AAGA,MAAM,4BAA4B,GAAI,SAAD,IAAsB;AACzD,EAAA,cAAc,CAAC,OAAf,CAAwB,IAAD,IAAS;AAC9B,UAAM,SAAS,GAAG,gCAAe,GAAf,CAAmB,mBAAmB,CAAC,IAAD,EAAO,SAAP,CAAtC,CAAlB;;AACA,QAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,MAAA,SAAS,CAAC,SAAV,CAAoB,OAApB,CAA6B,QAAD,IAAa;AACvC,cAAM;AAAC,UAAA,OAAO,EAAE;AAAC,YAAA;AAAD;AAAV,YAAuB,QAA7B,CADuC,CAEvC;;AACA,cAAM,MAAM,GAAG,IAAI,GAAJ,EAAf;AACA,QAAA,KAAK,CAAC,IAAN,CAAW,OAAO,CAAC,gBAAR,CAAyB,OAAzB,CAAX,EAA8C,OAA9C,CAAuD,CAAD,IAAe;AACnE,UAAA,MAAM,CAAC,GAAP,CAAW,CAAX;AACD,SAFD;AAGA,qDAAwB,QAAxB,EAAkC,MAAlC;AACD,OARD;AASD;AACF,GAbD;AAcD,CAfD;;AAiBA,MAAM,cAAc,GAAG,IAAI,GAAJ,EAAvB;AAEA;;;;;;;;;;;;;;;AAcA,MAAM,qBAAqB,GACvB,CAAC,SAAD,EAAoB,WAApB,EAAmD,QAAnD,KAA0E;AACxE,EAAA,cAAc,CAAC,GAAf,CAAmB,SAAnB,EADwE,CAExE;AACA;AACA;;AACA,QAAM,eAAe,GACjB,CAAC,CAAC,QAAF,GAAa,QAAQ,CAAC,OAAtB,GAAgC,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CADpC,CALwE,CAOxE;;AACA,QAAM,MAAM,GAAG,WAAW,CAAC,gBAAZ,CAA6B,OAA7B,CAAf;AACA,QAAM;AAAC,IAAA;AAAD,MAAW,MAAjB,CATwE,CAUxE;;AACA,MAAI,MAAM,KAAK,CAAf,EAAkB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,MAAM,CAAC,QAAP,CAAiB,qBAAjB,CAAuC,eAAvC,EAAwD,SAAxD;AACA;AACD;;AACD,QAAM,cAAc,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAvB,CAzBwE,CA0BxE;AACA;AACA;AACA;AACA;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAAiC;AAC/B,UAAM,KAAK,GAAG,MAAM,CAAC,CAAD,CAApB;AACA,IAAA,KAAK,CAAC,UAAN,CAAkB,WAAlB,CAA8B,KAA9B;AACA,IAAA,cAAc,CAAC,WAAf,IAA+B,KAAK,CAAC,WAArC;AACD,GAnCuE,CAoCxE;;;AACA,EAAA,4BAA4B,CAAC,SAAD,CAA5B,CArCwE,CAsCxE;AACA;;AACA,QAAM,OAAO,GAAG,eAAe,CAAC,OAAhC;;AACA,MAAI,CAAC,CAAC,QAAN,EAAgB;AACd,gDAAuB,QAAvB,EAAiC,cAAjC,EAAiD,OAAO,CAAC,UAAzD;AACD,GAFD,MAEO;AACL,IAAA,OAAO,CAAC,YAAR,CAAqB,cAArB,EAAqC,OAAO,CAAC,UAA7C;AACD,GA7CuE,CA8CxE;AACA;AACA;;;AACA,EAAA,MAAM,CAAC,QAAP,CAAiB,qBAAjB,CAAuC,eAAvC,EAAwD,SAAxD;AACA,QAAM,KAAK,GAAG,OAAO,CAAC,aAAR,CAAsB,OAAtB,CAAd;;AACA,MAAI,MAAM,CAAC,QAAP,CAAiB,YAAjB,IAAiC,KAAK,KAAK,IAA/C,EAAqD;AACnD;AACA;AACA,IAAA,WAAW,CAAC,YAAZ,CAAyB,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAzB,EAAgD,WAAW,CAAC,UAA5D;AACD,GAJD,MAIO,IAAI,CAAC,CAAC,QAAN,EAAgB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,OAAO,CAAC,YAAR,CAAqB,cAArB,EAAqC,OAAO,CAAC,UAA7C;AACA,UAAM,OAAO,GAAG,IAAI,GAAJ,EAAhB;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,cAAZ;AACA,iDAAwB,QAAxB,EAAkC,OAAlC;AACD;AACF,CAtEL;AA4EA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDO,MAAM,MAAM,GACf,CAAC,MAAD,EACC,SADD,EAEC,OAFD,KAEgC;AAC9B,MAAI,CAAC,OAAD,IAAY,OAAO,OAAP,KAAmB,QAA/B,IAA2C,CAAC,OAAO,CAAC,SAAxD,EAAmE;AACjE,UAAM,IAAI,KAAJ,CAAU,qCAAV,CAAN;AACD;;AACD,QAAM,SAAS,GAAG,OAAO,CAAC,SAA1B;;AACA,QAAM,WAAW,GAAG,cAAM,GAAN,CAAU,SAAV,CAApB;;AACA,QAAM,YAAY,GAAG,yBAAyB,IAC1C,SAAS,CAAC,QAAV,KAAuB;AAAG;AADT,KAEjB,CAAC,CAAE,SAAwB,CAAC,IAFhC,CAN8B,CAS9B;;AACA,QAAM,gBAAgB,GAAG,YAAY,IAAI,CAAC,cAAc,CAAC,GAAf,CAAmB,SAAnB,CAA1C,CAV8B,CAW9B;AACA;;AACA,QAAM,eAAe,GACjB,gBAAgB,GAAG,QAAQ,CAAC,sBAAT,EAAH,GAAuC,SAD3D;AAEA,sBACI,MADJ,EAEI,eAFJ,EAGI,MAAA,CAAA,MAAA,CAAA;AAAC,IAAA,eAAe,EAAE,oBAAoB,CAAC,SAAD;AAAtC,GAAA,EAAsD,OAAtD,CAHJ,EAf8B,CAoB9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAI,gBAAJ,EAAsB;AACpB,UAAM,IAAI,GAAG,cAAM,GAAN,CAAU,eAAV,CAAb;;AACA,kBAAM,MAAN,CAAa,eAAb,EAFoB,CAGpB;AACA;AACA;AACA;AACA;;;AACA,UAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,YAAsB,kCAAtB,GACb,IAAI,CAAC,KAAL,CAAW,QADE,GAEb,SAFJ;AAGA,IAAA,qBAAqB,CACjB,SADiB,EACN,eADM,EAC+B,QAD/B,CAArB;AAEA,0BAAY,SAAZ,EAAuB,SAAS,CAAC,UAAjC;AACA,IAAA,SAAS,CAAC,WAAV,CAAsB,eAAtB;;AACA,kBAAM,GAAN,CAAU,SAAV,EAAqB,IAArB;AACD,GA7C6B,CA8C9B;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAI,CAAC,WAAD,IAAgB,YAApB,EAAkC;AAChC,IAAA,MAAM,CAAC,QAAP,CAAiB,YAAjB,CAA+B,SAAwB,CAAC,IAAxD;AACD;AACF,CA1DE;;;;;;;;;;;AClQP;;;;;;;;;;;;;;AAcA;;;;;;;;AAMA,MAAM,CAAC,yBAAP,GACI,CAAwB,IAAxB,EAAiC,IAAjC,KAAsD,IAD1D;;AA+GO,MAAM,gBAAgB,GAA8B;AAEzD,EAAA,WAAW,CAAC,KAAD,EAAiB,IAAjB,EAA+B;AACxC,YAAQ,IAAR;AACE,WAAK,OAAL;AACE,eAAO,KAAK,GAAG,EAAH,GAAQ,IAApB;;AACF,WAAK,MAAL;AACA,WAAK,KAAL;AACE;AACA;AACA,eAAO,KAAK,IAAI,IAAT,GAAgB,KAAhB,GAAwB,IAAI,CAAC,SAAL,CAAe,KAAf,CAA/B;AAPJ;;AASA,WAAO,KAAP;AACD,GAbwD;;AAezD,EAAA,aAAa,CAAC,KAAD,EAAqB,IAArB,EAAmC;AAC9C,YAAQ,IAAR;AACE,WAAK,OAAL;AACE,eAAO,KAAK,KAAK,IAAjB;;AACF,WAAK,MAAL;AACE,eAAO,KAAK,KAAK,IAAV,GAAiB,IAAjB,GAAwB,MAAM,CAAC,KAAD,CAArC;;AACF,WAAK,MAAL;AACA,WAAK,KAAL;AACE,eAAO,IAAI,CAAC,KAAL,CAAW,KAAX,CAAP;AAPJ;;AASA,WAAO,KAAP;AACD;;AA1BwD,CAApD;AAkCP;;;;;;;AAIO,MAAM,QAAQ,GAAe,CAAC,KAAD,EAAiB,GAAjB,KAA0C;AAC5E;AACA,SAAO,GAAG,KAAK,KAAR,KAAkB,GAAG,KAAK,GAAR,IAAe,KAAK,KAAK,KAA3C,CAAP;AACD,CAHM;;;AAKP,MAAM,0BAA0B,GAAwB;AACtD,EAAA,SAAS,EAAE,IAD2C;AAEtD,EAAA,IAAI,EAAE,MAFgD;AAGtD,EAAA,SAAS,EAAE,gBAH2C;AAItD,EAAA,OAAO,EAAE,KAJ6C;AAKtD,EAAA,UAAU,EAAE;AAL0C,CAAxD;AAQA,MAAM,gBAAgB,GAAG,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAzB;AAEA,MAAM,iBAAiB,GAAG,CAA1B;AACA,MAAM,sBAAsB,GAAG,KAAK,CAApC;AACA,MAAM,gCAAgC,GAAG,KAAK,CAA9C;AACA,MAAM,+BAA+B,GAAG,KAAK,CAA7C;AACA,MAAM,mBAAmB,GAAG,KAAK,CAAjC;AAKA;;;;;;;AAMA,MAAM,SAAS,GAAG,WAAlB;AAEA;;;;;;AAKM,MAAgB,eAAhB,SAAwC,WAAxC,CAAmD;AAqOvD,EAAA,WAAA,GAAA;AACE;AAlBM,SAAA,YAAA,GAA4B,CAA5B;AACA,SAAA,mBAAA,GAAgD,SAAhD;AACA,SAAA,cAAA,GAAmC,gBAAnC;AACA,SAAA,qBAAA,GAAgD,SAAhD;AAER;;;;;AAIQ,SAAA,kBAAA,GAAqC,IAAI,GAAJ,EAArC;AAER;;;;AAGQ,SAAA,qBAAA,GACQ,SADR;AAKN,SAAK,UAAL;AACD;AAzMD;;;;;;AAIA,aAAW,kBAAX,GAA6B;AAC3B;AACA,SAAK,QAAL;AACA,UAAM,UAAU,GAAa,EAA7B,CAH2B,CAI3B;AACA;;AACA,SAAK,gBAAL,CAAuB,OAAvB,CAA+B,CAAC,CAAD,EAAI,CAAJ,KAAS;AACtC,YAAM,IAAI,GAAG,KAAK,yBAAL,CAA+B,CAA/B,EAAkC,CAAlC,CAAb;;AACA,UAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,aAAK,uBAAL,CAA6B,GAA7B,CAAiC,IAAjC,EAAuC,CAAvC;;AACA,QAAA,UAAU,CAAC,IAAX,CAAgB,IAAhB;AACD;AACF,KAND;;AAOA,WAAO,UAAP;AACD;AAED;;;;;;AAKA;;;AACQ,SAAO,sBAAP,GAA6B;AACnC;AACA,QAAI,CAAC,KAAK,cAAL,CACG,yBAAyB,CAAC,kBAAD,EAAqB,IAArB,CAD5B,CAAL,EAC8D;AAC5D,WAAK,gBAAL,GAAwB,IAAI,GAAJ,EAAxB,CAD4D,CAE5D;;AACA,YAAM,eAAe,GACjB,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,gBADhC;;AAEA,UAAI,eAAe,KAAK,SAAxB,EAAmC;AACjC,QAAA,eAAe,CAAC,OAAhB,CACI,CAAC,CAAD,EAAyB,CAAzB,KACI,KAAK,gBAAL,CAAuB,GAAvB,CAA2B,CAA3B,EAA8B,CAA9B,CAFR;AAGD;AACF;AACF;AAED;;;;;;;;;AAOA,SAAO,cAAP,CACI,IADJ,EAEI,OAAA,GAA+B,0BAFnC,EAE6D;AAC3D;AACA;AACA;AACA,SAAK,sBAAL;;AACA,SAAK,gBAAL,CAAuB,GAAvB,CAA2B,IAA3B,EAAiC,OAAjC,EAL2D,CAM3D;AACA;AACA;AACA;AACA;;;AACA,QAAI,OAAO,CAAC,UAAR,IAAsB,KAAK,SAAL,CAAe,cAAf,CAA8B,IAA9B,CAA1B,EAA+D;AAC7D;AACD;;AACD,UAAM,GAAG,GAAG,OAAO,IAAP,KAAgB,QAAhB,GAA2B,MAAM,EAAjC,GAAsC,KAAK,IAAI,EAA3D;AACA,IAAA,MAAM,CAAC,cAAP,CAAsB,KAAK,SAA3B,EAAsC,IAAtC,EAA4C;AAC1C;AACA,MAAA,GAAG,GAAA;AACD,eAAQ,KAAkC,GAAlC,CAAR;AACD,OAJyC;;AAK1C,MAAA,GAAG,CAAwB,KAAxB,EAAsC;AACvC,cAAM,QAAQ,GACT,KAAwC,IAAxC,CADL;AAEC,aAAwC,GAAxC,IAAyD,KAAzD;;AACA,aAAoC,cAApC,CAAmD,IAAnD,EAAyD,QAAzD;AACF,OAVyC;;AAW1C,MAAA,YAAY,EAAE,IAX4B;AAY1C,MAAA,UAAU,EAAE;AAZ8B,KAA5C;AAcD;AAED;;;;;;;AAKU,SAAO,QAAP,GAAe;AACvB;AACA,UAAM,SAAS,GAAG,MAAM,CAAC,cAAP,CAAsB,IAAtB,CAAlB;;AACA,QAAI,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAL,EAA0C;AACxC,MAAA,SAAS,CAAC,QAAV;AACD;;AACD,SAAK,SAAL,IAAkB,IAAlB;;AACA,SAAK,sBAAL,GAPuB,CAQvB;;;AACA,SAAK,uBAAL,GAA+B,IAAI,GAAJ,EAA/B,CATuB,CAUvB;AACA;AACA;AACA;;AACA,QAAI,KAAK,cAAL,CAAoB,yBAAyB,CAAC,YAAD,EAAe,IAAf,CAA7C,CAAJ,EAAwE;AACtE,YAAM,KAAK,GAAG,KAAK,UAAnB,CADsE,CAEtE;;AACA,YAAM,QAAQ,GAAG,CACf,GAAG,MAAM,CAAC,mBAAP,CAA2B,KAA3B,CADY,EAEf,IAAI,OAAO,MAAM,CAAC,qBAAd,KAAwC,UAAzC,GACC,MAAM,CAAC,qBAAP,CAA6B,KAA7B,CADD,GAEC,EAFJ,CAFe,CAAjB,CAHsE,CAStE;;AACA,WAAK,MAAM,CAAX,IAAgB,QAAhB,EAA0B;AACxB;AACA;AACA;AACA,aAAK,cAAL,CAAoB,CAApB,EAAwB,KAAa,CAAC,CAAD,CAArC;AACD;AACF;AACF;AAED;;;;;;AAIQ,SAAO,yBAAP,CACJ,IADI,EACe,OADf,EAC2C;AACjD,UAAM,SAAS,GAAG,OAAO,CAAC,SAA1B;AACA,WAAO,SAAS,KAAK,KAAd,GACH,SADG,GAEF,OAAO,SAAP,KAAqB,QAArB,GACI,SADJ,GAEK,OAAO,IAAP,KAAgB,QAAhB,GAA2B,IAAI,CAAC,WAAL,EAA3B,GAAgD,SAJ1D;AAKD;AAED;;;;;;;;AAMQ,SAAO,gBAAP,CACJ,KADI,EACY,GADZ,EAC0B,UAAA,GAAyB,QADnD,EAC2D;AACjE,WAAO,UAAU,CAAC,KAAD,EAAQ,GAAR,CAAjB;AACD;AAED;;;;;;;;AAMQ,SAAO,2BAAP,CACJ,KADI,EACgB,OADhB,EAC4C;AAClD,UAAM,IAAI,GAAG,OAAO,CAAC,IAArB;AACA,UAAM,SAAS,GAAG,OAAO,CAAC,SAAR,IAAqB,gBAAvC;AACA,UAAM,aAAa,GACd,OAAO,SAAP,KAAqB,UAArB,GAAkC,SAAlC,GAA8C,SAAS,CAAC,aAD7D;AAEA,WAAO,aAAa,GAAG,aAAa,CAAC,KAAD,EAAQ,IAAR,CAAhB,GAAgC,KAApD;AACD;AAED;;;;;;;;;;AAQQ,SAAO,yBAAP,CACJ,KADI,EACY,OADZ,EACwC;AAC9C,QAAI,OAAO,CAAC,OAAR,KAAoB,SAAxB,EAAmC;AACjC;AACD;;AACD,UAAM,IAAI,GAAG,OAAO,CAAC,IAArB;AACA,UAAM,SAAS,GAAG,OAAO,CAAC,SAA1B;AACA,UAAM,WAAW,GACb,SAAS,IAAK,SAAuC,CAAC,WAAtD,IACA,gBAAgB,CAAC,WAFrB;AAGA,WAAO,WAAY,CAAC,KAAD,EAAQ,IAAR,CAAnB;AACD;AAwBD;;;;;;AAIU,EAAA,UAAU,GAAA;AAClB,SAAK,uBAAL,GADkB,CAElB;AACA;;;AACA,SAAK,cAAL;AACD;AAED;;;;;;;;;;;;;;AAYQ,EAAA,uBAAuB,GAAA;AAC7B;AACA;AACC,SAAK,WAAL,CACI,gBADJ,CACsB,OADtB,CAC8B,CAAC,EAAD,EAAK,CAAL,KAAU;AACnC,UAAI,KAAK,cAAL,CAAoB,CAApB,CAAJ,EAA4B;AAC1B,cAAM,KAAK,GAAG,KAAK,CAAL,CAAd;AACA,eAAO,KAAK,CAAL,CAAP;;AACA,YAAI,CAAC,KAAK,mBAAV,EAA+B;AAC7B,eAAK,mBAAL,GAA2B,IAAI,GAAJ,EAA3B;AACD;;AACD,aAAK,mBAAL,CAAyB,GAAzB,CAA6B,CAA7B,EAAgC,KAAhC;AACD;AACF,KAVJ;AAWF;AAED;;;;;AAGQ,EAAA,wBAAwB,GAAA;AAC9B;AACA;AACA;AACA,SAAK,mBAAL,CAA0B,OAA1B,CAAkC,CAAC,CAAD,EAAI,CAAJ,KAAW,KAAa,CAAb,IAAkB,CAA/D;;AACA,SAAK,mBAAL,GAA2B,SAA3B;AACD;;AAED,EAAA,iBAAiB,GAAA;AACf,SAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,mBAAxC,CADe,CAEf;AACA;AACA;AACA;;AACA,QAAI,KAAK,qBAAT,EAAgC;AAC9B,WAAK,qBAAL;;AACA,WAAK,qBAAL,GAA6B,SAA7B;AACD;AACF;AAED;;;;;;;AAKA,EAAA,oBAAoB,GAAA,CACnB;AAED;;;;;AAGA,EAAA,wBAAwB,CAAC,IAAD,EAAe,GAAf,EAAiC,KAAjC,EAAmD;AACzE,QAAI,GAAG,KAAK,KAAZ,EAAmB;AACjB,WAAK,oBAAL,CAA0B,IAA1B,EAAgC,KAAhC;AACD;AACF;;AAEO,EAAA,oBAAoB,CACxB,IADwB,EACL,KADK,EAExB,OAAA,GAA+B,0BAFP,EAEiC;AAC3D,UAAM,IAAI,GAAI,KAAK,WAAnB;;AACA,UAAM,IAAI,GAAG,IAAI,CAAC,yBAAL,CAA+B,IAA/B,EAAqC,OAArC,CAAb;;AACA,QAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,YAAM,SAAS,GAAG,IAAI,CAAC,yBAAL,CAA+B,KAA/B,EAAsC,OAAtC,CAAlB,CADsB,CAEtB;;;AACA,UAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B;AACD,OALqB,CAMtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,WAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,gCAAxC;;AACA,UAAI,SAAS,IAAI,IAAjB,EAAuB;AACrB,aAAK,eAAL,CAAqB,IAArB;AACD,OAFD,MAEO;AACL,aAAK,YAAL,CAAkB,IAAlB,EAAwB,SAAxB;AACD,OAnBqB,CAoBtB;;;AACA,WAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,CAAC,gCAAzC;AACD;AACF;;AAEO,EAAA,oBAAoB,CAAC,IAAD,EAAe,KAAf,EAAiC;AAC3D;AACA;AACA,QAAI,KAAK,YAAL,GAAoB,gCAAxB,EAA0D;AACxD;AACD;;AACD,UAAM,IAAI,GAAI,KAAK,WAAnB;;AACA,UAAM,QAAQ,GAAG,IAAI,CAAC,uBAAL,CAA6B,GAA7B,CAAiC,IAAjC,CAAjB;;AACA,QAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,YAAM,OAAO,GACT,IAAI,CAAC,gBAAL,CAAuB,GAAvB,CAA2B,QAA3B,KAAwC,0BAD5C,CAD0B,CAG1B;;AACA,WAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,+BAAxC;AACA,WAAK,QAAL,IACI;AACA,MAAA,IAAI,CAAC,2BAAL,CAAiC,KAAjC,EAAwC,OAAxC,CAFJ,CAL0B,CAQ1B;;AACA,WAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,CAAC,+BAAzC;AACD;AACF;AAED;;;;;;;AAKQ,EAAA,cAAc,CAAC,IAAD,EAAqB,QAArB,EAAuC;AAC3D,QAAI,mBAAmB,GAAG,IAA1B,CAD2D,CAE3D;;AACA,QAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,YAAM,IAAI,GAAG,KAAK,WAAlB;AACA,YAAM,OAAO,GACT,IAAI,CAAC,gBAAL,CAAuB,GAAvB,CAA2B,IAA3B,KAAoC,0BADxC;;AAEA,UAAI,IAAI,CAAC,gBAAL,CACI,KAAK,IAAL,CADJ,EAC8B,QAD9B,EACwC,OAAO,CAAC,UADhD,CAAJ,EACiE;AAC/D,YAAI,CAAC,KAAK,kBAAL,CAAwB,GAAxB,CAA4B,IAA5B,CAAL,EAAwC;AACtC,eAAK,kBAAL,CAAwB,GAAxB,CAA4B,IAA5B,EAAkC,QAAlC;AACD,SAH8D,CAI/D;AACA;AACA;AACA;;;AACA,YAAI,OAAO,CAAC,OAAR,KAAoB,IAApB,IACA,EAAE,KAAK,YAAL,GAAoB,+BAAtB,CADJ,EAC4D;AAC1D,cAAI,KAAK,qBAAL,KAA+B,SAAnC,EAA8C;AAC5C,iBAAK,qBAAL,GAA6B,IAAI,GAAJ,EAA7B;AACD;;AACD,eAAK,qBAAL,CAA2B,GAA3B,CAA+B,IAA/B,EAAqC,OAArC;AACD;AACF,OAhBD,MAgBO;AACL;AACA,QAAA,mBAAmB,GAAG,KAAtB;AACD;AACF;;AACD,QAAI,CAAC,KAAK,mBAAN,IAA6B,mBAAjC,EAAsD;AACpD,WAAK,cAAL;AACD;AACF;AAED;;;;;;;;;;;;;;;AAaA,EAAA,aAAa,CAAC,IAAD,EAAqB,QAArB,EAAuC;AAClD,SAAK,cAAL,CAAoB,IAApB,EAA0B,QAA1B;;AACA,WAAO,KAAK,cAAZ;AACD;AAED;;;;;AAGQ,QAAM,cAAN,GAAoB;AAC1B;AACA,SAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,sBAAxC;AACA,QAAI,OAAJ;AACA,QAAI,MAAJ;AACA,UAAM,qBAAqB,GAAG,KAAK,cAAnC;AACA,SAAK,cAAL,GAAsB,IAAI,OAAJ,CAAY,CAAC,GAAD,EAAM,GAAN,KAAa;AAC7C,MAAA,OAAO,GAAG,GAAV;AACA,MAAA,MAAM,GAAG,GAAT;AACD,KAHqB,CAAtB;;AAIA,QAAI;AACF;AACA;AACA,YAAM,qBAAN;AACD,KAJD,CAIE,OAAO,CAAP,EAAU,CAGX,CAHC,CACA;AACA;AAEF;;;AACA,QAAI,CAAC,KAAK,aAAV,EAAyB;AACvB,YAAM,IAAI,OAAJ,CAAa,GAAD,IAAS,KAAK,qBAAL,GAA6B,GAAlD,CAAN;AACD;;AACD,QAAI;AACF,YAAM,MAAM,GAAG,KAAK,aAAL,EAAf,CADE,CAEF;AACA;AACA;;AACA,UAAI,MAAM,IAAI,IAAd,EAAoB;AAClB,cAAM,MAAN;AACD;AACF,KARD,CAQE,OAAO,CAAP,EAAU;AACV,MAAA,MAAM,CAAC,CAAD,CAAN;AACD;;AACD,IAAA,OAAO,CAAC,CAAC,KAAK,mBAAP,CAAP;AACD;;AAED,MAAY,aAAZ,GAAyB;AACvB,WAAQ,KAAK,YAAL,GAAoB,mBAA5B;AACD;;AAED,MAAY,mBAAZ,GAA+B;AAC7B,WAAQ,KAAK,YAAL,GAAoB,sBAA5B;AACD;;AAED,MAAc,UAAd,GAAwB;AACtB,WAAQ,KAAK,YAAL,GAAoB,iBAA5B;AACD;AAED;;;;;;;;;;;;;;;;;;AAgBU,EAAA,aAAa,GAAA;AACrB;AACA,QAAI,KAAK,mBAAT,EAA8B;AAC5B,WAAK,wBAAL;AACD;;AACD,QAAI,YAAY,GAAG,KAAnB;AACA,UAAM,iBAAiB,GAAG,KAAK,kBAA/B;;AACA,QAAI;AACF,MAAA,YAAY,GAAG,KAAK,YAAL,CAAkB,iBAAlB,CAAf;;AACA,UAAI,YAAJ,EAAkB;AAChB,aAAK,MAAL,CAAY,iBAAZ;AACD;AACF,KALD,CAKE,OAAO,CAAP,EAAU;AACV;AACA;AACA,MAAA,YAAY,GAAG,KAAf;AACA,YAAM,CAAN;AACD,KAVD,SAUU;AACR;AACA,WAAK,YAAL;AACD;;AACD,QAAI,YAAJ,EAAkB;AAChB,UAAI,EAAE,KAAK,YAAL,GAAoB,iBAAtB,CAAJ,EAA8C;AAC5C,aAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,iBAAxC;AACA,aAAK,YAAL,CAAkB,iBAAlB;AACD;;AACD,WAAK,OAAL,CAAa,iBAAb;AACD;AACF;;AAEO,EAAA,YAAY,GAAA;AAClB,SAAK,kBAAL,GAA0B,IAAI,GAAJ,EAA1B;AACA,SAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,CAAC,sBAAzC;AACD;AAED;;;;;;;;;;;;;;;;;AAeA,MAAI,cAAJ,GAAkB;AAChB,WAAO,KAAK,kBAAL,EAAP;AACD;AAED;;;;;;;;;;;;;;;;;;AAgBU,EAAA,kBAAkB,GAAA;AAC1B,WAAO,KAAK,cAAZ;AACD;AAED;;;;;;;;;AAOU,EAAA,YAAY,CAAC,kBAAD,EAAmC;AACvD,WAAO,IAAP;AACD;AAED;;;;;;;;;;AAQU,EAAA,MAAM,CAAC,kBAAD,EAAmC;AACjD,QAAI,KAAK,qBAAL,KAA+B,SAA/B,IACA,KAAK,qBAAL,CAA2B,IAA3B,GAAkC,CADtC,EACyC;AACvC;AACA;AACA,WAAK,qBAAL,CAA2B,OAA3B,CACI,CAAC,CAAD,EAAI,CAAJ,KAAU,KAAK,oBAAL,CAA0B,CAA1B,EAA6B,KAAK,CAAL,CAA7B,EAAoD,CAApD,CADd;;AAEA,WAAK,qBAAL,GAA6B,SAA7B;AACD;AACF;AAED;;;;;;;;;;;AASU,EAAA,OAAO,CAAC,kBAAD,EAAmC,CACnD;AAED;;;;;;;;;;;AASU,EAAA,YAAY,CAAC,kBAAD,EAAmC,CACxD;;AArmBsD;;;KAiBtC;AAHjB;;;;AAGgB,eAAA,CAAA,EAAA,CAAA,GAAc,IAAd;;;;;;;;;;;;AC/NlB;;;;;;;;;;;;;AAwCA,MAAM,mBAAmB,GACrB,CAAC,OAAD,EAAkB,KAAlB,KAAqD;AACnD,EAAA,MAAM,CAAC,cAAP,CAAsB,MAAtB,CAA6B,OAA7B,EAAsC,KAAtC,EADmD,CAEnD;AACA;AACA;AACA;AACA;AACA;;AACA,SAAO,KAAP;AACD,CAVL;;AAYA,MAAM,qBAAqB,GACvB,CAAC,OAAD,EAAkB,UAAlB,KAAiD;AAC/C,QAAM;AAAC,IAAA,IAAD;AAAO,IAAA;AAAP,MAAmB,UAAzB;AACA,SAAO;AACL,IAAA,IADK;AAEL,IAAA,QAFK;;AAGL;AACA,IAAA,QAAQ,CAAC,KAAD,EAAgC;AACtC,MAAA,MAAM,CAAC,cAAP,CAAsB,MAAtB,CAA6B,OAA7B,EAAsC,KAAtC;AACD;;AANI,GAAP;AAQD,CAXL;AAaA;;;;;;;AAKO,MAAM,aAAa,GAAI,OAAD,IACxB,iBAAD,IACK,OAAO,iBAAP,KAA6B,UAA9B,GACJ,mBAAmB,CAAC,OAAD,EAAU,iBAAV,CADf,GAEJ,qBAAqB,CAAC,OAAD,EAAU,iBAAV,CAJlB;;;;AAMP,MAAM,gBAAgB,GAClB,CAAC,OAAD,EAA+B,OAA/B,KAAwD;AACtD;AACA;AACA;AACA,MAAI,OAAO,CAAC,IAAR,KAAiB,QAAjB,IAA6B,OAAO,CAAC,UAArC,IACA,EAAE,WAAW,OAAO,CAAC,UAArB,CADJ,EACsC;AACpC,WAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACK,OADL,EACY;AACV,MAAA,QAAQ,CAAC,KAAD,EAA8B;AACpC,QAAA,KAAK,CAAC,cAAN,CAAqB,OAAO,CAAC,GAA7B,EAAkC,OAAlC;AACD;;AAHS,KADZ,CAAA;AAMD,GARD,MAQO;AACL;AACA;AACA;AACA,WAAO;AACL,MAAA,IAAI,EAAE,OADD;AAEL,MAAA,GAAG,EAAE,MAAM,EAFN;AAGL,MAAA,SAAS,EAAE,KAHN;AAIL,MAAA,UAAU,EAAE,EAJP;;AAKL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAA,WAAW,GAAA;AACT,YAAI,OAAO,OAAO,CAAC,WAAf,KAA+B,UAAnC,EAA+C;AAC7C,eAAK,OAAO,CAAC,GAAb,IAA8B,OAAO,CAAC,WAAR,CAAoB,IAApB,CAAyB,IAAzB,CAA9B;AACD;AACF,OAlBI;;AAmBL,MAAA,QAAQ,CAAC,KAAD,EAA8B;AACpC,QAAA,KAAK,CAAC,cAAN,CAAqB,OAAO,CAAC,GAA7B,EAAkC,OAAlC;AACD;;AArBI,KAAP;AAuBD;AACF,CAzCL;;AA2CA,MAAM,cAAc,GAChB,CAAC,OAAD,EAA+B,KAA/B,EAA8C,IAA9C,KAAmE;AAChE,EAAA,KAAK,CAAC,WAAN,CACI,cADJ,CACmB,IADnB,EACyB,OADzB;AAEF,CAJL;AAMA;;;;;;;;;AAOM,SAAU,QAAV,CAAmB,OAAnB,EAAgD;AACpD;AACA,SAAO,CAAC,iBAAD,EAAyC,IAAzC,KACK,IAAI,KAAK,SAAV,GACP,cAAc,CAAC,OAAD,EAAW,iBAAX,EAAwC,IAAxC,CADP,GAEP,gBAAgB,CAAC,OAAD,EAAW,iBAAX,CAHpB;AAID;AAED;;;;;;;;AAMM,SAAU,KAAV,CAAgB,QAAhB,EAAgC;AACpC,SAAO,CAAC,iBAAD,EACC;AACA,EAAA,IAFD,KAE4B;AACjC,UAAM,UAAU,GAAG;AACjB,MAAA,GAAG,GAAA;AACD,eAAO,KAAK,UAAL,CAAgB,aAAhB,CAA8B,QAA9B,CAAP;AACD,OAHgB;;AAIjB,MAAA,UAAU,EAAE,IAJK;AAKjB,MAAA,YAAY,EAAE;AALG,KAAnB;AAOA,WAAQ,IAAI,KAAK,SAAV,GACH,WAAW,CAAC,UAAD,EAAa,iBAAb,EAA0C,IAA1C,CADR,GAEH,aAAa,CAAC,UAAD,EAAa,iBAAb,CAFjB;AAGD,GAbD;AAcD;AAED;;;;;;;;AAMM,SAAU,QAAV,CAAmB,QAAnB,EAAmC;AACvC,SAAO,CAAC,iBAAD,EACC;AACA,EAAA,IAFD,KAE4B;AACjC,UAAM,UAAU,GAAG;AACjB,MAAA,GAAG,GAAA;AACD,eAAO,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,QAAjC,CAAP;AACD,OAHgB;;AAIjB,MAAA,UAAU,EAAE,IAJK;AAKjB,MAAA,YAAY,EAAE;AALG,KAAnB;AAOA,WAAQ,IAAI,KAAK,SAAV,GACH,WAAW,CAAC,UAAD,EAAa,iBAAb,EAA0C,IAA1C,CADR,GAEH,aAAa,CAAC,UAAD,EAAa,iBAAb,CAFjB;AAGD,GAbD;AAcD;;AAED,MAAM,WAAW,GACb,CAAC,UAAD,EAAiC,KAAjC,EAAgD,IAAhD,KAAqE;AACnE,EAAA,MAAM,CAAC,cAAP,CAAsB,KAAtB,EAA6B,IAA7B,EAAmC,UAAnC;AACD,CAHL;;AAKA,MAAM,aAAa,GAAG,CAAC,UAAD,EAAiC,OAAjC,MACjB;AACC,EAAA,IAAI,EAAE,QADP;AAEC,EAAA,SAAS,EAAE,WAFZ;AAGC,EAAA,GAAG,EAAE,OAAO,CAAC,GAHd;AAIC,EAAA;AAJD,CADiB,CAAtB;;AAQA,MAAM,oBAAoB,GACtB,CAAC,OAAD,EAAmC,OAAnC,KAA4D;AAC1D,SAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACK,OADL,EACY;AACV,IAAA,QAAQ,CAAC,KAAD,EAA8B;AACpC,MAAA,MAAM,CAAC,MAAP,CACI,KAAK,CAAC,SAAN,CAAgB,OAAO,CAAC,GAAxB,CADJ,EAC2D,OAD3D;AAED;;AAJS,GADZ,CAAA;AAOD,CATL;;AAWA,MAAM,kBAAkB,GACpB;AACA,CAAC,OAAD,EAAmC,KAAnC,EAA+C,IAA/C,KAAoE;AAClE,EAAA,MAAM,CAAC,MAAP,CAAc,KAAK,CAAC,IAAD,CAAnB,EAA2B,OAA3B;AACD,CAJL;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,MAAM,YAAY,GAAI,OAAD,IACxB;AACA;AACA;AACA;AACA;AACC,CAAC,iBAAD,EAAyC,IAAzC,KACK,IAAI,KAAK,SAAV,GACA,kBAAkB,CAAC,OAAD,EAAU,iBAAV,EAAuC,IAAvC,CADlB,GAEA,oBAAoB,CAAC,OAAD,EAAU,iBAAV,CATtB;;;;;;;;;;;AClPP;;;;;;;;;;AAWO,MAAM,2BAA2B,GACnC,wBAAwB,QAAQ,CAAC,SAAlC,IACC,aAAa,aAAa,CAAC,SAFzB;;AAIP,MAAM,iBAAiB,GAAG,MAAM,EAAhC;;AAEM,MAAO,SAAP,CAAgB;AAKpB,EAAA,WAAA,CAAY,OAAZ,EAA6B,SAA7B,EAA8C;AAC5C,QAAI,SAAS,KAAK,iBAAlB,EAAqC;AACnC,YAAM,IAAI,KAAJ,CACF,mEADE,CAAN;AAED;;AACD,SAAK,OAAL,GAAe,OAAf;AACD,GAXmB,CAapB;AACA;;;AACA,MAAI,UAAJ,GAAc;AACZ,QAAI,KAAK,WAAL,KAAqB,SAAzB,EAAoC;AAClC;AACA;AACA,UAAI,2BAAJ,EAAiC;AAC/B,aAAK,WAAL,GAAmB,IAAI,aAAJ,EAAnB;;AACA,aAAK,WAAL,CAAiB,WAAjB,CAA6B,KAAK,OAAlC;AACD,OAHD,MAGO;AACL,aAAK,WAAL,GAAmB,IAAnB;AACD;AACF;;AACD,WAAO,KAAK,WAAZ;AACD;;AAED,EAAA,QAAQ,GAAA;AACN,WAAO,KAAK,OAAZ;AACD;;AA/BmB;AAkCtB;;;;;;;;;;;AAOO,MAAM,SAAS,GAAI,KAAD,IAAmB;AAC1C,SAAO,IAAI,SAAJ,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,iBAA7B,CAAP;AACD,CAFM;;;;AAIP,MAAM,iBAAiB,GAAI,KAAD,IAA4B;AACpD,MAAI,KAAK,YAAY,SAArB,EAAgC;AAC9B,WAAO,KAAK,CAAC,OAAb;AACD,GAFD,MAEO,IAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AACpC,WAAO,KAAP;AACD,GAFM,MAEA;AACL,UAAM,IAAI,KAAJ,CACF,mEACI,KAAK;+CAFP,CAAN;AAID;AACF,CAXD;AAaA;;;;;;;;AAMO,MAAM,GAAG,GACZ,CAAC,OAAD,EAAgC,GAAG,MAAnC,KAAmE;AACjE,QAAM,OAAO,GAAG,MAAM,CAAC,MAAP,CACZ,CAAC,GAAD,EAAM,CAAN,EAAS,GAAT,KAAiB,GAAG,GAAG,iBAAiB,CAAC,CAAD,CAAvB,GAA6B,OAAO,CAAC,GAAG,GAAG,CAAP,CADzC,EAEZ,OAAO,CAAC,CAAD,CAFK,CAAhB;AAGA,SAAO,IAAI,SAAJ,CAAc,OAAd,EAAuB,iBAAvB,CAAP;AACD,CANE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEP;;AACA;;AAEA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AACA;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAtBA;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA,CAAC,MAAM,CAAC,oBAAD,CAAN,KAAiC,MAAM,CAAC,oBAAD,CAAN,GAA+B,EAAhE,CAAD,EACK,IADL,CACU,OADV;AAKA;;;;;;AAKA,SAAS,SAAT,CACI,MADJ,EAC4B,MAAA,GAAsB,EADlD,EACoD;AAClD,OAAK,IAAI,CAAC,GAAG,CAAR,EAAW,MAAM,GAAG,MAAM,CAAC,MAAhC,EAAwC,CAAC,GAAG,MAA5C,EAAoD,CAAC,EAArD,EAAyD;AACvD,UAAM,KAAK,GAAG,MAAM,CAAC,CAAD,CAApB;;AACA,QAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAA0B;AACxB,MAAA,SAAS,CAAC,KAAD,EAAQ,MAAR,CAAT;AACD,KAFD,MAEO;AACL,MAAA,MAAM,CAAC,IAAP,CAAY,KAAZ;AACD;AACF;;AACD,SAAO,MAAP;AACD;AAED;;;AACA,MAAM,aAAa,GAAI,MAAD,IAClB,MAAM,CAAC,IAAP,GAAc,MAAM,CAAC,IAAP,CAAY,QAAZ,CAAd,GAAsC,SAAS,CAAC,MAAD,CADnD;;AAGM,MAAO,UAAP,SAA0B,gCAA1B,CAAyC;AA4B7C;AACU,SAAO,QAAP,GAAe;AACvB;AACA;AACA,UAAM,QAAN,CAAe,IAAf,CAAoB,IAApB,EAHuB,CAIvB;AACA;;AACA,SAAK,OAAL,GACI,KAAK,cAAL,CAAoB,yBAAyB,CAAC,QAAD,EAAW,IAAX,CAA7C,IACA,KAAK,gBAAL,EADA,GAEA,KAAK,OAAL,IAAgB,EAHpB;AAID;AAED;;;AACQ,SAAO,gBAAP,GAAuB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,UAAM,UAAU,GAAG,KAAK,MAAxB;AACA,UAAM,MAAM,GAAgB,EAA5B;;AACA,QAAI,KAAK,CAAC,OAAN,CAAc,UAAd,CAAJ,EAA+B;AAC7B,YAAM,UAAU,GAAG,aAAa,CAAC,UAAD,CAAhC,CAD6B,CAE7B;AACA;AACA;AACA;AACA;;AACA,YAAM,QAAQ,GAAG,UAAU,CAAC,WAAX,CAAuB,CAAC,GAAD,EAAM,CAAN,KAAW;AACjD,QAAA,GAAG,CAAC,GAAJ,CAAQ,CAAR,EADiD,CAEjD;;AACA,eAAO,GAAP;AACD,OAJgB,EAId,IAAI,GAAJ,EAJc,CAAjB,CAP6B,CAY7B;;AACA,MAAA,QAAQ,CAAC,OAAT,CAAkB,CAAD,IAAO,MAAM,CAAC,OAAP,CAAe,CAAf,CAAxB;AACD,KAdD,MAcO,IAAI,UAAJ,EAAgB;AACrB,MAAA,MAAM,CAAC,IAAP,CAAY,UAAZ;AACD;;AACD,WAAO,MAAP;AACD;AAUD;;;;;;;AAKU,EAAA,UAAU,GAAA;AAClB,UAAM,UAAN;AACC,SAAkD,UAAlD,GACG,KAAK,gBAAL,EADH,CAFiB,CAIlB;AACA;AACA;;AACA,QAAI,MAAM,CAAC,UAAP,IAAqB,KAAK,UAAL,YAA2B,MAAM,CAAC,UAA3D,EAAuE;AACrE,WAAK,WAAL;AACD;AACF;AAED;;;;;;;;;AAOU,EAAA,gBAAgB,GAAA;AACxB,WAAO,KAAK,YAAL,CAAkB;AAAC,MAAA,IAAI,EAAE;AAAP,KAAlB,CAAP;AACD;AAED;;;;;;;;;;;AASU,EAAA,WAAW,GAAA;AACnB,UAAM,MAAM,GAAI,KAAK,WAAL,CAAuC,OAAvD;;AACA,QAAI,MAAM,CAAC,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACD,KAJkB,CAKnB;AACA;AACA;AACA;AACA;;;AACA,QAAI,MAAM,CAAC,QAAP,KAAoB,SAApB,IAAiC,CAAC,MAAM,CAAC,QAAP,CAAgB,YAAtD,EAAoE;AAClE,MAAA,MAAM,CAAC,QAAP,CAAgB,WAAhB,CAA6B,qBAA7B,CACI,MAAM,CAAC,GAAP,CAAY,CAAD,IAAO,CAAC,CAAC,OAApB,CADJ,EACkC,KAAK,SADvC;AAED,KAHD,MAGO,IAAI,mCAAJ,EAAiC;AACrC,WAAK,UAAL,CAA+B,kBAA/B,GACG,MAAM,CAAC,GAAP,CAAY,CAAD,IAAO,CAAC,CAAC,UAApB,CADH;AAEF,KAHM,MAGA;AACL;AACA;AACA,WAAK,4BAAL,GAAoC,IAApC;AACD;AACF;;AAED,EAAA,iBAAiB,GAAA;AACf,UAAM,iBAAN,GADe,CAEf;AACA;;AACA,QAAI,KAAK,UAAL,IAAmB,MAAM,CAAC,QAAP,KAAoB,SAA3C,EAAsD;AACpD,MAAA,MAAM,CAAC,QAAP,CAAgB,YAAhB,CAA6B,IAA7B;AACD;AACF;AAED;;;;;;;;AAMU,EAAA,MAAM,CAAC,iBAAD,EAAkC;AAChD,UAAM,MAAN,CAAa,iBAAb;AACA,UAAM,cAAc,GAAG,KAAK,MAAL,EAAvB;;AACA,QAAI,cAAc,YAAY,uBAA9B,EAA8C;AAC3C,WAAK,WAAL,CACI,MADJ,CAEO,cAFP,EAGO,KAAK,UAHZ,EAIO;AAAC,QAAA,SAAS,EAAE,KAAK,SAAjB;AAA4B,QAAA,YAAY,EAAE;AAA1C,OAJP;AAKF,KAT+C,CAUhD;AACA;AACA;;;AACA,QAAI,KAAK,4BAAT,EAAuC;AACrC,WAAK,4BAAL,GAAoC,KAApC;;AACC,WAAK,WAAL,CAAuC,OAAvC,CAAgD,OAAhD,CAAyD,CAAD,IAAM;AAC7D,cAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,QAAA,KAAK,CAAC,WAAN,GAAoB,CAAC,CAAC,OAAtB;AACA,aAAK,UAAL,CAAgB,WAAhB,CAA4B,KAA5B;AACD,OAJA;AAKF;AACF;AAED;;;;;;;AAKU,EAAA,MAAM,GAAA,CACf;;AAvL4C;AAE7C;;;;;;;;;;AAOgB,UAAA,CAAC,WAAD,CAAA,GAAgB,IAAhB;AAChB;;;;;;;;;AAQO,UAAA,CAAA,MAAA,GAAS,mBAAT;;;;;;;;;AC3ET;;AAHA;;;AAKA,MAAMA,MAAM,GAAGC,OAAO,CAAC,kBAAD,CAAtB;;AAEA,MAAMC,QAAN,CAAe;AAEd,MAAIC,MAAJ,GAAY;AAAE,WAAO,OAAP;AAAe;;AAE7B,MAAIC,aAAJ,GAAoB;AAEnB,QAAI,CAAC,KAAKC,eAAV,EAA2B;AAC1B,UAAIC,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACAF,MAAAA,GAAG,CAACG,SAAJ,GAAgBT,MAAhB;AACA,WAAKK,eAAL,GAAuBC,GAAG,CAACI,UAA3B,CAH0B,CAI1B;;AACA,WAAKL,eAAL,CAAqBM,gBAArB,CAAsC,OAAtC,EAA+CC,OAA/C,CAAuDC,EAAE,IAAEA,EAAE,CAACC,MAAH,EAA3D;;AACAR,MAAAA,GAAG,GAAG,IAAN;AACA;;AAED,WAAO,KAAKD,eAAZ;AACA;;AAED,MAAIU,KAAJ,GAAW;AACV,WAAOC,KAAK,CAACC,IAAN,CAAW,KAAKb,aAAL,CAAmBO,gBAAnB,CAAoC,QAApC,CAAX,EAA0DO,GAA1D,CAA8DL,EAAE,IAAEA,EAAE,CAACM,EAAH,CAAMC,OAAN,CAAc,KAAKjB,MAAnB,EAA2B,EAA3B,CAAlE,EAAkGkB,IAAlG,EAAP;AACA;;AAEDC,EAAAA,GAAG,CAACC,IAAD,EAAM;AAER,QAAIC,MAAM,GAAG,KAAKpB,aAAL,CAAmBqB,aAAnB,CAAkC,IAAG,KAAKtB,MAAO,GAAEoB,IAAK,EAAxD,CAAb;AACA,QAAIG,GAAG,GAAG,IAAV;;AAEA,QAAIF,MAAJ,EAAY;AAEX,UAAIlB,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACAF,MAAAA,GAAG,CAACG,SAAJ,GAAiB,2CAA0Ce,MAAM,CAACf,SAAU,QAA5E;AACAiB,MAAAA,GAAG,GAAGpB,GAAG,CAACI,UAAV,CAJW,CAMX;;AACAM,MAAAA,KAAK,CAACC,IAAN,CAAWO,MAAM,CAACG,UAAlB,EAA8Bf,OAA9B,CAAsCgB,IAAI,IAAE;AAC3CF,QAAAA,GAAG,CAACG,YAAJ,CAAiBD,IAAI,CAACL,IAAtB,EAA4BK,IAAI,CAACE,KAAjC;AACA,OAFD;AAGA;;AAED,WAAOJ,GAAP;AACA;;AAxCa;;AA2CR,MAAMK,QAAQ,GAAG,IAAI7B,QAAJ,EAAjB;;;AAEA,MAAM8B,WAAN,SAA0BC,WAA1B,CAAsC;AAE5CC,EAAAA,WAAW,GAAE;AACZ;AAEA,SAAKC,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB;AACM,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AACN6B,IAAAA,IAAI,CAAC5B,SAAL,GAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAAlB;AA6BA,SAAK6B,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AACA;;AAEDC,EAAAA,OAAO,GAAE;AAER,QAAI,KAAKC,IAAT,EACC,KAAKA,IAAL,CAAU7B,MAAV;AAED,SAAK6B,IAAL,GAAYZ,QAAQ,CAACT,GAAT,CAAa,KAAKC,IAAlB,CAAZ;;AAEA,QAAI,KAAKoB,IAAT,EAAe;AACd,WAAKC,eAAL,CAAqB,SAArB;AACA,WAAKN,UAAL,CAAgBC,WAAhB,CAA4B,KAAKI,IAAjC;AACA,KAHD,MAGK;AACJ,WAAKd,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AACA;AACD;;AAED,aAAWgB,kBAAX,GAAgC;AAAE,WAAO,CAAC,MAAD,CAAP;AAAkB;;AAEpDC,EAAAA,wBAAwB,CAACvB,IAAD,EAAOwB,QAAP,EAAiBC,QAAjB,EAA0B;AAEjD,QAAIzB,IAAI,KAAK,MAAb,EACC,KAAKmB,OAAL;AACD;;AAED,MAAInB,IAAJ,GAAU;AAAE,WAAO,KAAK0B,YAAL,CAAkB,MAAlB,CAAP;AAAiC;;AAC7C,MAAI1B,IAAJ,CAAS2B,GAAT,EAAa;AAAE,WAAO,KAAKrB,YAAL,CAAkB,MAAlB,EAA0BqB,GAA1B,CAAP;AAAsC;;AA/DT;;;AAmE7CC,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgCpB,WAAhC;;AAEO,MAAMqB,QAAN,SAAuBC,sBAAvB,CAAkC;AAExC,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC9BC,MAAAA,IAAI,EAAE;AAACC,QAAAA,IAAI,EAAEC,MAAP;AAAeC,QAAAA,OAAO,EAAE;AAAxB;AADwB,KAAP;AAEtB;;AAEFzB,EAAAA,WAAW,GAAE;AACZ;AACA,SAAKsB,IAAL,GAAY,CAAZ;AACA;;AAED,aAAWI,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAX;AAuClB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;IAClBhC,QAAQ,CAAChB,KAAT,CAAeG,GAAf,CAAmBK,IAAI,IAAEwC,gBAAK;;mBAEfxC,IAAK,qBAAoBA,IAAK;;GAF7C,CAIC;EALK;AAMP;;AA1DsC;;;AA4DzC4B,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqCC,QAArC;;ACrLA;;;;;;;AAQA,MAAMW,cAAN,SAA6B/B,WAA7B,CAAyC;AAErCC,EAAAA,WAAW,GAAG;AACV;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEA6B,IAAAA,IAAI,CAAC5B,SAAL,GAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAAlB;AAgCA,SAAK6B,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AACH;;AAzCoC;;AA4CzCU,cAAc,CAACC,MAAf,CAAsB,WAAtB,EAAmCY,cAAnC;;;;;;;;;ACpDA;;AACA;;AACA;;AAEO,MAAME,UAAN,SAAyBZ,sBAAzB,CAAoC;AAEvC,aAAWC,UAAX,GAAwB;AAAE,WAAO;AAC7BY,MAAAA,IAAI,EAAE;AAACV,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADuB;AAE7B7B,MAAAA,KAAK,EAAE;AAAC2B,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OAFsB;AAG7BU,MAAAA,IAAI,EAAE;AAAEZ,QAAAA,IAAI,EAAEW;AAAR,OAHuB;AAI7BE,MAAAA,IAAI,EAAE;AAACb,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE,IAAzB;AAA+Ba,QAAAA,SAAS,EAAE;AAA1C;AAJuB,KAAP;AAKxB;;AAEF,aAAWZ,MAAX,GAAmB;AAAE,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAwNnB;;AAEFC,EAAAA,MAAM,GAAE;AAAE,WAAOC,gBAAK;;;;cAIZ,KAAKM,IAAL,GAAUN,gBAAK,iBAAgB,KAAKM,IAAK,aAAzC,GAAsD,EAAG;;;KAJzD;AAOR;;AAELnC,EAAAA,WAAW,GAAE;AACZ;AACM,SAAKmC,IAAL,GAAY,EAAZ;AACA,SAAKC,IAAL,GAAY,KAAZ;AACN;;AAEEG,EAAAA,YAAY,GAAE;AACV,SAAKC,gBAAL,CAAsB,OAAtB,EAA+B,MAAI;AAC/B,UAAI,KAAKP,IAAT,EACIQ,MAAM,CAACC,QAAP,GAAkB,KAAKT,IAAvB;AACP,KAHD,EAGG,IAHH;AAIH;;AAvPsC;;;AA2P3ChB,cAAc,CAACC,MAAf,CAAsB,OAAtB,EAA+Bc,UAA/B;;;;;;;;;AC/PA;;AACA;;AAEO,MAAMW,qBAAN,SAAoCvB,sBAApC,CAA+C;AAElD,aAAWC,UAAX,GAAwB;AAAE,WAAO;AAC7BuB,MAAAA,IAAI,EAAE;AAACrB,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE;AAAzB,OADuB;AAEnCoB,MAAAA,KAAK,EAAE;AAACtB,QAAAA,IAAI,EAACW,MAAN;AAAcT,QAAAA,OAAO,EAAE;AAAvB;AAF4B,KAAP;AAGxB;;AAEFzB,EAAAA,WAAW,GAAE;AACf;AACM,SAAK4C,IAAL,GAAY,KAAZ;AACN,SAAKC,KAAL,GAAa,EAAb;AACA;;AAEDC,EAAAA,iBAAiB,GAAE;AAClB,UAAMA,iBAAN;;AAEA,QAAI,KAAKC,UAAL,IAAmB,KAAKA,UAAL,CAAgBC,IAAnC,IAA2C,CAAC,KAAKD,UAAL,CAAgBC,IAAhB,CAAqBC,OAArE,EAA8E;AAC7E,WAAKD,IAAL,GAAY,KAAKD,UAAL,CAAgBC,IAA5B;AACA,WAAKA,IAAL,CAAUC,OAAV,GAAoB,IAApB;AACA,KAHD,MAGM,IAAI,KAAKC,aAAL,IAAsB,CAAC,KAAKA,aAAL,CAAmBD,OAA9C,EAAuD;AAC5D,WAAKD,IAAL,GAAY,KAAKE,aAAjB;AACA,WAAKF,IAAL,CAAUC,OAAV,GAAoB,IAApB;AACA;AACD;;AAEDE,EAAAA,oBAAoB,GAAE;AACrB,UAAMA,oBAAN;AAEA,QAAI,KAAKH,IAAT,EACC,OAAO,KAAKA,IAAL,CAAUC,OAAjB;AACD;;AAEE,aAAWvB,MAAX,GAAmB;AAAE,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA8DnB;;AAEFC,EAAAA,MAAM,GAAE;AAAE,WAAOC,gBAAK;;;YAGd,KAAKgB,KAAM;;KAHT;AAKR;;AArGgD;;;AAyGtD5B,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2CyB,qBAA3C;;;;;;;;AC3GA,MAAMS,MAAM,GAAG;AAEX,MAAIC,MAAJ,GAAY;AACR,WAAO,mBAAmBC,IAAnB,CAAwBC,SAAS,CAACC,SAAlC,KAAgD,CAACf,MAAM,CAACgB,QAA/D;AACH,GAJU;;AAMX,MAAIC,UAAJ,GAAgB;AACZ,WAAO,WAAWJ,IAAX,CAAgBC,SAAS,CAACC,SAA1B,CAAP;AACH,GARU;;AAUX,MAAIG,SAAJ,GAAe;AACX,WAAOP,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACM,UAA/B;AACH;;AAZU,CAAf;eAeeN;;;;;;;;;;AChBf;;AACA;;;;AAEAX,MAAM,CAACW,MAAP,GAAgBA,eAAhB;;AAEO,MAAMQ,eAAN,SAA8BxC,sBAA9B,CAAyC;AAE5C,aAAWC,UAAX,GAAwB;AAAE,WAAO;AAC7BwC,MAAAA,GAAG,EAAE;AAACtC,QAAAA,IAAI,EAAEW;AAAP,OADwB;AAE7B4B,MAAAA,QAAQ,EAAE;AAACvC,QAAAA,IAAI,EAAEc;AAAP,OAFmB;AAG7B0B,MAAAA,MAAM,EAAE;AAACxC,QAAAA,IAAI,EAAEW;AAAP,OAHqB;AAI7B8B,MAAAA,QAAQ,EAAE;AAACzC,QAAAA,IAAI,EAAEc;AAAP,OAJmB;AAK7B4B,MAAAA,WAAW,EAAE;AAAC1C,QAAAA,IAAI,EAAEW;AAAP,OALgB;AAM7BgC,MAAAA,KAAK,EAAE;AAAC3C,QAAAA,IAAI,EAAEzC;AAAP,OANsB;AAO7BqF,MAAAA,QAAQ,EAAE;AAAC5C,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE;AAAzB,OAPmB;AAQ7B2C,MAAAA,SAAS,EAAE;AAAC7C,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE;AAAzB;AARkB,KAAP;AASxB;;AAEF,aAAWC,MAAX,GAAmB;AAAE,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAkEnB;;AAEL3B,EAAAA,WAAW,GAAE;AACZ;AAEM,SAAK6D,GAAL,GAAW,EAAX;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,WAAL,GAAmB,gBAAnB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKG,aAAL,GAAqB,CAArB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKH,QAAL,GAAgB,KAAhB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AAEA,KAAC,WAAD,EAAc,WAAd,EAA2B,UAA3B,EAAuC,MAAvC,EAA+C1F,OAA/C,CAAuD6F,EAAE,IAAE;AACvD,WAAKA,EAAL,IAAW,KAAK,MAAIA,EAAT,EAAaC,IAAb,CAAkB,IAAlB,CAAX;AACH,KAFD;AAGN;;AAEE,MAAIC,QAAJ,GAAc;AACV,WAAO,KAAKP,KAAL,CAAWQ,MAAX,GAAoB,CAApB,GAAyB,KAAKJ,YAAL,GAAoB,KAAKJ,KAAL,CAAWQ,MAA/B,GAAwC,GAAjE,GAAwE,CAA/E;AACH;;AAED,MAAIC,UAAJ,GAAgB;AAAE,WAAO,KAAKC,YAAL,CAAkB,aAAlB,CAAP;AAAyC;;AAE3DhD,EAAAA,MAAM,GAAE;AAAE,WAAOC,gBAAK;mDACyBgD,CAAC,IAAEA,CAAC,CAACC,eAAF,EAAoB,YAAW,KAAKC,YAAa,WAAU,KAAKhB,MAAO,cAAa,KAAKC,QAAS;mCACrH,KAAKC,WAAY;;4CAER,KAAKQ,QAAS;;;4BAG9B,KAAKJ,aAAc,OAAM,KAAKH,KAAL,CAAWQ,MAAO;;;KAPzD;AAUR;;AAEF5B,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,QAAI,KAAKkC,MAAT,EAAkB;AAClB,SAAKA,MAAL,GAAc,KAAK9B,aAAL,IAAsB,KAAK+B,WAAL,GAAmBjC,IAAvD;AACA,SAAKgC,MAAL,CAAYxC,gBAAZ,CAA6B,WAA7B,EAA0C,KAAK0C,SAA/C,EAA0D,IAA1D;AACA,SAAK1C,gBAAL,CAAsB,WAAtB,EAAmC,KAAK2C,SAAxC,EAAmD,IAAnD;AACA,SAAK3C,gBAAL,CAAsB,UAAtB,EAAkC,KAAK4C,QAAvC,EAAiD,IAAjD;AACA,SAAK5C,gBAAL,CAAsB,MAAtB,EAA8B,KAAK6C,IAAnC,EAAyC,IAAzC;AACH;;AAEDlC,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK6B,MAAL,CAAYM,mBAAZ,CAAgC,WAAhC,EAA6C,KAAKJ,SAAlD;AACA,SAAKI,mBAAL,CAAyB,WAAzB,EAAsC,KAAKH,SAA3C;AACA,SAAKG,mBAAL,CAAyB,UAAzB,EAAqC,KAAKF,QAA1C;AACA,SAAKE,mBAAL,CAAyB,MAAzB,EAAiC,KAAKD,IAAtC;AACA,SAAKL,MAAL,GAAc,IAAd;AACH;;AAEDO,EAAAA,WAAW,CAACC,IAAD,EAAM;AACb,QAAIC,QAAQ,GAAG,IAAf;AACA,QAAI1B,MAAM,GAAG,KAAKA,MAAlB;AACA,QAAI,CAACA,MAAL,EAAc,OAAO,IAAP;AACd,WAAOA,MAAM,CAAC2B,KAAP,CAAa,GAAb,EAAkBC,IAAlB,CAAuBC,IAAI,IAAE;AAChCA,MAAAA,IAAI,GAAGA,IAAI,CAACC,IAAL,EAAP;AACA,UAAID,IAAI,CAAC,CAAD,CAAJ,IAAW,GAAf,EACI,OAAO,IAAIE,MAAJ,CAAWF,IAAI,GAAC,GAAhB,EAAqBtC,IAArB,CAA0BkC,IAAI,CAACnG,IAA/B,CAAP,CADJ,KAGI,OAAO,IAAIyG,MAAJ,CAAWF,IAAX,EAAiBtC,IAAjB,CAAsBkC,IAAI,CAACjE,IAA3B,CAAP;AACP,KANM,CAAP;AAOH;;AAEDwE,EAAAA,UAAU,GAAE;AACR,QAAI,KAAKjC,QAAT,EAAoB;AACpB,SAAK1D,UAAL,CAAgBb,aAAhB,CAA8B,SAA9B,EAAyCyG,KAAzC;AACH;;AAEDC,EAAAA,KAAK,CAACpB,CAAD,EAAG;AACJA,IAAAA,CAAC,CAACqB,cAAF;AACA,SAAK/B,QAAL,GAAgB,KAAhB;;AACA,SAAKgC,YAAL,CAAkBtB,CAAC,CAACuB,YAAF,CAAelC,KAAjC;AACH;;AAEDa,EAAAA,YAAY,CAACF,CAAD,EAAG;AACX,SAAKsB,YAAL,CAAkBtB,CAAC,CAACwB,MAAF,CAASnC,KAA3B;AACH;;AAEDiC,EAAAA,YAAY,CAACjC,KAAD,EAAO;AAEf,QAAI,KAAKE,SAAT,EAAqB;AAErBF,IAAAA,KAAK,GAAGpF,KAAK,CAACC,IAAN,CAAWmF,KAAX,CAAR;AAEA,QAAI,CAAC,KAAKF,QAAV,EACIE,KAAK,GAAGA,KAAK,CAACoC,KAAN,CAAY,CAAZ,EAAc,CAAd,CAAR;AAEJ,QAAIC,KAAK,GAAG,EAAZ;AACA,QAAIC,OAAO,GAAG,EAAd;AAEAtC,IAAAA,KAAK,CAACxF,OAAN,CAAc8G,IAAI,IAAE;AAChB,UAAI,KAAKD,WAAL,CAAiBC,IAAjB,CAAJ,EACIe,KAAK,CAACE,IAAN,CAAWjB,IAAX,EADJ,KAGIgB,OAAO,CAACC,IAAR,CAAajB,IAAb;AACP,KALD;AAOA,SAAKtB,KAAL,GAAaqC,KAAb;AAEA,SAAKG,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,QAAhB,EAA0B;AACzCC,MAAAA,OAAO,EAAE,IADgC;AAEzCC,MAAAA,QAAQ,EAAE,IAF+B;AAGzCC,MAAAA,MAAM,EAAE;AACJN,QAAAA,OAAO,EAAEA,OAAO,CAAC9B,MAAR,GAAiB,CAAjB,GAAqB8B,OAArB,GAA+B;AADpC;AAHiC,KAA1B,CAAnB;;AAQA,QAAI,KAAK7B,UAAL,IAAmB,KAAKd,GAA5B,EAAiC;AAC7B,WAAKkD,MAAL;AACH;AAEJ;;AAEDC,EAAAA,SAAS,CAACnC,CAAD,EAAG;AACRA,IAAAA,CAAC,CAACqB,cAAF,GADQ,CACW;AACtB;;AAEDe,EAAAA,UAAU,CAACpC,CAAD,EAAG;AACT,QAAI,KAAKf,QAAL,IAAiB,CAACe,CAAC,CAACuB,YAAF,CAAec,KAAf,CAAqBC,QAArB,CAA8B,OAA9B,CAAtB,EAA+D;AAC/D,SAAKhD,QAAL,GAAgB,IAAhB;AACH;;AAEDiD,EAAAA,UAAU,CAACvC,CAAD,EAAG;AACT,SAAKV,QAAL,GAAgB,KAAhB;AACH;;AAED,QAAM4C,MAAN,CAAa;AAAElD,IAAAA,GAAG,GAAC,EAAN;AAAUwD,IAAAA,MAAM,GAAC,MAAjB;AAAyBC,IAAAA,OAAO,GAAC,MAAjC;AAAyCC,IAAAA,QAAQ,GAAC;AAAlD,MAAuD,EAApE,EAAuE;AAEnE,QAAI,KAAKnD,SAAT,EACI,MAAM,IAAIoD,KAAJ,CAAU,mBAAV,CAAN;AAEJ3D,IAAAA,GAAG,GAAGA,GAAG,IAAI,KAAKA,GAAlB;AAEA,QAAI,CAACA,GAAL,EACI,MAAM,IAAI2D,KAAJ,CAAU,aAAV,CAAN;AAEJ,SAAKnD,aAAL,GAAqB,CAArB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKF,SAAL,GAAiB,IAAjB;AAEA,QAAIqD,IAAI,GAAG,EAAX;;AAEA,SAAK,IAAIjC,IAAT,IAAiB,KAAKtB,KAAtB,EAA6B;AAEzB,UAAIwD,SAAS,GAAG,IAAIC,QAAJ,EAAhB;;AAEAD,MAAAA,SAAS,CAACE,MAAV,CAAiBN,OAAjB,EAA0B9B,IAA1B;;AAEA,WAAK,IAAIqC,GAAT,IAAgBN,QAAhB,EACIG,SAAS,CAACE,MAAV,CAAiBC,GAAjB,EAAsBN,QAAQ,CAACM,GAAD,CAA9B;;AAEJ,WAAKxD,aAAL;AACA,WAAKyD,aAAL;AAEA,UAAIC,UAAU,GAAG,MAAMC,KAAK,CAACnE,GAAD,EAAM;AAC9BwD,QAAAA,MAAM,EAAEA,MADsB;AAE9BY,QAAAA,IAAI,EAAEP;AAFwB,OAAN,CAAL,CAItBQ,IAJsB,CAIjBT,IAAI,IAAEA,IAAI,CAACU,IAAL,EAJW,EAKtBD,IALsB,CAKjBT,IAAI,IAAE;AACR,aAAKnD,YAAL;AACA,aAAKwD,aAAL;AACA,eAAOL,IAAP;AACH,OATsB,CAAvB;AAWAA,MAAAA,IAAI,CAAChB,IAAL,CAAUsB,UAAV;AACH;;AAED,SAAK1D,aAAL,GAAqB,CAArB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKJ,KAAL,GAAa,EAAb;AACA,SAAKE,SAAL,GAAiB,KAAjB;AAEA,SAAKsC,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,QAAhB,EAA0B;AACzCC,MAAAA,OAAO,EAAE,IADgC;AAEzCC,MAAAA,QAAQ,EAAE,IAF+B;AAGzCC,MAAAA,MAAM,EAAEW;AAHiC,KAA1B,CAAnB;AAMA,WAAO,KAAKzD,QAAL,GAAgByD,IAAhB,GAAuBA,IAAI,CAAC,CAAD,CAAlC;AACH;;AA3Q2C;;;AA+QhDxG,cAAc,CAACC,MAAf,CAAsB,YAAtB,EAAoC0C,eAApC;;;;;;;;;ACpRA;;AAEO,MAAMwE,YAAN,SAA2BhH,sBAA3B,CAAsC;AAEzC,aAAWC,UAAX,GAAwB;AAAE,WAAO;AAC7BgH,MAAAA,KAAK,EAAE;AAAC9G,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADsB;AAE7B6G,MAAAA,KAAK,EAAE;AAAC/G,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE;AAAzB;AAFsB,KAAP;AAGxB;;AAEFzB,EAAAA,WAAW,GAAE;AACf;AACM,SAAKqI,KAAL,GAAa,EAAb;AACA,SAAKC,KAAL,GAAa,KAAb;AACN;;AAEE,aAAW5G,MAAX,GAAmB;AAAE,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAyGnB;;AAEFC,EAAAA,MAAM,GAAE;AAAE,WAAOC,gBAAK;;KAAZ;AAER;;AA1HuC;;;AA8H7CZ,cAAc,CAACC,MAAf,CAAsB,SAAtB,EAAiCkH,YAAjC;;;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/BA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/LA;;AACA;;AACA;;AACA;;AACA;;;;AAEAxG,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErD,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3BwG,MAAAA,GAAG,EAAE;AAACtG,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADsB;AAE3By/B,MAAAA,MAAM,EAAE;AAAC3/B,QAAAA,IAAI,EAAE,QAAP;AAAiBE,QAAAA,OAAO,EAAE;AAA1B,OAFmB;AAG3B0/B,MAAAA,UAAU,EAAE;AAAC5/B,QAAAA,IAAI,EAAEc,OAAP;AAAgBZ,QAAAA,OAAO,EAAE;AAAzB;AAHe,KAAP;AAItB;;AAEFzB,EAAAA,WAAW,GAAE;AACT;AACA,SAAKmhC,UAAL,GAAkB,KAAlB;AACA,SAAKt5B,GAAL,GAAW,EAAX;AACA,SAAKq5B,MAAL,GAAc,KAAd;AAEA,SAAKE,cAAL,GAAsB,uBAAS,MAAI;AAC/B,WAAKD,UAAL,GAAkB,KAAKE,kBAAvB;AACH,KAFqB,EAEnB,GAFmB,CAAtB;AAGH;;AAEDv+B,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN,GADe,CAGf;;AAEA,QAAI,CAAC,KAAKqQ,KAAV,EAAiB;AAEb,UAAIA,KAAK,GAAG,EAAZ;AACA,WAAKmuB,UAAL,CAAgB5iC,OAAhB,CAAwB4Z,IAAI,IAAE;AAE1B,YAAIA,IAAI,CAACyF,QAAL,IAAiB,OAArB,EAA8B;AAC1B,cAAIzT,GAAG,GAAGgO,IAAI,CAACipB,WAAL,CAAiB17B,IAAjB,EAAV;AACA,cAAI,CAACyE,GAAL,EAAW;;AACX,cAAIk3B,MAAM,GAAGl3B,GAAG,CAAC5E,KAAJ,CAAU,IAAV,EAAgB1G,GAAhB,CAAoBsO,CAAC,IAAEA,CAAC,CAACzH,IAAF,EAAvB,CAAb;;AACAsN,UAAAA,KAAK,CAAC1M,IAAN,CAAW,GAAG+6B,MAAd;AACAlpB,UAAAA,IAAI,CAACipB,WAAL,GAAmB,EAAnB;AAEH,SAPD,MAOM,IAAIjpB,IAAI,CAAC3E,IAAT,EAAe,CACjB;AAEH,SAHK,MAGA,IAAI2E,IAAI,CAACiB,KAAT,EAAgB;AAClBpG,UAAAA,KAAK,CAAC1M,IAAN,CAAW6R,IAAX;AACH,SAFK,MAED;AACDA,UAAAA,IAAI,CAAC7E,MAAL,GAAc,IAAd;AACA8e,UAAAA,OAAO,CAACuC,KAAR,CAAc,iBAAexc,IAAI,CAAC0mB,OAApB,GAA4B,8BAA1C;AACH;AACJ,OAlBD;AAoBA,WAAK7rB,KAAL,GAAaA,KAAb;AACH;AACJ;;AAEDhQ,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN,GADkB,CAElB;AACH,GAtDoD,CAwDrD;;;AACA,MAAIk+B,kBAAJ,GAAwB;AACpB,QAAI,KAAK3f,WAAL,IAAoB,CAAxB,EAA4B,OAAO,KAAP;AAC5B,QAAI+f,SAAS,GAAG,KAAKrhC,UAAL,CAAgB3B,gBAAhB,CAAiC,eAAjC,CAAhB;AACA,QAAIwiC,IAAI,GAAGQ,SAAS,CAACA,SAAS,CAAC/8B,MAAV,GAAiB,CAAlB,CAApB;AACA,QAAI,CAACu8B,IAAL,EAAY,OAAO,KAAP;AACZ,WAAOA,IAAI,CAACryB,UAAL,GAAgBqyB,IAAI,CAACvf,WAArB,IAAoC,KAAKA,WAAzC,IAAwDuf,IAAI,CAACnyB,SAAL,GAAemyB,IAAI,CAAC90B,YAApB,IAAoC,KAAKA,YAAxG;AACH;;AAED,MAAIgH,KAAJ,GAAW;AAAE,WAAO,KAAKuuB,OAAZ;AAAqB;;AAClC,MAAIvuB,KAAJ,CAAUA,KAAV,EAAgB;AACZ,SAAKuuB,OAAL,GAAe,KAAKA,OAAL,IAAgB,IAAIb,eAAJ,EAA/B;AACA,SAAKa,OAAL,CAAa75B,GAAb,GAAmB,KAAKA,GAAxB;AAEAsL,IAAAA,KAAK,CAACzU,OAAN,CAAc2U,CAAC,IAAE;AACbA,MAAAA,CAAC,GAAG,IAAI+sB,aAAJ,CAAY/sB,CAAZ,CAAJ;;AACA,WAAKquB,OAAL,CAAa/O,GAAb,CAAiBtf,CAAC,CAACpU,EAAnB,EAAuBoU,CAAvB;AACH,KAHD;AAKA,SAAKD,MAAL,GAAc,KAAKD,KAAL,CAAWC,MAAX,IAAqB,KAAKD,KAAL,CAAW4tB,KAA9C;AACH;;AAED,aAAWr/B,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAgMlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;kEAGyC,KAAK8/B,WAAY;;kBAEjE,KAAKxuB,KAAL,CAAWC,MAAX,CAAkBmG,KAAM;;cAE5B,KAAKpG,KAAL,CAAWnU,GAAX,CAAeqU,CAAC,IAAEA,CAAC,CAACzR,MAAF,CAAS,KAAKggC,SAAd,CAAlB,CAA4C;;;;KAP7C;AAWP;;AAEF,QAAMD,WAAN,CAAkB98B,CAAlB,EAAoB;AAEhB,QAAIgvB,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,KAAK3gB,KAAL,CAAWnU,GAAX,CAAeqU,CAAC,IAAE;AAC5C,aAAO;AAACxQ,QAAAA,KAAK,EAAEwQ,CAAC,CAACkG,KAAV;AAAiBvY,QAAAA,GAAG,EAAEqS;AAAtB,OAAP;AACH,KAF6B,CAAT,EAEjB8c,OAFiB,CAETtrB,CAAC,CAACwB,MAFO,CAArB;AAIA,QAAIwtB,QAAJ,EACI,KAAKzgB,MAAL,GAAcygB,QAAQ,CAAC7yB,GAAvB;AACP;;AAED4gC,EAAAA,SAAS,CAAC/8B,CAAD,EAAG;AACR,QAAI+D,MAAM,GAAG,KAAKwK,MAAlB;AACA,SAAKA,MAAL,GAAcvO,CAAC,CAAC6O,aAAF,CAAgB8sB,OAA9B;AAEA,QAAI,KAAKptB,MAAL,IAAexK,MAAnB,EACA,KAAKlC,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,gBAAhB,EAAiC;AAChDG,MAAAA,MAAM,EAAE;AAAC05B,QAAAA,OAAO,EAAE,KAAKrtB,KAAL,CAAWC;AAArB,OADwC;AAEhDxM,MAAAA,OAAO,EAAE,KAFuC;AAGhDC,MAAAA,QAAQ,EAAE;AAHsC,KAAjC,CAAnB;AAKH;;AAEDg7B,EAAAA,aAAa,GAAE;AACX,QAAI,KAAK1uB,KAAT,EACI,KAAKA,KAAL,CAAWC,MAAX,CAAkBgd,IAAlB,CAAuB0R,KAAvB,GAA+B,KAAKA,KAApC;AACP;;AAED,MAAI1uB,MAAJ,GAAY;AACR,WAAO,KAAKD,KAAL,IAAc,KAAKA,KAAL,CAAWC,MAAzB,IAAmC,KAAKD,KAAL,CAAWC,MAAX,CAAkBnU,EAA5D;AACH;;AAED,MAAImU,MAAJ,CAAWpS,GAAX,EAAe;AACX,SAAKmS,KAAL,CAAWC,MAAX,GAAoBpS,GAApB;AACA,SAAKsN,MAAL;AAEA,QAAI8hB,IAAI,GAAG,KAAKjd,KAAL,CAAWC,MAAX,CAAkBgd,IAA7B;AAEA,SAAKzwB,YAAL,CAAkB,QAAlB,EAA4B,KAAKwT,KAAL,CAAWC,MAAX,CAAkBnU,EAA9C;AAEAmxB,IAAAA,IAAI,CAAC0R,KAAL,GAAa,KAAKA,KAAlB;AAEA,QAAI1R,IAAI,CAACltB,aAAL,IAAsB,IAA1B,EACI,KAAK7C,WAAL,CAAkB+vB,IAAlB;AACP;;AAxUoD,CAAzD;;eA4UenvB,cAAc,CAAC7B,GAAf,CAAmB,QAAnB;;;;;;;;;;;AClVf;AAEA,MAAM2iC,WAAN,SAA0BhiC,WAA1B,CAAsC;AAErCC,EAAAA,WAAW,GAAE;AACZ,YADY,CAGZ;;AACA,SAAKgiC,WAAL,GAAmB,KAAKA,WAAL,CAAiBx9B,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKq9B,aAAL,GAAqB,KAAKA,aAAL,CAAmBr9B,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKy9B,aAAL,GAAqB,KAAKA,aAAL,CAAmBz9B,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAK09B,cAAL,GAAsB,KAAKA,cAAL,CAAoB19B,IAApB,CAAyB,IAAzB,CAAtB;AACA;;AAED,MAAI29B,UAAJ,GAAgB;AAAE,WAAO,KAAKv9B,YAAL,CAAkB,cAAlB,CAAP;AAA0C;;AAE5D,MAAIw9B,QAAJ,GAAc;AAAE,WAAO,KAAKx9B,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAIw9B,QAAJ,CAAaphC,GAAb,EAAiB;AAAEA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AAA4E;;AAE/F,MAAI2hC,SAAJ,GAAe;AAAE,WAAO,KAAKz9B,YAAL,CAAkB,WAAlB,CAAP;AAAuC;;AACxD,MAAIy9B,SAAJ,CAAcrhC,GAAd,EAAkB;AAAEA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,WAAlB,EAA+B,EAA/B,CAAH,GAAwC,KAAKe,eAAL,CAAqB,WAArB,CAA3C;AAA8E;;AAElGoC,EAAAA,iBAAiB,GAAE;AAElB,QAAIE,IAAI,GAAG,KAAKiC,WAAL,GAAmBjC,IAA9B;AACA,QAAIA,IAAI,IAAI,CAACA,IAAI,CAACs/B,WAAlB,EACCt/B,IAAI,CAACs/B,WAAL,GAAmB,IAAnB,CAJiB,CAMlB;;AACA,SAAKC,OAAL,GAAezjC,KAAK,CAACC,IAAN,CAAW,KAAKN,gBAAL,CAAsB,yFAAtB,CAAX,CAAf;AACA,SAAK+jC,YAAL,GAAoB,EAApB;AAEA,SAAKD,OAAL,CAAa7jC,OAAb,CAAqBC,EAAE,IAAE;AACxB,UAAIkJ,GAAG,GAAGlJ,EAAE,CAACoC,YAAH,CAAgB,KAAhB,CAAV;;AACA,UAAI8G,GAAJ,EAAS;AACR,aAAK26B,YAAL,CAAkB36B,GAAlB,IAAyBlJ,EAAzB;AAEA,YAAI,CAAC,KAAKwjC,UAAV,EACCxjC,EAAE,CAACsM,KAAH,CAASw3B,QAAT,GAAoB56B,GAApB;AACD;AACD,KARD;AAUA,QAAI,KAAK/D,QAAL,IAAiB,KAAKc,YAAL,CAAkB,UAAlB,CAArB,EACC,KAAKd,QAAL,GAAgB,IAAhB;AAED,SAAKtB,gBAAL,CAAsB,QAAtB,EAAgC,KAAK0/B,cAArC,EAAqD,IAArD;;AAEA,SAAKQ,cAAL;AACA;;AAED,aAAW/hC,kBAAX,GAA+B;AAAE,WAAO,CAAC,UAAD,CAAP;AAAqB;;AAEtDC,EAAAA,wBAAwB,CAACvB,IAAD,EAAOwB,QAAP,EAAiBC,QAAjB,EAA2B;AAClD,QAAIzB,IAAI,IAAI,UAAZ,EACC,KAAKyE,QAAL,GAAgBhD,QAAQ,KAAK,IAA7B;AACD;;AAEDqC,EAAAA,oBAAoB,GAAE;AACrB,SAAKo/B,OAAL,GAAe,EAAf;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKV,KAAL,GAAa,IAAb;AAEA,SAAKx8B,mBAAL,CAAyB,QAAzB,EAAmC,KAAK48B,cAAxC;AACA;;AAED,MAAIJ,KAAJ,GAAW;AAAE,WAAO,KAAKa,MAAZ;AAAoB;;AACjC,MAAIb,KAAJ,CAAUA,KAAV,EAAgB;AAEf,QAAI,CAACA,KAAL,EAAY;AAEX,UAAI,KAAKA,KAAT,EAAgB;AACf,aAAKA,KAAL,CAAWc,GAAX,CAAe,MAAf,EAAuB,IAAvB,EAA6B,IAA7B;AACA,aAAKd,KAAL,CAAWc,GAAX,CAAe,QAAf,EAAyB,IAAzB,EAA+B,IAA/B;AACA,aAAKd,KAAL,CAAWc,GAAX,CAAe,QAAf,EAAyB,IAAzB,EAA+B,IAA/B;AACA,eAAO,KAAKD,MAAZ;AACA;;AAED;AACA;;AAED,QAAIb,KAAK,IAAI,KAAKA,KAAlB,EAA0B;AAE1B,SAAKa,MAAL,GAAcb,KAAd;AACA,SAAKA,KAAL,CAAWe,YAAX,GAA0B,KAAKf,KAAL,CAAWe,YAAX,IAA2B,EAArD;AAEA,SAAKf,KAAL,CAAWgB,EAAX,CAAc,MAAd,EAAsB,KAAKd,WAA3B,EAAwC,IAAxC;AACA,SAAKF,KAAL,CAAWgB,EAAX,CAAc,QAAd,EAAwB,KAAKjB,aAA7B,EAA4C,IAA5C;AACA,SAAKC,KAAL,CAAWgB,EAAX,CAAc,QAAd,EAAwB,KAAKb,aAA7B,EAA4C,IAA5C;;AAEA,SAAKS,cAAL;AACA;;AAEDK,EAAAA,KAAK,CAACC,IAAD,EAAM;AACV,QAAIn7B,GAAG,GAAG,KAAK9G,YAAL,CAAkB,OAAlB,CAAV;AACA,QAAI,CAAC8G,GAAL,EAAW,OAAOyH,SAAP;AAEX,QAAIC,IAAI,GAAGwzB,KAAK,CAACl7B,GAAD,CAAL,IAAc,EAAzB;AAEA,QAAIm7B,IAAI,KAAK1zB,SAAb,EACC,OAAOC,IAAP;AAEDA,IAAAA,IAAI,GAAG3C,MAAM,CAAC8M,MAAP,CAAcnK,IAAd,EAAoByzB,IAApB,CAAP;AAEAD,IAAAA,KAAK,CAACl7B,GAAD,EAAM0H,IAAN,CAAL;AACA;;AAED0zB,EAAAA,WAAW,CAACp7B,GAAD,EAAM2D,UAAU,GAAC,IAAjB,EAAsB;AAChC,QAAI,KAAKs2B,KAAT,EACC,OAAO,KAAKA,KAAL,CAAWoB,GAAX,CAAer7B,GAAf,IAAsB,KAAKi6B,KAAL,CAAW1iC,GAAX,CAAeyI,GAAf,CAAtB,GAA2C2D,UAAlD;AAED,QAAI+D,IAAI,GAAG,KAAKwzB,KAAL,EAAX;AACA,WAAOxzB,IAAI,GAAGA,IAAI,CAAC1H,GAAD,CAAP,GAAe2D,UAA1B;AACA;;AAEDk3B,EAAAA,cAAc,GAAE;AACf,QAAI,KAAKH,OAAL,KAAiB,KAAKT,KAAL,IAAc,KAAKl9B,YAAL,CAAkB,OAAlB,CAA/B,CAAJ,EACA,KAAK29B,OAAL,CAAa7jC,OAAb,CAAqBC,EAAE,IAAE;AACxB;AACA,UAAIkJ,GAAG,GAAGlJ,EAAE,CAACoC,YAAH,CAAgB,KAAhB,CAAV;AACA,UAAIC,GAAG,GAAG,KAAKiiC,WAAL,CAAiBp7B,GAAjB,CAAV;AAEA,UAAI7G,GAAG,IAAIA,GAAG,CAACmiC,gBAAf,EACCniC,GAAG,GAAGA,GAAG,CAACqJ,MAAJ,CAAW1L,EAAE,CAACykC,OAAH,CAAWC,WAAX,GAAuB1kC,EAAE,CAACykC,OAAH,CAAWC,WAAX,CAAuBh5B,MAA9C,GAAqD,YAAhE,CAAN;AAED,UAAIrJ,GAAG,KAAKsO,SAAZ,EACC3Q,EAAE,CAACiB,KAAH,GAAWoB,GAAX;AACD,KAVD;AAWA;;AAEDghC,EAAAA,WAAW,CAACjQ,CAAD,EAAI4M,KAAJ,EAAWpjB,IAAX,EAAgB;AAC1B,QAAI+nB,OAAO,GAAG,KAAd,CAD0B,CAG1B;;AACA,SAAK,IAAIz7B,GAAT,IAAgB82B,KAAhB,EAAuB;AACtB,UAAI5M,CAAC,CAAC8Q,YAAF,IAAkB9Q,CAAC,CAAC8Q,YAAF,CAAeh7B,GAAf,MAAwByH,SAA9C,EAAyD;AACxDg0B,QAAAA,OAAO,GAAG,IAAV;AACA,eAAOvR,CAAC,CAAC8Q,YAAF,CAAeh7B,GAAf,CAAP;AACA;AACD,KATyB,CAW1B;;;AACA,QAAIy7B,OAAJ,EACC,KAAKxB,KAAL,CAAWwB,OAAX,CAAmB,QAAnB,EAA6B,KAAKxB,KAAL,CAAWyB,QAAX,EAA7B,EAAoD,KAAKzB,KAAL,CAAW0B,WAAX,EAApD;AACD;;AAEDvB,EAAAA,aAAa,CAACsB,QAAD,EAAWC,WAAX,EAAuB;AACnC,SAAKjB,OAAL,CAAa7jC,OAAb,CAAqBC,EAAE,IAAE;AACxB,UAAI6kC,WAAW,CAAC7kC,EAAE,CAACkJ,GAAJ,CAAX,IAAuByH,SAAvB,IAAoC,CAAC,KAAK8yB,QAA9C,EACCzjC,EAAE,CAACgB,YAAH,CAAgB,SAAhB,EAA2B,EAA3B,EADD,KAGChB,EAAE,CAAC+B,eAAH,CAAmB,SAAnB;AACD,KALD;AAMA;;AAEDmhC,EAAAA,aAAa,CAAC9P,CAAD,EAAIxW,IAAI,GAAC,EAAT,EAAY;AAExB,SAAK,IAAI1T,GAAT,IAAgBkqB,CAAC,CAAC0R,OAAlB,EAA2B;AAE1B;AACA,UAAI1R,CAAC,CAAC8Q,YAAF,IAAkB9Q,CAAC,CAAC8Q,YAAF,CAAeh7B,GAAf,CAAlB,IAAyCkqB,CAAC,CAAC8Q,YAAF,CAAeh7B,GAAf,KAAuBkqB,CAAC,CAAC0R,OAAF,CAAU57B,GAAV,CAApE,EAAmF;AAClF,eAAOkqB,CAAC,CAAC8Q,YAAF,CAAeh7B,GAAf,CAAP;AACA,OALyB,CAO1B;;;AACA,UAAI,KAAK26B,YAAL,CAAkB36B,GAAlB,CAAJ,EAA4B;AAC3B,aAAK26B,YAAL,CAAkB36B,GAAlB,EAAuBjI,KAAvB,GAA+BmyB,CAAC,CAAC0R,OAAF,CAAU57B,GAAV,CAA/B;AACA,aAAK26B,YAAL,CAAkB36B,GAAlB,EAAuBnH,eAAvB,CAAuC,SAAvC,EAF2B,CAI3B;AACA;AACA;AACA;AACD;AACD;;AAEDwhC,EAAAA,cAAc,CAACr9B,CAAD,EAAG;AAEhB,QAAI,CAACA,CAAC,CAACiC,MAAP,EAAgB;AAEhB,QAAIirB,CAAC,GAAG,KAAK+P,KAAb;AACA,QAAInjC,EAAE,GAAGkG,CAAC,CAACwB,MAAX;AACA,QAAIwB,GAAG,GAAGlJ,EAAE,CAACoC,YAAH,CAAgB,KAAhB,CAAV;AACA,QAAIC,GAAG,GAAG6D,CAAC,CAACiC,MAAF,CAASlH,KAAnB;AAEA,QAAI,CAACiI,GAAL,EAAW;AAEX,QAAI67B,OAAO,GAAG,EAAd;AACAA,IAAAA,OAAO,CAAC77B,GAAD,CAAP,GAAe7G,GAAf,CAZgB,CAchB;AACA;AACA;AACA;AAEA;;AACA,QAAIrC,EAAE,CAACykC,OAAH,IAAczkC,EAAE,CAACykC,OAAH,CAAW7hC,IAAX,IAAiB,MAA/B,IAAyCP,GAA7C,EAAkD;AACjD0iC,MAAAA,OAAO,CAAC77B,GAAD,CAAP,GAAelJ,EAAE,CAACykC,OAAH,CAAWC,WAAX,CAAuBM,SAAvB,CAAiC,YAAjC,CAAf;AACA;;AAED,SAAKZ,KAAL,CAAWW,OAAX;;AAEA,QAAI,KAAK5B,KAAT,EAAgB;AACf,UAAI,KAAKM,QAAL,KAAkB,IAAtB,EAA4B;AAC3B,aAAKN,KAAL,CAAWxnB,IAAX,CAAgBopB,OAAhB,EAAyB;AAACE,UAAAA,KAAK,EAAC,KAAKvB,SAAL,IAAgB;AAAvB,SAAzB;AACA,aAAKP,KAAL,CAAWwB,OAAX,CAAmB,QAAnB,EAA6B,KAA7B,EAAoCI,OAApC;AACA,OAHD,MAGK;AACJ,aAAK5B,KAAL,CAAW+B,QAAX,CAAoBH,OAApB;AACA;AACD;AACD;;AAED,MAAI5/B,QAAJ,GAAc;AAAE,WAAO,KAAKggC,UAAL,IAAmB,KAA1B;AAAiC;;AACjD,MAAIhgC,QAAJ,CAAaA,QAAQ,GAAC,KAAtB,EAA4B;AAC3B,SAAKggC,UAAL,GAAkBhgC,QAAQ,KAAK,IAA/B;AACA,SAAKy+B,OAAL,IAAc,KAAKA,OAAL,CAAa7jC,OAAb,CAAqBC,EAAE,IAAEA,EAAE,CAACmF,QAAH,GAAY,KAAKggC,UAA1C,CAAd;AACA;;AAED,MAAIC,SAAJ,GAAe;AACd,WAAO,CAAC,CAAC,KAAKxB,OAAL,CAAa58B,IAAb,CAAkBhH,EAAE,IAAEA,EAAE,CAAColC,SAAzB,CAAT;AACA;;AAEDrG,EAAAA,KAAK,CAAChlB,KAAK,GAAC,CAAP,EAAS;AACb,SAAK6pB,OAAL,CAAa7pB,KAAb,KAAqB,KAAK6pB,OAAL,CAAa7pB,KAAb,EAAoBglB,KAApB,EAArB;AACA;;AAEDt+B,EAAAA,GAAG,CAACyI,GAAD,EAAK;AACP,QAAI,OAAOA,GAAP,IAAc,QAAlB,EACC,OAAO,KAAK06B,OAAL,CAAa16B,GAAb,CAAP;AAED,WAAO/I,KAAK,CAACC,IAAN,CAAW,KAAKwjC,OAAhB,EAAyB58B,IAAzB,CAA8Bq+B,EAAE,IAAEA,EAAE,CAACn8B,GAAH,IAAQA,GAA1C,CAAP;AACA;;AApOoC;;AAuOtC5G,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsC6gC,WAAtC;;eAEe9gC,cAAc,CAAC7B,GAAf,CAAmB,cAAnB;;;;;;;;;;;AC3Of;;eAEeuC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEnB;;;;AAJA;;;AAOA,MAAMsiC,kBAAN,SAAiClkC,WAAjC,CAA6C;AAE5CC,EAAAA,WAAW,GAAG;AACP;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEN,QAAIuE,KAAK,GAAG,KAAK9B,YAAL,CAAkB,OAAlB,KAA8B,4BAA1C;AACA,QAAI9C,MAAM,GAAG,KAAK8C,YAAL,CAAkB,QAAlB,KAA+B,6BAA5C;AACA,QAAImjC,MAAM,GAAG,KAAKnjC,YAAL,CAAkB,QAAlB,KAA+B,6BAA5C,CARa,CAUb;AACA;;AACA9C,IAAAA,MAAM,GAAGA,MAAM,CAACiB,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAjB,IAAAA,MAAM,GAAGA,MAAM,CAACiB,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAglC,IAAAA,MAAM,GAAGA,MAAM,CAAChlC,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAglC,IAAAA,MAAM,GAAGA,MAAM,CAAChlC,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AAEMiB,IAAAA,IAAI,CAAC5B,SAAL,GAAkB;YACdmD,wBAAOk6B,OAAQ;;;;0BAID39B,MAAO;yBACR4E,KAAM;0BACLqhC,MAAO;;;;;;;;;;;;4BAPzB;AAqBA,SAAK9jC,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEN,QAAIX,KAAK,GAAG,KAAK+5B,CAAL,CAAO,QAAP,CAAZ;AACA,SAAKtD,IAAL,GAAYz2B,KAAK,CAACukC,aAAN,GAAsBnlC,GAAtB,CAA0BL,EAAE,IAAEA,EAAE,CAAC4iC,WAAH,CAAe17B,IAAf,EAA9B,EAAqD0E,IAArD,CAA0D,GAA1D,CAAZ;AACA,SAAK8rB,IAAL,GAAY,KAAKA,IAAL,CAAUn3B,OAAV,CAAkB,UAAlB,EAA8B,EAA9B,EAAkC2G,IAAlC,EAAZ;AAEA,SAAKu9B,OAAL,GAAe,KAAK7jC,aAAL,CAAmB,6EAAnB,CAAf;;AAEA,QAAI,KAAK6jC,OAAT,EAAkB;AAEjB,WAAKA,OAAL,CAAazvB,IAAb,GAAoB,SAApB;AAEA,WAAKsd,gBAAL,GAAwB,IAAIC,gBAAJ,CAAqBkT,SAAS,IAAE;AACvDA,QAAAA,SAAS,CAAC1lC,OAAV,CAAkBqzB,CAAC,IAAE;AAEpB;AACA,cAAI,CAAC,SAAD,EAAY,OAAZ,EAAqB,UAArB,EAAiC,OAAjC,EAA0C,SAA1C,EAAqD5qB,QAArD,CAA8D4qB,CAAC,CAACsS,aAAhE,CAAJ,EAAoF;AACnF,gBAAI,KAAKjB,OAAL,CAAax+B,YAAb,CAA0BmtB,CAAC,CAACsS,aAA5B,CAAJ,EACC,KAAK1kC,YAAL,CAAkBoyB,CAAC,CAACsS,aAApB,EAAmC,IAAnC,EADD,KAGC,KAAK3jC,eAAL,CAAqBqxB,CAAC,CAACsS,aAAvB;AACD;AACD,SATD;AAUA,OAXuB,CAAxB;AAYA,WAAKpT,gBAAL,CAAsBG,OAAtB,CAA8B,KAAKgS,OAAnC,EAA4C;AAAE3jC,QAAAA,UAAU,EAAE,IAAd;AAAoB4xB,QAAAA,SAAS,EAAE,KAA/B;AAAsCC,QAAAA,OAAO,EAAE;AAA/C,OAA5C;AACA;;AAED,SAAK9uB,gBAAL,CAAsB,OAAtB,EAA+B,KAAKs5B,QAAL,CAAct3B,IAAd,CAAmB,IAAnB,CAA/B,EAAyD,IAAzD;AAEA,SAAKhC,gBAAL,CAAsB,QAAtB,EAAgC,KAAK8hC,SAArC;AACG;;AAEJA,EAAAA,SAAS,CAACz/B,CAAD,EAAG;AAEX,QAAIA,CAAC,CAACwB,MAAF,IAAY,IAAhB,EAAuB;AAEvB,QAAIxB,CAAC,CAACwB,MAAF,CAAS24B,OAAT,IAAoB,cAAxB,EAAwC;AAExCn6B,IAAAA,CAAC,CAACC,eAAF;AAEA,QAAI0iB,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACPlH,QAAAA,KAAK,EAAE,KAAKA,KADL;AAEPiI,QAAAA,GAAG,EAAE,KAAKA;AAFH;AAH6B,KAA1B,CAAZ;AASA,SAAKnB,aAAL,CAAmB8gB,KAAnB;AACA;;AAEDmS,EAAAA,CAAC,CAACrvB,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgBb,aAAhB,CAA8B+K,GAA9B,CAAP;AAA0C;;AAClDi6B,EAAAA,EAAE,CAACj6B,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgB3B,gBAAhB,CAAiC6L,GAAjC,CAAP;AAA6C;;AAEtDxH,EAAAA,iBAAiB,GAAE;AAClB,SAAK0hC,cAAL,GADkB,CAGlB;;;AACA,SAAKD,EAAL,CAAQ,MAAR,EAAgB7lC,OAAhB,CAAwBiV,IAAI,IAAE;AAC7B,UAAIA,IAAI,CAACwwB,aAAL,GAAqBz/B,MAArB,IAA+B,CAAnC,EACCiP,IAAI,CAAChU,YAAL,CAAkB,QAAlB,EAA4B,EAA5B,EADD,KAGCgU,IAAI,CAACjT,eAAL,CAAqB,QAArB;AACD,KALD,EAJkB,CAWlB;;AACAuR,IAAAA,UAAU,CAAC,MAAI;AACd,UAAI,KAAKhH,KAAL,CAAWyxB,QAAX,IAAuB,EAA3B,EACC,KAAKzxB,KAAL,CAAWyxB,QAAX,GAAsB,KAAK/C,CAAL,CAAO,QAAP,EAAiBjY,WAAvC;AAED,UAAI,KAAK0hB,OAAT,EACC,KAAKA,OAAL,CAAat/B,QAAb,GAAwB,KAAKA,QAA7B;AACD,KANS,EAMR,CANQ,CAAV;AAQA;;AAEDX,EAAAA,oBAAoB,GAAE,CAAE;;AAExB,aAAWxC,kBAAX,GAAgC;AAAE,WAAO,CAAC,UAAD,CAAP;AAAsB;;AAExDC,EAAAA,wBAAwB,CAACvB,IAAD,EAAOwB,QAAP,EAAiBC,QAAjB,EAA0B;AAEjD,QAAIzB,IAAI,KAAK,UAAT,IAAuB,KAAK+jC,OAA5B,IAAuC,KAAKA,OAAL,CAAat/B,QAAb,KAA0BwL,SAArE,EACC,KAAK8zB,OAAL,CAAat/B,QAAb,GAAwB,KAAKA,QAA7B;AACD;;AAED,MAAIA,QAAJ,GAAc;AAAE,WAAO,KAAKc,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAId,QAAJ,CAAa9C,GAAG,GAAC,IAAjB,EAAsB;AAAEA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AAA4E;;AAEpG,MAAImH,GAAJ,GAAS;AAAE,WAAO,KAAK9G,YAAL,CAAkB,KAAlB,CAAP;AAAgC;;AAE3C,MAAInB,KAAJ,GAAW;AACV,WAAO,KAAKwjC,OAAL,IAAgB,KAAKA,OAAL,CAAaxjC,KAApC;AACA;;AAED,MAAIA,KAAJ,CAAUoB,GAAV,EAAc;AACb,QAAI,KAAKoiC,OAAT,EACC,KAAKA,OAAL,CAAaxjC,KAAb,GAAqBoB,GAArB;AACD;;AAED,MAAIyjC,OAAJ,GAAa;AACZ,QAAIrB,OAAO,GAAG,KAAKA,OAAnB;AACA,QAAI,CAACA,OAAL,EAAe,OAAO9zB,SAAP;AACf,QAAItO,GAAG,GAAGoiC,OAAO,CAACqB,OAAlB;AACA,WAAOzjC,GAAG,KAAKsO,SAAR,GAAoBtO,GAApB,GAA0BoiC,OAAO,CAACxjC,KAAzC;AACA;;AAED,MAAI0X,OAAJ,GAAa;AAAE,WAAO,KAAK8rB,OAAL,IAAgB,KAAKA,OAAL,CAAa9rB,OAApC;AAA4C;;AAE3D,MAAIA,OAAJ,CAAYtW,GAAZ,EAAgB;AACf,QAAI,KAAKoiC,OAAT,EACC,KAAKA,OAAL,CAAa9rB,OAAb,GAAuBtW,GAAvB;AACD;;AAED,MAAI+iC,SAAJ,GAAe;AACd,WAAO,KAAKX,OAAL,IAAc,KAAKA,OAAL,CAAaW,SAAlC;AACA;;AAED,MAAIlhC,KAAJ,GAAW;AAAE,WAAO,KAAK82B,CAAL,CAAO,QAAP,EAAiB+K,SAAxB;AAAmC;;AAChD,MAAI7hC,KAAJ,CAAUyH,GAAV,EAAc;AACb,SAAKqvB,CAAL,CAAO,QAAP,EAAiBp7B,SAAjB,GAA6B+L,GAA7B;;AACA,QAAIA,GAAJ,EAAS;AACR,WAAKa,SAAL,CAAevM,MAAf,CAAsB,SAAtB;AACA,KAFD,MAEK;AACJ,WAAKuM,SAAL,CAAelC,GAAf,CAAmB,SAAnB;AACA;AACD;;AAEDu7B,EAAAA,cAAc,GAAE;AAEf,QAAIG,UAAU,GAAG,KAAKhL,CAAL,CAAO,QAAP,EAAiB2H,UAAlC;AAEA,QAAIqD,UAAU,CAACjgC,MAAX,IAAqB,CAArB,IAA2BigC,UAAU,CAAC,CAAD,CAAV,CAAc3F,OAAd,IAAyB,MAAzB,IAAmC2F,UAAU,CAAC,CAAD,CAAV,CAAcR,aAAd,GAA8Bz/B,MAA9B,IAAwC,CAA1G,EACC,KAAKyG,SAAL,CAAelC,GAAf,CAAmB,SAAnB;AACD;;AAED6yB,EAAAA,QAAQ,CAACj3B,CAAD,EAAG;AACV;AACA,QAAIA,CAAC,CAACwB,MAAF,IAAY,IAAhB,EACC,KAAKq3B,KAAL,GAHS,CAIV;AACA;AACA;;AAEDA,EAAAA,KAAK,GAAE;AACN,SAAK0F,OAAL,IAAgB,KAAKA,OAAL,CAAa1F,KAAb,EAAhB;AACA;;AA3L2C;;AA+L7Cz8B,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsC+iC,kBAAtC;;eAEehjC,cAAc,CAAC7B,GAAf,CAAmB,cAAnB;;;;ACvMf,MAAMwlC,UAAU,GAAG;AAClB,aAAW;AAAC/hC,IAAAA,KAAK,EAAE;AAAR,GADO;AAElB,YAAU;AAACA,IAAAA,KAAK,EAAE;AAAR,GAFQ;AAGlB,QAAM;AAACA,IAAAA,KAAK,EAAE;AAAR,GAHY;AAIlB,UAAQ;AAACA,IAAAA,KAAK,EAAE;AAAR,GAJU;AAKlB,QAAM;AAACA,IAAAA,KAAK,EAAE,MAAR;AAAgBwF,IAAAA,KAAK,EAAE;AAAvB,GALY;AAMlB,UAAQ;AAACxF,IAAAA,KAAK,EAAE,MAAR;AAAgBwF,IAAAA,KAAK,EAAE;AAAvB,GANU;AAOlB,YAAU;AAACxF,IAAAA,KAAK,EAAE,QAAR;AAAkBwF,IAAAA,KAAK,EAAE;AAAzB;AAPQ,CAAnB;;AAUA4L,MAAM,CAACD,OAAP,GAAiB,SAAS6wB,OAAT,CAAiBtpB,IAAI,GAAC,EAAtB,EAA0BjI,CAA1B,EAA4B;AAE5C,MAAI,OAAOiI,IAAP,IAAe,QAAnB,EAA6B;AAC5B,QAAI,CAACqpB,UAAU,CAACrpB,IAAD,CAAf,EACC,OAAOgX,OAAO,CAACzM,IAAR,CAAa,oBAAkBvK,IAAlB,GAAuB,kBAApC,CAAP;AAEDA,IAAAA,IAAI,GAAGqpB,UAAU,CAACrpB,IAAD,CAAjB;AACA;;AAED,MAAI;AACH1Y,IAAAA,KAAK,GAAC,EADH;AAEHysB,IAAAA,SAAS,GAAC,EAFP;AAEU;AACbjnB,IAAAA,KAAK,GAAC,EAHH;AAIHlG,IAAAA,IAAI,GAAC,EAJF;AAKHwxB,IAAAA,IAAI,GAAC;AALF,MAMApY,IANJ,CAT4C,CAiB5C;;AAEA,SAAQ,UAASoY,IAAI,IAAE,MAAO,UAASxxB,IAAK,YAAWkG,KAAM,YAAWinB,SAAU,KAAIzsB,KAAM,UAA5F,CAnB4C,CAqB5C;AACA,CAtBD;;;;;;;;;ACXA;;AACA,MAAMkyB,KAAK,GAAGh3B,OAAO,CAAC,UAAD,CAAP,CAAoBs5B,OAAlC;;AACA,MAAM3G,OAAO,GAAG3yB,OAAO,CAAC,YAAD,CAAP,CAAsBs5B,OAAtC;;AACA,MAAMwN,OAAO,GAAG9mC,OAAO,CAAC,YAAD,CAAvB,EAEA;;;AACA,MAAM2D,MAAM,GAAG3D,OAAO,CAAC,cAAD,CAAtB;;AAEA,MAAM+mC,UAAU,GAAG,CAAC,SAAD,EAAY,QAAZ,EAAsB,IAAtB,CAAnB;;AAEe,MAAMC,MAAN,CAAa;AAC3B/kC,EAAAA,WAAW,CAACub,IAAI,GAAC,EAAN,EAAS;AAEnB,SAAKA,IAAL,GAAYA,IAAI,GAAG3O,MAAM,CAAC8M,MAAP,CAAc;AAChCvX,MAAAA,IAAI,EAAC,EAD2B;AAEhCoX,MAAAA,KAAK,EAAC,EAF0B;AAGhCyrB,MAAAA,GAAG,EAAC,EAH4B;AAIhC5U,MAAAA,IAAI,EAAE,IAJ0B;AAKhCqI,MAAAA,CAAC,EAAE,IAL6B;AAMhCwM,MAAAA,IAAI,EAAC,CAAC,SAAD,CAN2B;AAOhC3V,MAAAA,SAAS,EAAE;AAPqB,KAAd,EAQhB/T,IARgB,CAAnB;AAUA,SAAK5c,EAAL,GAAUN,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AAEAid,IAAAA,IAAI,CAAC+T,SAAL,IAAkB,mBAAlB;AAEA,QAAI,KAAK/T,IAAL,CAAUpZ,IAAd,EACCoZ,IAAI,CAAC+T,SAAL,IAAkB,WAAlB;AAED/T,IAAAA,IAAI,CAAC+T,SAAL,CAAe5pB,KAAf,CAAqB,GAArB,EAA0BhH,OAA1B,CAAkC4wB,SAAS,IAAEA,SAAS,IAAE,KAAK3wB,EAAL,CAAQwM,SAAR,CAAkBlC,GAAlB,CAAsBqmB,SAAtB,CAAxD;AAEA,QAAI,CAAC4V,QAAD,EAAWC,SAAX,IAAwB,CAAC5pB,IAAI,CAACpZ,IAAL,IAAW,EAAZ,EAAgBuD,KAAhB,CAAsB,GAAtB,CAA5B,CArBmB,CAuBnB;;AACA,QAAIvD,IAAI,GAAGoZ,IAAI,CAACpZ,IAAL,GAAa,iBAAgB+iC,QAAS,YAAWC,SAAS,IAAE,EAAG,sCAA/D,GAAuG,EAAlH;AACA,QAAIF,IAAI,GAAG1pB,IAAI,CAAC0pB,IAAL,GAAY1pB,IAAI,CAAC0pB,IAAL,CAAUjmC,GAAV,CAAcomC,GAAG,IAAEP,OAAO,CAACO,GAAD,CAA1B,EAAiC76B,IAAjC,CAAsC,IAAtC,CAAZ,GAA0D,EAArE;AAEA,QAAIgR,IAAI,CAACpZ,IAAL,KAAc,SAAlB,EACCA,IAAI,GAAI,yBAAR;AAED,SAAKxD,EAAL,CAAQJ,SAAR,GAAqB,UAASmD,MAAO;6BACVS,IAAK;6BACLoZ,IAAI,CAAChC,KAAM;4BACZgC,IAAI,CAACypB,GAAI;6BACRC,IAAK,QAJhC;;AAKA,QAAG1pB,IAAI,CAACypB,GAAL,YAAoBK,uBAAvB,EAAsC;AACrC,2BAAO9pB,IAAI,CAACypB,GAAZ,EAAiB,KAAKrmC,EAAL,CAAQY,aAAR,CAAsB,QAAtB,CAAjB;AACA;;AAED,QAAI,KAAKgc,IAAL,CAAUkd,CAAd,EACC,KAAK95B,EAAL,CAAQsM,KAAR,CAAcc,KAAd,GAAuB,OAAO,KAAKwP,IAAL,CAAUkd,CAAjB,IAAsB,QAAvB,GAAmC,KAAKld,IAAL,CAAUkd,CAAV,GAAY,IAA/C,GAAsD,KAAKld,IAAL,CAAUkd,CAAtF;;AAED,QAAI,KAAKld,IAAL,CAAU6U,IAAd,EAAoB;AACnB,UAAI,CAAC,KAAK7U,IAAL,CAAUpZ,IAAX,IAAmB,CAAC,KAAKoZ,IAAL,CAAUhC,KAA9B,IAAuC,CAAC,KAAKgC,IAAL,CAAUypB,GAAtD,EAA2D;AAE1D,YAAI,KAAKzpB,IAAL,CAAU6U,IAAV,YAA0BrwB,WAA9B,EAA2C;AAC1C,eAAKpB,EAAL,CAAQJ,SAAR,GAAqB,uBAAsB0mC,IAAK,QAAhD;AACA,eAAKtmC,EAAL,CAAQ2mC,OAAR,CAAgB,KAAK/pB,IAAL,CAAU6U,IAA1B;AACA,SAHD,MAGK;AACJ,eAAKzxB,EAAL,CAAQJ,SAAR,GAAqB,GAAE,KAAKgd,IAAL,CAAU6U,IAAK,uBAAsB6U,IAAK,QAAjE;AACA;AACD,OARD,MAUC,KAAKtmC,EAAL,CAAQY,aAAR,CAAsB,QAAtB,EAAgCc,WAAhC,CAA4C,KAAKkb,IAAL,CAAU6U,IAAtD;AACD;;AAED,SAAKzxB,EAAL,CAAQ6D,gBAAR,CAAyB,OAAzB,EAAkC,KAAKm6B,OAAL,CAAan4B,IAAb,CAAkB,IAAlB,CAAlC,EAA2D,IAA3D;AAEA,SAAKo4B,OAAL,GAAe,IAAI7f,OAAJ,CAAYC,OAAO,IAAE;AAAE,WAAK6f,QAAL,GAAgB7f,OAAhB;AAAyB,KAAhD,CAAf;AACA;;AAED,MAAIzD,KAAJ,CAAUjP,GAAV,EAAc;AACb,SAAKiR,IAAL,CAAUhC,KAAV,GAAkBjP,GAAlB;AACA,QAAI3L,EAAE,GAAG,KAAKA,EAAL,CAAQY,aAAR,CAAsB,UAAtB,CAAT;AACA,QAAIZ,EAAJ,EACCA,EAAE,CAACJ,SAAH,GAAe+L,GAAf;AACD;;AAED,MAAI06B,GAAJ,CAAQ16B,GAAR,EAAY;AACX,SAAKiR,IAAL,CAAUypB,GAAV,GAAgB16B,GAAhB;AACA,QAAI3L,EAAE,GAAG,KAAKA,EAAL,CAAQY,aAAR,CAAsB,QAAtB,CAAT;AACA,QAAIZ,EAAJ,EACCA,EAAE,CAACJ,SAAH,GAAe+L,GAAf;AACD;;AAED,MAAI26B,IAAJ,CAASA,IAAT,EAAc;AACb,SAAK1pB,IAAL,CAAU0pB,IAAV,GAAiBA,IAAjB;AACAA,IAAAA,IAAI,GAAGA,IAAI,GAAGA,IAAI,CAACjmC,GAAL,CAASomC,GAAG,IAAEP,OAAO,CAACO,GAAD,CAArB,EAA4B76B,IAA5B,CAAiC,IAAjC,CAAH,GAA4C,EAAvD;AACA,QAAI5L,EAAE,GAAG,KAAKA,EAAL,CAAQY,aAAR,CAAsB,SAAtB,CAAT;AACA,QAAIZ,EAAJ,EACCA,EAAE,CAACJ,SAAH,GAAe0mC,IAAf;AACD;;AAED,MAAI9iC,IAAJ,CAASA,IAAT,EAAc;AACb,SAAKoZ,IAAL,CAAUpZ,IAAV,GAAiBA,IAAjB;AACA,QAAI,CAAC+iC,QAAD,EAAWC,SAAX,IAAwB,CAAChjC,IAAI,IAAE,EAAP,EAAWuD,KAAX,CAAiB,GAAjB,CAA5B;AACAvD,IAAAA,IAAI,GAAG,KAAKoZ,IAAL,CAAUpZ,IAAV,GAAkB,iBAAgB+iC,QAAS,YAAWC,SAAS,IAAE,EAAG,sCAApE,GAA4G,EAAnH;AAEA,QAAI,KAAK5pB,IAAL,CAAUpZ,IAAV,KAAmB,SAAvB,EACCA,IAAI,GAAI,yBAAR;AAED,QAAIxD,EAAE,GAAG,KAAKA,EAAL,CAAQY,aAAR,CAAsB,SAAtB,CAAT;AACA,QAAIZ,EAAJ,EACCA,EAAE,CAACJ,SAAH,GAAe4D,IAAf;AACD;;AAEDw6B,EAAAA,OAAO,CAAC93B,CAAD,EAAG;AAET,QAAIlG,EAAE,GAAGkG,CAAC,CAACwB,MAAX;;AAEA,QAAI1H,EAAE,CAACqgC,OAAH,IAAc,OAAlB,EAA2B;AAE1B,UAAItmB,KAAK,GAAG5Z,KAAK,CAACC,IAAN,CAAWJ,EAAE,CAACuE,aAAH,CAAiB2e,QAA5B,EAAsCjF,OAAtC,CAA8Cje,EAA9C,CAAZ;AACA,UAAI4mC,OAAO,GAAG,KAAKhqB,IAAL,CAAU0pB,IAAV,CAAevsB,KAAf,CAAd;AACA,WAAK8sB,UAAL,CAAgBD,OAAhB;AACA;AACD;;AAED3V,EAAAA,SAAS,CAAC/qB,CAAD,EAAG;AAEX,QAAI0gC,OAAO,GAAGj2B,SAAd;;AAEA,QAAIzK,CAAC,CAACk3B,IAAF,IAAU,QAAd,EAAwB;AACvBwJ,MAAAA,OAAO,GAAG,KAAKhqB,IAAL,CAAU0pB,IAAV,CAAet/B,IAAf,CAAoBy/B,GAAG,IAAEN,UAAU,CAAC39B,QAAX,CAAoBi+B,GAApB,CAAzB,CAAV;AAEA,KAHD,MAGM,IAAIvgC,CAAC,CAACk3B,IAAF,IAAU,OAAd,EAAuB;AAC5BwJ,MAAAA,OAAO,GAAG,KAAKhqB,IAAL,CAAU0pB,IAAV,CAAet/B,IAAf,CAAoBy/B,GAAG,IAAE,CAACN,UAAU,CAAC39B,QAAX,CAAoBi+B,GAApB,CAA1B,CAAV;AACA;;AAED,QAAIG,OAAO,IAAIj2B,SAAf,EAA0B;AAEzB;AACA2C,MAAAA,UAAU,CAAC,MAAI;AACd,YAAI5T,QAAQ,CAAConC,aAAT,IAA0BpnC,QAAQ,CAAC4J,IAAvC,EACC,KAAKu9B,UAAL,CAAgBD,OAAhB;AACD,OAHS,EAGP,CAHO,CAAV;AAIA;AACD;;AAEDC,EAAAA,UAAU,CAACD,OAAD,EAAS;AAClB,QAAIT,UAAU,CAAC39B,QAAX,CAAoBo+B,OAApB,CAAJ,EACCA,OAAO,GAAG,KAAV;AAED,QAAI,KAAKvoB,OAAL,CAAauoB,OAAb,MAA0B,IAA9B,EACC,KAAKrV,KAAL;AACD;;AAEDlT,EAAAA,OAAO,CAACvV,IAAD,EAAM;AACZ,QAAI,KAAK8T,IAAL,CAAUmqB,SAAd,EAAyB;AAExB,UAAG;AACFj+B,QAAAA,IAAI,GAAG,KAAK8T,IAAL,CAAUmqB,SAAV,CAAoBj+B,IAApB,EAA0B,IAA1B,CAAP;AACA,OAFD,CAEC,OAAMk+B,GAAN,EAAU;AACVpT,QAAAA,OAAO,CAAC8I,GAAR,CAAY,mBAAZ;AACA,eAAO,KAAP;AACA;AACD;;AAED,QAAI,KAAKwB,QAAT,EACC,KAAKA,QAAL,CAAcp1B,IAAd;AAED,WAAO,IAAP;AACA;;AAEDyoB,EAAAA,KAAK,GAAE;AACN,QAAI,KAAKiO,SAAT,EACC,KAAKA,SAAL,CAAejO,KAAf;AACD;;AAEDyJ,EAAAA,CAAC,CAACrvB,GAAD,EAAK;AACL,WAAO,KAAK3L,EAAL,CAAQY,aAAR,CAAsB+K,GAAtB,CAAP;AACA;;AAEDi6B,EAAAA,EAAE,CAACj6B,GAAD,EAAK;AACN,WAAO,KAAK3L,EAAL,CAAQF,gBAAR,CAAyB6L,GAAzB,CAAP;AACA;AAED;;;;;AAGA6lB,EAAAA,OAAO,CAAC9pB,MAAD,EAASkV,IAAI,GAAC,EAAd,EAAiB;AAEvB,QAAIlV,MAAM,CAACqN,aAAX,EACCrN,MAAM,GAAGA,MAAM,CAACqN,aAAhB;AAED,QAAIic,OAAO,GAAGpU,IAAI,CAACoU,OAAnB;;AACApU,IAAAA,IAAI,CAACoU,OAAL,GAAe,MAAI;AAClBA,MAAAA,OAAO,IAAEA,OAAO,EAAhB;AACA,WAAK3S,OAAL,CAAa,KAAb;AACA,KAHD;;AAKAzB,IAAAA,IAAI,CAACqU,SAAL,GAAiB,KAAKA,SAAL,CAAeprB,IAAf,CAAoB,IAApB,CAAjB;AAEA,SAAK25B,SAAL,GAAiB,IAAIzN,OAAJ,CAAYrqB,MAAZ,EAAoB,KAAK1H,EAAzB,EAA6B4c,IAA7B,CAAjB;AACA,WAAO,KAAKqhB,OAAZ;AACA;;AAEDuD,EAAAA,KAAK,CAAC5kB,IAAI,GAAC,EAAN,EAAS;AACb,WAAO,KAAKiX,KAAL,CAAWjX,IAAX,CAAP,CADa,CACW;AACxB;;AAEDiX,EAAAA,KAAK,CAACjX,IAAI,GAAC,EAAN,EAAS;AAEbA,IAAAA,IAAI,GAAG3O,MAAM,CAAC8M,MAAP,CAAc;AACpBnY,MAAAA,IAAI,EAAE,OADc;AAEpB8yB,MAAAA,SAAS,EAAE,OAFS;AAGpBG,MAAAA,oBAAoB,EAAE;AAHF,KAAd,EAIJjZ,IAJI,CAAP;AAMAA,IAAAA,IAAI,CAACqU,SAAL,GAAiB,KAAKA,SAAL,CAAeprB,IAAf,CAAoB,IAApB,CAAjB;AAEA,QAAImrB,OAAO,GAAGpU,IAAI,CAACoU,OAAnB;;AACApU,IAAAA,IAAI,CAACoU,OAAL,GAAe,MAAI;AAClBA,MAAAA,OAAO,IAAEA,OAAO,EAAhB;AACA,WAAK3S,OAAL,CAAa,KAAb;AACA,KAHD;;AAKA,SAAKmhB,SAAL,GAAiB,IAAIpJ,KAAJ,CAAU,KAAKp2B,EAAf,EAAmB4c,IAAnB,EAAyBmY,IAAzB,EAAjB;AACA,WAAO,KAAKkJ,OAAZ;AACA;;AAEDgJ,EAAAA,KAAK,CAACrqB,IAAD,EAAM;AACVA,IAAAA,IAAI,GAAG3O,MAAM,CAAC8M,MAAP,CAAc;AACpBmsB,MAAAA,SAAS,EAAE,KAAKtqB,IAAL,CAAU0pB,IAAV,GAAiB,KAAjB,GAAyB,IADhB;AAEpBa,MAAAA,YAAY,EAAE,CAAC,KAAKvqB,IAAL,CAAU0pB,IAFL;AAGpBc,MAAAA,WAAW,EAAE,MAAI;AAAE,aAAK/oB,OAAL,CAAa,KAAb;AAAqB;AAHpB,KAAd,EAIJzB,IAJI,CAAP;AAMA,SAAK4iB,SAAL,GAAiBpL,GAAG,CAACiT,IAAJ,CAAS/8B,GAAT,CAAa,KAAKtK,EAAlB,EAAsB4c,IAAtB,CAAjB;AACA,WAAO,KAAKqhB,OAAZ;AACA;;AA7N0B;;;;ACT5B,MAAMmI,MAAM,GAAGhnC,OAAO,CAAC,UAAD,CAAP,CAAoBs5B,OAAnC;;AAEApjB,MAAM,CAACD,OAAP,GAAiB+wB,MAAjB;;AAEAA,MAAM,CAACkB,OAAP,GAAiB,UAAS1qB,IAAI,GAAC,EAAd,EAAiB;AACjC,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/B;AACAH,IAAAA,KAAK,EAAE,WAFwB;AAG/ByrB,IAAAA,GAAG,EAAE,eAH0B;AAI/BC,IAAAA,IAAI,EAAE,CAAC,QAAD,EAAW,IAAX;AAJyB,GAAd,EAKb1pB,IALa,CAAX,CAAP;AAMA,CAPD;;AASAwpB,MAAM,CAACmB,aAAP,GAAuB,UAAS3qB,IAAI,GAAC,EAAd,EAAiB;AACvC,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/BvX,IAAAA,IAAI,EAAEoZ,IAAI,CAAChC,KAAL,IAAYgC,IAAI,CAACypB,GAAjB,GAAqB,WAArB,GAAiC,EADR;AAE/BC,IAAAA,IAAI,EAAE,CAAC,QAAD,EAAW,QAAX;AAFyB,GAAd,EAGb1pB,IAHa,CAAX,CAAP;AAIA,CALD;;AAOAwpB,MAAM,CAACoB,KAAP,GAAe,UAAS5qB,IAAI,GAAC,EAAd,EAAiB;AAC/B,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/BurB,IAAAA,IAAI,EAAE,CAAC,SAAD;AADyB,GAAd,EAEb1pB,IAFa,CAAX,CAAP;AAGA,CAJD;;AAMAwpB,MAAM,CAACjQ,KAAP,GAAe,UAASvZ,IAAI,GAAC,EAAd,EAAiB;AAC/B,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/BvX,IAAAA,IAAI,EAAE,WADyB;AAE/B8iC,IAAAA,IAAI,EAAE,CAAC,SAAD;AAFyB,GAAd,EAGb1pB,IAHa,CAAX,CAAP;AAIA,CALD;;AAOAwpB,MAAM,CAACjf,IAAP,GAAc,UAASvK,IAAI,GAAC,EAAd,EAAiB;AAC9B,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/BvX,IAAAA,IAAI,EAAE,oBADyB;AAE/B8iC,IAAAA,IAAI,EAAE,CAAC,SAAD;AAFyB,GAAd,EAGb1pB,IAHa,CAAX,CAAP;AAIA,CALD;;AAOAwpB,MAAM,CAACqB,OAAP,GAAiB,UAAS7qB,IAAI,GAAC,EAAd,EAAiB;AACjC,SAAO,IAAIwpB,MAAJ,CAAWn4B,MAAM,CAAC8M,MAAP,CAAc;AAC/BvX,IAAAA,IAAI,EAAE,kBADyB;AAE/BoX,IAAAA,KAAK,EAAE,SAFwB;AAG/B0rB,IAAAA,IAAI,EAAE,CAAC,SAAD;AAHyB,GAAd,EAIb1pB,IAJa,CAAX,CAAP;AAKA,CAND;;AAQAwpB,MAAM,CAACsB,MAAP,GAAgB,UAAS9qB,IAAI,GAAC,EAAd,EAAiB;AAEhCA,EAAAA,IAAI,GAAG3O,MAAM,CAAC8M,MAAP,CAAc;AACpB1Y,IAAAA,GAAG,EAAE,EADe;AAEpBgkC,IAAAA,GAAG,EAAE,EAFe;AAGpB/mC,IAAAA,MAAM,EAAE,EAHY;AAIpBimC,IAAAA,MAAM,EAAE,EAJY;AAKpBoC,IAAAA,QAAQ,EAAE,EALU;AAMpBzkC,IAAAA,IAAI,EAAE,KANc;AAOpB0kC,IAAAA,QAAQ,EAAE,KAPU;AAQpB1jC,IAAAA,KAAK,EAAE,EARa;AASpBoB,IAAAA,WAAW,EAAE,EATO;AAUpBuiC,IAAAA,QAAQ,EAAE,EAVU;AAWpB/N,IAAAA,CAAC,EAAE,GAXiB;AAYpBgO,IAAAA,SAAS,EAAE,KAZS;AAapBziC,IAAAA,QAAQ,EAAE,KAbU;AAcpBihC,IAAAA,IAAI,EAAE,CAAC,QAAD,EAAW,MAAX;AAdc,GAAd,EAeJ1pB,IAfI,CAAP;AAiBA,MAAIA,IAAI,CAACypB,GAAT,EACCzpB,IAAI,CAACypB,GAAL,GAAY,QAAOzpB,IAAI,CAACypB,GAAI,QAA5B;;AAEDzpB,EAAAA,IAAI,CAACmqB,SAAL,GAAiB,UAASj+B,IAAT,EAAei/B,MAAf,EAAsB;AAEtC,QAAItD,OAAO,GAAGsD,MAAM,CAAC/M,CAAP,CAAS,cAAT,CAAd;AAEA,QAAI,CAAClyB,IAAL,EAAY,OAAOA,IAAP;AAEZ,QAAI27B,OAAO,CAACW,SAAZ,EACC,MAAMv8B,KAAK,CAAC,cAAD,CAAX;AAEDC,IAAAA,IAAI,GAAG8T,IAAI,CAAC1Z,IAAL,GAAYuhC,OAAO,CAACxjC,KAApB,GAA6BwjC,OAAO,CAACA,OAAR,CAAgBuD,SAAhB,IAA6BvD,OAAO,CAACxjC,KAAzE;AAEA,WAAO6H,IAAP;AACA,GAZD;;AAcA,MAAIxJ,MAAM,GAAG,EAAb;AACA,MAAIimC,MAAM,GAAG,EAAb;;AAEA,MAAI3oB,IAAI,CAACtd,MAAL,CAAYqO,KAAZ,CAAkB,OAAlB,CAAJ,EAAgC;AAC/BrO,IAAAA,MAAM,GAAI,8BAA6Bsd,IAAI,CAACtd,MAAO,WAAnD;AACAsd,IAAAA,IAAI,CAACtd,MAAL,GAAc,EAAd;AACA;;AAED,MAAIsd,IAAI,CAAC2oB,MAAL,CAAY53B,KAAZ,CAAkB,OAAlB,CAAJ,EAAgC;AAC/B43B,IAAAA,MAAM,GAAI,8BAA6B3oB,IAAI,CAAC2oB,MAAO,WAAnD;AACA3oB,IAAAA,IAAI,CAAC2oB,MAAL,GAAc,EAAd;AACA;;AAED,MAAId,OAAO,GAAI;cACF7nB,IAAI,CAAC+qB,QAAS;iBACX/qB,IAAI,CAACtX,WAAY;IAC9BsX,IAAI,CAAC1Z,IAAL,GAAU,MAAV,GAAiB,EAAG;IACpB0Z,IAAI,CAACkrB,SAAL,GAAe,WAAf,GAA2B,EAAG;IAC9BlrB,IAAI,CAACgrB,QAAL,GAAc,UAAd,GAAyB,EAAG,IAAGhrB,IAAI,CAACva,GAAI,eAL3C;AAOA,MAAIua,IAAI,CAACjE,OAAT,EACC8rB,OAAO,GAAI;oBACO7nB,IAAI,CAACtX,WAAY;OAC9BsX,IAAI,CAACvX,QAAL,GAAc,UAAd,GAAyB,EAAG;sBAFjC;AAKDuX,EAAAA,IAAI,CAACypB,GAAL,IAAa;6CAC+BzpB,IAAI,CAAC1Y,KAAM,aAAY0Y,IAAI,CAACtd,MAAO,YAAWsd,IAAI,CAAC2oB,MAAO;MACjGd,OAAQ;uBACS7nB,IAAI,CAACirB,QAAS;MAC/BvoC,MAAO;MACPimC,MAAO;;IALZ;AASA,MAAIwC,MAAM,GAAG,IAAI3B,MAAJ,CAAWxpB,IAAX,CAAb;AAEA6nB,EAAAA,OAAO,GAAGsD,MAAM,CAAC/M,CAAP,CAAS,cAAT,CAAV;AAEA,MAAIpe,IAAI,CAACjE,OAAT,EACC8rB,OAAO,CAAC9rB,OAAR,GAAkBiE,IAAI,CAACjE,OAAvB;AAEDrF,EAAAA,UAAU,CAAC,YAAU;AACpBmxB,IAAAA,OAAO,CAAC1F,KAAR;AACA,GAFS,EAER,GAFQ,CAAV;AAIA,SAAOgJ,MAAP;AACA,CAnFD;;;;;;;;;ACjDA;;AACA;;;;AAEA,MAAMhlC,MAAM,GAAGC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAnB;;AAuKA,MAAMilC,WAAW,GAAG,UAASjoC,EAAT,EAAakoC,OAAO,GAAC,EAArB,EAAwB;AACxC,MAAIrf,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AAClCC,IAAAA,OAAO,EAAE,IADyB;AAElCC,IAAAA,QAAQ,EAAE,IAFwB;AAGlCC,IAAAA,MAAM,EAAE8F,MAAM,CAAC8M,MAAP,CAAc,EAAd,EAAkBmtB,OAAlB,EAA2B;AAC/BjnC,MAAAA,KAAK,EAAEjB,EAAE,CAACiB;AADqB,KAA3B;AAH0B,GAA1B,CAAZ;AAQAjB,EAAAA,EAAE,CAAC+H,aAAH,CAAiB8gB,KAAjB;AACH,CAVD;;AAYA,MAAMsf,iBAAN,SAAgC/mC,WAAhC,CAA4C;AAE3CC,EAAAA,WAAW,GAAE;AACZ;;AAEA,QAAI+mC,cAAc,GAAGj+B,gBAAOk+B,WAAP,GAAqBhoC,GAArB,CAAyBsL,GAAG,IAAG,QAAOA,GAAI,QAA1C,EAAmDC,IAAnD,CAAwD,IAAxD,CAArB;;AAEA,QAAI08B,SAAS,GAAG/lB,QAAQ,CAAC,KAAKngB,YAAL,CAAkB,YAAlB,KAAmC,MAApC,CAAxB;AACA,QAAImmC,OAAO,GAAGhmB,QAAQ,CAAC,KAAKngB,YAAL,CAAkB,UAAlB,KAAiC,MAAlC,CAAtB;AACA,QAAIomC,KAAK,GAAG,EAAZ;;AACA,WAAMF,SAAS,IAAIC,OAAnB,EAA2B;AAC1BC,MAAAA,KAAK,IAAK,gBAAeF,SAAU,KAAIA,SAAS,EAAG,SAAnD;AACM;;AAED,QAAIG,MAAM,GAAGt+B,gBAAOu+B,WAAP,GAAqBroC,GAArB,CAAyB,CAAC+yB,CAAD,EAAGze,CAAH,KAAQ,iBAAgBA,CAAE,KAAIye,CAAE,UAAzD,EAAoExnB,IAApE,CAAyE,IAAzE,CAAb;;AAEN,SAAKtK,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB;AACM,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AACA6B,IAAAA,IAAI,CAAC5B,SAAL,GAAkB;YACdmD,MAAM,CAACk6B,OAAQ;;;;;;;;;;;;;;;;;;;eAmBZmL,cAAe;;6BAEDI,KAAM;8BACLC,MAAO;;WAvB7B;AA2BN,SAAKhnC,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEA,SAAK+mC,OAAL,GAAe,KAAK3N,CAAL,CAAO,gBAAP,CAAf;AACA,SAAK4N,OAAL,GAAe,KAAK5N,CAAL,CAAO,gBAAP,CAAf;AACA,SAAK6N,QAAL,GAAgB,KAAK7N,CAAL,CAAO,gBAAP,CAAhB;AACA,SAAK8N,UAAL,GAAkB,KAAK9N,CAAL,CAAO,YAAP,CAAlB;AAEA,SAAKv5B,UAAL,CAAgBoC,gBAAhB,CAAiC,OAAjC,EAA0C,KAAKs5B,QAAL,CAAct3B,IAAd,CAAmB,IAAnB,CAA1C;AACA;;AAED1B,EAAAA,iBAAiB,GAAE;AAClB,SAAK4kC,QAAL,CAAc,KAAK9nC,KAAnB;AACG;;AAED,MAAIA,KAAJ,GAAW;AAAE,WAAO,KAAKmB,YAAL,CAAkB,OAAlB,CAAP;AAAmC;;AACnD,MAAInB,KAAJ,CAAUoB,GAAV,EAAc;AAAE,SAAK0mC,QAAL,CAAc1mC,GAAd;AAAoB;;AAEpC,MAAIqJ,MAAJ,GAAY;AAAE,WAAO,KAAKtJ,YAAL,CAAkB,QAAlB,KAA+B,YAAtC;AAAmD;;AACjE,MAAIsJ,MAAJ,CAAWrJ,GAAX,EAAe;AAAE,SAAKrB,YAAL,CAAkB,QAAlB,EAA4BqB,GAA5B;AAAkC;;AAEnD,MAAI2mC,IAAJ,GAAU;AAAE,WAAO,KAAKC,aAAL,CAAmBC,KAAnB,EAAP;AAAmC;;AAC/C,MAAIC,OAAJ,GAAa;AAAE,WAAO,KAAKF,aAAL,CAAmBE,OAAnB,EAAP;AAAqC;;AAEpDnE,EAAAA,SAAS,CAACt5B,MAAD,EAAQ;AAChB,QAAIA,MAAM,KAAKiF,SAAf,EACCjF,MAAM,GAAG,KAAKA,MAAd;AAED,WAAO,KAAKu9B,aAAL,CAAmBv9B,MAAnB,CAA0BA,MAA1B,CAAP;AACA;;AAED09B,EAAAA,YAAY,GAAE;AAEb,QAAIj+B,KAAK,GAAG,KAAKk+B,KAAL,CAAWC,OAAX,EAAZ;;AACA,QAAIC,OAAO,GAAG,KAAKF,KAAL,CAAWG,WAAX,EAAd;;AACA,QAAIC,IAAI,GAAG,IAAItpC,KAAJ,CAAU,IAAE,CAAZ,EAAeupC,IAAf,CAAoB,EAApB,CAAX;AACA,QAAI/0B,CAAC,GAAG,CAAR;;AAEA,WAAMA,CAAC,GAAC40B,OAAR,EAAgB;AAAEE,MAAAA,IAAI,CAAC90B,CAAC,GAACxJ,KAAH,CAAJ,GAAgB,EAAEwJ,CAAlB;AAAqB;;AAEvC,SAAKm0B,UAAL,CAAgBlpC,SAAhB,GAA4B6pC,IAAI,CAACppC,GAAL,CAASspC,GAAG,IAAG,eAAcA,GAAI,KAAIA,GAAI,QAAzC,EAAkD/9B,IAAlD,CAAuD,IAAvD,CAA5B;AACM,SAAKi9B,QAAL,CAAcjpC,SAAd,GAA0B,KAAKypC,KAAL,CAAW39B,MAAX,CAAkB,WAAlB,CAA1B;;AAEA,QAAI,KAAKk+B,uBAAT,EAAkC;AAE9B,UAAIC,UAAU,GAAG,KAAK7O,CAAL,CAAQ,cAAa,KAAKiO,aAAL,CAAmBD,IAAnB,EAA0B,IAA/C,CAAjB;AACT,UAAIa,UAAJ,EACCA,UAAU,CAAC7oC,YAAX,CAAwB,QAAxB,EAAkC,EAAlC;AACK;;AAED,QAAI,KAAK8oC,eAAT,EAA0B;AACtB,UAAI9pC,EAAE,GAAG,KAAKg7B,CAAL,CAAQ,cAAa,KAAK+O,MAAL,CAAYf,IAAZ,EAAmB,IAAxC,CAAT;AACT,UAAIhpC,EAAJ,EACCA,EAAE,CAACgB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB;AACK;AACP;;AAEDgpC,EAAAA,SAAS,GAAE;AACV,SAAKX,KAAL,CAAW/+B,GAAX,CAAe,OAAf,EAAwB,CAAxB;;AACA,SAAK8+B,YAAL;AACA;;AAEDa,EAAAA,SAAS,GAAE;AACV,SAAKZ,KAAL,CAAW/+B,GAAX,CAAe,OAAf,EAAwB,CAAC,CAAzB;;AACA,SAAK8+B,YAAL;AACA;;AAEDc,EAAAA,QAAQ,CAACjmC,IAAI,GAAC,IAAN,EAAW;AAEZ,SAAKkmC,SAAL,CAAe,KAAf;;AAEN,QAAIlmC,IAAJ,EAAU;AACT,WAAK+2B,CAAL,CAAO,MAAP,EAAexuB,SAAf,CAAyBlC,GAAzB,CAA6B,WAA7B;AAEA,UAAI8/B,UAAU,GAAG,KAAKpP,CAAL,CAAO,cAAP,CAAjB;AACA,UAAIoP,UAAJ,EACCA,UAAU,CAACC,cAAX;AAED,KAPD,MAQC,KAAKrP,CAAL,CAAO,MAAP,EAAexuB,SAAf,CAAyBvM,MAAzB,CAAgC,WAAhC;AACE;;AAEDkqC,EAAAA,SAAS,CAAClmC,IAAI,GAAC,IAAN,EAAW;AACtB,QAAIA,IAAJ,EAAU;AACT,WAAK+2B,CAAL,CAAO,MAAP,EAAexuB,SAAf,CAAyBlC,GAAzB,CAA6B,YAA7B;AACA,KAFD,MAGC,KAAK0wB,CAAL,CAAO,MAAP,EAAexuB,SAAf,CAAyBvM,MAAzB,CAAgC,YAAhC;AACD;;AAED+6B,EAAAA,CAAC,CAACrvB,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgBb,aAAhB,CAA8B+K,GAA9B,CAAP;AAA0C;;AAClDi6B,EAAAA,EAAE,CAACj6B,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgB3B,gBAAhB,CAAiC6L,GAAjC,CAAP;AAA6C;;AAEtDwxB,EAAAA,QAAQ,CAACj3B,CAAD,EAAG;AAEV,QAAIA,CAAC,CAACwB,MAAF,CAAS24B,OAAT,IAAoB,KAAxB,EAA+B;AAC9B,UAAIh+B,GAAG,GAAG6D,CAAC,CAACwB,MAAF,CAAStF,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK0mC,QAAL,CAAc;AACbuB,UAAAA,IAAI,EAAE,KAAKjB,KAAL,CAAWiB,IAAX,EADO;AAEbC,UAAAA,KAAK,EAAE,KAAKlB,KAAL,CAAWkB,KAAX,EAFM;AAGbvB,UAAAA,IAAI,EAAE3mC;AAHO,SAAd;AAKA;;AACD;AACA;;AAED,QAAI6D,CAAC,CAACwB,MAAF,CAAS24B,OAAT,IAAoB,MAAxB,EAAgC;AAC/B,UAAIh+B,GAAG,GAAG6D,CAAC,CAACwB,MAAF,CAAStF,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK0mC,QAAL,CAAc;AACbuB,UAAAA,IAAI,EAAEjoC;AADO,SAAd;;AAGY,aAAK6nC,QAAL,CAAc,KAAd;AACZ;;AACD;AACM;;AAED,QAAIhkC,CAAC,CAACwB,MAAF,CAAS24B,OAAT,IAAoB,OAAxB,EAAiC;AACtC,UAAIh+B,GAAG,GAAG6D,CAAC,CAACwB,MAAF,CAAStF,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK0mC,QAAL,CAAc;AACEC,UAAAA,IAAI,EAAE,CADR;AAEbuB,UAAAA,KAAK,EAAEloC;AAFM,SAAd;;AAIY,aAAK8nC,SAAL,CAAe,KAAf;AACZ;;AACD;AACA;;AAED,QAAIjkC,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,eAA5B,CAAJ,EACC,OAAO,KAAKipB,QAAL,EAAP;AAED,QAAIhkC,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,eAA5B,CAAJ,EACC,OAAO,KAAKipB,QAAL,CAAc,KAAd,CAAP;;AAED,QAAIhkC,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,OAA5B,CAAJ,EAA0C;AAChC,WAAKkpB,SAAL,CAAe,KAAf;AACA,WAAKD,QAAL,CAAc,KAAd;AACA,aAAO,KAAKnB,QAAL,EAAP;AACH;;AAED,QAAI7iC,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,eAA5B,CAAJ,EACI,OAAO,KAAKkpB,SAAL,EAAP;;AAEV,QAAIjkC,CAAC,CAACwB,MAAF,CAAS24B,OAAT,IAAoB,KAAxB,EAA+B;AAC9Bn6B,MAAAA,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,MAA5B,IAAsC,KAAKgpB,SAAL,EAAtC,GAAyD,KAAKD,SAAL,EAAzD;AACA;AACA;AACE;;AAED,MAAIF,eAAJ,GAAqB;AACjB,SAAKC,MAAL,GAAc,KAAKA,MAAL,IAAe,sBAA7B;AACA,WAAO,KAAKV,KAAL,CAAWiB,IAAX,MAAqB,KAAKP,MAAL,CAAYO,IAAZ,EAArB,IAA2C,KAAKjB,KAAL,CAAWkB,KAAX,MAAsB,KAAKR,MAAL,CAAYQ,KAAZ,EAAxE;AACH;;AAED,MAAIX,uBAAJ,GAA6B;AACzB,SAAKG,MAAL,GAAc,KAAKA,MAAL,IAAe,sBAA7B;AACA,WAAO,KAAKV,KAAL,CAAWiB,IAAX,MAAqB,KAAKrB,aAAL,CAAmBqB,IAAnB,EAArB,IAAkD,KAAKjB,KAAL,CAAWkB,KAAX,MAAsB,KAAKtB,aAAL,CAAmBsB,KAAnB,EAA/E;AACH;;AAEJxB,EAAAA,QAAQ,CAAC1mC,GAAD,EAAK;AAEZ,QAAIA,GAAG,IAAI,OAAOA,GAAP,IAAc,QAAzB,EAAmC;AAClC,WAAK4mC,aAAL,CAAmBjV,GAAnB,CAAuB3xB,GAAvB;;AACA,WAAKgnC,KAAL,CAAWrV,GAAX,CAAe3xB,GAAf;;AAEA4lC,MAAAA,WAAW,CAAC,IAAD,EAAO5lC,GAAP,CAAX;AACA,KALD,MAKK;AACJ,WAAKgnC,KAAL,GAAahnC,GAAG,GAAG,qBAAOA,GAAP,EAAY,KAAKqJ,MAAjB,CAAH,GAA8B,sBAA9C;AACA,WAAKu9B,aAAL,GAAqB,KAAKI,KAAL,CAAWH,KAAX,EAArB;AACA;;AAED,SAAKG,KAAL,CAAWrV,GAAX,CAAe;AAACgV,MAAAA,IAAI,EAAE;AAAP,KAAf;;AAEA,SAAKI,YAAL;;AACA,SAAKoB,QAAL;AACA;;AAEDA,EAAAA,QAAQ,GAAE;AAET,QAAI,KAAKvB,aAAL,CAAmBE,OAAnB,EAAJ,EACC,KAAKpnC,eAAL,CAAqB,SAArB,EADD,KAGC,KAAKf,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AAED,SAAKA,YAAL,CAAkB,OAAlB,EAA2B,KAAKgkC,SAAL,EAA3B;AAEM,SAAKY,EAAL,CAAQ,UAAR,EAAoB7lC,OAApB,CAA4BC,EAAE,IAAEA,EAAE,CAAC+B,eAAH,CAAmB,QAAnB,CAAhC;;AAEN,QAAI,CAAC,KAAKknC,aAAL,CAAmBE,OAAnB,EAAL,EAAmC;AAClC,WAAKR,OAAL,CAAa/oC,SAAb,GAAyB,GAAzB;AACA,WAAKgpC,OAAL,CAAahpC,SAAb,GAAyB,SAAzB;AACA;AACA;;AAED,QAAI,KAAKgqC,uBAAT,EAAkC;AACjC,UAAI5pC,EAAE,GAAG,KAAKg7B,CAAL,CAAQ,cAAa,KAAKiO,aAAL,CAAmBD,IAAnB,EAA0B,IAA/C,CAAT;AACA,UAAIhpC,EAAJ,EACCA,EAAE,CAACgB,YAAH,CAAgB,QAAhB,EAA0B,EAA1B;AACD;;AAED,QAAIypC,MAAM,GAAG,KAAKzP,CAAL,CAAQ,eAAc,KAAKiO,aAAL,CAAmBqB,IAAnB,EAA0B,IAAhD,CAAb;;AACA,QAAIG,MAAJ,EAAY;AACXA,MAAAA,MAAM,CAACzpC,YAAP,CAAoB,QAApB,EAA8B,EAA9B;AACM;;AAED,QAAI0pC,OAAO,GAAG,KAAK1P,CAAL,CAAQ,gBAAe,KAAKiO,aAAL,CAAmBsB,KAAnB,EAA2B,IAAlD,CAAd;;AACN,QAAIG,OAAJ,EAAa;AACZA,MAAAA,OAAO,CAAC1pC,YAAR,CAAqB,QAArB,EAA+B,EAA/B;AACA;;AAED,SAAK2nC,OAAL,CAAa/oC,SAAb,GAAyB,KAAKqpC,aAAL,CAAmBqB,IAAnB,EAAzB;AACA,SAAK1B,OAAL,CAAahpC,SAAb,GAAyB,KAAKolC,SAAL,CAAe,YAAf,CAAzB;AACG;;AAjQuC;;AAqQ5C1iC,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC4lC,iBAArC;;eAEe7lC,cAAc,CAAC7B,GAAf,CAAmB,aAAnB;;;;;;;;;;;AC7bf;;AACA;;AACA;;AACA;;;;AAEA,MAAMsC,MAAM,GAAGC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAnB;;AA8DA,MAAM2nC,gBAAN,SAA+BvpC,WAA/B,CAA2C;AAE1CC,EAAAA,WAAW,GAAG;AACP;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEN,QAAI2F,WAAW,GAAG,KAAKlD,YAAL,CAAkB,aAAlB,KAAoC,EAAtD;AAEMZ,IAAAA,IAAI,CAAC5B,SAAL,GAAkB,UAASmD,MAAM,CAACk6B,OAAQ;;mEAEiB33B,WAAY;;;4BAFvE;AAOA,SAAK7D,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEN,QAAIX,KAAK,GAAG,KAAK+5B,CAAL,CAAO,QAAP,CAAZ;AACA,SAAKtD,IAAL,GAAYz2B,KAAK,CAACukC,aAAN,GAAsBnlC,GAAtB,CAA0BL,EAAE,IAAEA,EAAE,CAAC4iC,WAAH,CAAe17B,IAAf,EAA9B,EAAqD0E,IAArD,CAA0D,GAA1D,CAAZ;AACA,SAAK8rB,IAAL,GAAY,KAAKA,IAAL,CAAUn3B,OAAV,CAAkB,UAAlB,EAA8B,EAA9B,EAAkC2G,IAAlC,EAAZ;AAEA,SAAK0jC,OAAL,GAAe,KAAK5P,CAAL,CAAO,SAAP,CAAf;;AAEA,QAAI,KAAKp4B,IAAL,IAAa,MAAjB,EAAyB;AACxB,WAAK8hC,WAAL,GAAmBhlC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB;AACA,WAAK+kC,WAAL,CAAiBzjC,KAAjB,GAAyB,KAAKA,KAA9B;AACA,WAAKyjC,WAAL,CAAiBh5B,MAAjB,GAA0B,KAAKtJ,YAAL,CAAkB,QAAlB,KAA+B,YAAzD;;AAEA,UAAI,CAAC,KAAKsiC,WAAL,CAAiByE,OAAtB,EAA+B;AAC9B,YAAIH,IAAI,GAAG,qBAAO,KAAKtR,IAAZ,CAAX;AACA,aAAKA,IAAL,GAAY,KAAKgN,WAAL,CAAiBzjC,KAAjB,GAAyB+nC,IAAI,CAACt9B,MAAL,CAAY,KAAKg5B,WAAL,CAAiBh5B,MAA7B,CAArC;AACA;AACD;;AAED,SAAKk/B,OAAL,CAAahrC,SAAb,GAAyB,KAAK83B,IAA9B;AACA,SAAKqO,SAAL,GAAiB,EAAjB;;AAEA,SAAK6E,OAAL,CAAa/mC,gBAAb,CAA8B,OAA9B,EAAuC,KAAKgnC,QAAL,CAAchlC,IAAd,CAAmB,IAAnB,CAAvC,EAAiE,IAAjE;;AACA,SAAK+kC,OAAL,CAAa/mC,gBAAb,CAA8B,SAA9B,EAAyC,KAAKinC,WAAL,CAAiBjlC,IAAjB,CAAsB,IAAtB,CAAzC,EAAsE,IAAtE;;AACA,SAAK+kC,OAAL,CAAa/mC,gBAAb,CAA8B,OAA9B,EAAuC,KAAKknC,QAAL,CAAcllC,IAAd,CAAmB,IAAnB,CAAvC;;AACA,SAAK+kC,OAAL,CAAa/mC,gBAAb,CAA8B,MAA9B,EAAsC,KAAKmnC,OAAL,CAAanlC,IAAb,CAAkB,IAAlB,CAAtC;;AAEA,SAAKpE,UAAL,CAAgBoC,gBAAhB,CAAiC,OAAjC,EAA0C,KAAKs5B,QAAL,CAAct3B,IAAd,CAAmB,IAAnB,CAA1C;AACA,SAAKhC,gBAAL,CAAsB,OAAtB,EAA+B,KAAKs5B,QAAL,CAAct3B,IAAd,CAAmB,IAAnB,CAA/B;AACG;;AAEJm1B,EAAAA,CAAC,CAACrvB,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgBb,aAAhB,CAA8B+K,GAA9B,CAAP;AAA0C;;AAClDi6B,EAAAA,EAAE,CAACj6B,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgB3B,gBAAhB,CAAiC6L,GAAjC,CAAP;AAA6C;;AAEtDxH,EAAAA,iBAAiB,GAAE;AAClB,SAAK0hC,cAAL;AACA;;AAEDrhC,EAAAA,oBAAoB,GAAE,CAAE;;AAExB,aAAWxC,kBAAX,GAAgC;AAAE,WAAO,CAAC,UAAD,EAAa,aAAb,CAAP;AAAqC;;AACvEC,EAAAA,wBAAwB,CAACvB,IAAD,EAAOwB,QAAP,EAAiBC,QAAjB,EAA0B;AAEjD,QAAIzB,IAAI,KAAK,UAAb,EACC,KAAKkqC,OAAL,CAAaK,eAAb,GAA+B,CAAC,KAAK9lC,QAArC;AAED,QAAIzE,IAAI,KAAK,aAAb,EACC,KAAKkqC,OAAL,CAAaM,OAAb,CAAqB5lC,WAArB,GAAmCnD,QAAnC;AACD;;AAED,MAAIS,IAAJ,GAAU;AAAE,WAAO,KAAKR,YAAL,CAAkB,MAAlB,CAAP;AAAkC;;AAE9C,MAAI+C,QAAJ,GAAc;AAAE,WAAO,KAAKc,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAId,QAAJ,CAAa9C,GAAG,GAAC,IAAjB,EAAsB;AAACA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AAA2E;;AAClG,MAAId,KAAJ,GAAW;AAAE,WAAO,KAAKy2B,IAAZ;AAAiB;;AAE9B,MAAIsQ,SAAJ,GAAe;AACd,QAAI,CAAC,KAAK/mC,KAAV,EAAkB,OAAO,KAAKA,KAAZ;AAClB,QAAIkqC,GAAG,GAAI,IAAIC,SAAJ,EAAD,CAAkBC,eAAlB,CAAkC,KAAKpqC,KAAvC,EAA8C,WAA9C,CAAV;AACA,WAAOd,KAAK,CAACC,IAAN,CAAW+qC,GAAG,CAAC7hC,IAAJ,CAASq5B,UAApB,EAAgCtiC,GAAhC,CAAoCsZ,IAAI,IAAEA,IAAI,CAAC2xB,SAAL,IAAgB3xB,IAAI,CAACosB,SAA/D,EAA0En6B,IAA1E,CAA+E,IAA/E,CAAP;AACA;;AAED,MAAI3K,KAAJ,CAAUoB,GAAV,EAAc;AAEb,SAAKkpC,OAAL,GAAe,KAAK7T,IAApB;;AAEA,QAAI,KAAKzxB,YAAL,CAAkB,SAAlB,KAAgC,CAAC5D,GAArC,EAA0C;AACzCA,MAAAA,GAAG,GAAG,KAAKD,YAAL,CAAkB,SAAlB,CAAN;AAEA,WAAKs1B,IAAL,GAAYr1B,GAAZ;AAEA,UAAImpC,SAAS,GAAG,KAAKC,MAAL,EAAhB;AACA/rC,MAAAA,QAAQ,CAACgsC,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0CrpC,GAA1C;AACAmpC,MAAAA,SAAS,CAACG,eAAV;AACA,KARD,MAQK;AAEJ,UAAI,KAAK/oC,IAAL,IAAa,MAAjB,EAAyB;AACxB,aAAK8hC,WAAL,CAAiBzjC,KAAjB,GAAyBoB,GAAzB;;AAEA,YAAI,CAAC,KAAKqiC,WAAL,CAAiByE,OAAtB,EAA+B;AAC9B,cAAIH,IAAI,GAAG,qBAAO3mC,GAAP,CAAX;AACAA,UAAAA,GAAG,GAAG,KAAKqiC,WAAL,CAAiBzjC,KAAjB,GAAyB+nC,IAAI,CAACt9B,MAAL,CAAY,KAAKg5B,WAAL,CAAiBh5B,MAA7B,CAA/B;AACA;;AAED,YAAI,CAAC,KAAKg5B,WAAL,CAAiByE,OAAtB,EAA+B;AAC9B9mC,UAAAA,GAAG,GAAG,KAAKq1B,IAAX;AACA,eAAKgN,WAAL,CAAiBzjC,KAAjB,GAAyBoB,GAAzB;AACA;AAED;;AAED,WAAKq1B,IAAL,GAAYr1B,GAAZ;AAEA,UAAI,KAAKuoC,OAAL,CAAahrC,SAAb,IAA0ByC,GAA9B,EACC,KAAKuoC,OAAL,CAAahrC,SAAb,GAAyByC,GAAzB;AACD;;AAED,SAAKwjC,cAAL;AACA;;AAED,MAAIC,OAAJ,GAAa;AACZ,QAAI,KAAKpB,WAAT,EACC,OAAO,KAAKzjC,KAAL,GAAa,KAAKyjC,WAAL,CAAiBM,SAAjB,CAA2B,YAA3B,CAAb,GAAwD,KAAK/jC,KAApE;AACD,WAAO,KAAKA,KAAZ;AACA;;AAED,MAAI2qC,YAAJ,GAAkB;AACjB,QAAI,KAAK3lC,YAAL,CAAkB,MAAlB,CAAJ,EACC,OAAO,KAAK2kC,OAAL,CAAahrC,SAApB;AAED,WAAO,KAAKgrC,OAAL,CAAa7E,SAAb,IAA0B,KAAK6E,OAAL,CAAahrC,SAA9C;AACA;;AAED,MAAIwlC,SAAJ,CAAcv9B,OAAd,EAAsB;AACrB,SAAKgkC,UAAL,GAAkBhkC,OAAlB;AACA,QAAIA,OAAJ,EACC,KAAK7G,YAAL,CAAkB,SAAlB,EAA6B,IAA7B,EADD,KAGC,KAAKe,eAAL,CAAqB,SAArB;AACD;;AAED,MAAIqjC,SAAJ,GAAe;AACd,WAAO,KAAKyG,UAAZ;AACA;;AAED,MAAIC,SAAJ,GAAe;AACd,WAAO,KAAKrqC,UAAL,CAAgBqlC,aAAhB,IAAiC,KAAK8D,OAA7C;AACA;;AAED/E,EAAAA,cAAc,GAAE;AAEf,QAAI,CAAC,KAAKnO,IAAN,IAAc,KAAKA,IAAL,KAAc,GAAhC,EACC,KAAK12B,YAAL,CAAkB,OAAlB,EAA2B,IAA3B,EADD,KAGC,KAAKe,eAAL,CAAqB,OAArB;AAEA,QAAI,CAAC,KAAK21B,IAAV,EACA,KAAK12B,YAAL,CAAkB,UAAlB,EAA8B,IAA9B,EADA,KAGA,KAAKe,eAAL,CAAqB,UAArB;AAED,QAAI,CAAC,KAAK21B,IAAN,IAAc,CAAC,KAAKt1B,YAAL,CAAkB,aAAlB,CAAnB,EACC,KAAKpB,YAAL,CAAkB,OAAlB,EAA2B,IAA3B,EADD,KAGC,KAAKe,eAAL,CAAqB,OAArB;AACD;;AAEDo7B,EAAAA,QAAQ,CAACj3B,CAAD,EAAG;AAEV;AACA,QAAIA,CAAC,CAACwB,MAAF,CAAS8E,SAAT,CAAmByU,QAAnB,CAA4B,UAA5B,CAAJ,EAA6C;AAC5C/a,MAAAA,CAAC,CAACC,eAAF;AACA,aAAO,KAAK4lC,QAAL,EAAP;AACA;;AAED,QAAI7lC,CAAC,CAACwB,MAAF,IAAY,IAAhB,EACC;AAED,QAAI,CAACxB,CAAC,CAACwB,MAAF,CAASokC,SAAd,EACC,KAAK/M,KAAL;AACD;;AAED,QAAMgN,QAAN,GAAgB;AACf,SAAKrH,WAAL,CAAiBzjC,KAAjB,GAAyB,KAAKA,KAA9B;AACA,QAAI+qC,MAAM,GAAG,IAAI5F,eAAJ,CAAW;AAAC3U,MAAAA,IAAI,EAAE,KAAKiT,WAAZ;AAAyB4B,MAAAA,IAAI,EAAE,CAAC,QAAD,EAAW,IAAX;AAA/B,KAAX,CAAb;;AAEA,QAAI,MAAM0F,MAAM,CAACxa,OAAP,CAAe,KAAKwJ,CAAL,CAAO,WAAP,CAAf,EAAoC;AAACtK,MAAAA,KAAK,EAAE,MAAR;AAAgB2B,MAAAA,eAAe,EAAE,QAAjC;AAA2CvB,MAAAA,SAAS,EAAE;AAAtD,KAApC,CAAV,EAA6G;AAC5G,WAAKmb,YAAL,CAAkBD,MAAM,CAAChR,CAAP,CAAS,aAAT,EAAwB/5B,KAA1C;AACA;AACD;;AAED4pC,EAAAA,QAAQ,CAAC3kC,CAAD,EAAG;AACVA,IAAAA,CAAC,CAACqB,cAAF;AACA,QAAIlF,GAAG,GAAG6D,CAAC,CAACgmC,aAAF,CAAgBC,OAAhB,CAAwB,MAAxB,CAAV;AACAzsC,IAAAA,QAAQ,CAACgsC,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0CrpC,GAA1C;AACA;;AAEDopC,EAAAA,MAAM,CAACz9B,KAAK,GAAC,KAAP,EAAa;AAElB,QAAIhO,EAAE,GAAG,KAAK4qC,OAAd;AAAA,QACIj8B,CAAC,GAAG7K,MAAM,CAACsoC,YAAP,EADR;AAAA,QAEIpU,CAAC,GAAGt4B,QAAQ,CAACmhB,WAAT,EAFR;;AAIA,QAAI7S,KAAK,IAAI,OAAb,EAAsB;AACrBgqB,MAAAA,CAAC,CAAClX,QAAF,CAAW9gB,EAAX,EAAe,CAAf;AACAg4B,MAAAA,CAAC,CAACjX,MAAF,CAAS/gB,EAAT,EAAa,CAAb;AACA,KAHD,MAGM,IAAIgO,KAAK,IAAI,KAAb,EAAoB;AACzBgqB,MAAAA,CAAC,CAAClX,QAAF,CAAW9gB,EAAX,EAAeA,EAAE,CAAC2iC,UAAH,CAAc58B,MAA7B;AACAiyB,MAAAA,CAAC,CAACjX,MAAF,CAAS/gB,EAAT,EAAaA,EAAE,CAAC2iC,UAAH,CAAc58B,MAA3B;AACA,KAHK,MAGD;AACJiyB,MAAAA,CAAC,CAACqU,kBAAF,CAAqBrsC,EAArB;AACA;;AAED2O,IAAAA,CAAC,CAACg9B,eAAF;AACAh9B,IAAAA,CAAC,CAAC29B,QAAF,CAAWtU,CAAX;AACA,WAAOrpB,CAAP;AACA;;AAEDm8B,EAAAA,WAAW,CAAC5kC,CAAD,EAAG;AACb,QAAIkF,IAAI,GAAG,KAAX;AAEA,SAAKg6B,SAAL,GAAiB,KAAjB;;AAEA,QAAIl/B,CAAC,CAACgD,GAAF,IAAS,OAAT,IAAoB,CAAC,KAAKjD,YAAL,CAAkB,WAAlB,CAAzB,EAAwD;AACvDmF,MAAAA,IAAI,GAAG,IAAP;AACA,WAAKrD,aAAL,CAAmB,IAAIwkC,KAAJ,CAAU,QAAV,CAAnB,EAFuD,CAEd;;AACzC,WAAK34B,IAAL,GAHuD,CAG3C;AACZ;;AAED,QAAI1N,CAAC,CAACgD,GAAF,IAAS,QAAb,EAAuB;AACtB,WAAKjI,KAAL,GAAa,KAAKA,KAAlB,CADsB,CACE;;AACxB,WAAK2S,IAAL;AACA;;AAED,QAAI9F,GAAG,GAAG,KAAK1L,YAAL,CAAkB,KAAlB,CAAV;AACA,QAAI0L,GAAG,IAAI,KAAK88B,OAAL,CAAa7E,SAAb,CAAuBhgC,MAAvB,IAAiC+H,GAA5C,EACC1C,IAAI,GAAG,IAAP;AAED,QAAIohC,KAAK,GAAG,KAAKpqC,YAAL,CAAkB,cAAlB,CAAZ;AACA6+B,IAAAA,YAAY,CAAC,KAAKwL,YAAN,CAAZ;;AACA,QAAID,KAAK,KAAK,IAAd,EAAoB;AACnBA,MAAAA,KAAK,GAAGA,KAAK,IAAI,GAAjB;AACA,WAAKC,YAAL,GAAoBn5B,UAAU,CAAC,KAAK03B,OAAL,CAAanlC,IAAb,CAAkB,IAAlB,CAAD,EAA0B2mC,KAA1B,CAA9B;AACA;;AAED,QAAIphC,IAAJ,EAAU;AACTlF,MAAAA,CAAC,CAACqB,cAAF;AACA,KAFD,MAEM,IAAI,CAAC,KAAKtB,YAAL,CAAkB,iBAAlB,CAAL,EAA2C;AAChDC,MAAAA,CAAC,CAACC,eAAF;AACA;AACD;;AAED4kC,EAAAA,QAAQ,GAAE,CAET;;AAEDhM,EAAAA,KAAK,GAAE;AACN,SAAK0M,MAAL;AACA;;AAED9D,EAAAA,QAAQ,CAACtlC,GAAD,EAAK;AAEZ,QAAIulC,QAAQ,GAAG,KAAK3hC,YAAL,CAAkB,UAAlB,CAAf;AACA,QAAI0hC,QAAQ,GAAG,KAAKvlC,YAAL,CAAkB,UAAlB,CAAf;AAEA,QAAI,CAACulC,QAAL,EAAgB,OAAOC,QAAQ,GAAG,CAAC,CAACvlC,GAAL,GAAW,IAA1B;;AAEhB,YAAOslC,QAAP;AACC,WAAK,KAAL;AACCA,QAAAA,QAAQ,GAAG,QAAX;AAAqB;;AACtB,WAAK,OAAL;AACA,WAAK,SAAL;AACCA,QAAAA,QAAQ,GAAG,4BAAX;AAAyC;;AAC1C,WAAK,OAAL;AACCA,QAAAA,QAAQ,GAAG,oBAAX;AAAiC;AAPnC;;AAUA,WAAO,CAACC,QAAD,IAAa,CAACvlC,GAAd,GAAoB,IAApB,GAA4B,IAAI8E,MAAJ,CAAWwgC,QAAX,CAAD,CAAuBhjC,IAAvB,CAA4BtC,GAA5B,CAAlC;AACA;;AAED2oC,EAAAA,OAAO,GAAE;AAER,QAAI3oC,GAAG,GAAG,KAAKupC,YAAf;;AAEA,QAAI,CAAC,KAAKjE,QAAL,CAActlC,GAAd,CAAL,EAAyB;AAExB,UAAI,KAAK4D,YAAL,CAAkB,eAAlB,CAAJ,EAAwC;AACvC,aAAKhF,KAAL,GAAa,KAAKA,KAAlB;AACA,OAFD,MAEK;AACJ,aAAKA,KAAL,GAAaoB,GAAb;AACA,aAAK+iC,SAAL,GAAiB,IAAjB;;AACA,aAAKS,cAAL;AACA,OARuB,CASxB;AACA;AACA;AACA;;;AACA;AACA;;AAED,QAAIxjC,GAAG,IAAI,KAAKpB,KAAhB,EACC;AAED,QAAI6M,GAAG,GAAG,KAAK1L,YAAL,CAAkB,KAAlB,CAAV;AACA,QAAI0L,GAAJ,EACCzL,GAAG,GAAGA,GAAG,CAACsF,KAAJ,CAAU,CAAV,EAAamG,GAAb,CAAN;;AAED,SAAKm+B,YAAL,CAAkB5pC,GAAlB;AACA;;AAED4pC,EAAAA,YAAY,CAAC5pC,GAAD,EAAK;AAChB,SAAKpB,KAAL,GAAaoB,GAAb;AAEA,QAAIwmB,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACPlH,QAAAA,KAAK,EAAE,KAAKA,KADL;AAEPgJ,QAAAA,MAAM,EAAE,KAAKshC;AAFN;AAH6B,KAA1B,CAAZ;AASA,SAAKxjC,aAAL,CAAmB8gB,KAAnB;AACA;;AAhUyC;;AAmU3CvmB,cAAc,CAACC,MAAf,CAAsB,YAAtB,EAAoCooC,gBAApC;;eAEeroC,cAAc,CAAC7B,GAAf,CAAmB,YAAnB;;;;;;;;;;;ACrYf;;AACA;;AACA;;;;AALA;;;AAOA,MAAMsC,MAAM,GAAGC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAnB;;AAuEA,MAAM0pC,kBAAN,SAAiCtrC,WAAjC,CAA6C;AAE5CC,EAAAA,WAAW,GAAG;AACP;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEN,QAAI2F,WAAW,GAAG,KAAKlD,YAAL,CAAkB,aAAlB,KAAoC,EAAtD;AACA,QAAIspB,KAAK,GAAG,KAAKzlB,YAAL,CAAkB,UAAlB,IAAgC,EAAhC,GAAqC,mFAAjD;AAEMzE,IAAAA,IAAI,CAAC5B,SAAL,GAAkB,UAASmD,MAAM,CAACk6B,OAAQ;;;wCAGV33B,WAAY;MAC9ComB,KAAM;;8BAJJ;AAQA,SAAKjqB,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEN,SAAK+qC,MAAL,GAAc,KAAK3R,CAAL,CAAO,OAAP,CAAd;AACA,SAAK4R,MAAL,GAAc,KAAK5R,CAAL,CAAO,QAAP,CAAd;AACA,SAAK6R,SAAL,GAAiB,EAAjB;AAEA,QAAIl0B,OAAO,GAAG,KAAKqiB,CAAL,CAAO,UAAP,CAAd;AACA,SAAKriB,OAAL,GAAe,EAAf;AAEAA,IAAAA,OAAO,CAAC6sB,aAAR,IAAuB7sB,OAAO,CAAC6sB,aAAR,GAAwBnlC,GAAxB,CAA4BL,EAAE,IAAE;AAEtD,UAAI,CAACA,EAAE,CAACqgC,OAAR,EAAkB,OAFoC,CAE7B;;AAEzB,UAAIrgC,EAAE,CAACqgC,OAAH,IAAc,IAAlB,EACC,OAAO,KAAK1nB,OAAL,CAAa7Q,IAAb,CAAkB,SAAlB,CAAP;AAED,UAAI9H,EAAE,CAACqgC,OAAH,IAAc,UAAlB,EACC,OAAO,KAAK1nB,OAAL,CAAa7Q,IAAb,CAAkB;AAAC,mBAAW9H,EAAE,CAACJ;AAAf,OAAlB,CAAP;;AAED,UAAII,EAAE,CAACqgC,OAAH,IAAc,QAAlB,EAA2B;AAC1B,eAAO,KAAK1nB,OAAL,CAAa7Q,IAAb,CAAkB;AAAC,kBAAQ9H,EAAE,CAACJ;AAAZ,SAAlB,CAAP;AACA;;AAED,UAAII,EAAE,CAACiG,YAAH,CAAgB,UAAhB,CAAJ,EACC,KAAK4mC,SAAL,CAAe/kC,IAAf,CAAoB9H,EAAE,CAACiB,KAAvB;AAED,UAAI++B,KAAK,GAAG,EAAZ;AAEA7/B,MAAAA,KAAK,CAACC,IAAN,CAAWJ,EAAE,CAACc,UAAd,EAA0Bf,OAA1B,CAAkCgB,IAAI,IAAE;AACvC,YAAI,CAAC,CAAC,OAAD,EAAU,UAAV,EAAsByH,QAAtB,CAA+BzH,IAAI,CAACL,IAApC,CAAL,EACCs/B,KAAK,CAACj/B,IAAI,CAACL,IAAN,CAAL,GAAmBK,IAAI,CAACE,KAAxB;AACD,OAHD;AAKA,WAAK0X,OAAL,CAAa7Q,IAAb,CAAkBmG,MAAM,CAAC8M,MAAP,CAAcilB,KAAd,EAAqB;AACtC97B,QAAAA,KAAK,EAAElE,EAAE,CAACJ,SAD4B;AAEtCyC,QAAAA,GAAG,EAAErC,EAAE,CAACiB,KAAH,IAAU;AAFuB,OAArB,CAAlB;AAIA,KA5BsB,CAAvB;AA8BA,SAAK4C,gBAAL,CAAsB,OAAtB,EAA+B,KAAKk7B,KAAL,CAAWl5B,IAAX,CAAgB,IAAhB,CAA/B;AACA,SAAKhC,gBAAL,CAAsB,UAAtB,EAAkC,KAAKipC,UAAL,CAAgBjnC,IAAhB,CAAqB,IAArB,CAAlC;AACG;;AAEJinC,EAAAA,UAAU,CAAC5mC,CAAD,EAAG;AACZ,QAAIA,CAAC,CAACk3B,IAAF,IAAU,OAAd,EAAuB;AACtB,WAAK2P,UAAL;AACA;AACD;;AAED,aAAW/qC,kBAAX,GAAgC;AAAE,WAAO,CAAC,UAAD,CAAP;AAAsB;;AACxDC,EAAAA,wBAAwB,CAACvB,IAAD,EAAOwB,QAAP,EAAiBC,QAAjB,EAA0B;AACjD,QAAIzB,IAAI,KAAK,UAAb,EACC,KAAKisC,MAAL,CAAYxnC,QAAZ,GAAuB,KAAKA,QAA5B;AACD;;AAED2kB,EAAAA,aAAa,GAAE;AAEd,QAAI,KAAKkjB,OAAL,IAAgB,CAAC,KAAKC,SAAtB,IAAmC,CAAC,KAAK7qC,YAAL,CAAkB,aAAlB,CAAxC,EACC,KAAKpB,YAAL,CAAkB,OAAlB,EAA2B,IAA3B,EADD,KAGC,KAAKe,eAAL,CAAqB,OAArB;AACD;;AAEDi5B,EAAAA,CAAC,CAACrvB,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgBb,aAAhB,CAA8B+K,GAA9B,CAAP;AAA0C;;AAClDi6B,EAAAA,EAAE,CAACj6B,GAAD,EAAK;AAAE,WAAO,KAAKlK,UAAL,CAAgB3B,gBAAhB,CAAiC6L,GAAjC,CAAP;AAA6C;;AAEtDxH,EAAAA,iBAAiB,GAAE;AAClB,SAAK+wB,QAAL,GAAgB,KAAK2X,SAArB;AACA;;AACDroC,EAAAA,oBAAoB,GAAE,CAAE;;AAExB,MAAIW,QAAJ,GAAc;AAAE,WAAO,KAAKc,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAId,QAAJ,CAAa9C,GAAG,GAAC,IAAjB,EAAsB;AAAEA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AAA2E;;AAEnG,MAAIsD,QAAJ,GAAc;AAAE,WAAO,KAAKY,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAIgnC,SAAJ,GAAe;AAAE,WAAO,KAAKhnC,YAAL,CAAkB,YAAlB,CAAP;AAAwC;;AAEzD,MAAIhF,KAAJ,GAAW;AACV,QAAI,KAAKoE,QAAT,EACC,OAAO,KAAK6vB,QAAL,IAAiB,KAAKA,QAAL,CAAc70B,GAAd,CAAkB+yB,CAAC,IAAEA,CAAC,CAAC/wB,GAAvB,CAAxB,CADD,KAGC,OAAO,KAAK6yB,QAAL,IAAiB,KAAKA,QAAL,CAAc7yB,GAAtC;AACD;;AAED,MAAIpB,KAAJ,CAAUoB,GAAV,EAAc;AACb,SAAK6yB,QAAL,GAAgB7yB,GAAhB;AACA;;AAED,MAAI2qC,OAAJ,GAAa;AACZ,QAAI3qC,GAAG,GAAG,KAAKpB,KAAf;AACA,WAAO,KAAKoE,QAAL,GAAgBhD,GAAG,CAAC0D,MAAJ,IAAc,CAAd,IAAmB,CAAC1D,GAAG,CAAC,CAAD,CAAvC,GAA6C,CAACA,GAArD;AACA;;AAED,MAAI+iC,SAAJ,CAAcv9B,OAAd,EAAsB;AACrB,SAAKgkC,UAAL,GAAkBhkC,OAAlB;AACA,QAAIA,OAAJ,EACC,KAAK7G,YAAL,CAAkB,SAAlB,EAA6B,IAA7B,EADD,KAGC,KAAKe,eAAL,CAAqB,SAArB;AACD;;AAED,MAAIqjC,SAAJ,GAAe;AACd,WAAO,KAAKyG,UAAZ;AACA;;AAED,MAAIlzB,OAAJ,CAAYiE,IAAZ,EAAiB;AAEhB,QAAIA,IAAI,YAAYwB,OAApB,EAA6B;AAC5BxB,MAAAA,IAAI,CAACrT,IAAL,CAAUmN,MAAM,IAAE;AACjB,aAAKiC,OAAL,GAAejC,MAAf;AACA,eAAOA,MAAP;AACA,OAHD;AAIAkG,MAAAA,IAAI,GAAG,EAAP,CAL4B,CAKlB;AACV;;AAED,QAAIzc,KAAK,CAACyO,OAAN,CAAcgO,IAAd,CAAJ,EACCA,IAAI,GAAGA,IAAI,CAACvc,GAAL,CAAS43B,CAAC,IAAE;AAClB,UAAI,OAAOA,CAAP,IAAY,QAAhB,EACC,OAAO;AAAC/zB,QAAAA,KAAK,EAAE+zB,CAAR;AAAW51B,QAAAA,GAAG,EAAE41B;AAAhB,OAAP;AACD,aAAOA,CAAP;AACA,KAJM,CAAP;AAMD,SAAKiV,SAAL,GAAiBtwB,IAAjB;AACA,SAAKsY,QAAL,GAAgB,KAAK2X,SAArB;AACA;;AACD,MAAIl0B,OAAJ,GAAa;AAAE,WAAO,KAAKu0B,SAAZ;AAAsB;;AAErC,MAAIhY,QAAJ,CAAa7yB,GAAb,EAAiB;AAEhB,SAAK8qC,YAAL,GAAoB,KAAKN,SAAL,CAAellC,KAAf,CAAqB,CAArB,CAApB;AAEA,QAAI,CAACtF,GAAL,EAAWA,GAAG,GAAG,EAAN,CAAX,KACK,IAAI,CAAClC,KAAK,CAACyO,OAAN,CAAcvM,GAAd,CAAL,EAA0BA,GAAG,GAAG,CAACA,GAAD,CAAN;AAE/B,QAAI6yB,QAAQ,GAAG,KAAKvc,OAAL,CAAa2M,MAAb,CAAoB8N,CAAC,IAAE;AACrC,aAAO/wB,GAAG,CAACmG,QAAJ,CAAa4qB,CAAC,CAAC/wB,GAAf,KAAwBA,GAAG,CAAC0D,MAAJ,IAAc,CAAd,IAAmB,CAACqtB,CAAC,CAAC/wB,GAArD;AACA,KAFc,CAAf,CAPgB,CAWhB;;AACA6yB,IAAAA,QAAQ,GAAGA,QAAQ,CAAC10B,IAAT,CAAc,CAAC0kB,CAAD,EAAGC,CAAH,KAAO;AAC/B,aAAO9iB,GAAG,CAAC4b,OAAJ,CAAYiH,CAAC,CAAC7iB,GAAd,IAAqBA,GAAG,CAAC4b,OAAJ,CAAYkH,CAAC,CAAC9iB,GAAd,CAA5B;AACA,KAFU,CAAX;AAIA,SAAKwqC,SAAL,GAAiB,EAAjB,CAhBgB,CAkBhB;AACA;;AACA,QAAI,KAAKl0B,OAAL,CAAa5S,MAAb,IAAuB,CAA3B,EACC,KAAK8mC,SAAL,GAAiBxqC,GAAjB;AAED,QAAI+qC,MAAM,GAAG,EAAb;AAEAlY,IAAAA,QAAQ,CAACn1B,OAAT,CAAiBqzB,CAAC,IAAE;AAEnB,WAAKyZ,SAAL,CAAe/kC,IAAf,CAAoBsrB,CAAC,CAAC/wB,GAAtB;;AAEA,UAAG+wB,CAAC,CAAC/wB,GAAF,IAAS,KAAK4qC,SAAjB,EACCG,MAAM,IAAK,gBAAeha,CAAC,CAAC/wB,GAAI,KAAI+wB,CAAC,CAAClvB,KAAM,SAA5C;AAED,KAPD;AASA,SAAK0oC,MAAL,CAAYhtC,SAAZ,GAAwBwtC,MAAxB;AAEA,SAAKpsC,YAAL,CAAkB,OAAlB,EAA2BqB,GAAG,CAACuJ,IAAJ,CAAS,GAAT,CAA3B;AAEA,SAAKke,aAAL;AACA;;AAED,MAAIoL,QAAJ,GAAc;AACb,QAAIA,QAAQ,GAAG,KAAKvc,OAAL,CAAa2M,MAAb,CAAoB8N,CAAC,IAAE;AACrC,aAAO,KAAKyZ,SAAL,CAAerkC,QAAf,CAAwB4qB,CAAC,CAAC/wB,GAA1B,CAAP;AACA,KAFc,CAAf,CADa,CAKb;;AACA6yB,IAAAA,QAAQ,GAAGA,QAAQ,CAAC10B,IAAT,CAAc,CAAC0kB,CAAD,EAAGC,CAAH,KAAO;AAC/B,aAAO,KAAK0nB,SAAL,CAAe5uB,OAAf,CAAuBiH,CAAC,CAAC7iB,GAAzB,IAAgC,KAAKwqC,SAAL,CAAe5uB,OAAf,CAAuBkH,CAAC,CAAC9iB,GAAzB,CAAvC;AACA,KAFU,CAAX;AAIA,WAAO,KAAKgD,QAAL,GAAgB6vB,QAAhB,GAA2BA,QAAQ,CAAC,CAAD,CAA1C;AACA;;AAED,MAAI4W,SAAJ,GAAe;AACd,WAAO,KAAKrqC,UAAL,CAAgBqlC,aAAhB,IAAiC,KAAK6F,MAAtC,IAAgD,KAAK1mC,YAAL,CAAkB,SAAlB,CAAvD;AACA;;AAED84B,EAAAA,KAAK,GAAE;AACN,SAAKgO,UAAL;AACA;;AAED,MAAIM,OAAJ,CAAYA,OAAZ,EAAoB;AACnB,QAAIA,OAAJ,EAAa;AACZ,WAAKV,MAAL,CAAY5N,KAAZ;;AACA,WAAK/9B,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AACA,KAHD,MAGK;AACJ,WAAK2rC,MAAL,CAAY/4B,IAAZ;;AACA,WAAK7R,eAAL,CAAqB,SAArB;AACA;AACD;;AAED,QAAMgrC,UAAN,GAAkB;AAEjB,QAAI,KAAK5nC,QAAT,EAAoB;;AAEpB,QAAI,KAAKmoC,QAAT,EAAmB;AAClB,WAAKA,QAAL,CAAcjvB,OAAd,CAAsB,KAAtB;AACA;AACA;;AAED,SAAKgvB,OAAL,GAAe,IAAf;AAEA,QAAI7M,QAAQ,GAAG;AACdjD,MAAAA,IAAI,EAAE,KAAKxa,WADG;AAEdmS,MAAAA,QAAQ,EAAE,KAAK2X,SAFD;AAGdxnC,MAAAA,QAAQ,EAAE,KAAKA,QAHD;AAIdm4B,MAAAA,OAAO,EAAE,KAAKv3B,YAAL,CAAkB,UAAlB,CAJK;AAMd;AACA03B,MAAAA,QAAQ,EAAEzI,QAAQ,IAAE;AACnB,aAAKA,QAAL,GAAgBA,QAAQ,CAAC70B,GAAT,CAAa+yB,CAAC,IAAEA,CAAC,CAAC/wB,GAAlB,CAAhB;AACA;AATa,KAAf;AAYA,QAAIuyB,IAAI,GAAG,KAAKjc,OAAhB;AACA,QAAI8nB,WAAW,GAAG;AACjB/P,MAAAA,KAAK,EAAE,KAAKtuB,YAAL,CAAkB,YAAlB,KAAmC,QADzB;AAEjB0uB,MAAAA,SAAS,EAAE,KAAK1uB,YAAL,CAAkB,iBAAlB,KAAwC,MAFlC;AAGjBixB,MAAAA,QAAQ,EAAE,KAAKjxB,YAAL,CAAkB,gBAAlB,KAAuC,MAHhC;AAIjBiwB,MAAAA,eAAe,EAAE,KAAKjwB,YAAL,CAAkB,eAAlB,IAAqC,QAArC,GAAgD;AAJhD,KAAlB;AAOA,QAAI,CAACwyB,IAAD,IAASA,IAAI,CAAC7uB,MAAL,IAAe,CAA5B,EACC6uB,IAAI,GAAG,CAAC;AAAC,iBAAW;AAAZ,KAAD,CAAP;AAED,SAAK0Y,QAAL,GAAgB,IAAInY,aAAJ,CAASP,IAAT,EAAe4L,QAAf,CAAhB;AAEA,SAAK8M,QAAL,CAActtC,EAAd,CAAiBgB,YAAjB,CAA8B,cAA9B,EAA8C,KAAK2vB,SAAnD;AAEA,QAAItuB,GAAG,GAAGsO,SAAV;AAEA,QAAIlM,gBAAOO,SAAX,EACC3C,GAAG,GAAG,MAAM,KAAKirC,QAAL,CAAc9L,KAAd,CAAoB;AAAChM,MAAAA,QAAQ,EAAE;AAAX,KAApB,CAAZ,CADD,KAGCnzB,GAAG,GAAG,MAAM,KAAKirC,QAAL,CAAc9b,OAAd,CAAsB,KAAKwJ,CAAL,CAAO,MAAP,CAAtB,EAAsCyF,WAAtC,CAAZ;AAED,SAAK6M,QAAL,GAAgB,IAAhB;AACA,SAAKD,OAAL,GAAe,KAAf;AAEA,QAAI,CAAC5oC,gBAAOO,SAAZ,EACC,KAAK2nC,MAAL,CAAY5N,KAAZ,GAjDgB,CAiDI;;AAErB,QAAI18B,GAAG,KAAK,KAAZ,EAAoB;AAEpBA,IAAAA,GAAG,GAAG,KAAKgD,QAAL,GAAgBhD,GAAhB,GAAsB,CAACA,GAAD,CAA5B;AAEA,SAAK6yB,QAAL,GAAgB7yB,GAAG,CAAChC,GAAJ,CAAQ+yB,CAAC,IAAEA,CAAC,CAAC/wB,GAAb,CAAhB;AAEA,QAAIwmB,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACPlH,QAAAA,KAAK,EAAE,KAAKA;AADL;AAH6B,KAA1B,CAAZ;AAQA,SAAK8G,aAAL,CAAmB8gB,KAAnB;AACA;;AA5R2C;;AAgS7CvmB,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsCmqC,kBAAtC;;eAEepqC,cAAc,CAAC7B,GAAf,CAAmB,cAAnB;;;;;;;;;;;AChXf;;AAEA,MAAMsC,MAAM,GAAGC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAnB;;AAyDA,MAAMuqC,eAAN,SAA8BnsC,WAA9B,CAA0C;AAEzCC,EAAAA,WAAW,GAAG;AACb;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEA,QAAIuE,KAAK,GAAG,KAAK9B,YAAL,CAAkB,OAAlB,KAA8B,4BAA1C;AAEAZ,IAAAA,IAAI,CAAC5B,SAAL,GAAkB,UAASmD,MAAM,CAACk6B,OAAQ;;;;aAI/B/4B,KAAM;;IAJjB;AAQA,SAAKzC,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AACA,SAAKiC,gBAAL,CAAsB,OAAtB,EAA+B,KAAKs5B,QAAL,CAAct3B,IAAd,CAAmB,IAAnB,CAA/B;AACA;;AAEDs3B,EAAAA,QAAQ,GAAE;AAET,QAAI,KAAKh4B,QAAT,EAAoB;AAEpB,SAAKsP,MAAL,GAAc,CAAC,KAAKA,MAApB;AAEA,QAAIoU,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACPlH,QAAAA,KAAK,EAAE,KAAKA;AADL;AAH6B,KAA1B,CAAZ;AAQA,SAAK8G,aAAL,CAAmB8gB,KAAnB;AACA;;AAED,MAAIpU,MAAJ,CAAWpS,GAAX,EAAe;AACdA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,QAAlB,EAA4B,EAA5B,CAAH,GAAqC,KAAKe,eAAL,CAAqB,QAArB,CAAxC;AACA;;AAED,MAAI0S,MAAJ,GAAY;AAAE,WAAO,KAAKxO,YAAL,CAAkB,QAAlB,CAAP;AAAoC;;AAClD,MAAIhF,KAAJ,GAAW;AAAE,WAAO,KAAKgF,YAAL,CAAkB,OAAlB,IAA8B,KAAK7D,YAAL,CAAkB,OAAlB,KAA4B,IAA1D,GAAkE,KAAKA,YAAL,CAAkB,OAAlB,CAAzE;AAAqG;;AAElH,MAAI+C,QAAJ,GAAc;AAAE,WAAO,KAAKc,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAId,QAAJ,CAAa9C,GAAG,GAAC,IAAjB,EAAsB;AAACA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AAA2E;;AA/CzD;;AAmD1CO,cAAc,CAACC,MAAf,CAAsB,WAAtB,EAAmCgrC,eAAnC;;eAEejrC,cAAc,CAAC7B,GAAf,CAAmB,WAAnB;;;;;;;;;;;AC/Gf,MAAM+sC,iBAAN,SAAgCpsC,WAAhC,CAA4C;AAE3CC,EAAAA,WAAW,GAAG;AACb,YADa,CAGb;AACA;AACA;AACA;;AAEA,SAAKwC,gBAAL,CAAsB,QAAtB,EAAgC,KAAK8hC,SAAL,CAAe9/B,IAAf,CAAoB,IAApB,CAAhC,EAA2D,IAA3D;AAEA,SAAKhC,gBAAL,CAAsB,SAAtB,EAAiCqC,CAAC,IAAE;AACnC,UAAI,CAAC,WAAD,EAAc,SAAd,EAAyBsC,QAAzB,CAAkCtC,CAAC,CAACk3B,IAApC,CAAJ,EAA+C;AAC9C,aAAKqQ,GAAL,CAAS,CAAC,CAAV;AACA,OAFD,MAEM,IAAI,CAAC,YAAD,EAAe,WAAf,EAA4BjlC,QAA5B,CAAqCtC,CAAC,CAACk3B,IAAvC,CAAJ,EAAkD;AACvD,aAAKqQ,GAAL,CAAS,CAAT;AACA;AACD,KAND;AAQA,SAAKC,MAAL,GAAcvtC,KAAK,CAACC,IAAN,CAAW,KAAKN,gBAAL,CAAsB,WAAtB,CAAX,CAAd;AACA;;AAEDqE,EAAAA,iBAAiB,GAAE;AAClB,QAAI,CAAC,KAAK8B,YAAL,CAAkB,UAAlB,CAAL,EACC,KAAKjF,YAAL,CAAkB,UAAlB,EAA8B,GAA9B;AACD;;AAEDysC,EAAAA,GAAG,CAACrwB,GAAG,GAAC,CAAL,EAAO;AACT,QAAIzI,CAAC,GAAG,KAAK+4B,MAAL,CAAYzvB,OAAZ,CAAoB,KAAKxJ,MAAzB,CAAR;AAEA,QAAIE,CAAC,IAAIhE,SAAT,EAAqBgE,CAAC,GAAGyI,GAAG,GAAG,CAAN,GAAU,KAAKswB,MAAL,CAAY3nC,MAAZ,GAAmB,CAA7B,GAAiC,CAArC,CAArB,KACK4O,CAAC,IAAIyI,GAAL;AAEL,QAAIzI,CAAC,IAAI,KAAK+4B,MAAL,CAAY3nC,MAArB,EAA8B4O,CAAC,GAAG,CAAJ,CAA9B,KACK,IAAIA,CAAC,GAAG,CAAR,EAAYA,CAAC,GAAG,KAAK+4B,MAAL,CAAY3nC,MAAZ,GAAmB,CAAvB;AAEjB,SAAK9E,KAAL,GAAa,KAAKysC,MAAL,CAAY/4B,CAAZ,EAAe1T,KAA5B;AACA;;AAED0kC,EAAAA,SAAS,CAACz/B,CAAD,EAAG;AAEX,QAAIA,CAAC,CAACwB,MAAF,IAAY,IAAhB,EAAuB;AAEvB,SAAKzG,KAAL,GAAaiF,CAAC,CAACwB,MAAF,CAASzG,KAAtB;AACAiF,IAAAA,CAAC,CAACC,eAAF;AAEA,QAAI0iB,KAAK,GAAG,IAAI7gB,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACPlH,QAAAA,KAAK,EAAE,KAAKA;AADL;AAH6B,KAA1B,CAAZ;AAQA,SAAK8G,aAAL,CAAmB8gB,KAAnB;AACA;;AAED,MAAIpU,MAAJ,GAAY;AACX,WAAO,KAAKi5B,MAAL,CAAY1mC,IAAZ,CAAiBhH,EAAE,IAAEA,EAAE,CAACyU,MAAxB,CAAP;AACA;;AAED,MAAIxT,KAAJ,GAAW;AACV,QAAI0sC,KAAK,GAAG,KAAKl5B,MAAjB;AACA,WAAOk5B,KAAK,IAAIA,KAAK,CAAC1sC,KAAtB;AACA;;AAED,MAAIA,KAAJ,CAAUoB,GAAV,EAAc;AACb,SAAKqrC,MAAL,CAAY3tC,OAAZ,CAAoBC,EAAE,IAAE;AACvB,UAAIA,EAAE,CAACiB,KAAH,IAAYoB,GAAhB,EACCrC,EAAE,CAACyU,MAAH,GAAU,IAAV,CADD,KAGCzU,EAAE,CAACyU,MAAH,GAAU,KAAV;AACD,KALD;AAMA;;AAED,MAAItP,QAAJ,GAAc;AAAE,WAAO,KAAKc,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAId,QAAJ,CAAa9C,GAAG,GAAC,IAAjB,EAAsB;AACrBA,IAAAA,GAAG,GAAG,KAAKrB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKe,eAAL,CAAqB,UAArB,CAA1C;AACA,SAAK2rC,MAAL,CAAY3tC,OAAZ,CAAoBC,EAAE,IAAEA,EAAE,CAACmF,QAAH,GAAY9C,GAApC;AACA;;AAhF0C;;AAoF5CC,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqCirC,iBAArC;;eAEelrC,cAAc,CAAC7B,GAAf,CAAmB,aAAnB;;;;;;;;;;;ACvFf;;AAEA,MAAMsC,MAAM,GAAGC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAnB;;AAmEA,MAAM4qC,kBAAN,SAAiCxsC,WAAjC,CAA6C;AAE5CC,EAAAA,WAAW,GAAG;AACb;AAEA,QAAI+B,MAAM,GAAG,KAAK9B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEA6B,IAAAA,IAAI,CAAC5B,SAAL,GAAkB;YACRmD,MAAM,CAACk6B,OAAQ;GADzB;AAIA,SAAKx7B,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AACA;;AAEDs7B,EAAAA,MAAM,GAAE;AACP,SAAKpG,OAAL,CAAa,MAAb;AACA;;AAEDvZ,EAAAA,KAAK,GAAE;AACN,SAAK/Q,SAAL,CAAelC,GAAf,CAAmB,OAAnB;AACA;;AAEDslB,EAAAA,IAAI,GAAE;AACL,SAAKpjB,SAAL,CAAevM,MAAf,CAAsB,MAAtB;AACA,SAAKuM,SAAL,CAAevM,MAAf,CAAsB,OAAtB;AACA;;AAED62B,EAAAA,OAAO,CAACnrB,GAAD,EAAK;AACX,SAAKikB,IAAL;AACA,SAAKpjB,SAAL,CAAelC,GAAf,CAAmBqB,GAAnB;AACA2H,IAAAA,UAAU,CAAC,MAAI,KAAK9G,SAAL,CAAevM,MAAf,CAAsB0L,GAAtB,CAAL,EAAiC,GAAjC,CAAV;AACA;;AAhC2C;;AAoC7CrJ,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsCqrC,kBAAtC;;eAEetrC,cAAc,CAAC7B,GAAf,CAAmB,cAAnB;;;;;;ACxGf;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/KA;;;;AAEe,MAAMotC,UAAN,CAAiB;AAE5BxsC,EAAAA,WAAW,CAACub,IAAI,GAAC,EAAN,EAAS;AAChB,SAAKlN,KAAL;AAEA,SAAKkN,IAAL,GAAY3O,MAAM,CAAC8M,MAAP,CAAc;AACtB+yB,MAAAA,OAAO,EAAE,EADa;AAEtBzkC,MAAAA,KAAK,EAAE;AAFe,KAAd,EAGTuT,IAHS,CAAZ;AAIH;;AAEDlN,EAAAA,KAAK,GAAE;AACH,SAAKq+B,YAAL,GAAoB,IAApB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,EAAhB,CAHG,CAGqB;;AACxB,SAAKC,aAAL,GAAqB,EAArB,CAJG,CAIqB;;AACxB,SAAKt9B,IAAL,GAAY,EAAZ,CALG,CAKqB;AAC3B;;AAED,QAAMu9B,QAAN,GAAgB;AACZ,SAAKH,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,KAAKG,IAAL,CAAUC,MAAV,IAAoB,KAAKD,IAAzC;AACA,SAAKF,aAAL,GAAqB,KAAKD,QAA1B;AACA,SAAKr9B,IAAL,GAAY,KAAKq9B,QAAjB;AAEA,UAAM,KAAKK,YAAL,EAAN;AACH;;AAED,MAAIR,OAAJ,GAAa;AAAE,WAAO,KAAKlxB,IAAL,CAAUkxB,OAAjB;AAA0B;;AAEzC,QAAM/nC,MAAN,GAAc;AAEV,QAAI,KAAKwoC,SAAT,EACI,MAAM,KAAKA,SAAX;AAEJ,WAAO,KAAK39B,IAAL,CAAU7K,MAAjB;AACH;;AAEDs8B,EAAAA,EAAE,CAAC1tB,CAAD,EAAG;AAAE,WAAO,KAAK/D,IAAL,CAAU+D,CAAV,CAAP;AAAqB;;AAC5BytB,EAAAA,KAAK,CAACztB,CAAD,EAAG;AAAE,WAAO,KAAK/D,IAAL,CAAU,CAAV,CAAP;AAAqB;;AAC/B0xB,EAAAA,IAAI,GAAE;AAAE,WAAO,KAAK1xB,IAAL,CAAU,KAAKA,IAAL,CAAU7K,MAAV,GAAiB,CAA3B,CAAP;AAAqC;;AAE7ChG,EAAAA,OAAO,CAAC6F,EAAD,EAAI;AAAE,WAAO,KAAKgL,IAAL,CAAU7Q,OAAV,CAAkB6F,EAAlB,CAAP;AAA8B;;AAC3CvF,EAAAA,GAAG,CAACuF,EAAD,EAAI;AAAE,WAAO,KAAKgL,IAAL,CAAUvQ,GAAV,CAAcuF,EAAd,CAAP;AAA0B;;AACnC4oC,EAAAA,OAAO,CAAC5oC,EAAD,EAAI;AAAE,WAAO,KAAKgL,IAAL,CAAU49B,OAAV,CAAkB5oC,EAAlB,CAAP;AAA8B;;AAC3C0f,EAAAA,MAAM,CAAC1f,EAAD,EAAI;AAAE,WAAO,KAAKgL,IAAL,CAAU0U,MAAV,CAAiB1f,EAAjB,CAAP;AAA6B;;AACzCqpB,EAAAA,MAAM,CAACrpB,EAAD,EAAKuF,KAAK,GAAC,CAAX,EAAa;AAAE,WAAO,KAAKyF,IAAL,CAAUqe,MAAV,CAAiBrpB,EAAjB,EAAqBuF,KAArB,CAAP;AAAoC;;AAEzD,QAAMsjC,gBAAN,CAAuBC,MAAvB,EAA8B;AAE1B;AACA,QAAI,KAAKN,IAAL,IAAa,KAAKA,IAAL,CAAUO,SAA3B,EAAsC;AAElC,UAAI/9B,IAAI,GAAG;AAAC0uB,QAAAA,IAAI,EAAC,KAAKsP,OAAL,CAAatP,IAAb,IAAmB;AAAzB,OAAX;;AAEA,UAAI,KAAK1iB,IAAL,CAAUvT,KAAV,IAAmB,MAAvB,EAA+B;AAC3BuH,QAAAA,IAAI,CAAC89B,MAAL,GAAcA,MAAd;AACA99B,QAAAA,IAAI,CAACk9B,OAAL,GAAe,KAAKA,OAApB;AACH;;AAED,UAAI,KAAKc,OAAT,EACIh+B,IAAI,CAACg+B,OAAL,GAAe,KAAKA,OAAL,CAAa3tC,KAAb,EAAf;AAEJ,YAAM,KAAKmtC,IAAL,CAAUO,SAAV,CAAoB;AAAC/9B,QAAAA,IAAI,EAACA;AAAN,OAApB,CAAN;AACH;AACJ;;AAEDvH,EAAAA,KAAK,CAACqlC,MAAD,EAAQ;AACT,WAAO,KAAKH,SAAL,GAAiB,IAAInwB,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAE/C,UAAKqwB,MAAM,IAAI,CAAV,IAAe,KAAKT,QAAL,CAAcloC,MAAd,IAAwB,CAAxC,IACA,KAAKgoC,YAAL,IAAqBW,MAArB,IAA+B,KAAKT,QAAL,CAAcloC,MAAd,IAAwB2oC,MAAvD,IAAiE,KAAK9xB,IAAL,CAAUvT,KAAV,IAAmB,MADxF,EACkG;AAE9F,aAAK0kC,YAAL,GAAoBW,MAApB;AAEA,YAAI,KAAK9xB,IAAL,CAAUvT,KAAd,EACI,MAAM,KAAKolC,gBAAL,CAAsBC,MAAtB,CAAN;AAEJ,cAAM,KAAKP,QAAL,EAAN;AACH;;AAED,UAAI,KAAKF,QAAL,CAAcloC,MAAd,GAAuB2oC,MAA3B,EACI,KAAKG,IAAL,CAAU,cAAV,EAA0B,KAAKZ,QAAL,CAAcloC,MAAxC;AAEJ,UAAI,KAAK+oC,UAAT,EACI,MAAM,KAAKA,UAAX;AAEJ,UAAI,KAAKC,QAAT,EACI,MAAM,KAAKA,QAAX;AAEJ1wB,MAAAA,OAAO,CAAC,KAAKzN,IAAL,CAAUjJ,KAAV,CAAgB+mC,MAAhB,EAAwBA,MAAM,GAAC,KAAK9xB,IAAL,CAAUkxB,OAAzC,CAAD,CAAP;AACH,KAvBuB,EAuBrBkB,OAvBqB,CAuBb36B,CAAC,IAAE,OAAO,KAAKk6B,SAvBF,CAAxB;AAwBH;;AAEDD,EAAAA,YAAY,GAAE;AACV,WAAO,KAAKQ,UAAL,GAAkB,IAAI1wB,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAEhD,UAAI,CAAC,KAAKuwB,OAAV,EAAoB,OAAOvwB,OAAO,CAAC,KAAKzN,IAAN,CAAd;;AAEpB,UAAI,KAAKo9B,YAAL,GAAoB,KAAKY,OAAL,CAAaK,WAArC,EAAkD;AAC9C,aAAKr+B,IAAL,GAAY,MAAM,KAAKg+B,OAAL,CAAatpB,MAAb,CAAoB,KAAK2oB,QAAzB,CAAlB;AACA,cAAM,KAAKztC,IAAL,EAAN;AACA,aAAK0tC,aAAL,GAAqB,KAAKt9B,IAA1B;AACH;;AAED,WAAKA,IAAL,GAAY,MAAM,KAAKg+B,OAAL,CAAaM,YAAb,CAA0B,KAAKhB,aAA/B,CAAlB;AAEA7vB,MAAAA,OAAO,CAAC,KAAKzN,IAAN,CAAP;AAEA,WAAKo9B,YAAL,GAAoB,IAAIjjC,IAAJ,GAAWC,OAAX,EAApB;AAEH,KAhBwB,EAgBtBgkC,OAhBsB,CAgBd36B,CAAC,IAAE,OAAO,KAAKy6B,UAhBD,CAAzB;AAiBH;;AAEDtuC,EAAAA,IAAI,GAAE;AACF,WAAO,KAAKuuC,QAAL,GAAgB,IAAI3wB,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAE9C,UAAI,CAAC,KAAK8wB,KAAV,EAAkB,OAAO9wB,OAAO,CAAC,KAAKzN,IAAN,CAAd;AAElB,WAAKA,IAAL,GAAY,MAAM,KAAKu+B,KAAL,CAAW3uC,IAAX,CAAgB,KAAKoQ,IAArB,CAAlB;AAEAyN,MAAAA,OAAO,CAAC,KAAKzN,IAAN,CAAP;AAEH,KARsB,EAQpBo+B,OARoB,CAQZ36B,CAAC,IAAE,OAAO,KAAK06B,QARH,CAAvB;AASH;;AA5H2B;;;AA+HhC,+BAAQlB,UAAU,CAACpzB,SAAnB;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACvBA;;;;eAEe9O,GAAG,IAAI;AAClB,SAAOA,GAAG,CAACpL,OAAJ,CAAY,QAAZ,EAAsB,GAAtB,EACEwG,KADF,CACQ,GADR,EAEE1G,GAFF,CAEM+uC,IAAI,IAAE,yBAAWA,IAAX,CAFZ,EAGExjC,IAHF,CAGO,GAHP,CAAP;AAIH;;;;;;;;;;;ACPD;;AACA;;;;AAEAtJ,cAAc,CAACC,MAAf,CAAsB,yBAAtB,EAAiD,cAAcE,sBAAd,CAAwB;AAErE,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA6ClB;;AAEFY,EAAAA,YAAY,GAAE;AACV,SAAKggC,OAAL,GAAe,KAAKniC,UAAL,CAAgB3B,gBAAhB,CAAiC,cAAjC,CAAf;AAEA,QAAImB,KAAK,GAAG,KAAKqkB,MAAL,CAAYrkB,KAAxB;AAEA,QAAIA,KAAJ,EACI,KAAK2iC,OAAL,CAAa7jC,OAAb,CAAqB,CAACC,EAAD,EAAI2U,CAAJ,KAAQ3U,EAAE,CAACiB,KAAH,GAASA,KAAK,CAAC0T,CAAD,CAA3C;AACP;;AAED1R,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;oCAGW,KAAKmsC,UAAW;;oCAEhB,KAAKC,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;;;;;;;;;;;;;;KATtC;AAuBP;;AAEF,MAAIruC,KAAJ,GAAW;AACP,QAAIA,KAAK,GAAG,EAAZ,CADO,CAGP;;AACA,QAAI,CAAC,KAAK2iC,OAAV,EACI,OAAO,KAAKte,MAAL,CAAYrkB,KAAnB;AAEJ,SAAK2iC,OAAL,CAAa7jC,OAAb,CAAqBC,EAAE,IAAE;AACrB,UAAI0U,CAAC,GAAG1U,EAAE,CAAC8lC,OAAX;AACA,UAAIpxB,CAAJ,EACIzT,KAAK,CAAC6G,IAAN,CAAW4M,CAAX;AACP,KAJD;AAMA,QAAIzT,KAAK,CAAC8E,MAAN,IAAgB,CAApB,EACI,OAAO,IAAP;AAEJ,QAAI9E,KAAK,CAAC8E,MAAN,IAAgB,CAApB,EACI9E,KAAK,GAAG,CAACA,KAAK,CAAC,CAAD,CAAN,EAAWA,KAAK,CAAC,CAAD,CAAhB,CAAR;AAEJA,IAAAA,KAAK,CAACT,IAAN;AAEA,WAAOS,KAAP;AACH;;AAED,MAAIA,KAAJ,CAAUoB,GAAV,EAAc;AAEV,QAAI,CAACA,GAAD,IAAQA,GAAG,CAAC0D,MAAJ,IAAc,CAA1B,EACI1D,GAAG,GAAG,CAAC,IAAD,EAAO,IAAP,CAAN;AAEJ,QAAI,OAAOA,GAAP,IAAc,QAAlB,EACIA,GAAG,GAAG,CAACA,GAAD,EAAMA,GAAN,CAAN;AAEJ,QAAIA,GAAG,CAAC0D,MAAJ,IAAc,CAAlB,EACI1D,GAAG,GAAG,CAACA,GAAG,CAAC,CAAD,CAAJ,EAASA,GAAG,CAAC,CAAD,CAAZ,CAAN;AAEJ,SAAKuhC,OAAL,CAAa7jC,OAAb,CAAqB,CAACC,EAAD,EAAI2U,CAAJ,KAAQ;AACzB3U,MAAAA,EAAE,CAACiB,KAAH,GAAWoB,GAAG,CAACsS,CAAD,CAAH,IAAQ,IAAnB;AACH,KAFD;AAGH;AAED;;;;;;AAIA,MAAIzQ,KAAJ,GAAW;AAEP,QAAI7B,GAAG,GAAG,KAAKpB,KAAf;AAEA,QAAI,CAACoB,GAAL,EACI,OAAO,GAAP;AAEJ,QAAI,CAACktC,EAAD,EAAKC,EAAL,IAAWntC,GAAf;AACA,QAAI+wB,CAAC,GAAG,uBAASqc,OAAT,CAAiB,KAAjB,CAAR;AACA,QAAIC,EAAE,GAAG,qBAAOH,EAAP,CAAT;AACA,QAAII,EAAE,GAAG,qBAAOH,EAAP,CAAT;AACA,QAAII,QAAQ,GAAGF,EAAE,CAACpF,IAAH,MAAalX,CAAC,CAACkX,IAAF,EAAb,IAAyBqF,EAAE,CAACrF,IAAH,MAAaqF,EAAE,CAACrF,IAAH,EAArD;AACA,QAAIuF,QAAQ,GAAGH,EAAE,CAACpF,IAAH,MAAaqF,EAAE,CAACrF,IAAH,EAA5B,CAZO,CAcP;;AACA,QAAIiF,EAAE,IAAIC,EAAV,EAAc;AACV,UAAIE,EAAE,GAAG,qBAAOH,EAAP,CAAT;AAEA,UAAInc,CAAC,CAAC0c,MAAF,CAASJ,EAAT,CAAJ,EACI,OAAO,OAAP;AAEJ,UAAIK,QAAQ,GAAG3c,CAAC,CAAC4c,IAAF,CAAON,EAAP,EAAW,MAAX,CAAf;AAEA,UAAIK,QAAQ,IAAI,CAAhB,EACI,OAAO,WAAP;AAEJ,UAAIA,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,IAAI,EAAhC,EACI,OAAOA,QAAQ,GAAC,WAAhB,CAZM,CAcV;;AACA,UAAIH,QAAJ,EACI,OAAOF,EAAE,CAAChkC,MAAH,CAAU,OAAV,CAAP;AAEJ,aAAOgkC,EAAE,CAAChkC,MAAH,CAAU,QAAV,CAAP;AACH,KAlCM,CAoCP;;;AACA,QAAIgkC,EAAE,CAAC1G,IAAH,MAAa,CAAb,IAAkB2G,EAAE,CAAC3G,IAAH,MAAa2G,EAAE,CAACzG,KAAH,GAAW+G,KAAX,CAAiB,OAAjB,EAA0BjH,IAA1B,EAAnC,EAAqE;AAEjE,UAAIkH,MAAM,GAAGR,EAAE,CAAChkC,MAAH,CAAU,KAAV,CAAb;AACA,UAAIykC,MAAM,GAAGR,EAAE,CAACjkC,MAAH,CAAU,KAAV,CAAb;;AAEA,UAAIwkC,MAAM,IAAIC,MAAV,IAAoBN,QAAxB,EAAkC;AAE9B,YAAIK,MAAM,IAAI9c,CAAC,CAAC1nB,MAAF,CAAS,KAAT,CAAV,IAA6BkkC,QAAjC,EACI,OAAO,YAAP;AAEJ,YAAIA,QAAJ,EACI,OAAOM,MAAP;AAEJ,eAAOA,MAAM,GAAC,IAAP,GAAYR,EAAE,CAAChkC,MAAH,CAAU,IAAV,CAAnB;AACH;;AAED,UAAIkkC,QAAQ,IAAIF,EAAE,CAACnF,KAAH,MAAc,CAA1B,IAA+BoF,EAAE,CAACpF,KAAH,MAAc,EAAjD,EACI,OAAO,WAAP,CADJ,KAEK,IAAIqF,QAAJ,EACD,OAAOM,MAAM,GAAC,KAAP,GAAaC,MAApB,CADC,KAEA,IAAIN,QAAJ,EACD,OAAOK,MAAM,GAAC,KAAP,GAAaC,MAAb,GAAoB,GAApB,GAAwBR,EAAE,CAACjkC,MAAH,CAAU,MAAV,CAA/B,CADC,KAGD,OAAOwkC,MAAM,GAAC,IAAP,GAAYR,EAAE,CAAChkC,MAAH,CAAU,IAAV,CAAZ,GAA4B,KAA5B,GAAkCykC,MAAlC,GAAyC,IAAzC,GAA8CR,EAAE,CAACjkC,MAAH,CAAU,IAAV,CAArD;AACP,KA7DM,CA+DP;;;AACA,QAAIkkC,QAAJ,EACI,OAAOF,EAAE,CAAChkC,MAAH,CAAU,OAAV,IAAmB,KAAnB,GAAyBikC,EAAE,CAACjkC,MAAH,CAAU,OAAV,CAAhC;AAEJ,WAAOgkC,EAAE,CAAChkC,MAAH,CAAU,QAAV,IAAoB,KAApB,GAA0BikC,EAAE,CAACjkC,MAAH,CAAU,QAAV,CAAjC;AACH;;AAED2jC,EAAAA,UAAU,GAAE;AACR,SAAKpuC,KAAL,GAAa,IAAb;AACA,SAAKswB,KAAL;AACH;;AAED+d,EAAAA,SAAS,CAACppC,CAAD,EAAG;AACR,QAAIkqC,MAAM,GAAGlqC,CAAC,CAACwB,MAAF,CAASq+B,SAAtB;AACA,QAAIhvB,MAAM,GAAG,EAAb;AACA,QAAIiyB,IAAI,GAAG,sBAAX;AACA,QAAIt9B,MAAM,GAAG,YAAb;;AAEA,YAAO0kC,MAAP;AACI,WAAK,OAAL;AACIr5B,QAAAA,MAAM,GAAG,CAACiyB,IAAI,CAACt9B,MAAL,CAAYA,MAAZ,CAAD,CAAT;AACA;;AAEJ,WAAK,WAAL;AACIs9B,QAAAA,IAAI,CAACvnB,QAAL,CAAc,GAAd,EAAmB,KAAnB;AACA1K,QAAAA,MAAM,GAAG,CAACiyB,IAAI,CAACt9B,MAAL,CAAYA,MAAZ,CAAD,CAAT;AACA;;AAEJ,WAAK,SAAL;AACIqL,QAAAA,MAAM,GAAG,CAACiyB,IAAI,CAACE,KAAL,GAAaznB,QAAb,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC/V,MAAnC,CAA0CA,MAA1C,CAAD,EAAoDs9B,IAAI,CAACt9B,MAAL,CAAYA,MAAZ,CAApD,CAAT;AACA;;AAEJ,WAAK,YAAL;AACIqL,QAAAA,MAAM,GAAG,CAACiyB,IAAI,CAACyG,OAAL,CAAa,OAAb,EAAsB/jC,MAAtB,CAA6BA,MAA7B,CAAD,EAAuCs9B,IAAI,CAACiH,KAAL,CAAW,OAAX,EAAoBvkC,MAApB,CAA2BA,MAA3B,CAAvC,CAAT;AACA;;AAEJ,WAAK,WAAL;AACIqL,QAAAA,MAAM,GAAG,CAACiyB,IAAI,CAACyG,OAAL,CAAa,MAAb,EAAqB/jC,MAArB,CAA4BA,MAA5B,CAAD,EAAsCs9B,IAAI,CAACiH,KAAL,CAAW,MAAX,EAAmBvkC,MAAnB,CAA0BA,MAA1B,CAAtC,CAAT;AACA;AApBR;;AAuBA,SAAKzK,KAAL,GAAa8V,MAAb;AACA,SAAKwa,KAAL;AACH;;AAzOoE,CAAzE;;eA6OejvB,cAAc,CAAC7B,GAAf,CAAmB,yBAAnB;;;;;;;;;;;AChPf;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,2BAAtB,EAAmD,cAAcE,sBAAd,CAAwB;AAEvE,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;KAAX;AAWlB;;AAEF3B,EAAAA,WAAW,CAACub,IAAI,GAAC,EAAN,EAAS;AAChB;AAEA,SAAKA,IAAL,GAAY3O,MAAM,CAAC8M,MAAP,CAAc;AACtB/M,MAAAA,KAAK,EAAE,KADe;AAEtBH,MAAAA,GAAG,EAAE,CAFiB;AAGtBC,MAAAA,GAAG,EAAE,GAHiB;AAItBC,MAAAA,IAAI,EAAE,CAJgB;AAKtB7J,MAAAA,KAAK,EAAE,MALe;AAMtBkJ,MAAAA,KAAK,EAAE,OANe;AAOtB9N,MAAAA,MAAM,EAAE,EAPc;AAQtBimC,MAAAA,MAAM,EAAE;AARc,KAAd,EAST3oB,IATS,CAAZ;AAUH;;AAED3Z,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;6BAEI,KAAKmtC,QAAS;;;;;2BAKhB,KAAKzzB,IAAL,CAAUxP,KAAM;sBACrB,KAAKuQ,QAAS;qBACf,KAAKf,IAAL,CAAU5O,KAAM;kBACnB,KAAK4O,IAAL,CAAU/O,GAAI;kBACd,KAAK+O,IAAL,CAAU9O,GAAI;mBACb,KAAK8O,IAAL,CAAU7O,IAAK;oBACd,KAAK6O,IAAL,CAAU1Y,KAAM;qBACf,KAAKjD,KAAM;;KAdnB;AAgBP;;AAEFovC,EAAAA,QAAQ,GAAE;AACN,SAAKpvC,KAAL,GAAa,IAAb;AAEA,SAAKQ,UAAL,CAAgBb,aAAhB,CAA8B,cAA9B,EAA8C8O,KAA9C;AACA,SAAK6hB,KAAL;AACH;;AAED5T,EAAAA,QAAQ,CAACzX,CAAD,EAAG;AACP,SAAKjF,KAAL,GAAaiF,CAAC,CAACwB,MAAF,CAASzG,KAAtB,CADO,CAEP;AACH;;AAED,MAAIA,KAAJ,GAAW;AAEP,QAAI,KAAKqvC,OAAL,KAAiB3/B,SAArB,EACI,KAAK2/B,OAAL,GAAe,KAAKhrB,MAAL,CAAYrkB,KAAZ,IAAqB,IAApC;AAEJ,WAAO,KAAKqvC,OAAZ;AACH;;AAED,MAAIrvC,KAAJ,CAAUoB,GAAV,EAAc;AACV;AACA,SAAKiuC,OAAL,GAAejuC,GAAf,CAFU,CAGV;AACH;;AAED,MAAI6B,KAAJ,GAAW;AACP,QAAI7B,GAAG,GAAG,KAAKpB,KAAf;AAEA,QAAIoB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,EAA5B,EAAiC,OAAO,GAAP;AAEjC,QAAIsJ,GAAG,GAAGxL,KAAK,CAACyO,OAAN,CAAcvM,GAAd,IAAsBA,GAAG,CAAC,CAAD,CAAH,IAAUA,GAAG,CAAC,CAAD,CAAb,GAAmBA,GAAG,CAAC,CAAD,CAAtB,GAA4BA,GAAG,CAACuJ,IAAJ,CAAS,GAAT,CAAlD,GAAmEvJ,GAA7E;AAEA,WAAO,KAAKua,IAAL,CAAUtd,MAAV,GAAiBqM,GAAjB,GAAqB,KAAKiR,IAAL,CAAU2oB,MAAtC;AACH;;AAlFsE,CAA3E;;eAsFejjC,cAAc,CAAC7B,GAAf,CAAmB,2BAAnB;;;;;;;;;;;ACxFf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAM8vC,WAAW,GAAG;AAChB,UAAQC,uBADQ;AAEhB,YAAUC,yBAFM,CAKpB;;AALoB,CAApB;AAMA,MAAMC,WAAW,GAAG,CAAC//B,SAAD,EAAY,IAAZ,EAAkB,EAAlB,CAApB;;AAEA,MAAMggC,aAAa,GAAGxN,KAAK,IAAI;AAC3B,MAAIvyB,IAAI,GAAG,EAAX;AACA,GAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,OAAxB,EAAiC,MAAjC,EAAyC,KAAzC,EAAgD7Q,OAAhD,CAAwDmJ,GAAG,IAAE;AACzD,QAAIi6B,KAAK,CAACoB,GAAN,KAAc5zB,SAAlB,EAA6B;AACzB,UAAIwyB,KAAK,CAACoB,GAAN,CAAUr7B,GAAV,CAAJ,EACI0H,IAAI,CAAC1H,GAAD,CAAJ,GAAYi6B,KAAK,CAAC1iC,GAAN,CAAUyI,GAAV,CAAZ;AACP,KAHD,MAGM,IAAIi6B,KAAK,CAACj6B,GAAD,CAAL,KAAeyH,SAAnB,EACFC,IAAI,CAAC1H,GAAD,CAAJ,GAAYi6B,KAAK,CAACj6B,GAAD,CAAjB;AACP,GAND;AAOA,SAAO0H,IAAP;AACH,CAVD;;AAYA,MAAMggC,eAAe,GAAG,CAACzN,KAAD,EAAQ9gC,GAAR,EAAa6G,GAAb,KAAqB;AACzC,MAAI/I,KAAK,CAACyO,OAAN,CAAcvM,GAAd,CAAJ,EACI,OAAOA,GAAG,CAACmG,QAAJ,CAAa26B,KAAK,CAAC1iC,GAAN,CAAUyI,GAAV,CAAb,CAAP,CADJ,KAGI,OAAO7G,GAAG,IAAI8gC,KAAK,CAAC1iC,GAAN,CAAUyI,GAAV,CAAd;AACP,CALD;;AAOe,MAAM2nC,OAAN,SAAsBld,GAAtB,CAA0B;AAErC,MAAImd,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK5nC,GAAf,GAAmB,UAA1B;AAAsC;;AAEvDwG,EAAAA,KAAK,GAAE;AACH,SAAKqhC,OAAL,GAAe,KAAf;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,SAAK3wC,GAAL,CAASilB,MAAM,IAAE;AACb0rB,MAAAA,SAAS,CAAC1rB,MAAM,CAACpc,GAAR,CAAT,GAAwBoc,MAAM,CAACzY,UAA/B;AACH,KAFD;AAGA,SAAK5L,KAAL,CAAW+vC,SAAX;AACH;;AAED/vC,EAAAA,KAAK,CAACiI,GAAD,EAAM7G,GAAN,EAAU;AACX;AACA,QAAI,KAAKiuC,OAAL,KAAiB3/B,SAArB,EAAgC;AAC5B,WAAK2/B,OAAL,GAAe,KAAKpnC,GAAL,IAAY4H,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACG,OAAb,CAAqB,KAAKigC,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACH,KAJU,CAMX;;;AACA,QAAIzuC,GAAG,KAAKsO,SAAR,IAAqB,OAAOzH,GAAP,IAAc,QAAvC,EAAiD;AAE7C,WAAK+lC,WAAL,GAAmB,IAAIlkC,IAAJ,GAAWC,OAAX,EAAnB,CAF6C,CAI7C;;AACA,UAAI+5B,OAAO,GAAG,OAAO77B,GAAP,IAAc,QAAd,GAAyBA,GAAzB,GAA+B;AAAC,SAACA,GAAD,GAAM7G;AAAP,OAA7C;AACA,UAAI4uC,SAAS,GAAG,EAAhB;;AAEA,WAAK,IAAIxX,CAAT,IAAcsL,OAAd,EAAsB;AAElB,YAAImM,UAAU,GAAG,KAAKZ,OAAL,CAAa7W,CAAb,CAAjB;AACA,YAAI0X,QAAQ,GAAGpM,OAAO,CAACtL,CAAD,CAAtB,CAHkB,CAKlB;;AACA,YAAI,CAAC,IAAD,EAAO9oB,SAAP,EAAkBnI,QAAlB,CAA2B2oC,QAA3B,KACAhxC,KAAK,CAACyO,OAAN,CAAcuiC,QAAd,KAA2B,CAAC,IAAD,EAAOxgC,SAAP,EAAkBnI,QAAlB,CAA2B2oC,QAAQ,CAAC,CAAD,CAAnC,CAD/B,EAEI,OAAO,KAAKb,OAAL,CAAa7W,CAAb,CAAP,CAFJ,KAII,KAAK6W,OAAL,CAAa7W,CAAb,IAAkB0X,QAAlB,CAVc,CAYlB;;AACA,YAAIrgC,IAAI,CAACI,SAAL,CAAe,KAAKo/B,OAAL,CAAa7W,CAAb,CAAf,KAAmC3oB,IAAI,CAACI,SAAL,CAAeggC,UAAf,CAAvC,EAAmE;AAC/DD,UAAAA,SAAS,CAACnpC,IAAV,CAAe2xB,CAAf;AACH,SAFD,MAEK;AACD,iBAAOsL,OAAO,CAACtL,CAAD,CAAd;AACH;AACJ;;AAED,UAAI,KAAKvwB,GAAT,EACIwH,YAAY,CAACS,OAAb,CAAqB,KAAK2/B,SAA1B,EAAqChgC,IAAI,CAACI,SAAL,CAAe,KAAKo/B,OAApB,CAArC;;AAEJ,UAAIW,SAAS,CAAClrC,MAAV,GAAmB,CAAvB,EAA0B;AACtB;AACAkrC,QAAAA,SAAS,CAAClxC,OAAV,CAAkB05B,CAAC,IAAE;AACjB,eAAKh5B,GAAL,CAASg5B,CAAT,EAAYoV,IAAZ,CAAiB,QAAjB,EAA2BxsC,GAA3B;AACH,SAFD;AAIA,YAAI,KAAK0uC,OAAT,EACI,KAAKK,aAAL,GAAqBrM,OAArB,CADJ,KAGI,KAAK8J,IAAL,CAAU,QAAV,EAAoB9J,OAApB;AACP,OAzC4C,CA2CjD;;AACC,KA5CD,MA4CK;AACD,aAAO77B,GAAG,GAAG,KAAKonC,OAAL,CAAapnC,GAAb,CAAH,GAAuB,KAAKonC,OAAtC;AACH;AACJ;;AAED,MAAIS,OAAJ,GAAa;AAAC,WAAO,KAAKM,OAAL,IAAgB,KAAvB;AAA8B;;AAC5C,MAAIN,OAAJ,CAAY1uC,GAAZ,EAAgB;AACZ,SAAKgvC,OAAL,GAAe3tC,OAAO,CAACrB,GAAD,CAAtB;;AAEA,QAAI,CAAC,KAAK0uC,OAAN,IAAiB,KAAKK,aAA1B,EAAyC;AACrC,WAAKvC,IAAL,CAAU,QAAV,EAAoB,KAAKuC,aAAzB;AACA,WAAKA,aAAL,GAAqB,IAArB;AACH;AACJ;;AAED,MAAIA,aAAJ,GAAmB;AAAE,WAAO,KAAKE,eAAZ;AAA6B;;AAClD,MAAIF,aAAJ,CAAkBrM,OAAlB,EAA0B;AACtB,QAAI,CAACA,OAAL,EAAc;AACV,aAAO,KAAKuM,eAAZ;AACA,WAAKzC,IAAL,CAAU,SAAV,EAAqB,KAArB;AACA;AACH;;AAED,SAAKyC,eAAL,GAAuBrjC,MAAM,CAAC8M,MAAP,CAAe,KAAKu2B,eAAL,IAAwB,EAAvC,EAA4CvM,OAA5C,CAAvB;AAEA,SAAK8J,IAAL,CAAU,SAAV,EAAqB5gC,MAAM,CAAC6I,IAAP,CAAY,KAAKw6B,eAAjB,EAAkCvrC,MAAvD;AACH;;AAEDwrC,EAAAA,GAAG,CAAC3C,OAAD,EAAS;AAER,QAAIA,OAAO,IAAI,KAAK4C,aAApB,EACI;AAEJ,SAAKA,aAAL,GAAqB5C,OAArB;AAEA,SAAK7uC,OAAL,CAAaulB,MAAM,IAAE,OAAOA,MAAM,CAACjf,MAAnC;AACA,SAAKorC,KAAL;;AAEA,SAAK,IAAIvoC,GAAT,IAAgB0lC,OAAhB,EAAyB;AAErB,UAAI1lC,GAAG,IAAI,QAAX,EAAqB;AACjB,aAAKwoC,aAAL,GAAqB9C,OAAO,CAAC1lC,GAAD,CAA5B;AACA;AACH;;AAED,UAAIoc,MAAM,GAAG,IAAIqsB,MAAJ,CAAWzoC,GAAX,EAAgB0lC,OAAO,CAAC1lC,GAAD,CAAvB,CAAb;AACAoc,MAAAA,MAAM,CAACjf,MAAP,GAAgB,IAAhB;AACA,WAAK2tB,GAAL,CAAS9qB,GAAT,EAAcoc,MAAd;AACH;;AAED,SAAK2pB,WAAL,GAAmB,IAAIlkC,IAAJ,GAAWC,OAAX,EAAnB;AACH;;AAED3K,EAAAA,GAAG,CAACuF,EAAD,EAAI;AACH,QAAIkD,IAAI,GAAG,EAAX;AACA,SAAK/I,OAAL,CAAa,CAAC2U,CAAD,EAAIxL,GAAJ,KAAUJ,IAAI,CAAChB,IAAL,CAAUlC,EAAE,CAAC8O,CAAD,EAAIxL,GAAJ,CAAZ,CAAvB;AACA,WAAOJ,IAAP;AACH;;AAED,MAAI4oC,aAAJ,CAAkB90B,IAAlB,EAAuB;AACnB,QAAI,OAAOA,IAAP,IAAe,QAAnB,EACI,KAAKg1B,eAAL,GAAuBh1B,IAAvB;AACP;;AAED,MAAI80B,aAAJ,GAAmB;AACf,WAAOzjC,MAAM,CAAC8M,MAAP,CAAc;AACjBnK,MAAAA,IAAI,EAAE+/B,aADW;AAEjBhW,MAAAA,cAAc,EAAE,IAFC;AAGjBnB,MAAAA,kBAAkB,EAAE,CAHH;AAIjBR,MAAAA,SAAS,EAAE,GAJM;AAKjBj1B,MAAAA,QAAQ,EAAE,CALO;AAMjBg1B,MAAAA,QAAQ,EAAE,GANO;AAOjBzzB,MAAAA,WAAW,EAAE,QAPI;AAQjBknC,MAAAA,KAAK,EAAE;AARU,KAAd,EASJ,KAAKoF,eAAL,IAAsB,EATlB,CAAP;AAUH;;AAED,MAAIC,UAAJ,GAAgB;AACZ,WAAO,OAAO,KAAKH,aAAL,CAAmB9gC,IAA1B,IAAkC,UAAzC;AACH;;AAEDs+B,EAAAA,YAAY,CAACt+B,IAAD,EAAM;AACd,WAAO,IAAIwN,OAAJ,CAAYC,OAAO,IAAE;AAExB,UAAIqzB,aAAa,GAAGzjC,MAAM,CAAC8M,MAAP,CAAc,EAAd,EAAkB,KAAK22B,aAAvB,CAApB;AACA,UAAI56B,IAAI,GAAG46B,aAAa,CAAC56B,IAAzB;AAEAlG,MAAAA,IAAI,CAAC7Q,OAAL,CAAaqzB,CAAC,IAAE;AACZA,QAAAA,CAAC,CAAC0e,aAAF,GAAkB,EAAlB;AACH,OAFD;AAIA,UAAI,CAAC,KAAKxS,IAAN,IACD,CAACoS,aAAa,CAAC9gC,IADd,IAED,KAAK0uB,IAAL,CAAUv5B,MAAV,GAAmB2rC,aAAa,CAAClY,kBAFpC,EAGI,OAAOnb,OAAO,CAACzN,IAAD,CAAd;AAEJA,MAAAA,IAAI,CAAC7Q,OAAL,CAAaqzB,CAAC,IAAE;AACZA,QAAAA,CAAC,CAAC2e,WAAF,GAAcL,aAAa,CAAC9gC,IAAd,CAAmBwiB,CAAnB,CAAd,CADY,CAGZ;;AACA,YAAI,CAACtc,IAAL,EACIA,IAAI,GAAG7I,MAAM,CAAC6I,IAAP,CAAYsc,CAAC,CAAC2e,WAAd,CAAP;AACP,OAND,EAdwB,CAsBxB;AACA;;AACA,UAAIj7B,IAAJ,EACA46B,aAAa,CAAC56B,IAAd,GAAqBA,IAAI,CAACzW,GAAL,CAAS6I,GAAG,IAAE;AAC/B,YAAI,OAAOA,GAAP,IAAc,QAAlB,EACI,OAAO,iBAAeA,GAAtB;AAEJ,YAAI8oC,MAAM,GAAG/jC,MAAM,CAAC8M,MAAP,CAAc,EAAd,EAAkB7R,GAAlB,CAAb;AACA8oC,QAAAA,MAAM,CAACtxC,IAAP,GAAc,iBAAesxC,MAAM,CAACtxC,IAApC;AACA,eAAOsxC,MAAP;AACH,OAPoB,CAArB;AASA,UAAIC,IAAI,GAAG,IAAIla,aAAJ,CAASnnB,IAAT,EAAe8gC,aAAf,CAAX;AACA9gC,MAAAA,IAAI,GAAGqhC,IAAI,CAACrjB,MAAL,CAAY,KAAK0Q,IAAjB,CAAP,CAnCwB,CAqCxB;;AACA,UAAIoS,aAAa,CAAC/W,cAAlB,EACI/pB,IAAI,GAAGA,IAAI,CAACvQ,GAAL,CAAS+3B,CAAC,IAAE;AACfA,QAAAA,CAAC,CAACpkB,IAAF,CAAO89B,aAAP,GAAuB,EAAvB;AACA1Z,QAAAA,CAAC,CAAC5gB,OAAF,CAAUzX,OAAV,CAAkBqzB,CAAC,IAAE;AACjBgF,UAAAA,CAAC,CAACpkB,IAAF,CAAO89B,aAAP,CAAqB1e,CAAC,CAAClqB,GAAF,CAAM3I,OAAN,CAAc,cAAd,EAA8B,EAA9B,CAArB,IAA0D6yB,CAAC,CAACnyB,KAA5D;AACH,SAFD;AAGA,eAAOm3B,CAAC,CAACpkB,IAAT;AACH,OANM,CAAP;AAQJqK,MAAAA,OAAO,CAACzN,IAAD,CAAP;AACH,KAhDM,CAAP;AAiDH;;AAED,QAAM0U,MAAN,CAAa1U,IAAb,EAAkB;AACd,QAAIg+B,OAAO,GAAG,KAAKvuC,GAAL,CAASilB,MAAM,IAAEA,MAAjB,CAAd,CADc,CAGd;;AACA,WAAOspB,OAAO,CAAC3f,MAAR,CAAe,CAACgP,OAAD,EAAU3Y,MAAV,KAAqB;AACvC,aAAO2Y,OAAO,CAAC10B,IAAR,CAAaqH,IAAI,IAAE0U,MAAM,CAAC4sB,UAAP,CAAkBthC,IAAlB,CAAnB,CAAP;AACH,KAFM,EAEJwN,OAAO,CAACC,OAAR,CAAgBzN,IAAhB,CAFI,CAAP;AAIH;;AAEDuhC,EAAAA,kBAAkB,CAACpN,OAAD,EAAS;AACvB,SAAK,IAAI77B,GAAT,IAAgB67B,OAAhB,EAAyB;AACrB,UAAI,KAAKtkC,GAAL,CAASyI,GAAT,EAAckpC,IAAlB,EACI,OAAO,IAAP;AACP;;AACD,WAAO,KAAP;AACH;;AArNoC;AAyNzC;;;;;;;AAGO,MAAMT,MAAN,CAAa;AAEhBtwC,EAAAA,WAAW,CAAC6H,GAAD,EAAM82B,KAAN,EAAY;AACnB,SAAK92B,GAAL,GAAWA,GAAX;AACA,SAAK82B,KAAL,GAAaA,KAAb;AACH;;AAED,MAAIjpB,MAAJ,GAAY;AACR;AACA,QAAIA,MAAM,GAAG,KAAKipB,KAAL,CAAWjpB,MAAxB;AACAA,IAAAA,MAAM,GAAG,OAAOA,MAAP,IAAiB,UAAjB,GAA8BA,MAAM,CAACa,IAAP,CAAY,KAAKvR,MAAL,CAAYg1B,IAAxB,CAA9B,GAA8DtkB,MAAvE;AAEAA,IAAAA,MAAM,GAAGA,MAAM,CAAC1W,GAAP,CAAWqU,CAAC,IAAE;AACnB,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwB,CAAC,CAAC,SAAD,EAAYlM,QAAZ,CAAqBkM,CAArB,CAA7B,EACIA,CAAC,GAAG;AAACxQ,QAAAA,KAAK,EAAEwQ,CAAR;AAAWrS,QAAAA,GAAG,EAAEqS,CAAhB,CAER;;AAFQ,OAAJ;;AAGJ,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwBg8B,WAAW,CAACloC,QAAZ,CAAqBkM,CAAC,CAACrS,GAAvB,CAA5B,EAAyD;AACrDqS,QAAAA,CAAC,CAACrS,GAAF,GAAQ,IAAR;AACAqS,QAAAA,CAAC,CAACorB,SAAF,GAAc,IAAd;AACH;;AAED,aAAOprB,CAAP;AACH,KAXQ,CAAT;AAaA,WAAOqC,MAAP;AACH;;AAED,MAAI7S,KAAJ,GAAW;AACP,WAAO,KAAK87B,KAAL,CAAW97B,KAAX,IAAoB,uBAAS,KAAKgF,GAAd,CAA3B;AACH;;AAED,MAAI1F,IAAJ,GAAU;AACN,WAAO,KAAKw8B,KAAL,CAAWx8B,IAAX,IAAmB,IAA1B;AACH;;AAED,MAAI6uC,QAAJ,GAAc;AACV,QAAI,CAAC,KAAKrS,KAAL,CAAWqS,QAAZ,IAAwB,KAAKC,YAA7B,IAA6C,KAAKC,UAAL,CAAgBF,QAAjE,EACI,OAAO,KAAKE,UAAL,CAAgBF,QAAvB;AAEJ,WAAO,KAAKrS,KAAL,CAAWqS,QAAX,IAAuBzB,eAA9B;AACH,GAzCe,CA2ChB;;;AACA,MAAIwB,IAAJ,GAAU;AACN,WAAO,KAAKpS,KAAL,CAAWwS,EAAX,KAAkB,IAAzB;AACH;;AAED,MAAIF,YAAJ,GAAkB;AACd,WAAO,CAAC,CAAC,KAAKtS,KAAL,CAAWvO,IAApB;AACH;;AAED,MAAIsQ,QAAJ,GAAc;AACV,QAAI1/B,GAAG,GAAG,KAAKowC,OAAL,GAAe,KAAKxxC,KAAL,IAAY,KAAKA,KAAL,CAAW,CAAX,CAA3B,GAA2C,KAAKA,KAA1D;AACA,WAAO,CAACyvC,WAAW,CAACloC,QAAZ,CAAqBnG,GAArB,CAAR;AACH;;AAED,MAAIowC,OAAJ,GAAa;AACT,WAAO,KAAKzS,KAAL,CAAW0S,KAAX,KAAqB,IAA5B;AACH;;AAED,MAAIzxC,KAAJ,GAAW;AACP,WAAO,KAAKoF,MAAL,CAAYpF,KAAZ,CAAkB,KAAKiI,GAAvB,CAAP;AACH;;AAED,MAAIjI,KAAJ,CAAUoB,GAAV,EAAc;AACV,SAAKgE,MAAL,CAAYpF,KAAZ,CAAkB,KAAKiI,GAAvB,EAA4B7G,GAA5B;AACH;;AAED,MAAIwK,UAAJ,GAAgB;AACZ,QAAI,KAAKmzB,KAAL,CAAWnzB,UAAf,EAA4B,OAAO,KAAKmzB,KAAL,CAAWnzB,UAAlB;AAE5B,QAAI,KAAKylC,YAAT,EACI,OAAO,KAAKC,UAAL,CAAgB1lC,UAAhB,GAA6B,KAAK0lC,UAAL,CAAgB1lC,UAA7C,GAA0D,IAAjE;AAEJ,QAAIu1B,KAAK,GAAG,KAAKrrB,MAAL,CAAY,CAAZ,CAAZ;AACA,WAAOqrB,KAAK,GAAGA,KAAK,CAAC//B,GAAT,GAAe,IAA3B;AACH;;AAED,MAAIswC,UAAJ,GAAgB;AACZ,QAAItwC,GAAG,GAAG,KAAKpB,KAAf;;AAEA,QAAI,KAAKqxC,YAAT,EAAuB;AACnB,UAAI7gB,IAAI,GAAG,KAAK8gB,UAAhB;AACA,aAAO9gB,IAAI,GAAGA,IAAI,CAACvtB,KAAR,GAAgB,aAA3B;AACH;;AAED,QAAI0uC,UAAU,GAAG,KAAK77B,MAAL,CAAYuO,MAAZ,CAAmB5Q,CAAC,IAAE;AACnC,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwBA,CAAC,CAACia,OAA1B,IAAqCja,CAAC,CAACsgB,IAA3C,EAAkD,OAAO,KAAP,CADf,CAEnC;;AACA,aAAO70B,KAAK,CAACyO,OAAN,CAAcvM,GAAd,IAAqBA,GAAG,CAACmG,QAAJ,CAAakM,CAAC,CAACrS,GAAf,CAArB,GAA2CqS,CAAC,CAACrS,GAAF,IAAOA,GAAzD;AACH,KAJgB,CAAjB;AAKA,WAAOuwC,UAAU,GAAGA,UAAU,CAACvyC,GAAX,CAAekW,CAAC,IAAEA,CAAC,CAACrS,KAApB,EAA2B0H,IAA3B,CAAgC,IAAhC,CAAH,GAA2CvJ,GAA5D;AACH;;AAED,QAAMwwC,QAAN,CAAe7yC,EAAf,EAAkB;AAEd,QAAI,KAAKsyC,YAAT,EACI,OAAO,KAAKQ,cAAL,CAAoB9yC,EAApB,CAAP;AAEJ,QAAIk1B,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,KAAKpe,MAAd,EAAsB;AACvCme,MAAAA,QAAQ,EAAE,KAAKj0B,KADwB;AAEvCoE,MAAAA,QAAQ,EAAE,KAAKotC;AAFwB,KAAtB,EAGlBjhB,OAHkB,CAGVxxB,EAHU,EAGN;AACX8wB,MAAAA,SAAS,EAAE,KAAKkP,KAAL,CAAWlP,SAAX,IAAwB;AADxB,KAHM,CAArB;AAOA,QAAI7mB,MAAM,GAAG,KAAKhJ,KAAlB;AAEA,QAAIi0B,QAAQ,KAAK,KAAb,IAAsBA,QAAQ,CAACnvB,MAAT,IAAmB,CAA7C,EAAkD,OAAlD,CACI;AADJ,SAEK,IAAI5F,KAAK,CAACyO,OAAN,CAAcsmB,QAAd,CAAJ,EACD,KAAKj0B,KAAL,GAAai0B,QAAQ,CAAC70B,GAAT,CAAasO,CAAC,IAAEA,CAAC,CAACtM,GAAlB,CAAb,CADC,KAGD,KAAKpB,KAAL,GAAai0B,QAAQ,CAAC7yB,GAAtB;AACP;;AAED,MAAIkwC,UAAJ,GAAgB;AACZ,QAAIQ,QAAQ,GAAG,KAAK/S,KAAL,CAAWvO,IAA1B;AACA,QAAIS,IAAI,GAAG,IAAX;;AAEA,QAAI,CAAC,KAAK8gB,WAAV,EAAuB;AAEnB,UAAIzC,WAAW,CAACwC,QAAD,CAAf,EAA2B;AACvB7gB,QAAAA,IAAI,GAAGqe,WAAW,CAACwC,QAAD,CAAlB;AACH,OAFD,MAEM,IAAI,OAAOA,QAAP,IAAmB,QAAvB,EAAkC;AACpC7gB,QAAAA,IAAI,GAAG5vB,cAAc,CAAC7B,GAAf,CAAmBsyC,QAAnB,CAAP;AACH,OAFK,MAEA,IAAI,OAAOA,QAAP,IAAmB3xC,WAAvB,EAAoC;AACtC8wB,QAAAA,IAAI,GAAG6gB,QAAP;AACH;;AAED,UAAI7gB,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACzX,SAAL,CAAe8W,KAAf,GAAuB,YAAU;AAC7B,eAAKC,OAAL,CAAaE,MAAb,GAD6B,CACP;;AACzB,SAFD;;AAGA,aAAKshB,WAAL,GAAmB,IAAI9gB,IAAJ,CAAU,KAAK8N,KAAL,CAAWiT,QAAX,IAAqB,EAA/B,CAAnB;AACA,aAAKD,WAAL,CAAiB1tB,MAAjB,GAA0B,IAA1B;AACH;AACJ;;AAED,WAAO,KAAK0tB,WAAZ;AACH;;AAED,QAAMF,cAAN,CAAqB9yC,EAArB,EAAwB;AAEpB,QAAI,CAAC,KAAKuyC,UAAV,EACI,OAAOnM,gBAAOjf,IAAP,CAAY;AAACkf,MAAAA,GAAG,EAAE,GAAE,KAAKn9B,GAAI;AAAjB,KAAZ,EAAmDsoB,OAAnD,CAA2DxxB,EAA3D,CAAP;;AAEJ,QAAIgxB,OAAO,GAAG3c,CAAC,IAAE;AACb,WAAKpT,KAAL,GAAa,KAAKsxC,UAAL,CAAgBtxC,KAA7B;AACH,KAFD;;AAIA,QAAI8wB,gBAAJ,CAAY/xB,EAAZ,EAAgB,KAAKuyC,UAArB,EAAiC;AAC7BvhB,MAAAA,OAAO,EAAEA;AADoB,KAAjC;AAGH;;AAEDkhB,EAAAA,UAAU,CAACthC,IAAD,EAAM;AACZ,WAAO,IAAIwN,OAAJ,CAAYC,OAAO,IAAE;AAExB;AACA,UAAI,CAAC,KAAK0jB,QAAV,EAAqB,OAAO1jB,OAAO,CAACzN,IAAD,CAAd;AACrB,UAAI,CAAC,KAAKyhC,QAAV,EAAqB,OAAOh0B,OAAO,CAACzN,IAAD,CAAd;AACrB,UAAI,KAAKwhC,IAAT,EAAgB,OAAO/zB,OAAO,CAACzN,IAAD,CAAd;AAEhB,UAAIvO,GAAG,GAAG,KAAKpB,KAAf;AACA2P,MAAAA,IAAI,GAAGA,IAAI,CAAC0U,MAAL,CAAY8N,CAAC,IAAE,KAAKif,QAAL,CAAcz6B,IAAd,CAAmB,KAAKvR,MAAL,CAAYg1B,IAA/B,EAAqCjI,CAArC,EAAwC/wB,GAAxC,EAA6C,KAAK6G,GAAlD,CAAf,CAAP;AACAmV,MAAAA,OAAO,CAACzN,IAAD,CAAP;AACH,KAVM,CAAP;AAWH;;AAzKe;;;AA6KpB,+BAAQigC,OAAO,CAACp2B,SAAhB;AACA,+BAAQk3B,MAAM,CAACl3B,SAAf;;;;;;;;;AC9aA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMy4B,KAAN,SAAoBvf,GAApB,CAAwB;AAEnC,MAAImd,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK5nC,GAAf,GAAmB,OAA1B;AAAkC;;AAEnD,MAAIjI,KAAJ,GAAW;AACP;AACH,QAAI,KAAKqvC,OAAL,KAAiB3/B,SAArB,EAAgC;AAClC,WAAK2/B,OAAL,GAAe,KAAKpnC,GAAL,IAAY4H,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACG,OAAb,CAAqB,KAAKigC,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACM;;AAED,WAAO,KAAKR,OAAZ;AACH;;AAED,MAAIrvC,KAAJ,CAAUoB,GAAV,EAAc;AAEV,QAAI4uC,SAAS,GAAGngC,IAAI,CAACI,SAAL,CAAe,KAAKo/B,OAApB,KAAgCx/B,IAAI,CAACI,SAAL,CAAe7O,GAAf,CAAhD;AAEA,SAAKiuC,OAAL,GAAejuC,GAAf;;AAEA,QAAI,KAAK6G,GAAT,EAAc;AACV,UAAI7G,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAIsO,SAA1B,EACID,YAAY,CAACO,UAAb,CAAwB,KAAK6/B,SAA7B,EADJ,KAGIpgC,YAAY,CAACS,OAAb,CAAqB,KAAK2/B,SAA1B,EAAqChgC,IAAI,CAACI,SAAL,CAAe7O,GAAf,CAArC;AACP;;AAED,SAAKtC,OAAL,CAAaS,IAAI,IAAEA,IAAI,CAAC00B,QAAL,GAAc,KAAKj0B,KAAL,CAAWT,IAAI,CAAC0I,GAAhB,CAAjC;AAEA,QAAI+nC,SAAJ,EACI,KAAKpC,IAAL,CAAU,QAAV,EAAoBxsC,GAApB;AACP;;AAEDkvC,EAAAA,GAAG,CAACpC,KAAD,EAAO;AAEN,QAAIA,KAAK,IAAI,KAAKgE,WAAlB,EACI;AAEJ,SAAKA,WAAL,GAAmBhE,KAAnB;AAEA,SAAKsC,KAAL;;AAEA,SAAK,IAAIvoC,GAAT,IAAgBimC,KAAhB,EAAuB;AACnB,UAAI3uC,IAAI,GAAG,IAAI4yC,IAAJ,CAASlqC,GAAT,EAAcimC,KAAK,CAACjmC,GAAD,CAAnB,CAAX;AACA1I,MAAAA,IAAI,CAAC00B,QAAL,GAAgB,KAAKj0B,KAAL,CAAWiI,GAAX,CAAhB;AACA,WAAK8qB,GAAL,CAAS9qB,GAAT,EAAc1I,IAAd;AACH;AACJ;;AAEDH,EAAAA,GAAG,CAACuF,EAAD,EAAI;AACH,QAAIkD,IAAI,GAAG,EAAX;AACA,SAAK/I,OAAL,CAAa,CAAC2U,CAAD,EAAIxL,GAAJ,KAAUJ,IAAI,CAAChB,IAAL,CAAUlC,EAAE,CAAC8O,CAAD,EAAIxL,GAAJ,CAAZ,CAAvB;AACA,WAAOJ,IAAP;AACH;;AAEJ,MAAI5E,KAAJ,GAAW;AACJ,QAAIuQ,MAAM,GAAG,KAAKA,MAAlB;AACA,WAAOA,MAAM,CAAC1O,MAAP,IAAiB,CAAjB,GAAqB,MAArB,GAA8B0O,MAAM,CAACpU,GAAP,CAAWG,IAAI,IAAEA,IAAI,CAAC0D,KAAtB,EAA6B0H,IAA7B,CAAkC,IAAlC,CAArC;AACN;;AAED,MAAI6I,MAAJ,GAAY;AACL,QAAIA,MAAM,GAAG,EAAb;AACAxG,IAAAA,MAAM,CAAC6I,IAAP,CAAY,KAAK7V,KAAjB,EAAwBlB,OAAxB,CAAgCmJ,GAAG,IAAE;AACjC,UAAI,KAAKzI,GAAL,CAASyI,GAAT,CAAJ,EACIuL,MAAM,CAAC3M,IAAP,CAAa,KAAKrH,GAAL,CAASyI,GAAT,CAAb;AACP,KAHD;AAIA,WAAOuL,MAAP;AACN;;AAEE,QAAMo+B,QAAN,CAAe7yC,EAAf,EAAkB;AAEd,QAAIiK,MAAM,GAAG,KAAKhJ,KAAlB;AAEA,QAAI2zB,IAAI,GAAG,KAAKv0B,GAAL,CAASG,IAAI,IAAE;AACtB,aAAO;AACH0D,QAAAA,KAAK,EAAE1D,IAAI,CAAC0D,KADT;AAEH7B,QAAAA,GAAG,EAAE7B,IAAI,CAAC0I,GAFP;AAGH2rB,QAAAA,WAAW,EAAEr0B,IAAI,CAACq0B,WAHf;AAIHwe,QAAAA,IAAI,EAAE7yC,IAAI,CAAC8yC,MAJR;AAKHrT,QAAAA,MAAM,EAAE,CAAC,qBAAD;AALL,OAAP;AAOH,KARU,CAAX;AAUArL,IAAAA,IAAI,CAAC9sB,IAAL,CAAU;AAACktB,MAAAA,IAAI,EAAE9xB,gBAAK;AAAZ,KAAV;AAEA,QAAIgyB,QAAQ,GAAGvkB,SAAf;AACAikB,IAAAA,IAAI,GAAG,IAAIO,aAAJ,CAASP,IAAT,EAAe;AAClBjE,MAAAA,SAAS,EAAE,kBADO;AAElBtrB,MAAAA,QAAQ,EAAE,IAFQ;AAG3B6vB,MAAAA,QAAQ,EAAEjnB,MAAM,CAAC6I,IAAP,CAAY7M,MAAZ;AAHiB,KAAf,CAAP;AAMAirB,IAAAA,QAAQ,GAAG,MAAMN,IAAI,CAACpD,OAAL,CAAaxxB,EAAb,EAAiB;AAACuhC,MAAAA,eAAe,EAAC;AAAjB,KAAjB,CAAjB;AAEA,QAAIrM,QAAQ,KAAK,KAAjB,EAAyB,OAzBX,CA2Bd;;AACA,QAAI7yB,GAAG,GAAG,EAAV;AACA6yB,IAAAA,QAAQ,CAACn1B,OAAT,CAAiB4O,CAAC,IAAEtM,GAAG,CAACsM,CAAC,CAACtM,GAAH,CAAH,GAAW;AAACgxC,MAAAA,IAAI,EAAC1kC,CAAC,CAAC0kC;AAAR,KAA/B;AACN,SAAKpyC,KAAL,GAAaoB,GAAb;AACG;;AAEJ7B,EAAAA,IAAI,CAACoQ,IAAD,EAAM;AACH;AACN,QAAIu+B,KAAK,GAAG,KAAK16B,MAAjB;AAEA,WAAO,IAAI2J,OAAJ,CAAYC,OAAO,IAAE;AAE3B,UAAI8wB,KAAK,CAACppC,MAAN,IAAgB,CAApB,EAAwB,OAAOsY,OAAO,CAACzN,IAAD,CAAd;AAEfA,MAAAA,IAAI,CAACpQ,IAAL,CAAU,UAAUkvC,EAAV,EAAcC,EAAd,EAAkB;AAExB,aAAK,IAAInvC,IAAT,IAAiB2uC,KAAjB,EAAwB;AAEpB,cAAI9sC,GAAG,GAAG7B,IAAI,CAAC+yC,WAAL,CAAiB7D,EAAjB,EAAqBC,EAArB,CAAV,CAFoB,CAIpB;;AACA,cAAIttC,GAAG,KAAK,KAAZ,EACI,OAAOA,GAAP;AACP;AAEJ,OAXD;AAaTgc,MAAAA,OAAO,CAACzN,IAAD,CAAP;AACA,KAlBM,CAAP;AAmBA;;AA5HqC;;;AAiIvC,+BAAQsiC,KAAK,CAACz4B,SAAd;;AAGA,MAAM24B,IAAN,CAAW;AAEP/xC,EAAAA,WAAW,CAAC6H,GAAD,EAAM82B,KAAN,EAAY;AACnB,SAAK92B,GAAL,GAAWA,GAAX;AAEA,QAAI,OAAO82B,KAAP,IAAgB,UAApB,EACIA,KAAK,GAAG;AAACwT,MAAAA,MAAM,EAAExT;AAAT,KAAR;AAEJ,SAAKA,KAAL,GAAaA,KAAb;AACH;;AAED,MAAIwT,MAAJ,GAAY;AACR,WAAO,KAAKxT,KAAL,CAAWwT,MAAX,KAAsBpgB,CAAC,IAAEA,CAAC,CAAC3yB,GAAF,CAAM,KAAKyI,GAAX,CAAzB,CAAP;AACH;;AAED,MAAIhF,KAAJ,GAAW;AACP,WAAO,KAAK87B,KAAL,CAAW97B,KAAX,IAAoB,uBAAS,KAAKgF,GAAd,CAA3B;AACH;;AAED,MAAI2rB,WAAJ,GAAiB;AACb,WAAO,KAAKmL,KAAL,CAAWnL,WAAX,IAA0B,IAAjC;AACH;;AAED,MAAIye,MAAJ,GAAY;AACR,WAAO,KAAKpe,QAAL,GAAgB,KAAKA,QAAL,CAAcme,IAA9B,GAAsC,KAAKrT,KAAL,CAAWqT,IAAX,IAAmB,KAAhE;AACH;;AAEDE,EAAAA,WAAW,CAAC7D,EAAD,EAAKC,EAAL,EAAQ;AACf,QAAI8D,EAAE,GAAG,KAAKD,MAAL,CAAY9D,EAAZ,CAAT;AACA,QAAIgE,EAAE,GAAG,KAAKF,MAAL,CAAY7D,EAAZ,CAAT;AAEA,QAAI8D,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAC,CAAf,GAAmB,CAA1B;AACd,QAAIG,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAd,GAAkB,CAAC,CAA1B;AAEd,WAAO,KAAP;AACH;;AAnCM;;;;;;;;;AC1IX;;AAEAhxC,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAwB;AAE7D,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA4BlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;2CACkB,KAAKywC,QAAS;;;;;sBAKnC,KAAKxE,KAAL,CAAW16B,MAAX,CAAkBpU,GAAlB,CAAsBG,IAAI,IAAE0C,gBAAK;sCACjB1C,IAAK;4CACCA,IAAI,CAAC8yC,MAAL,GAAY,eAAZ,GAA4B,aAAc,eAAc9yC,IAAI,CAAC0D,KAAM;;qBAFzF,CAIC;;;;;KAVV;AAeP;;AAEFC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKwL,MAAL,GAAc,KAAKA,MAAL,CAAY9J,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKspC,KAAL,CAAWhL,EAAX,CAAc,QAAd,EAAwB,KAAKx0B,MAA7B;AACH;;AAEDnL,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK2qC,KAAL,CAAWlL,GAAX,CAAe,QAAf,EAAyB,KAAKt0B,MAA9B;AACH,GA1D4D,CA4D7D;AACA;AACA;AACA;;;AAEAgkC,EAAAA,QAAQ,CAACztC,CAAD,EAAG;AACP,SAAKipC,KAAL,CAAW0D,QAAX,CAAoB3sC,CAAC,CAAC6O,aAAtB;AACH;;AAnE4D,CAAjE;;eAuEezS,cAAc,CAAC7B,GAAf,CAAmB,iBAAnB;;;;;;ACzEf;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,qBAAtB,EAA6C,cAAcE,sBAAd,CAAwB;AAEjE,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;KAAX;AAelB;;AAEFY,EAAAA,YAAY,GAAE;AACV,SAAK4I,SAAL,CAAelC,GAAf,CAAmB,aAAnB;AACH;;AAEDrH,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;6BACI,KAAK8Q,IAAL,CAAUq/B,IAAV,GAAe,eAAf,GAA+B,aAAc,YAAW,KAAKrV,OAAQ;KADrF;AAEP;;AAEFA,EAAAA,OAAO,CAAC93B,CAAD,EAAG;AACNA,IAAAA,CAAC,CAACC,eAAF;AACA,SAAK6N,IAAL,CAAUq/B,IAAV,GAAiB,CAAC,KAAKr/B,IAAL,CAAUq/B,IAA5B;AACA,SAAK1jC,MAAL;AACH;;AA/BgE,CAArE;;;;;;;;;ACFA;;AAEArN,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAmClB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;8BACK,KAAKoiB,MAAL,CAAYyc,QAAS,WAAU,KAAK8Q,QAAS;;8BAE7C,KAAKvtB,MAAL,CAAYphB,KAAM;;sBAE1B,KAAKohB,MAAL,CAAY9hB,IAAZ,GAAiBN,gBAAK,iBAAgB,KAAKoiB,MAAL,CAAY9hB,IAAK,aAAvD,GAAoE,EAAG;sBACvE,KAAK8hB,MAAL,CAAYqtB,UAAW;;;;KANhC;AAUP;;AAEFxuC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKwL,MAAL,GAAc,KAAKA,MAAL,CAAY9J,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKyf,MAAL,CAAY6e,EAAZ,CAAe,QAAf,EAAyB,KAAKx0B,MAA9B,EAHe,CAIf;AACH;;AAEDnL,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK8gB,MAAL,CAAY2e,GAAZ,CAAgB,QAAhB,EAA0B,KAAKt0B,MAA/B,EAFkB,CAGlB;AACH;;AAEDkjC,EAAAA,QAAQ,CAAC3sC,CAAD,EAAG;AACP,SAAKof,MAAL,CAAYutB,QAAZ,CAAqB3sC,CAAC,CAAC6O,aAAvB;AACH;;AAlE8D,CAAnE;;eAsEezS,cAAc,CAAC7B,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACxEf;;AACA;;AACA;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B4C,MAAAA,WAAW,EAAE;AAAC1C,QAAAA,IAAI,EAAEW;AAAP;AADc,KAAP;AAEtB;;AAEFlC,EAAAA,WAAW,GAAE;AACT;AACA,SAAKiE,WAAL,GAAmB,QAAnB;AACH;;AAED,aAAWvC,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAqClB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;uCAEc,KAAKoC,WAAY;6BAC3B,KAAKy5B,KAAM;;KAH3B;AAKP;;AAEFA,EAAAA,KAAK,GAAE;AACH,SAAKt9B,UAAL,CAAgBb,aAAhB,CAA8B,cAA9B,EAA8Cm+B,KAA9C;AACH;;AAED,MAAI99B,KAAJ,GAAW;AACP,SAAK2yC,SAAL,GAAiB,KAAKA,SAAL,IAAkB,KAAKnyC,UAAL,CAAgBb,aAAhB,CAA8B,YAA9B,CAAnC;AACA,WAAO,KAAKgzC,SAAL,CAAehI,YAAtB;AACH;;AAhE8D,CAAnE;;eAoEetpC,cAAc,CAAC7B,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACxEf;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC,cAAcE,sBAAd,CAAwB;AAE5D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3BmxC,MAAAA,KAAK,EAAE;AAACjxC,QAAAA,IAAI,EAAEC;AAAP,OADoB;AAE3BkuC,MAAAA,OAAO,EAAE;AAACnuC,QAAAA,IAAI,EAAEC;AAAP;AAFkB,KAAP;AAGtB;;AAEFxB,EAAAA,WAAW,GAAE;AACT;AACA,SAAKwyC,KAAL,GAAa,CAAb;AAEA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBjuC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKkuC,cAAL,GAAsB,KAAKA,cAAL,CAAoBluC,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAED,aAAW9C,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAkElB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;6BAGI,KAAK2wC,KAAM;;UAE9B,CAAC,KAAK1E,KAAN,GAAY,EAAZ,GAAejsC,gBAAK;sCACQ,KAAKisC,KAAM;SACvC;;UAEA,CAAC,KAAKP,OAAN,GAAc,EAAd,GAAiB1rC,gBAAK;;;;;;;;2CAQW,CAAC,KAAK6tC,OAAQ;yBAChC,KAAKiD,kBAAmB,IAAG,KAAKjD,OAAQ;;cAEnD,KAAKnC,OAAL,CAAavuC,GAAb,CAAiBilB,MAAM,IAAEpiB,gBAAK;6CACCoiB,MAAM,CAACyc,QAAS,YAAWzc,MAAO;aADjE,CAEC;;sFAEuE,KAAK2uB,YAAa;;;SAG9F;;;;cAII,CAAC,KAAKrF,OAAN,IAAe,CAAC,KAAKA,OAAL,CAAaiD,UAA7B,GAAwC,EAAxC,GAA2C3uC,gBAAK;0CACpB,KAAKgxC,SAAU,gBAAe,KAAKtF,OAAL,CAAa8C,aAAb,CAA2BpsC,WAAY;aACjG;;;;;;KAjCD;AAuCP;;AAEF0uC,EAAAA,kBAAkB,GAAE;AAChB,SAAKpF,OAAL,CAAamC,OAAb,GAAuB,KAAvB;AACH;;AAEDkD,EAAAA,YAAY,GAAE;AACV,SAAKrF,OAAL,CAAal/B,KAAb;AACH;;AAEDvL,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;;AAEA,QAAI,KAAKyqC,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAazK,EAAb,CAAgB,SAAhB,EAA2B,KAAK2P,eAAhC;AACA,WAAKlF,OAAL,CAAazK,EAAb,CAAgB,QAAhB,EAA0B,KAAK4P,cAA/B;AACH;AAEJ;;AAEDvvC,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;;AAEA,QAAI,KAAKoqC,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAa3K,GAAb,CAAiB,SAAjB,EAA4B,KAAK6P,eAAjC;AACA,WAAKlF,OAAL,CAAa3K,GAAb,CAAiB,QAAjB,EAA2B,KAAK8P,cAAhC;AACH;AACJ;;AAEDD,EAAAA,eAAe,CAAC/tC,MAAD,EAAQ;AACnB,SAAKgrC,OAAL,GAAehrC,MAAf;AACH;;AAEDguC,EAAAA,cAAc,GAAE;AACZ,SAAKpkC,MAAL;AACH,GA7J2D,CA+J5D;;;AACAwkC,EAAAA,QAAQ,CAACn0C,EAAD,EAAK4c,IAAL,EAAU;AACd,QAAImV,gBAAJ,CAAY/xB,EAAZ,EAAgB,IAAhB,EAAsB4c,IAAtB;AACH;;AAEDs3B,EAAAA,SAAS,CAAChuC,CAAD,EAAG;AACR,QAAIwB,MAAM,GAAGxB,CAAC,CAACwB,MAAf;AACA,QAAI2D,EAAE,GAAG,KAAKujC,OAAL,CAAa8C,aAAb,CAA2BlF,KAApC;AAEAvL,IAAAA,YAAY,CAAC,KAAKmT,eAAN,CAAZ;AACA,SAAKA,eAAL,GAAuB9gC,UAAU,CAACe,CAAC,IAAE;AAEjC,UAAIirB,IAAI,GAAG53B,MAAM,CAACzG,KAAlB;AAEA,UAAIq+B,IAAI,IAAI,KAAKsP,OAAL,CAAatP,IAAzB,EAAgC;AAEhC,WAAKsP,OAAL,CAAatP,IAAb,GAAoBA,IAApB;AAEA,WAAKv3B,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,qBAAhB,EAAuC;AACtDC,QAAAA,OAAO,EAAE,IAD6C;AAEtDC,QAAAA,QAAQ,EAAE,IAF4C;AAGtDC,QAAAA,MAAM,EAAE;AACJm3B,UAAAA,IAAI,EAAEA;AADF;AAH8C,OAAvC,CAAnB;AAQH,KAhBgC,EAgB9Bj0B,EAhB8B,CAAjC;AAiBH;;AA1L2D,CAAhE;;eA8Le/I,cAAc,CAAC7B,GAAf,CAAmB,gBAAnB;;;;;;;;;;;ACrMf;;AACA;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcnB,WAAd,CAA0B;AAE/D,aAAW2B,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;KAAX;AAIlB;;AAEF3B,EAAAA,WAAW,GAAE;AACT;AACA,SAAKqtC,MAAL,GAAc,CAAd;AACA,SAAK1V,SAAL,GAAiB,GAAjB;AACH;;AAED70B,EAAAA,iBAAiB,GAAE;AACf,SAAKN,gBAAL,CAAsB,QAAtB,EAAgC,KAAKwwC,QAArC,EAA+C,IAA/C;AACA,SAAKC,UAAL;AACH;;AAED9vC,EAAAA,oBAAoB,GAAE;AAClB,SAAKmC,mBAAL,CAAyB,QAAzB,EAAmC,KAAK0tC,QAAxC,EAAkD,IAAlD;AACH;;AAED,QAAM3kC,KAAN,GAAa;AACT,SAAKg/B,MAAL,GAAc,CAAd;AACA,SAAKhtB,SAAL,GAAiB,CAAjB;AACA,SAAK6yB,SAAL,GAAiB,IAAjB;AACA,SAAK30C,SAAL,GAAiB,EAAjB;AAEA,UAAM,KAAK00C,UAAL,EAAN;AACH;;AAEDD,EAAAA,QAAQ,GAAE;AAEN,QAAIhqC,KAAK,GAAG,KAAKmqC,YAAL,GAAoB,KAAK9yB,SAAzB,GAAqC,KAAKlU,YAAtD;AACA,QAAIinC,IAAI,GAAG,CAAC,KAAKC,YAAN,IAAsBrqC,KAAK,GAAG,KAAKqqC,YAA9C;AAEA,SAAKA,YAAL,GAAoBrqC,KAApB;AAEA,QAAI,CAACoqC,IAAD,IAASpqC,KAAK,IAAI,CAAtB,EAA0B;AAE1B,QAAIA,KAAK,IAAI,KAAK2uB,SAAlB,EACI,KAAKsb,UAAL;AACP;;AAED,QAAMA,UAAN,GAAkB;AAEd,QAAI,CAAC,KAAKK,UAAV,EAAuB;AAEvB,QAAI,KAAKpG,SAAT,EAAqB;AAErB,QAAIG,MAAM,GAAG,KAAKA,MAAlB;AAEA,SAAKH,SAAL,GAAiB,MAAM,KAAKoG,UAAL,CAAgBtrC,KAAhB,CAAsBqlC,MAAtB,EAA8BnlC,IAA9B,CAAmC,KAAKqrC,UAAL,CAAgB/uC,IAAhB,CAAqB,IAArB,CAAnC,CAAvB;AACA,SAAK0oC,SAAL,GAAiB,IAAjB;;AAEA,QAAIG,MAAM,IAAI,CAAd,EAAiB;AACb,WAAK3mC,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,iBAAhB,EAAkC;AACjDG,QAAAA,MAAM,EAAE;AAACyI,UAAAA,IAAI,EAAE,KAAK+jC;AAAZ,SADyC;AAEjD1sC,QAAAA,OAAO,EAAE,IAFwC;AAGjDC,QAAAA,QAAQ,EAAE;AAHuC,OAAlC,CAAnB;AAKH;AACJ;;AAED,MAAI2sC,UAAJ,GAAgB;AAAC,WAAO,KAAKzyC,YAAL,CAAkB,KAAlB,KAA4B,KAAnC;AAAyC;;AAC1D,MAAI0yC,YAAJ,GAAkB;AAAC,WAAO,KAAK1yC,YAAL,CAAkB,OAAlB,KAA8B,eAArC;AAAqD;;AAExEwyC,EAAAA,UAAU,CAACvG,MAAD,EAAQ;AAEd,SAAKK,MAAL,IAAeL,MAAM,CAACtoC,MAAtB;;AAEA,QAAI,KAAK2oC,MAAL,IAAe,CAAnB,EAAsB;AAClB,WAAKqG,SAAL,GAAiB,KAAKA,SAAL,IAAkBr1C,QAAQ,CAACC,aAAT,CAAuB,KAAKm1C,YAA5B,CAAnC;AACA,WAAKC,SAAL,CAAeJ,UAAf,GAA4B,KAAKA,UAAjC;AACA,UAAIrV,IAAI,GAAG,KAAKqV,UAAL,CAAgB/F,OAAhB,IAAyB,KAAK+F,UAAL,CAAgB/F,OAAhB,CAAwBtP,IAA5D;AACA,WAAKyV,SAAL,CAAe9zC,KAAf,GAAuBq+B,IAAI,GAAI,mBAAkBA,IAAK,GAA3B,GAAiC,KAAKl9B,YAAL,CAAkB,aAAlB,KAAoC,YAAhG;AACA,WAAKV,WAAL,CAAiB,KAAKqzC,SAAtB;AACA;AACH;;AAED1G,IAAAA,MAAM,CAACtuC,OAAP,CAAeojC,KAAK,IAAE;AAElB,UAAIxU,OAAO,GAAG,KAAKA,OAAL,IAAgB,KAAKA,OAAL,CAAa,KAAK4lB,SAAlB,EAA6BpR,KAA7B,CAA9B;;AACA,UAAIxU,OAAJ,EAAa;AACT,aAAKjtB,WAAL,CAAiBitB,OAAjB;AACH;;AAED,UAAI3uB,EAAE,GAAGN,QAAQ,CAACC,aAAT,CAAuB,KAAKk1C,UAA5B,CAAT;AACA70C,MAAAA,EAAE,CAACmjC,KAAH,GAAWA,KAAX;AACA,WAAKzhC,WAAL,CAAiB1B,EAAjB;AACA,WAAKu0C,SAAL,GAAiBpR,KAAjB;AACH,KAXD;AAYH;;AA7F8D,CAAnE;;eAiGe7gC,cAAc,CAAC7B,GAAf,CAAmB,iBAAnB;;;;;;;;;;;ACpGf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAGA6B,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErDpB,EAAAA,WAAW,GAAE;AACT;AAEA,SAAK4vB,SAAL,GAAiB,KAAKA,SAAL,CAAeprB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKmvC,OAAL,GAAe,KAAKA,OAAL,CAAanvC,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAK8oB,OAAL,GAAe,KAAKA,OAAL,CAAa9oB,IAAb,CAAkB,IAAlB,CAAf;AACH;;AAED,MAAIuoC,IAAJ,GAAU;AAAE,WAAO,KAAK6G,MAAZ;AAAoB;;AAChC,MAAI7G,IAAJ,CAASA,IAAT,EAAc;AACV,QAAI6C,SAAS,GAAG,CAAC,CAAC,KAAKgE,MAAP,IAAiB,KAAKA,MAAL,IAAe7G,IAAhD;AACA,SAAK6G,MAAL,GAAc7G,IAAd;AACA,SAAKuG,UAAL,CAAgBvG,IAAhB,GAAuBA,IAAvB;AAEA,QAAI6C,SAAJ,EACI,KAAKiE,OAAL,GANM,CAMS;AACtB;;AAED,MAAIhsC,GAAJ,CAAQA,GAAR,EAAY;AAAE,SAAKisC,KAAL,GAAajsC,GAAb;AAAkB;;AAChC,MAAIA,GAAJ,GAAS;AACL,WAAO,KAAKisC,KAAL,IAAc,KAAK/yC,YAAL,CAAkB,KAAlB,CAArB;AACH;;AAED,MAAIwsC,OAAJ,GAAa;AACT,QAAI,CAAC,KAAKwG,SAAV,EACI,KAAKxG,OAAL,GAAe,EAAf;AAEJ,WAAO,KAAKwG,SAAZ;AACH;;AACD,MAAIxG,OAAJ,CAAYA,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKwG,SAAV,EAAqB;AACjB,WAAKA,SAAL,GAAiB,IAAIvE,gBAAJ,EAAjB;AACA,WAAKjC,OAAL,CAAa1lC,GAAb,GAAmB,KAAKA,GAAxB;AACA,WAAK0lC,OAAL,CAAavT,IAAb,GAAoB,IAApB;AACA,WAAKsZ,UAAL,CAAgB/F,OAAhB,GAA0B,KAAKA,OAA/B;AACA,WAAKA,OAAL,CAAazK,EAAb,CAAgB,QAAhB,EAA0B,KAAK4P,cAAL,CAAoBluC,IAApB,CAAyB,IAAzB,CAA1B;AACH;;AAED,SAAK+oC,OAAL,CAAa2C,GAAb,CAAiB3C,OAAjB;AACH;;AAED,MAAIO,KAAJ,GAAW;AAAE,WAAO,KAAKkG,OAAZ;AAAqB;;AAClC,MAAIlG,KAAJ,CAAUA,KAAV,EAAgB;AACZ,QAAI,CAAC,KAAKkG,OAAV,EAAmB;AACf,WAAKA,OAAL,GAAe,IAAInC,cAAJ,EAAf;AACA,WAAK/D,KAAL,CAAWjmC,GAAX,GAAiB,KAAKA,GAAtB;AACA,WAAKimC,KAAL,CAAW9T,IAAX,GAAkB,IAAlB;AACA,WAAKsZ,UAAL,CAAgBxF,KAAhB,GAAwB,KAAKA,KAA7B;AACA,WAAKA,KAAL,CAAWhL,EAAX,CAAc,QAAd,EAAwB,KAAKmR,YAAL,CAAkBzvC,IAAlB,CAAuB,IAAvB,CAAxB;AACH;;AAED,SAAKspC,KAAL,CAAWoC,GAAX,CAAepC,KAAf;AACH;;AAED,MAAIwF,UAAJ,GAAgB;AACZ,QAAI,CAAC,KAAKY,YAAV,EAAwB;AACpB,WAAKA,YAAL,GAAoB,IAAI1H,eAAJ,CAAe,KAAK2H,WAApB,CAApB;;AACA,WAAKD,YAAL,CAAkBpR,EAAlB,CAAqB,cAArB,EAAqC0P,KAAK,IAAE;AACxC,aAAKzc,OAAL,CAAayc,KAAb,GAAqBA,KAArB;AACH,OAFD;AAGH;;AACD,WAAO,KAAK0B,YAAZ;AACH;;AAED,aAAWxyC,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAgElB;;AAEF,MAAIsB,OAAJ,GAAa;AACT,WAAO,KAAKmxC,SAAL,GAAiB,KAAKA,SAAL,IACD,KAAK70C,aAAL,CAAmB,kBAAnB,CADC,IAED,KAAKa,UAAL,CAAgBb,aAAhB,CAA8B,mBAA9B,CAFvB;AAGH;;AAEDqC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;;;mCAKU,KAAK0rC,OAAQ,WAAU,KAAKO,KAAM;mCAClC,KAAKuG,kBAAmB;;;;4DAIC,KAAKR,OAAQ;;;;;;mBAMtD,KAAKL,UAAW;qBACd,KAAKC,YAAa;uBAChB,KAAKnmB,OAAQ;0BACV,KAAKgmB,UAAW;;KAnB7B;AAqBP;;AAEFxwC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEAL,IAAAA,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKotB,SAAxC,EAAmD,IAAnD;AACAntB,IAAAA,MAAM,CAACD,gBAAP,CAAwB,OAAxB,EAAiC,KAAKmxC,OAAtC,EAA+C,IAA/C;AAEA,QAAI3wC,IAAI,GAAG,KAAKiC,WAAL,GAAmBjC,IAA9B;;AAEN,QAAIA,IAAJ,EAAU;AACA,WAAKA,IAAL,GAAYA,IAAZ;AACAA,MAAAA,IAAI,CAACg3B,IAAL,GAAYh3B,IAAI,CAACg3B,IAAL,IAAa,IAAzB;AACH;AACJ;;AAED72B,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AAEAV,IAAAA,MAAM,CAAC6C,mBAAP,CAA2B,SAA3B,EAAsC,KAAKsqB,SAA3C,EAAsD,IAAtD;AACAntB,IAAAA,MAAM,CAAC6C,mBAAP,CAA2B,OAA3B,EAAoC,KAAKquC,OAAzC,EAAkD,IAAlD;AAEA,QAAI,KAAK3wC,IAAL,IAAa,KAAKA,IAAL,CAAUg3B,IAAV,IAAkB,IAAnC,EACI,OAAO,KAAKh3B,IAAZ;AACP;;AAED4sB,EAAAA,SAAS,CAAC/qB,CAAD,EAAG;AACR,QAAIA,CAAC,CAACwB,MAAF,KAAahI,QAAQ,CAAC4J,IAA1B,EAAiC;AACjC,QAAI,CAACpD,CAAC,CAACoO,OAAH,IAAc,CAACpO,CAAC,CAACyvC,OAArB,EAA+B;AAC/B,SAAK5E,OAAL,GAAe,IAAf;AACH;;AAEDiE,EAAAA,OAAO,CAAC9uC,CAAD,EAAG;AACN,QAAI,KAAK6qC,OAAL,IAAgB,CAAC,KAAKnC,OAAL,CAAawC,aAAlC,EACI,KAAKL,OAAL,GAAgB,KAAhB;AACP;;AAED,MAAIA,OAAJ,GAAa;AAAE,WAAO,KAAKnC,OAAL,IAAgB,KAAKA,OAAL,CAAamC,OAApC;AAA6C;;AAC5D,MAAIA,OAAJ,CAAY6E,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKhH,OAAV,EAAoB;AAEpB,SAAKA,OAAL,CAAamC,OAAb,GAAuB6E,OAAvB;AAEAA,IAAAA,OAAO,GAAG,KAAK50C,YAAL,CAAkB,SAAlB,EAA6B,EAA7B,CAAH,GAAsC,KAAKe,eAAL,CAAqB,SAArB,CAA7C;AACH;;AAED,MAAI8yC,UAAJ,GAAgB;AAAE,WAAO,KAAKzyC,YAAL,CAAkB,KAAlB,KAA4B,EAAnC;AAAsC;;AACxD,MAAI0yC,YAAJ,GAAkB;AAAE,WAAO,KAAK1yC,YAAL,CAAkB,OAAlB,KAA8B,EAArC;AAAwC;;AAE5D,MAAIg1B,OAAJ,GAAa;AACT,WAAO,KAAK31B,UAAL,CAAgBb,aAAhB,CAA8B,gBAA9B,CAAP;AACH;;AAED,MAAIy6B,IAAJ,GAAU;AACN,WAAO,KAAK55B,UAAL,CAAgBb,aAAhB,CAA8B,iBAA9B,CAAP;AACH;;AAED+tB,EAAAA,OAAO,CAAC4lB,SAAD,EAAYpR,KAAZ,EAAkB;AAErB,QAAIxU,OAAO,GAAG,KAAKvsB,YAAL,CAAkB,SAAlB,CAAd;AAEAusB,IAAAA,OAAO,GAAGA,OAAO,IAAIrsB,cAAc,CAAC7B,GAAf,CAAmBkuB,OAAnB,CAArB;;AAEA,QAAIA,OAAO,IAAIA,OAAO,CAACknB,aAAnB,IAAoClnB,OAAO,CAACknB,aAAR,CAAsBtB,SAAtB,EAAiCpR,KAAjC,EAAwC,IAAxC,CAAxC,EAAuF;AACnFxU,MAAAA,OAAO,GAAG,IAAIA,OAAJ,CAAY4lB,SAAZ,EAAuBpR,KAAvB,EAA8B,IAA9B,CAAV;AACAxU,MAAAA,OAAO,CAAC0M,IAAR,GAAe,IAAf;AACA1M,MAAAA,OAAO,CAACwU,KAAR,GAAgBA,KAAhB;AACAxU,MAAAA,OAAO,CAAC4lB,SAAR,GAAoBA,SAApB;AACA,aAAO5lB,OAAP;AACH;;AAED,WAAO,IAAP;AACH;;AAED,QAAM/qB,YAAN,GAAoB;AAChB,SAAKU,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,SAAKmzB,OAAL,CAAayc,KAAb,GAAqB,MAAM,KAAKc,UAAL,CAAgB5uC,MAAhB,EAA3B;AACA,SAAKzB,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAMixC,OAAN,GAAe;AACX,SAAK5wC,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,SAAK0wC,UAAL,CAAgBjlC,KAAhB;AACA,SAAK2rB,IAAL,CAAU3rB,KAAV;AACA,SAAK0nB,OAAL,CAAayc,KAAb,GAAqB,MAAM,KAAKc,UAAL,CAAgB5uC,MAAhB,EAA3B;AACA,SAAKzB,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAM6xC,MAAN,GAAc;AACV,SAAKnB,UAAL,CAAgBxG,QAAhB;AACA,SAAK9S,IAAL,CAAU3rB,KAAV;AACA,SAAK0nB,OAAL,CAAayc,KAAb,GAAqB,MAAM,KAAKc,UAAL,CAAgB5uC,MAAhB,EAA3B;AACH;;AAED,QAAM2vC,kBAAN,CAAyB3Q,OAAzB,EAAiC;AAE7B;AACA,QAAI,KAAKyQ,WAAL,IAAoB,KAAKA,WAAL,CAAiBnsC,KAAjB,IAA0B,MAAlD,EAA0D;AACtD,WAAKsrC,UAAL,CAAgBjlC,KAAhB;AACH;;AAED,SAAKilC,UAAL,CAAgBrG,YAAhB;AACA,SAAKjT,IAAL,CAAU3rB,KAAV;AACA,SAAK0nB,OAAL,CAAayc,KAAb,GAAqB,MAAM,KAAKc,UAAL,CAAgB5uC,MAAhB,EAA3B;AACH;;AAED,QAAMguC,cAAN,CAAqBhP,OAArB,EAA6B;AAEzB,QAAI,KAAK6J,OAAL,CAAauD,kBAAb,CAAgCpN,OAAhC,CAAJ,EAA8C;AAC1C,WAAKzgC,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAK0wC,UAAL,CAAgBjlC,KAAhB;AACH;;AAED,SAAKilC,UAAL,CAAgBrG,YAAhB;AACA,SAAKjT,IAAL,CAAU3rB,KAAV;AACA,SAAK0nB,OAAL,CAAayc,KAAb,GAAqB,MAAM,KAAKc,UAAL,CAAgB5uC,MAAhB,EAA3B;AACA,SAAKzB,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAEDqxC,EAAAA,YAAY,GAAE;AACV;AACA,SAAKX,UAAL,CAAgBn0C,IAAhB;AACA,SAAK66B,IAAL,CAAU3rB,KAAV;AACH;;AA1RoD,CAAzD;;eA8RepN,cAAc,CAAC7B,GAAf,CAAmB,QAAnB;;;;;;ACvSf;;AAEA6B,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0C,cAAcE,sBAAd,CAAwB;AAE9D,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAuClB;;AAEFmB,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEA,SAAK4xC,MAAL,GAAc,EAAd;;AAEA,SAAK,IAAIC,KAAT,IAAkBt2C,QAAQ,CAACu2C,WAA3B,EAAwC;AAEpC,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAG;AAAEA,QAAAA,KAAK,GAAGF,KAAK,CAACG,QAAd;AAAwB,OAA7B,CAA6B,OAAMjwC,CAAN,EAAQ,CAAE;;AAEvC,UAAIgwC,KAAJ,EACA,KAAK,IAAIE,IAAT,IAAiBF,KAAjB,EAAwB;AAEpB,YAAIE,IAAI,CAACnZ,OAAL,CAAatvB,KAAb,CAAmB,iBAAnB,CAAJ,EAA2C;AAEvC,cAAI6J,OAAO,GAAG4+B,IAAI,CAACnZ,OAAL,CAAatvB,KAAb,CAAmB,uBAAnB,CAAd;AACA,cAAIooC,MAAM,GAAG,EAAb;AAEAv+B,UAAAA,OAAO,CAACnX,GAAR,CAAYqU,CAAC,IAAE;AAEX,gBAAI,CAAC/I,GAAD,EAAMjL,IAAN,EAAYqM,GAAZ,EAAiBrD,KAAjB,IAA0BgL,CAAC,CAAC/G,KAAF,CAAQ,uCAAR,CAA9B;AACA,gBAAIzE,GAAG,GAAGxI,IAAI,IAAIqM,GAAG,GAAC,MAAIA,GAAL,GAAS,EAAhB,CAAd;;AAEA,gBAAIA,GAAJ,EAAS;AACLgpC,cAAAA,MAAM,CAACr1C,IAAD,CAAN,GAAeq1C,MAAM,CAACr1C,IAAD,CAAN,IAAgB;AAACA,gBAAAA,IAAI,EAAEA,IAAP;AAAaq1C,gBAAAA,MAAM,EAAE;AAArB,eAA/B;AACAA,cAAAA,MAAM,CAACr1C,IAAD,CAAN,CAAaq1C,MAAb,CAAoBjuC,IAApB,CAAyB;AAAEoB,gBAAAA,GAAF;AAAOxI,gBAAAA,IAAP;AAAaqM,gBAAAA,GAAb;AAAkBrD,gBAAAA;AAAlB,eAAzB;AACH,aAHD,MAGK;AACDqsC,cAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBA,MAAM,CAAC,SAAD,CAAN,IAAqB;AAACr1C,gBAAAA,IAAI,EAAE,SAAP;AAAkBq1C,gBAAAA,MAAM,EAAE;AAA1B,eAAzC;AACAA,cAAAA,MAAM,CAAC,SAAD,CAAN,CAAkBA,MAAlB,CAAyBjuC,IAAzB,CAA8B;AAAEoB,gBAAAA,GAAF;AAAOxI,gBAAAA,IAAP;AAAaqM,gBAAAA,GAAb;AAAkBrD,gBAAAA;AAAlB,eAA9B;AACH;AAEJ,WAbD;AAeA,eAAKqsC,MAAL,GAAc9nC,MAAM,CAAC8I,MAAP,CAAcg/B,MAAd,CAAd;AACH;AACJ;AACJ;AACJ;;AAED9yC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;UACf,KAAK6yC,MAAL,CAAY11C,GAAZ,CAAgBi5B,CAAC,IAAEp2B,gBAAK;0BACRo2B,CAAC,CAAC54B,IAAK;sBACX44B,CAAC,CAAC54B,IAAK;;kBAEX44B,CAAC,CAACyc,MAAF,CAAS11C,GAAT,CAAa83B,CAAC,IAAEj1B,gBAAK;+BACRi1B,CAAC,CAACprB,GAAI,SAAQorB,CAAC,CAACjvB,GAAI,kDAAiDivB,CAAC,CAACjvB,GAAI;+BAC3EivB,CAAC,CAACjvB,GAAI;sCACCivB,CAAC,CAACprB,GAAF,GAAMorB,CAAC,CAACzuB,KAAR,GAAc,EAAG;;iBAHrC,CAKC;;;SATT,CAYC;KAbE;AAcP;;AAjG4D,CAAlE;;;;ACFA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAsNA;;AAeA;;AACA;;;;;;AApOA5F,MAAM,CAACsiC,MAAP,GAAgBA,eAAhB;;AAEAtiC,MAAM,CAAC+uC,QAAP,GAAkB,gBAAe7yC,EAAf,EAAmBq2C,QAAQ,GAAC,KAA5B,EAAkC;AAEhD,MAAIzhB,IAAI,GAAG,CACP;AAACjG,IAAAA,OAAO,EAAE;AAAV,GADO,EAEP;AAACzqB,IAAAA,KAAK,EAAE,aAAR;AAAuB7B,IAAAA,GAAG,EAAE;AAA5B,GAFO,EAGP;AAAC6B,IAAAA,KAAK,EAAE,aAAR;AAAuB7B,IAAAA,GAAG,EAAE;AAA5B,GAHO,EAIP;AAAC6B,IAAAA,KAAK,EAAE,aAAR;AAAuB7B,IAAAA,GAAG,EAAE;AAA5B,GAJO,EAKP,SALO,EAMP;AAAC6B,IAAAA,KAAK,EAAE,MAAR;AAAgB0wB,IAAAA,IAAI,EAAE,CAClB;AAAC1wB,MAAAA,KAAK,EAAE,WAAR;AAAqB7B,MAAAA,GAAG,EAAE;AAA1B,KADkB,EAElB;AAAC6B,MAAAA,KAAK,EAAE,WAAR;AAAqB7B,MAAAA,GAAG,EAAE;AAA1B,KAFkB,CAAtB;AAGGm+B,IAAAA,QAAQ,EAAE;AAAChP,MAAAA,OAAO,EAAE;AAACd,QAAAA,KAAK,EAAE;AAAR;AAAV;AAHb,GANO,EAUP;AAACsE,IAAAA,IAAI,EAAE;AAAP,GAVO,CAAX;AAaAJ,EAAAA,IAAI,GAAG,IAAIO,aAAJ,CAASP,IAAT,CAAP;;AAEA,MAAIyhB,QAAJ,EAAc;AACVr2C,IAAAA,EAAE,CAAC0B,WAAH,CAAekzB,IAAI,CAAC50B,EAApB;AACA40B,IAAAA,IAAI,CAAC3xB,MAAL;AACH,GAHD,MAGK;AACD,QAAIiyB,QAAQ,GAAG,MAAMN,IAAI,CAACpD,OAAL,CAAaxxB,EAAb,CAArB;AACH;AAEJ,CAxBD;;AA0BA6yC,QAAQ,CAACnzC,QAAQ,CAACkB,aAAT,CAAuB,cAAvB,CAAD,EAAyC,IAAzC,CAAR;;AAEAw1B,eAAML,QAAN,CAAe,QAAf,EAAyB,MAAI7yB,gBAAK;;;;;;;;;;;;;;;CAAlC,EAeG;AAAC0X,EAAAA,KAAK,EAAE;AAAR,CAfH;;AAkBAtY,cAAc,CAACC,MAAf,CAAsB,UAAtB,EAAkC,cAAcE,sBAAd,CAAwB;AAEtD,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;KAAX;AAKlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;yCAEgB,KAAKozC,OAAQ;;;;;KAFzC;AAOP;;AAEF,QAAMA,OAAN,CAAcpwC,CAAd,EAAgB;AACZ,QAAIgvB,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,CAC1B;AAACjxB,MAAAA,KAAK,EAAE,OAAR;AAAiB0Y,MAAAA,IAAI,EAAC;AAACxP,QAAAA,KAAK,EAAE,OAAR;AAAiBC,QAAAA,MAAM,EAAE,OAAzB;AAAkCooB,QAAAA,MAAM,EAAC;AAAzC;AAAtB,KAD0B,EAE1B;AAACvxB,MAAAA,KAAK,EAAE,QAAR;AAAkB0Y,MAAAA,IAAI,EAAC;AAACxP,QAAAA,KAAK,EAAE,OAAR;AAAiBC,QAAAA,MAAM,EAAE,EAAzB;AAA6BooB,QAAAA,MAAM,EAAC;AAApC;AAAvB,KAF0B,EAG1B;AAACvxB,MAAAA,KAAK,EAAE,cAAR;AAAwB0Y,MAAAA,IAAI,EAAC;AAACxP,QAAAA,KAAK,EAAE,OAAR;AAAiBC,QAAAA,MAAM,EAAC,EAAxB;AAA4BooB,QAAAA,MAAM,EAAC;AAAnC;AAA7B,KAH0B,EAI1B;AAACvxB,MAAAA,KAAK,EAAE,YAAR;AAAsB0Y,MAAAA,IAAI,EAAC;AAACxP,QAAAA,KAAK,EAAE,MAAR;AAAgBC,QAAAA,MAAM,EAAC,MAAvB;AAA+BooB,QAAAA,MAAM,EAAC;AAAtC;AAA3B,KAJ0B,EAK1B,SAL0B,EAM1B;AAACvxB,MAAAA,KAAK,EAAE,OAAR;AAAiBV,MAAAA,IAAI,EAAE,YAAvB;AAAqCoZ,MAAAA,IAAI,EAAC;AAACxP,QAAAA,KAAK,EAAE,MAAR;AAAgBC,QAAAA,MAAM,EAAE,MAAxB;AAAgCooB,QAAAA,MAAM,EAAC;AAAvC;AAA1C,KAN0B,CAAT,EAOlBjE,OAPkB,CAOVtrB,CAAC,CAACwB,MAPQ,EAOA;AAACgpB,MAAAA,KAAK,EAAE;AAAR,KAPA,CAArB;;AASA,QAAIwE,QAAJ,EAAc;AACVtB,MAAAA,OAAO,CAAC8I,GAAR,CAAYxH,QAAZ;;AACA,WAAK,IAAIhsB,GAAT,IAAgBgsB,QAAQ,CAACtY,IAAzB,EAA+B;AAC3BgX,QAAAA,OAAO,CAAC8I,GAAR,CAAYxzB,GAAZ;AACA,aAAK2qB,KAAL,CAAW3qB,GAAX,IAAkBgsB,QAAQ,CAACtY,IAAT,CAAc1T,GAAd,CAAlB;AACH;AACJ;AACJ;;AAnCqD,CAA1D;;AAsCAktB,eAAML,QAAN,CAAe,QAAf,EAAyB,UAAzB,EAAqC;AAACnb,EAAAA,KAAK,EAAE;AAAR,CAArC;;AACAwb,eAAML,QAAN,CAAe,cAAf,EAA+B,UAA/B,EAA2C;AACvCnb,EAAAA,KAAK,EAAE,cADgC;AAEvCxN,EAAAA,KAAK,EAAE,OAFgC;AAGvCC,EAAAA,MAAM,EAAE,OAH+B;AAIvCooB,EAAAA,MAAM,EAAE;AAJ+B,CAA3C;;AAOAnzB,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsC,cAAcE,sBAAd,CAAwB;AAE1D,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;KAAX;AAKlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;4BAGG,KAAK4zB,OAAQ;4BACb,KAAKA,OAAQ;;KAJ5B;AAMP;;AAEFA,EAAAA,OAAO,CAAC5wB,CAAD,EAAG;AACN,QAAIN,EAAE,GAAGM,CAAC,CAACwB,MAAF,CAASq+B,SAAlB;AACA,SAAKlS,KAAL,CAAWjuB,EAAX;AACH;;AApByD,CAA9D;;AAuBAwwB,eAAML,QAAN,CAAe,cAAf,EAA+B,cAA/B,EAA+C;AAC3Cnb,EAAAA,KAAK,EAAE,cADoC;AAE3CxN,EAAAA,KAAK,EAAE,OAFoC;AAG3CC,EAAAA,MAAM,EAAE,OAHmC;AAI3CooB,EAAAA,MAAM,EAAE;AAJmC,CAA/C;;AAQAW,eAAML,QAAN,CAAe,QAAf,EAAyB,UAAzB,EAAqC;AACjCnb,EAAAA,KAAK,EAAE,QAD0B;AAEjCgb,EAAAA,UAAU,EAAE,OAFqB;AAGjCxoB,EAAAA,KAAK,EAAE,OAH0B;AAIjCqoB,EAAAA,MAAM,EAAE;AAJyB,CAArC;;AAOA3xB,MAAM,CAACyyC,cAAP,GAAwB,MAAI;AACxB,oBAAM,MAAIrzC,gBAAK;;KAAf,EAEG;AAACsyB,IAAAA,QAAQ,EAAE,IAAX;AAAiBpoB,IAAAA,KAAK,EAAE;AAAxB,GAFH;AAGH,CAJD;;AAMA,IAAIopC,QAAQ,GAAG,EAAf;AACA,IAAI7hC,CAAC,GAAG,CAAR;;AACA,OAAMA,CAAC,KAAI,GAAX,EAAe;AACX6hC,EAAAA,QAAQ,CAAC1uC,IAAT,CAAc;AAACxH,IAAAA,EAAE,EAAEqU,CAAL;AAAQzQ,IAAAA,KAAK,EAAE,SAAOyQ,CAAtB;AAAyBq0B,IAAAA,IAAI,EAAG,IAAIj+B,IAAJ,EAAD,CAAaC,OAAb,KAAwB2J,CAAC,GAAC;AAAzD,GAAd;AACH;;AAED,MAAM8hC,SAAS,GAAG;AACdn2C,EAAAA,EAAE,EAAE;AACA4D,IAAAA,KAAK,EAAE,IADP;;AAEAsvC,IAAAA,MAAM,CAACpgB,CAAD,EAAG;AAAE,aAAOA,CAAC,CAAC9yB,EAAT;AAAa;;AAFxB;AADU,CAAlB;AAOAgC,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC,cAAcE,sBAAd,CAAwB;AAEzD,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;;;;;KAAX;AAYlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;;;qBAIJuzC,SAAU;oBACXD,QAAS;;KALhB;AAOP;;AAvBuD,CAA7D;AA2BAl0C,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAwB;AAE7D,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;KAAX;AAKlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;UACf,KAAKigC,KAAL,CAAWj/B,KAAM;KADd;AAEP;;AAX2D,CAAjE;AAeA5B,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC,cAAcE,sBAAd,CAAwB;AAEzD,aAAWM,MAAX,GAAmB;AAAC,WAAOC,eAAI;;;;;;;;KAAX;AAQlB;;AAEFC,EAAAA,MAAM,GAAE;AAAC,WAAOC,gBAAK;;KAAZ;AAEP;;AAduD,CAA7D;AAoBAZ,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC,cAAcnB,WAAd,CAAyB;AAE1D+C,EAAAA,iBAAiB,GAAE;AACf,SAAKvE,SAAL,GAAiB82C,eAAjB;AACH;;AAJyD,CAA9D,GAQA;AACA;AAEA;AACA;;AAKA5yC,MAAM,CAAC6yC,OAAP,GAAiB;AACb,QAAMlP,OAAN,CAAcznC,EAAd,EAAiB;AACbomC,oBAAOqB,OAAP,GAAiBjG,KAAjB;AACH,GAHY;;AAKb,QAAMra,IAAN,CAAWnnB,EAAX,EAAc;AACVomC,oBAAOjf,IAAP,CAAY;AAACvM,MAAAA,KAAK,EAAE,OAAR;AAAiByrB,MAAAA,GAAG,EAAE;AAAtB,KAAZ,EAA4D7E,KAA5D;AACH,GAPY;;AASb,QAAMrL,KAAN,CAAYn2B,EAAZ,EAAe;AACXomC,oBAAOjQ,KAAP,CAAa;AAACvb,MAAAA,KAAK,EAAE,OAAR;AAAiByrB,MAAAA,GAAG,EAAE;AAAtB,KAAb,EAA4D7E,KAA5D;AACH,GAXY;;AAab,QAAMoV,YAAN,CAAmB52C,EAAnB,EAAsB;AAClBomC,oBAAOjQ,KAAP,CAAa;AAACvb,MAAAA,KAAK,EAAE,OAAR;AAAiByrB,MAAAA,GAAG,EAAE;AAAtB,KAAb,EAA4D7U,OAA5D,CAAoExxB,EAApE;AACH,GAfY;;AAiBb,QAAMsnC,OAAN,CAActnC,EAAd,EAAiB;AACb,QAAI,MAAMomC,gBAAOkB,OAAP,GAAiB9F,KAAjB,EAAV,EACI5N,OAAO,CAAC8I,GAAR,CAAY,UAAZ;AACP,GApBY;;AAsBZ,QAAM6K,aAAN,CAAoBvnC,EAApB,EAAuB;AACpB,QAAI,MAAMomC,gBAAOmB,aAAP,GAAuB/V,OAAvB,CAA+BxxB,EAA/B,CAAV,EACI4zB,OAAO,CAAC8I,GAAR,CAAY,iBAAZ;AACP;;AAzBY,CAAjB;AA6BAh9B,QAAQ,CAACkB,aAAT,CAAuB,iBAAvB,EAA0Cc,WAA1C,CAAsD0kC,gBAAOqB,OAAP,GAAiBznC,EAAvE;AACAN,QAAQ,CAACkB,aAAT,CAAuB,cAAvB,EAAuCc,WAAvC,CAAmD0kC,gBAAOjf,IAAP,CAAY;AAACvM,EAAAA,KAAK,EAAE,OAAR;AAAiByrB,EAAAA,GAAG,EAAE;AAAtB,CAAZ,EAA4DrmC,EAA/G;AACAN,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,EAAwCc,WAAxC,CAAoD0kC,gBAAOjQ,KAAP,CAAa;AAACvb,EAAAA,KAAK,EAAE,OAAR;AAAiByrB,EAAAA,GAAG,EAAE;AAAtB,CAAb,EAA4DrmC,EAAhH;;AAEA8D,MAAM,CAAC+yC,QAAP,GAAkB72C,EAAE,IAAE;AAClB6oB,EAAAA,KAAK,CAACthB,cAAN;;AACAitB,kBAAOrX,IAAP,CAAYnd,EAAE,CAACoC,YAAH,CAAgB,MAAhB,CAAZ;AACH,CAHD;;AAMAoyB,gBAAOrpB,KAAP;;ACtSA,IAAI2rC,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAInuC,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOm+B,GAAP,EAAY;AACZ,QAAIxvB,OAAO,GAAG,CAAC,KAAKwvB,GAAG,CAACiQ,KAAV,EAAiBtpC,KAAjB,CAAuB,+DAAvB,CAAd;;AACA,QAAI6J,OAAJ,EAAa;AACX,aAAO0/B,UAAU,CAAC1/B,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAAS0/B,UAAT,CAAoBhyC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAW3E,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD;;AAED8U,OAAO,CAAC2hC,YAAR,GAAuBD,kBAAvB;AACA1hC,OAAO,CAAC6hC,UAAR,GAAqBA,UAArB;;AC5BA,IAAIF,YAAY,GAAG53C,OAAO,CAAC,cAAD,CAAP,CAAwB43C,YAA3C;;AAEA,SAASG,eAAT,CAAyBC,OAAzB,EAAkC;AAChC,MAAI,CAACj3C,KAAK,CAACyO,OAAN,CAAcwoC,OAAd,CAAL,EAA6B;AAC3BA,IAAAA,OAAO,GAAG,CAACA,OAAD,CAAV;AACD;;AAED,MAAI92C,EAAE,GAAG82C,OAAO,CAACA,OAAO,CAACrxC,MAAR,GAAiB,CAAlB,CAAhB;;AAEA,MAAI;AACF,WAAOqY,OAAO,CAACC,OAAR,CAAgBjf,OAAO,CAACkB,EAAD,CAAvB,CAAP;AACD,GAFD,CAEE,OAAO0mC,GAAP,EAAY;AACZ,QAAIA,GAAG,CAAC5J,IAAJ,KAAa,kBAAjB,EAAqC;AACnC,aAAO,IAAIia,WAAJ,CAAgB,UAAUh5B,OAAV,EAAmBi5B,MAAnB,EAA2B;AAChDC,QAAAA,WAAW,CAACH,OAAO,CAACzvC,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAD,CAAX,CACG4B,IADH,CACQ,YAAY;AAChB,iBAAOnK,OAAO,CAACkB,EAAD,CAAd;AACD,SAHH,EAIGiJ,IAJH,CAIQ8U,OAJR,EAIiBi5B,MAJjB;AAKD,OANM,CAAP;AAOD;;AAED,UAAMtQ,GAAN;AACD;AACF;;AAED,SAASuQ,WAAT,CAAqBH,OAArB,EAA8B;AAC5B,SAAOh5B,OAAO,CAACo5B,GAAR,CAAYJ,OAAO,CAAC/2C,GAAR,CAAYo3C,UAAZ,CAAZ,CAAP;AACD;;AAED,IAAIC,aAAa,GAAG,EAApB;;AACA,SAASC,oBAAT,CAA8B/0C,IAA9B,EAAoCg1C,MAApC,EAA4C;AAC1CF,EAAAA,aAAa,CAAC90C,IAAD,CAAb,GAAsBg1C,MAAtB;AACD;;AAEDtiC,MAAM,CAACD,OAAP,GAAiBA,OAAO,GAAG8hC,eAA3B;AACA9hC,OAAO,CAACwiC,IAAR,GAAeN,WAAf;AACAliC,OAAO,CAAC0gB,QAAR,GAAmB4hB,oBAAnB;AAEA,IAAIP,OAAO,GAAG,EAAd;;AACA,SAASK,UAAT,CAAoBK,MAApB,EAA4B;AAC1B,MAAIx3C,EAAJ;;AACA,MAAIH,KAAK,CAACyO,OAAN,CAAckpC,MAAd,CAAJ,EAA2B;AACzBx3C,IAAAA,EAAE,GAAGw3C,MAAM,CAAC,CAAD,CAAX;AACAA,IAAAA,MAAM,GAAGA,MAAM,CAAC,CAAD,CAAf;AACD;;AAED,MAAIV,OAAO,CAACU,MAAD,CAAX,EAAqB;AACnB,WAAOV,OAAO,CAACU,MAAD,CAAd;AACD;;AAED,MAAIl1C,IAAI,GAAG,CAACk1C,MAAM,CAACC,SAAP,CAAiBD,MAAM,CAAC/a,WAAP,CAAmB,GAAnB,IAA0B,CAA3C,EAA8C+a,MAAM,CAAC/xC,MAArD,KAAgE+xC,MAAjE,EAAyEhrC,WAAzE,EAAX;AACA,MAAIkrC,YAAY,GAAGN,aAAa,CAAC90C,IAAD,CAAhC;;AACA,MAAIo1C,YAAJ,EAAkB;AAChB,WAAOZ,OAAO,CAACU,MAAD,CAAP,GAAkBE,YAAY,CAAChB,YAAY,KAAKc,MAAlB,CAAZ,CACtBvuC,IADsB,CACjB,UAAU0uC,QAAV,EAAoB;AACxB,UAAIA,QAAJ,EAAc;AACZ3iC,QAAAA,MAAM,CAACwiC,MAAP,CAAc/hB,QAAd,CAAuBz1B,EAAvB,EAA2B23C,QAA3B;AACD;;AAED,aAAOA,QAAP;AACD,KAPsB,EAOpBC,KAPoB,CAOd,UAAShyC,CAAT,EAAY;AACnB,aAAOkxC,OAAO,CAACU,MAAD,CAAd;AAEA,YAAM5xC,CAAN;AACD,KAXsB,CAAzB;AAYD;AACF;;AAED,SAASmxC,WAAT,CAAqBc,QAArB,EAA+B;AAC7B,OAAKA,QAAL,GAAgBA,QAAhB;AACA,OAAKla,OAAL,GAAe,IAAf;AACD;;AAEDoZ,WAAW,CAAC58B,SAAZ,CAAsBlR,IAAtB,GAA6B,UAAU6uC,SAAV,EAAqBC,OAArB,EAA8B;AACzD,MAAI,KAAKpa,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAI7f,OAAJ,CAAY,KAAK+5B,QAAjB,CAAf;AAC3B,SAAO,KAAKla,OAAL,CAAa10B,IAAb,CAAkB6uC,SAAlB,EAA6BC,OAA7B,CAAP;AACD,CAHD;;AAKAhB,WAAW,CAAC58B,SAAZ,CAAsBy9B,KAAtB,GAA8B,UAAUG,OAAV,EAAmB;AAC/C,MAAI,KAAKpa,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAI7f,OAAJ,CAAY,KAAK+5B,QAAjB,CAAf;AAC3B,SAAO,KAAKla,OAAL,CAAaia,KAAb,CAAmBG,OAAnB,CAAP;AACD,CAHD;;AC/EA/iC,MAAM,CAACD,OAAP,GAAiB,SAASijC,cAAT,CAAwBR,MAAxB,EAAgC;AAC/C,SAAOzuC,KAAK,CAACyuC,MAAD,CAAL,CAAcvuC,IAAd,CAAmB,UAAUgvC,GAAV,EAAe;AACvC,WAAOA,GAAG,CAACvjB,IAAJ,EAAP;AACD,GAFM,CAAP;AAGD,CAJD","file":"demo.335f5107.js","sourceRoot":"../demo","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// tslint:disable-next-line:no-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  readonly polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.insertBefore(start!, before);\n        start = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes =\n    (container: Node, start: Node|null, end: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.removeChild(start!);\n        start = n;\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  readonly value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, causing it to actually be written to the\n   * DOM.\n   *\n   * Directives are run at the start of `commit`, so that if they call\n   * `part.setValue(...)` synchronously that value will be used in the current\n   * commit, and there's no need to call `part.commit()` within the directive.\n   * If directives set a part value asynchronously, then they must call\n   * `part.commit()` manually.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  readonly parts: TemplatePart[] = [];\n  readonly element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n\n    const nodesToRemove: Node[] = [];\n    const stack: Node[] = [];\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        element.content,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    // Keeps track of the last index associated with a part. We try to delete\n    // unnecessary nodes, but we never want to associate two different parts\n    // to the same index. They must have a constant node between.\n    let lastPartIndex = 0;\n    let index = -1;\n    let partIndex = 0;\n    const {strings, values: {length}} = result;\n    while (partIndex < length) {\n      const node = walker.nextNode() as Element | Comment | Text | null;\n      if (node === null) {\n        // We've exhausted the content inside a nested template element.\n        // Because we still have parts (the outer for-loop), we know:\n        // - There is a template in the stack\n        // - The walker will find a nextNode outside the template\n        walker.currentNode = stack.pop()!;\n        continue;\n      }\n      index++;\n\n      if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n        if ((node as Element).hasAttributes()) {\n          const attributes = (node as Element).attributes;\n          const {length} = attributes;\n          // Per\n          // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n          // attributes are not guaranteed to be returned in document order.\n          // In particular, Edge/IE can return them out of order, so we cannot\n          // assume a correspondence between part index and attribute index.\n          let count = 0;\n          for (let i = 0; i < length; i++) {\n            if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n              count++;\n            }\n          }\n          while (count-- > 0) {\n            // Get the template literal section leading up to the first\n            // expression in this attribute\n            const stringForPart = strings[partIndex];\n            // Find the attribute name\n            const name = lastAttributeNameRegex.exec(stringForPart)![2];\n            // Find the corresponding attribute\n            // All bound attributes have had a suffix added in\n            // TemplateResult#getHTML to opt out of special attribute\n            // handling. To look up the attribute value we also need to add\n            // the suffix.\n            const attributeLookupName =\n                name.toLowerCase() + boundAttributeSuffix;\n            const attributeValue =\n                (node as Element).getAttribute(attributeLookupName)!;\n            (node as Element).removeAttribute(attributeLookupName);\n            const statics = attributeValue.split(markerRegex);\n            this.parts.push({type: 'attribute', index, name, strings: statics});\n            partIndex += statics.length - 1;\n          }\n        }\n        if ((node as Element).tagName === 'TEMPLATE') {\n          stack.push(node);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n      } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n        const data = (node as Text).data;\n        if (data.indexOf(marker) >= 0) {\n          const parent = node.parentNode!;\n          const strings = data.split(markerRegex);\n          const lastIndex = strings.length - 1;\n          // Generate a new text node for each literal section\n          // These nodes are also used as the markers for node parts\n          for (let i = 0; i < lastIndex; i++) {\n            let insert: Node;\n            let s = strings[i];\n            if (s === '') {\n              insert = createMarker();\n            } else {\n              const match = lastAttributeNameRegex.exec(s);\n              if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                s = s.slice(0, match.index) + match[1] +\n                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n              }\n              insert = document.createTextNode(s);\n            }\n            parent.insertBefore(insert, node);\n            this.parts.push({type: 'node', index: ++index});\n          }\n          // If there's no text, we must insert a comment to mark our place.\n          // Else, we can trust it will stick around after cloning.\n          if (strings[lastIndex] === '') {\n            parent.insertBefore(createMarker(), node);\n            nodesToRemove.push(node);\n          } else {\n            (node as Text).data = strings[lastIndex];\n          }\n          // We have a part for each match found\n          partIndex += lastIndex;\n        }\n      } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n        if ((node as Comment).data === marker) {\n          const parent = node.parentNode!;\n          // Add a new marker node to be the startNode of the Part if any of\n          // the following are true:\n          //  * We don't have a previousSibling\n          //  * The previousSibling is already the start of a previous part\n          if (node.previousSibling === null || index === lastPartIndex) {\n            index++;\n            parent.insertBefore(createMarker(), node);\n          }\n          lastPartIndex = index;\n          this.parts.push({type: 'node', index});\n          // If we don't have a nextSibling, keep this node so we have an end.\n          // Else, we can remove it to save future costs.\n          if (node.nextSibling === null) {\n            (node as Comment).data = '';\n          } else {\n            nodesToRemove.push(node);\n            index--;\n          }\n          partIndex++;\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            // TODO (justinfagnani): consider whether it's even worth it to\n            // make bindings in comments work\n            this.parts.push({type: 'node', index: -1});\n            partIndex++;\n          }\n        }\n      }\n    }\n\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\nconst endsWith = (str: string, suffix: string): boolean => {\n  const index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  readonly type: 'node',\n  index: number\n}|{readonly type: 'attribute', index: number, readonly name: string, readonly strings: ReadonlyArray<string>};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  private readonly __parts: Array<Part|undefined> = [];\n  readonly processor: TemplateProcessor;\n  readonly options: RenderOptions;\n  readonly template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: ReadonlyArray<unknown>) {\n    let i = 0;\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // There are a number of steps in the lifecycle of a template instance's\n    // DOM fragment:\n    //  1. Clone - create the instance fragment\n    //  2. Adopt - adopt into the main document\n    //  3. Process - find part markers and create parts\n    //  4. Upgrade - upgrade custom elements\n    //  5. Update - set node, attribute, property, etc., values\n    //  6. Connect - connect to the document. Optional and outside of this\n    //     method.\n    //\n    // We have a few constraints on the ordering of these steps:\n    //  * We need to upgrade before updating, so that property values will pass\n    //    through any property setters.\n    //  * We would like to process before upgrading so that we're sure that the\n    //    cloned fragment is inert and not disturbed by self-modifying DOM.\n    //  * We want custom elements to upgrade even in disconnected fragments.\n    //\n    // Given these constraints, with full custom elements support we would\n    // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n    //\n    // But Safari dooes not implement CustomElementRegistry#upgrade, so we\n    // can not implement that order and still have upgrade-before-update and\n    // upgrade disconnected fragments. So we instead sacrifice the\n    // process-before-upgrade constraint, since in Custom Elements v1 elements\n    // must not modify their light DOM in the constructor. We still have issues\n    // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n    // that don't strictly adhere to the no-modification rule because shadow\n    // DOM, which may be created in the constructor, is emulated by being placed\n    // in the light DOM.\n    //\n    // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n    // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n    // in one step.\n    //\n    // The Custom Elements v1 polyfill supports upgrade(), so the order when\n    // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n    // Connect.\n\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const stack: Node[] = [];\n    const parts = this.template.parts;\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        fragment,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    let partIndex = 0;\n    let nodeIndex = 0;\n    let part: TemplatePart;\n    let node = walker.nextNode();\n    // Loop through all the nodes and parts of a template\n    while (partIndex < parts.length) {\n      part = parts[partIndex];\n      if (!isTemplatePartActive(part)) {\n        this.__parts.push(undefined);\n        partIndex++;\n        continue;\n      }\n\n      // Progress the tree walker until we find our next part's node.\n      // Note that multiple parts may share the same node (attribute parts\n      // on a single element), so this loop may not run at all.\n      while (nodeIndex < part.index) {\n        nodeIndex++;\n        if (node!.nodeName === 'TEMPLATE') {\n          stack.push(node!);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n        if ((node = walker.nextNode()) === null) {\n          // We've exhausted the content inside a nested template element.\n          // Because we still have parts (the outer for-loop), we know:\n          // - There is a template in the stack\n          // - The walker will find a nextNode outside the template\n          walker.currentNode = stack.pop()!;\n          node = walker.nextNode();\n        }\n      }\n\n      // We've arrived at our part's node.\n      if (part.type === 'node') {\n        const part = this.processor.handleTextExpression(this.options);\n        part.insertAfterNode(node!.previousSibling!);\n        this.__parts.push(part);\n      } else {\n        this.__parts.push(...this.processor.handleAttributeExpressions(\n            node as Element, part.name, part.strings, this.options));\n      }\n      partIndex++;\n    }\n\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\nconst commentMarker = ` ${marker} `;\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  readonly strings: TemplateStringsArray;\n  readonly values: ReadonlyArray<unknown>;\n  readonly type: string;\n  readonly processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: ReadonlyArray<unknown>,\n      type: string, processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const l = this.strings.length - 1;\n    let html = '';\n    let isCommentBinding = false;\n\n    for (let i = 0; i < l; i++) {\n      const s = this.strings[i];\n      // For each binding we want to determine the kind of marker to insert\n      // into the template source before it's parsed by the browser's HTML\n      // parser. The marker type is based on whether the expression is in an\n      // attribute, text, or comment poisition.\n      //   * For node-position bindings we insert a comment with the marker\n      //     sentinel as its text content, like <!--{{lit-guid}}-->.\n      //   * For attribute bindings we insert just the marker sentinel for the\n      //     first binding, so that we support unquoted attribute bindings.\n      //     Subsequent bindings can use a comment marker because multi-binding\n      //     attributes must be quoted.\n      //   * For comment bindings we insert just the marker sentinel so we don't\n      //     close the comment.\n      //\n      // The following code scans the template source, but is *not* an HTML\n      // parser. We don't need to track the tree structure of the HTML, only\n      // whether a binding is inside a comment, and if not, if it appears to be\n      // the first binding in an attribute.\n      const commentOpen = s.lastIndexOf('<!--');\n      // We're in comment position if we have a comment open with no following\n      // comment close. Because <-- can appear in an attribute value there can\n      // be false positives.\n      isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n          s.indexOf('-->', commentOpen + 1) === -1;\n      // Check to see if we have an attribute-like sequence preceeding the\n      // expression. This can match \"name=value\" like structures in text,\n      // comments, and attribute values, so there can be false-positives.\n      const attributeMatch = lastAttributeNameRegex.exec(s);\n      if (attributeMatch === null) {\n        // We're only in this branch if we don't have a attribute-like\n        // preceeding sequence. For comments, this guards against unusual\n        // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n        // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n        // below.\n        html += s + (isCommentBinding ? commentMarker : nodeMarker);\n      } else {\n        // For attributes we use just a marker sentinel, and also append a\n        // $lit$ suffix to the name to opt-out of attribute-specific parsing\n        // that IE and Edge do for style and certain SVG attributes.\n        html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n            attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n            marker;\n      }\n    }\n    html += this.strings[l];\n    return html;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|Symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return Array.isArray(value) ||\n      // tslint:disable-next-line:no-any\n      !!(value && (value as any)[Symbol.iterator]);\n};\n\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attibute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  readonly parts: ReadonlyArray<AttributePart>;\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      (this.parts as AttributePart[])[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (isPrimitive(v) || !isIterable(v)) {\n          text += typeof v === 'string' ? v : String(v);\n        } else {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart implements Part {\n  readonly committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(committer: AttributeCommitter) {\n    this.committer = committer;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart implements Part {\n  readonly options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n   * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n   * such as those that appear in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part.__insert(this.startNode = createMarker());\n    part.__insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref.__insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    const value = this.__pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this.__commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this.__commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this.__commitNode(value);\n    } else if (isIterable(value)) {\n      this.__commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this.__commitText(value);\n    }\n  }\n\n  private __insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private __commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this.__insert(value);\n    this.value = value;\n  }\n\n  private __commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    // If `value` isn't already a string, we explicitly convert it here in case\n    // it can't be implicitly converted - i.e. it's a symbol.\n    const valueAsString: string =\n        typeof value === 'string' ? value : String(value);\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = valueAsString;\n    } else {\n      this.__commitNode(document.createTextNode(valueAsString));\n    }\n    this.value = value;\n  }\n\n  private __commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this.__commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private __commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n    const value = !!this.__pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n      this.value = value;\n    }\n    this.__pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  readonly single: boolean;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  protected _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // tslint:disable-next-line:no-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  // tslint:disable-next-line:no-any\n  window.addEventListener('test', options as any, options);\n  // tslint:disable-next-line:no-any\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  readonly element: Element;\n  readonly eventName: string;\n  readonly eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  private __options?: AddEventListenerOptions;\n  private __pendingValue: undefined|EventHandlerWithOptions = undefined;\n  private readonly __boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this.__boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this.__pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    if (shouldAddListener) {\n      this.__options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    this.value = newListener;\n    this.__pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): ReadonlyArray<Part> {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const committer = new PropertyCommitter(element, name.slice(1), strings);\n      return committer.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const committer = new AttributeCommitter(element, name, strings);\n    return committer.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  readonly stringsArray: WeakMap<TemplateStringsArray, Template>; //\n  readonly keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.2');\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module shady-render\n */\n\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(\n    template: Template, nodesToRemove: Set<Node>) {\n  const {element: {content}, parts} = template;\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let part = parts[partIndex];\n  let nodeIndex = -1;\n  let removeCount = 0;\n  const nodesToRemoveInTemplate = [];\n  let currentRemovingNode: Node|null = null;\n  while (walker.nextNode()) {\n    nodeIndex++;\n    const node = walker.currentNode as Element;\n    // End removal if stepped past the removing node\n    if (node.previousSibling === currentRemovingNode) {\n      currentRemovingNode = null;\n    }\n    // A node to remove was found in the template\n    if (nodesToRemove.has(node)) {\n      nodesToRemoveInTemplate.push(node);\n      // Track node we're removing\n      if (currentRemovingNode === null) {\n        currentRemovingNode = node;\n      }\n    }\n    // When removing, increment count by which to adjust subsequent part indices\n    if (currentRemovingNode !== null) {\n      removeCount++;\n    }\n    while (part !== undefined && part.index === nodeIndex) {\n      // If part is in a removed node deactivate it by setting index to -1 or\n      // adjust the index as needed.\n      part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n      // go to the next active part.\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n      part = parts[partIndex];\n    }\n  }\n  nodesToRemoveInTemplate.forEach((n) => n.parentNode!.removeChild(n));\n}\n\nconst countNodes = (node: Node) => {\n  let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n  const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n  while (walker.nextNode()) {\n    count++;\n  }\n  return count;\n};\n\nconst nextActiveIndexInTemplateParts =\n    (parts: TemplatePart[], startIndex: number = -1) => {\n      for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(\n    template: Template, node: Node, refNode: Node|null = null) {\n  const {element: {content}, parts} = template;\n  // If there's no refNode, then put node at end of template.\n  // No part indices need to be shifted in this case.\n  if (refNode === null || refNode === undefined) {\n    content.appendChild(node);\n    return;\n  }\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let insertCount = 0;\n  let walkerIndex = -1;\n  while (walker.nextNode()) {\n    walkerIndex++;\n    const walkerNode = walker.currentNode as Element;\n    if (walkerNode === refNode) {\n      insertCount = countNodes(node);\n      refNode.parentNode!.insertBefore(node, refNode);\n    }\n    while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n      // If we've inserted the node, simply adjust all subsequent parts\n      if (insertCount > 0) {\n        while (partIndex !== -1) {\n          parts[partIndex].index += insertCount;\n          partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n        return;\n      }\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @module shady-render\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {removeNodes} from './dom.js';\nimport {insertNodeIntoTemplate, removeNodesFromTemplate} from './modify-template.js';\nimport {RenderOptions} from './render-options.js';\nimport {parts, render as litRender} from './render.js';\nimport {templateCaches} from './template-factory.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\nexport {html, svg, TemplateResult} from '../lit-html.js';\n\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type: string, scopeName: string) =>\n    `${type}--${scopeName}`;\n\nlet compatibleShadyCSSVersion = true;\n\nif (typeof window.ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n  console.warn(\n      `Incompatible ShadyCSS version detected. ` +\n      `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n      `@webcomponents/shadycss@1.3.1.`);\n  compatibleShadyCSSVersion = false;\n}\n\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nconst shadyTemplateFactory = (scopeName: string) =>\n    (result: TemplateResult) => {\n      const cacheKey = getTemplateCacheKey(result.type, scopeName);\n      let templateCache = templateCaches.get(cacheKey);\n      if (templateCache === undefined) {\n        templateCache = {\n          stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n          keyString: new Map<string, Template>()\n        };\n        templateCaches.set(cacheKey, templateCache);\n      }\n\n      let template = templateCache.stringsArray.get(result.strings);\n      if (template !== undefined) {\n        return template;\n      }\n\n      const key = result.strings.join(marker);\n      template = templateCache.keyString.get(key);\n      if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n          window.ShadyCSS!.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n      }\n      templateCache.stringsArray.set(result.strings, template);\n      return template;\n    };\n\nconst TEMPLATE_TYPES = ['html', 'svg'];\n\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName: string) => {\n  TEMPLATE_TYPES.forEach((type) => {\n    const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n    if (templates !== undefined) {\n      templates.keyString.forEach((template) => {\n        const {element: {content}} = template;\n        // IE 11 doesn't support the iterable param Set constructor\n        const styles = new Set<Element>();\n        Array.from(content.querySelectorAll('style')).forEach((s: Element) => {\n          styles.add(s);\n        });\n        removeNodesFromTemplate(template, styles);\n      });\n    }\n  });\n};\n\nconst shadyRenderSet = new Set<string>();\n\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles =\n    (scopeName: string, renderedDOM: DocumentFragment, template?: Template) => {\n      shadyRenderSet.add(scopeName);\n      // If `renderedDOM` is stamped from a Template, then we need to edit that\n      // Template's underlying template element. Otherwise, we create one here\n      // to give to ShadyCSS, which still requires one while scoping.\n      const templateElement =\n          !!template ? template.element : document.createElement('template');\n      // Move styles out of rendered DOM and store.\n      const styles = renderedDOM.querySelectorAll('style');\n      const {length} = styles;\n      // If there are no styles, skip unnecessary work\n      if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n        return;\n      }\n      const condensedStyle = document.createElement('style');\n      // Collect styles into a single style. This helps us make sure ShadyCSS\n      // manipulations will not prevent us from being able to fix up template\n      // part indices.\n      // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n      // currently does this anyway. When it does not, this should be changed.\n      for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode!.removeChild(style);\n        condensedStyle.textContent! += style.textContent;\n      }\n      // Remove styles from nested templates in this scope.\n      removeStylesFromLitTemplates(scopeName);\n      // And then put the condensed style into the \"root\" template passed in as\n      // `template`.\n      const content = templateElement.content;\n      if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n      } else {\n        content.insertBefore(condensedStyle, content.firstChild);\n      }\n      // Note, it's important that ShadyCSS gets the template that `lit-html`\n      // will actually render so that it can update the style inside when\n      // needed (e.g. @apply native Shadow DOM case).\n      window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n      const style = content.querySelector('style');\n      if (window.ShadyCSS!.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n      } else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set<Node>();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n      }\n    };\n\nexport interface ShadyRenderOptions extends Partial<RenderOptions> {\n  scopeName: string;\n}\n\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment|ShadowRoot,\n     options: ShadyRenderOptions) => {\n      if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n      }\n      const scopeName = options.scopeName;\n      const hasRendered = parts.has(container);\n      const needsScoping = compatibleShadyCSSVersion &&\n          container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n          !!(container as ShadowRoot).host;\n      // Handle first render to a scope specially...\n      const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n      // On first scope render, render into a fragment; this cannot be a single\n      // fragment that is reused since nested renders can occur synchronously.\n      const renderContainer =\n          firstScopeRender ? document.createDocumentFragment() : container;\n      litRender(\n          result,\n          renderContainer,\n          {templateFactory: shadyTemplateFactory(scopeName), ...options} as\n              RenderOptions);\n      // When performing first scope render,\n      // (1) We've rendered into a fragment so that there's a chance to\n      // `prepareTemplateStyles` before sub-elements hit the DOM\n      // (which might cause them to render based on a common pattern of\n      // rendering in a custom element's `connectedCallback`);\n      // (2) Scope the template with ShadyCSS one time only for this scope.\n      // (3) Render the fragment into the container and make sure the\n      // container knows its `part` is the one we just rendered. This ensures\n      // DOM will be re-used on subsequent renders.\n      if (firstScopeRender) {\n        const part = parts.get(renderContainer)!;\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(\n            scopeName, renderContainer as DocumentFragment, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n      }\n      // After elements have hit the DOM, update styling if this is the\n      // initial render to this container.\n      // This is needed whenever dynamic changes are made so it would be\n      // safest to do every render; however, this would regress performance\n      // so we leave it up to the user to call `ShadyCSS.styleElement`\n      // for dynamic changes.\n      if (!hasRendered && needsScoping) {\n        window.ShadyCSS!.styleElement((container as ShadowRoot).host);\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    <P extends PropertyKey>(prop: P, _obj: unknown): P => prop;\n\ndeclare global {\n  var JSCompiler_renameProperty: <P extends PropertyKey>(\n      prop: P, _obj: unknown) => P;\n\n  interface Window {\n    JSCompiler_renameProperty: typeof JSCompiler_renameProperty;\n  }\n}\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Function called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string|null, type?: TypeHint): Type;\n\n  /**\n   * Function called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n    ComplexAttributeConverter<Type>|((value: string, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean|string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\nexport type PropertyValues = Map<PropertyKey, unknown>;\n\nexport const defaultConverter: ComplexAttributeConverter = {\n\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        return value ? '' : null;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        return value == null ? value : JSON.stringify(value);\n    }\n    return value;\n  },\n\n  fromAttribute(value: string|null, type?: unknown) {\n    switch (type) {\n      case Boolean:\n        return value !== null;\n      case Number:\n        return value === null ? null : Number(value);\n      case Object:\n      case Array:\n        return JSON.parse(value!);\n    }\n    return value;\n  }\n\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean => {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual\n};\n\nconst microtaskPromise = Promise.resolve(true);\n\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\nconst STATE_HAS_CONNECTED = 1 << 5;\ntype UpdateState = typeof STATE_HAS_UPDATED|typeof STATE_UPDATE_REQUESTED|\n    typeof STATE_IS_REFLECTING_TO_ATTRIBUTE|\n    typeof STATE_IS_REFLECTING_TO_PROPERTY|typeof STATE_HAS_CONNECTED;\n\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n */\nexport abstract class UpdatingElement extends HTMLElement {\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   */\n  private static _attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having finished creating properties.\n   */\n  protected static[finalized] = true;\n\n  /**\n   * Memoized list of all class properties, including any superclass properties.\n   * Created lazily on user subclasses when finalizing the class.\n   */\n  private static _classProperties?: PropertyDeclarationMap;\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring the property.\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   */\n  static get observedAttributes() {\n    // note: piggy backing on this to ensure we're finalized.\n    this.finalize();\n    const attributes: string[] = [];\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    this._classProperties!.forEach((v, p) => {\n      const attr = this._attributeNameForProperty(p, v);\n      if (attr !== undefined) {\n        this._attributeToPropertyMap.set(attr, p);\n        attributes.push(attr);\n      }\n    });\n    return attributes;\n  }\n\n  /**\n   * Ensures the private `_classProperties` property metadata is created.\n   * In addition to `finalize` this is also called in `createProperty` to\n   * ensure the `@property` decorator can add property metadata.\n   */\n  /** @nocollapse */\n  private static _ensureClassProperties() {\n    // ensure private storage for property declarations.\n    if (!this.hasOwnProperty(\n            JSCompiler_renameProperty('_classProperties', this))) {\n      this._classProperties = new Map();\n      // NOTE: Workaround IE11 not supporting Map constructor argument.\n      const superProperties: PropertyDeclarationMap =\n          Object.getPrototypeOf(this)._classProperties;\n      if (superProperties !== undefined) {\n        superProperties.forEach(\n            (v: PropertyDeclaration, k: PropertyKey) =>\n                this._classProperties!.set(k, v));\n      }\n    }\n  }\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist.\n   * The property setter calls the property's `hasChanged` property option\n   * or uses a strict identity check to determine whether or not to request\n   * an update.\n   * @nocollapse\n   */\n  static createProperty(\n      name: PropertyKey,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    // Note, since this can be called by the `@property` decorator which\n    // is called before `finalize`, we ensure storage exists for property\n    // metadata.\n    this._ensureClassProperties();\n    this._classProperties!.set(name, options);\n    // Do not generate an accessor if the prototype already has one, since\n    // it would be lost otherwise and that would never be the user's intention;\n    // Instead, we expect users to call `requestUpdate` themselves from\n    // user-defined accessors. Note that if the super has an accessor we will\n    // still overwrite it\n    if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n      return;\n    }\n    const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n    Object.defineProperty(this.prototype, name, {\n      // tslint:disable-next-line:no-any no symbol in index\n      get(): any {\n        return (this as {[key: string]: unknown})[key as string];\n      },\n      set(this: UpdatingElement, value: unknown) {\n        const oldValue =\n            (this as {} as {[key: string]: unknown})[name as string];\n        (this as {} as {[key: string]: unknown})[key as string] = value;\n        (this as unknown as UpdatingElement)._requestUpdate(name, oldValue);\n      },\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  /**\n   * Creates property accessors for registered properties and ensures\n   * any superclasses are also finalized.\n   * @nocollapse\n   */\n  protected static finalize() {\n    // finalize any superclasses\n    const superCtor = Object.getPrototypeOf(this);\n    if (!superCtor.hasOwnProperty(finalized)) {\n      superCtor.finalize();\n    }\n    this[finalized] = true;\n    this._ensureClassProperties();\n    // initialize Map populated in observedAttributes\n    this._attributeToPropertyMap = new Map();\n    // make any properties\n    // Note, only process \"own\" properties since this element will inherit\n    // any properties defined on the superClass, and finalization ensures\n    // the entire prototype chain is finalized.\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      // support symbols in properties (IE11 does not support this)\n      const propKeys = [\n        ...Object.getOwnPropertyNames(props),\n        ...(typeof Object.getOwnPropertySymbols === 'function') ?\n            Object.getOwnPropertySymbols(props) :\n            []\n      ];\n      // This for/of is ok because propKeys is an array\n      for (const p of propKeys) {\n        // note, use of `any` is due to TypeSript lack of support for symbol in\n        // index types\n        // tslint:disable-next-line:no-any no symbol in index\n        this.createProperty(p, (props as any)[p]);\n      }\n    }\n  }\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static _attributeNameForProperty(\n      name: PropertyKey, options: PropertyDeclaration) {\n    const attribute = options.attribute;\n    return attribute === false ?\n        undefined :\n        (typeof attribute === 'string' ?\n             attribute :\n             (typeof name === 'string' ? name.toLowerCase() : undefined));\n  }\n\n  /**\n   * Returns true if a property should request an update.\n   * Called when a property value is set and uses the `hasChanged`\n   * option for the property if present or a strict identity check.\n   * @nocollapse\n   */\n  private static _valueHasChanged(\n      value: unknown, old: unknown, hasChanged: HasChanged = notEqual) {\n    return hasChanged(value, old);\n  }\n\n  /**\n   * Returns the property value for the given attribute value.\n   * Called via the `attributeChangedCallback` and uses the property's\n   * `converter` or `converter.fromAttribute` property option.\n   * @nocollapse\n   */\n  private static _propertyValueFromAttribute(\n      value: string|null, options: PropertyDeclaration) {\n    const type = options.type;\n    const converter = options.converter || defaultConverter;\n    const fromAttribute =\n        (typeof converter === 'function' ? converter : converter.fromAttribute);\n    return fromAttribute ? fromAttribute(value, type) : value;\n  }\n\n  /**\n   * Returns the attribute value for the given property value. If this\n   * returns undefined, the property will *not* be reflected to an attribute.\n   * If this returns null, the attribute will be removed, otherwise the\n   * attribute will be set to the value.\n   * This uses the property's `reflect` and `type.toAttribute` property options.\n   * @nocollapse\n   */\n  private static _propertyValueToAttribute(\n      value: unknown, options: PropertyDeclaration) {\n    if (options.reflect === undefined) {\n      return;\n    }\n    const type = options.type;\n    const converter = options.converter;\n    const toAttribute =\n        converter && (converter as ComplexAttributeConverter).toAttribute ||\n        defaultConverter.toAttribute;\n    return toAttribute!(value, type);\n  }\n\n  private _updateState: UpdateState = 0;\n  private _instanceProperties: PropertyValues|undefined = undefined;\n  private _updatePromise: Promise<unknown> = microtaskPromise;\n  private _hasConnectedResolver: (() => void)|undefined = undefined;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   */\n  private _changedProperties: PropertyValues = new Map();\n\n  /**\n   * Map with keys of properties that should be reflected when updated.\n   */\n  private _reflectingProperties: Map<PropertyKey, PropertyDeclaration>|\n      undefined = undefined;\n\n  constructor() {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Performs element initialization. By default captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    this._saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this._requestUpdate();\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private _saveInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    (this.constructor as typeof UpdatingElement)\n        ._classProperties!.forEach((_v, p) => {\n          if (this.hasOwnProperty(p)) {\n            const value = this[p as keyof this];\n            delete this[p as keyof this];\n            if (!this._instanceProperties) {\n              this._instanceProperties = new Map();\n            }\n            this._instanceProperties.set(p, value);\n          }\n        });\n  }\n\n  /**\n   * Applies previously saved instance properties.\n   */\n  private _applyInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    // tslint:disable-next-line:no-any\n    this._instanceProperties!.forEach((v, p) => (this as any)[p] = v);\n    this._instanceProperties = undefined;\n  }\n\n  connectedCallback() {\n    this._updateState = this._updateState | STATE_HAS_CONNECTED;\n    // Ensure first connection completes an update. Updates cannot complete\n    // before connection and if one is pending connection the\n    // `_hasConnectionResolver` will exist. If so, resolve it to complete the\n    // update, otherwise requestUpdate.\n    if (this._hasConnectedResolver) {\n      this._hasConnectedResolver();\n      this._hasConnectedResolver = undefined;\n    }\n  }\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   */\n  disconnectedCallback() {\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   */\n  attributeChangedCallback(name: string, old: string|null, value: string|null) {\n    if (old !== value) {\n      this._attributeToProperty(name, value);\n    }\n  }\n\n  private _propertyToAttribute(\n      name: PropertyKey, value: unknown,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const attr = ctor._attributeNameForProperty(name, options);\n    if (attr !== undefined) {\n      const attrValue = ctor._propertyValueToAttribute(value, options);\n      // an undefined value does not change the attribute.\n      if (attrValue === undefined) {\n        return;\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n    }\n  }\n\n  private _attributeToProperty(name: string, value: string|null) {\n    // Use tracking info to avoid deserializing attribute value if it was\n    // just set from a property setter.\n    if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n      return;\n    }\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const propName = ctor._attributeToPropertyMap.get(name);\n    if (propName !== undefined) {\n      const options =\n          ctor._classProperties!.get(propName) || defaultPropertyDeclaration;\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n      this[propName as keyof this] =\n          // tslint:disable-next-line:no-any\n          ctor._propertyValueFromAttribute(value, options) as any;\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n    }\n  }\n\n  /**\n   * This private version of `requestUpdate` does not access or return the\n   * `updateComplete` promise. This promise can be overridden and is therefore\n   * not free to access.\n   */\n  private _requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    let shouldRequestUpdate = true;\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      const ctor = this.constructor as typeof UpdatingElement;\n      const options =\n          ctor._classProperties!.get(name) || defaultPropertyDeclaration;\n      if (ctor._valueHasChanged(\n              this[name as keyof this], oldValue, options.hasChanged)) {\n        if (!this._changedProperties.has(name)) {\n          this._changedProperties.set(name, oldValue);\n        }\n        // Add to reflecting properties set.\n        // Note, it's important that every change has a chance to add the\n        // property to `_reflectingProperties`. This ensures setting\n        // attribute + property reflects correctly.\n        if (options.reflect === true &&\n            !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n          if (this._reflectingProperties === undefined) {\n            this._reflectingProperties = new Map();\n          }\n          this._reflectingProperties.set(name, options);\n        }\n      } else {\n        // Abort the request if the property should not be considered changed.\n        shouldRequestUpdate = false;\n      }\n    }\n    if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n      this._enqueueUpdate();\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should\n   * be called when an element should update based on some state not triggered\n   * by setting a property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored. Returns the `updateComplete` Promise which is resolved\n   * when the update completes.\n   *\n   * @param name {PropertyKey} (optional) name of requesting property\n   * @param oldValue {any} (optional) old value of requesting property\n   * @returns {Promise} A Promise that is resolved when the update completes.\n   */\n  requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    this._requestUpdate(name, oldValue);\n    return this.updateComplete;\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async _enqueueUpdate() {\n    // Mark state updating...\n    this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n    let resolve!: (r: boolean) => void;\n    let reject!: (e: Error) => void;\n    const previousUpdatePromise = this._updatePromise;\n    this._updatePromise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await previousUpdatePromise;\n    } catch (e) {\n      // Ignore any previous errors. We only care that the previous cycle is\n      // done. Any error should have been handled in the previous update.\n    }\n    // Make sure the element has connected before updating.\n    if (!this._hasConnected) {\n      await new Promise((res) => this._hasConnectedResolver = res);\n    }\n    try {\n      const result = this.performUpdate();\n      // If `performUpdate` returns a Promise, we await it. This is done to\n      // enable coordinating updates with a scheduler. Note, the result is\n      // checked to avoid delaying an additional microtask unless we need to.\n      if (result != null) {\n        await result;\n      }\n    } catch (e) {\n      reject(e);\n    }\n    resolve(!this._hasRequestedUpdate);\n  }\n\n  private get _hasConnected() {\n    return (this._updateState & STATE_HAS_CONNECTED);\n  }\n\n  private get _hasRequestedUpdate() {\n    return (this._updateState & STATE_UPDATE_REQUESTED);\n  }\n\n  protected get hasUpdated() {\n    return (this._updateState & STATE_HAS_UPDATED);\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * You can override this method to change the timing of updates. If this\n   * method is overridden, `super.performUpdate()` must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```\n   * protected async performUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.performUpdate();\n   * }\n   * ```\n   */\n  protected performUpdate(): void|Promise<unknown> {\n    // Mixin instance properties once, if they exist.\n    if (this._instanceProperties) {\n      this._applyInstanceProperties();\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.update(changedProperties);\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      throw e;\n    } finally {\n      // Ensure element can accept additional updates after an exception.\n      this._markUpdated();\n    }\n    if (shouldUpdate) {\n      if (!(this._updateState & STATE_HAS_UPDATED)) {\n        this._updateState = this._updateState | STATE_HAS_UPDATED;\n        this.firstUpdated(changedProperties);\n      }\n      this.updated(changedProperties);\n    }\n  }\n\n  private _markUpdated() {\n    this._changedProperties = new Map();\n    this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `_getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super._getUpdateComplete()`, then any subsequent state.\n   *\n   * @returns {Promise} The Promise returns a boolean that indicates if the\n   * update resolved without triggering another update.\n   */\n  get updateComplete() {\n    return this._getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   *   class MyElement extends LitElement {\n   *     async _getUpdateComplete() {\n   *       await super._getUpdateComplete();\n   *       await this._myChild.updateComplete;\n   *     }\n   *   }\n   */\n  protected _getUpdateComplete() {\n    return this._updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(_changedProperties: PropertyValues) {\n    if (this._reflectingProperties !== undefined &&\n        this._reflectingProperties.size > 0) {\n      // Use forEach so this works even if for/of loops are compiled to for\n      // loops expecting arrays\n      this._reflectingProperties.forEach(\n          (v, k) => this._propertyToAttribute(k, this[k as keyof this], v));\n      this._reflectingProperties = undefined;\n    }\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected updated(_changedProperties: PropertyValues) {\n  }\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {LitElement} from '../lit-element.js';\n\nimport {PropertyDeclaration, UpdatingElement} from './updating-element.js';\n\nexport type Constructor<T> = {\n  new (...args: unknown[]): T\n};\n\n// From the TC39 Decorators proposal\ninterface ClassDescriptor {\n  kind: 'class';\n  elements: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n}\n\n// From the TC39 Decorators proposal\ninterface ClassElement {\n  kind: 'field'|'method';\n  key: PropertyKey;\n  placement: 'static'|'prototype'|'own';\n  initializer?: Function;\n  extras?: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n  descriptor?: PropertyDescriptor;\n}\n\nconst legacyCustomElement =\n    (tagName: string, clazz: Constructor<HTMLElement>) => {\n      window.customElements.define(tagName, clazz);\n      // Cast as any because TS doesn't recognize the return type as being a\n      // subtype of the decorated class when clazz is typed as\n      // `Constructor<HTMLElement>` for some reason.\n      // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n      // applied to elements however.\n      // tslint:disable-next-line:no-any\n      return clazz as any;\n    };\n\nconst standardCustomElement =\n    (tagName: string, descriptor: ClassDescriptor) => {\n      const {kind, elements} = descriptor;\n      return {\n        kind,\n        elements,\n        // This callback is called once the class is otherwise fully defined\n        finisher(clazz: Constructor<HTMLElement>) {\n          window.customElements.define(tagName, clazz);\n        }\n      };\n    };\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * @param tagName the name of the custom element to define\n */\nexport const customElement = (tagName: string) =>\n    (classOrDescriptor: Constructor<HTMLElement>|ClassDescriptor) =>\n        (typeof classOrDescriptor === 'function') ?\n    legacyCustomElement(tagName, classOrDescriptor) :\n    standardCustomElement(tagName, classOrDescriptor);\n\nconst standardProperty =\n    (options: PropertyDeclaration, element: ClassElement) => {\n      // When decorating an accessor, pass it through and add property metadata.\n      // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n      // stomp over the user's accessor.\n      if (element.kind === 'method' && element.descriptor &&\n          !('value' in element.descriptor)) {\n        return {\n          ...element,\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      } else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n          kind: 'field',\n          key: Symbol(),\n          placement: 'own',\n          descriptor: {},\n          // When @babel/plugin-proposal-decorators implements initializers,\n          // do this instead of the initializer below. See:\n          // https://github.com/babel/babel/issues/9260 extras: [\n          //   {\n          //     kind: 'initializer',\n          //     placement: 'own',\n          //     initializer: descriptor.initializer,\n          //   }\n          // ],\n          initializer(this: {[key: string]: unknown}) {\n            if (typeof element.initializer === 'function') {\n              this[element.key as string] = element.initializer.call(this);\n            }\n          },\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      }\n    };\n\nconst legacyProperty =\n    (options: PropertyDeclaration, proto: Object, name: PropertyKey) => {\n      (proto.constructor as typeof UpdatingElement)\n          .createProperty(name, options);\n    };\n\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A `PropertyDeclaration` may optionally be\n * supplied to configure property features.\n *\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration) {\n  // tslint:disable-next-line:no-any decorator\n  return (protoOrDescriptor: Object|ClassElement, name?: PropertyKey): any =>\n             (name !== undefined) ?\n      legacyProperty(options!, protoOrDescriptor as Object, name) :\n      standardProperty(options!, protoOrDescriptor as ClassElement);\n}\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function query(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelector(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function queryAll(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelectorAll(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\nconst legacyQuery =\n    (descriptor: PropertyDescriptor, proto: Object, name: PropertyKey) => {\n      Object.defineProperty(proto, name, descriptor);\n    };\n\nconst standardQuery = (descriptor: PropertyDescriptor, element: ClassElement) =>\n    ({\n      kind: 'method',\n      placement: 'prototype',\n      key: element.key,\n      descriptor,\n    });\n\nconst standardEventOptions =\n    (options: AddEventListenerOptions, element: ClassElement) => {\n      return {\n        ...element,\n        finisher(clazz: typeof UpdatingElement) {\n          Object.assign(\n              clazz.prototype[element.key as keyof UpdatingElement], options);\n        }\n      };\n    };\n\nconst legacyEventOptions =\n    // tslint:disable-next-line:no-any legacy decorator\n    (options: AddEventListenerOptions, proto: any, name: PropertyKey) => {\n      Object.assign(proto[name], options);\n    };\n\n/**\n * Adds event listener options to a method used as an event listener in a\n * lit-html template.\n *\n * @param options An object that specifis event listener options as accepted by\n * `EventTarget#addEventListener` and `EventTarget#removeEventListener`.\n *\n * Current browsers support the `capture`, `passive`, and `once` options. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters\n *\n * @example\n *\n *     class MyElement {\n *\n *       clicked = false;\n *\n *       render() {\n *         return html`<div @click=${this._onClick}`><button></button></div>`;\n *       }\n *\n *       @eventOptions({capture: true})\n *       _onClick(e) {\n *         this.clicked = true;\n *       }\n *     }\n */\nexport const eventOptions = (options: AddEventListenerOptions) =>\n    // Return value typed as any to prevent TypeScript from complaining that\n    // standard decorator function signature does not match TypeScript decorator\n    // signature\n    // TODO(kschaaf): unclear why it was only failing on this decorator and not\n    // the others\n    ((protoOrDescriptor: Object|ClassElement, name?: string) =>\n         (name !== undefined) ?\n         legacyEventOptions(options, protoOrDescriptor as Object, name) :\n         standardEventOptions(options, protoOrDescriptor as ClassElement)) as\n        // tslint:disable-next-line:no-any decorator\n        any;\n","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\nexport const supportsAdoptingStyleSheets =\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\nconst constructionToken = Symbol();\n\nexport class CSSResult {\n  _styleSheet?: CSSStyleSheet|null;\n\n  readonly cssText: string;\n\n  constructor(cssText: string, safeToken: symbol) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n          'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n    }\n    this.cssText = cssText;\n  }\n\n  // Note, this is a getter so that it's lazy. In practice, this means\n  // stylesheets are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet|null {\n    if (this._styleSheet === undefined) {\n      // Note, if `adoptedStyleSheets` is supported then we assume CSSStyleSheet\n      // is constructable.\n      if (supportsAdoptingStyleSheets) {\n        this._styleSheet = new CSSStyleSheet();\n        this._styleSheet.replaceSync(this.cssText);\n      } else {\n        this._styleSheet = null;\n      }\n    }\n    return this._styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\n/**\n * Wrap a value for interpolation in a css tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) => {\n  return new CSSResult(String(value), constructionToken);\n};\n\nconst textFromCSSResult = (value: CSSResult|number) => {\n  if (value instanceof CSSResult) {\n    return value.cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n        `Value passed to 'css' function must be a 'css' function result: ${\n            value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n  }\n};\n\n/**\n * Template tag which which can be used with LitElement's `style` property to\n * set element styles. For security reasons, only literal string values may be\n * used. To incorporate non-literal values `unsafeCSS` may be used inside a\n * template string part.\n */\nexport const css =\n    (strings: TemplateStringsArray, ...values: (CSSResult|number)[]) => {\n      const cssText = values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]);\n      return new CSSResult(cssText, constructionToken);\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport {TemplateResult} from 'lit-html';\nimport {render} from 'lit-html/lib/shady-render.js';\n\nimport {PropertyValues, UpdatingElement} from './lib/updating-element.js';\n\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport {html, svg, TemplateResult, SVGTemplateResult} from 'lit-html/lit-html.js';\nimport {supportsAdoptingStyleSheets, CSSResult} from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n\ndeclare global {\n  interface Window {\n    litElementVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.2.1');\n\nexport interface CSSResultArray extends Array<CSSResult|CSSResultArray> {}\n\n/**\n * Minimal implementation of Array.prototype.flat\n * @param arr the array to flatten\n * @param result the accumlated result\n */\nfunction arrayFlat(\n    styles: CSSResultArray, result: CSSResult[] = []): CSSResult[] {\n  for (let i = 0, length = styles.length; i < length; i++) {\n    const value = styles[i];\n    if (Array.isArray(value)) {\n      arrayFlat(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/** Deeply flattens styles array. Uses native flat if available. */\nconst flattenStyles = (styles: CSSResultArray): CSSResult[] =>\n    styles.flat ? styles.flat(Infinity) : arrayFlat(styles);\n\nexport class LitElement extends UpdatingElement {\n\n  /**\n   * Ensure this class is marked as `finalized` as an optimization ensuring\n   * it will not needlessly try to `finalize`.\n   *\n   * Note this property name is a string to prevent breaking Closure JS Compiler\n   * optimizations. See updating-element.ts for more information.\n   */\n  protected static['finalized'] = true;\n  /**\n   * Render method used to render the lit-html TemplateResult to the element's\n   * DOM.\n   * @param {TemplateResult} Template to render.\n   * @param {Element|DocumentFragment} Node into which to render.\n   * @param {String} Element name.\n   * @nocollapse\n   */\n  static render = render;\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the `css` tag function.\n   */\n  static styles?: CSSResult|CSSResultArray;\n\n  private static _styles: CSSResult[]|undefined;\n\n  /** @nocollapse */\n  protected static finalize() {\n    // The Closure JS Compiler does not always preserve the correct \"this\"\n    // when calling static super methods (b/137460243), so explicitly bind.\n    super.finalize.call(this);\n    // Prepare styling that is stamped at first render time. Styling\n    // is built from user provided `styles` or is inherited from the superclass.\n    this._styles =\n        this.hasOwnProperty(JSCompiler_renameProperty('styles', this)) ?\n        this._getUniqueStyles() :\n        this._styles || [];\n  }\n\n  /** @nocollapse */\n  private static _getUniqueStyles(): CSSResult[] {\n    // Take care not to call `this.styles` multiple times since this generates\n    // new CSSResults each time.\n    // TODO(sorvell): Since we do not cache CSSResults by input, any\n    // shared styles will generate new stylesheet objects, which is wasteful.\n    // This should be addressed when a browser ships constructable\n    // stylesheets.\n    const userStyles = this.styles;\n    const styles: CSSResult[] = [];\n    if (Array.isArray(userStyles)) {\n      const flatStyles = flattenStyles(userStyles);\n      // As a performance optimization to avoid duplicated styling that can\n      // occur especially when composing via subclassing, de-duplicate styles\n      // preserving the last item in the list. The last item is kept to\n      // try to preserve cascade order with the assumption that it's most\n      // important that last added styles override previous styles.\n      const styleSet = flatStyles.reduceRight((set, s) => {\n        set.add(s);\n        // on IE set.add does not return the set.\n        return set;\n      }, new Set<CSSResult>());\n      // Array.from does not work on Set in IE\n      styleSet.forEach((v) => styles.unshift(v));\n    } else if (userStyles) {\n      styles.push(userStyles);\n    }\n    return styles;\n  }\n\n  private _needsShimAdoptedStyleSheets?: boolean;\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   */\n  readonly renderRoot!: Element|DocumentFragment;\n\n  /**\n   * Performs element initialization. By default this calls `createRenderRoot`\n   * to create the element `renderRoot` node and captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    super.initialize();\n    (this as {renderRoot: Element | DocumentFragment}).renderRoot =\n        this.createRenderRoot();\n    // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n    // element's getRootNode(). While this could be done, we're choosing not to\n    // support this now since it would require different logic around de-duping.\n    if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n      this.adoptStyles();\n    }\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   * @returns {Element|DocumentFragment} Returns a node into which to render.\n   */\n  protected createRenderRoot(): Element|ShadowRoot {\n    return this.attachShadow({mode: 'open'});\n  }\n\n  /**\n   * Applies styling to the element shadowRoot using the `static get styles`\n   * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n   * available and will fallback otherwise. When Shadow DOM is polyfilled,\n   * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n   * is available but `adoptedStyleSheets` is not, styles are appended to the\n   * end of the `shadowRoot` to [mimic spec\n   * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n   */\n  protected adoptStyles() {\n    const styles = (this.constructor as typeof LitElement)._styles!;\n    if (styles.length === 0) {\n      return;\n    }\n    // There are three separate cases here based on Shadow DOM support.\n    // (1) shadowRoot polyfilled: use ShadyCSS\n    // (2) shadowRoot.adoptedStyleSheets available: use it.\n    // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n    // rendering\n    if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n      window.ShadyCSS.ScopingShim!.prepareAdoptedCssText(\n          styles.map((s) => s.cssText), this.localName);\n    } else if (supportsAdoptingStyleSheets) {\n      (this.renderRoot as ShadowRoot).adoptedStyleSheets =\n          styles.map((s) => s.styleSheet!);\n    } else {\n      // This must be done after rendering so the actual style insertion is done\n      // in `update`.\n      this._needsShimAdoptedStyleSheets = true;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // Note, first update/render handles styleElement so we only call this if\n    // connected after first update.\n    if (this.hasUpdated && window.ShadyCSS !== undefined) {\n      window.ShadyCSS.styleElement(this);\n    }\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(changedProperties: PropertyValues) {\n    super.update(changedProperties);\n    const templateResult = this.render() as unknown;\n    if (templateResult instanceof TemplateResult) {\n      (this.constructor as typeof LitElement)\n          .render(\n              templateResult,\n              this.renderRoot,\n              {scopeName: this.localName, eventContext: this});\n    }\n    // When native Shadow DOM is used but adoptedStyles are not supported,\n    // insert styling after rendering to ensure adoptedStyles have highest\n    // priority.\n    if (this._needsShimAdoptedStyleSheets) {\n      this._needsShimAdoptedStyleSheets = false;\n      (this.constructor as typeof LitElement)._styles!.forEach((s) => {\n        const style = document.createElement('style');\n        style.textContent = s.cssText;\n        this.renderRoot.appendChild(style);\n      });\n    }\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method must return\n   * a lit-html TemplateResult. Setting properties inside this method will *not*\n   * trigger the element to update.\n   */\n  protected render(): TemplateResult|void {\n  }\n}\n","/*\n\thttps://icomoon.io/app\n*/\nimport { LitElement, html, css } from 'lit-element';\n\nconst svgDef = require('./icons.svg.html');\n\nclass SvgIcons {\n\n\tget prefix(){ return 'icon-'}\n\n\tget svgDefElement() {\n\n\t\tif( !this.__svgDefElement ){\n\t\t\tlet div = document.createElement('div')\n\t\t\tdiv.innerHTML = svgDef\n\t\t\tthis.__svgDefElement = div.firstChild\n\t\t\t// remove all the <title> tags so they dont show as \"tooltips\" when hovering\n\t\t\tthis.__svgDefElement.querySelectorAll('title').forEach(el=>el.remove())\n\t\t\tdiv = null\n\t\t}\n\n\t\treturn this.__svgDefElement\n\t}\n\n\tget names(){\n\t\treturn Array.from(this.svgDefElement.querySelectorAll('symbol')).map(el=>el.id.replace(this.prefix, '')).sort()\n\t}\n\n\tget(name){\n\n\t\tlet symbol = this.svgDefElement.querySelector(`#${this.prefix}${name}`)\n\t\tlet svg = null\n\n\t\tif( symbol ){\n\n\t\t\tlet div = document.createElement('div')\n\t\t\tdiv.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\">${symbol.innerHTML}</svg>`\n\t\t\tsvg = div.firstChild\n\n\t\t\t// copy attributes\n\t\t\tArray.from(symbol.attributes).forEach(attr=>{\n\t\t\t\tsvg.setAttribute(attr.name, attr.value)\n\t\t\t})\n\t\t}\n\t\t\n\t\treturn svg\n\t}\n}\n\nexport const svgIcons = new SvgIcons()\n\nexport class IconElement extends HTMLElement {\n\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\ttemp.innerHTML = `<style>\n\t\t:host {\n\t\t\tdisplay: inline-flex;\n\t\t\tvertical-align: middle;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tcolor: inherit;\n\t\t\t--size: 1em;\n\t\t\theight: var(--size);\n\t\t}\n\n\t\t:host([square]) {\n\t\t\twidth: var(--size);\n\t\t}\n\n\t\t:host([invalid]) {\n\t\t\tbackground: #f44336;\n\t\t}\n\n\t\tsvg {\n\t\t\theight: 100%;\n\t\t\t/* width: 100%; */\n\t\t\tdisplay: inline-block;\n\t\t\tfill: currentColor;\n\t\t\tcolor: currentColor;\n\t\t}\n\t\t</style>\n\t\t<slot></slot>\n\t\t`\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\t_setSVG(){\n\n\t\tif( this._svg )\n\t\t\tthis._svg.remove()\n\n\t\tthis._svg = svgIcons.get(this.name)\n\t\t\n\t\tif( this._svg ){\n\t\t\tthis.removeAttribute('invalid')\n\t\t\tthis.shadowRoot.appendChild(this._svg)\n\t\t}else{\n\t\t\tthis.setAttribute('invalid', '')\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['name']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'name' )\n\t\t\tthis._setSVG()\n\t}\n\t\n\tget name(){ return this.getAttribute('name')}\n\tset name(val){ return this.setAttribute('name', val)}\n\n}\n\t\ncustomElements.define('b-icon', IconElement)\n\nexport class IconList extends LitElement {\n\n\tstatic get properties(){return {\n\t\tcols: {type: Number, reflect: true}\n\t}}\n\n\tconstructor(){\n\t\tsuper()\n\t\tthis.cols = 6\n\t}\n\n\tstatic get styles(){return css`\n\t\t:host {\n\t\t\tdisplay: block;\n\t\t\tcolumn-count: 6;\n\t\t\tgap: 1em;\n\t\t\twidth: 100%;\n\t\t\tfont-size:1.2em;\n\t\t\tpadding: 1em;\n\t\t\toverflow: auto;\n\t\t}\n\n\t\t:host([cols=\"1\"]) { column-count: 1}\n\t\t:host([cols=\"2\"]) { column-count: 2}\n\t\t:host([cols=\"3\"]) { column-count: 3}\n\t\t:host([cols=\"4\"]) { column-count: 4}\n\t\t:host([cols=\"5\"]) { column-count: 5}\n\t\t:host([cols=\"6\"]) { column-count: 6}\n\n\t\t:host > div {\n\t\t\tmargin: .75em;\n\t\t}\n\n\t\t:host > div:first-child {\n\t\t\tmargin-top: 0;\n\t\t}\n\n\t\tb-icon {\n\t\t\twidth: 1.6em;\n\t\t}\n\n\t\tsmall {\n\t\t\tcolor: rgba(0,0,0,.5);\n\t\t}\n\n\t\t@media (max-width: 550px) {\n            :host {\n                column-count: 1 !important;\n            }\n        }\n\t`}\n\n\trender(){return html`\n\t\t${svgIcons.names.map(name=>html`\n\t\t\t<div>\n\t\t\t\t<b-icon name=${name}></b-icon> <small>${name}</small>\n\t\t\t</div>\n\t\t`)}\n\t`}\n}\ncustomElements.define('b-icon-list', IconList)","/*\n\tSVG and idea taken from https://ant.design/components/button/\n\t\n\tExamples: \n\t<circle-spinner/>\n\t<circle-spinner style=\"--size:.8em; color: white\"/>\n*/\n\nclass SpinnerElement extends HTMLElement {\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        \n        temp.innerHTML = `<style>\n\t\t\t:host {\n\t\t\t\t--size: .8em;\n\t\t\t\theight: var(--size);\n\t\t\t    width: var(--size);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\t\t\t}\n\t\t\t\n\t\t\t:host(.overlay) {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tz-index: 10000;\n\t\t\t}\n\t\t\t\n\t\t\t@keyframes spin {\n\t\t\t\t100% {\n\t\t\t\t    transform: rotate(360deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsvg {\n\t\t\t\tanimation: spin 1s infinite linear;\n\t\t\t\ttransform-origin: center center;\n\t\t\t}\n\t\t\t</style>\n\t\t\t<svg viewBox=\"0 0 1024 1024\" class=\"spin\" data-icon=\"loading\" width=\"100%\" height=\"100%\" fill=\"currentColor\" aria-hidden=\"true\">\n\t\t\t\t<path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path>\n\t\t\t</svg>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n    }\n}\n\ncustomElements.define('b-spinner', SpinnerElement)\n","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\nimport './icon'\n\nexport class BtnElement extends LitElement {\n\n    static get properties() { return {\n        href: {type: String, reflect: true},\n        value: {type: String, reflect: true},\n        icon: { type: String },\n        spin: {type: Boolean, reflect: true, attribute: 'spin'}\n    }}\n\n    static get styles(){ return css`\n    \n        :host{\n            --black: #333;\n            --orange: #F57C00;\n            --blue: #2196F3;\n            --red: #d32f2f;\n            --gray: #444444;\n            --green: #27ae60;\n            --yellow: #f2d57e;\n            --teal: #009688;\n            --purple: #7E57C2;\n            --brown: #795548;\n            --pink: #E91E63;\n\n            --radius: 3px;\n            --color: var(--black);\n            --bgdColor: var(--color);\n            --hoverBgdColor: rgba(255,255,255,.1);\n            --textColor: #fff;\n            --borderColor: var(--color);\n            --padding: .4em .6em;\n\n            display: inline-block;\n            position: relative;\n            box-sizing: border-box;\n            background: var(--bgdColor);\n            color: var(--textColor);\n            border-radius: var(--radius);\n            cursor: pointer;\n            transition: 160ms;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            text-rendering: optimizeLegibility;\n            font-size: .9rem;\n            line-height: 1rem;\n            font-weight: bold;\n        }\n\n        :host([hidden]) {\n            display: none !important;\n        }\n\n        main {\n            border-radius: var(--radius);\n            position: relative;\n            display: inline-flex;\n            align-items: center;\n            padding: var(--padding);\n            /*padding-bottom: .3em;*/ /* remove descender line to make it look more centered*/\n            text-overflow: ellipsis;\n            border: solid 1px var(--borderColor);\n            /* transition: 120ms; */\n        }\n\n        slot {\n            display: block;\n            margin-bottom: -.1em; /* remove descender line to make it look more centered*/\n        }\n\n        slot::slotted(*) {\n            display: inline-block;\n            margin-top: 0;\n            margin-bottom: 0;\n        }\n\n        .hover {\n            position: absolute;\n            display: block;\n            width: 100%;\n            height: 100%;\n            left: 0;\n            top: 0;\n            background: var(--hoverBgdColor);\n            visibility: hidden;\n            opacity: 0;\n            /* mix-blend-mode: saturation; */\n            border-radius: var(--radius);\n            /* transition: 120ms; */\n        }\n\n        @media (hover) {\n            :host(:hover) .hover {\n                opacity: 1;\n                visibility: visible;\n            }\n        }\n\n        /* b-icon,\n        ::slotted(b-icon) {\n            vertical-align: bottom;\n        } */\n\n        b-spinner {\n            opacity: 0;\n            visibility: hidden;\n            --size: 1em;\n            margin-left: -1.35em;\n            margin-right: .35em;\n            transition: 120ms;\n        }\n\n        :host([spin]) b-spinner {\n            opacity: 1;\n            visibility: visible;\n            margin-left: 0;\n        }\n\n        :host([spin]) b-icon {\n            display: none;\n        }\n\n        main > b-icon {\n            margin-right: .35em;\n            margin-left: -.15em;\n        }\n\n        :host([block]) {\n            display: block;\n            text-align: center\n        }\n\n        :host([block]) main {\n            display: flex;\n            justify-content: center\n        }\n\n        :host(:empty) main {\n            --padding: .4em .5em;\n        }\n\n        :host(:empty) main > b-icon {\n            margin-left: 0;\n            margin-right: 0;\n        }\n\n        /* offset play icon to make it appear more centered */\n        :host(:empty) main b-icon[name=\"play\"] {\n\t\t\tmargin: 0 -.1em 0 .1em;\n        }\n\n        :host([color^=\"primary\"])  { --color: var(--primaryColor); }\n        :host([color^=\"black\"])  { --color: var(--black); }\n        :host([color^=\"orange\"]) { --color: var(--orange); }\n        :host([color^=\"blue\"])   { --color: var(--blue); }\n        :host([color^=\"red\"])    { --color: var(--red); }\n        :host([color^=\"gray\"])   { --color: var(--gray); }\n        :host([color^=\"green\"])  { --color: var(--green); }\n        :host([color^=\"yellow\"]) { --color: var(--yellow); }\n        :host([color^=\"teal\"])   { --color: var(--teal); }\n        :host([color^=\"purple\"]) { --color: var(--purple); }\n        :host([color^=\"brown\"])  { --color: var(--brown); }\n        :host([color^=\"pink\"])   { --color: var(--pink); }\n\n        @media (hover){\n        :host([color*=\"hover-black\"]:hover)  { --color: var(--black); }\n        :host([color*=\"hover-orange\"]:hover) { --color: var(--orange); }\n        :host([color*=\"hover-blue\"]:hover)   { --color: var(--blue); }\n        :host([color*=\"hover-red\"]:hover)    { --color: var(--red); }\n        :host([color*=\"hover-gray\"]:hover)   { --color: var(--gray); }\n        :host([color*=\"hover-green\"]:hover)  { --color: var(--green); }\n        :host([color*=\"hover-yellow\"]:hover) { --color: var(--yellow); }\n        :host([color*=\"hover-teal\"]:hover)   { --color: var(--teal); }\n        :host([color*=\"hover-purple\"]:hover) { --color: var(--purple); }\n        :host([color*=\"hover-brown\"]:hover)  { --color: var(--brown); }\n        :host([color*=\"hover-pink\"]:hover)   { --color: var(--pink); }\n        }\n\n        :host([pill]) {\n            --radius: 1em;\n        }\n\n        /* @media (hover) { */\n        :host([outline]:not(:hover)) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n        }\n        /* } */\n\n        /* :host([outline]:hover){\n            --bgdColor: var(--color);\n            --textColor: inherit;\n        } */\n\n        :host([text]),\n        :host([clear]) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n            --borderColor: transparent;\n        }\n\n        /* :host([text]) .hover,\n        :host([clear]) .hover {\n            display: none;\n        } */\n\n        :host([text]) {\n            font-size: 1em;\n            font-weight: normal;\n        }\n\n        @media (hover){\n        :host([text]:hover),\n        :host([clear]:hover) {\n            --bgdColor: rgba(0,0,0,.05);\n        }}\n\n        :host([text].popover-open),\n        :host([clear].popover-open) {\n            --bgdColor: rgba(0,0,0,.05);\n        }\n\n        :host([xs]) { font-size: .6rem; }\n        :host([sm]) { font-size: .8rem; }\n        :host([lg]) { font-size: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; }\n    `}\n\n    render(){ return html`\n        <div class=\"hover\"></div>\n        <main>\n            <b-spinner></b-spinner>\n            ${this.icon?html`<b-icon name=\"${this.icon}\"></b-icon>`:''}\n            <slot></slot>\n        </main>\n    `}\n\n\tconstructor(){\n\t\tsuper()\n        this.icon = ''\n        this.spin = false\n\t}\n\n    firstUpdated(){\n        this.addEventListener('click', ()=>{\n            if( this.href )\n                window.location = this.href\n        }, true)\n    }\n\n}\n\ncustomElements.define('b-btn', BtnElement)\n","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\n\nexport class SpinnerOverlayElement extends LitElement {\n\n    static get properties() { return {\n        show: {type: Boolean, reflect: true},\n\t\tlabel: {type:String, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.show = false\n\t\tthis.label = ''\n\t}\n\n\tconnectedCallback(){\n\t\tsuper.connectedCallback()\n\n\t\tif( this.parentNode && this.parentNode.host && !this.parentNode.host.spinner ){\n\t\t\tthis.host = this.parentNode.host\n\t\t\tthis.host.spinner = this\n\t\t}else if( this.parentElement && !this.parentElement.spinner ){\n\t\t\tthis.host = this.parentElement\n\t\t\tthis.host.spinner = this\n\t\t}\n\t}\n\n\tdisconnectedCallback(){\n\t\tsuper.disconnectedCallback()\n\t\t\n\t\tif( this.host )\n\t\t\tdelete this.host.spinner\n\t}\n\n    static get styles(){ return css`\n\t\t:host {\n\t\t\t--spinnerBgd: rgba(255,255,255 ,.6);\n            --spinnerColor: inherit;\n            --spinnerSize: 1.6em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n            z-index: 1200;\n            background: var(--spinnerBgd);\n            color: var(--spinnerColor);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            opacity: 1;\n            transition: 140ms opacity;\n        }\n\n\t\t:host([dark]) {\n\t\t\t--spinnerBgd: rgba(0,0,0,.6);\n\t\t\t--spinnerColor: #fff;\n\t\t}\n\n\t\tmain {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t}\n\n\t\tlabel:not(:empty) {\n\t\t\tmargin-left: 1em;\n\t\t}\n\n\t\t:host([lg]) {\n\t\t\t--spinnerSize: 6em;\n\t\t}\n\n\t\t:host([lg]) main {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t:host([lg]) label:not(:empty) {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 2em;\n\t\t\tfont-weight: bold;\n\t\t\tmargin: 1em 0 0 0;\n\t\t\tbackground: rgba(0,0,0,.7);\n\t\t\tcolor: #fff;\n\t\t\tpadding: .25em .5em;\n\t\t\tborder-radius: 2em;\n\t\t}\n\n\t\t:host(:not([show])) {\n            visibility: hidden;\n            opacity: 0;\n        }\n\n\t\tb-spinner {\n\t\t\tfont-size: var(--spinnerSize);\n\t\t}\n    `}\n\n    render(){ return html`\n\t\t<main>\n\t\t\t<b-spinner></b-spinner>\n\t\t\t<label>${this.label}</label>\n\t\t</main>\n    `}\n\n}\n\ncustomElements.define('b-spinner-overlay', SpinnerOverlayElement)\n","\nconst device = {\n\n    get is_ios(){\n        return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream\n    },\n\n    get is_android(){\n        return /android/i.test(navigator.userAgent)\n    },\n\n    get is_mobile(){\n        return device.is_ios || device.is_android\n    }\n}\n\nexport default device","import { LitElement, html, css } from 'lit-element';\nimport device from '../util/device'\n\nwindow.device = device\n\nexport class UploaderElement extends LitElement {\n\n    static get properties() { return {\n        url: {type: String},\n        disabled: {type: Boolean},\n        accept: {type: String},\n        multiple: {type: Boolean},\n        placeholder: {type: String},\n        files: {type: Array},\n        dragging: {type: Boolean, reflect: true },\n        uploading: {type: Boolean, reflect: true }\n    }}\n\n    static get styles(){ return css`\n        :host {\n            --hoverBgd: rgba(255,236,179 ,.7);\n            --uploadingBgd: rgba(238,238,238 ,.8);\n            --progressBgd: var(--hoverBgd);\n            --hoverColor: currentColor;\n            --uploadingColor: currentColor;\n            background: var(--hoverBgd);\n            width: 100%;\n            height: 100%;\n            display: block;\n            position: absolute;\n            z-index: 10000;\n            left: 0;\n            top: 0;\n            visibility: hidden;\n            /* pointer-events: none; */\n        }\n\n        :host([dragging]),\n        :host([uploading]) {\n            visibility: visible;\n        }\n\n        .placeholder {\n            color: var(--hoverColor)\n        }\n\n        .progress {\n            color: var(--uploadingColor)\n        }\n\n        .placeholder,\n        .progress {\n            position: absolute;\n            height: 100%;\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n        \n        :host([uploading]) {\n            background: var(--uploadingBgd);\n        }\n\n        :host(:not([dragging])) .placeholder,\n        :host(:not([uploading])) .progress {\n            display: none;\n        }\n\n        .progress > div {\n            position: relative\n        }\n\n        .progress .bar {\n            position: absolute;\n            height: 100%;\n            left: 0;\n            background: var(--progressBgd);\n        }\n\n        .choose {\n            display: none;\n        }\n    `}\n\n\tconstructor(){\n\t\tsuper()\n\n        this.url = '';\n        this.disabled = false\n        this.accept = '';\n        this.multiple = false\n        this.placeholder = 'Drop to upload';\n        this.files = []\n        this._numUploading = 0\n        this._numUploaded = 0\n        this.dragging = false;\n        this.uploading = false;\n\n        ['dragenter', 'dragleave', 'dragover', 'drop'].forEach(fn=>{\n            this[fn] = this['_'+fn].bind(this)\n        })\n\t}\n\n    get progress(){\n        return this.files.length > 0 ? (this._numUploaded / this.files.length * 100) : 0\n    }\n\n    get autoUpload(){ return this.hasAttribute('auto-upload') }\n\n    render(){ return html`\n        <input class=\"choose\" type=\"file\" @click=${e=>e.stopPropagation()} @change=${this._inputChange} accept=${this.accept} ?multiple=${this.multiple}>\n        <div class=\"placeholder\">${this.placeholder}</div>\n        <div class=\"progress\">\n            <div class=\"bar\" style=\"width:${this.progress}%\"></div>\n            <div>\n                <b-spinner></b-spinner>\n                Uploading ${this._numUploading} of ${this.files.length}\n            </div>\n        </div>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback();\n        if( this.parent ) return\n        this.parent = this.parentElement || this.getRootNode().host\n        this.parent.addEventListener('dragenter', this.dragenter, true)\n        this.addEventListener('dragleave', this.dragleave, true)\n        this.addEventListener('dragover', this.dragover, true)\n        this.addEventListener('drop', this.drop, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.parent.removeEventListener('dragenter', this.dragenter)\n        this.removeEventListener('dragleave', this.dragleave)\n        this.removeEventListener('dragover', this.dragover)\n        this.removeEventListener('drop', this.drop)\n        this.parent = null;\n    }\n\n    _acceptFile(file){\n        let doAccept = true\n        let accept = this.accept\n        if( !accept ) return true\n        return accept.split(',').find(patt=>{\n            patt = patt.trim()\n            if( patt[0] == '.' )\n                return new RegExp(patt+'$').test(file.name)\n            else\n                return new RegExp(patt).test(file.type)\n        })\n    }\n\n    chooseFile(){\n        if( this.disabled ) return\n        this.shadowRoot.querySelector('.choose').click()\n    }\n\n    _drop(e){\n        e.preventDefault()\n        this.dragging = false\n        this._selectFiles(e.dataTransfer.files)\n    }\n\n    _inputChange(e){\n        this._selectFiles(e.target.files)\n    }\n\n    _selectFiles(files){\n\n        if( this.uploading ) return\n\n        files = Array.from(files)\n        \n        if( !this.multiple )\n            files = files.slice(0,1)\n\n        let valid = []\n        let invalid = []\n\n        files.forEach(file=>{\n            if( this._acceptFile(file) )\n                valid.push(file)\n            else\n                invalid.push(file)\n        })\n\n        this.files = valid\n\n        this.dispatchEvent(new CustomEvent('change', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                invalid: invalid.length > 0 ? invalid : false\n            }\n        }))\n\n        if( this.autoUpload && this.url ){\n            this.upload()\n        }\n\n    }\n\n    _dragover(e){\n        e.preventDefault() // needed to allow `drop` event to trigger\n    }\n\n    _dragenter(e){\n        if( this.disabled || !e.dataTransfer.types.includes('Files') ) return\n        this.dragging = true\n    }\n\n    _dragleave(e){\n        this.dragging = false\n    }\n\n    async upload({ url='', method='POST', fileKey='file', formData={} }={}){\n\n        if( this.uploading )\n            throw new Error(\"Already uploading\")\n\n        url = url || this.url\n        \n        if( !url )\n            throw new Error(\"Missing URL\")\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this.uploading = true\n\n        let resp = []\n\n        for( let file of this.files ){\n\n            let _formData = new FormData();\n\n            _formData.append(fileKey, file)\n\n            for( let key in formData )\n                _formData.append(key, formData[key])\n\n            this._numUploading++\n            this.requestUpdate()\n\n            let uploadResp = await fetch(url, {\n                method: method,\n                body: _formData\n            })\n            .then(resp=>resp.json())\n            .then(resp=>{\n                this._numUploaded++\n                this.requestUpdate()\n                return resp\n            })\n\n            resp.push(uploadResp)\n        }\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this.files = []\n        this.uploading = false\n\n        this.dispatchEvent(new CustomEvent('upload', {\n            bubbles: true,\n            composed: true,\n            detail: resp\n        }))\n\n        return this.multiple ? resp : resp[0]\n    }\n\n}\n    \ncustomElements.define('b-uploader', UploaderElement)\n","import { LitElement, html, css } from 'lit-element';\n\nexport class PaperElement extends LitElement {\n\n    static get properties() { return {\n        color: {type: String, reflect: true},\n        empty: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.color = ''\n        this.empty = false\n\t}\n\n    static get styles(){ return css`\n        :host {\n            box-sizing: border-box;\n            display: inline-block;\n            background: var(--bgd);\n            box-shadow: rgba(0,0,0,.1) 0 1px 5px;\n            border: solid 1px transparent;\n            border-radius: 3px;\n            --padding: 1em;\n            padding: var(--padding);\n            position: relative;\n            --bgd: #fff;\n            --bgdAccent: #fff;\n        }\n\n        :host([block]) {\n            display: block;\n        }\n\n        :host([empty]) {\n            background: none;\n            box-shadow: none;\n            border: 1px dashed rgba(0,0,0,.3);\n        }\n\n        :host([centered]) {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        :host([border]) {\n            border-left: solid 5px var(--bgdAccent);\n        }\n\n        :host([outline]) {\n            box-shadow: none;\n            border-color: rgba(0, 0, 0, 0.1);\n        }\n\n        :host([dense]) {\n            --padding: .5em;\n        }\n\n        :host([compact]) {\n            --padding: 0;\n        }\n\n        ::slotted(header:first-child) {\n            border-radius: 3px 3px 0 0;\n            margin: calc(var(--padding) * -1);\n            margin-bottom: var(--padding);\n            padding: var(--padding);\n            display: flex; \n            align-content: center;\n            justify-content: space-between;\n        }\n\n        :host([color=\"gray\"]) {\n            --bgd: #EEEEEE;\n            --bgdAccent: #BDBDBD;\n            color: #212121;\n        }\n\n        :host([color=\"blue\"]) {\n            --bgd: #2196F3;\n            --bgdAccent: #1565C0;\n            color: #fff;\n        }\n\n        :host([color=\"green\"]) {\n            --bgd: #27ae60;\n            --bgdAccent: #00695C;\n            color: #fff;\n        }\n\n        :host([color=\"red\"]) {\n            --bgd: #f44336;\n            --bgdAccent: #c62828;\n            color: #fff;\n        }\n\n        :host([color=\"orange\"]) {\n            --bgd: #FF9800;\n            --bgdAccent: #EF6C00;\n            color: #fff;\n        }\n\n        :host([color=\"yellow\"]) {\n            --bgd: #FFC107;\n            --bgdAccent: #F9A825;\n            color: #fff;\n        }\n\n        :host([color=\"purple\"]) {\n            --bgd: #673AB7;\n            --bgdAccent: #4527A0;\n            color: #fff;\n        }\n\n        :host([color=\"postit\"]) {\n            --bgd: #FFF8E1;\n            --bgdAccent: #FFC107;\n            /* color: #fff; */\n        }\n    `}\n\n    render(){ return html`\n        <slot></slot>\n    `}\n\n}\n    \ncustomElements.define('b-paper', PaperElement)","//! moment.js\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return input != null && Object.prototype.toString.call(input) === '[object Object]';\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return (Object.getOwnPropertyNames(obj).length === 0);\n        } else {\n            var k;\n            for (k in obj) {\n                if (obj.hasOwnProperty(k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false,\n            parsedDateParts : [],\n            meridiem        : null,\n            rfc2822         : false,\n            weekdayMismatch : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this);\n            var len = t.length >>> 0;\n\n            for (var i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            var parsedParts = some.call(flags.parsedDateParts, function (i) {\n                return i != null;\n            });\n            var isNowValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.weekdayMismatch &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated &&\n                (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid = isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            }\n            else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid (flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i = 0; i < momentProperties.length; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function warn(msg) {\n        if (hooks.suppressDeprecationWarnings === false &&\n                (typeof console !==  'undefined') && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [];\n                var arg;\n                for (var i = 0; i < arguments.length; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (var key in arguments[0]) {\n                            arg += key + ': ' + arguments[0][key] + ', ';\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n    }\n\n    function set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' + (/\\d{1,2}/).source);\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig), prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (hasOwnProp(parentConfig, prop) &&\n                    !hasOwnProp(childConfig, prop) &&\n                    isObject(parentConfig[prop])) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i, res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function calendar (key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        ss : '%d seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (isFunction(output)) ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [];\n        for (var u in unitsObj) {\n            units.push({unit: u, priority: priorities[u]});\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '', i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\n    var match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n    var matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    var matchWord = /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i;\n\n    var regexes = {};\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }));\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n    var WEEK = 7;\n    var WEEKDAY = 8;\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? '' + y : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get (mom, unit) {\n        return mom.isValid() ?\n            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n    }\n\n    function set$1 (mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));\n            }\n            else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet (units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n\n    function stringSet (units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units);\n            for (var i = 0; i < prioritized.length; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m, format) {\n        if (!m) {\n            return isArray(this._months) ? this._months :\n                this._months['standalone'];\n        }\n        return isArray(this._months) ? this._months[m.month()] :\n            this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m, format) {\n        if (!m) {\n            return isArray(this._monthsShort) ? this._monthsShort :\n                this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i, ii, mom, llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    var defaultMonthsShortRegex = matchWord;\n    function monthsShortRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict ?\n                this._monthsShortStrictRegex : this._monthsShortRegex;\n        }\n    }\n\n    var defaultMonthsRegex = matchWord;\n    function monthsRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict ?\n                this._monthsStrictRegex : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    }\n\n    function createDate (y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date;\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            date = new Date(y + 400, m, d, h, M, s, ms);\n            if (isFinite(date.getFullYear())) {\n                date.setFullYear(y);\n            }\n        } else {\n            date = new Date(y, m, d, h, M, s, ms);\n        }\n\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date;\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            var args = Array.prototype.slice.call(arguments);\n            // preserve leap years using a full 400 year cycle, then reset\n            args[0] = y + 400;\n            date = new Date(Date.UTC.apply(null, args));\n            if (isFinite(date.getUTCFullYear())) {\n                date.setUTCFullYear(y);\n            }\n        } else {\n            date = new Date(Date.UTC.apply(null, arguments));\n        }\n\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear, resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek, resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd',   function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd',   function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n    function shiftWeekdays (ws, n) {\n        return ws.slice(n, 7).concat(ws.slice(0, n));\n    }\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m, format) {\n        var weekdays = isArray(this._weekdays) ? this._weekdays :\n            this._weekdays[(m && m !== true && this._weekdays.isFormat.test(format)) ? 'format' : 'standalone'];\n        return (m === true) ? shiftWeekdays(weekdays, this._week.dow)\n            : (m) ? weekdays[m.day()] : weekdays;\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return (m === true) ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n            : (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return (m === true) ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n            : (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse (weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$', 'i');\n            }\n            if (!this._weekdaysParse[i]) {\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    var defaultWeekdaysRegex = matchWord;\n    function weekdaysRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict ?\n                this._weekdaysStrictRegex : this._weekdaysRegex;\n        }\n    }\n\n    var defaultWeekdaysShortRegex = matchWord;\n    function weekdaysShortRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict ?\n                this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n        }\n    }\n\n    var defaultWeekdaysMinRegex = matchWord;\n    function weekdaysMinRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict ?\n                this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n        }\n    }\n\n\n    function computeWeekdaysParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom, minp, shortp, longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = this.weekdaysMin(mom, '');\n            shortp = this.weekdaysShort(mom, '');\n            longp = this.weekdays(mom, '');\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 7; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('k',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour they want. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse\n    };\n\n    // internal storage for locale config files\n    var locales = {};\n    var localeFamilies = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && (typeof module !== 'undefined') &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                var aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {}\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n            else {\n                if ((typeof console !==  'undefined') && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn('Locale ' + key +  ' not found. Did you forget to load it?');\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, config) {\n        if (config !== null) {\n            var locale, parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple('defineLocaleOverride',\n                        'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale, tmpLocale, parentConfig = baseConfig;\n            // MERGE\n            tmpLocale = loadLocale(name);\n            if (tmpLocale != null) {\n                parentConfig = tmpLocale._config;\n            }\n            config = mergeConfigs(parentConfig, config);\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, expectedWeekday, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            var curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n    var basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\n    var tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        // YYYYMM is NOT allowed by the standard\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime, dateFormat, timeFormat, tzFormat;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimes.length; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/;\n\n    function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10)\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s.replace(/\\([^)]*\\)|[\\n\\t]/g, ' ').replace(/(\\s\\s+)/g, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var obsOffsets = {\n        UT: 0,\n        GMT: 0,\n        EDT: -4 * 60,\n        EST: -5 * 60,\n        CDT: -5 * 60,\n        CST: -6 * 60,\n        MDT: -6 * 60,\n        MST: -7 * 60,\n        PDT: -7 * 60,\n        PST: -8 * 60\n    };\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10);\n            var m = hm % 100, h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i));\n        if (match) {\n            var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        // Final attempt, use Input Fallback\n        hooks.createFromInputFallback(config);\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n        'discouraged and will be removed in an upcoming major release. Please refer to ' +\n        'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            // console.log('token', token, 'parsedInput', parsedInput,\n            //         'regex', getParseRegexForToken(token, config));\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n            return obj && parseInt(obj, 10);\n        });\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        }  else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if ((isObject(input) && isObjectEmpty(input)) ||\n                (isArray(input) && input.length === 0)) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other < this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +(new Date());\n    };\n\n    var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\n    function isDurationValid(m) {\n        for (var key in m) {\n            if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n                return false;\n            }\n        }\n\n        var unitHasDecimal = false;\n        for (var i = 0; i < ordering.length; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound (number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // FORMATTING\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher);\n\n        if (matches === null) {\n            return null;\n        }\n\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ?\n          0 :\n          parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            }\n            else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset () {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc () {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    var isoRegex = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (isNumber(input)) {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])                         * sign,\n                h  : toInt(match[HOUR])                         * sign,\n                m  : toInt(match[MINUTE])                       * sign,\n                s  : toInt(match[SECOND])                       * sign,\n                ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n            };\n        } else if (!!(match = isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                w : parseIso(match[4], sign),\n                d : parseIso(match[5], sign),\n                h : parseIso(match[6], sign),\n                m : parseIso(match[7], sign),\n                s : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return {milliseconds: 0, months: 0};\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n                'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add      = createAdder(1, 'add');\n    var subtract = createAdder(-1, 'subtract');\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n    }\n\n    function calendar$1 (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n        return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween (from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));\n    }\n\n    function isSame (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n        }\n    }\n\n    function isSameOrAfter (input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore (input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff (input, units, asFloat) {\n        var that,\n            zoneDelta,\n            output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year': output = monthDiff(this, that) / 12; break;\n            case 'month': output = monthDiff(this, that); break;\n            case 'quarter': output = monthDiff(this, that) / 3; break;\n            case 'second': output = (this - that) / 1e3; break; // 1000\n            case 'minute': output = (this - that) / 6e4; break; // 1000 * 60\n            case 'hour': output = (this - that) / 36e5; break; // 1000 * 60 * 60\n            case 'day': output = (this - that - zoneDelta) / 864e5; break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week': output = (this - that - zoneDelta) / 6048e5; break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default: output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true;\n        var m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect () {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment';\n        var zone = '';\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        var prefix = '[' + func + '(\"]';\n        var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n        var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        var suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format (inputString) {\n        if (!inputString) {\n            inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    var MS_PER_SECOND = 1000;\n    var MS_PER_MINUTE = 60 * MS_PER_SECOND;\n    var MS_PER_HOUR = 60 * MS_PER_MINUTE;\n    var MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n    // actual modulo - handles negative numbers (for dates before 1970):\n    function mod$1(dividend, divisor) {\n        return (dividend % divisor + divisor) % divisor;\n    }\n\n    function localStartOfDate(y, m, d) {\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return new Date(y, m, d).valueOf();\n        }\n    }\n\n    function utcStartOfDate(y, m, d) {\n        // Date.UTC remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return Date.UTC(y, m, d);\n        }\n    }\n\n    function startOf (units) {\n        var time;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year(), 0, 1);\n                break;\n            case 'quarter':\n                time = startOfDate(this.year(), this.month() - this.month() % 3, 1);\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month(), 1);\n                break;\n            case 'week':\n                time = startOfDate(this.year(), this.month(), this.date() - this.weekday());\n                break;\n            case 'isoWeek':\n                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date());\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time -= mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR);\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_MINUTE);\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_SECOND);\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function endOf (units) {\n        var time;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year() + 1, 0, 1) - 1;\n                break;\n            case 'quarter':\n                time = startOfDate(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n                break;\n            case 'week':\n                time = startOfDate(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;\n                break;\n            case 'isoWeek':\n                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time += MS_PER_HOUR - mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR) - 1;\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function valueOf () {\n        return this._d.valueOf() - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate () {\n        return new Date(this.valueOf());\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function toJSON () {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2 () {\n        return isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict\n        };\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input,\n                this.week(),\n                this.weekday(),\n                this.localeData()._week.dow,\n                this.localeData()._week.doy);\n    }\n\n    function getSetISOWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input, this.isoWeek(), this.isoWeekday(), 1, 4);\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict ?\n          (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n          locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add               = add;\n    proto.calendar          = calendar$1;\n    proto.clone             = clone;\n    proto.diff              = diff;\n    proto.endOf             = endOf;\n    proto.format            = format;\n    proto.from              = from;\n    proto.fromNow           = fromNow;\n    proto.to                = to;\n    proto.toNow             = toNow;\n    proto.get               = stringGet;\n    proto.invalidAt         = invalidAt;\n    proto.isAfter           = isAfter;\n    proto.isBefore          = isBefore;\n    proto.isBetween         = isBetween;\n    proto.isSame            = isSame;\n    proto.isSameOrAfter     = isSameOrAfter;\n    proto.isSameOrBefore    = isSameOrBefore;\n    proto.isValid           = isValid$2;\n    proto.lang              = lang;\n    proto.locale            = locale;\n    proto.localeData        = localeData;\n    proto.max               = prototypeMax;\n    proto.min               = prototypeMin;\n    proto.parsingFlags      = parsingFlags;\n    proto.set               = stringSet;\n    proto.startOf           = startOf;\n    proto.subtract          = subtract;\n    proto.toArray           = toArray;\n    proto.toObject          = toObject;\n    proto.toDate            = toDate;\n    proto.toISOString       = toISOString;\n    proto.inspect           = inspect;\n    proto.toJSON            = toJSON;\n    proto.toString          = toString;\n    proto.unix              = unix;\n    proto.valueOf           = valueOf;\n    proto.creationData      = creationData;\n    proto.year       = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear    = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month       = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week           = proto.weeks        = getSetWeek;\n    proto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\n    proto.weeksInYear    = getWeeksInYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.date       = getSetDayOfMonth;\n    proto.day        = proto.days             = getSetDayOfWeek;\n    proto.weekday    = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear  = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset            = getSetOffset;\n    proto.utc                  = setOffsetToUTC;\n    proto.local                = setOffsetToLocal;\n    proto.parseZone            = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST                = isDaylightSavingTime;\n    proto.isLocal              = isLocal;\n    proto.isUtcOffset          = isUtcOffset;\n    proto.isUtc                = isUtc;\n    proto.isUTC                = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\n    proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\n    function createUnix (input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone () {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar        = calendar;\n    proto$1.longDateFormat  = longDateFormat;\n    proto$1.invalidDate     = invalidDate;\n    proto$1.ordinal         = ordinal;\n    proto$1.preparse        = preParsePostFormat;\n    proto$1.postformat      = preParsePostFormat;\n    proto$1.relativeTime    = relativeTime;\n    proto$1.pastFuture      = pastFuture;\n    proto$1.set             = set;\n\n    proto$1.months            =        localeMonths;\n    proto$1.monthsShort       =        localeMonthsShort;\n    proto$1.monthsParse       =        localeMonthsParse;\n    proto$1.monthsRegex       = monthsRegex;\n    proto$1.monthsShortRegex  = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays       =        localeWeekdays;\n    proto$1.weekdaysMin    =        localeWeekdaysMin;\n    proto$1.weekdaysShort  =        localeWeekdaysShort;\n    proto$1.weekdaysParse  =        localeWeekdaysParse;\n\n    proto$1.weekdaysRegex       =        weekdaysRegex;\n    proto$1.weekdaysShortRegex  =        weekdaysShortRegex;\n    proto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1 (format, index, field, setter) {\n        var locale = getLocale();\n        var utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl (format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl (localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0;\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths (format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort (format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\n    hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\n    var mathAbs = Math.abs;\n\n    function abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1 (duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1 (input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1 (input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'quarter' || units === 'year') {\n            days = this._days + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            switch (units) {\n                case 'month':   return months;\n                case 'quarter': return months / 3;\n                case 'year':    return months / 12;\n            }\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1 () {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asQuarters     = makeAs('Q');\n    var asYears        = makeAs('y');\n\n    function clone$1 () {\n        return createDuration(this);\n    }\n\n    function get$2 (units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        ss: 44,         // a few seconds to seconds\n        s : 45,         // seconds to minute\n        m : 45,         // minutes to hour\n        h : 22,         // hours to day\n        d : 26,         // days to month\n        M : 11          // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n        var duration = createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds <= thresholds.ss && ['s', seconds]  ||\n                seconds < thresholds.s   && ['ss', seconds] ||\n                minutes <= 1             && ['m']           ||\n                minutes < thresholds.m   && ['mm', minutes] ||\n                hours   <= 1             && ['h']           ||\n                hours   < thresholds.h   && ['hh', hours]   ||\n                days    <= 1             && ['d']           ||\n                days    < thresholds.d   && ['dd', days]    ||\n                months  <= 1             && ['M']           ||\n                months  < thresholds.M   && ['MM', months]  ||\n                years   <= 1             && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding (roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof(roundingFunction) === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var locale = this.localeData();\n        var output = relativeTime$1(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return ((x > 0) - (x < 0)) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000;\n        var days         = abs$1(this._days);\n        var months       = abs$1(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        var totalSign = total < 0 ? '-' : '';\n        var ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        var daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return totalSign + 'P' +\n            (Y ? ymSign + Y + 'Y' : '') +\n            (M ? ymSign + M + 'M' : '') +\n            (D ? daysSign + D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? hmsSign + h + 'H' : '') +\n            (m ? hmsSign + m + 'M' : '') +\n            (s ? hmsSign + s + 'S' : '');\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid        = isValid$1;\n    proto$2.abs            = abs;\n    proto$2.add            = add$1;\n    proto$2.subtract       = subtract$1;\n    proto$2.as             = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds      = asSeconds;\n    proto$2.asMinutes      = asMinutes;\n    proto$2.asHours        = asHours;\n    proto$2.asDays         = asDays;\n    proto$2.asWeeks        = asWeeks;\n    proto$2.asMonths       = asMonths;\n    proto$2.asQuarters     = asQuarters;\n    proto$2.asYears        = asYears;\n    proto$2.valueOf        = valueOf$1;\n    proto$2._bubble        = bubble;\n    proto$2.clone          = clone$1;\n    proto$2.get            = get$2;\n    proto$2.milliseconds   = milliseconds;\n    proto$2.seconds        = seconds;\n    proto$2.minutes        = minutes;\n    proto$2.hours          = hours;\n    proto$2.days           = days;\n    proto$2.weeks          = weeks;\n    proto$2.months         = months;\n    proto$2.years          = years;\n    proto$2.humanize       = humanize;\n    proto$2.toISOString    = toISOString$1;\n    proto$2.toString       = toISOString$1;\n    proto$2.toJSON         = toISOString$1;\n    proto$2.locale         = locale;\n    proto$2.localeData     = localeData;\n\n    proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\n    proto$2.lang = lang;\n\n    // Side effect imports\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    hooks.version = '2.24.0';\n\n    setHookCallback(createLocal);\n\n    hooks.fn                    = proto;\n    hooks.min                   = min;\n    hooks.max                   = max;\n    hooks.now                   = now;\n    hooks.utc                   = createUTC;\n    hooks.unix                  = createUnix;\n    hooks.months                = listMonths;\n    hooks.isDate                = isDate;\n    hooks.locale                = getSetGlobalLocale;\n    hooks.invalid               = createInvalid;\n    hooks.duration              = createDuration;\n    hooks.isMoment              = isMoment;\n    hooks.weekdays              = listWeekdays;\n    hooks.parseZone             = createInZone;\n    hooks.localeData            = getLocale;\n    hooks.isDuration            = isDuration;\n    hooks.monthsShort           = listMonthsShort;\n    hooks.weekdaysMin           = listWeekdaysMin;\n    hooks.defineLocale          = defineLocale;\n    hooks.updateLocale          = updateLocale;\n    hooks.locales               = listLocales;\n    hooks.weekdaysShort         = listWeekdaysShort;\n    hooks.normalizeUnits        = normalizeUnits;\n    hooks.relativeTimeRounding  = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat        = getCalendarFormat;\n    hooks.prototype             = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',             // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',  // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',   // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD',                             // <input type=\"date\" />\n        TIME: 'HH:mm',                                  // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss',                       // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS',                        // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW',                             // <input type=\"week\" />\n        MONTH: 'YYYY-MM'                                // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","import { LitElement, html, css } from 'lit-element'\nimport moment from 'moment'\n\nexport class TimerElement extends LitElement {\n\n    static get properties() { return {\n        time: {type: Number},\n\t\tms: {type: Boolean}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.time = 0\n\t\tthis.ms = false\n\t\tthis.running = this.hasAttribute('running') ? true : false\n\t}\n\n\tget time(){ return this.__time }\n\n\tset time(val){\n\n\t\tconst oldVal = this.__time\n\t\t\n\t\tif( !this.dur )\n\t\t\tthis.dur = moment.duration(val)\n\t\telse{\n\t\t\tlet delta = val - oldVal\n\t\t\tthis.dur.add(delta)\n\t\t}\n\n\t\tif( val == 0 )\n\t\t\tthis.setAttribute('zero', '')\n\t\telse\n\t\t\tthis.removeAttribute('zero')\n\n\t\tthis.__time = val\n\t\tthis.requestUpdate('time', oldVal);\n\t}\n\n    static get styles(){ return css`\n        :host {\n            display: inline-flex;\n\t\t\t--zeroColor: rgba(0,0,0,.5);\n        }\n\n\t\t.hours[value=\"0\"],\n\t\t.hours[value=\"00\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.hours[value=\"0\"] + span,\n\t\t.hours[value=\"00\"] + span {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t/* span, */\n\t\t/* unit[value=\"00\"] {\n\t\t\tcolor: var(--zeroColor);\n\t\t} */\n    `}\n\n    render(){ return html`\n\t\t<unit class=\"hours\" value=\"${this.hours}\">${this.hours}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"minutes\" value=\"${this.minutes}\">${this.minutes}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"seconds\" value=\"${this.seconds}\">${this.seconds}</unit>\n\t\t${this.ms?html`<unit class=\"ms\">.${this.milliseconds}</unit>`:''}\n    `}\n\n\tget running(){\n\t\treturn this._lastTS != null\n\t}\n\n\tset running(run){\n\t\tif( !run ){\n\t\t\tthis.removeAttribute('running')\n\t\t\tthis._lastTS = null\n\t\t\tclearInterval(this._progressInterval)\n\t\t}else if( !this.running ){\n\t\t\tthis._lastTS = new Date().getTime()\n\t\t\tthis._progressInterval = setInterval(this._progress.bind(this), 100)\n\t\t\tthis.setAttribute('running', '')\n\t\t}\n\t}\n\n\tstart(){ this.running = true }\n\tstop(){ this.running = false }\n\n\t_progress(){\n\t\tlet ts = new Date().getTime()\n\t\tlet elapsedTime = ts - this._lastTS\n\t\tthis._lastTS = ts\n\t\tthis.time += elapsedTime\n\t}\n\n\tget hours(){\n\t\treturn String(this.dur.hours()).padStart(2, '0')\n\t}\n\n\tget minutes(){\n\t\treturn String(this.dur.minutes()).padStart(2, '0')\n\t}\n\n\tget seconds(){\n\t\treturn String(this.dur.seconds()).padStart(2, '0')\n\t}\n\n\tget milliseconds(){\n\t\treturn Math.round(this.dur.milliseconds() / 100)\n\t}\n\n\tget format(){\n\n\t\tlet str = [\n\t\t\tthis.hours,\n\t\t\tthis.minutes,\n\t\t\tthis.seconds\n\t\t].join(':')\n\n\t\tif( this.ms )\n\t\t\tstr += '.'+this.milliseconds\n\n\t\treturn str\n\t}\n}\n    \ncustomElements.define('b-timer', TimerElement)       \n","/*\n    https://undraw.co/illustrations\n*/\nimport { LitElement, html, css } from \"lit-element\";\n\nexport default class EmptyState extends LitElement {\n\n    static get properties(){return {\n        value: {type: String}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            color: rgba(55,71,79,.2);\n            font-size: 2em;\n            text-align: center;\n            padding: 1em;\n            box-sizing: border-box;\n            line-height: 1.2em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n        }\n\n        :host([static]) {\n            position: static;\n            height: auto;\n            min-height: 1em;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([xs]) { font-size: .8em; }\n        :host([sm]) { font-size: 1em; }\n        :host([md]) { font-size: 1.4em; }\n        :host([lg]) { font-size: 3em; }\n    `}\n\n    render(){return html`\n        <slot>${this.value}</slot>\n    `}\n}\n\ncustomElements.define('b-empty-state', EmptyState)","import { LitElement, html, css } from \"lit-element\";\n\nexport default class Label extends LitElement {\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n            text-transform: uppercase;\n            color: rgba(0,0,0,.33);\n            font-weight: bold;\n            font-size: 1rem;\n            line-height: 1rem;\n            --dividerThickness: 1px;\n            vertical-align: middle;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([filled]),\n        :host([badge]),\n        :host([outline]) {\n            --bgd: #aaa;\n            --color: #fff;\n            padding: 0.15em 0.3em 0.1em;\n            border-radius: 3px;\n            font-size: .8rem;\n            text-transform: none;\n            background: var(--bgd);\n            color: var(--color);\n        }\n\n        :host([xs]) { font-size: .6rem; line-height: .6rem; }\n        :host([sm]) { font-size: .8rem; line-height: .8rem; }\n        :host([lg]) { font-size: 1.2rem; line-height: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; line-height: 1.4rem; }\n\n        :host([outline]) {\n            background: none;\n            border: solid 1px;\n            border-color: var(--bgd);\n            --color: var(--bgd);\n        }\n\n        :host([badge]) {\n            border-radius: 30px;\n            /* padding-left: .6em;\n            padding-right: .6em; */\n            padding-right: .45em;\n            padding-left: .45em;\n            min-width: .3em;\n            text-align: center;\n            min-height: 1em;\n        }\n\n        :host([dot]) {\n            height: 6px;\n            width: 6px;\n            min-width: 0;\n            min-height: 0;\n            padding: 0;\n        }\n\n        :host([filled=\"black\"]), :host([badge=\"black\"]) { --bgd: #333; }\n        :host([filled=\"gray\"]), :host([badge=\"gray\"]) { --bgd: #ddd; --color: #777; }\n        :host([filled=\"blue\"]), :host([badge=\"blue\"]) { --bgd: var(--blue); }\n        :host([filled=\"red\"]), :host([badge=\"red\"]) { --bgd: var(--red); }\n        :host([filled=\"orange\"]), :host([badge=\"orange\"]) { --bgd: var(--orange); }\n        :host([filled=\"green\"]), :host([badge=\"green\"]) { --bgd: var(--green); }\n        :host([filled=\"pink\"]), :host([badge=\"pink\"]) { --bgd: var(--pink); }\n        \n\n        :host([outline=\"black\"]) { --bgd: #333; }\n        :host([outline=\"gray\"]) { --bgd: #ddd; }\n        :host([outline=\"blue\"]) { --bgd: var(--blue); }\n        :host([outline=\"red\"]) { --bgd: var(--red); }\n        :host([outline=\"orange\"]) { --bgd: var(--orange); }\n        :host([outline=\"green\"]) { --bgd: var(--green); }\n        :host([outline=\"pink\"]) { --bgd: var(--pink); }\n\n        b-hr {\n            display: none;\n            margin: 0;\n            width: auto;\n            height: var(--dividerThickness);\n        }\n\n        b-hr:first-child {\n            margin-right: 1em;\n        }\n\n        b-hr:last-child {\n            margin-left: 1em;\n        }\n\n        :host([divider]) {\n            display: grid;\n            align-items: center;\n            grid-template-columns: 0 auto 1fr;\n        }\n\n        :host([divider]) b-hr {\n            display: block;\n        }\n\n        :host([divider=\"center\"]) {\n            grid-template-columns: 1fr auto 1fr;\n        }\n\n        :host([divider=\"right\"]) {\n            grid-template-columns: 1fr auto 0;\n        }\n    `}\n\n    render(){return html`\n        <b-hr></b-hr>\n        <slot></slot>\n        <b-hr></b-hr>\n    `}\n}\n\ncustomElements.define('b-label', Label)","\nconst InvalidImages = []\nexport const BgdColors = ['#2196F3', '#f44336', '#673AB7', '#00BCD4', '#009688', '#4CAF50', '#FFC107', '#FF5722', '#795548', '#607D8B']\nexport const DefaultBgd = '#aaa';\n\nclass AvatarElement extends HTMLElement {\n\t\n\tstatic get observedAttributes(){\n\t\treturn ['initials', 'bgd', 'color', 'size', 'url', 'gravatar']\t\n\t}\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        \n        temp.innerHTML = `<style>\n\t\t\t:host {\n\t\t\t\t--radius: 50%;\n\t\t\t\t--size: 1em;\n\t\t\t\t--bgd: ${this.bgd};\n\t\t\t\t--bgdDefault: transparent;\n\t\t\t\t--color: ${this.color};\n\t\t\t\theight: var(--size);\n\t\t\t    width: var(--size);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\t\t\t}\n\n\t\t\t:host([shadow]) svg {\n\t\t\t\tbox-shadow: rgba(0,0,0,.1) 0 1px 3px;\n\t\t\t}\n\n\t\t\tsvg {\n\t\t\t\tborder-radius: var(--radius);\n\t\t\t}\n\t\t\t\n\t\t\tsvg rect {\n\t\t\t\tfill: var(--bgd);\n\t\t\t}\n\t\t\t\n\t\t\tsvg text {\n\t\t\t\tfill: var(--color);\n\t\t\t}\n\t\t\t\n\t\t\t:host([nobgd]) svg.imgloaded rect {\n\t\t\t\tfill: transparent;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloaded text {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\t\t\t\n\t\t\t:host([imgicon]) svg image {\n\t\t\t\twidth: 70%;\n\t\t\t\theight: 70%;\n\t\t\t\tx: 15%;\n\t\t\t\ty: 15%;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloading rect {\n\t\t\t\tfill: #eee;\n\t\t\t}\n\n\t\t\tsvg.imgloaded rect {\n\t\t\t\tfill: var(--bgdDefault);\n\t\t\t}\n\t\t\t</style>\n\t\t\t\n\t\t<svg class=\"imgloading\" viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" rx=\"0\" ry=\"0\"></rect>\n            <text x=\"50%\" y=\"50%\" font-size=\"65\" dominant-baseline=\"central\" text-anchor=\"middle\">${this.initials}</text>\n\t\t\t<image xlink:href=\"\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" onload=\"this.parentElement.classList.add('imgloaded')\">\n        </svg>`\n\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.img = this.shadowRoot.querySelector('image')\n\t\tthis.img.addEventListener('error', e=>{\n\t\t\tthis.img.style.display='none'\n\t\t\tthis.img.parentElement.classList.remove('imgloading')\n\t\t\tlet src = this.img.getAttribute('xlink:href')\n\t\t\tif( src )\n\t\t\t\tInvalidImages.push(src)\n\t\t})\n    }\n\t\n\tconnectedCallback(){\n\t\t// NOTE: https://stackoverflow.com/a/43837330/484780\n\t\t// this.style.display = 'inline-block'\n\t\t// this.style.verticalAlign = 'middle'\n\t\t// this.style.lineHeight = '0'\n\t\t\n\t\tif( this.hasAttribute('gravatar') )\n\t\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tattributeChangedCallback(name, oldVal, newVal){\n\t\tthis[name] = newVal\n\t}\n\t\n\tgetAttr(name, defaultVal){\n\t\treturn this.hasAttribute(name) ? (this.getAttribute(name)||defaultVal) : defaultVal\n\t}\n\t\n\tget initials(){\n\t\treturn this.getAttr('initials', '-')\n\t}\n\t\n\tset initials(str){\n\t\tthis.shadowRoot.querySelector('text').innerHTML = str || '-'\n\t\tthis.bgd = this.bgd // update bgd to match initial change (wont change if user specified the bgd attr)\n\t}\n\t\n\tget bgd(){\n\t\tlet color = this.getAttr('bgd')\n\t\tif( !color ){\n\t\t\t\n\t\t\tlet initials = this.getAttr('initials', '').toLowerCase()\n\t\t\t\n\t\t\tif( !initials ){\n\t\t\t\tcolor = DefaultBgd\n\t\t\t}else{\n\t\t\t\tlet num = 0\n\n\t\t\t\tfor( let char of initials ){\n\t\t\t\t\tnum += char.charCodeAt(0) - 97\n\t\t\t\t}\n\n\t\t\t\tcolor = BgdColors[ num % BgdColors.length ]\n\t\t\t}\n\t\t}\n\t\treturn color\n\t}\n\t\n\tset bgd(color){\n\t\t// if( this.style.getPropertyValue('--bgd') ) return\n\t\tthis.style.setProperty('--bgd', color)\n\t\t// this.shadowRoot.querySelector('rect').setAttribute('fill', color||this.bgd)\n\t}\n\t\n\tget color(){\n\t\treturn this.getAttr('color' ,'#fff')\n\t}\n\t\n\tset color(color){\n\t\tthis.style.setProperty('--color', color)\n\t\t// this.shadowRoot.querySelector('text').setAttribute('fill', color||this.color)\n\t}\n\t\n\tget size(){\n\t\treturn this.getAttr('size', 24)\n\t}\n\t\n\tset size(size){\n\t\tthis.style.width = size+'px'\n\t\tthis.style.height = size+'px'\n\t\t// reload the gravatar to get the correct size\n\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tset url(url){\n\t\t\n\t\tthis.img.parentElement.classList.remove('imgloaded')\n\t\tthis.img.style.display = ''\n\n\t\t// dont try to load an image we already know fails\n\t\tif( !url || InvalidImages.includes(url) ){\n\t\t\tthis.img.style.display = 'none'\n\t\t\tthis.img.setAttribute('xlink:href', '')\n\t\t\treturn\n\t\t}\n\n\t\tif( url ){\n\t\t\tthis.img.parentElement.classList.add('imgloading')\n\t\t\tthis.img.setAttribute('xlink:href', url)\n\t\t}\n\t\t\t\n\t}\n\t\n\tset gravatar(guid){\n\t\t// wait until el is connected so we can determine the height of the avatar\n\t\tif( !this.isConnected || !guid ) return\n\t\tlet size = this.offsetHeight * 2\n\t\tif( size < 80 ) size = 80\n\t\tthis.url = guid ? `//gravatar.com/avatar/${guid}?d=404&s=${size}` : ''\n\t}\n}\n\ncustomElements.define('b-avatar', AvatarElement)\nexport default customElements.get('b-avatar')\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-hr', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            --bgd: rgba(0,0,0,.1);\n\n            display: block;\n            margin: 1em auto;\n            height: 1px;\n            width: 100%;\n            background: var(--bgd);\n            vertical-align: middle;\n        }\n\n        :host([short]) {\n            width: 180px;\n            max-width: 100%;\n        }\n\n        :host([vert]) {\n            display: inline-block;\n            min-height: 1em;\n            height: auto;\n            width: 1px;\n            margin: 0 .5em;\n            align-self: stretch;\n        }\n    `}\n\n    // dont support slotted content yet\n    render(){return html``}\n\n})\n\nexport default customElements.get('b-hr')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-sub', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline;\n            position:relative;\n            color: rgba(0,0,0,.4);\n            font-size: .8em;\n            font-weight: normal;\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-sub')","import { LitElement, html, css } from 'lit-element'\n\n// https://embedresponsively.com/ \ncustomElements.define('b-embed', class Embed extends LitElement {\n\n    static get properties(){return {\n        url: {type: String, reflect: true}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n        }\n\n        main {\n            position: relative;\n            padding-bottom: 56.25%;\n            height: 0;\n            overflow: hidden;\n            max-width: 100%;\n        }\n\n        iframe {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n    `}\n\n    render(){return html`\n        <main>\n            <iframe src='${this.formattedURL}' \n                    frameborder='0' \n                    allowfullscreen>\n            </iframe>\n        </main>\n    `}\n\n    get formattedURL(){\n\n        if( !this.url ) return ''\n\n        let match = Embed.isYoutube(this.url)\n\n        if( match ){\n            return 'https://www.youtube.com/embed/'+match[1]\n        }\n\n        return this.url\n    }\n\n    static isYoutube(url){\n        return url.match(/(?:youtu\\.be|youtube\\.com)\\/(?:watch\\?v\\=)?(?:embed\\/)?(.+)/)\n    }\n\n})\n\nexport default customElements.get('b-embed')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('range-slider', class extends LitElement{\n\n    static get properties(){return {\n        min: {type: Number},\n        max: {type: Number},\n        step: {type: Number},\n        range: {type: Boolean, reflect: true},\n        value: {type: Object},\n        label: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.mouseUp = this.mouseUp.bind(this)\n        this.mouseMove = this.mouseMove.bind(this)\n\n        this.label = 'auto'\n        this.range = false\n        this.min = 0\n        this.max = 100\n        this.step = 1\n\n        this.valMin = 0\n        this.valMax = 0\n        this.value = [0,0]\n    }\n\n    static get styles(){return css`\n        :host {\n            --size: 2px;\n            --thumbSize: 14px;\n            --color: var(--blue);\n            --thumbColor: var(--color);\n            --bgd: rgba(0,0,0,.4);\n            --padding: 10px;\n\n            display: inline-block;\n            vertical-align: middle;\n            position:relative;\n            width: 140px;\n            height: var(--size);\n            margin: 0 auto;\n            padding: var(--padding) 0;\n            cursor: pointer;\n            font-size: .9em;\n            user-select: none;\n        }\n\n        rail, track {\n            display: block;\n            height: var(--size);\n            width: 100%;\n            background: var(--color);\n            border-radius: 6px;\n            position: absolute;\n            top: var(--padding);\n            left: 0;\n        }\n\n        rail {\n            background: var(--bgd);\n        }\n\n        thumb {\n            height: var(--thumbSize);\n            width: var(--thumbSize);\n            transform: translate(-50%, -50%);\n            position: absolute;\n            left: 0;\n            top: calc(var(--padding) + (var(--size) / 2));\n            background: var(--thumbColor);\n            border-radius: var(--thumbSize);\n        }\n\n        thumb:before {\n            content: '';\n            position: absolute;\n            height: 250%;\n            width: 250%;\n            left: -75%;\n            top: -75%;\n            background: var(--thumbColor);\n            opacity: .2;\n            border-radius: 30px;\n            z-index: -1;\n            transform: scale(.3);\n            transform-origin: center center;\n            opacity: 0;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        thumb:hover:before {\n            transform: scale(.9);\n            opacity: .2;\n        }\n\n        thumb[active]:before {\n            transform: scale(1);\n            opacity: .2;\n        }\n\n        thumb[active] {\n            background: var(--color);\n        }\n\n        thumb > div {\n            position: absolute;\n            font-size: .9em;\n            background: var(--color);\n            color: #fff;\n            height: 2.2em;\n            width: 2.2em;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            bottom: 100%;\n            left: 50%;\n            position: absolute;\n            transform-origin: bottom left;\n            transform: translate(0%,-9px) rotate(-45deg) scale(0);\n            border-radius: 50% 50% 50% 0;\n            transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n            \n        }\n\n        thumb > div > span {\n            transform: rotate(45deg)\n        }\n\n        :host([label=\"show\"]) thumb > div,\n        thumb:hover > div,\n        thumb[active] > div {\n            transform: translate(0%,-9px) rotate(-45deg) scale(1);\n        }\n\n        :host([label=\"none\"]) thumb > div {\n            display: none !important;\n        }\n\n        :host(:not([range])) thumb[min] {\n            display: none;\n        }\n\n        .labels {\n            display: flex;\n            justify-content: space-between;\n            margin-top: .75em;\n        }\n    `}\n\n    _polishVal(val){\n\n        val = parseFloat((Math.round(val / this.step) * this.step).toFixed(2))\n\n        if( val < this.min )\n            val = this.min\n        \n        if( val > this.max )\n            val = this.max\n        \n        return val\n    }\n\n    set value(val){\n\n        let oldVal = this.value\n        let oldMin = this.valMin\n        let oldMax = this.valMax\n        \n        if( typeof val == 'string' )\n            val = val.split(',').map(s=>parseFloat(s))\n\n        // setting both min and max\n        if( Array.isArray(val) ){\n            if( typeof val[0] !== 'number' || typeof val[1] !== 'number' ) return\n\n            val.sort()\n\n            if( this.range )\n                this.valMin = this._polishVal(val[0])\n\n            this.valMax = this._polishVal(val[1])\n            \n            this.requestUpdate('value', oldVal)\n            return\n        }\n\n        if( typeof val !== 'number' ) return\n\n        val = this._polishVal(val)\n        // console.log(val);\n\n        let dmin = Math.abs(this.valMin - val);\n        let dmax = Math.abs(this.valMax - val)\n\n        if( this._active == 'max' && val == this.valMin ){\n            this.valMax = val\n            if( this.range )\n                this._active = 'min'\n        \n        }else if( this._active == 'min' && val == this.valMax ){\n            this.valMin = val\n            this._active = 'max'\n        }\n        else if( !this.range || (dmin == dmax && this.valMax > this.valMin && this._active == 'max') || dmax < dmin || val > this.valMax ){\n            this.valMax = val\n            this._active = 'max'\n        }else{\n            this.valMin = val\n            if( this.range )\n                this._active = 'min'\n        }\n\n        // this.setAttribute('value', this.value.join(','))\n        if( !this._mouseDown )\n            this._active = null\n\n        // nothing changed\n        if( oldMin == this.valMin && oldMax == this.valMax ) return\n    \n        this._didChange = true\n        this.requestUpdate('value', oldVal)\n    }\n\n    get value(){\n        return this.range ? [this.valMin, this.valMax] : this.valMax;\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.addEventListener('mousedown', this.mouseDown, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.removeEventListener('mousedown', this.mouseDown, true)\n    }\n\n    get _len(){ return this.max - this.min }\n    get _minLeft(){ return this.valMin / this._len * 100 }\n    get _maxLeft(){ return this.valMax / this._len * 100 }\n    get _trackLength(){ return this._maxLeft - this._minLeft }\n\n    get atMin(){ return (this.range ? this.valMin : this.valMax ) == this.min }\n    get atMax(){ return this.valMax == this.max }\n\n    reset(){\n        this.valMin = this.min\n        this.valMax = this.min\n        // this.valMax = this.range ? this.max : this.min\n        this.value = [this.valMin, this.valMax]\n        this.update()\n    }\n\n    render(){return html`\n        <rail></rail>\n        <track style=\"left:${this._minLeft}%; width:${this._trackLength}%\"></track>\n        <thumb min ?active=${this._active=='min'} style=\"left:${this._minLeft}%\">\n            <div><span>${this.valMin}</span></div>\n        </thumb>\n        <thumb max ?active=${this._active=='max'} style=\"left:${this._maxLeft}%\">\n            <div><span>${this.valMax}</span></div>\n        </thumb>\n        <div class=\"labels\">\n            <!-- <b-label xs>0 hrs</b-label>\n            <b-label xs>30 hrs</b-label> -->\n        </div>\n    `}\n\n    mouseDown(e){\n        if( e.which !== 1) return // normal click\n        window.addEventListener('mouseup', this.mouseUp, true)\n        window.addEventListener('mousemove', this.mouseMove, true)\n        this._mouseDown = true\n        this.mouseMove(e)\n    }\n\n    mouseUp(){\n        this._active = null\n        this._mouseDown = false\n        window.removeEventListener('mouseup', this.mouseUp, true)\n        window.removeEventListener('mousemove', this.mouseMove, true)\n        this.update()\n\n        if( this._didChange ){\n            this._didChange = false\n            \n            this.dispatchEvent(new CustomEvent('change', {\n                bubbles: true,\n                composed: true,\n                detail: {value: this.value}\n            }))\n        }\n    }\n\n    mouseMove(e){\n        \n        // already at the min/max, stop tracking mouse move until within range again\n        if( this._active == 'min' && e.pageX < this._lastMousePos && this.atMin ) return\n        if( this._active == 'max' && e.pageX > this._lastMousePos && this.atMax ) return\n        \n        this._lastMousePos = e.pageX\n\n        let offset = {x: this.offsetLeft, y: this.offsetTop}\n        let parent = this.offsetParent\n        while(parent){\n            offset.x += parent.offsetLeft\n            offset.y += parent.offsetTop\n            parent = parent.offsetParent\n        }\n\n        // let mouseX = offset.x < e.pageX ? (e.offsetX + e.srcElement.offsetLeft) : e.pagex\n        let mouseX = e.screenX - window.screenX\n        let x = mouseX - offset.x\n        let percent = x / this.clientWidth * 100;\n\n        let val = (percent / 100) * this._len\n\n        this.value = val\n\n        this.dispatchEvent(new CustomEvent('changing', {\n            bubbles: true,\n            composed: true,\n            detail: {value: val}\n        }))\n    }\n\n})\n\nexport default customElements.get('range-slider')","\n// TODO: support prefixing?\nexport default (key, val)=>{\n\t\n\tlet ls = window.localStorage\n\t\n\tif( val === undefined ){\n\t\tlet data = ls.getItem(key)\n\t\t\n\t\tif( data === null || data === undefined )\n\t\t\treturn undefined\n\t\t\n\t\tvar val = ''\n\t\ttry { val = JSON.parse(data) }\n\t\tcatch(e) { val = data }\n\t\t\n\t\treturn val && isAmplify ? val.data : val;\n\t}\n\t\t\n\tif( val === null ){\n\t\treturn ls.removeItem(key)\n\t}\n\t\t\n\tval = JSON.stringify(val)\n\t\n\treturn ls.setItem(key, val)\n}","import { LitElement, html, css } from 'lit-element'\n// import Menu from '../presenters/menu'\nimport './icon'\nimport '../presenters/form-control/controls/range-slider'\nimport moment from 'moment'\nimport store from '../util/store'\n\n// TODO: hook up settings menu\n\nconst formatTime = sec=>{\n    var dur = moment.duration(sec * 1000)\n    var hours = dur.hours()\n    var min = hours > 0 ? String(dur.minutes()).padStart(2,'0') : dur.minutes()\n    return (hours?hours+':':'') + min + ':' + String(dur.seconds()).padStart(2,'0')\n}\n\nlet ACTIVE_PLAYER = null\n\ncustomElements.define('b-audio', class extends LitElement {\n\n    static get properties(){return {\n        src: {type: String, reflect: true},\n        autoplay: {type: Boolean, reflect: true},\n        playing: {type: Boolean, reflect: true},\n        // currentTime: {type: Number},\n    }}\n\n    constructor(src='', {\n        autoplay = false\n    }={}){\n        super()\n        this.src = src\n        this.autoplay = autoplay\n        this.playing = false\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            /* padding: 1em; */\n            border: solid 1px rgba(0,0,0,.1);\n            background: #fff;\n            border-radius: var(--radius);\n            --radius: 4px;\n        }\n\n        main {\n            display: grid;\n            grid-template-columns: 2em 45px 1fr 45px;\n            align-items: center;\n            justify-content: space-between;\n            gap: .25em;\n            padding-right: .5em;\n        }\n\n        .time {\n            font-weight: bold;\n        }\n\n        .time.elapsed {\n            text-align: right;\n        }\n\n        .btn-play {\n            cursor: pointer;\n            height: 1.5em;\n            width: 1.5em;\n            margin: .25em;\n            padding: .25em;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            flex-shrink: 0;\n            border-radius: 20px;\n            /* margin-right: .5em; */\n            background: #eee;\n            /* color: #fff; */\n            /* border: solid 2px; */\n            transition: color .15s ease-in-out, border-color .15s ease-in-out;\n        }\n\n        :host([status=\"error\"]) {\n            background: var(--red-50) !important;\n        }\n\n        :host([status=\"error\"]) .btn-play {\n            color: var(--red);\n            background: var(--red-100);\n        }\n\n\n        .btn-play:hover {\n            color: var(--blue);\n        }\n\n        input[type=range] {\n            -webkit-appearance: none;\n            min-width: 100px;\n            height: 10px;\n            border-radius: 5px;\n            background: var(--black);\n            outline: none;\n            padding: 0;\n            margin: 0 .5em;\n            border: none;\n            box-shadow: none;\n        }\n\n        input[type=range]::-webkit-slider-runnable-track {\n            border: none;\n            height: 100%;\n        }\n\n        input[type=range]::-webkit-slider-thumb {\n            display: none;\n            -webkit-appearance: none;\n            appearance: none;\n            width: 18px;\n            height: 18px;\n            border-radius: 50%;\n            border: solid 2px #fff;\n            background: var(--black);\n            cursor: pointer;\n            box-shadow: none;\n            margin-top: -4px;\n        }\n\n        input[type=range]::-webkit-slider-thumb:hover {\n            background: var(--blue);\n        }\n\n        input[type=range]:active::-webkit-slider-thumb {\n            background: var(--blue);\n        }\n\n        input[type=range]:hover::-webkit-slider-thumb {\n            display: block;\n        }\n\n        .settings {\n            transform: rotate(90deg);\n        }\n    `}\n\n    render(){ return html`\n        <main @mouseenter=${this.onHover} @mouseleave=${this.onHoverLeave}>\n            <audio\n                @loadedmetadata=${this.audioLoaded}\n                @timeupdate=${this.audioTimeChange}\n                @ended=${this.pause}\n                @error=${this.audioLoadError}\n            ></audio>\n            <span class=\"btn-play icon-play\" @click=${this.playPause}>\n                <b-icon name=${this.playing?'pause':'play'}></b-icon>\n            </span>\n            <span class=\"elapsed time\">00:00</span>\n            <input type=\"range\" value=\"0\" disabled\n                @input=${this.progressSliderChanging}\n                @change=${this.progressSliderChangingDone}\n                class=\"progress\"/>\n            <span class=\"remaining time\">00:00</span>\n            <!-- <b-btn clear icon=\"dot-3\" class=\"settings\" @click=${this.viewSettings}></b-btn> -->\n        </main>\n    `}\n\n    // events: {\n    //     'mouseenter': 'onHover',\n    //     'mouseleave': 'onHoverLeave',\n    //     'mouseenter .progress': 'progressHover',\n    //     'mouseleave .progress': 'progressHoverLeave',\n    //     'input .progress': 'progressSliderChanging',\n    //     'change .progress': 'progressSliderChangingDone',\n    //     'click .btn-settings': 'viewSettings',\n    //     'click .btn-play': 'playPause'\n    // },\n\n    firstUpdated(){\n\n        this.audio = this.shadowRoot.querySelector('audio')\n        this.progress = this.shadowRoot.querySelector('.progress')\n        this.elapsed = this.shadowRoot.querySelector('.elapsed')\n        this.remaining = this.shadowRoot.querySelector('.remaining')\n\n        this.loadAudio(this.src)\n    }\n    \n    get status(){ return this.getAttribute('status') }\n    set status(val){\n        this.setAttribute('status', val)\n    }\n\n    playPause(){\n        this.audio.paused ? this.play() : this.pause()\n    }\n\n    play(src){\n\n        // if another audio player is playing, pause it\n        if( ACTIVE_PLAYER && ACTIVE_PLAYER != this )\n            ACTIVE_PLAYER.pause()\n\n        // if audio src has not loaded yet or we have been given a new src, load it now\n        if( !this._loaded || src ){\n            this.loadAudio(src || this.src )\n            return\n        }\n\n        if( this.status == 'error' )\n            return;\n\n        ACTIVE_PLAYER = this;\n        this.audio.play()\n        this.playing = true\n    }\n\n    pause(){\n        ACTIVE_PLAYER = null;\n        this.clip = null; // clear any clips\n        this.audio.pause()\n        this.playing = false\n    }\n    \n    skipBack(val){ this.skip(-val||-10) }\n    skipForward(val){ this.skip(val||10) }\n    skip(amt){\n        var time = this.audio.currentTime + amt;\n        if( time < 0 ) time = 0;\n        if( time > this.audio.duration ) time = this.audio.duration;\n        this.audio.currentTime = time;\n    }\n    \n    loadAudio(src){\n        this.status = 'loading'\n        this.audio.src = src\n    }\n\n// Events ==================================================================\n\n    audioLoadError(){\n        this._loaded = true;\n        this.status = 'error'\n        this.progress.disabled = true\n    }\n\n    audioLoaded(){\n        this.status = 'loaded'\n        this._loaded = true;\n        this.progress.disabled = false\n        this.progress.max = this.audio.duration\n        this.setProgress()\n\n        // clips were set before fully loaded, so set them again if needed\n        if( this.clip && this.clip.length == 2 && isNaN(this.clip[1]) )\n            this.playLastClip()\n        else if( this.clip && this.clip.length > 2 && isNaN(this.clip[2]) )\n            this.playEndClips()\n        else if( this.autoplay )\n            this.play()\n    }\n\n/*\n    Playing <audio> time has changed\n*/\n    audioTimeChange(){\n        \n        // update the progress slider unless currently seeking\n        if( !this.seeking )\n            this.progress.value = this.audio.currentTime\n            \n        this.setProgress();\n\n        // reached end of clip, stop\n        if( this.clip && this.audio.currentTime >= this.clip[1] ){\n\n            // more than one clip is given, remove the just finished clip and begin playing the next one\n            if( this.clip.length > 2 ){\n                this.audio.pause();\n                setTimeout(function(){ // play next clip after 700ms pause\n                    this.playClip(this.clip.splice(2))\n                }.bind(this), 700)\n            }else{\n                this.pause();\n            }\n        }\n    }\n\n/*\n    Set Progress: uses current poisition to adjust background of proress slider on and updates elapsed/remaining times\n*/\n    setProgress(){\n\n        var percent = this.progress.value / this.audio.duration * 100;\n        var time = this.progress.value\n        var color = '#2c3033' // this.classList.contains('progress-hover') ? '#3498db' : '#2c3033';\n        \n        this.progress.style.background = \"linear-gradient(to right, \"+color+\" \"+percent+\"%, #bbb \"+percent+\"%)\"\n        this.elapsed.innerHTML = formatTime(time)\n        this.remaining.innerHTML = this.audio.duration == Infinity ? '' : formatTime(this.audio.duration - time)\n    }\n\n    progressSliderChanging(){\n        this.seeking = true\n        this.wasPlaying = this.wasPlaying || !this.audio.paused\n        this.audio.pause();\n        this.setProgress()\n    }\n\n    progressSliderChangingDone(){\n        this.audio.currentTime = this.progress.value\n        this.wasPlaying && this.play()\n        this.wasPlaying = null;\n        this.seeking = false;\n        this.progress.blur() // so slider doesn't hijack the keyboard events\n    }\n\n    progressHover(){\n        this.classList.add('progress-hover')\n        this.setProgress();\n    }\n\n    progressHoverLeave(){\n        this.classList.remove('progress-hover')\n        this.setProgress();\n    }\n    \n// Clips ====================================================================\n\n    setClipLength(item){\n        store('audioplayer:clip-length', item.val)\n    }\n\n    clipLength(){\n        return store('audioplayer:clip-length') || 15\n    }\n\n    playFirstClip(){\n        if( this.audio.duration < this.clipLength() ) return; // TODO: improve\n        this.playClip([0, this.clipLength()])\n    }\n\n    playLastClip(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playEndClips(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([0, this.clipLength(), this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playClip(clip){\n        this.clip = clip\n        if( !isNaN(this.clip[0]) )\n            this.audio.currentTime = this.clip[0]\n        this.play()\n    }\n    \n// Keyboard Shortcuts =======================================================\n\n    onKeyPress(e){\n\n        if( this.status == 'error' )\n            return;\n\n        e.preventDefault()\n        e.stopPropagation()\n\n        switch(e.which){\n            case 32: this.playPause(); break; // space\n            case 27: this.pause(); break; // esc\n            case 70: this.playFirstClip(); break; // f\n            case 76: this.playLastClip(); break; // l\n            case 69: this.playEndClips(); break; // e\n            case 37: // left\n                if( e.shiftKey )\n                    this.audio.currentTime = 0;\n                else\n                    this.skipBack(_.metaKey()?30:10)\n                break;\n            case 39: // right\n                if( e.shiftKey )\n                    this.audio.currentTime = this.audio.duration\n                else\n                    this.skipForward(_.metaKey()?30:10)\n                break;\n        }\n    }\n\n    onHover(){\n        this._onKeyPress = this._onKeyPress || this.onKeyPress.bind(this)\n        window.addEventListener('keydown', this._onKeyPress)\n    }\n\n    onHoverLeave(){\n        window.removeEventListener('keydown', this._onKeyPress)\n    }\n    \n// Settings & Utilities =====================================================\n\n    // viewSettings(e){\n\n    //     var menu = [{\n    //         label: 'Tips',\n    //         icon: 'lightbulb',\n    //         dropdown: {\n    //             view: marked(\"While hovered over the player, you can control via keybard shortcuts:  \\n\\n`space` = play/pause  \\n`f` = play **first** clip  \\n`l` = play **last** clip  \\n`e` = play **end** clips  \\n  \\n`` = skip **back** 10  \\n`ctrl+` 30 sec  \\n`` = skip **forward** 10  \\n`ctrl+` 30 sec\"),\n    //             align: 'leftBottom',\n    //             w: 180\n    //         }\n    //     },{\n    //         label: 'Clip Length',\n    //         icon: 'clock',\n    //         menu: {\n    //             view: [\n    //                 {label: '10 sec', val: 10},\n    //                 {label: '15 sec', val: 15},\n    //                 {label: '20 sec', val: 20},\n    //                 {label: '30 sec', val: 30},\n    //             ],\n    //             onClick: 'setClipLength',\n    //             selected: this.clipLength,\n    //             align: 'leftBottom',\n    //             w: 90\n    //         }\n    //     },'divider',{\n    //         label: 'Fullscreen',\n    //         icon: 'resize-full',\n    //         onClick: 'fullscreenToggle'\n    //     }]\n\n    //     $(e.currentTarget).dropdown(menu, {\n    //         w: 120,\n    //         align: 'bottomLeft',\n    //         trigger: 'none',\n    //         context: this\n    //     })\n    // }\n\n})\n\nexport default customElements.get('b-audio')","/*\n    TODO:\n    - add sliding animation?\n*/\nimport { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-carousel', class extends LitElement{\n\n    static get properties(){return {\n        views: {type: Array}\n    }}\n\n    constructor(){\n        super()\n        this.views = []\n        this.active = 0\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            --dotSize: 14px;\n            --dotPadding: 4px;\n            --dotMargin: 5px;\n            --dotExpand: scale(1.4);\n        }\n\n        [hidden] {\n            display: none;\n        }\n\n        nav {\n            display: flex;\n            margin: 1em 0;\n            justify-content: center;\n            align-items: center;\n        }\n\n        nav > div {\n            width: var(--dotSize);\n            height: var(--dotSize);\n            margin: var(--dotMargin);\n            padding: var(--dotPadding);\n            cursor: pointer;\n        }\n\n        nav > div > div {\n            height: 100%;\n            width: 100%;\n            border-radius: 20px;\n            background: #ccc;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n        }\n\n        nav > div:hover > div {\n            transform: var(--dotExpand);\n        }\n\n        nav > div[active] > div {\n            background: #2196F3;\n        }\n        \n        @media print {\n            nav {\n                display: none;\n            }\n\n            ::slotted(*) {\n                display: block !important\n            }\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n        <nav ?hidden=${this.views.length<=1}>${this.views.map((v,i)=>html`\n            <div i=${i} ?active=${i==this.active} @click=${this.navTo}>\n                <div></div>\n            </div>\n        `)}</nav>\n    `}\n\n    get active(){ return this.__active }\n    set active(val){\n        this.__active = val\n        this.views.forEach(v=>v.hidden=true)\n\n        if( !this.views[val] ) return \n\n        this.views[val].hidden = false\n        this.update()\n    }\n\n    navTo(e){\n        let i = e.currentTarget.getAttribute('i')\n        this.active = i\n    }\n\n    firstUpdated(){\n\n        let slot = this.shadowRoot.querySelector('slot');\n\n        slot.addEventListener('slotchange', e=>{\n            this.views = slot.assignedElements();\n            this.active = 0\n        });\n    }\n\n})\n\nexport default customElements.get('b-carousel')","// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n","\nconst APP_TITLE = document.title\n\nexport default class HistoryState {\n\n    constructor(parent, props){\n        this.parent = parent\n        this.props = Object.assign({\n            path: location.pathname,\n            hash: location.hash,\n            title: APP_TITLE\n        }, props)\n    }\n\n    get num(){ return this.props.num }\n\n    get isCurrent() {\n        return history.state && history.state.num == this.num\n    }\n\n    get isBefore(){\n        return history.state && history.state.num > this.num\n    }\n\n    get isBack(){\n        return this.isBefore()\n    }\n\n    get isAfter(){\n        return history.state && history.state.num < this.num\n    }\n\n    get isForward(){\n        return this.isAfter()\n    }\n\n    get path(){\n        return this.props.path+this.props.hash\n    }\n\n    update(props){\n        this.props = Object.assign(this.props, props)\n        \n        // if( this.isCurrent )\n        // FIXME: hmmm...this is causing problems (#1930)\n        // ...why did I do this in the first place? Do I actually need it?\n        // yes, I need it, add hacky path check for now\n        if( (!history.state || history.state.num == undefined) && this.path && this.path != '/' )\n            history.replaceState(this.props, null, this.path)\n            \n        this.parent.save()\n\n        if( this.props.title && this.isCurrent )\n            document.title = this.props.title\n    }\n\n    toJSON(){\n        return JSON.stringify(this.props)\n    }\n}","\nimport HistoryState from './history-state'\n\nexport default class HistoryStates {\n    constructor(){\n        let storedData = sessionStorage.getItem('history-states')\n        this.states = JSON.parse(storedData||'[]').map(props=>new HistoryState(this, JSON.parse(props)))\n\n        this._current = history.state && history.state.num || -1\n\n        this.add() // set initial state data\n    }\n\n    get length(){ return this.states.length }\n\n    get current(){\n        return this.get(this._current)\n    }\n\n    save(){\n        sessionStorage.setItem('history-states', JSON.stringify(this.states))\n    }\n\n    get(num, create=false){\n        if( !this.states[num] && create ){\n            this.states[num] = new HistoryState(this, {num})\n            // this.save()\n        }\n\n        return this.states[num]\n    }\n\n    add(props={}){\n\n        let oldNum = this._current\n        let num = history.state && history.state.num\n\n        if( num == undefined ){\n            num = ++this._current\n            \n            // remove trailing states as they are no longer valid\n            this.states.splice(num+1).forEach(state=>{\n                state.parent = null\n            })\n        }\n\n        let state = this.get(num, true)\n        \n        state.update(props)\n\n        this._current = state.num\n\n        let step = oldNum > this._current ? -1 : 1;\n        \n        let oldStates = []\n        // console.log(oldNum, this._current);\n        while(oldNum != this._current){\n            let oldState = this.get(oldNum)\n            if( oldState )\n                oldStates.push(oldState)\n            oldNum += step\n        }\n\n        // console.log(oldStates);\n\n        return [state, oldStates]\n    }\n}","import UrlPattern from 'url-pattern' // https://github.com/snd/url-pattern \nimport HistoryStates from './history-states'\n\nconst ROUTES = []\nconst APP_TITLE = document.title\nconst PATH_ROOT = location.pathname\nconst PATH_PREFIX = '#/'\n\nexport class Router {\n\n    // normalize path (always begin with `/#/`)\n    // TODO: allow for prefix to be set by developer\n    static normalizePath(path){\n        return path ? PATH_ROOT+PATH_PREFIX+path.replace(/^[#\\/]+/, '') : path\n    }\n\n    start(opts={}){\n\n        opts = Object.assign({\n            requireState: false\n        }, opts)\n\n        this.states = new HistoryStates()\n\n        // listen for state changes and change routes accordingly\n        window.addEventListener('popstate', e=>{\n            \n            if( opts.requireState && !e.state ) return // probably a sheetview change, ignore\n\n            let [newState, oldStates] = this.states.add()\n            this._changeRoute(oldStates, newState)\n        })\n\n        // trigger initial route\n        this._changeRoute([], this.states.current)\n    }\n\n    // pushes new path/state onto stack (does not trigger route change)\n    push(path, data={}){\n\n        if( path instanceof Route )\n            path = path.state ? path.state.path : path.rootPath\n        else\n            path = Router.normalizePath(path)\n\n        if( !path ){\n            path = PATH_ROOT // empty string doesn't work\n            data.title = data.title || APP_TITLE\n        }\n\n        history.pushState(data, null, path)\n\n        if( data.title )\n            document.title = data.title\n            \n        return this.states.add(data)\n    }\n\n    // pushes new path/state and triggers route change\n    goTo(path, data){\n        let [newState, oldStates] = this.push(path, data)\n        this._changeRoute(oldStates, newState)\n    }\n\n    _changeRoute(oldStates, newState){\n\n        let dir = oldStates.length == 0 || oldStates[0].num < newState.num ? 'forward' : 'back'\n\n        ROUTES.forEach(route=>{\n            route._change(oldStates, newState, dir)\n        })\n    }\n\n    add(path, enter, exit){\n        new Route(path, enter, exit)\n    }\n\n    get routes(){\n        return ROUTES.map(route=>route.path)\n    }\n\n    get rootRoutes(){\n        return ROUTES.map(route=>route.rootPath)\n    }\n\n}\n\nexport class Route {\n    \n    constructor(path, onChange){\n        \n        path = Router.normalizePath(path)\n        this.path = path\n        this.patt = new UrlPattern(path)\n\n        this.change = onChange\n\n        ROUTES.push(this)\n    }\n\n    get params(){\n        return this.state ? this.state.params : {}\n    }\n\n    get rootPath(){\n        return this.patt.ast[0].value\n    }\n\n    get isCurrent(){\n        return this.state&&this.state.isCurrent\n    }\n\n    update(props){\n        this.state&&this.state.update(props)\n    }\n\n    matches(state){\n\n        // array of states, get the last matched state in the list\n        if( Array.isArray(state) ){\n            let matchedState = null\n            for(let i in state){\n                if( this.matches(state[i]) )\n                    matchedState = state[i]\n            }\n            return matchedState\n        }\n\n        let params = state ? this.patt.match(state.path?state.path:state) : false\n        if( params ){\n            this.state = state\n            state.params = params\n            return state\n        }\n        return null\n    }\n\n    _change(oldState, newState, dir){\n\n        oldState = this.matches(oldState)\n        newState = this.matches(newState)\n\n        if( oldState || newState )\n            this.change(oldState, newState, dir)\n    }\n}\n\n// singleton\nexport default new Router()","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, NodePart, Part} from '../lit-html.js';\n\ninterface PreviousValue {\n  readonly value: unknown;\n  readonly fragment: DocumentFragment;\n}\n\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap<NodePart, PreviousValue>();\n\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value: unknown) => (part: Part): void => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) &&\n      value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value as string;  // innerHTML casts to string internally\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {value, fragment});\n});\n","export default typeof window !== 'undefined' && typeof document !== 'undefined';\n","import isBrowser from './isBrowser';\n\nconst longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nlet timeoutDuration = 0;\nfor (let i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nexport function microtaskDebounce(fn) {\n  let called = false\n  return () => {\n    if (called) {\n      return\n    }\n    called = true\n    window.Promise.resolve().then(() => {\n      called = false\n      fn()\n    })\n  }\n}\n\nexport function taskDebounce(fn) {\n  let scheduled = false;\n  return () => {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nconst supportsMicroTasks = isBrowser && window.Promise\n\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nexport default (supportsMicroTasks\n  ? microtaskDebounce\n  : taskDebounce);\n","/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nexport default function isFunction(functionToCheck) {\n  const getType = {};\n  return (\n    functionToCheck &&\n    getType.toString.call(functionToCheck) === '[object Function]'\n  );\n}\n","/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nexport default function getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  const window = element.ownerDocument.defaultView;\n  const css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n","/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nexport default function getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nexport default function getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n","import isBrowser from './isBrowser';\n\nconst isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nconst isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nexport default function isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nexport default function getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  const noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  let offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  const nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\n  ) {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n","import getOffsetParent from './getOffsetParent';\n\nexport default function isOffsetContainer(element) {\n  const { nodeName } = element;\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return (\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\n  );\n}\n","/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nexport default function getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n","import isOffsetContainer from './isOffsetContainer';\nimport getRoot from './getRoot';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nexport default function findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const { commonAncestorContainer } = range;\n\n  // Both nodes are inside #document\n  if (\n    (element1 !== commonAncestorContainer &&\n      element2 !== commonAncestorContainer) ||\n    start.contains(end)\n  ) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n","/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nexport default function getScroll(element, side = 'top') {\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  const nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    const html = element.ownerDocument.documentElement;\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n","import getScroll from './getScroll';\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nexport default function includeScroll(rect, element, subtract = false) {\n  const scrollTop = getScroll(element, 'top');\n  const scrollLeft = getScroll(element, 'left');\n  const modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n","/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nexport default function getBordersSize(styles, axis) {\n  const sideA = axis === 'x' ? 'Left' : 'Top';\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return (\n    parseFloat(styles[`border${sideA}Width`], 10) +\n    parseFloat(styles[`border${sideB}Width`], 10)\n  );\n}\n","import isIE from './isIE';\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(\n    body[`offset${axis}`],\n    body[`scroll${axis}`],\n    html[`client${axis}`],\n    html[`offset${axis}`],\n    html[`scroll${axis}`],\n    isIE(10)\n      ? (parseInt(html[`offset${axis}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Top' : 'Left'}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Bottom' : 'Right'}`]))\n    : 0 \n  );\n}\n\nexport default function getWindowSizes(document) {\n  const body = document.body;\n  const html = document.documentElement;\n  const computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle),\n  };\n}\n","/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nexport default function getClientRect(offsets) {\n  return {\n    ...offsets,\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height,\n  };\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getBordersSize from './getBordersSize';\nimport getWindowSizes from './getWindowSizes';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\nimport isIE from './isIE';\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nexport default function getBoundingClientRect(element) {\n  let rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      const scrollTop = getScroll(element, 'top');\n      const scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    }\n    else {\n      rect = element.getBoundingClientRect();\n    }\n  }\n  catch(e){}\n\n  const result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top,\n  };\n\n  // subtract scrollbar size from sizes\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  const width =\n    sizes.width || element.clientWidth || result.right - result.left;\n  const height =\n    sizes.height || element.clientHeight || result.bottom - result.top;\n\n  let horizScrollbar = element.offsetWidth - width;\n  let vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    const styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport includeScroll from './includeScroll';\nimport getScrollParent from './getScrollParent';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport runIsIE from './isIE';\nimport getClientRect from './getClientRect';\n\nexport default function getOffsetRectRelativeToArbitraryNode(children, parent, fixedPosition = false) {\n  const isIE10 = runIsIE(10);\n  const isHTML = parent.nodeName === 'HTML';\n  const childrenRect = getBoundingClientRect(children);\n  const parentRect = getBoundingClientRect(parent);\n  const scrollParent = getScrollParent(children);\n\n  const styles = getStyleComputedProperty(parent);\n  const borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if(fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  let offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height,\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    const marginTop = parseFloat(styles.marginTop, 10);\n    const marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (\n    isIE10 && !fixedPosition\n      ? parent.contains(scrollParent)\n      : parent === scrollParent && scrollParent.nodeName !== 'BODY'\n  ) {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n","import getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\n\nexport default function getViewportOffsetRectRelativeToArtbitraryNode(element, excludeScroll = false) {\n  const html = element.ownerDocument.documentElement;\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  const offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width,\n    height,\n  };\n\n  return getClientRect(offset);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nexport default function isFixed(element) {\n  const nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  const parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nexport default function getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n   if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  let el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n\n}\n","import getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getViewportOffsetRectRelativeToArtbitraryNode from './getViewportOffsetRectRelativeToArtbitraryNode';\nimport getWindowSizes from './getWindowSizes';\nimport isFixed from './isFixed';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nexport default function getBoundaries(\n  popper,\n  reference,\n  padding,\n  boundariesElement,\n  fixedPosition = false\n) {\n  // NOTE: 1 DOM access here\n\n  let boundaries = { top: 0, left: 0 };\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport' ) {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  }\n\n  else {\n    // Handle other cases based on DOM element used as boundaries\n    let boundariesNode;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    const offsets = getOffsetRectRelativeToArbitraryNode(\n      boundariesNode,\n      offsetParent,\n      fixedPosition\n    );\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      const { height, width } = getWindowSizes(popper.ownerDocument);\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  const isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0; \n  boundaries.top += isPaddingNumber ? padding : padding.top || 0; \n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0; \n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0; \n\n  return boundaries;\n}\n","import getBoundaries from '../utils/getBoundaries';\n\nfunction getArea({ width, height }) {\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeAutoPlacement(\n  placement,\n  refRect,\n  popper,\n  reference,\n  boundariesElement,\n  padding = 0\n) {\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  const boundaries = getBoundaries(\n    popper,\n    reference,\n    padding,\n    boundariesElement\n  );\n\n  const rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top,\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height,\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom,\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height,\n    },\n  };\n\n  const sortedAreas = Object.keys(rects)\n    .map(key => ({\n      key,\n      ...rects[key],\n      area: getArea(rects[key]),\n    }))\n    .sort((a, b) => b.area - a.area);\n\n  const filteredAreas = sortedAreas.filter(\n    ({ width, height }) =>\n      width >= popper.clientWidth && height >= popper.clientHeight\n  );\n\n  const computedPlacement = filteredAreas.length > 0\n    ? filteredAreas[0].key\n    : sortedAreas[0].key;\n\n  const variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? `-${variation}` : '');\n}\n","import findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nexport default function getReferenceOffsets(state, popper, reference, fixedPosition = null) {\n  const commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n","/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nexport default function getOuterSizes(element) {\n  const window = element.ownerDocument.defaultView;\n  const styles = window.getComputedStyle(element);\n  const x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  const y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  const result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x,\n  };\n  return result;\n}\n","/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nexport default function getOppositePlacement(placement) {\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched]);\n}\n","import getOuterSizes from './getOuterSizes';\nimport getOppositePlacement from './getOppositePlacement';\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nexport default function getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  const popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  const popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height,\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  const mainSide = isHoriz ? 'top' : 'left';\n  const secondarySide = isHoriz ? 'left' : 'top';\n  const measurement = isHoriz ? 'height' : 'width';\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] =\n    referenceOffsets[mainSide] +\n    referenceOffsets[measurement] / 2 -\n    popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] =\n      referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] =\n      referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n","/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n","import find from './find';\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(cur => cur[prop] === value);\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  const match = find(arr, obj => obj[prop] === value);\n  return arr.indexOf(match);\n}\n","import isFunction from './isFunction';\nimport findIndex from './findIndex';\nimport getClientRect from '../utils/getClientRect';\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nexport default function runModifiers(modifiers, data, ends) {\n  const modifiersToRun = ends === undefined\n    ? modifiers\n    : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(modifier => {\n    if (modifier['function']) { // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    const fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n","import computeAutoPlacement from '../utils/computeAutoPlacement';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nexport default function update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  let data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {},\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(\n    this.state,\n    this.popper,\n    this.reference,\n    this.options.positionFixed\n  );\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(\n    this.options.placement,\n    data.offsets.reference,\n    this.popper,\n    this.reference,\n    this.options.modifiers.flip.boundariesElement,\n    this.options.modifiers.flip.padding\n  );\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(\n    this.popper,\n    data.offsets.reference,\n    data.placement\n  );\n\n  data.offsets.popper.position = this.options.positionFixed\n    ? 'fixed'\n    : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n","/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nexport default function isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(\n    ({ name, enabled }) => enabled && name === modifierName\n  );\n}\n","/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nexport default function getSupportedPropertyName(property) {\n  const prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  const upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefix = prefixes[i];\n    const toCheck = prefix ? `${prefix}${upperProp}` : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n","import isModifierEnabled from '../utils/isModifierEnabled';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nexport default function destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n","/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nexport default function getWindow(element) {\n  const ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","import getScrollParent from './getScrollParent';\nimport getWindow from './getWindow';\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(\n      getScrollParent(target.parentNode),\n      event,\n      callback,\n      scrollParents\n    );\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function setupEventListeners(\n  reference,\n  options,\n  state,\n  updateBound\n) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  const scrollElement = getScrollParent(reference);\n  attachToScrollParents(\n    scrollElement,\n    'scroll',\n    state.updateBound,\n    state.scrollParents\n  );\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n","import setupEventListeners from '../utils/setupEventListeners';\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nexport default function enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(\n      this.reference,\n      this.options,\n      this.state,\n      this.scheduleUpdate\n    );\n  }\n}\n","import getWindow from './getWindow';\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(target => {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n","import removeEventListeners from '../utils/removeEventListeners';\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nexport default function disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n","/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nexport default function isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n","import isNumeric from './isNumeric';\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setStyles(element, styles) {\n  Object.keys(styles).forEach(prop => {\n    let unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (\n      ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !==\n        -1 &&\n      isNumeric(styles[prop])\n    ) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n","/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function(prop) {\n    const value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n","import setStyles from '../utils/setStyles';\nimport setAttributes from '../utils/setAttributes';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport computeAutoPlacement from '../utils/computeAutoPlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nexport default function applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nexport function applyStyleOnLoad(\n  reference,\n  popper,\n  options,\n  modifierOptions,\n  state\n) {\n  // compute reference element offsets\n  const referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  const placement = computeAutoPlacement(\n    options.placement,\n    referenceOffsets,\n    popper,\n    reference,\n    options.modifiers.flip.boundariesElement,\n    options.modifiers.flip.padding\n  );\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n","/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nexport default function getRoundedOffsets(data, shouldRound) {\n  const { popper, reference } = data.offsets;\n  const { round, floor } = Math;\n  const noRound = v => v;\n  \n  const referenceWidth = round(reference.width);\n  const popperWidth = round(popper.width);\n  \n  const isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  const isVariation = data.placement.indexOf('-') !== -1;\n  const sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  const bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  const horizontalToInteger = !shouldRound\n    ? noRound\n    : isVertical || isVariation || sameWidthParity\n    ? round\n    : floor;\n  const verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(\n      bothOddWidth && !isVariation && shouldRound\n        ? popper.left - 1\n        : popper.left\n    ),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right),\n  };\n}\n","import getSupportedPropertyName from '../utils/getSupportedPropertyName';\nimport find from '../utils/find';\nimport getOffsetParent from '../utils/getOffsetParent';\nimport getBoundingClientRect from '../utils/getBoundingClientRect';\nimport getRoundedOffsets from '../utils/getRoundedOffsets';\nimport isBrowser from '../utils/isBrowser';\n\nconst isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeStyle(data, options) {\n  const { x, y } = options;\n  const { popper } = data.offsets;\n\n  // Remove this legacy support in Popper.js v2\n  const legacyGpuAccelerationOption = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'applyStyle'\n  ).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn(\n      'WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'\n    );\n  }\n  const gpuAcceleration =\n    legacyGpuAccelerationOption !== undefined\n      ? legacyGpuAccelerationOption\n      : options.gpuAcceleration;\n\n  const offsetParent = getOffsetParent(data.instance.popper);\n  const offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  const styles = {\n    position: popper.position,\n  };\n\n  const offsets = getRoundedOffsets(\n    data,\n    window.devicePixelRatio < 2 || !isFirefox\n  );\n\n  const sideA = x === 'bottom' ? 'top' : 'bottom';\n  const sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  const prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  let left, top;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = `translate3d(${left}px, ${top}px, 0)`;\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    const invertTop = sideA === 'bottom' ? -1 : 1;\n    const invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = `${sideA}, ${sideB}`;\n  }\n\n  // Attributes\n  const attributes = {\n    'x-placement': data.placement,\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = { ...attributes, ...data.attributes };\n  data.styles = { ...styles, ...data.styles };\n  data.arrowStyles = { ...data.offsets.arrow, ...data.arrowStyles };\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nexport default function isModifierRequired(\n  modifiers,\n  requestingName,\n  requestedName\n) {\n  const requesting = find(modifiers, ({ name }) => name === requestingName);\n\n  const isRequired =\n    !!requesting &&\n    modifiers.some(modifier => {\n      return (\n        modifier.name === requestedName &&\n        modifier.enabled &&\n        modifier.order < requesting.order\n      );\n    });\n\n  if (!isRequired) {\n    const requesting = `\\`${requestingName}\\``;\n    const requested = `\\`${requestedName}\\``;\n    console.warn(\n      `${requested} modifier is required by ${requesting} modifier in order to work, be sure to include it before ${requesting}!`\n    );\n  }\n  return isRequired;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOuterSizes from '../utils/getOuterSizes';\nimport isModifierRequired from '../utils/isModifierRequired';\nimport getStyleComputedProperty from '../utils/getStyleComputedProperty';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  let arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn(\n        'WARNING: `arrow.element` must be child of its popper element!'\n      );\n      return data;\n    }\n  }\n\n  const placement = data.placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  const len = isVertical ? 'height' : 'width';\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\n  const side = sideCapitalized.toLowerCase();\n  const altSide = isVertical ? 'left' : 'top';\n  const opSide = isVertical ? 'bottom' : 'right';\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -=\n      popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] +=\n      reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  const center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  const css = getStyleComputedProperty(data.instance.popper);\n  const popperMarginSide = parseFloat(css[`margin${sideCapitalized}`], 10);\n  const popperBorderSide = parseFloat(css[`border${sideCapitalized}Width`], 10);\n  let sideValue =\n    center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {\n    [side]: Math.round(sideValue),\n    [altSide]: '', // make sure to unset any eventual altSide value from the DOM node\n  };\n\n  return data;\n}\n","/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nexport default function getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n","/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nexport default [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n","import placements from '../methods/placements';\n\n// Get rid of `auto` `auto-start` and `auto-end`\nconst validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nexport default function clockwise(placement, counter = false) {\n  const index = validPlacements.indexOf(placement);\n  const arr = validPlacements\n    .slice(index + 1)\n    .concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n","import getOppositePlacement from '../utils/getOppositePlacement';\nimport getOppositeVariation from '../utils/getOppositeVariation';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\nimport getBoundaries from '../utils/getBoundaries';\nimport isModifierEnabled from '../utils/isModifierEnabled';\nimport clockwise from '../utils/clockwise';\n\nconst BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise',\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    options.boundariesElement,\n    data.positionFixed\n  );\n\n  let placement = data.placement.split('-')[0];\n  let placementOpposite = getOppositePlacement(placement);\n  let variation = data.placement.split('-')[1] || '';\n\n  let flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach((step, index) => {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    const popperOffsets = data.offsets.popper;\n    const refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    const floor = Math.floor;\n    const overlapsRef =\n      (placement === 'left' &&\n        floor(popperOffsets.right) > floor(refOffsets.left)) ||\n      (placement === 'right' &&\n        floor(popperOffsets.left) < floor(refOffsets.right)) ||\n      (placement === 'top' &&\n        floor(popperOffsets.bottom) > floor(refOffsets.top)) ||\n      (placement === 'bottom' &&\n        floor(popperOffsets.top) < floor(refOffsets.bottom));\n\n    const overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    const overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    const overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    const overflowsBottom =\n      floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    const overflowsBoundaries =\n      (placement === 'left' && overflowsLeft) ||\n      (placement === 'right' && overflowsRight) ||\n      (placement === 'top' && overflowsTop) ||\n      (placement === 'bottom' && overflowsBottom);\n\n    // flip the variation if required\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    const flippedVariationByRef =\n      !!options.flipVariations &&\n      ((isVertical && variation === 'start' && overflowsLeft) ||\n        (isVertical && variation === 'end' && overflowsRight) ||\n        (!isVertical && variation === 'start' && overflowsTop) ||\n        (!isVertical && variation === 'end' && overflowsBottom));\n\n    // flips variation if popper content overflows boundaries\n    const flippedVariationByContent =\n      !!options.flipVariationsByContent &&\n      ((isVertical && variation === 'start' && overflowsRight) ||\n        (isVertical && variation === 'end' && overflowsLeft) ||\n        (!isVertical && variation === 'start' && overflowsBottom) ||\n        (!isVertical && variation === 'end' && overflowsTop));\n\n    const flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = {\n        ...data.offsets.popper,\n        ...getPopperOffsets(\n          data.instance.popper,\n          data.offsets.reference,\n          data.placement\n        ),\n      };\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function keepTogether(data) {\n  const { popper, reference } = data.offsets;\n  const placement = data.placement.split('-')[0];\n  const floor = Math.floor;\n  const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  const side = isVertical ? 'right' : 'bottom';\n  const opSide = isVertical ? 'left' : 'top';\n  const measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] =\n      floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n","import isNumeric from '../utils/isNumeric';\nimport getClientRect from '../utils/getClientRect';\nimport find from '../utils/find';\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nexport function toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  const split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  const value = +split[1];\n  const unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    let element;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    const rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    let size;\n    if (unit === 'vh') {\n      size = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      );\n    } else {\n      size = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      );\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nexport function parseOffset(\n  offset,\n  popperOffsets,\n  referenceOffsets,\n  basePlacement\n) {\n  const offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  const useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  const fragments = offset.split(/(\\+|\\-)/).map(frag => frag.trim());\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  const divider = fragments.indexOf(\n    find(fragments, frag => frag.search(/,|\\s/) !== -1)\n  );\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn(\n      'Offsets separated by white space(s) are deprecated, use a comma (,) instead.'\n    );\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  const splitRegex = /\\s*,\\s*|\\s+/;\n  let ops = divider !== -1\n    ? [\n        fragments\n          .slice(0, divider)\n          .concat([fragments[divider].split(splitRegex)[0]]),\n        [fragments[divider].split(splitRegex)[1]].concat(\n          fragments.slice(divider + 1)\n        ),\n      ]\n    : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map((op, index) => {\n    // Most of the units rely on the orientation of the popper\n    const measurement = (index === 1 ? !useHeight : useHeight)\n      ? 'height'\n      : 'width';\n    let mergeWithPrevious = false;\n    return (\n      op\n        // This aggregates any `+` or `-` sign that aren't considered operators\n        // e.g.: 10 + +5 => [10, +, +5]\n        .reduce((a, b) => {\n          if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n            a[a.length - 1] = b;\n            mergeWithPrevious = true;\n            return a;\n          } else if (mergeWithPrevious) {\n            a[a.length - 1] += b;\n            mergeWithPrevious = false;\n            return a;\n          } else {\n            return a.concat(b);\n          }\n        }, [])\n        // Here we convert the string values into number values (in px)\n        .map(str => toValue(str, measurement, popperOffsets, referenceOffsets))\n    );\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach((op, index) => {\n    op.forEach((frag, index2) => {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nexport default function offset(data, { offset }) {\n  const { placement, offsets: { popper, reference } } = data;\n  const basePlacement = placement.split('-')[0];\n\n  let offsets;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n","import getOffsetParent from '../utils/getOffsetParent';\nimport getBoundaries from '../utils/getBoundaries';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function preventOverflow(data, options) {\n  let boundariesElement =\n    options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  const transformProp = getSupportedPropertyName('transform');\n  const popperStyles = data.instance.popper.style; // assignment to help minification\n  const { top, left, [transformProp]: transform } = popperStyles;\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    boundariesElement,\n    data.positionFixed\n  );\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  const order = options.priority;\n  let popper = data.offsets.popper;\n\n  const check = {\n    primary(placement) {\n      let value = popper[placement];\n      if (\n        popper[placement] < boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return { [placement]: value };\n    },\n    secondary(placement) {\n      const mainSide = placement === 'right' ? 'left' : 'top';\n      let value = popper[mainSide];\n      if (\n        popper[placement] > boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.min(\n          popper[mainSide],\n          boundaries[placement] -\n            (placement === 'right' ? popper.width : popper.height)\n        );\n      }\n      return { [mainSide]: value };\n    },\n  };\n\n  order.forEach(placement => {\n    const side =\n      ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = { ...popper, ...check[side](placement) };\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function shift(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    const { reference, popper } = data.offsets;\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    const side = isVertical ? 'left' : 'top';\n    const measurement = isVertical ? 'width' : 'height';\n\n    const shiftOffsets = {\n      start: { [side]: reference[side] },\n      end: {\n        [side]: reference[side] + reference[measurement] - popper[measurement],\n      },\n    };\n\n    data.offsets.popper = { ...popper, ...shiftOffsets[shiftvariation] };\n  }\n\n  return data;\n}\n","import isModifierRequired from '../utils/isModifierRequired';\nimport find from '../utils/find';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  const refRect = data.offsets.reference;\n  const bound = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'preventOverflow'\n  ).boundaries;\n\n  if (\n    refRect.bottom < bound.top ||\n    refRect.left > bound.right ||\n    refRect.top > bound.bottom ||\n    refRect.right < bound.left\n  ) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOppositePlacement from '../utils/getOppositePlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function inner(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  const subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] =\n    reference[basePlacement] -\n    (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n","import applyStyle, { applyStyleOnLoad } from './applyStyle';\nimport computeStyle from './computeStyle';\nimport arrow from './arrow';\nimport flip from './flip';\nimport keepTogether from './keepTogether';\nimport offset from './offset';\nimport preventOverflow from './preventOverflow';\nimport shift from './shift';\nimport hide from './hide';\nimport inner from './inner';\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nexport default {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift,\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0,\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent',\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether,\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]',\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false,\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner,\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide,\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right',\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined,\n  },\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n","import modifiers from '../modifiers/index';\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nexport default {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: () => {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: () => {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers,\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n","// Utils\nimport debounce from './utils/debounce';\nimport isFunction from './utils/isFunction';\n\n// Methods\nimport update from './methods/update';\nimport destroy from './methods/destroy';\nimport enableEventListeners from './methods/enableEventListeners';\nimport disableEventListeners from './methods/disableEventListeners';\nimport Defaults from './methods/defaults';\nimport placements from './methods/placements';\n\nexport default class Popper {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  constructor(reference, popper, options = {}) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = { ...Popper.Defaults, ...options };\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: [],\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys({\n      ...Popper.Defaults.modifiers,\n      ...options.modifiers,\n    }).forEach(name => {\n      this.options.modifiers[name] = {\n        // If it's a built-in modifier, use it as base\n        ...(Popper.Defaults.modifiers[name] || {}),\n        // If there are custom options, override and merge with default ones\n        ...(options.modifiers ? options.modifiers[name] : {}),\n      };\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers)\n      .map(name => ({\n        name,\n        ...this.options.modifiers[name],\n      }))\n      // sort the modifiers by order\n      .sort((a, b) => a.order - b.order);\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(modifierOptions => {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(\n          this.reference,\n          this.popper,\n          this.options,\n          modifierOptions,\n          this.state\n        );\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    const eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n  update() {\n    return update.call(this);\n  }\n  destroy() {\n    return destroy.call(this);\n  }\n  enableEventListeners() {\n    return enableEventListeners.call(this);\n  }\n  disableEventListeners() {\n    return disableEventListeners.call(this);\n  }\n\n  /**\n   * Schedules an update. It will run on the next UI update available.\n   * @method scheduleUpdate\n   * @memberof Popper\n   */\n  scheduleUpdate = () => requestAnimationFrame(this.update);\n\n  /**\n   * Collection of utilities useful when writing custom modifiers.\n   * Starting from version 1.7, this method is available only if you\n   * include `popper-utils.js` before `popper.js`.\n   *\n   * **DEPRECATION**: This way to access PopperUtils is deprecated\n   * and will be removed in v2! Use the PopperUtils module directly instead.\n   * Due to the high instability of the methods contained in Utils, we can't\n   * guarantee them to follow semver. Use them at your own risk!\n   * @static\n   * @private\n   * @type {Object}\n   * @deprecated since version 1.8\n   * @member Utils\n   * @memberof Popper\n   */\n  static Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\n\n  static placements = placements;\n\n  static Defaults = Defaults;\n}\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n","/*\n\tPopover\n*/\nimport Popper from 'popper.js'\n\nconst styles = require('./style.less')\n\nexport const DefaultOpts = {\n\talign: 'bottom',\n\tclassName: '',\n\tclickToggles: true,\n\tcloseOnHide: true,\n\tmaxHeight: 'auto',\n\tmaxHeightThreshold: 400,\n\tonClose: ()=>{},\n\tonKeydown: e=>{}\n}\n\nconst OpenPopovers = []\nlet WatchingClicks = false\nlet WatchingKeyboard = false\n\nconst WatchClicks = function(e){\n\t\n\tlet found = false\n\tlet close = []\n\t\n\t// the clicked target already has a popover and has the \"toggle\" setting, so close the current popover\n\tif( e.target.popover && e.target.popover.view != e.target && e.target.popover.opts.clickToggles ){\n\t\te.target.popover._close()\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\treturn false\n\t}\n\t\n\t// close all popovers not part (nested) within the clicked target\n\tOpenPopovers.slice(0).reverse().forEach(dd=>{\n\t\tif( !found && !dd.contains(e.target) ){\n\t\t\tclose.push(dd)\n\t\t\t\n\t\t// as soon as one of the popovers is nested, all others that follow will be nested, no reason to continue testing\n\t\t}else{\n\t\t\tfound = true\n\t\t}\n\t})\n\t\n\tclose.forEach(dd=>dd._close())\n}\n\nconst WatchKeyboard = function(e){\n\tlet popover = OpenPopovers.slice(0).pop()\n\tpopover._onKeydown(e)\n}\n\nexport default class Popover {\n\t\n\tconstructor(target, view, opts={}){\n\t\t\n\t\topts = Object.assign({}, DefaultOpts, opts)\n\t\t\n\t\tif( !WatchingClicks ){\n\t\t\tWatchingClicks = true\n\t\t\twindow.addEventListener('click', WatchClicks, true)\n\t\t}\n\t\t\n\t\tif( !WatchingKeyboard ){\n\t\t\tWatchingKeyboard = true\n\t\t\twindow.addEventListener('keydown', WatchKeyboard, true)\n\t\t}\n\t\t\n\t\tif( typeof view == 'string' ){\n\n\t\t\tif( customElements.get(view) ){\n\t\t\t\tview = document.createElement(view)\n\t\t\t}else{\n\t\t\t\tlet _view = document.createElement('div')\n\t\t\t\t_view.classList.add('tooltip')\n\t\t\t\t_view.innerHTML = view\n\t\t\t\tview = _view\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( window.Backbone && view instanceof window.Backbone.View )\n\t\t\tview = view.el\n\t\t\n\t\tthis.opts = opts\n\t\tthis.target = target\n\t\tthis.view = view\n\t\t\n\t\tthis.target.classList.add('popover-open')\n\t\tthis.view.classList.add('__view')\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('popover')\n\t\tthis.el.innerHTML = '<span class=\"__arrow\" x-arrow><span class=\"__arrow\" x-arrow></span></span>'\n\t\tthis.el.appendChild(view)\n\t\tdocument.body.append(this.el)\n\t\t\n\t\tif( this.opts.className ){\n\t\t\tthis.opts.className.split(' ').forEach(className=>this.el.classList.add(className));\n\t\t}\n\t\t\n\t\tthis.target.popover = this\n\t\tthis.el.popover = this\n\t\tthis.view.popover = this\n\t\t\n\t\t// set position of the popover using Popper\n\t\tthis.popper = new Popper(target, this.el, {\n\t\t\tplacement: opts.align,\n\t\t\tremoveOnDestroy: true,\n\t\t\tonCreate: this._onPositionCreate.bind(this),\n\t\t\tonUpdate: this._onPositionUpdate.bind(this),\n\t\t\tmodifiers: {\n\t\t\t\t// flip: {enabled: !this.isNested},\n\t\t\t\t// hide: {enabled: !this.isNested},\n\t\t\t\tpreventOverflow: {\n\t\t\t\t\tenabled: opts.preventDefault !== undefined ? opts.preventDefault : true, // FIXME: confusing naming and not sure it works\n\t\t\t\t\tboundariesElement: opts.overflowBoundry || 'scrollParent',\n\t\t\t\t\t// priority: []\n\t\t\t\t\tpriority: ['top', 'bottom'].includes(opts.align) ? ['left', 'right'] : ['top', 'bottom']\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\t// watch for the view to add elements so we can adjust position\n\t\tthis.mutationObserver = new MutationObserver(this.viewMutated.bind(this));\n\t\tthis.mutationObserver.observe(this.view, { attributes: true, childList: true, subtree: false });\n\t\t\n\t\t// keep track of open popovers so we can remove them later\n\t\tOpenPopovers.push(this)\n\t}\n\t\n\tcontains(target){\n\t\tif( this.el.contains(target) )\n\t\t\treturn true\n\t\t\n\t\t// let parentPopover = this.parentPopover\n\t\t// if( parentPopover && parentPopover.contains(target) )\n\t\t// \treturn true\n\t\t\n\t\tlet targetParent = target.parentElement && target.parentElement.popover\n\t\tif( targetParent && this.el.contains(targetParent.target) )\n\t\t\treturn true\n\t\t\t\n\t\treturn false\n\t}\n\t\n\tget parentPopover(){\n\t\tlet parentPopover = false\n\t\tlet parent = this.target\n\t\twhile(parent && !parentPopover){\n\t\t\tparent = parent.parentElement\n\t\t\tif( parent && parent.popover )\n\t\t\t\tparentPopover = parent\n\t\t}\n\t\treturn parentPopover\n\t}\n\t\n\tget isNested(){\n\t\treturn !!this.parentPopover\n\t}\n\t\n\tviewMutated(mutationsList, observer){\n\t\tthis._updatePosition()\n\t}\n\t\n\tclose(){\n\t\t\n\t\tif( !this.target.popover ) return;\n\t\t\n\t\tthis.target.popover = null\n\t\tthis.el.popover = null\n\t\tthis.view.popover = null\n\t\t\n\t\tthis.mutationObserver.disconnect()\n\t\tthis.popper.destroy()\n\t\tthis.target.classList.remove('popover-open')\n\t\t\n\t\t// remove this from the list of open popovers as well as all popovers after it\n\t\tvar indx = OpenPopovers.indexOf(this)\n\t    if( indx > -1){\n\t        OpenPopovers.splice(indx).forEach((dd,i)=>{\n\t\t\t\tif( i > 0 ) dd._close() // close all popovers nested inside of this one\n\t\t\t})\n\t\t}\n\t\t\n\t\t// no more popovers, remove event listners\n\t\tif( OpenPopovers.length == 0 ){\n\t\t\tWatchingClicks = false\n\t\t\twindow.removeEventListener('click', WatchClicks, true)\n\t\t\t\n\t\t\tWatchingKeyboard = false\n\t\t\twindow.removeEventListener('keydown', WatchKeyboard, true)\n\t\t}\n\t}\n\t\n\t// internal close method that also triggers the onClose callback\n\t_close(){\n\t\tthis.close()\n\t\tthis.opts.onClose&&this.opts.onClose()\n\t}\n\t\n\t_updatePosition(){\n\t\tthis.popper.update()\n\t}\n\t\n\t_onPositionCreate(data){\n\t\tdata.instance.modifiers.forEach(m=>{\n\t\t\tif( m.name == 'preventOverflow' && m.boundaries ){\n\t\t\t\tthis.maxHeight = m.boundaries.height\n\t\t\t\tthis.view.style.maxWidth = this.opts.maxWidth||''\n\t\t\t}\n\t\t})\n\t}\n\t\n\t_onPositionUpdate(data){\n\t\tif( data.hide && this.opts.closeOnHide )\n\t\t\tthis._close()\n\t}\n\t\n\t_onKeydown(e){\n\t\tif( this.opts.onKeydown )\n\t\t\tthis.opts.onKeydown(e)\n\t}\n\t\n\tset maxHeight(val){\n\t\tif( this.opts.maxHeight != 'auto' )\n\t\t\tthis.view.style.maxHeight = this.opts.maxHeight\n\t\telse if( this.opts.maxHeight !== false && this.view.offsetHeight > this.opts.maxHeightThreshold )\n\t\t\tthis.view.style.maxHeight = val\n\t}\n\t\n}","import {LitElement, html, css} from 'lit-element'\nimport Menu from '../menu'\nimport router from '../../router'\n\nconst PanelControllers = {}\n\nclass PanelController extends LitElement {\n\n    static for(name){\n\n        // create a root panel controller if there isn't one\n        if( name == 'root' && !PanelControllers[name] ){\n            let rootPanelController = document.createElement('b-panels')\n            rootPanelController.setAttribute('name', 'root')\n            document.body.appendChild(rootPanelController)\n            PanelControllers[name] = rootPanelController\n        }\n\n        return PanelControllers[name]\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            /* z-index: 10; */\n            position: absolute;\n            top: 0;\n            left: 0;\n            height: 100%;\n            width: 100%;\n            pointer-events: none;\n        }\n    `}\n\n    get name(){\n        return this.hasAttribute('name') ? this.getAttribute('name') : undefined\n    }\n\n    constructor(){\n        super()\n        this.panels = new Map()\n\n        if( this.name ){\n            if( PanelControllers[this.name] )\n                console.warn('A panel-controller already exists with the name: ', this.name)\n            else\n                PanelControllers[this.name] = this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.hasAttribute('name') && PanelControllers[this.name] == this )\n            delete PanelControllers[this.name]\n    }\n            \n    render(){return html`        \n        <slot></slot>\n    `}\n\n    remove(panel){\n        this.panels.delete(panel)\n        this._updatePanels()\n    }\n\n    add(panel){\n\n        // let SheetView and Panel work together\n        document.body.setAttribute('ontop', 'panel')\n\n        this.panels.delete(panel)\n        this.panels.set(panel, panel)\n\n        if( !this.contains(panel) )\n            this.append(panel)\n\n        this._updatePanels()\n    }\n\n    _updatePanels(updateRoutes=false){\n        let i = 0\n\n        // if( this.length == 0 && updateRoutes )\n        //     router.push('')\n        // else\n        this.panels.forEach((panel)=>{\n            \n            if( panel.type != 'modal')\n                panel.style.zIndex = i++\n            \n            if( i == this.length ){\n                panel.setAttribute('ontop', '')\n\n                // if( updateRoutes && panel.route && !panel.route.isCurrent ){\n                //     console.log(panel.route);\n                //     // router.push(panel.route.path)\n                // }\n\n            }else{\n                panel.removeAttribute('ontop')\n            }\n        })\n\n        if( this.parentElement ){\n            if( this.length == 0 ){\n                this.parentElement.classList.remove('b-panel-open')\n                this.parentElement.style.overflow = ''\n            }else{\n                this.parentElement.classList.add('b-panel-open')\n                this.parentElement.style.overflow = 'hidden'\n            }\n        }\n    }\n\n    _updateRoute(){\n        let i = 0\n\n        if( this.length == 0 ){\n            \n            // TEMP - improve interoperability with Groundwork\n            if( window.app && app.sv('sheets').sheets.length > 0 )\n                app.sv('sheets').setHash()\n            else\n                router.push('')\n        }else\n        this.panels.forEach((panel)=>{\n\n            if( panel.onTop && panel.route && !panel.route.isCurrent ){\n                // console.log(panel.route, panel.route.state.path);\n                router.push(panel.route)\n            }\n        })\n    }\n\n    get length(){\n        return this.panels.size\n    }\n\n    map(fn){\n        let resp = []\n        this.panels.forEach(p=>resp.push(fn(p)))\n        return resp.reverse() // most recent first\n    }\n\n    async quickJump(el){\n        \n        let menu = this.map(panel=>{\n            return {\n                label: panel.title,\n                icon: panel.icon||'window',\n                description: panel.hash,\n                panel: panel\n            }\n        })\n\n        menu.shift() // remove first menu as its the open view\n\n        let ts = new Date().getTime()\n\n        // quick jump is already open\n        if( el.popover ){\n\n            // if quick jump triggered within a second, auto switch to the last opened view\n            if( el.quickJumpOpened && ts - el.quickJumpOpened <= 1000 && menu.length > 0){\n                el.popover.close()\n                menu[0].panel.open()\n            }\n            \n            return\n        }\n\n        el.quickJumpOpened = ts\n\n        if( menu.length == 0 )\n            menu.push({text: 'No other views open'})\n\n        menu.unshift({divider: 'Quick Jump Menu'}, 'divider')\n\n        let selected = await new Menu(menu).popover(el, {align: 'bottom-start'})\n\n        if( selected )\n            selected.panel.open()\n    }\n}\n\ncustomElements.define('b-panels', PanelController)\n\nexport default customElements.get('b-panels')","import {LitElement, html, css} from 'lit-element'\n\nclass PanelToolbar extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        look: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.title = ''\n        this.look = ''\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr max-content 1fr;\n            /* background: linear-gradient(to bottom, #fff, #f5f5f5); */\n            padding: .5em;\n            padding: .4em .5em .3em;\n            box-sizing: border-box;\n            justify-content: space-between;\n            align-items: center;\n            border-radius: 4px 4px 0 0;\n            min-height: 40px;\n        }\n\n        :host([overlay]) {\n            background: none;\n            box-shadow: none;\n            position: absolute;\n            z-index: 100;\n            pointer-events: none;\n            top: 0;\n            left: 0;\n            width: 100%;\n        }\n\n        :host([overlay]) > div * {\n            pointer-events: initial;\n        }\n\n        :host([shadow]) {\n            box-shadow: rgba(0,0,0,.2) 0 0 6px;\n        }\n\n        :host([look=\"white\"]) {\n            background: #fff;\n        }\n\n        :host([look=\"silver\"]) {\n            background: linear-gradient(to bottom,#eee,#ddd);\n            border-bottom: solid 1px #bbb;\n        }\n\n        :host([look=\"clear\"]) {\n            background: transparent;\n        }\n\n        :host([look=\"dark\"]) {\n            /* background: #2c3033; */\n            background: linear-gradient(to bottom,#303538,#2c3033);\n            color: #fff;\n        }\n\n        :host([look=\"dark\"]) b-btn[outline] {\n            --color: #ddd\n        }\n\n        slot[name=\"title\"] {\n            font-weight: bold;\n            font-size: 1.1em;\n        }\n\n        :host([notitle]) slot[name=\"title\"] {\n            display: none;\n        }\n\n        .right {\n            text-align: right;\n        }\n\n        @media print {\n            b-btn {\n                display: none; /* assume we dont want buttons to display on print */\n            }\n        }\n\n    `}\n\n    render(){return html`\n        <div class=\"left\">\n            <slot name=\"close-btn\">\n                <b-btn outline icon=\"cancel-1\" title=\"Right+click for quick jump menu\"\n                    @click=${this.close} @contextmenu=${this.quickJump}></b-btn>\n            </slot>\n            <slot name=\"left\"></slot>\n        </div>\n        <div class=\"middle\">\n            <slot name=\"title\">${this.title}</slot>\n            <slot name=\"middle\"></slot>\n        </div>\n        <div class=\"right\">\n            <slot name=\"right\"></slot>\n        </div>\n    `}\n\n    close(){\n        this.panel&&this.panel.close()\n    }\n\n    quickJump(e){\n        e.preventDefault();\n        this.panel&&this.panel.panelController&&this.panel.panelController.quickJump(e.target)\n    }\n}\n\ncustomElements.define('b-panel-toolbar', PanelToolbar)\n\nexport default  customElements.get('b-panel-toolbar')","import {LitElement, html, css, unsafeCSS} from 'lit-element'\nimport Controller from './controller'\nimport router from '../../router'\nimport {Route} from '../../router'\nimport './controller'\nimport './toolbar'\nimport '../../elements/btn'\n\nexport const PanelDefaults = {\n    type: '',\n    closeBtn: false,\n    title: '',\n    width: '100%',\n    height: '100%',\n    anchor: 'right',\n    animation: '',\n    closeOnEsc: false,\n    controller: null, // root controller will be created and used\n    disableBackdropClick: false\n}\n\nclass RegisteredPanels {\n\n    constructor(){\n        this.register = new Map()\n    }\n\n    set(key, data){\n        return this.register.set(key, data)\n    }\n\n    get(path){\n        return this.register.get(path)\n    }\n\n    add(path, view, opts={}){\n        if( this.get(path) ){\n            return console.warn(`A panel is already registered for ${path}`)\n        }\n\n        this.set(path, {view, opts})\n\n        if( opts.route !== false )\n        this.get(path).route = new Route(path, (oldState, newState, dir)=>{\n            if( this._initiate(path) )\n                this.get(path).panel._routeChange(oldState, newState, dir)\n        })\n    }\n\n    _initiate(path){\n        let registered = this.get(path)\n\n        if( !registered ){\n            console.error(`Panel for ${path} not found`)\n            return false\n        }\n\n        // first time this panel is being requested\n        if( !registered.panel ){\n\n            if( typeof registered.view == 'function' ){\n                registered.panel = new Panel()\n                registered.panel.html = registered.view\n            }\n            else\n                registered.panel = new Panel(registered.view)\n\n            if( registered.route )\n                registered.panel.route = registered.route\n\n            // copy properties to panel\n            if( registered.opts ){\n                for(let key in registered.opts ){\n                    if( key != 'route' )\n                        registered.panel[key] = registered.opts[key]\n                }\n            }\n        }\n\n        return true\n    }\n\n    open(path){\n        if( !this._initiate(path) ) return\n\n        let registered = this.get(path)\n        \n        if( registered.route )\n            router.goTo(registered.route)\n        else\n            registered.panel.open()\n    }\n    \n}\n\nexport const register = new RegisteredPanels()\n\nexport const Modal = function(view, opts={}){\n    opts = Object.assign({\n        type: 'modal',\n    }, opts)\n\n    if( opts.closeBtn && opts.closeOnEsc === undefined )\n        opts.closeOnEsc = true\n\n    return new Panel(view, opts).open()\n}\n\nexport class Panel extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        width: {type: String},\n        height: {type: String},\n        anchor: {type: String, reflect: true},\n        type: {type: String, reflect: true},\n        animation: {type: String, reflect: true}\n    }}\n\n    static register(path, view, opts){\n        register.add(path, view, opts)\n    }\n\n    static open(path){\n        register.open(path)\n    }\n\n    static get animationTime(){ return 300 }\n    \n    constructor(view, opts={}){\n        super()\n\n        let defaultOpts = Object.assign({}, PanelDefaults)\n\n        if( opts.type == 'modal' ){\n            defaultOpts.width = 'auto'\n            defaultOpts.height = 'auto'\n            defaultOpts.anchor = 'center'\n        }\n\n        opts = Object.assign(defaultOpts, opts)\n\n        this.animation = opts.animation\n        this.type = opts.type\n        this.closeBtn = opts.closeBtn\n        this.title = opts.title\n        this.width = opts.width\n        this.height = opts.height\n        this.anchor = opts.anchor\n        this.panelController = opts.controller\n\n        this.opts = opts\n\n        if( typeof view == 'function' ){\n            this.html = view\n\n        }else if( typeof view == 'string' ){\n            this.view = document.createElement(view)\n\n        }else if( view instanceof HTMLElement ){\n            this.view = view\n        }\n    }\n\n    onKeydown(e){\n        if( !this.onTop ) return\n\n        if( this.opts.closeOnEsc && e.key == 'Escape' )\n            this.close()\n\n        this.opts.onKeydown&&this.opts.onKeydown(e)\n    }\n\n    get hash(){\n        return this.route&&this.route.state.props.hash\n    }\n\n    get route(){ return this.__route}\n    set route(route){\n\n        if( this.route ){\n            return console.warn('Panel routes can only be set once')\n        }\n\n        this.__route = route instanceof Route ? route : new Route(route, this._routeChange.bind(this))\n    }\n\n    _routeChange(oldState, newState, dir){\n\n        // console.log(this.title, dir);\n\n        let detail = {\n            oldState: oldState,\n            newState: newState\n        }\n\n        if( newState ){\n\n            newState.update({title: this.title})\n\n            if( !this.isOpen && dir == 'forward' )\n                newState.update({didEnter: true})\n            \n            this.open()\n            detail.opened = true\n        }\n\n        if( oldState && !newState ){\n\n            if( (oldState.isAfter && oldState.props.didEnter)\n            || (oldState.isBefore && oldState.props.didExit) ){\n                this._close()\n                detail.closed = true\n            }\n\n            // if( (oldState.isBefore && oldState.props.didEnter)\n            // || (oldState.isAfter && oldState.props.didExit) )\n            //     this.open()\n\n        }\n\n        if( oldState && newState ){\n            \n            // console.log('same view, but new state', newState.params);\n\n            // if( this.view && this.view.onOpen ){\n            //     this.view.onOpen(this.route.state)\n            // }\n        }\n\n        this.dispatchEvent(new CustomEvent('route-changed', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: detail\n\t\t}))\n    }\n\n    render(){return html`\n        <div class=\"backdrop\"></div>\n        <main style=\"width:${this.width}; height:${this.height}\">\n            <b-btn icon=\"cancel-1\" pill class=\"modal-close-btn\" @click=${this.close} ?hidden=${this.closeBtn!==true}></b-btn>\n            <slot></slot>\n            ${this.html}\n        </main>\n    `}\n\n    animate(effect){\n        if( !effect ) return\n        let main = this.shadowRoot.querySelector('main')\n        main.classList.add(effect)\n        setTimeout(function(){\n            main.classList.remove(effect)\n        },1000)\n    }\n\n    bounce(){\n        this.animate('bounce')\n    }\n\n    shake(){\n        this.animate('shake')\n    }\n\n    set html(fn){ this.__html = fn}\n    get html(){ return this.__html ? this.__html.call(this) : ''}\n\n    set view(view){\n        if( this.view ){\n            this.view.panel = null\n            this.view.remove()\n        }\n\n        if( this.toolbar ){\n            this.toolbar.panel = null\n            this.toolbar = null\n        }\n            \n        this.__view = view;\n        \n        if( this.view ){\n            this.view.panel = this\n            this.appendChild(this.view)\n            this._linkToolbar()\n        }\n    }\n    get view(){ return this.__view}\n\n    get isOpen(){ return this.hasAttribute('open')}\n    get onTop(){ return this.hasAttribute('ontop') || (this.type == 'modal' && this.parentElement.lastElementChild == this) }\n\n    firstUpdated(){\n        this._linkToolbar()\n\n        this.shadowRoot.addEventListener('click', (e)=>{\n\n            if( !e.target.classList.contains('backdrop') ) return\n\n            if( this.opts.onBackdropClick && this.opts.onBackdropClick() === false )\n                return\n\n            if( this.opts.disableBackdropClick !== true )\n                this.close()\n        }, true)\n    }\n\n    _linkToolbar(){\n        setTimeout(()=>{\n            \n            if( this.view && this.view.shadowRoot )\n                this.toolbar = this.view.shadowRoot.querySelector('b-panel-toolbar')\n            else\n                this.toolbar = this.shadowRoot.querySelector('b-panel-toolbar') || this.querySelector('b-panel-toolbar')\n            \n            if( this.toolbar ){\n                this.toolbar.panel = this\n                this.toolbar.title = this.title\n            }\n            \n        },0)\n    }\n\n    get panelController(){return this.__panelController}\n    set controller(val){ this.panelController = val }\n    set panelController(val){\n        \n        if( typeof val === 'string' ){\n            let _val = val\n            val = Controller.for(val)\n            if( !val )\n                console.warn('Panel controller `'+_val+'` does not exist, root will be used')\n        }\n\n        this.__panelController = val\n    }\n\n    open(){\n        \n        if( this.route && this.route.state.props.controller )\n            this.controller = this.route.state.props.controller\n\n        // if no controller set, use the root controller\n        if( !this.panelController ){\n            this.panelController = Controller.for('root')\n        }\n\n        this._onKeydown = this._onKeydown || this.onKeydown.bind(this)\n        window.removeEventListener('keydown', this._onKeydown, true)\n        window.addEventListener('keydown', this._onKeydown, true)\n\n        this.panelController.add(this)\n\n        setTimeout(()=>{\n            this.setAttribute('open', '')\n\n            if( this.view && this.view.onOpen ){\n                this.view.onOpen(this.route.state)\n            }\n\n        },100)\n\n        return this\n    }\n\n    set title(str){\n        this.__title = str\n        this.route&&this.route.update({title: str})\n    }\n    get title(){ return this.__title }\n\n    get params(){\n        return this.route ? this.route.state.params : {}\n    }\n\n    close(){\n\n        if( this.opts.onClose && this.opts.onClose() === false )\n            return\n\n        this.route&&this.route.update({didExit: true})\n        this._close()\n\n        if( this.route)\n            this.panelController._updateRoute()\n\n        return this\n    }\n\n    _close(){\n        window.removeEventListener('keydown', this._onKeydown, true)\n        this.panelController.remove(this)\n        this.removeAttribute('open')\n        setTimeout(()=>{\n            this.remove()\n        }, Panel.animationTime)\n    }\n\n    static get styles(){return css`\n        :host {\n            pointer-events: initial;\n            display: flex;\n            position: absolute;\n            overflow: visible;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0,0,0,.4); /* overlay */\n            opacity: 0;\n            transition: opacity ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1),\n                        background-color ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n            --radius: 5px;\n        }\n\n        :host([type=\"modal\"]) {\n            z-index: 1000; /* always on top */\n        }\n\n        :host > main {\n            position: absolute;\n            right: 0;\n            min-width: 300px;\n            min-height: 1em;\n            max-width: 100%;\n            max-height: 100%;\n            overflow: visible;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            background: #fff;\n            box-shadow: rgba(0,0,0,.2) 0 3px 10px;\n            border-radius: var(--radius) var(--radius) 0 0px;\n            transition: ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        :host([open]) {\n            opacity: 1;\n        }\n\n        :host([open]) > main {\n            opacity: 1;\n            transform: none !important;\n        }\n\n        :host([anchor=\"right\"]) > main {\n            transform: translateX(100px);\n        }\n\n        :host([anchor=\"left\"]) > main {\n            right: auto;\n            left: 0;\n            transform: translateX(-100px);\n        }\n\n        :host([anchor=\"center\"]) > main,\n        :host([anchor=\"top\"]) > main,\n        :host([anchor=\"bottom\"]) > main {\n            position: relative;\n            margin: auto auto;\n            transform: translateY(100px);\n        }\n\n        :host([anchor=\"center\"]) > main {\n            border-radius: var(--radius);\n        }\n\n        :host([anchor=\"center\"][animation=\"scale\"]) > main {\n            transform: scale(.5);\n        }\n\n        :host([anchor=\"top\"]) > main {\n            margin-top: 0;\n            transform: translateY(-100px);\n            border-radius: 0 0 var(--radius) var(--radius);\n        }\n\n        :host([anchor=\"bottom\"]) > main {\n            margin-bottom: 0;\n        }\n\n        .backdrop {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n        }\n\n        .modal-close-btn {\n            position: absolute;\n            top: 0;\n            right: 0;\n            z-index: 10000;\n            transform: translate(50%, -50%);\n        }\n\n        main > slot::slotted(*) {\n            width: 100%;\n            /* display: grid;\n            grid-template-rows: auto 1fr; */\n        }\n\n        main > slot::slotted(.dialog) {\n            font-size: 1.1em;\n        }\n\n        main > slot::slotted(b-embed) {\n            border-radius: var(--radius);\n            overflow: hidden;\n        }\n\n        main {\n            display: grid;\n        }\n\n        main > section {\n            padding: 1em;\n        }\n\n        @media print {\n            :host {\n                background: none;\n                position: static;\n            }\n\n            :host(:not([ontop])) {\n                display: none !important;\n            }\n\n            :host > main {\n                width: 100% !important;\n                border-radius: 0;\n                box-shadow: none;\n            }\n        }\n\n        @keyframes bounce {\n            from,\n            20%,\n            53%,\n            80%,\n            to {\n                -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            40%,\n            43% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -30px, 0);\n                transform: translate3d(0, -30px, 0);\n            }\n\n            70% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -15px, 0);\n                transform: translate3d(0, -15px, 0);\n            }\n\n            90% {\n                -webkit-transform: translate3d(0, -4px, 0);\n                transform: translate3d(0, -4px, 0);\n            }\n        }\n\n        @keyframes shake {\n            from,\n            to {\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            15%,\n            45%,\n            75% {\n                -webkit-transform: translate3d(-10px, 0, 0);\n                transform: translate3d(-10px, 0, 0);\n            }\n\n            30%,\n            60%,\n            90% {\n                -webkit-transform: translate3d(10px, 0, 0);\n                transform: translate3d(10px, 0, 0);\n            }\n        }\n\n        .bounce {\n            animation-name: bounce;\n            transform-origin: center bottom;\n            animation-duration: 1s;\n            animation-fill-mode: both;\n        }\n\n        .shake {\n            animation-name: shake;\n            animation-duration: 700ms;\n            animation-fill-mode: both;\n        }\n    `}\n}\n\ncustomElements.define('b-panel', Panel)\n\nexport default customElements.get('b-panel')","/*!\n * Fuse.js v3.4.5 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"Fuse\",[],t):\"object\"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),a=n(8),s=n(0),c=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.caseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m,S=n.id,x=void 0===S?null:S,b=n.keys,M=void 0===b?[]:b,_=n.shouldSort,L=void 0===_||_,w=n.getFn,A=void 0===w?a:w,C=n.sortFn,I=void 0===C?function(e,t){return e.score-t.score}:C,O=n.tokenize,j=void 0!==O&&O,P=n.matchAllTokens,F=void 0!==P&&P,T=n.includeMatches,z=void 0!==T&&T,E=n.includeScore,K=void 0!==E&&E,$=n.verbose,J=void 0!==$&&$;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k,id:x,keys:M,includeMatches:z,includeScore:K,shouldSort:L,getFn:A,sortFn:I,verbose:J,tokenize:j,matchAllTokens:F},this.setCollection(t)}var t,n,c;return t=e,(n=[{key:\"setCollection\",value:function(e){return this.list=e,e}},{key:\"search\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\\nSearch pattern: \"'.concat(e,'\"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,o=n.fullSearcher,i=this._search(r,o),a=i.weights,s=i.results;return this._computeScore(a,s),this.options.shouldSort&&this._sort(s),t.limit&&\"number\"==typeof t.limit&&(s=s.slice(0,t.limit)),this._format(s)}},{key:\"_prepareSearchers\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:\"_search\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},o=[];if(\"string\"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:\"\",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},c=0,h=n.length;c<h;c+=1)for(var l=n[c],u=0,f=this.options.keys.length;u<f;u+=1){var d=this.options.keys[u];if(\"string\"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error(\"Key weight has to be > 0 and <= 1\");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:c},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:\"_analyze\",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,i=e.value,a=e.record,c=e.index,h=t.tokenSearchers,l=void 0===h?[]:h,u=t.fullSearcher,f=void 0===u?[]:u,d=t.resultMap,v=void 0===d?{}:d,p=t.results,g=void 0===p?[]:p;if(null!=i){var y=!1,m=-1,k=0;if(\"string\"==typeof i){this._log(\"\\nKey: \".concat(\"\"===n?\"-\":n));var S=f.search(i);if(this._log('Full text: \"'.concat(i,'\", score: ').concat(S.score)),this.options.tokenize){for(var x=i.split(this.options.tokenSeparator),b=[],M=0;M<l.length;M+=1){var _=l[M];this._log('\\nPattern: \"'.concat(_.pattern,'\"'));for(var L=!1,w=0;w<x.length;w+=1){var A=x[w],C=_.search(A),I={};C.isMatch?(I[A]=C.score,y=!0,L=!0,b.push(C.score)):(I[A]=1,this.options.matchAllTokens||b.push(1)),this._log('Token: \"'.concat(A,'\", score: ').concat(I[A]))}L&&(k+=1)}m=b[0];for(var O=b.length,j=1;j<O;j+=1)m+=b[j];m/=O,this._log(\"Token score average:\",m)}var P=S.score;m>-1&&(P=(P+m)/2),this._log(\"Score average:\",P);var F=!this.options.tokenize||!this.options.matchAllTokens||k>=l.length;if(this._log(\"\\nCheck Matches: \".concat(F)),(y||S.isMatch)&&F){var T=v[c];T?T.output.push({key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}):(v[c]={item:a,output:[{key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}]},g.push(v[c]))}}else if(s(i))for(var z=0,E=i.length;z<E;z+=1)this._analyze({key:n,arrayIndex:z,value:i[z],record:a,index:c},{resultMap:v,results:g,tokenSearchers:l,fullSearcher:f})}}},{key:\"_computeScore\",value:function(e,t){this._log(\"\\n\\nComputing score:\\n\");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,i=o.length,a=1,s=1,c=0;c<i;c+=1){var h=e?e[o[c].key].weight:1,l=(1===h?o[c].score:o[c].score||.001)*h;1!==h?s=Math.min(s,l):(o[c].nScore=l,a*=l)}t[n].score=1===s?a:s,this._log(t[n])}}},{key:\"_sort\",value:function(e){this._log(\"\\n\\nSorting....\"),e.sort(this.options.sortFn)}},{key:\"_format\",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log(\"\\n\\nOutput:\\n\\n\",JSON.stringify(e,function(e,t){if(\"object\"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t})),n=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty(\"arrayIndex\")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var i=0,a=e.length;i<a;i+=1){var s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},h=0,l=o.length;h<l;h+=1)o[h](s,c);t.push(c)}else t.push(s.item)}return t}},{key:\"_log\",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,n),c&&o(t,c),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(3),i=n(4),a=n(7),s=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.isCaseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,n,s;return t=e,(n=[{key:\"search\",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return o(e,this.pattern,r);var a=this.options,s=a.location,c=a.distance,h=a.threshold,l=a.findAllMatches,u=a.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:u})}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t){var n=/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(n,\"\\\\$&\").replace(r,\"|\")),i=e.match(o),a=!!i,s=[];if(a)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];s.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(5),o=n(6);e.exports=function(e,t,n,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,f=i.findAllMatches,d=void 0!==f&&f,v=i.minMatchCharLength,p=void 0===v?1:v,g=s,y=e.length,m=u,k=e.indexOf(t,g),S=t.length,x=[],b=0;b<y;b+=1)x[b]=0;if(-1!==k){var M=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});if(m=Math.min(M,m),-1!==(k=e.lastIndexOf(t,g+S))){var _=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});m=Math.min(_,m)}}k=-1;for(var L=[],w=1,A=S+y,C=1<<S-1,I=0;I<S;I+=1){for(var O=0,j=A;O<j;){r(t,{errors:I,currentLocation:g+j,expectedLocation:g,distance:h})<=m?O=j:A=j,j=Math.floor((A-O)/2+O)}A=j;var P=Math.max(1,g-j+1),F=d?y:Math.min(g+j,y)+S,T=Array(F+2);T[F+1]=(1<<I)-1;for(var z=F;z>=P;z-=1){var E=z-1,K=n[e.charAt(E)];if(K&&(x[E]=1),T[z]=(T[z+1]<<1|1)&K,0!==I&&(T[z]|=(L[z+1]|L[z])<<1|1|L[z+1]),T[z]&C&&(w=r(t,{errors:I,currentLocation:E,expectedLocation:g,distance:h}))<=m){if(m=w,(k=E)<=g)break;P=Math.max(1,2*g-k)}}if(r(t,{errors:I+1,currentLocation:g,expectedLocation:g,distance:h})>m)break;L=T}return{isMatch:k>=0,score:0===w?.001:w,matchedIndices:o(x,p)}}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=r/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===r?r=i:s||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){var r=n(0);e.exports=function(e,t){return function e(t,n,o){if(n){var i=n.indexOf(\".\"),a=n,s=null;-1!==i&&(a=n.slice(0,i),s=n.slice(i+1));var c=t[a];if(null!=c)if(s||\"string\"!=typeof c&&\"number\"!=typeof c)if(r(c))for(var h=0,l=c.length;h<l;h+=1)e(c[h],s,o);else s&&e(c,s,o);else o.push(c.toString())}else o.push(t);return o}(e,t,[])}}])});","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: #2196f3;\n\t--colorDisabled: rgba(0, 0, 0, 0.26);\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tflex-grow: 0 !important;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tcursor: pointer;\n\toutline: none;\n}\n\n:host([checked]) svg.uncheck,\n:host(:not([checked])) svg.check {\n\tdisplay: none\n}\n\nmain {\n\tposition: relative;\n}\n\n:host([placement=\"top\"]) { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) { flex-direction: column; }\n:host([placement=\"left\"]) { flex-direction: row-reverse; }\n:host([placement=\"right\"]) { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\n.switch {\n\tdisplay: none\n}\n\n:host([type=\"switch\"]) svg { display: none; }\n\n:host([type=\"switch\"]) .switch {\n\tdisplay: inline-block;\n}\n\n:host([checked]) {\n\tcolor: var(--color)\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled)\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nmain label {\n\tcursor: pointer;\n}\n\n.indeterminate {\n\tdisplay: none;\n}\n\n.switch {\n\tposition: relative;\n\talign-items: center;\n\tmargin: .5em;\n}\n\n.switch:before, .switch:after {\n\tcontent: \"\";\n\tmargin: 0;\n\toutline: 0;\n\ttransition: all 0.3s ease;\n}\n\n.switch:before {\n\tdisplay: block;\n\twidth: 2em;\n\theight: 1em;\n\tbackground-color: #9E9E9E;\n\tborder-radius: 1em;\n}\n\n.switch:after {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 50%;\n\ttransform: translate(0, -50%);\n\twidth: 1.3em;\n\theight: 1.3em;\n\tbackground-color: #FAFAFA;\n\tborder-radius: 50%;\n\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.14), 0 2px 2px 0 rgba(0, 0, 0, 0.098), 0 1px 5px 0 rgba(0, 0, 0, 0.084);\n}\n\n\n:host([checked]) .switch:before {\n\tbackground-color: var(--color);\n\topacity: .5\n}\n\n:host([checked]) .switch:after {\n\tbackground-color: var(--color);\n\ttransform: translate(80%, -50%);\n}\n`\n\nclass CheckBoxElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>\n\t\t\t${styles.cssText}\n\t\t\t</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"uncheck\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"></path></svg>\n\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t<div class=\"switch\"></div>\n\t\t\t\t<touch-ripple><touch-ripple>\n\t\t\t</main>\n\t\t\t<label>${label}</label>\n\t\t\t`\n\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.ripple = this.shadowRoot.querySelector('touch-ripple')\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['Space', 'Enter'].includes(e.code) )\n\t\t\t\tthis._onClick()\n\t\t})\n\t\t\n\t\tthis.addEventListener('focus', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.enter()\n\t\t})\n\t\t\n\t\tthis.addEventListener('blur', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.hide()\n\t\t})\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.ripple.ripple()\n\t\t\n\t\tthis.checked = !this.checked\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.checked\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t\t\n\t\t// this.blur()\n\t}\n\t\n\tset checked(val){\n\t\tif( val === '0' || val === '' ) val = false\n\t\tval ? this.setAttribute('checked', '') : this.removeAttribute('checked')\n\t}\n\t\n\tget checked(){ return this.hasAttribute('checked') }\n\tget value(){ return this.checked }\n\tset value(val){ this.checked = val }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('check-box', CheckBoxElement)\n\nexport default customElements.get('check-box')\n","import {html, render} from 'lit-html'\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html'\nimport Popover from '../popover'\nimport Panel from '../panel'\nimport Fuse from 'fuse.js'\nimport '../form-control/controls/check-box'\nimport device from '../../util/device';\n\nexport const DefaultOpts = {\n\tselected: false,\n\tmultiple: false,\n\tsearch: 20, // true (always show) or number of results for it to show\n\tminW: false,\n\twidth: null,\n\tjumpNav: false, // true (always show) or number of results for it to show\n\ttypeDelay: 700, // how long until typed characters reset\n\thasMenuIcon: 'right-open',\n\tonSelect: ()=>{}\n}\n\nconst SearchDefaults = {\n\tplaceholder: 'Search',\n\tparse: (row)=>{\n\t\treturn {\n\t\t\tlabel: row.label || row.name || row.title || 'Unknown',\n\t\t\tval: row.val || row.id || null,\n\t\t\tdescription: row.description || ''\n\t\t}\n\t}\n}\n\nconst styles = require('./style.less')\n\nexport default class Menu {\n\t\n\tconstructor(menu=[], opts={}){\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('b-menu')\n\t\tthis.el.classList.add('nopadding')\n\n\t\tif( opts.className )\n\t\t\topts.className.split(' ').forEach(cn=>{\n\t\t\t\tthis.el.classList.add(cn.trim())\n\t\t\t})\n\t\t\n\t\tthis.opts = Object.assign({}, DefaultOpts, opts)\n\t\tthis.menu = menu\n\t\t\n\t\tif( opts.multiple == undefined && this.opts.selected instanceof Array )\n\t\t\tthis.opts.multiple = true\n\t\t\n\t\tlet selected = (this.opts.selected || [])\n\t\tif( Array.isArray(selected) ) selected = selected.slice(0) // clone\n\t\tthis.selected = selected\n\t\t\n\t\tif( this.opts.minW )\n\t\t\tthis.el.style.minWidth = this.opts.minW\n\t\t\n\t\tif( this.opts.width )\n\t\t\tthis.el.style.width = this.opts.width\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this))\n\t\t\n\t\tthis.promise = new Promise(resolve=>{this._resolve = resolve})\n\t}\n\n\tset menu(menu){\n\n\t\tif( typeof menu == 'function' )\n\t\t\tmenu = menu()\n\n\t\tthis.__menu = menu\n\n\t\tif( this.searchUrl && !this.__origMenu )\n\t\t\tthis.__origMenu = menu || []\n\n\t\tif( !this.searchUrl )\n\t\tthis.__fuse = new Fuse(this.__menu, {\n\t\t\tkeys: [{\n\t\t\t\tname: 'dataTitle',\n\t\t\t\tweight: 0.7\n\t\t\t},{\n\t\t\t\tname: 'label',\n\t\t\t\tweight: 0.5\n\t\t\t}, {\n\t\t\t\tname: 'description',\n\t\t\t\tweight: 0.3\n\t\t\t}],\n\t\t\tminMatchCharLength: 3,\n\t\t\tthreshold: 0.4,\n\t\t\tlocation: 0,\n\t\t\tdistance: 300,\n\t\t})\n\t}\n\n\tget menu(){\n\t\treturn this.__menu || []\n\t}\n\n\tget displayMenu(){\n\t\tif( this.__filteredMenu )\n\t\t\treturn this.__filteredMenu\n\t\t\n\t\tif( this.searchIsOn && !this.searchShouldShowAll )\n\t\t\treturn []\n\n\t\tif( this.searchIsOn && this.hideUnselected )\n\t\t\treturn this.menu.filter(m=>m.label===undefined || m.selected)\n\n\t\treturn this.menu\n\t}\n\n\tset selected(keys){\n\n\t\t// always store selected values as an array\n\t\tif( !Array.isArray(keys) )\n\t\t\tkeys = [keys]\n\n\t\t// store selected values as the actual values (not just the keys)\n\t\tthis.__selected = this.menu.filter(m=>{\n\n\t\t\t// select/deselect each value\n\t\t\tif( m.val !== undefined && keys.includes(m.val) )\n\t\t\t\tm.selected = true\n\t\t\telse{\n\t\t\t\tdelete m.selected\n\t\t\t}\n\t\t\t\n\t\t\treturn m.selected\n\t\t})\n\n\t\t// keep values in the order that they were selected\n\t\tthis.__selected = this.__selected.sort((a,b)=>{\n\t\t\treturn keys.indexOf(a.val) - keys.indexOf(b.val)\n\t\t})\n\t}\n\t\n\tget selected(){\n\t\treturn this.opts.multiple ? this.__selected : this.__selected[0]\n\t}\n\n\ttoggleSelected(item){\n\t\tlet index = this.__selected.indexOf(item)\n\t\t\t\t\n\t\tif( index > -1 ){\n\t\t\titem.selected = false\n\t\t\tthis.__selected.splice(index, 1)\n\t\t\treturn false\n\t\t}else{\n\t\t\titem.selected = true\n\t\t\tthis.__selected.push(item)\n\t\t\treturn true\n\t\t}\n\t}\n\n\tfocusSearch(){\n\t\tlet input = this.el.querySelector('.menu-search-bar input')\n\t\tinput&&input.focus()\n\t}\n\n\tget searchIsOn(){\n\t\tlet s = this.opts.search\n\t\treturn s === true \n\t\t|| (typeof s == 'object')\n\t\t|| (typeof s == 'number' && this.menu.length >= s)\n\t}\n\n\tget searchUrl(){\n\t\treturn this.opts.search&&this.opts.search.url\n\t}\n\n\tget searchShouldShowAll(){\n\t\treturn this.opts.search&&this.opts.search.showAll!==false\n\t}\n\n\tget hideUnselected(){\n\t\treturn this.opts.search&&this.opts.search.hideUnselected===true\n\t}\n\n\tget searchParse(){\n\t\tlet parse = this.opts.search&&this.opts.search.parse\n\t\tif( typeof parse !== 'function' )\n\t\t\tparse = SearchDefaults.parse\n\t\treturn parse\n\t}\n\n\tget searchPlaceholder(){\n\t\treturn (this.opts.search&&this.opts.search.placeholder) || SearchDefaults.placeholder\n\t}\n\n\tget searchSpinner(){\n\t\treturn this.__searchSpinner = this.__searchSpinner || this.el.querySelector('.menu-search-bar b-spinner')\n\t}\n\n\tasync fetchResults(term){\n\n\t\t// already in process of looking up this term\n\t\tif( this._fetchingTerm === term )\n\t\t\treturn\n\n\t\tthis._fetchingTerm = term\n\n\t\tlet url = this.searchUrl\n\n\t\t// URL can be a dynamic function\n\t\tif( typeof url == 'function' )\n\t\t\turl = url(term)\n\t\telse\n\t\t\turl += term\n\n\t\tthis.searchSpinner.hidden = false\n\n\t\tlet resp = await fetch(url).then(resp=>resp.json())\n\n\t\t// looks like we started searching for another term before we got\n\t\t// this response back, so ignore the results\n\t\tif( this._fetchingTerm !== term )\n\t\t\treturn\n\n\t\t// parse the search results to fit the expected \"menu\" structure\n\t\tif( Array.isArray(resp) )\n\t\t\tthis.menu = resp.map(row=>this.searchParse(row)) \n\t\telse\n\t\t\tthis.menu = []\n\n\t\tthis._fetchingTerm = null\n\t\tthis.searchSpinner.hidden = true\n\n\t\tthis.render()\n\n\t\t// update popover position\n\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\tthis.presenter._updatePosition()\n\t}\n\n\tappendTo(el){\n\t\tel.appendElement(this.el)\n\t\tthis.render()\n\t}\n\n\trender(){\n\n\t\tlet showJumpNav = this.opts.jumpNav === true\n\t\t\t\t\t\t|| (typeof this.opts.jumpNav == 'number' && this.displayMenu.length >= this.opts.jumpNav)\n\n\t\tthis._active = null\n\n\t\trender(html`\n\n\t\t\t${this.searchIsOn?html`\n\t\t\t\t<div class=\"menu-search-bar\">\n\t\t\t\t\t<b-icon name=\"search\"></b-icon>\n\t\t\t\t\t<b-spinner hidden></b-spinner>\n\t\t\t\t\t<input type=\"text\" placeholder=\"${this.searchPlaceholder}\">\n\t\t\t\t</div>\n\t\t\t`:''}\n\n\t\t\t<div class=\"results\">\n\t\t\t\t\n\t\t\t\t${showJumpNav?html`\n\t\t\t\t\t<alphabet-jump-nav>\n\t\t\t\t\t\t<span style=\"color: red\">'alphabet-jump-nav' custom element not loaded</span>\n\t\t\t\t\t</alphabet-jump-nav>`\n\t\t\t\t:''}\n\n\t\t\t\t${this.displayMenu.map((m,i)=>this.renderItem(m,i))}\n\t\t\t</div>\n\n\t\t`, this.el)\n\n\t\treturn this\n\t}\n\t\n\trenderItem(m, i){\n\t\t\n\t\tif( m == 'divider' || (m.label == 'divider' && m.val == 'divider') )\n\t\t\treturn html`<b-hr></b-hr>`\n\n\t\tif( m.divider )\n\t\t\treturn html`<div class=\"menu-divider\">${m.divider}</div>`\n\t\t\n\t\tif( m.text )\n\t\t\treturn html`<div class=\"menu-text\">${m.text}</div>`\n\t\t\n\t\tif( m.title )\n\t\t\treturn html`<div class=\"menu-title\"><h2>${m.title}</h2></div>`\n\n\t\t// capture menu item index for use in resolve (if so desired)\n\t\tm.index = i\n\n\t\tlet icon = m.icon ? html`<b-icon name=\"${m.icon}\"></b-icon>` : ''\n\t\tlet checkbox = (this.opts.multiple && !m.clearsAll) || m.selected ? html`<check-box ?checked=${m.selected}></check-box>` : ''\n\t\tlet menuIcon = m.menu && this.opts.hasMenuIcon ? html`<b-icon class=\"has-menu\" name=\"${this.opts.hasMenuIcon}\"></b-icon>` :''\n\n\t\tif( m.attrs && typeof m.attrs == 'object' )\n\t\t\tconsole.warn('`attrs` unsupported right now')\n\t\t// TODO: support this some how?\n\t\t// if( m.attrs && typeof m.attrs == 'object' ){\n\t\t// \tfor(let key in m.attrs)\n\t\t// \t\tel.setAttribute(key, m.attrs[key])\n\t\t// }\n\n\t\tlet extras = ''\n\t\tif( m.extras ){\n\t\t\textras = m.extras\n\t\t\t\t.filter(elName=>customElements.get(elName))\n\t\t\t\t.map(elName=>{\n\t\t\t\t\tlet el = document.createElement(elName)\n\t\t\t\t\tel.item = m\n\t\t\t\t\tel.classList.add('menu-item-extra')\n\t\t\t\t\treturn el\n\t\t\t\t})\n\t\t}\n\n\t\tlet dataTitle = (m.dataTitle || m.label+' '+m.description).trim().toLowerCase()\n\n\t\treturn html`\n\t\t\t<div class=\"menu-item ${m.className}\" val=${m.val} index=${i}\n\t\t\t\tdata-title=${dataTitle}\n\t\t\t\t?icon-only=${!m.label && !m.description} ?selected=${m.selected}>\n\t\t\t\t${checkbox}\n\t\t\t\t${icon}\n\t\t\t\t${m.view&&m.view instanceof HTMLElement ?m.view:html`\n\t\t\t\t\t<span class=\"mi-content\">\n\t\t\t\t\t\t<div class=\"mi-label\">${unsafeHTML(m.label||'')}</div>\n\t\t\t\t\t\t<div class=\"mi-description\">${unsafeHTML(m.description||'')}</div>\n\t\t\t\t\t</span>\n\t\t\t\t`}\n\t\t\t\t${extras}\n\t\t\t\t${menuIcon}\n\t\t\t</div>\n\t\t`\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet target = e.target\n\t\tlet didClickCheckbox = target.tagName == 'CHECK-BOX'\n\t\t\n\t\twhile(target && !target.classList.contains('menu-item')){\n\t\t\ttarget = target.parentElement\n\t\t}\n\t\t\n\t\tif( target ){\n\t\t\t\n\t\t\tlet data = this.displayMenu[target.getAttribute('index')]\n\t\t\t\n\t\t\tif( data.menu )\n\t\t\t\treturn this._itemMenu(target, data)\n\n\t\t\tif( this.opts.multiple ){\n\n\t\t\t\tif( this.opts.multiple !== 'always' && (data.clearsAll || !didClickCheckbox) ){\n\t\t\t\t\treturn this.resolve([data])\n\t\t\t\t}\n\n\t\t\t\tlet isSelected = this.toggleSelected(data)\n\t\t\t\t\n\t\t\t\tif( this.searchIsOn && this.hideUnselected )\n\t\t\t\t\tthis.render()\n\t\t\t\telse if( isSelected ){\n\t\t\t\t\ttarget.classList.add('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = true\n\t\t\t\t}else{\n\t\t\t\t\ttarget.classList.remove('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = false\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.opts.onSelect&&this.opts.onSelect(this.selected)\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.resolve(data)\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _itemMenu(target, data){\n\t\tlet menu = new Menu(data.menu, data.menuOpts||{})\n\n\t\tlet popoverOpts = data.menuOpts && data.menuOpts.popover || {}\n\t\tlet val = await menu.popover(target, popoverOpts) \n\t\tif( val ){\n\t\t\tdata.menuSelected = val\n\t\t\tthis.resolve(data)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\n\t\tif( (e.which >= 65 && e.which <= 90) // a-z\n\t\t|| (e.which >= 48 && e.which <= 57) // 0-9\n\t\t|| [8].includes(e.which) ){ // delete\n\t\t\tthis.onLetterPress(e)\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( e.code == 'Escape' ){\n\t\t\tthis.resolve(false)\n\t\t\treturn;\n\t\t}\n\n\t\tif( e.target.tagName == 'INPUT' && ['ArrowLeft', 'ArrowRight'].includes(e.code) )\n\t\t\treturn\n\t\t\n\t\tif( !['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter'].includes(e.code) ) return\n\t\t\n\t\tlet items = this.el.querySelectorAll('.menu-item')\n\t\tlet activeItem = items[this._active]\n\n\t\t// if active item has a menu open, dont perform any actions\n\t\tif( activeItem && activeItem.classList.contains('popover-open') )\n\t\t\treturn\n\n\t\tif( e.code == 'Enter' ){\n\t\t\tif( activeItem )\n\t\t\t\tactiveItem.click()\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( this._active == null )\n\t\t\tthis._active = -1;\n\t\t\n\t\tthis._active += ['ArrowUp', 'ArrowLeft'].includes(e.code) ? -1 : 1;\n\t\t\n\t\tif( this._active < 0 )\n\t\t\tthis._active = items.length - 1\n\t\t\t\n\t\tif( this._active >= items.length )\n\t\t\tthis._active = 0\n\t\t\n\t\tthis.setActiveItem(items[this._active])\n\t\t\n\t\te.preventDefault()\n\t}\n\n\tsetActiveItem(el){\n\n\t\tlet items = Array.from(this.el.querySelectorAll('.menu-item'))\n\n\t\titems.forEach(el=>el.removeAttribute('active'))\n\t\t\n\t\tthis._active = null\n\t\t\n\t\tif( el ){\n\t\t\tthis._active = items.indexOf(el)\n\n\t\t\tel.setAttribute('active', '')\n\t\t\tel.scrollIntoViewIfNeeded()\n\t\t}\n\t}\n\n\tonLetterPress(e){\n\n\t\tif( e.target.tagName == 'INPUT' ){\n\n\t\t\tsetTimeout(()=>{\n\n\t\t\t\tlet val = e.target.value\n\n\t\t\t\t// interpret only 1 character as \"empty\"\n\t\t\t\tif( !val || val.length < 2 )\n\t\t\t\t\tval = ''\n\n\t\t\t\tif( val === this.__lastFilterVal ) return\n\t\t\t\tthis.__lastFilterVal = val\n\n\t\t\t\tif( this.searchUrl ){\n\n\t\t\t\t\t// must stop typing for a moment before fetching results\n\t\t\t\t\tclearTimeout(this.__searchTermDelay)\n\n\t\t\t\t\tif( !val ){\n\t\t\t\t\t\tthis.menu = this.__origMenu\n\t\t\t\t\t\tthis.render()\n\n\t\t\t\t\t\t// update popover position\n\t\t\t\t\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\t\t\t\t\tthis.presenter._updatePosition()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.__searchTermDelay = setTimeout(()=>{\n\t\t\t\t\t\tthis.fetchResults(val)\n\t\t\t\t\t}, 700)\n\n\t\t\t\t}else{\n\t\t\t\t\tif( !val )\n\t\t\t\t\t\tthis.__filteredMenu = null\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.__filteredMenu = this.__fuse.search(val)\n\t\t\t\t\t\n\t\t\t\t\tthis.render()\n\t\t\t\t\tthis.setActiveItem()\n\t\t\t\t}\n\n\t\t\t}, 0)\n\n\t\t\treturn\n\t\t}\n\n\t\tlet ts = new Date().getTime()\n\n\t\tif( !this._lastLetterPressTS || ts - this._lastLetterPressTS > this.opts.typeDelay )\n\t\t\tthis._lastLetterPress = ''\n\n\t\tthis._lastLetterPressTS = ts\n\n\t\tthis._lastLetterPress += e.key\n\n\t\tlet li = this.el.querySelector(`.menu-item[data-title^=\"${this._lastLetterPress}\"]`)\n\n\t\tif( li )\n\t\t\tthis.setActiveItem(li)\n\t}\n\t\n\tresolve(data){\n\t\t\n\t\t// if( this.opts.onSelect )\n\t\t// \tthis.opts.onSelect(data)\n\t\t\n\t\tif( this._resolve )\n\t\t\tthis._resolve(data)\n\t\t\t\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\tscrollToSelected(){\n\t\tsetTimeout(()=>{\n\t\t\tlet el = this.el.querySelector('.selected')\n\t\t\tel && this.setActiveItem(el)\n\t\t},0)\n\t}\n/*\n\tPresenters\n*/\n\tpopover(target, opts={}){\n\n\t\tif( opts.adjustForMobile && device.is_mobile )\n\t\t\treturn this.modal({closeBtn: true})\n\t\t\n\t\tthis.render()\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\n\t\tthis.scrollToSelected()\n\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}){\n\t\treturn this.panel(opts)\n\t}\n\n\tpanel(opts={}){\n\t\t\n\t\tthis.render()\n\t\t\n\t\topts.type = 'modal'\n\t\topts.animation = 'scale'\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\t\n\t\t\tthis.presenter = null\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\tthis.presenter = new Panel(this.el, opts).open()\n\n\t\tthis.scrollToSelected()\n\t\t\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n}","import {html} from 'lit-html'\n\nexport default class TabView {\n\n    constructor(view){\n        \n        // custom element - we lazy load these\n        if( typeof view === 'string' ){\n\n            this._viewName = view\n            this._viewClass = customElements.get(view)\n\n            if( this._viewClass && this._viewClass.title ){\n                this.__title = this._viewClass.title\n                this.__id = this.__title\n            }else{\n                this.__id = this._viewName\n            }\n\n            if( this._viewClass.id )\n                this.__id = this._viewClass.id\n\n        // HTML element\n        }else{\n            view.hidden = true\n            this.__view = view\n            this.__title = view.title\n\n            if( view.hasAttribute('view-id') ){\n                this.__id = view.getAttribute('view-id')\n            }else{\n                this.__id = this.__title\n                this.__view.setAttribute('view-id', this.id)\n            }\n\n            this.__view.tabView = this\n            view.title = ''\n        }\n    }\n\n    render(onClick){\n        return this.canDisplay?html`\n            <div class=\"tab-bar-item\" ?active=${this.active} .tabView=${this} @click=${onClick}>\n                <slot name=\"menu:${this.id}\">${this.title}</slot>\n            </div>\n        `:''\n    }\n\n    get active(){ return this.__active }\n    set active(isActive){\n        this.__active = isActive\n        if( !this.__view ) return // view not created yet\n        this.view.hidden = !isActive\n\n        if( isActive )\n            this.view.didBecomeActive&&this.view.didBecomeActive()\n        else\n            this.view.didBecomeInactive&&this.view.didBecomeInactive()\n    }\n\n    get view(){\n        // lazy loading the html element view\n        if( !this.__view ){\n            \n            if( this._viewClass ){\n                this.__view = new this._viewClass()\n                this.__view.tabView = this\n            }else{\n                this.__view = document.createElement('section')\n                this.__view.innerHTML = `<b-paper color=\"red\" border dense><b>${this._viewName}</b> is not a custom element</b-paper>`\n            }\n\n            this.__view.setAttribute('view-id', this.id)\n        }\n        return this.__view \n    }\n\n    get id(){\n        return this.__id\n    }\n\n    get title(){\n        return this.__title || 'No Title'\n    }\n\n    get path(){\n        if( !this.__view ) return ''\n        return this.view.path || this.id\n    }\n\n    get canDisplay(){\n        if( !this._viewClass || this._viewClass.canDisplay === undefined ) return true\n        return this._viewClass.canDisplay\n    }\n}","import TabView from './view'\n\nexport default class TabViews extends Map {\n\n    set active(view){\n        \n        if( view instanceof HTMLElement )\n            view = view.tabBar.id\n        if( view instanceof TabView )\n            view = view.id\n        \n        view = this.get(view) || this.first\n        \n        // view is already the active one\n        // if( view && view == this.active )\n        //     return \n\n        if( view && !view.canDisplay ) return false\n        \n        this.forEach(v=>v.active=false)\n\n        if( view ){\n            this.__active = view.id\n            view.active = true\n        }\n        \n        if( this.key )\n            view ? localStorage.setItem('tab-bar:'+this.key+':active', view.id) : localStorage.removeItem('tab-bar:'+this.key+':active')\n    }\n\n    get active(){\n        let active = this.key ? localStorage.getItem('tab-bar:'+this.key+':active') : this.__active\n        return active && this.get(active)\n    }\n    \n    get first(){\n        return this.at(0)\n    }\n\n    at(i){\n        return Array.from(this.values())[i]\n    }\n\n    get last(){\n        return this.at(this.size-1)\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { LitElement, html, css } from 'lit-element'\nimport Menu from '../menu'\nimport TabViews from './views'\nimport TabView from './view'\nimport debounce from 'lodash/debounce'\n\ncustomElements.define('b-tabs', class extends LitElement {\n\n    static get properties(){return {\n        key: {type: String, reflect: true},\n        layout: {type: 'String', reflect: true},\n        singlemenu: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.singlemenu = false\n        this.key = ''\n        this.layout = 'top'\n\n        this._resizeHandler = debounce(()=>{\n            this.singlemenu = this.shouldBeSingleMenu\n        }, 250)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        // window.addEventListener('resize', this._resizeHandler)\n\n        if( !this.views ){\n            \n            let views = []\n            this.childNodes.forEach(node=>{\n\n                if( node.nodeName == '#text' ){\n                    let str = node.textContent.trim()\n                    if( !str ) return\n                    let _views = str.split(\"\\n\").map(s=>s.trim())\n                    views.push(..._views)\n                    node.textContent = ''\n                \n                }else if( node.slot ){\n                    // ignore views that have a slot name\n\n                }else if( node.title ){\n                    views.push(node)\n                }else{\n                    node.hidden = true\n                    console.error('Cannot use `'+node.tagName+'` as it is missing a `title`')\n                }\n            })\n\n            this.views = views\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        // window.removeEventListener('resize', this._resizeHandler)\n    }\n\n    // this breaks down when last item is hidden\n    get shouldBeSingleMenu(){\n        if( this.offsetWidth == 0 ) return false\n        let menuItems = this.shadowRoot.querySelectorAll('.tab-bar-item')\n        let last = menuItems[menuItems.length-1]\n        if( !last ) return false\n        return last.offsetLeft+last.offsetWidth >= this.offsetWidth || last.offsetTop+last.offsetHeight >= this.offsetHeight\n    }\n\n    get views(){ return this.__views }\n    set views(views){\n        this.__views = this.__views || new TabViews()\n        this.__views.key = this.key\n\n        views.forEach(v=>{\n            v = new TabView(v)\n            this.__views.set(v.id, v)\n        })\n\n        this.active = this.views.active || this.views.first\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            display: grid;\n            flex: 1;\n            min-height: 0;\n\n            --menuFontSize: 1em;\n            --contentPadding: 2em;\n            --menuItemPadding: .75em 1em;\n            --menuItemRadius: 4px;\n            --inactiveColor: rgba(0,0,0,.4);\n            --activeColor: inherit;\n            --contentBgd: none;\n            --contentShadow: none;\n        }\n\n        .tab-bar {\n            display: flex;\n            font-size: var(--menuFontSize);\n            min-width: 0;\n            overflow: hidden;\n        }\n\n        .tab-bar-item {\n            padding: var(--menuItemPadding);\n            cursor: pointer;\n            box-sizing: border-box;\n            color: var(--inactiveColor);\n        }\n\n        .tab-bar-item[active] {\n            color: var(--activeColor)\n        }\n\n        :host(:not([singlemenu])) .single-menu {display: none;}\n        :host([singlemenu]) .tab-bar-item:not(.single-menu) {display: none;}\n\n        :host([layout=\"top\"]) { grid-template-rows: auto 1fr; }\n        :host([layout=\"bottom\"]) { grid-template-rows: 1fr auto; }\n        :host([layout=\"left\"]) { grid-template-columns: auto 1fr; }\n        :host([layout=\"right\"]) { grid-template-columns: 1fr auto; }\n\n        :host([layout=\"left\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            flex-direction: column;\n        }\n\n        :host([layout=\"bottom\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            order: 2;\n        }\n\n        :host([layout=\"top\"]) .tab-bar { border-bottom: solid 1px rgba(0,0,0,.1); }\n        :host([layout=\"bottom\"]) .tab-bar { border-top: solid 1px rgba(0,0,0,.1); }\n        :host([layout=\"left\"]) .tab-bar { border-right: solid 1px rgba(0,0,0,.1); }\n        :host([layout=\"right\"]) .tab-bar { border-left: solid 1px rgba(0,0,0,.1); }\n\n        :host([layout=\"top\"]) .tab-bar-item { border-bottom: solid 2px transparent; }\n        :host([layout=\"bottom\"]) .tab-bar-item { border-top: solid 2px transparent; }\n        :host([layout=\"left\"]) .tab-bar-item { border-right: solid 2px transparent; }\n        :host([layout=\"right\"]) .tab-bar-item { border-left: solid 2px transparent; }\n\n        :host([layout=\"top\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item:hover { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item:hover { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item:hover { border-left-color: currentColor; }\n\n        :host([layout=\"top\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item[active] { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item[active] { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item[active] { border-left-color: currentColor; }\n\n        @media (max-width: 550px) {\n\n            :host([layout=\"left\"]),\n            :host([layout=\"right\"]) {\n                grid-template-columns: none;\n                grid-template-rows: auto 1fr;\n            }\n\n            :host([layout=\"left\"]) .tab-bar,\n            :host([layout=\"right\"]) .tab-bar {\n                flex-direction: row;\n                overflow: auto;\n                border-bottom: solid 1px rgba(0,0,0,.1);\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item { border-right: none; }\n            :host([layout=\"right\"]) .tab-bar-item { border-left: none; }\n\n            :host([layout=\"left\"]) .tab-bar-item, \n            :host([layout=\"right\"]) .tab-bar-item {\n                border-bottom: solid 2px transparent;\n                flex-shrink: 0;\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item:hover, \n            :host([layout=\"right\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n\n            :host([layout=\"left\"]) .tab-bar-item[active], \n            :host([layout=\"right\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        }\n\n        /*\n            Slotted Content\n        */\n        slot.content {\n            display: flex;\n            background: var(--contentBgd);\n            box-shadow: var(--contentShadow);\n            overflow: auto;\n        }\n\n        .content::slotted(*) {\n            flex: 1;\n            align-self: flex-start;\n            max-height: 100%;\n        }\n        \n        /* dont add padding to custom elements */\n        .content::slotted(.padded),\n        .content::slotted(div),\n        .content::slotted(section) {\n            padding: var(--contentPadding);\n        }\n\n        .content::slotted([hidden]) {\n            display: none;\n        }\n        \n        /*\n        THEME: root-tabs\n        */\n        :host(.root-tabs) {\n            --activeColor: inherit;\n            --contentBgd: #fff;\n            --contentShadow: rgba(0,0,0,.2) 0 0 3px;\n            --menuFontSize: 1.1em;\n            --menuItemPadding: .65em 1em;\n        }\n\n        :host(.root-tabs) slot.content {\n            border-radius: 4px 0 0 0;\n        }\n\n        :host(.root-tabs) .tab-bar {\n            border: none !important;\n            padding-left: .35em;\n            padding-top: .25em;\n            z-index: 1;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar { padding: 0 0 .5em .5em; }\n        :host(.root-tabs[layout=\"left\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"right\"]) .tab-bar { padding: .5em .5em 0 0; }\n\n        :host(.root-tabs) .tab-bar-item {\n            border: solid 1px transparent;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar-item {\n            border-bottom: none !important;\n            border-radius: var(--menuItemRadius) var(--menuItemRadius) 0 0;\n        }\n\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar-item {\n            border-top: none !important;\n            border-radius: 0 0 var(--menuItemRadius) var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"left\"]) .tab-bar-item {\n            border-right: none !important;\n            border-radius: var(--menuItemRadius) 0 0 var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"right\"]) .tab-bar-item {\n            border-left: none !important;\n            border-radius: 0 var(--menuItemRadius) var(--menuItemRadius) 0;\n        }\n\n        :host(.root-tabs) .tab-bar-item:hover:not([active]) {\n            border-color: rgba(0,0,0,.1);\n            color: rgba(0,0,0,.5);\n        }\n\n        :host(.root-tabs) .tab-bar-item[active] {\n            background: var(--contentBgd);\n            /* border: solid 1px rgba(0,0,0,.1); */\n            box-shadow: rgba(0,0,0,.2) 0 0 3px;\n        }\n    `}\n\n    render(){return html`\n        <header class=\"tab-bar\">\n            <slot name=\"menu:before\"></slot>\n            <div class=\"tab-bar-item single-menu\" active @click=${this.popoverMenu}>\n                <b-icon name=\"menu\"></b-icon>\n                ${this.views.active.title}\n            </div>\n            ${this.views.map(v=>v.render(this.menuClick))}\n            <slot name=\"menu:after\"></slot>\n        </header>\n        <slot class=\"content\"></slot>\n    `}\n\n    async popoverMenu(e){\n\n        let selected = await new Menu(this.views.map(v=>{\n            return {label: v.title, val: v}\n        })).popover(e.target)\n\n        if( selected )\n            this.active = selected.val\n    }\n\n    menuClick(e){\n        let oldVal = this.active\n        this.active = e.currentTarget.tabView\n\n        if( this.active != oldVal )\n        this.dispatchEvent(new CustomEvent('active-changed',{\n            detail: {tabView: this.views.active},\n            bubbles: false, \n            composed: true\n        }))\n    }\n\n    onModelChange(){\n        if( this.views )\n            this.views.active.view.model = this.model\n    }\n\n    get active(){\n        return this.views && this.views.active && this.views.active.id\n    }\n\n    set active(val){\n        this.views.active = val\n        this.update()\n        \n        let view = this.views.active.view\n\n        this.setAttribute('active', this.views.active.id)\n\n        view.model = this.model\n\n        if( view.parentElement != this)\n            this.appendChild( view )\n    }\n\n})\n\nexport default customElements.get('b-tabs')","// const store = require('util/store')\n\nclass FormHandler extends HTMLElement {\n\t\n\tconstructor(){\n\t\tsuper()\n\t\t\n\t\t// bind context to functions\n\t\tthis.onModelSync = this.onModelSync.bind(this)\n\t\tthis.onModelChange = this.onModelChange.bind(this)\n\t\tthis.onModelEdited = this.onModelEdited.bind(this)\n\t\tthis.onEditorChange = this.onEditorChange.bind(this)\n\t}\n\n\tget noGridArea(){ return this.hasAttribute('no-grid-area') }\n\t\n\tget autoSave(){ return this.hasAttribute('autosave') }\n\tset autoSave(val){ val ? this.setAttribute('autosave', '') : this.removeAttribute('autosave') }\n\n\tget patchSave(){ return this.hasAttribute('patchsave') }\n\tset patchSave(val){ val ? this.setAttribute('patchsave', '') : this.removeAttribute('patchsave') }\n\t\n\tconnectedCallback(){\n\n\t\tlet host = this.getRootNode().host\n\t\tif( host && !host.formHandler )\n\t\t\thost.formHandler = this\n\n\t\t// TODO: change to `controls`?\n\t\tthis.editors = Array.from(this.querySelectorAll('form-control[key], check-box[key], radio-group[key], text-field[key], select-field[key]'))\n\t\tthis.editorsByKey = {}\n\n\t\tthis.editors.forEach(el=>{\n\t\t\tlet key = el.getAttribute('key')\n\t\t\tif( key ){\n\t\t\t\tthis.editorsByKey[key] = el\n\n\t\t\t\tif( !this.noGridArea )\n\t\t\t\t\tel.style.gridArea = key\n\t\t\t}\n\t\t})\n\n\t\tif( this.disabled || this.hasAttribute('disabled') )\n\t\t\tthis.disabled = true\n\n\t\tthis.addEventListener('change', this.onEditorChange, true)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstatic get observedAttributes(){ return ['disabled'] }\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tif( name == 'disabled' )\n\t\t\tthis.disabled = newValue !== null\n\t}\n\n\tdisconnectedCallback(){\n\t\tthis.editors = []\n\t\tthis.editorsByKey = {}\n\t\tthis.model = null\n\n\t\tthis.removeEventListener('change', this.onEditorChange)\n\t}\n\n\tget model(){ return this._model }\n\tset model(model){\n\n\t\tif( !model ){\n\t\t\t\n\t\t\tif( this.model ){\n\t\t\t\tthis.model.off('sync', null, this)\n\t\t\t\tthis.model.off('change', null, this)\n\t\t\t\tthis.model.off('edited', null, this)\n\t\t\t\tdelete this._model\n\t\t\t}\n\n\t\t\treturn\n\t\t}\n\n\t\tif( model == this.model ) return\n\n\t\tthis._model = model\n\t\tthis.model._editedAttrs = this.model._editedAttrs || {}\n\n\t\tthis.model.on('sync', this.onModelSync, this)\n\t\tthis.model.on('change', this.onModelChange, this)\n\t\tthis.model.on('edited', this.onModelEdited, this)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstore(vals){\n\t\tlet key = this.getAttribute('store')\n\t\tif( !key ) return undefined\n\n\t\tlet data = store(key) || {}\n\n\t\tif( vals === undefined )\n\t\t\treturn data\n\n\t\tdata = Object.assign(data, vals)\n\n\t\tstore(key, data)\n\t}\n\n\tstoredValue(key, defaultVal=null){\n\t\tif( this.model )\n\t\t\treturn this.model.has(key) ? this.model.get(key): defaultVal\n\t\t\n\t\tlet data = this.store()\n\t\treturn data ? data[key] : defaultVal\n\t}\n\n\t_updateEditors(){\n\t\tif( this.editors && (this.model || this.hasAttribute('store')) )\n\t\tthis.editors.forEach(el=>{\n\t\t\t// set the value of each editor based on the value in the model\n\t\t\tlet key = el.getAttribute('key')\n\t\t\tlet val = this.storedValue(key)\n\n\t\t\tif( val && val._isAMomentObject )\n\t\t\t\tval = val.format(el.control._datePicker?el.control._datePicker.format:'MM/DD/YYYY')\n\n\t\t\tif( val !== undefined )\n\t\t\t\tel.value = val\n\t\t})\n\t}\n\t\n\tonModelSync(m, attrs, opts){\n\t\tlet trigger = false\n\t\t\n\t\t// see if we need to clear any \"edited\" attributes\n\t\tfor( let key in attrs ){\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] !== undefined ){\n\t\t\t\ttrigger = true\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if we cleared any edited attributes, trigger the change\n\t\tif( trigger )\n\t\t\tthis.model.trigger('edited', this.model.isEdited(), this.model.editedAttrs())\n\t}\n\t\n\tonModelEdited(isEdited, editedAttrs){\n\t\tthis.editors.forEach(el=>{\n\t\t\tif( editedAttrs[el.key] != undefined && !this.autoSave )\n\t\t\t\tel.setAttribute('unsaved', '')\n\t\t\telse\n\t\t\t\tel.removeAttribute('unsaved')\n\t\t})\n\t}\n\t\n\tonModelChange(m, opts={}){\n\t\t\n\t\tfor( let key in m.changed ){\n\t\t\t\n\t\t\t// if changed value is different than edited value, clear the edited value\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] && m._editedAttrs[key] != m.changed[key]){\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t\t\n\t\t\t// set the editor with the new value\n\t\t\tif( this.editorsByKey[key] ){\n\t\t\t\tthis.editorsByKey[key].value = m.changed[key]\n\t\t\t\tthis.editorsByKey[key].removeAttribute('unsaved')\n\t\t\t\t\n\t\t\t\t// this causes problems with tracking \"editedAttr\"\n\t\t\t\t// if( m._origAttrs )\n\t\t\t\t// \tm._origAttrs[key] = m.changed[key]\n\t\t\t}\n\t\t}\n\t}\n\t\n\tonEditorChange(e){\n\n\t\tif( !e.detail ) return\n\n\t\tlet m = this.model\n\t\tlet el = e.target\n\t\tlet key = el.getAttribute('key')\n\t\tlet val = e.detail.value\n\t\t\n\t\tif( !key ) return\n\t\t\n\t\tlet changes = {}\n\t\tchanges[key] = val\n\t\t\n\t\t// optionally make other changes based on this change\n\t\t// TODO: think of a way to implement this again for the custom element?\n\t\t// if( this.opts.onEditorChange && this.opts.onEditorChange(m, changes, key, val) === false )\n\t\t// \treturn\n\n\t\t// ugh, this is hacky and should be solved a better way\n\t\tif( el.control && el.control.type=='date' && val ){\n\t\t\tchanges[key] = el.control._datePicker.formatted('YYYY-MM-DD')\n\t\t}\n\n\t\tthis.store(changes)\n\t\t\n\t\tif( this.model ){\n\t\t\tif( this.autoSave === true ){\n\t\t\t\tthis.model.save(changes, {patch:this.patchSave||false})\n\t\t\t\tthis.model.trigger('edited', false, changes)\n\t\t\t}else{\n\t\t\t\tthis.model.editAttr(changes)\n\t\t\t}\n\t\t}\n\t}\n\t\n\tget disabled(){ return this.__disabled || false }\n\tset disabled(disabled=false){\n\t\tthis.__disabled = disabled === true\n\t\tthis.editors&&this.editors.forEach(el=>el.disabled=this.__disabled)\n\t}\n\n\tget isInvalid(){\n\t\treturn !!this.editors.find(el=>el.isInvalid)\n\t}\n\t\n\tfocus(index=0){\n\t\tthis.editors[index]&&this.editors[index].focus()\n\t}\n\t\n\tget(key){\n\t\tif( typeof key == 'number' )\n\t\t\treturn this.editors[key]\n\t\t\t\n\t\treturn Array.from(this.editors).find(ed=>ed.key==key)\n\t}\n}\n\ncustomElements.define('form-handler', FormHandler)\n\nexport default customElements.get('form-handler')","import {css} from 'lit-element'\n\nexport default css`\nslot#value {\n\tdisplay: none;\n}\n\nslot[name=\"before\"] { grid-area: before }\nslot[name=\"help\"] { grid-area: help }\nslot[name=\"after\"] { grid-area: after }\n\nslot[name=\"before\"],\nslot[name=\"help\"],\nslot[name=\"after\"]{\n\tdisplay: block;\n}\n\n:host {\n\talign-self: flex-start;\n\t/* contain: content; */\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\t--placeholderColor: rgba(0,0,0,.3);\n\t--selectionBgd: #FFECB3;\n\t--focusBgd: #FFF8E1;\n\t--focusColor: #2196F3;\n\t--bgd: #fff;\n\t--borderColor: rgba(0,0,0,.3);\n\t--invalidColor: #ff1744;\n\t--unsavedColor: transparent; /*#FFC107;*/\n\t--disabledColor: rgba(0,0,0,.3);\n\t--labelFontSize: inherit;\n}\n\n:host main {\n\tgrid-area: main;\n\twidth: 100%;\n\tposition: relative;\n\tdisplay: flex;\n\tline-height: 1em;\n\tcaret-color: #E91E63;\n\tbox-sizing: border-box;\n}\n\n/* :host(:not([disabled]):hover) main, */\n/* :host(:not([disabled]):focus-within) main */\n/* :host(:not([disabled])[focused]) main { */\n\t/* background: var(--focusBgd);\n} */\n\n:host([disabled]) main {\n\tcolor: var(--disabledColor);\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd);\n}\n\n/* :host(:not([disabled])) main {\n\tcursor: text;\n} */\n\n.label {\n\tposition: absolute;\n\tz-index: 0;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\twhite-space: nowrap;\n\tfont-size: var(--labelFontSize);\n}\n\n.prefix {\n\torder: 10;\n}\n\n.suffix {\n\torder: 30;\n}\n\n.prefix, .suffix {\n\tposition: relative;\n\tz-index: 10;\n\tflex-shrink: 0;\n    color: var(--placeholderColor);\n\tdisplay: flex;\n\talign-items: center;\n}\n\nslot[name=\"prefix\"]::slotted(form-control),\nslot[name=\"suffix\"]::slotted(form-control) {\n\tcolor: #333;\n}\n\n/* .control {\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n} */\n\nslot[name=\"control\"]::slotted(*) {\n\t/* background: red; */\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n}\n\n/* .control[empty]:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n} */\n\n:host(:not([material])[invalid]) main {\n\tcolor: var(--invalidColor)\n}\n\n.btns {\n\tdisplay: none;\n}\n\n:host([btns]) .btns {\n\torder: 40;\n\tdisplay: grid;\n\t/* height: 100%; */\n\ttop: 0;\n\tflex-direction: column;\n\tmin-width: 0;\n\tflex-grow: 0;\n\tfont-size: 50%;\n\tposition: relative;\n\tcursor: pointer;\n}\n\n.btns > span {\n\tpadding: 0 .25em;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.btns > span svg {\n\theight: 2em;\n\twidth: 2em;\n}\n\n.btn-save:hover {\n\tcolor: green;\n\t/* background: blue; */\n}\n\n.btn-cancel:hover {\n\tcolor: red;\n\t/* background: orange; */\n}\n\n:host([hidden]),\n[hidden] {\n\tdisplay: none !important;\n}\n\nslot[name=\"help\"] {\n\tmargin: .5em 0 0;\n\tfont-size: .8em;\n\tcolor: rgba(0,0,0,.6);\n\tdisplay: block;\n}\n\n\n\n/*\n\tMaterial\n*/\n\n:host([material]) {\n\t--focusBgd: transparent;\n\tpadding-top: .25em;\n\t--padY: .6em;\n\t--borderColor: currentColor;\n}\n\n:host([material]) main {\n\tborder-bottom: solid 1px var(--borderColor);\n\tpadding-top: var(--padY);\n}\n\n:host([material]:not(:focus-within):not([focused]):hover) main {\n\tbackground: var(--bgd);\n}\n\n:host([material]) main:before {\n\tcontent: '';\n\tborder: solid 2px transparent;\n\tposition: absolute;\n\twidth: calc(100% + 2px);\n\theight: calc(100% + 2px);\n\tbox-sizing: border-box;\n\ttop: -1px;\n\tleft: -1px;\n}\n\n:host([material]) slot[name=\"control\"]::slotted(*) {\n\tpadding: var(--padY) 0;\n\t/* border-bottom: solid 1px transparent; */\n}\n\n:host([material]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .25em;\n}\n\n:host slot[name=\"control\"]::slotted(check-box) {\n\t border-bottom: solid 2px transparent\n}\n\n/* :host([unsaved]:not([material])) slot[name=\"control\"]::slotted(check-box) {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]) .label {\n\tcolor: var(--placeholderColor);\n\tdisplay: block;\n\ttransition: 120ms;\n\tposition: absolute;\n\tpadding: var(--padY) 0;\n}\n\n:host([material]) .prefix,\n:host([material]) .suffix {\n\tpadding: var(--padY) 0;\n}\n\n:host([material]:not([empty])),\n:host([material]:focus-within),\n:host([material][focused]) {\n\t--labelFontSize: .7em;\n}\n\n/* :host([material]) .control:not([empty]) ~ .label, */\n:host([material]:not([empty])) .label,\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: inherit;\n\ttransform: translateY(calc(-50% - (var(--padY) / 2)));\n\tz-index: 11;\n}\n\n:host([material]) .prefix,\n:host([material]) .suffix {\n\topacity: 0;\n\ttransition: 120ms;\n}\n\n/* :host([material]) .control:not([empty]) ~ .prefix,\n:host([material]) .control:not([empty]) ~ .suffix, */\n:host([material]:not([empty])) .prefix,\n:host([material]:not([empty])) .suffix,\n:host([material]:focus-within) .prefix,\n:host([material]:focus-within) .suffix,\n:host([material][focused]) .prefix,\n:host([material][focused]) .suffix {\n\topacity: 1;\n}\n\n:host([material]:focus-within) main:before,\n:host([material][focused]) main:before {\n\tborder-bottom-color: var(--focusColor);\n}\n\n:host([material][invalid]) main:before {\n\tborder-bottom-color: var(--invalidColor);\n}\n\n/* :host([material][unsaved]) main:before {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: var(--focusColor);\n}\n\n:host([material][invalid]) .label {\n\tcolor: var(--invalidColor);\n}\n\n\n/*\n\tMaterial Outline\n*/\n:host([material=\"outline\"]) {\n\tmargin: 0 .5em .5em 0;\n}\n\n:host([material=\"outline\"]) main:before {\n\tborder-radius: 4px;\n}\n\t\n:host([material=\"outline\"]) main {\n\tborder: solid 1px var(--borderColor);\n\tpadding-top: 0;\n\tborder-radius: 4px;\n\tbackground: var(--bgd);\n}\n\n/* :host([material=\"outline\"]) .control, */\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"outline\"]) .label {\n\tpadding: .75em;\n\tborder-radius: 3px;\n}\n\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .5em;\n}\n\n:host([material=\"outline\"]) .label {\n\twidth: auto;\n}\n\n:host([material=\"outline\"]) .prefix {\n\tpadding: .75em;\n    padding-right: 0;\n    margin-right: -.75em;\n}\n\n:host([material=\"outline\"]) .suffix {\n\tpadding: .75em;\n    padding-left: 0;\n    margin-left: -.75em;\n}\n\n:host([material=\"outline\"]) .control:not([empty]) ~ .label,\n:host([material=\"outline\"]:not([empty])) .label,\n:host([material=\"outline\"]:focus-within) .label,\n:host([material=\"outline\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: .75em;\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"outline\"]:focus-within) main:before,\n:host([material=\"outline\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"outline\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"outline\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"outline\"]) slot[name=\"help\"] {\n\tmargin: .5em .75em 0\n}\n\n/*\n\tFilled\n*/\t\t\n:host([material=\"filled\"]) {\n\t--bgd: #eee;\n\t--focusBgd: var(--bgd);\n\t--padY: .75em;\n\t--padX: .75em;\n\t--placeholderColor: rgba(0,0,0,.3);\n\tmargin: 0 .5em .5em 0;\n}\n\n:host([material=\"filled\"]) main {\n\tborder: solid 1px var(--bgd);\n\tpadding-top: 1em;\n\tborder-radius: 4px;\n\tbackground: var(--bgd);\n}\n\n:host([material=\"filled\"].nolabel) main, /* deprecated, use attribute */\n:host([material=\"filled\"][nolabel]) main {\n\tpadding-top: 0;\n}\n\n:host([material=\"filled\"].dense) main, /* deprecated, use attribute */\n:host([material=\"filled\"][dense]) main {\n\t--padY: .5em;\n}\n\n:host([material=\"filled\"]) main:before {\n\tborder-radius: 4px;\n}\n\n:host([material=\"filled\"]) .control,\n:host([material=\"filled\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"filled\"]) .label {\n\tpadding: var(--padY) var(--padX);\n\tborder-radius: 3px;\n}\n\n:host([material=\"filled\"]) .label {\n\ttransform: translateY(-20%);\n\twidth: auto;\n}\n\n:host([material=\"filled\"]) .prefix {\n\tpadding: var(--padY) var(--padX);\n    padding-right: 0;\n    margin-right: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]) .suffix {\n\tpadding: var(--padY) var(--padX);\n    padding-left: 0;\n    margin-left: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]:not([empty])) .label,\n:host([material=\"filled\"]:focus-within) .label,\n:host([material=\"filled\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: var(--padX);\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"filled\"]:focus-within) main:before,\n:host([material=\"filled\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"filled\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"filled\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"filled\"]) slot[name=\"help\"] {\n\tmargin: var(--padY) var(--padX) 0;\n}\n`","/*\n\tForm Control\n*/\n\nimport styles from './form-control.css.js'\n\n\nclass FormControlElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\tlet prefix = this.getAttribute('prefix') || '<slot name=\"prefix\"></slot>'\n\t\tlet suffix = this.getAttribute('suffix') || '<slot name=\"suffix\"></slot>'\n\n\t\t// if prefix/suffix have spaces at the beginning or end of string assume the\n\t\t// developer wanted the sapce to show and replace with non-breaking space so it does\n\t\tprefix = prefix.replace(/^\\s+/, '&nbsp;')\n\t\tprefix = prefix.replace(/\\s+$/, '&nbsp;')\n\t\tsuffix = suffix.replace(/^\\s+/, '&nbsp;')\n\t\tsuffix = suffix.replace(/\\s+$/, '&nbsp;')\n\t\t\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<slot name=\"before\"></slot>\n\t\t\t<main>\n\t\t\t\t<slot name=\"control\"></slot>\n\t\t\t\t<div class=\"prefix\">${prefix}</div>\n\t\t\t\t<div class=\"label\">${label}</div>\n\t\t\t\t<div class=\"suffix\">${suffix}</div>\n\t\t\t\t<div class=\"btns\">\n\t\t\t\t\t<span class=\"btn-save\">\n\t\t\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"btn-cancel\">\n\t\t\t\t\t\t<svg class=\"j2dfb39\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path><path fill=\"none\" d=\"M0 0h24v24H0z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t\t<slot name=\"help\"></slot>\n\t\t\t<slot name=\"after\"></slot>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis.control = this.querySelector('.control, text-field, rich-text-field, select-field, check-box, radio-group')\n\t\t\n\t\tif( this.control ){\n\t\t\t\n\t\t\tthis.control.slot = 'control'\n\t\t\t\n\t\t\tthis.mutationObserver = new MutationObserver(mutations=>{\n\t\t\t\tmutations.forEach(m=>{\n\t\t\t\t\t\n\t\t\t\t\t// mirror these attributes from the control onto the form-control\n\t\t\t\t\tif( ['invalid', 'empty', 'no-value', 'falsy', 'focused'].includes(m.attributeName) ){\n\t\t\t\t\t\tif( this.control.hasAttribute(m.attributeName) )\n\t\t\t\t\t\t\tthis.setAttribute(m.attributeName, true)\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.removeAttribute(m.attributeName)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\t\t\tthis.mutationObserver.observe(this.control, { attributes: true, childList: false, subtree: false });\n\t\t}\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this), true)\n\t\t\n\t\tthis.addEventListener('change', this._onChange)\n    }\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\n\t\tif( e.target.tagName == 'FORM-CONTROL') return\n\t\t\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\tkey: this.key\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t\t\n\t\t// hide slots that are empty\n\t\tthis.$$('slot').forEach(slot=>{\n\t\t\tif( slot.assignedNodes().length == 0 )\n\t\t\t\tslot.setAttribute('hidden', '')\n\t\t\telse\n\t\t\t\tslot.removeAttribute('hidden')\n\t\t})\n\t\t\n\t\t// defer - then make sure the form-control remains as wide as the label\n\t\tsetTimeout(()=>{\n\t\t\tif( this.style.minWidth == '' )\n\t\t\t\tthis.style.minWidth = this.$('.label').offsetWidth\n\n\t\t\tif( this.control )\n\t\t\t\tthis.control.disabled = this.disabled\n\t\t},0)\n\t\t\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' && this.control && this.control.disabled !== undefined)\n\t\t\tthis.control.disabled = this.disabled\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\n\t\n\tget key(){ return this.getAttribute('key')}\n\t\n\tget value(){\n\t\treturn this.control && this.control.value\n\t}\n\t\n\tset value(val){\n\t\tif( this.control )\n\t\t\tthis.control.value = val\n\t}\n\n\tget dbValue(){\n\t\tlet control = this.control\n\t\tif( !control ) return undefined\n\t\tlet val = control.dbValue\n\t\treturn val !== undefined ? val : control.value\n\t}\n\t\n\tget options(){ return this.control && this.control.options}\n\t\n\tset options(val){\n\t\tif( this.control )\n\t\t\tthis.control.options = val\n\t}\n\t\t\n\tget isInvalid(){\n\t\treturn this.control&&this.control.isInvalid\n\t}\n\n\tget label(){ return this.$('.label').innerText }\n\tset label(str){\n\t\tthis.$('.label').innerHTML = str\n\t\tif( str ){\n\t\t\tthis.classList.remove('nolabel')\n\t\t}else{\n\t\t\tthis.classList.add('nolabel')\n\t\t}\n\t}\n\t\n\t_setClassNames(){\n\t\t\n\t\tlet labelNodes = this.$('.label').childNodes\n\t\t\n\t\tif( labelNodes.length == 0 || (labelNodes[0].tagName == 'SLOT' && labelNodes[0].assignedNodes().length == 0) )\n\t\t\tthis.classList.add('nolabel')\n\t}\n\t\n\t_onClick(e){\n\t\t// console.log(e.target);\n\t\tif( e.target == this )\n\t\t\tthis.focus()\n\t\t// if( !e.target.isFocused && !e.target.slot)\n\t\t// \tthis.focus()\n\t}\n\t\n\tfocus(){\n\t\tthis.control && this.control.focus()\n\t}\n\n}\n\ncustomElements.define('form-control', FormControlElement)\n\nexport default customElements.get('form-control')\n","\nconst btnPresets = {\n\t'dismiss': {label: 'Dismiss'},\n\t'cancel': {label: 'Cancel'},\n\t'no': {label: 'No'},\n\t'done': {label: 'Done'},\n\t'ok': {label: 'Okay', color: 'blue'},\n\t'save': {label: 'Save', color: 'green'},\n\t'delete': {label: 'Delete', color: 'red'}\n}\n\nmodule.exports = function makeBtn(opts={}, i){\n\t\n\tif( typeof opts == 'string' ){\n\t\tif( !btnPresets[opts] )\n\t\t\treturn console.warn('Button preset `'+opts+'` does not exist')\n\t\t\n\t\topts = btnPresets[opts]\n\t}\n\t\n\tlet {\n\t\tlabel='',\n\t\tclassName='',//'text-btn fw-bold',\n\t\tcolor='',\n\t\ticon='',\n\t\ttext=true\n\t} = opts;\n\t\n\t// icon = icon ? 'icon-'+icon : ''\n\t\n\treturn `<b-btn ${text&&'text'} icon=\"${icon}\" color=\"${color}\" class=\"${className}\">${label}</b-btn>`\n\n\t// return `<span class=\"btn ${className} ${color} ${icon}\">${label}</span>`\n}","import {render, TemplateResult} from 'lit-html';\nconst Panel = require('../panel').default\nconst Popover = require('../popover').default\nconst makeBtn = require('./make-btn')\n\n// FIXME: this module needs to be refactored using lit-element to better apply styles\nconst styles = require('./style.less')\n\nconst cancelBtns = ['dismiss', 'cancel', 'no']\n\nexport default class Dialog {\n\tconstructor(opts={}){\n\t\t\n\t\tthis.opts = opts = Object.assign({\n\t\t\ticon:'',\n\t\t\ttitle:'',\n\t\t\tmsg:'',\n\t\t\tview: null,\n\t\t\tw: null,\n\t\t\tbtns:['dismiss'],\n\t\t\tclassName: '',\n\t\t}, opts)\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\t\n\t\topts.className += ' nopadding dialog'\n\n\t\tif( this.opts.icon )\n\t\t\topts.className += ' sideicon'\n\n\t\topts.className.split(' ').forEach(className=>className&&this.el.classList.add(className));\n\n\t\tlet [iconName, iconClass] = (opts.icon||'').split(' ')\n\t\t\n\t\t// FIXME: animation needs added\n\t\tlet icon = opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''} animated speed-2 flipInY\"></b-icon>` : ''\n\t\tlet btns = opts.btns ? opts.btns.map(btn=>makeBtn(btn)).join(\"\\n\") : ''\n\n\t\tif( opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\t\n\t\tthis.el.innerHTML = `<style>${styles}</style>\n\t\t\t\t\t\t\t<div class=\"d-icon\">${icon}</div>\n\t\t\t\t\t\t\t<h2 class=\"d-title\">${opts.title}</h2>\n\t\t\t\t\t\t\t<div class=\"d-msg\">${opts.msg}</div>\n\t\t\t\t\t\t\t<div class=\"d-btns\">${btns}</div>`;\n\t\tif(opts.msg instanceof TemplateResult){\n\t\t\trender(opts.msg, this.el.querySelector('.d-msg'));\n\t\t}\n\t\t\n\t\tif( this.opts.w )\n\t\t\tthis.el.style.width = (typeof this.opts.w == 'number') ? this.opts.w+'px' : this.opts.w;\n\t\t\n\t\tif( this.opts.view ){\n\t\t\tif( !this.opts.icon && !this.opts.title && !this.opts.msg ){\n\n\t\t\t\tif( this.opts.view instanceof HTMLElement ){\n\t\t\t\t\tthis.el.innerHTML = `<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t\tthis.el.prepend(this.opts.view)\n\t\t\t\t}else{\n\t\t\t\t\tthis.el.innerHTML = `${this.opts.view}<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.el.querySelector('.d-msg').appendChild(this.opts.view)\n\t\t}\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this), true)\n\t\t\n\t\tthis.promise = new Promise(resolve=>{ this._resolve = resolve })\n\t}\n\n\tset title(str){\n\t\tthis.opts.title = str\n\t\tlet el = this.el.querySelector('.d-title')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset msg(str){\n\t\tthis.opts.msg = str\n\t\tlet el = this.el.querySelector('.d-msg')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset btns(btns){\n\t\tthis.opts.btns = btns\n\t\tbtns = btns ? btns.map(btn=>makeBtn(btn)).join(\"\\n\") : ''\n\t\tlet el = this.el.querySelector('.d-btns')\n\t\tif( el )\n\t\t\tel.innerHTML = btns\n\t}\n\n\tset icon(icon){\n\t\tthis.opts.icon = icon\n\t\tlet [iconName, iconClass] = (icon||'').split(' ')\n\t\ticon = this.opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''} animated speed-2 flipInY\"></b-icon>` : ''\n\n\t\tif( this.opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\t\n\t\tlet el = this.el.querySelector('.d-icon')\n\t\tif( el )\n\t\t\tel.innerHTML = icon\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet el = e.target\n\t\t\n\t\tif( el.tagName == 'B-BTN' ){\n\t\t\t\n\t\t\tlet index = Array.from(el.parentElement.children).indexOf(el)\n\t\t\tlet btnInfo = this.opts.btns[index]\n\t\t\tthis.resolveBtn(btnInfo)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\t\t\n\t\tlet btnInfo = undefined\n\t\n\t\tif( e.code == 'Escape' ){\n\t\t\tbtnInfo = this.opts.btns.find(btn=>cancelBtns.includes(btn))\n\t\t\n\t\t}else if( e.code == 'Enter' ){\n\t\t\tbtnInfo = this.opts.btns.find(btn=>!cancelBtns.includes(btn))\n\t\t}\n\t\t\n\t\tif( btnInfo != undefined ){\n\n\t\t\t// let other views finish with keydown before we process (ex: Dialog.prompt)\n\t\t\tsetTimeout(()=>{\n\t\t\t\tif( document.activeElement == document.body )\n\t\t\t\t\tthis.resolveBtn(btnInfo)\n\t\t\t}, 0);\n\t\t}\n\t}\n\t\n\tresolveBtn(btnInfo){\n\t\tif( cancelBtns.includes(btnInfo) )\n\t\t\tbtnInfo = false\n\t\t\n\t\tif( this.resolve(btnInfo) === true )\n\t\t\tthis.close()\n\t}\n\t\n\tresolve(resp){\n\t\tif( this.opts.onResolve ){\n\t\t\t\n\t\t\ttry{\n\t\t\t\tresp = this.opts.onResolve(resp, this)\n\t\t\t}catch(err){\n\t\t\t\tconsole.log('failed to resolve');\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( this._resolve )\n\t\t\tthis._resolve(resp)\n\t\t\t\n\t\treturn true\n\t}\n\t\n\tclose(){\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\t$(str){\n\t\treturn this.el.querySelector(str)\n\t}\n\t\n\t$$(str){\n\t\treturn this.el.querySelectorAll(str)\n\t}\n\t\n\t/*\n\t\tPresenters\n\t*/\n\tpopover(target, opts={}){\n\t\t\n\t\tif( target.currentTarget )\n\t\t\ttarget = target.currentTarget\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}){\n\t\treturn this.panel(opts) // might need to reactivate Modal below\n\t}\n\n\tpanel(opts={}){\n\n\t\topts = Object.assign({\n\t\t\ttype: 'modal',\n\t\t\tanimation: 'scale',\n\t\t\tdisableBackdropClick: true\n\t\t}, opts)\n\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\n\t\tthis.presenter = new Panel(this.el, opts).open()\n\t\treturn this.promise\n\t}\n\t\n\tnotif(opts){\n\t\topts = Object.assign({\n\t\t\tautoClose: this.opts.btns ? false : 3000,\n\t\t\tclickRemoves: !this.opts.btns,\n\t\t\tonAutoClose: ()=>{ this.resolve(false) }\n\t\t}, opts)\n\t\t\n\t\tthis.presenter = app.msgs.add(this.el, opts)\n\t\treturn this.promise\n\t}\n}","\nconst Dialog = require('./dialog').default;\n\nmodule.exports = Dialog\n\nDialog.confirm = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\t// icon: 'trash text-red',\n\t\ttitle: 'Continue?',\n\t\tmsg: 'Are you sure?',\n\t\tbtns: ['cancel', 'ok']\n  \t}, opts))\n}\n\nDialog.confirmDelete = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: opts.title||opts.msg?'trash red':'',\n\t\tbtns: ['cancel', 'delete']\n  \t}, opts))\n}\n\nDialog.alert = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.error = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'alert red',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.warn = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'attention-1 orange',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.success = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'ok-circled green',\n\t\ttitle: 'Success',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.prompt = function(opts={}){\n\t\n\topts = Object.assign({\n\t\tval: '',\n\t\tmsg: '',\n\t\tprefix: '',\n\t\tsuffix: '',\n\t\tvalidate: '',\n\t\thtml: false,\n\t\trequired: false,\n\t\tlabel: '',\n\t\tplaceholder: '',\n\t\thelpText: '',\n\t\tw: 300,\n\t\tmultiline: false,\n\t\tmultiple: false,\n\t\tbtns: ['cancel', 'save']\n\t}, opts)\n\t\n\tif( opts.msg )\n\t\topts.msg = `<div>${opts.msg}</div>`\n\t\t\n\topts.onResolve = function(resp, dialog){\n\t\t\n\t\tlet control = dialog.$('form-control')\n\t\t\n\t\tif( !resp ) return resp\n\t\t\n\t\tif( control.isInvalid )\n\t\t\tthrow Error('Invalid data')\n\t\t\n\t\tresp = opts.html ? control.value : (control.control.textValue || control.value)\n\t\t\n\t\treturn resp\n\t}\n\t\n\tlet prefix = ''\n\tlet suffix = ''\n\t\n\tif( opts.prefix.match(/^icon/) ){\n\t\tprefix = `<span slot=\"prefix\" class=\"${opts.prefix}\"></span>`\n\t\topts.prefix = ''\n\t}\n\t\n\tif( opts.suffix.match(/^icon/) ){\n\t\tsuffix = `<span slot=\"suffix\" class=\"${opts.suffix}\"></span>`\n\t\topts.suffix = ''\n\t}\n\t\n\tlet control = `<text-field\n\t\tvalidate=\"${opts.validate}\"\n\t\tplaceholder=\"${opts.placeholder}\"\n\t\t${opts.html?'html':''}\n\t\t${opts.multiline?'multiline':''}\n\t\t${opts.required?'required':''}>${opts.val}</text-field>`\n\t\t\n\tif( opts.options )\n\t\tcontrol = `<select-field\n\t\t\t\t\tplaceholder=\"${opts.placeholder}\"\n\t\t\t\t\t${opts.multiple?'multiple':''}\n\t\t\t\t\t></select-field>`\n\t\n\topts.msg += `\n\t\t\t<form-control material=\"outline\" label=\"${opts.label}\" prefix=\"${opts.prefix}\"suffix=\"${opts.suffix}\">\n\t\t\t\t${control}\n\t\t\t\t<div slot=\"help\">${opts.helpText}</div>\n\t\t\t\t${prefix}\n\t\t\t\t${suffix}\n\t\t\t</form-control>\n\t\t\t`\n\t\n\tlet dialog = new Dialog(opts)\n\t\n\tcontrol = dialog.$('form-control')\n\t\n\tif( opts.options )\n\t\tcontrol.options = opts.options\n\t\n\tsetTimeout(function(){\t\n\t\tcontrol.focus()\n\t},500)\n\t\n\treturn dialog\n}\n","import moment from 'moment';\nimport {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n    display: inline-block;\n    --color: #2196f3;\n    --radius: 4px;\n    text-align: left;\n    border-radius: var(--radius);\n    background: #fff;\n}\n\nmain > header {\n    background: var(--color);\n    color: #fff;\n    padding: 1em 1em 1.25em 1em;\n    border-radius: var(--radius) var(--radius) 0 0;\n    display: grid;\n    grid-template-columns: 1fr auto\n}\n\nmain > header * {\n    margin: 0;\n    padding: 0;\n    font-weight: normal;\n    cursor: pointer;\n    display: inline-block;\n    justify-self: flex-start;\n}\n\nmain > header .today {\n    text-transform: uppercase;\n    font-size: .7em;\n    font-weight: bold;\n    justify-self: flex-end;\n    align-self: flex-start;\n    opacity: .6;\n}\n\nmain > header .today:hover {\n    opacity: 1;\n}\n\nmain > header h4 {\n    margin: 0 0 .75em 0;\n}\n\nmain:not(.pick-year) > header h4 {\n    color: rgba(255,255,255,.5);\n}\n\nmain.pick-year > header h1 {\n    color: rgba(255,255,255,.5);\n}\n\nsection {\n    padding: 1em;\n    position: relative;\n}\n\nnav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    user-select: none;\n}\n\nnav > svg {\n    height: 1.4em;\n    padding: .25em;\n    margin: -.25em;\n    opacity: .4;\n    cursor: pointer;\n\n}\n\nnav > svg:hover {\n    opacity: 1;\n}\n\nsection header,\nsection .days {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n    font-size: .8em;\n    text-align: center;\n}\n\nsection header {\n    color: rgba(0,0,0,.3);\n    margin: 1em 0;\n    font-size: .7em;\n}\n\nday {\n    padding: .7em;\n    height: 1.4em;\n    width: 1.4em;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 2em;\n    cursor: pointer;\n}\n\nday[active] {\n    background: var(--color);\n    color: #fff;\n}\n\nday[today]:not([active]) {\n    color: var(--color)\n}\n\n\nyears,\nmonths {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    overflow: auto;\n    background: #fff;\n    border-radius: 0 0 var(--radius) var(--radius);\n}\n\nmain:not(.pick-year) years {\n    display: none;\n}\n\nyear {\n    padding: .5em 0;\n    cursor: pointer;\n}\n\nyear[active],\nmonth[active] {\n    color: var(--color);\n    font-size: 1.4em;\n}\n\nmonths {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n}\n\nmonth {\n    justify-self: stretch;\n    align-self: stretch;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\nmain:not(.pick-month) months {\n    display: none;\n}\n\n:host([calendar-only]) main > header {\n    display: none;\n}`\n\nconst changeEvent = function(el, details={}){\n    var event = new CustomEvent('change', {\n        bubbles: true,\n        composed: true,\n        detail: Object.assign({}, details, {\n            value: el.value\n        })\n    });\n    \n    el.dispatchEvent(event)\n}\n\nclass DatePickerElement extends HTMLElement {\n\n\tconstructor(){\n\t\tsuper()\n\t\n\t\tlet htmlDaysHeader = moment.weekdaysMin().map(str=>`<div>${str}</div>`).join(\"\\n\")\n\n\t\tlet startYear = parseInt(this.getAttribute('year-start') || '1900')\n\t\tlet endYear = parseInt(this.getAttribute('year-end') || '2099')\n\t\tlet years = ''\n\t\twhile(startYear <= endYear){\n\t\t\tyears += `<year value=\"${startYear}\">${startYear++}</year>`\n        }\n        \n        let months = moment.monthsShort().map((m,i)=>`<month value=\"${i}\">${m}</month>`).join(\"\\n\")\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<header>\n\t\t\t\t\t<h4 class=\"selected-year\">Year</h4>\n\t\t\t\t\t<a class=\"today\">Today</a>\n\t\t\t\t\t<h1 class=\"selected-date\">Date, Day</h1>\n\t\t\t\t</header>\n\t\t\t\t<section>\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<svg class=\"back\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<div class=\"viewing-month\">Month</div>\n\t\t\t\t\t\t<svg class=\"forward\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</nav>\n\t\t\t\t\t<header>${htmlDaysHeader}</header>\n\t\t\t\t\t<div class=\"days\"></div>\n                    <years>${years}</years>\n                    <months>${months}</months>\n\t\t\t\t</section>\n\t\t\t</main>`\n\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._yearEl = this.$('.selected-year')\n\t\tthis._dateEl = this.$('.selected-date')\n\t\tthis._monthEl = this.$('.viewing-month')\n\t\tthis._monthDays = this.$('main .days')\n\n\t\tthis.shadowRoot.addEventListener('click', this._onClick.bind(this))\n\t}\n\n\tconnectedCallback(){\n\t\tthis._setDate(this.value)\n    }\n    \n    get value(){ return this.getAttribute('value') }\n\tset value(val){ this._setDate(val) }\n\n\tget format(){ return this.getAttribute('format') || 'MM/DD/YYYY'}\n\tset format(val){ this.setAttribute('format', val) }\n\n\tget date(){ return this._dateSelected.clone() }\n\tget isValid(){ return this._dateSelected.isValid() }\n\n\tformatted(format){\n\t\tif( format === undefined )\n\t\t\tformat = this.format\n\n\t\treturn this._dateSelected.format(format)\n\t}\n\n\t_renderMonth(){\n\n\t\tlet start = this._date.weekday()\n\t\tlet numDays = this._date.daysInMonth()\n\t\tlet days = new Array(7*6).fill('')\n\t\tlet i = 0\n\n\t\twhile(i<numDays){ days[i+start] = ++i }\n\n\t\tthis._monthDays.innerHTML = days.map(day=>`<day value=\"${day}\">${day}</day>`).join(\"\\n\")\n        this._monthEl.innerHTML = this._date.format('MMMM YYYY')\n        \n        if( this._lookingAtSelectedMonth ){\n\n            let elSelected = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( elSelected )\n\t\t\t\telSelected.setAttribute('active', '')\n        }\n\n        if( this._lookingAtToday ){\n            let el = this.$(`day[value=\"${this._today.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('today', '')\n        }\n\t}\n\n\tnextMonth(){\n\t\tthis._date.add('month', 1)\n\t\tthis._renderMonth()\n\t}\n\n\tprevMonth(){\n\t\tthis._date.add('month', -1)\n\t\tthis._renderMonth()\n\t}\n\n\tpickYear(show=true){\n\n        this.pickMonth(false)\n\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-year')\n\n\t\t\tlet activeYear = this.$('year[active]')\n\t\t\tif( activeYear )\n\t\t\t\tactiveYear.scrollIntoView()\n\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-year')\n    }\n    \n    pickMonth(show=true){\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-month')\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-month')\n\t}\n\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\n\t_onClick(e){\n\t\t\n\t\tif( e.target.tagName == 'DAY' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: this._date.year(),\n\t\t\t\t\tmonth: this._date.month(),\n\t\t\t\t\tdate: val\n                })\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.tagName == 'YEAR' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: val\n\t\t\t\t})\n                this.pickYear(false)\n\t\t\t}\n\t\t\treturn\n        }\n        \n        if( e.target.tagName == 'MONTH' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n                    date: 1,\n\t\t\t\t\tmonth: val\n\t\t\t\t})\n                this.pickMonth(false)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.classList.contains('selected-year') )\n\t\t\treturn this.pickYear()\n\n\t\tif( e.target.classList.contains('selected-date') )\n\t\t\treturn this.pickYear(false)\n\n\t\tif( e.target.classList.contains('today') ){\n            this.pickMonth(false)\n            this.pickYear(false)\n            return this._setDate()\n        }\n            \n        if( e.target.classList.contains('viewing-month') )\n            return this.pickMonth()\n\n\t\tif( e.target.tagName == 'svg' ){\n\t\t\te.target.classList.contains('back') ? this.prevMonth() : this.nextMonth()\n\t\t\treturn\n\t\t}\n    }\n    \n    get _lookingAtToday(){\n        this._today = this._today || moment()\n        return this._date.year() == this._today.year() && this._date.month() == this._today.month()\n    }\n\n    get _lookingAtSelectedMonth(){\n        this._today = this._today || moment()\n        return this._date.year() == this._dateSelected.year() && this._date.month() == this._dateSelected.month()\n    }\n\n\t_setDate(val){\n\n\t\tif( val && typeof val == 'object' ){\n\t\t\tthis._dateSelected.set(val)\n\t\t\tthis._date.set(val)\n\n\t\t\tchangeEvent(this, val)\n\t\t}else{\n\t\t\tthis._date = val ? moment(val, this.format) : moment()\n\t\t\tthis._dateSelected = this._date.clone()\n\t\t}\n\n\t\tthis._date.set({date: 1})\n\n\t\tthis._renderMonth()\n\t\tthis._refresh()\n\t}\n\n\t_refresh(){\n\n\t\tif( this._dateSelected.isValid() )\n\t\t\tthis.removeAttribute('invalid')\n\t\telse\n\t\t\tthis.setAttribute('invalid', '')\n\n\t\tthis.setAttribute('value', this.formatted())\n\n        this.$$('[active]').forEach(el=>el.removeAttribute('active'))\n\n\t\tif( !this._dateSelected.isValid() ){\n\t\t\tthis._yearEl.innerHTML = ''\n\t\t\tthis._dateEl.innerHTML = 'Invalid'\n\t\t\treturn\n\t\t}\n\n\t\tif( this._lookingAtSelectedMonth ){\n\t\t\tlet el = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('active', '')\n\t\t}\n\n\t\tlet yearEl = this.$(`year[value=\"${this._dateSelected.year()}\"]`)\n\t\tif( yearEl ){\n\t\t\tyearEl.setAttribute('active', '')\n        }\n        \n        let monthEl = this.$(`month[value=\"${this._dateSelected.month()}\"]`)\n\t\tif( monthEl ){\n\t\t\tmonthEl.setAttribute('active', '')\n\t\t}\n\n\t\tthis._yearEl.innerHTML = this._dateSelected.year()\n\t\tthis._dateEl.innerHTML = this.formatted('ddd, MMM D')\n    }\n}\n\n\ncustomElements.define('date-picker', DatePickerElement)\n\nexport default customElements.get('date-picker')\n","import {css} from 'lit-element'\nimport moment from 'moment'\nimport Dialog from '../../dialog'\nimport './date-picker'\n\nconst styles = css`\n:host {\n\tdisplay: inline-block;\n\tcontain: content;\n\tmin-width: .25em;\n}\n\n:host(:not([disabled])){\n\tcursor: text;\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd, #FFF8E1);\n}\n\nmain {\n\tdisplay: flex;\n}\n\n.editor {\n\toutline: none;\n\twidth: 100%;\n\tdisplay: inline-block;\n\twhite-space: pre-wrap;\n\tmin-height: 1em;\n\tline-height: 1.2em;\n\tmargin: -.1em 0;\n}\n\n/* :host([single-line]) .editor {\n\twhite-space: nowrap;\n\toverflow-x: auto;\n\toverflow-x: -moz-scrollbars-none; \n}\n\n:host([single-line]) .editor::-webkit-scrollbar {\n\twidth: 0 !important;\n} */\n\n.editor:empty:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n}\n\n.calendar {\n\tdisplay: none;\n\topacity: .3;\n\theight: 1.2em;\n    margin: -0.3em -.5em -.5em 0;\n    padding: .25em;\n\tcursor: pointer;\n}\n\n:host([type=\"date\"]) .calendar {\n\tdisplay: inline-block;\n}\n\n.calendar:hover,\n.calendar.popover-open {\n\topacity: .7;\n}`\n\nclass TextFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\t\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<div class=\"editor\" contenteditable=\"true\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t<b-icon name=\"calendar-3\" class=\"calendar\"></b-icon>\n\t\t\t</main>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis._editor = this.$('.editor')\n\n\t\tif( this.type == 'date' ){\n\t\t\tthis._datePicker = document.createElement('date-picker')\n\t\t\tthis._datePicker.value = this.value\n\t\t\tthis._datePicker.format = this.getAttribute('format') || 'MM/DD/YYYY'\n\n\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\tlet date = moment(this._val)\n\t\t\t\tthis._val = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._editor.innerHTML = this._val\n\t\tthis.innerText = ''\n\t\t\n\t\tthis._editor.addEventListener('paste', this._onPaste.bind(this), true)\n\t\tthis._editor.addEventListener('keydown', this._onKeypress.bind(this), true)\n\t\tthis._editor.addEventListener('focus', this._onFocus.bind(this))\n\t\tthis._editor.addEventListener('blur', this._onBlur.bind(this))\n\n\t\tthis.shadowRoot.addEventListener('click', this._onClick.bind(this))\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n    }\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled', 'placeholder']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' )\n\t\t\tthis._editor.contentEditable = !this.disabled\n\n\t\tif( name === 'placeholder' )\n\t\t\tthis._editor.dataset.placeholder = newValue\n\t}\n\t\n\tget type(){ return this.getAttribute('type') }\n\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\tget value(){ return this._val}\n\n\tget textValue(){\n\t\tif( !this.value ) return this.value\n\t\tlet doc = (new DOMParser()).parseFromString(this.value, 'text/html')\n\t\treturn Array.from(doc.body.childNodes).map(node=>node.nodeValue||node.innerText).join(\"\\n\")\n\t}\n\t\n\tset value(val){\n\t\t\n\t\tthis._oldVal = this._val\n\t\t\n\t\tif( this.hasAttribute('default') && !val ){\n\t\t\tval = this.getAttribute('default')\n\t\t\t\n\t\t\tthis._val = val\n\t\t\t\n\t\t\tlet selection = this.select()\n\t\t\tdocument.execCommand('insertText', false, val)\n\t\t\tselection.removeAllRanges();\n\t\t}else{\n\n\t\t\tif( this.type == 'date' ){\n\t\t\t\tthis._datePicker.value = val\n\t\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tlet date = moment(val)\n\t\t\t\t\tval = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t\t}\n\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tval = this._val\n\t\t\t\t\tthis._datePicker.value = val\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._val = val\n\n\t\t\tif( this._editor.innerHTML != val )\n\t\t\t\tthis._editor.innerHTML = val\n\t\t}\n\t\t\n\t\tthis._setClassNames()\n\t}\n\n\tget dbValue(){\n\t\tif( this._datePicker )\n\t\t\treturn this.value ? this._datePicker.formatted('YYYY-MM-DD') : this.value\n\t\treturn this.value\n\t}\n\n\tget currentValue(){\n\t\tif( this.hasAttribute('html') )\n\t\t\treturn this._editor.innerHTML\n\t\t\t\n\t\treturn this._editor.innerText || this._editor.innerHTML\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._editor\n\t}\n\t\n\t_setClassNames(){\n\t\t\n\t\tif( !this._val || this._val === '0' )\n\t\t\tthis.setAttribute('falsy', true)\n\t\telse\n\t\t\tthis.removeAttribute('falsy')\n\t\t\t\n\t\t\tif( !this._val )\n\t\t\tthis.setAttribute('no-value', true)\n\t\telse\n\t\t\tthis.removeAttribute('no-value')\n\t\t\t\n\t\tif( !this._val && !this.getAttribute('placeholder') )\n\t\t\tthis.setAttribute('empty', true)\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t_onClick(e){\n\n\t\t// was calendar icon clicked?\n\t\tif( e.target.classList.contains('calendar') ){\n\t\t\te.stopPropagation()\n\t\t\treturn this.pickDate()\n\t\t}\n\n\t\tif( e.target != this )\n\t\t\treturn\n\n\t\tif( !e.target.isFocused )\n\t\t\tthis.focus()\n\t}\n\n\tasync pickDate(){\n\t\tthis._datePicker.value = this.value\n\t\tlet picker = new Dialog({view: this._datePicker, btns: ['cancel', 'ok']})\n\n\t\tif( await picker.popover(this.$('.calendar'), {align: 'left', overflowBoundry: 'window', maxHeight: false}) ){\n\t\t\tthis._changeValue(picker.$('date-picker').value)\n\t\t}\n\t}\n\t\n\t_onPaste(e){\n\t\te.preventDefault();\n\t\tlet val = e.clipboardData.getData('text')\n\t\tdocument.execCommand('inserttext', false, val);\n\t}\n\t\n\tselect(range='all'){\n\n\t\tlet el = this._editor,\n\t\t    s = window.getSelection(),\n\t\t    r = document.createRange();\n\t\t\n\t\tif( range == 'start' ){\n\t\t\tr.setStart(el, 0);\n\t\t\tr.setEnd(el, 0);\n\t\t}else if( range == 'end' ){\n\t\t\tr.setStart(el, el.childNodes.length);\n\t\t\tr.setEnd(el, el.childNodes.length);\n\t\t}else{\n\t\t\tr.selectNodeContents(el);\n\t\t}\n\t\t\n\t\ts.removeAllRanges();\n\t\ts.addRange(r);\n\t\treturn s\n\t}\n\t\n\t_onKeypress(e){\n\t\tlet stop = false\n\t\t\n\t\tthis.isInvalid = false\n\t\t\n\t\tif( e.key == 'Enter' && !this.hasAttribute('multiline')){\n\t\t\tstop = true\n\t\t\tthis.dispatchEvent(new Event(\"change\")); // Force change event for empty search/ re-search\n\t\t\tthis.blur() // will trigger a change if there is one\n\t\t}\n\t\t\n\t\tif( e.key == 'Escape' ){\n\t\t\tthis.value = this.value // reset the value\n\t\t\tthis.blur()\n\t\t}\n\t\t\t\n\t\tlet max = this.getAttribute('max')\n\t\tif( max && this._editor.innerText.length >= max )\n\t\t\tstop = true\n\n\t\tlet delay = this.getAttribute('change-delay')\n\t\tclearTimeout(this._changeDelay)\n\t\tif( delay !== null ){\n\t\t\tdelay = delay || 500\n\t\t\tthis._changeDelay = setTimeout(this._onBlur.bind(this), delay)\n\t\t}\n\n\t\tif( stop ){\n\t\t\te.preventDefault()\n\t\t}else if( !this.hasAttribute('bubble-keypress') ){\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\t_onFocus(){\n\t\t\n\t}\n\t\n\tfocus(){\n\t\tthis.select()\n\t}\n\t\n\tvalidate(val){\n\t\t\n\t\tlet required = this.hasAttribute('required')\n\t\tlet validate = this.getAttribute('validate')\n\t\t\n\t\tif( !validate ) return required ? !!val : true\n\t\t\n\t\tswitch(validate){\n\t\t\tcase 'int':\n\t\t\t\tvalidate = '^\\\\d+$'; break;\n\t\t\tcase 'float':\n\t\t\tcase 'decimal':\n\t\t\t\tvalidate = '^\\\\d+(\\\\.\\\\d*)?$|^\\\\.\\\\d+$'; break;\n\t\t\tcase 'email':\n\t\t\t\tvalidate = '^\\\\S+@\\\\S+\\\\.\\\\S+$'; break;\n\t\t}\n\t\t\n\t\treturn !required && !val ? true : (new RegExp(validate)).test(val)\n\t}\n\t\n\t_onBlur(){\n\t\t\n\t\tlet val = this.currentValue\n\t\t\n\t\tif( !this.validate(val) ){\n\t\t\t\n\t\t\tif( this.hasAttribute('reset-invalid') ){\n\t\t\t\tthis.value = this.value\n\t\t\t}else{\n\t\t\t\tthis.value = val\n\t\t\t\tthis.isInvalid = true\n\t\t\t\tthis._setClassNames()\n\t\t\t}\n\t\t\t// }else{\n\t\t\t// \t\n\t\t\t// \tthis.focus()\n\t\t\t// }\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( val == this.value )\n\t\t\treturn\n\t\t\n\t\tlet max = this.getAttribute('max')\n\t\tif( max )\n\t\t\tval = val.slice(0, max)\n\t\t\n\t\tthis._changeValue(val)\n\t}\n\n\t_changeValue(val){\n\t\tthis.value = val\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\toldVal: this._oldVal\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n}\n\ncustomElements.define('text-field', TextFieldElement)\n\nexport default customElements.get('text-field')\n","/*\n\tSelect Field\n*/\nimport {css} from 'lit-element'\nimport Menu from '../../menu'\nimport device from '../../../util/device'\n\nconst styles = css`\n\n:host(:not([disabled])) {\n\tcursor: pointer;\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 1em;\n}\n\nmain > svg {\n\theight: 1em;\n\twidth: 1em;\n\tflex-shrink: 0;\n}\n\nslot#options {\n\tdisplay: none;\n}\n\nmain input {\n\tposition: absolute;\n\tz-index: -1;\n\topacity: 0;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n}\n\n\n#value {\n\tflex-grow: 1;\n\tmin-width: 1em;\n}\n\n#value:empty:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n}\n\n#value > span {\n\tdisplay: inline-block;\n\tpadding: 0;\n    min-width: 1em;\n\tvertical-align: bottom;\n}\n\n:host(:not([chip])) #value > span:not(:last-child):after {\n\tcontent: ', ';\n\tmargin-right: .5em;\n}\n\n:host([chip]) #value {\n\tmargin-top: -.15em;\n\tmargin-bottom: -.15em;\n}\n\n:host([chip]) #value > span {\n\tbackground: rgba(0,0,0,.1);\n    margin: .1em;\n    padding: .15em .5em;\n    border-radius: 20px;\n\tline-height: 1em;\n\tdisplay: inline-flex;\n\tjustify-content: center;\n\talign-items: center;\n}`\n\nclass SelectFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\tlet arrow = this.hasAttribute('no-arrow') ? '' : '<svg focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M7 10l5 5 5-5z\"></path></svg>'\n\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<input type=\"input\" readonly=\"true\"/>\n\t\t\t\t<div id=\"value\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t${arrow}\n\t\t\t</main>\n\t\t\t<slot id=\"options\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._input = this.$('input')\n\t\tthis._value = this.$('#value')\n\t\tthis._selected = []\n\t\t\n\t\tlet options = this.$('#options')\n\t\tthis.options = []\n\t\t\n\t\toptions.assignedNodes&&options.assignedNodes().map(el=>{\n\n\t\t\tif( !el.tagName ) return // skip comments and empty text blocks\n\t\t\t\n\t\t\tif( el.tagName == 'HR' )\n\t\t\t\treturn this.options.push('divider')\n\t\t\t\n\t\t\tif( el.tagName == 'OPTGROUP' )\n\t\t\t\treturn this.options.push({'divider': el.innerHTML})\n\t\t\t\n\t\t\tif( el.tagName != 'OPTION'){\n\t\t\t\treturn this.options.push({'text': el.innerHTML})\n\t\t\t}\n\t\t\t\n\t\t\tif( el.hasAttribute('selected') )\n\t\t\t\tthis._selected.push(el.value)\n\t\t\t\n\t\t\tlet attrs = {}\n\t\t\t\n\t\t\tArray.from(el.attributes).forEach(attr=>{\n\t\t\t\tif( !['value', 'selected'].includes(attr.name) )\n\t\t\t\t\tattrs[attr.name] = attr.value\n\t\t\t})\n\t\t\t\n\t\t\tthis.options.push(Object.assign(attrs, {\n\t\t\t\tlabel: el.innerHTML,\n\t\t\t\tval: el.value||null\n\t\t\t}))\n\t\t})\n\t\t\n\t\tthis.addEventListener('click', this.focus.bind(this))\n\t\tthis.addEventListener('keypress', this.onKeypress.bind(this))\n    }\n\t\n\tonKeypress(e){\n\t\tif( e.code == 'Space' ){\n\t\t\tthis.toggleMenu()\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['disabled']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\tif( name === 'disabled' )\n\t\t\tthis._input.disabled = this.disabled\n\t}\n\t\n\tsetAttributes(){\n\t\t\n\t\tif( this.isEmpty && !this.showEmpty && !this.getAttribute('placeholder') )\n\t\t\tthis.setAttribute('empty', true)\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis.selected = this._selected\n\t}\n\tdisconnectedCallback(){}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n\tget multiple(){ return this.hasAttribute('multiple') }\n\tget showEmpty(){ return this.hasAttribute('show-empty') }\n\t\n\tget value(){\n\t\tif( this.multiple )\n\t\t\treturn this.selected && this.selected.map(m=>m.val)\n\t\telse\n\t\t\treturn this.selected && this.selected.val\n\t}\n\t\n\tset value(val){\n\t\tthis.selected = val\n\t}\n\t\n\tget isEmpty(){\n\t\tlet val = this.value\n\t\treturn this.multiple ? val.length <= 1 && !val[0] : !val\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\n\tset options(opts){\n\n\t\tif( opts instanceof Promise ){\n\t\t\topts.then(result=>{\n\t\t\t\tthis.options = result\n\t\t\t\treturn result\n\t\t\t})\n\t\t\topts = [] // clear options until promise resolves\n\t\t}\n\n\t\tif( Array.isArray(opts) )\n\t\t\topts = opts.map(o=>{\n\t\t\t\tif( typeof o == 'string')\n\t\t\t\t\treturn {label: o, val: o}\n\t\t\t\treturn o\n\t\t\t})\n\n\t\tthis.__options = opts\n\t\tthis.selected = this._selected\n\t}\n\tget options(){ return this.__options}\n\t\n\tset selected(val){\n\t\t\n\t\tthis._oldSelected = this._selected.slice(0)\n\t\t\n\t\tif( !val ) val = []\n\t\telse if( !Array.isArray(val) ) val = [val]\n\t\t\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn val.includes(m.val) || (val.length == 0 && !m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn val.indexOf(a.val) - val.indexOf(b.val)\n\t\t})\n\t\t\n\t\tthis._selected = []\n\n\t\t// if no options, keep the selected value\n\t\t// FIXME: could be improved with the `labels`\n\t\tif( this.options.length == 0 )\n\t\t\tthis._selected = val\n\t\t\n\t\tlet labels = ''\n\t\t\n\t\tselected.forEach(m=>{\n\t\t\t\n\t\t\tthis._selected.push(m.val)\n\t\t\t\n\t\t\tif(m.val || this.showEmpty)\n\t\t\t\tlabels += `<span value=\"${m.val}\">${m.label}</span>`\n\t\t\t\t\n\t\t})\n\t\t\n\t\tthis._value.innerHTML = labels\n\n\t\tthis.setAttribute('value', val.join(','))\n\t\t\n\t\tthis.setAttributes()\n\t}\n\t\n\tget selected(){\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn this._selected.includes(m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn this._selected.indexOf(a.val) - this._selected.indexOf(b.val)\n\t\t})\n\t\t\n\t\treturn this.multiple ? selected : selected[0]\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._input || this.hasAttribute('focused')\n\t}\n\t\n\tfocus(){\n\t\tthis.toggleMenu()\n\t}\n\t\n\tset focused(focused){\n\t\tif( focused ){\n\t\t\tthis._input.focus()\n\t\t\tthis.setAttribute('focused', '')\n\t\t}else{\n\t\t\tthis._input.blur()\n\t\t\tthis.removeAttribute('focused')\n\t\t}\n\t}\n\n\tasync toggleMenu(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tif( this.openMenu ){\n\t\t\tthis.openMenu.resolve(false)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tthis.focused = true\n\t\t\n\t\tlet menuOpts = {\n\t\t\tminW: this.offsetWidth,\n\t\t\tselected: this._selected,\n\t\t\tmultiple: this.multiple,\n\t\t\tjumpNav: this.hasAttribute('jump-nav'),\n\t\t\t\n\t\t\t// only called when in multiple mode\n\t\t\tonSelect: selected=>{\n\t\t\t\tthis.selected = selected.map(m=>m.val)\n\t\t\t}\n\t\t}\n\t\t\n\t\tlet menu = this.options\n\t\tlet popoverOpts = {\n\t\t\talign: this.getAttribute('menu-align') || 'bottom',\n\t\t\tmaxHeight: this.getAttribute('menu-max-height') || 'auto',\n\t\t\tmaxWidth: this.getAttribute('menu-max-width') || 'none',\n\t\t\toverflowBoundry: this.getAttribute('menu-overflow') ? 'window' : null\n\t\t}\n\t\t\n\t\tif( !menu || menu.length == 0 )\n\t\t\tmenu = [{'divider': 'No options available'}]\n\t\t\t\n\t\tthis.openMenu = new Menu(menu, menuOpts)\n\t\t\n\t\tthis.openMenu.el.setAttribute('select-field', this.className)\n\n\t\tlet val = undefined\n\n\t\tif( device.is_mobile )\n\t\t\tval = await this.openMenu.modal({closeBtn: true})\n\t\telse\n\t\t\tval = await this.openMenu.popover(this.$('main'), popoverOpts)\n\t\t\n\t\tthis.openMenu = null\n\t\tthis.focused = false\n\t\t\n\t\tif( !device.is_mobile )\n\t\t\tthis._input.focus() // retain focus\n\t\t\n\t\tif( val === false ) return\n\t\t\n\t\tval = this.multiple ? val : [val]\n\t\t\n\t\tthis.selected = val.map(m=>m.val)\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n}\n\ncustomElements.define('select-field', SelectFieldElement)\n\nexport default customElements.get('select-field')\n","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: #2196f3;\n\t--colorDisabled: rgba(0, 0, 0, 0.26);\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n:host(.control) {\n\tflex-grow: 0 !important;\n}\n\n:host([active]) svg.inactive,\n:host(:not([active])) svg.active {\n\tdisplay: none\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n:host([placement=\"top\"]) main { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) main { flex-direction: column; }\n:host([placement=\"left\"]) main { flex-direction: row-reverse; }\n:host([placement=\"right\"]) main { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\nsvg.active {\n\tfill: var(--color);\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled);\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nmain label {\n\tcursor: pointer;\n}`\n\nclass RadioBtnElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"inactive\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<svg class=\"active\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<label>${label}</label>\n\t\t\t</main>\n\t\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.active = !this.active\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tset active(val){\n\t\tval ? this.setAttribute('active', '') : this.removeAttribute('active')\n\t}\n\t\n\tget active(){ return this.hasAttribute('active') }\n\tget value(){ return this.hasAttribute('value') ? (this.getAttribute('value')||null) : this.getAttribute('label') }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('radio-btn', RadioBtnElement)\n\nexport default customElements.get('radio-btn')\n","\nclass RadioGroupElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\t// let shadow = this.attachShadow({mode: 'open'})\n\t\t// let temp = document.createElement('template')\n\t\t// temp.innerHTML = `<style>${styles}</style>`\n\t\t// this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.addEventListener('change', this._onChange.bind(this), true)\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['ArrowLeft', 'ArrowUp'].includes(e.code) ){\n\t\t\t\tthis.nav(-1)\n\t\t\t}else if( ['ArrowRight', 'ArrowDown'].includes(e.code) ){\n\t\t\t\tthis.nav(1)\n\t\t\t}\n\t\t})\n\t\t\n\t\tthis.radios = Array.from(this.querySelectorAll('radio-btn'))\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\t}\n\t\n\tnav(dir=1){\n\t\tlet i = this.radios.indexOf(this.active)\n\t\t\n\t\tif( i == undefined ) i = dir < 0 ? this.radios.length-1 : 0\n\t\telse i += dir\n\t\t\n\t\tif( i >= this.radios.length ) i = 0\n\t\telse if( i < 0 ) i = this.radios.length-1\n\t\t\n\t\tthis.value = this.radios[i].value\n\t}\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\t\t\n\t\tthis.value = e.target.value\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tget active(){\n\t\treturn this.radios.find(el=>el.active)\n\t}\n\t\n\tget value(){\n\t\tlet radio = this.active\n\t\treturn radio && radio.value\n\t}\n\t\n\tset value(val){\n\t\tthis.radios.forEach(el=>{\n\t\t\tif( el.value == val )\n\t\t\t\tel.active=true\n\t\t\telse\n\t\t\t\tel.active=false\n\t\t})\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){\n\t\tval ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n\t\tthis.radios.forEach(el=>el.disabled=val)\n\t}\n\t\n}\n\ncustomElements.define('radio-group', RadioGroupElement)\n\nexport default customElements.get('radio-group')\n","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\topacity: 0;\n\tposition: absolute;\n\t/* left: -7px;\n\ttop: -7px;\n\twidth: 48px;\n\theight: 48px; */\n\twidth: 120%;\n\theight: 120%;\n\tleft: -10%;\n\ttop: -10%;\n\tdisplay: block;\n\tz-index: 100;\n\tbackground: currentColor;\n\tborder-radius: 50px;\n}\n\n:host(.enter) {\n\topacity: 0.3;\n\t/* transform: scale(.5); */\n\tanimation: ripple-enter 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-enter;\n}\n\n:host(.exit) {\n\topacity: 0;\n\t/* transform: scale(1); */\n\tanimation: ripple-exit 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-exit;\n}\n\n\n@-webkit-keyframes ripple-enter {\n  0% {\n    opacity: 0.1;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n}\n@-webkit-keyframes ripple-exit {\n  0% {\n    opacity: .3;\n\ttransform: scale(.7);\n  }\n  100% {\n    opacity: 0;\n\ttransform: scale(1.2);\n  }\n}\n@-webkit-keyframes ripple-pulsate {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.92);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n`\n\nclass TouchRippleElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\tripple(){\n\t\tthis.animate('exit')\n\t}\n\t\n\tenter(){\n\t\tthis.classList.add('enter')\n\t}\n\t\n\thide(){\n\t\tthis.classList.remove('exit')\n\t\tthis.classList.remove('enter')\n\t}\n\t\n\tanimate(str){\n\t\tthis.hide()\n\t\tthis.classList.add(str)\n\t\tsetTimeout(()=>this.classList.remove(str), 550)\n\t}\n\t\n}\n\ncustomElements.define('touch-ripple', TouchRippleElement)\n\nexport default customElements.get('touch-ripple')\n","/*\n\tForm Controls\n*/\nimport './form-handler'\nimport './form-control'\nimport './controls/text-field'\n// import './controls/rich-text-field'\nimport './controls/select-field'\nimport './controls/check-box'\nimport './controls/radio-btn'\nimport './controls/radio-group'\nimport './controls/touch-ripple'\nimport './controls/range-slider'\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import Emitter from 'component-emitter'\n\nexport default class DataSource {\n\n    constructor(opts={}){\n        this.reset()\n\n        this.opts = Object.assign({\n            perPage: 30,\n            fetch: true\n        }, opts)\n    }\n\n    reset(){\n        this._pageFetched = null\n        this.lastFiltered = 0\n        this._rawData = []      // unaltered data from server\n        this._filteredData = [] // raw data with after filters applied\n        this.data = []          // filtered data with \"search term\" applied\n    }\n\n    async refilter(){\n        this.lastFiltered = 0\n        this._rawData = this.coll.models || this.coll\n        this._filteredData = this._rawData\n        this.data = this._rawData\n\n        await this.applyFilters()\n    }\n\n    get perPage(){ return this.opts.perPage }\n\n    async length(){\n\n        if( this._fetching )\n            await this._fetching\n\n        return this.data.length\n    }\n    \n    at(i){ return this.data[i] }\n    first(i){ return this.data[0] }\n    last(){ return this.data[this.data.length-1]}\n\n    forEach(fn){ return this.data.forEach(fn) }\n    map(fn){ return this.data.map(fn) }\n    flatMap(fn){ return this.data.flatMap(fn) }\n    filter(fn){ return this.data.filter(fn) }\n    reduce(fn, start=0){ return this.data.reduce(fn, start) }\n\n    async _fetchFromServer(pageAt){\n\n        // TODO: support fetching data with `fetch` and a url?\n        if( this.coll && this.coll.fetchSync ){\n\n            let data = {term:this.filters.term||''}\n\n            if( this.opts.fetch == 'more' ){\n                data.pageAt = pageAt\n                data.perPage = this.perPage\n            }\n\n            if( this.filters )\n                data.filters = this.filters.value()\n\n            await this.coll.fetchSync({data:data})\n        }\n    }\n\n    fetch(pageAt){\n        return this._fetching = new Promise(async resolve=>{\n\n            if( (pageAt == 0 && this._rawData.length == 0) \n            || (this._pageFetched != pageAt && this._rawData.length == pageAt && this.opts.fetch == 'more' ) ){\n\n                this._pageFetched = pageAt\n\n                if( this.opts.fetch )\n                    await this._fetchFromServer(pageAt)\n                \n                await this.refilter()\n            }\n\n            if( this._rawData.length > pageAt )\n                this.emit('change:count', this._rawData.length)\n\n            if( this._filtering )\n                await this._filtering\n\n            if( this._sorting )\n                await this._sorting\n\n            resolve(this.data.slice(pageAt, pageAt+this.opts.perPage))\n        }).finally(_=>delete this._fetching)\n    }\n\n    applyFilters(){\n        return this._filtering = new Promise(async resolve=>{\n\n            if( !this.filters ) return resolve(this.data)\n\n            if( this.lastFiltered < this.filters.lastChanged ){\n                this.data = await this.filters.filter(this._rawData)\n                await this.sort()\n                this._filteredData = this.data\n            }\n\n            this.data = await this.filters.filterByTerm(this._filteredData)\n\n            resolve(this.data)\n\n            this.lastFiltered = new Date().getTime()\n\n        }).finally(_=>delete this._filtering)\n    }\n\n    sort(){\n        return this._sorting = new Promise(async resolve=>{\n\n            if( !this.sorts ) return resolve(this.data)\n\n            this.data = await this.sorts.sort(this.data)\n\n            resolve(this.data)\n\n        }).finally(_=>delete this._sorting)\n    }\n}\n\nEmitter(DataSource.prototype)","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var toString = require('./toString'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nmodule.exports = capitalize;\n","import capitalize from 'lodash/capitalize'\n\nexport default str => {\n    return str.replace(/[\\-_]/g, ' ')\n            .split(' ')\n            .map(word=>capitalize(word))\n            .join(' ')\n}","import { LitElement, html, css } from 'lit-element'\nimport moment from 'moment'\n\ncustomElements.define('b-list-filter-view-date', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        header {\n            display: grid;\n        }\n\n        footer {\n            display: flex;\n            justify-content: flex-end;\n        }\n\n        b-btn {\n            margin: .05em 0;\n            padding: .1em;\n        }\n\n        b-btn:hover {\n            --bgdColor: rgba(0, 0, 0, 0.1);\n        }\n\n        text-field {\n            padding-right: .5em;\n            margin-right: -.5em;\n            /* width: 160px; */\n        }\n\n        b-hr {\n            margin: .25em -.25em;\n        }\n        \n        .controls {\n            padding: .5em;\n            font-size: 1.4em;\n            display: flex;\n            flex-direction: column;\n        }\n\n        form-control:first-child {\n            margin-bottom: .35em;\n        }\n    `}\n\n    firstUpdated(){\n        this.editors = this.shadowRoot.querySelectorAll('form-control')\n\n        let value = this.filter.value\n\n        if( value )\n            this.editors.forEach((el,i)=>el.value=value[i])\n    }\n\n    render(){return html`\n\n        <header>\n            <b-btn text md @click=${this.clearDates}>Clear</b-btn>\n            <b-hr></b-hr>\n            <b-btn text md @click=${this.usePreset}>Today</b-btn>\n            <b-btn text md @click=${this.usePreset}>Yesterday</b-btn>\n            <b-btn text md @click=${this.usePreset}>30 Days</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Month</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Year</b-btn>\n        </header>\n\n        <b-hr></b-hr>\n\n        <div class=\"controls\">\n            <form-control key=\"date1\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\"></text-field>\n            </form-control>\n\n            <form-control key=\"date2\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\"></text-field>\n            </form-control>\n        </div>\n    `}\n\n    get value(){\n        let value = []\n\n        // editors not setup yet, so just use the value from the filter object\n        if( !this.editors )\n            return this.filter.value\n\n        this.editors.forEach(el=>{\n            let v = el.dbValue\n            if( v )\n                value.push(v)\n        })\n\n        if( value.length == 0 )\n            return null\n\n        if( value.length == 1 )\n            value = [value[0], value[0]]\n\n        value.sort()\n\n        return value\n    }\n\n    set value(val){\n\n        if( !val || val.length == 0 )\n            val = [null, null]\n\n        if( typeof val == 'string' )\n            val = [val, val]\n        \n        if( val.length == 0 )\n            val = [val[0], val[0]]\n\n        this.editors.forEach((el,i)=>{\n            el.value = val[i]||null\n        })\n    }\n\n    /*\n        We do a bunch of fancy logic to display a label that is hopefully\n        the easy to scan while taking up the least amount of space\n    */\n    get label(){\n\n        let val = this.value\n\n        if( !val )\n            return ''\n\n        let [d1, d2] = val\n        let m = moment().startOf('day')\n        let m1 = moment(d1)\n        let m2 = moment(d2)\n        let thisYear = m1.year() == m.year() && m2.year() == m2.year()\n        let sameYear = m1.year() == m2.year()\n\n        // single day selected\n        if( d1 == d2 ){\n            let m1 = moment(d1)\n\n            if( m.isSame(m1) )\n                return 'Today'\n\n            let diffDays = m.diff(m1, 'days')\n\n            if( diffDays == 1 )\n                return 'Yesterday'\n\n            if( diffDays > 1 && diffDays <= 14 )\n                return diffDays+' days ago'\n\n            // leave off the year since it's this year\n            if( thisYear )\n                return m1.format('MMM D')\n\n            return m1.format('M/D/YY')\n        }\n\n        // month range (beginning of one month to end of another month)\n        if( m1.date() == 1 && m2.date() == m2.clone().endOf('month').date() ){\n\n            let month1 = m1.format('MMM')\n            let month2 = m2.format('MMM')\n            \n            if( month1 == month2 && sameYear ){\n\n                if( month1 == m.format('MMM') && thisYear )\n                    return 'This Month'\n                \n                if( thisYear )\n                    return month1\n\n                return month1+' '+m1.format('YY')\n            }\n\n            if( thisYear && m1.month() == 0 && m2.month() == 11)\n                return 'This Year'\n            else if( thisYear )\n                return month1+' - '+month2\n            else if( sameYear )\n                return month1+' - '+month2+' '+m2.format('YYYY')\n            else\n                return month1+' '+m1.format('YY')+' - '+month2+' '+m2.format('YY')\n        }\n\n        // leave off the year since it's this year\n        if( thisYear )\n            return m1.format('MMM D')+' - '+m2.format('MMM D')\n\n        return m1.format('M/D/YY')+' - '+m2.format('M/D/YY')\n    }\n\n    clearDates(){\n        this.value = null\n        this.close()\n    }\n\n    usePreset(e){\n        let preset = e.target.innerText\n        let values = []\n        let date = moment()\n        let format = 'YYYY-MM-DD'\n\n        switch(preset){\n            case 'Today':\n                values = [date.format(format)]\n                break;\n\n            case 'Yesterday':\n                date.subtract('1', 'day')\n                values = [date.format(format)]\n                break;\n\n            case '30 Days':\n                values = [date.clone().subtract('30', 'day').format(format), date.format(format)]\n                break;\n\n            case 'This Month':\n                values = [date.startOf('month').format(format), date.endOf('month').format(format)]\n                break;\n\n            case 'This Year':\n                values = [date.startOf('year').format(format), date.endOf('year').format(format)]\n                break;\n        }\n\n        this.value = values\n        this.close()\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-date')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-view-slider', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        range-slider {\n            width: 100%;\n            margin: 1em 1.5em .5em 1.5em;\n        }\n    `}\n\n    constructor(opts={}){\n        super()\n        \n        this.opts = Object.assign({\n            range: false,\n            min: 0,\n            max: 100,\n            step: 1,\n            label: 'show',\n            width: '160px',\n            prefix: '',\n            suffix: ''\n        }, opts)\n    }\n\n    render(){return html`\n        \n        <b-btn text @click=${this.clearVal}>Clear</b-btn>\n\n        <b-hr></b-hr>\n\n        <range-slider \n            style=\"width:${this.opts.width}\"\n            @change=${this.onChange}\n            ?range=${this.opts.range}\n            min=${this.opts.min}\n            max=${this.opts.max}\n            step=${this.opts.step}\n            label=${this.opts.label}\n            .value=${this.value}\n        ></range-slider>\n    `}\n\n    clearVal(){\n        this.value = null\n        \n        this.shadowRoot.querySelector('range-slider').reset()\n        this.close()\n    }\n\n    onChange(e){\n        this.value = e.target.value\n        // this.close()\n    }\n\n    get value(){\n\n        if( this.__value === undefined )\n            this.__value = this.filter.value || null\n\n        return this.__value\n    }\n\n    set value(val){\n        // let oldVal = this.value\n        this.__value = val\n        // this.requestUpdate('value', oldVal)\n    }\n\n    get label(){\n        let val = this.value\n        \n        if( val === null || val === '' ) return ''\n\n        let str = Array.isArray(val) ? (val[0] == val[1] ? val[0] : val.join('-')) : val\n\n        return this.opts.prefix+str+this.opts.suffix\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-slider')","import Menu from '../../menu'\nimport Dialog from '../../dialog'\nimport Popover from '../../popover'\nimport titleize from '../../../util/titleize'\nimport Fuse from 'fuse.js'\nimport Emitter from 'component-emitter'\nimport FilterViewDate from '../toolbar/filter-view-date'\nimport FilterViewSlider from '../toolbar/filter-view-slider'\n\nconst CustomViews = {\n    'date': FilterViewDate,\n    'slider': FilterViewSlider\n}\n\n// do NOT include '0' or 'false' as unset values\nconst unsetValues = [undefined, null, '']\n\nconst defaultSearch = model => {\n    let data = {};\n    ['id', 'title', 'name', 'label', 'file', 'dir'].forEach(key=>{\n        if( model.has !== undefined ){\n            if( model.has(key) )\n                data[key] = model.get(key)\n        }else if( model[key] !== undefined )\n            data[key] = model[key]\n    })\n    return data;\n};\n\nconst defaultFilterby = (model, val, key) => {\n    if( Array.isArray(val) )\n        return val.includes(model.get(key))\n    else\n        return val == model.get(key)\n};\n\nexport default class Filters extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':filters' }\n\n    reset(){\n        this.queuing = false\n        let resetData = {}\n        this.map(filter=>{\n            resetData[filter.key] = filter.defaultVal\n        })\n        this.value(resetData)\n    }\n\n    value(key, val){\n        // first time getting value, get it from local storage\n        if( this.__value === undefined ){\n            this.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        // SETTING\n        if( val !== undefined || typeof key == 'object' ){\n\n            this.lastChanged = new Date().getTime()\n            \n            // may be setting more than one value\n            let changes = typeof key == 'object' ? key : {[key]:val}\n            let didChange = []\n\n            for( let k in changes){\n                \n                let changeFrom = this.__value[k]\n                let changeTo = changes[k]\n\n                // is the selected value effectively \"unset\" (`multi` filters will be an array: `[null]` )\n                if( [null, undefined].includes(changeTo)\n                || (Array.isArray(changeTo) && [null, undefined].includes(changeTo[0]) ) )\n                    delete this.__value[k]\n                else\n                    this.__value[k] = changeTo\n\n                // converting to JSON string so we can compare arrays\n                if( JSON.stringify(this.__value[k]) != JSON.stringify(changeFrom) ){\n                    didChange.push(k)\n                }else{\n                    delete changes[k]\n                }\n            }\n            \n            if( this.key )\n                localStorage.setItem(this._storeKey, JSON.stringify(this.__value))\n\n            if( didChange.length > 0 ){\n                // emit a change on each filter\n                didChange.forEach(k=>{\n                    this.get(k).emit('change', val)    \n                })\n\n                if( this.queuing )\n                    this.queuedChanges = changes\n                else\n                    this.emit('change', changes)\n            }\n\n        // GETTING\n        }else{\n            return key ? this.__value[key] : this.__value\n        }\n    }\n\n    get queuing(){return this.__queue || false }\n    set queuing(val){\n        this.__queue = Boolean(val)\n\n        if( !this.queuing && this.queuedChanges ){\n            this.emit('change', this.queuedChanges)\n            this.queuedChanges = null\n        }\n    }\n\n    get queuedChanges(){ return this.__queuedChanges }\n    set queuedChanges(changes){\n        if( !changes ){\n            delete this.__queuedChanges\n            this.emit('queuing', false)\n            return\n        }\n\n        this.__queuedChanges = Object.assign((this.__queuedChanges || {}), changes)\n\n        this.emit('queuing', Object.keys(this.__queuedChanges).length )\n    }\n\n    use(filters){\n        \n        if( filters == this.__lastFilters )\n            return\n\n        this.__lastFilters = filters\n\n        this.forEach(filter=>delete filter.parent)\n        this.clear()\n\n        for( let key in filters ){\n\n            if( key == 'search' ){\n                this.searchOptions = filters[key]\n                continue\n            }\n\n            let filter = new Filter(key, filters[key])\n            filter.parent = this\n            this.set(key, filter)\n        }\n\n        this.lastChanged = new Date().getTime()\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n    set searchOptions(opts){\n        if( typeof opts == 'object' )\n            this.__searchOptions = opts\n    }\n    \n    get searchOptions(){\n        return Object.assign({\n            data: defaultSearch,\n            includeMatches: true,\n            minMatchCharLength: 3,\n            threshold: 0.2,\n            location: 0,\n            distance: 100,\n            placeholder: 'Search',\n            delay: 0\n        }, this.__searchOptions||{})\n    }\n\n    get showSearch(){\n        return typeof this.searchOptions.data == 'function'\n    }\n\n    filterByTerm(data){\n        return new Promise(resolve=>{\n            \n            let searchOptions = Object.assign({}, this.searchOptions)\n            let keys = searchOptions.keys\n\n            data.forEach(m=>{\n                m.searchMatches = {}\n            })\n\n            if( !this.term \n            || !searchOptions.data\n            || this.term.length < searchOptions.minMatchCharLength )\n                return resolve(data)\n\n            data.forEach(m=>{\n                m._fuseSearch=searchOptions.data(m)\n\n                // no search option keys set yet, so set them automatically\n                if( !keys )\n                    keys = Object.keys(m._fuseSearch)\n            })\n\n            // prefix all keys with `_fuseSearch.` so the data is searched properly\n            // keys can be an array of strings or objects with name/weight\n            if( keys )\n            searchOptions.keys = keys.map(key=>{\n                if( typeof key == 'string' )\n                    return '_fuseSearch.'+key\n                \n                let newKey = Object.assign({}, key)\n                newKey.name = '_fuseSearch.'+newKey.name\n                return newKey\n            })\n\n            let fuse = new Fuse(data, searchOptions)\n            data = fuse.search(this.term)\n\n            // reformat to array of models\n            if( searchOptions.includeMatches )\n                data = data.map(d=>{\n                    d.item.searchMatches = {}\n                    d.matches.forEach(m=>{\n                        d.item.searchMatches[m.key.replace('_fuseSearch.', '')] = m.value\n                    })\n                    return d.item\n                })\n\n            resolve(data)\n        })\n    }\n\n    async filter(data){\n        let filters = this.map(filter=>filter)\n\n        // apply each filter, waiting for the first one to finish before moving on to the next filter\n        return filters.reduce((promise, filter) => {\n            return promise.then(data=>filter.filterData(data));\n        }, Promise.resolve(data))\n\n    }\n\n    needsDatabaseFetch(changes){\n        for( let key in changes ){\n            if( this.get(key).isDB )\n                return true\n        }\n        return false\n    }\n\n}\n\n/*\n    Filter\n*/\nexport class Filter {\n\n    constructor(key, attrs){\n        this.key = key\n        this.attrs = attrs\n    }\n\n    get values(){\n        // TODO: implement \"context\" for function?\n        let values = this.attrs.values\n        values = typeof values == 'function' ? values.call(this.parent.list) : values\n\n        values = values.map(v=>{\n            if( typeof v == 'string' && !['divider'].includes(v) )\n                v = {label: v, val: v}\n\n            // make \"unset\" values uniform\n            if( typeof v == 'object' && unsetValues.includes(v.val) ){\n                v.val = null\n                v.clearsAll = true\n            }\n\n            return v\n        })\n\n        return values\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get icon(){\n        return this.attrs.icon || null\n    }\n\n    get filterBy(){\n        if( !this.attrs.filterBy && this.isCustomView && this.customView.filterBy )\n            return this.customView.filterBy\n\n        return this.attrs.filterBy || defaultFilterby\n    }\n\n    // is a database filter\n    get isDB(){\n        return this.attrs.db === true\n    }\n\n    get isCustomView(){\n        return !!this.attrs.view\n    }\n\n    get isActive(){\n        let val = this.isMulti ? this.value&&this.value[0] : this.value\n        return !unsetValues.includes(val)\n    }\n\n    get isMulti(){\n        return this.attrs.multi === true\n    }\n\n    get value(){\n        return this.parent.value(this.key)\n    }\n\n    set value(val){\n        this.parent.value(this.key, val)\n    }\n\n    get defaultVal(){\n        if( this.attrs.defaultVal ) return this.attrs.defaultVal\n        \n        if( this.isCustomView )\n            return this.customView.defaultVal ? this.customView.defaultVal : null\n\n        let first = this.values[0]\n        return first ? first.val : null\n    }\n\n    get valueLabel(){\n        let val = this.value\n\n        if( this.isCustomView ){\n            let view = this.customView\n            return view ? view.label : 'UNSUPORRTED'\n        }\n\n        let matchedVal = this.values.filter(v=>{\n            if( typeof v == 'string' || v.divider || v.text ) return false\n            // return v.val==val\n            return Array.isArray(val) ? val.includes(v.val) : v.val==val\n        })\n        return matchedVal ? matchedVal.map(f=>f.label).join(', ') : val\n    }\n\n    async showMenu(el){\n\n        if( this.isCustomView  )\n            return this.showCustomView(el)\n\n        let selected = await new Menu(this.values, {\n            selected: this.value,\n            multiple: this.isMulti\n        }).popover(el, {\n            maxHeight: this.attrs.maxHeight || '60vh'\n        })\n\n        let oldVal = this.value\n\n        if( selected === false || selected.length == 0  ) return\n            // this.value = null\n        else if( Array.isArray(selected))\n            this.value = selected.map(s=>s.val)\n        else\n            this.value = selected.val\n    }\n\n    get customView(){\n        let viewName = this.attrs.view\n        let View = null\n\n        if( !this._customView ){\n\n            if( CustomViews[viewName] ){\n                View = CustomViews[viewName]\n            }else if( typeof viewName == 'string' ) {\n                View = customElements.get(viewName)\n            }else if( typeof viewName == HTMLElement ){\n                View = viewName\n            }\n\n            if( View ){\n                View.prototype.close = function(){\n                    this.popover._close() // to trigger onClose\n                }\n                this._customView = new View((this.attrs.viewOpts||{}))\n                this._customView.filter = this\n            }\n        }\n\n        return this._customView\n    }\n\n    async showCustomView(el){\n\n        if( !this.customView )\n            return Dialog.warn({msg:`${this.key}: unsupported view`}).popover(el)\n        \n        let onClose = _=>{\n            this.value = this.customView.value\n        }\n        \n        new Popover(el, this.customView, {\n            onClose: onClose\n        })\n    }\n\n    filterData(data){\n        return new Promise(resolve=>{\n\n            // pass through the data unchanged if any of these are met\n            if( !this.isActive ) return resolve(data)\n            if( !this.filterBy ) return resolve(data)\n            if( this.isDB ) return resolve(data)\n\n            let val = this.value\n            data = data.filter(m=>this.filterBy.call(this.parent.list, m, val, this.key))\n            resolve(data)\n        })\n    }\n\n}\n\nEmitter(Filters.prototype)\nEmitter(Filter.prototype)","import {html} from 'lit-element'\nimport Menu from '../../menu'\nimport titleize from '../../../util/titleize'\nimport device from '../../../util/device'\nimport Emitter from 'component-emitter'\n\nexport default class Sorts extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':sort'}\n\n    get value(){\n        // first time getting value, get it from local storage\n    \tif( this.__value === undefined ){\n\t\t\tthis.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        return this.__value\n    }\n\n    set value(val){\n\n        let didChange = JSON.stringify(this.__value) != JSON.stringify(val)\n\n        this.__value = val\n\n        if( this.key ){\n            if( val == null || val == undefined )\n                localStorage.removeItem(this._storeKey)\n            else\n                localStorage.setItem(this._storeKey, JSON.stringify(val))\n        }\n\n        this.forEach(sort=>sort.selected=this.value[sort.key])\n\n        if( didChange )\n            this.emit('change', val)\n    }\n\n    use(sorts){\n\n        if( sorts == this.__lastSorts )\n            return\n\n        this.__lastSorts = sorts\n        \n        this.clear()\n\n        for( let key in sorts ){\n            let sort = new Sort(key, sorts[key])\n            sort.selected = this.value[key]\n            this.set(key, sort)\n        }\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n\tget label(){\n        let active = this.active\n        return active.length == 0 ? 'None' : active.map(sort=>sort.label).join(', ')\n\t}\n\n\tget active(){\n        let active = []\n        Object.keys(this.value).forEach(key=>{\n            if( this.get(key) )\n                active.push( this.get(key) )\n        })\n        return active\n\t}\n\n    async showMenu(el){\n\n        let oldVal = this.value\n\n        let menu = this.map(sort=>{\n            return {\n                label: sort.label,\n                val: sort.key,\n                description: sort.description,\n                desc: sort.isDesc,\n                extras: ['b-list-sort-dir-btn']\n            }\n        })\n\n        menu.push({text: html`Sorts will be applied in the order they are chosen.`})\n\n        let selected = undefined\n        menu = new Menu(menu, {\n            className: 'b-list-sort-menu',\n            multiple: true,\n\t\t\tselected: Object.keys(oldVal)\n        })\n        \n        selected = await menu.popover(el, {adjustForMobile:true})\n\n        if( selected === false ) return\n\n        // reformat selected values to what we need\n        let val = {}\n        selected.forEach(s=>val[s.val]={desc:s.desc})\n\t\tthis.value = val\n    }\n\n\tsort(data){\n        // return\n\t\tlet sorts = this.active\n\n\t\treturn new Promise(resolve=>{\n\t\t\t\n\t\t\tif( sorts.length == 0 ) return resolve(data)\n\n            data.sort(function (m1, m2) {\n\n                for( let sort of sorts ){\n\n                    let val = sort.sortCompare(m1, m2);\n\n                    // the sort compare found different values\n                    if( val !== false )\n                        return val\n                }\n\n            });\n\n\t\t\tresolve(data)\n\t\t})\t\n\t}\n\n}\n\n\nEmitter(Sorts.prototype)\n\n\nclass Sort {\n    \n    constructor(key, attrs){\n        this.key = key\n\n        if( typeof attrs == 'function' )\n            attrs = {sortBy: attrs}\n\n        this.attrs = attrs\n    }\n\n    get sortBy(){\n        return this.attrs.sortBy || (m=>m.get(this.key))\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get description(){\n        return this.attrs.description || null\n    }\n\n    get isDesc(){\n        return this.selected ? this.selected.desc : (this.attrs.desc || false )\n    }\n\n    sortCompare(m1, m2){\n        let v1 = this.sortBy(m1)\n        let v2 = this.sortBy(m2)\n\n        if( v1 > v2 ) return this.isDesc ? -1 : 1\n        if( v1 < v2 ) return this.isDesc ? 1 : -1\n\n        return false\n    }\n\n}\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            grid-area: unset !important;\n        }\n\n        .none:not(:first-child) {\n            display: none;\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: rgba(0,0,0,.4);\n        }\n\n        /* b-icon:hover {\n            cursor: pointer;\n            color: var(--primaryColor)\n        } */\n    `}\n\n    render(){return html`\n        <b-btn text class=\"sorts\" @click=${this.sortMenu}>\n            <main>\n                <b-label xs>Sort</b-label>\n\n                <div>\n                    ${this.sorts.active.map(sort=>html`\n                        <span .sort=${sort}>\n                            <b-icon name=\"${sort.isDesc?'sort-alt-down':'sort-alt-up'}\"></b-icon> ${sort.label}\n                        </span>\n                    `)}\n                    <span class=\"none\">None</span>\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.sorts.on('change', this.update)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.sorts.off('change', this.update)\n    }\n\n    // changeDir(e){\n    //     e.stopPropagation()\n    //     let sort = e.currentTarget.parentElement.sort\n    // }\n\n    sortMenu(e){\n        this.sorts.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-sort-btn')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-dir-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        b-btn {\n            margin-top: -.5em;\n            margin-bottom: -.5em;\n            margin-right: -.5em;\n        }\n\n        b-btn:hover {\n            --bgdColor: none !important;\n            --textColor: var(--primaryColor)\n        }\n    `}\n\n    firstUpdated(){\n        this.classList.add('when-active')\n    }\n\n    render(){return html`\n        <b-btn clear icon=\"${this.item.desc?'sort-alt-down':'sort-alt-up'}\" @click=${this.onClick}></b-btn>\n    `}\n\n    onClick(e){\n        e.stopPropagation()\n        this.item.desc = !this.item.desc\n        this.update()\n    }\n})\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n        }\n\n        b-btn {\n            --color: var(--toolbarTextColor);\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            grid-area: unset;\n            color: var(--toolbarTextColor);\n            /* opacity: .4; */\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn:not([active]) {\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn[active] {\n            font-weight: bold;\n        }\n    `}\n\n    render(){return html`\n        <b-btn text ?active=${this.filter.isActive} @click=${this.showMenu}>\n            <main>\n                <b-label xs>${this.filter.label}</b-label>\n                <div>\n                    ${this.filter.icon?html`<b-icon name=\"${this.filter.icon}\"></b-icon>`:''}\n                    ${this.filter.valueLabel}\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.filter.on('change', this.update)\n        // this.addEventListener('filter-changed', this.update, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.filter.off('change', this.update)\n        // this.removeEventListener('filter-changed', this.update, true)\n    }\n\n    showMenu(e){\n        this.filter.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-filter-btn')","import { LitElement, html, css } from 'lit-element'\nimport '../../form-control/form-control'\nimport '../../form-control/controls/text-field'\n\ncustomElements.define('b-list-search-bar', class extends LitElement{\n\n    static get properties(){return {\n        placeholder: {type: String}\n    }}\n\n    constructor(){\n        super()\n        this.placeholder = 'Search'\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        form-control {\n            padding: .5em .65em;\n            background: var(--searchBgd);\n            border-radius: 30px;\n            /* max-width: 140px; */\n        }\n\n        text-field {\n            min-width: 70px;\n            /* transition: 300ms; */\n        }\n\n        form-control[falsy]:not(:focus-within):not(:hover){\n            background: none;\n        }\n\n        form-control[falsy]:not(:focus-within){\n            cursor: pointer;\n        }\n\n        form-control[falsy]:not(:focus-within) text-field {\n            height: 1em;\n            overflow: hidden;\n            min-width: 0;\n            width: 0;\n            margin-right: -.5em;\n        }\n\n        b-icon {\n            color: #444;\n            margin-right: .5em;\n        }\n    `}\n\n    render(){return html`\n        <form-control>\n            <text-field placeholder=\"${this.placeholder}\" bubble-keypress single-line></text-field>\n            <b-icon @click=${this.focus} name=\"search\" slot=\"prefix\"></b-icon>\n        </form-control>\n    `}\n\n    focus(){\n        this.shadowRoot.querySelector('form-control').focus()\n    }\n\n    get value(){\n        this.textField = this.textField || this.shadowRoot.querySelector('text-field')\n        return this.textField.currentValue\n    }\n\n})\n\nexport default customElements.get('b-list-search-bar')","import { LitElement, html, css } from 'lit-element'\nimport Popover from '../../popover'\nimport './sort-btn'\nimport './sort-dir-btn'\nimport './filter-btn'\nimport './search'\n\ncustomElements.define('b-list-toolbar', class extends LitElement{\n\n    static get properties(){return {\n        count: {type: Number},\n        queuing: {type: Number}\n    }}\n\n    constructor(){\n        super()\n        this.count = 0\n\n        this.onFilterQueuing = this.onFilterQueuing.bind(this)\n        this.onFilterChange = this.onFilterChange.bind(this)\n    }\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            align-items: center;\n            min-width: 0;\n        }\n\n        [hidden] { display: none; }\n\n        b-list-sort-btn {\n            flex-shrink: 0;\n        }\n\n        .filters {\n            display: flex;\n            align-items: center;\n            overflow-y: auto;\n            overflow: -moz-scrollbars-none;\n            flex: 1;\n        }\n\n        .filters::-webkit-scrollbar { width: 0 !important; height: 0 !important; }\n\n        b-list-sort-btn + .filters {\n            border-left: solid 2px rgba(0,0,0,.1);\n            margin-left: .25em;\n            padding-left: .25em;\n        }\n\n        .after {\n            margin-left: auto;\n            display: flex;\n            align-items: center;\n        }\n\n        .count {\n            align-self: stretch;\n            display: flex;\n            align-items: center;\n            border-right: 2px solid rgba(0, 0, 0, 0.1);\n            padding: 0 .75em 0 .25em;\n            margin-right: .25em;\n        }\n\n        [icon='erase'] { display: none; }\n        b-list-filter-btn[active] ~ [icon=\"erase\"] {\n            display: inline-block\n        }\n\n        b-list-filter-btn {\n            flex-shrink: 0;\n        }\n\n        .controls {\n            display: inline-grid;\n        }\n\n        .controls > b-icon {\n            font-size: .8em;\n            padding: .2em .35em;\n            color: rgba(0, 0, 0, 0.4);\n        }\n\n        .controls > b-icon:hover {\n            color: #333;\n        }\n    `}\n\n    render(){return html`\n        <slot name=\"before\"></slot>\n\n        <div class=\"count\">${this.count}</div>\n\n        ${!this.sorts?'':html`\n            <b-list-sort-btn .sorts=${this.sorts}></b-list-sort-btn>\n        `}\n        \n        ${!this.filters?'':html`\n        <div class=\"filters\">\n\n            <!-- <div class=\"controls\">\n                <b-icon name=\"layers\" text></b-icon>\n                <b-icon name=\"erase\" text></b-icon>\n            </div> -->\n\n            <b-btn icon=\"layers\" ?hidden=${!this.queuing} title=\"Apply queued filters\" text\n                @click=${this.applyQueuedFilters}>${this.queuing}</b-btn>\n            \n            ${this.filters.map(filter=>html`\n                <b-list-filter-btn ?active=${filter.isActive} .filter=${filter}></b-list-filter-btn>\n            `)}\n            \n            <b-btn color=\"hover-red\" title=\"Clear filters\" icon=\"erase\" text @click=${this.resetFilters}></b-btn>\n            \n        </div>\n        `}\n        \n        <div class=\"after\">\n\n            ${!this.filters||!this.filters.showSearch?'':html`\n            <b-list-search-bar @keydown=${this.onKeyDown} placeholder=${this.filters.searchOptions.placeholder}></b-list-search-bar>\n            `}\n\n            <slot name=\"refresh-btn\"></slot>\n\n            <slot name=\"after\"></slot>\n        </div>\n    `}\n\n    applyQueuedFilters(){\n        this.filters.queuing = false\n    }\n\n    resetFilters(){\n        this.filters.reset()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        if( this.filters ){\n            this.filters.on('queuing', this.onFilterQueuing)\n            this.filters.on('change', this.onFilterChange)\n        }\n        \n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.filters ){\n            this.filters.off('queuing', this.onFilterQueuing)\n            this.filters.off('change', this.onFilterChange)\n        }\n    }\n\n    onFilterQueuing(length){\n        this.queuing = length\n    }\n\n    onFilterChange(){\n        this.update()\n    }\n\n    // not used, testing idea\n    openOver(el, opts){\n        new Popover(el, this, opts)\n    }\n\n    onKeyDown(e){\n        let target = e.target\n        let ts = this.filters.searchOptions.delay\n\n        clearTimeout(this._keydownTimeout)\n        this._keydownTimeout = setTimeout(_=>{\n\n            let term = target.value\n\n            if( term == this.filters.term ) return\n\n            this.filters.term = term\n\n            this.dispatchEvent(new CustomEvent('filter-term-changed', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    term: term\n                }\n            }))\n\n        }, ts)\n    }\n\n})\n\nexport default customElements.get('b-list-toolbar')","import { LitElement, html, css } from 'lit-element'\nimport '../../elements/empty-state'\n\ncustomElements.define('b-infinite-list', class extends HTMLElement {\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n    `}\n    \n    constructor(){\n        super()\n        this.pageAt = 0\n        this.threshold = 400\n    }\n    \n    connectedCallback(){\n        this.addEventListener('scroll', this.onScroll, true)\n        this.getContent()\n    }\n\n    disconnectedCallback(){\n        this.removeEventListener('scroll', this.onScroll, true)\n    }\n\n    async reset(){\n        this.pageAt = 0\n        this.scrollTop = 0\n        this.prevModel = null\n        this.innerHTML = ''\n        \n        await this.getContent()\n    }\n\n    onScroll(){\n\n        let delta = this.scrollHeight - this.scrollTop - this.offsetHeight\n        let down = !this._scrollDelta || delta < this._scrollDelta\n\n        this._scrollDelta = delta\n\n        if( !down || delta == 0 ) return\n        \n        if( delta <= this.threshold )\n            this.getContent()\n    }\n\n    async getContent(){\n        \n        if( !this.dataSource ) return\n\n        if( this._fetching ) return;\n\n        let pageAt = this.pageAt\n\n        this._fetching = await this.dataSource.fetch(pageAt).then(this.addContent.bind(this))\n        this._fetching = null\n\n        if( pageAt == 0 ){\n            this.dispatchEvent(new CustomEvent('content-changed',{\n                detail: {data: this.dataSource},\n                bubbles: true, \n                composed: true\n            }))\n        }\n    }\n\n    get rowElement(){return this.getAttribute('row') || 'div'}\n    get emptyElement(){return this.getAttribute('empty') || 'b-empty-state'}\n\n    addContent(models){\n        \n        this.pageAt += models.length\n\n        if( this.pageAt == 0 ){\n            this.emptyView = this.emptyView || document.createElement(this.emptyElement)\n            this.emptyView.dataSource = this.dataSource\n            let term = this.dataSource.filters&&this.dataSource.filters.term\n            this.emptyView.value = term ? `No results for ${term}` : (this.getAttribute('placeholder') || 'No results')\n            this.appendChild(this.emptyView)\n            return \n        }\n\n        models.forEach(model=>{\n\n            let divider = this.divider && this.divider(this.prevModel, model)\n            if( divider ){\n                this.appendChild(divider)\n            }\n\n            let el = document.createElement(this.rowElement)\n            el.model = model\n            this.appendChild(el)\n            this.prevModel = model\n        })\n    }\n\n})\n\nexport default customElements.get('b-infinite-list')","import { LitElement, html, css } from 'lit-element'\nimport DataSource from './data/source'\nimport Filters from './data/filters'\nimport Sorts from './data/sorts'\nimport './toolbar'\nimport './infinite-list'\nimport '../../elements/spinner-overlay'\n\n\ncustomElements.define('b-list', class extends LitElement {\n\n    constructor(){\n        super()\n\n        this.onKeydown = this.onKeydown.bind(this)\n        this.onKeyup = this.onKeyup.bind(this)\n        this.divider = this.divider.bind(this)\n    }\n\n    get coll(){ return this.__coll }\n    set coll(coll){\n        let didChange = !!this.__coll && this.__coll != coll\n        this.__coll = coll\n        this.dataSource.coll = coll\n\n        if( didChange )\n            this.refresh() // I think this is ok to do here\n    }\n\n    set key(key){ this.__key = key }\n    get key(){\n        return this.__key || this.getAttribute('key')\n    }\n\n    get filters(){\n        if( !this.__filters )\n            this.filters = {}\n\n        return this.__filters\n    }\n    set filters(filters){\n        if( !this.__filters ){    \n            this.__filters = new Filters()\n            this.filters.key = this.key\n            this.filters.list = this\n            this.dataSource.filters = this.filters\n            this.filters.on('change', this.onFilterChange.bind(this))\n        }\n\n        this.filters.use(filters)\n    }\n\n    get sorts(){ return this.__sorts }\n    set sorts(sorts){\n        if( !this.__sorts ){\n            this.__sorts = new Sorts()\n            this.sorts.key = this.key\n            this.sorts.list = this\n            this.dataSource.sorts = this.sorts\n            this.sorts.on('change', this.onSortChange.bind(this))\n        }\n        \n        this.sorts.use(sorts)\n    }\n\n    get dataSource(){\n        if( !this.__dataSource ){\n            this.__dataSource = new DataSource(this.listOptions)\n            this.__dataSource.on('change:count', count=>{\n                this.toolbar.count = count\n            })\n        }\n        return this.__dataSource\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-rows: auto auto 1fr;\n            overflow: hidden;\n            flex: 1;\n            position: relative;\n            --searchBgd: #f5f5f5;\n        }\n\n        slot[name=\"header\"] {\n            display: block;\n        }\n\n        b-spinner-overlay {\n            --spinnerBgd: rgba(255,255,255,.5);\n            --spinnerSize: 6em;\n        }\n\n        b-list-toolbar {\n            box-shadow: rgba(0,0,0,.2) 0 0 6px;\n            padding: .25em .5em;\n            z-index: 10;\n        }\n\n        b-infinite-list {\n            display: block;\n            flex: 1;\n            overflow: auto;\n            position: relative;\n        }\n\n        b-infinite-list > [selected] {\n            position: relative;\n        }\n\n        b-infinite-list > [selected]:before {\n            position: absolute;\n            content: '';\n            border: solid 1.4em #E3F2FD;\n            border-left-width: 2em;\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n        }\n\n        contract-draft-row { /* FIXME: remove? */\n            padding: 2em;\n        }\n\n        contract-draft-row:not(:last-child) {\n            border-bottom: solid 1px rgba(0,0,0,.1);\n        }\n\n        /* .queuing-overlay {\n            display: none;\n            background: rgba(255,255,255,.8);\n            color: #888;\n            z-index: 1000;\n        }\n\n        :host([queuing]) .queuing-overlay {\n            display: flex;\n        } */\n    `}\n\n    get spinner(){\n        return this.__spinner = this.__spinner \n                            || this.querySelector('[slot=\"spinner\"]')\n                            || this.shadowRoot.querySelector('b-spinner-overlay')\n    }\n\n    render(){return html`\n        <slot name=\"spinner\">\n            <b-spinner-overlay></b-spinner-overlay>\n        </slot>\n        \n        <b-list-toolbar .filters=${this.filters} .sorts=${this.sorts} \n            @filter-term-changed=${this.onFilterTermChange}>\n            <slot name=\"toolbar:before\" slot=\"before\"></slot>\n            <slot name=\"toolbar:after\" slot=\"after\"></slot>\n            <slot name=\"toolbar:refresh\" slot=\"refresh-btn\">\n                <b-btn text pill icon=\"arrows-ccw\" @click=${this.refresh}></b-btn>\n            </slot>\n            <!-- <b-label slot=\"after\" class=\"queuing-label\">Queuing filters, release to apply</b-label> -->\n        </b-list-toolbar>\n        <slot name=\"header\"></slot>\n        <b-infinite-list\n            row=\"${this.rowElement}\"\n            empty=\"${this.emptyElement}\"\n            .divider=${this.divider}\n            .dataSource=${this.dataSource}\n        ></b-infinite-list>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        window.addEventListener('keydown', this.onKeydown, true)\n        window.addEventListener('keyup', this.onKeyup, true)\n\n        let host = this.getRootNode().host\n\n\t\tif( host ){\n            this.host = host\n            host.list = host.list || this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n\n        window.removeEventListener('keydown', this.onKeydown, true)\n        window.removeEventListener('keyup', this.onKeyup, true)\n\n        if( this.host && this.host.list == this )\n            delete this.host\n    }\n\n    onKeydown(e){\n        if( e.target !== document.body ) return\n        if( !e.metaKey && !e.ctrlKey ) return\n        this.queuing = true\n    }\n\n    onKeyup(e){\n        if( this.queuing && !this.filters.queuedChanges )\n            this.queuing =  false\n    }\n\n    get queuing(){ return this.filters && this.filters.queuing }\n    set queuing(doQueue){\n        if( !this.filters ) return\n\n        this.filters.queuing = doQueue\n\n        doQueue ? this.setAttribute('queuing', '') : this.removeAttribute('queuing')\n    }\n\n    get rowElement(){ return this.getAttribute('row') || ''}\n    get emptyElement(){ return this.getAttribute('empty') || ''}\n\n    get toolbar(){\n        return this.shadowRoot.querySelector('b-list-toolbar')\n    }\n\n    get list(){\n        return this.shadowRoot.querySelector('b-infinite-list')\n    }\n\n    divider(prevModel, model){\n\n        let divider = this.getAttribute('divider')\n        \n        divider = divider && customElements.get(divider)\n\n        if( divider && divider.shouldDisplay && divider.shouldDisplay(prevModel, model, this) ){\n            divider = new divider(prevModel, model, this)\n            divider.list = this\n            divider.model = model\n            divider.prevModel = prevModel\n            return divider\n        }\n\n        return null\n    }\n\n    async firstUpdated(){\n        this.spinner.show = true\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    async refresh(){\n        this.spinner.show = true\n        this.dataSource.reset()\n        this.list.reset()\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    async reload(){\n        this.dataSource.refilter()\n        this.list.reset()\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    async onFilterTermChange(changes){\n\n        // TODO: probably need an opt in feature\n        if( this.listOptions && this.listOptions.fetch == 'more' ){\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset()\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    async onFilterChange(changes){\n        \n        if( this.filters.needsDatabaseFetch(changes) ){\n            this.spinner.show = true\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset()\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    onSortChange(){\n        // console.log('resort');\n        this.dataSource.sort()\n        this.list.reset()\n    }\n\n})\n\nexport default customElements.get('b-list')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-of-colors', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            --grids: 1fr 1fr 1fr 1fr;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        [group=\"default\"] {\n            grid-column: 1/5;\n        }\n\n        [group=\"default\"] .colors {\n            display: grid;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        .color {\n            border: 1px solid rgba(0,0,0,.12);\n            padding: .5em;\n            /* display: flex;\n            justify-content: space-between;\n            align-items: center; */\n        }\n\n        [num=\"900\"] + [num] {\n            margin-top: .5em;\n        }\n\n        @media (max-width: 550px) {\n            :host {\n                --grids: 1fr 1fr;\n            }\n\n            [group=\"default\"] {\n                grid-column: 1/3\n            }\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        this.colors = []\n\n        for( let sheet of document.styleSheets ){\n\n            let rules = null\n\n            try{ rules = sheet.cssRules }catch(e){}\n\n            if( rules )\n            for( let rule of rules ){\n\n                if( rule.cssText.match(/:root { --color/) ){\n                    \n                    let matches = rule.cssText.match(/--.[^:)]+: (.[^;]+);/g)\n                    let colors = {}\n                    \n                    matches.map(v=>{\n\n                        let [str, name, num, color] = v.match(/--(.[^\\d(A\\d)]+)(?:-(.+))?: (.[^;]+);/)\n                        let key = name + (num?'-'+num:'')\n                        \n                        if( num ){\n                            colors[name] = colors[name] || {name: name, colors: []}\n                            colors[name].colors.push({ key, name, num, color })\n                        }else{\n                            colors['default'] = colors['default'] || {name: 'default', colors: []}\n                            colors['default'].colors.push({ key, name, num, color})\n                        }\n                            \n                    })\n\n                    this.colors = Object.values(colors)\n                }\n            }\n        }\n    }\n\n    render(){return html`\n        ${this.colors.map(g=>html`\n            <div group=\"${g.name}\">\n                <h3>${g.name}</h3>\n                <div class=\"colors\">\n                ${g.colors.map(c=>html`\n                    <div num=${c.num} key=\"${c.key}\" class=\"color\" style=\"background-color: var(--${c.key});\">\n                        <div>${c.key}</div>\n                        <!-- <b-sub>${c.num?c.color:''}</b-sub> -->\n                    </div>\n                `)}\n                </div>\n            </div>\n        `)}\n    `}\n\n})","import '../elements/icon'\nimport '../elements/btn'\nimport '../elements/spinner'\nimport '../elements/spinner-overlay'\nimport '../elements/uploader'\nimport '../elements/paper'\nimport '../elements/timer'\nimport '../elements/empty-state'\nimport '../elements/label'\nimport '../elements/avatar'\nimport '../elements/hr'\nimport '../elements/sub'\nimport '../elements/embed'\nimport '../elements/audio'\nimport '../elements/carousel'\n\nimport { LitElement, html, css } from 'lit-element';\nimport router from '../router'\nimport '../presenters/tabs'\nimport '../presenters/form-control'\nimport '../presenters/list'\nimport Panel, {Modal} from '../presenters/panel'\nimport Menu from '../presenters/menu'\nimport Dialog from '../presenters/dialog'\n\nwindow.Dialog = Dialog\n\nwindow.showMenu = async function(el, renderTo=false){\n\n    let menu = [\n        {divider: 'Group Title'},\n        {label: 'Menu Item 1', val: '1'},\n        {label: 'Menu Item 2', val: '2'},\n        {label: 'Menu Item 3', val: '3'},\n        'divider',\n        {label: 'More', menu: [\n            {label: 'Submenu 1', val: 'more-1'},\n            {label: 'Submenu 2', val: 'more-2'}\n        ], menuOpts: {popover: {align: 'right-start'}}},\n        {text: 'Look at the console after selecting a value'}\n    ]\n\n    menu = new Menu(menu)\n\n    if( renderTo ){\n        el.appendChild(menu.el)\n        menu.render()\n    }else{\n        let selected = await menu.popover(el)\n    }\n\n}\n\nshowMenu(document.querySelector('#render-menu'), true)\n\nPanel.register('view-1', ()=>html`\n    <b-panel-toolbar shadow>\n        <b-btn slot=\"right\">Right Side</b-btn>\n        <span slot=\"left\">\n            <b-hr vert></b-hr>\n            Left Content\n        </span>\n        <span slot=\"middle\"> <b-label filled>Badge</b-label></span>\n    </b-panel-toolbar>\n    <main style=\"flex:1\">\n        <b-tabs layout=\"left\">\n            <div title=\"View 1\">Try using your browser's back button</div>\n            <div title=\"View 2\">View 2 content</div>\n        </b-tabs>\n    </main>\n`, {title: 'View 1'})\n\n\ncustomElements.define('view-two', class extends LitElement{\n\n    static get styles(){return css`\n        main {\n            padding: 1em;\n            overflow: auto;\n        }\n    `}\n\n    render(){return html`\n        <b-panel-toolbar look=\"white\" noshadow>\n            <b-btn slot=\"right\" @click=${this.btnMenu}>Change Style</b-btn>\n        </b-panel-toolbar>\n        <main>\n            content\n        </main>\n    `}\n\n    async btnMenu(e){\n        let selected = await new Menu([\n            {label: 'Modal', opts:{width: '600px', height: '400px', anchor:'center'}},\n            {label: 'Drawer', opts:{width: '600px', height: '', anchor:'right'}},\n            {label: 'Drawer Left ', opts:{width: '600px', height:'', anchor:'left'}},\n            {label: 'Slide Top ', opts:{width: '100%', height:'50vh', anchor:'top'}},\n            'divider',\n            {label: 'Reset', icon: 'arrows-ccw', opts:{width: '100%', height: '100%', anchor:'right'}}\n        ]).popover(e.target, {align: 'bottom-end'})\n\n        if( selected ){\n            console.log(selected)\n            for( let key in selected.opts ){\n                console.log(key);\n                this.panel[key] = selected.opts[key]\n            }\n        }\n    }\n})\n\nPanel.register('view-2', 'view-two', {title: 'View 2'})\nPanel.register('view-2-small', 'view-two', {\n    title: 'View 2 Small',\n    width: '600px',\n    height: '400px',\n    anchor: 'center'\n})\n\ncustomElements.define('view-animate', class extends LitElement{\n\n    static get styles(){return css`\n        main {\n            padding: 1em;\n            overflow: auto;\n        }\n    `}\n\n    render(){return html`\n        <b-panel-toolbar look=\"white\" noshadow></b-panel-toolbar>\n        <main>\n            <b-btn @click=${this.animate}>bounce</b-btn>\n            <b-btn @click=${this.animate}>shake</b-btn>\n        </main>\n    `}\n\n    animate(e){\n        let fn = e.target.innerText\n        this.panel[fn]()\n    }\n})\n\nPanel.register('view-animate', 'view-animate', {\n    title: 'View Animate',\n    width: '600px',\n    height: '400px',\n    anchor: 'center'\n})\n\n\nPanel.register('view-3', 'view-two', {\n    title: 'View 3',\n    controller: 'inset',\n    width: '400px',\n    anchor: 'right'\n})\n\nwindow.openModalPanel = ()=>{\n    Modal(()=>html`\n        <b-embed url=\"https://www.youtube.com/watch?v=sK1ODp0nDbM\"></b-embed>\n    `, {closeBtn: true, width: '60vw'})\n}\n\nlet listData = []\nlet i = 0\nwhile(i++ <100){\n    listData.push({id: i, label: 'Row '+i, date: (new Date()).getTime()+(i*10000000)})\n}\n\nconst listSorts = {\n    id: {\n        label: 'ID',\n        sortBy(m){ return m.id }\n    }\n}\n\ncustomElements.define('a-list-view', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            height: 340px;\n            /* margin: -2em; */\n            border-bottom: solid 1px rgba(0,0,0,.1);\n        }\n\n        b-list {\n            height: 100%;\n            overflow: hidden;\n        }\n    `}\n\n    render(){return html`\n        <b-list\n            key=\"a-list-view\"\n            row=\"a-list-view-row\"\n            .sorts=${listSorts}\n            .coll=${listData}\n        ></b-list>\n    `}\n\n})\n\ncustomElements.define('a-list-view-row', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            padding: .5em 1em;\n        }\n    `}\n\n    render(){return html`\n        ${this.model.label}\n    `}\n\n})\n\ncustomElements.define('tab-divider', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            color: inherit;\n            margin: 1em 0 0 0;\n            padding: 1em 1.2em .5em;\n            border-top: solid 1px rgba(0,0,0,.1);\n        }\n    `}\n\n    render(){return html`\n        <b-label><slot></slot></b-label>\n    `}\n\n})\n\n\nimport utilReadme from '../util/README.md'\ncustomElements.define('b-util-info', class extends HTMLElement{\n\n    connectedCallback(){\n        this.innerHTML = utilReadme\n    }\n\n})\n\n// import formControlDocs from '../presenters/form-control/README.md'\n// document.querySelector('#form-control-docs').innerHTML = formControlDocs\n\n// import listDocs from '../presenters/list/README.md'\n// document.querySelector('#list-docs').innerHTML = listDocs\n\nimport '../helpers/colors.less'\nimport '../helpers/colors-list'\n\nwindow.dialogs = {\n    async success(el){\n        Dialog.success().modal()\n    },\n\n    async warn(el){\n        Dialog.warn({title: 'Ooops', msg: 'That is not supported'}).modal()\n    },\n\n    async error(el){\n        Dialog.error({title: 'Error', msg: 'Something went wrong'}).modal()\n    },\n\n    async errorPopover(el){\n        Dialog.error({title: 'Error', msg: 'Something went wrong'}).popover(el)\n    },\n\n    async confirm(el){\n        if( await Dialog.confirm().modal() )\n            console.log('confimed')\n    },\n\n     async confirmDelete(el){\n        if( await Dialog.confirmDelete().popover(el) )\n            console.log('confimed delete')\n    }\n}\n\n\ndocument.querySelector('#dialog-success').appendChild(Dialog.success().el)\ndocument.querySelector('#dialog-warn').appendChild(Dialog.warn({title: 'Ooops', msg: 'That is not supported'}).el)\ndocument.querySelector('#dialog-error').appendChild(Dialog.error({title: 'Error', msg: 'Something went wrong'}).el)\n\nwindow.openView = el=>{\n    event.preventDefault()\n    router.goTo(el.getAttribute('href'))\n}\n\n\nrouter.start()","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","module.exports = function loadHTMLBundle(bundle) {\n  return fetch(bundle).then(function (res) {\n    return res.text();\n  });\n};\n"]}