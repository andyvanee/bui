{"version":3,"sources":["../src/lib/dom.ts","../src/lib/template.ts","../src/lib/modify-template.ts","../src/lib/directive.ts","../src/lib/part.ts","../src/lib/template-instance.ts","../src/lib/template-result.ts","../src/lib/parts.ts","../src/lib/template-factory.ts","../src/lib/render.ts","../src/lib/default-template-processor.ts","src/lit-html.ts","../src/lib/shady-render.ts","../src/lib/updating-element.ts","../src/lib/decorators.ts","../src/lib/css-tag.ts","src/lit-element.ts","../elements/icon.js","../elements/spinner.js","../elements/btn.js","../elements/btn-group.js","../elements/spinner-overlay.js","../util/ajax.js","../util/file.ext.js","../elements/uploader.js","../elements/paper.js","../elements/text.js","../elements/grid.js","../elements/carousel.js","../node_modules/dayjs/dayjs.min.js","../node_modules/dayjs/plugin/duration.js","../elements/timer.js","../elements/empty-state.js","../elements/label.js","../elements/ribbon.js","../elements/hr.js","../elements/sub.js","../node_modules/dayjs/plugin/relativeTime.js","../node_modules/dayjs/plugin/localizedFormat.js","../node_modules/dayjs/plugin/calendar.js","../helpers/day-js.js","../elements/ts.js","../elements/avatar.js","../elements/code.js","../elements/embed.js","../util/colorize-favicon.js","../util/device.js","../presenters/form/controls/range-slider.js","../util/store.js","../elements/audio.js","../src/directives/unsafe-html.ts","../src/directives/live.ts","../../src/utils/isBrowser.js","../../src/utils/debounce.js","../../src/utils/isFunction.js","../../src/utils/getStyleComputedProperty.js","../../src/utils/getParentNode.js","../../src/utils/getScrollParent.js","../../src/utils/isIE.js","../../src/utils/getOffsetParent.js","../../src/utils/isOffsetContainer.js","../../src/utils/getRoot.js","../../src/utils/findCommonOffsetParent.js","../../src/utils/getScroll.js","../../src/utils/includeScroll.js","../../src/utils/getBordersSize.js","../../src/utils/getWindowSizes.js","../../src/utils/getClientRect.js","../../src/utils/getBoundingClientRect.js","../../src/utils/getOffsetRectRelativeToArbitraryNode.js","../../src/utils/getViewportOffsetRectRelativeToArtbitraryNode.js","../../src/utils/isFixed.js","../../src/utils/getFixedPositionOffsetParent.js","../../src/utils/getBoundaries.js","../../src/utils/computeAutoPlacement.js","../../src/utils/getReferenceOffsets.js","../../src/utils/getOuterSizes.js","../../src/utils/getOppositePlacement.js","../../src/utils/getPopperOffsets.js","../../src/utils/find.js","../../src/utils/findIndex.js","../../src/utils/runModifiers.js","../../src/methods/update.js","../../src/utils/isModifierEnabled.js","../../src/utils/getSupportedPropertyName.js","../../src/methods/destroy.js","../../src/utils/getWindow.js","../../src/utils/setupEventListeners.js","../../src/methods/enableEventListeners.js","../../src/utils/removeEventListeners.js","../../src/methods/disableEventListeners.js","../../src/utils/isNumeric.js","../../src/utils/setStyles.js","../../src/utils/setAttributes.js","../../src/modifiers/applyStyle.js","../../src/utils/getRoundedOffsets.js","../../src/modifiers/computeStyle.js","../../src/utils/isModifierRequired.js","../../src/modifiers/arrow.js","../../src/utils/getOppositeVariation.js","../../src/methods/placements.js","../../src/utils/clockwise.js","../../src/modifiers/flip.js","../../src/modifiers/keepTogether.js","../../src/modifiers/offset.js","../../src/modifiers/preventOverflow.js","../../src/modifiers/shift.js","../../src/modifiers/hide.js","../../src/modifiers/inner.js","../../src/modifiers/index.js","../../src/methods/defaults.js","../../src/index.js","../presenters/popover/index.js","../node_modules/url-pattern/lib/url-pattern.js","../router/config.js","../router/route.js","../router/history-state.js","../router/history-states.js","../router/index.js","../presenters/panel/controller.js","../presenters/panel/toolbar.js","../presenters/panel/index.js","../presenters/notif/controller.js","../presenters/notif/style.js","../presenters/notif/types.js","../presenters/dialog/make-btn.js","../helpers/lit-element/events.js","../presenters/notif/snackbar.js","../presenters/notif/index.js","../presenters/dialog/dialog.js","../presenters/dialog/index.js","../node_modules/fuse.js/dist/fuse.js","../presenters/form/controls/touch-ripple.js","../presenters/form/controls/check-box.js","../presenters/form/controls/select-field.js","../presenters/menu/index.js","../presenters/tabs/view.js","../presenters/tabs/views.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../presenters/tabs/index.js","../presenters/form/handler.js","../presenters/form/control.css.js","../presenters/form/util/setValueAttrs.js","../presenters/form/util/validatePattern.js","../presenters/form/util/stopMaxLength.js","../presenters/form/util/nativeInputHelper.js","../presenters/form/control.js","../presenters/form/controls/date-picker.js","../util/htmlCleaner.js","../util/normalizeText.js","../util/math.js","../util/csvToArray.js","../util/plural.js","../util/readFile.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_baseSlice.js","../node_modules/lodash/_castSlice.js","../node_modules/lodash/_hasUnicode.js","../node_modules/lodash/_asciiToArray.js","../node_modules/lodash/_unicodeToArray.js","../node_modules/lodash/_stringToArray.js","../node_modules/lodash/_createCaseFirst.js","../node_modules/lodash/upperFirst.js","../node_modules/lodash/capitalize.js","../util/titleize.js","../util/toCSV.js","../util/wait.js","../util/index.js","../presenters/form/controls/text-field.js","../presenters/form/controls/radio-btn.js","../presenters/form/controls/radio-group.js","../presenters/form/index.js","../node_modules/component-emitter/index.js","../presenters/list/data/source.js","../presenters/list/toolbar/filter-view-date.js","../presenters/list/toolbar/filter-view-input.js","../presenters/list/toolbar/filter-view-slider.js","../presenters/list/toolbar/filter-view/search.js","../presenters/list/data/filters.js","../presenters/list/data/sorts.js","../presenters/list/data/layouts.js","../presenters/list/toolbar/sort-btn.js","../presenters/list/toolbar/sort-dir-btn.js","../presenters/list/toolbar/filter-btn.js","../presenters/list/toolbar/filters-view.js","../presenters/list/toolbar/layout-btn.js","../presenters/list/toolbar/search.js","../presenters/list/toolbar/index.js","../presenters/list/toolbar/selection-bar.js","../presenters/list/infinite-list.js","../helpers/lit-element/selectors.js","../presenters/selection/index.js","../presenters/list/index.js","../presenters/cal/day.js","../presenters/cal/index.js","../helpers/colors-list.js","../elements/icons/_all.js","../elements/file-icon.js","docs.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../node_modules/parcel-bundler/src/builtins/loaders/browser/html-loader.js"],"names":["SVG_ICONS","Map","registerIcon","name","icon","prefix","d","document","createElement","innerHTML","firstElementChild","id","replace","console","warn","get","set","hasWarnedNoIcons","warnNoIcons","IconElement","HTMLElement","register","icons","forEach","Array","isArray","styles","constructor","attachShadow","mode","temp","shadowRoot","appendChild","content","cloneNode","_setSVG","size","_svg","remove","removeAttribute","setAttribute","observedAttributes","attributeChangedCallback","oldValue","newValue","getAttribute","val","spin","toggleAttribute","Boolean","hasAttribute","customElements","define","IconList","LitElement","properties","cols","type","Number","reflect","render","from","keys","map","SpinnerElement","shadow","BtnElement","href","String","value","attribute","firstUpdated","addEventListener","window","open","location","shake","classList","add","setTimeout","SpinnerOverlayElement","show","label","connectedCallback","parentNode","host","spinner","parentElement","disconnectedCallback","AJAX","method","url","xhr","XMLHttpRequest","on","_onDone","_onAbort","_onError","eventName","cb","bind","upload","send","setRequestHeader","arguments","Promise","resolve","reject","e","resp","responseText","status","err","Error","statusText","errorCode","JSON","parse","Object","defineProperty","File","prototype","split","pop","shift","UploaderElement","disabled","accept","multiple","placeholder","files","dragging","uploading","_numUploading","_numUploaded","_fileProgress","fn","progress","length","autoUpload","stopPropagation","_inputChange","parent","getRootNode","dragenter","dragleave","dragover","drop","removeEventListener","_acceptFile","file","doAccept","find","patt","trim","RegExp","test","chooseFile","querySelector","click","selectFile","_drop","preventDefault","_selectFiles","dataTransfer","target","slice","valid","invalid","push","dispatchEvent","CustomEvent","bubbles","composed","detail","_dragover","_dragenter","hidden","types","includes","getComputedStyle","display","_dragleave","fileKey","formData","i","_formData","FormData","append","parseInt","key","requestUpdate","req","Math","round","loaded","total","uploadResp","log","error","Files","getFiles","items","webkitGetAsEntry","item","isFile","getDirItems","entries","dirEntries","all","entry","entryFile","dir","createReader","readEntries","PaperElement","color","empty","onClick","title","innerText","match","views","active","v","navTo","__active","update","currentTarget","slot","assignedElements","dayjs","extend","duration","TimerElement","time","ms","short","running","__time","oldVal","dur","delta","hours","minutes","seconds","milliseconds","_lastTS","run","clearInterval","_progressInterval","Date","getTime","setInterval","_progress","start","stop","ts","elapsedTime","padStart","format","str","join","EmptyState","Label","pos","require","relativeTime","localizedFormat","calendar","calendarDate","formats","assign","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","DayJsFormat","args","isValid","call","DayJsSet","date","unit","MONTH_NAMES","months","monthsShort","WEEKDAY_NAMES","weekdays","days","weekdaysShort","weekdaysMin","module","exports","_extraTitle","_updateInterval","__date","displayTime","fromNow","InvalidImages","BgdColors","DefaultBgd","AvatarElement","aspectRatio","bgd","initials","img","style","src","gravatar","getAttr","newVal","defaultVal","toLowerCase","num","char","charCodeAt","setProperty","width","height","guid","isConnected","offsetHeight","textContent","Embed","formattedURL","isYoutube","favicon","onImageLoaded","canvas","naturalHeight","radius","context","getContext","drawImage","globalCompositeOperation","fillStyle","arc","PI","fill","toDataURL","UA","navigator","userAgent","device","is_ios","isiOS","is_android","isAndroid","is_mobile","isMobile","isWindows","isMac","isLinux","minScreenSize","outerWidth","outerHeight","standalone","undefined","isiPad","isTouch","isiOSChrome","isElectron","electronVersion","matches","isChromeInstalledApp","isInstalled","matchMedia","isStandalone","applyClasses","html","documentElement","toggle","colorScheme","isDarkMode","isLightMode","isUnset","isSupported","onChange","_watchers","addListener","_dispatchChange","apply","colorizeFaviconComposition","localStorage","setItem","getItem","setTheme","setAccent","theme","accent","metaThemeColor","head","getCssVar","removeProperty","body","getPropertyValue","min","max","step","range","mouseUp","mouseMove","valMin","valMax","_polishVal","parseFloat","toFixed","oldMin","oldMax","s","sort","dmin","abs","dmax","_active","_mouseDown","_didChange","setPropOn","tagName","mouseDown","_len","_minLeft","_maxLeft","_trackLength","atMin","atMax","reset","which","pageX","_lastMousePos","rect","getBoundingClientRect","offset","x","y","eventScreenX","touches","screenX","mouseX","percent","clientWidth","store","data","removeItem","stringify","localStore","sessionStore","sessionStorage","forceStorageEventsLocally","formatTime","sec","ACTIVE_PLAYER","autoplay","playing","onHover","onHoverLeave","audioLoaded","audioTimeChange","pause","audioLoadError","playPause","progressSliderChanging","progressSliderChangingDone","viewSettings","audio","elapsed","remaining","loadAudio","paused","play","_loaded","clip","skipBack","skip","skipForward","amt","currentTime","setProgress","isNaN","playLastClip","playEndClips","seeking","playClip","splice","color2","background","Infinity","wasPlaying","blur","progressHover","progressHoverLeave","setClipLength","clipLength","playFirstClip","onKeyPress","shiftKey","_","metaKey","_onKeyPress","longerTimeoutBrowsers","timeoutDuration","isBrowser","indexOf","microtaskDebounce","called","then","taskDebounce","scheduled","supportsMicroTasks","isFunction","functionToCheck","getType","toString","getStyleComputedProperty","element","property","nodeType","ownerDocument","defaultView","css","getParentNode","nodeName","getScrollParent","overflow","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","noOffsetParent","offsetParent","nextElementSibling","isOffsetContainer","getRoot","node","findCommonOffsetParent","element1","element2","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","end","createRange","setStart","setEnd","commonAncestorContainer","contains","element1root","getScroll","side","upperSide","scrollingElement","includeScroll","subtract","scrollTop","scrollLeft","modifier","top","bottom","left","right","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","getClientRect","offsets","result","sizes","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","getOffsetRectRelativeToArbitraryNode","children","fixedPosition","runIsIE","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","innerHeight","isFixed","getFixedPositionOffsetParent","el","getBoundaries","popper","reference","padding","boundariesElement","boundaries","boundariesNode","isPaddingNumber","getArea","computeAutoPlacement","placement","refRect","rects","sortedAreas","a","b","area","filteredAreas","filter","computedPlacement","variation","getReferenceOffsets","state","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","hash","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","findIndex","prop","cur","obj","runModifiers","modifiers","ends","modifiersToRun","enabled","isDestroyed","options","positionFixed","flip","originalPlacement","position","isCreated","onCreate","onUpdate","isModifierEnabled","modifierName","some","getSupportedPropertyName","prefixes","upperProp","charAt","toUpperCase","toCheck","destroy","willChange","disableEventListeners","removeOnDestroy","removeChild","getWindow","attachToScrollParents","event","callback","scrollParents","isBody","passive","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","removeEventListeners","isNumeric","n","isFinite","setStyles","setAttributes","attributes","applyStyle","instance","arrowElement","arrowStyles","applyStyleOnLoad","modifierOptions","getRoundedOffsets","shouldRound","floor","noRound","referenceWidth","popperWidth","isVertical","isVariation","sameWidthParity","bothOddWidth","horizontalToInteger","verticalToInteger","isFirefox","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","devicePixelRatio","prefixedProperty","invertTop","invertLeft","arrow","isModifierRequired","requestingName","requestedName","requesting","isRequired","requested","len","sideCapitalized","altSide","opSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","getOppositeVariation","validPlacements","placements","clockwise","counter","index","concat","reverse","BEHAVIORS","flipped","placementOpposite","flipOrder","behavior","FLIP","CLOCKWISE","COUNTERCLOCKWISE","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","keepTogether","toValue","parseOffset","basePlacement","useHeight","fragments","frag","divider","search","splitRegex","ops","op","mergeWithPrevious","reduce","index2","preventOverflow","transformProp","popperStyles","transform","priority","escapeWithReference","shiftvariation","shiftOffsets","hide","bound","inner","subtractLength","Popper","requestAnimationFrame","debounce","Defaults","jquery","onLoad","Utils","global","PopperUtils","DefaultOpts","align","className","clickToggles","closeOnHide","maxHeight","maxHeightThreshold","maxWidth","overflowBoundry","onClose","onKeydown","OpenPopovers","WatchingClicks","WatchingKeyboard","WatchClicks","found","close","path","popover","view","opts","_close","dd","WatchKeyboard","_onKeydown","Popover","_view","Backbone","View","positionOver","mutationObserver","MutationObserver","viewMutated","observe","childList","subtree","clearTarget","MouseEvent","KeyboardEvent","createInvisiblePlaceholderTarget","_popoverTarget","_onPositionCreate","_onPositionUpdate","clientX","clientY","root","getSelection","getRangeAt","targetParent","parentPopover","isNested","mutationsList","observer","_updatePosition","disconnect","indx","_setDimensions","arrowH","m","h","factory","amd","UrlPattern","P","astNodeContainsSegmentsForProvidedParams","astNodeToNames","astNodeToRegexString","baseAstNodeToRegexString","concatMap","defaultOptions","escapeForRegex","getParam","keysAndValuesToObject","newParser","regexGroupCount","stringConcatMap","string","array","f","results","regex","exec","values","object","Result","rest","Tagged","tag","parser","input","tagged","sequence","parsers","pick","indexes","lazy","cached","baseMany","stringResult","atLeastOneResultRequired","endResult","parserResult","many1","concatMany1Till","firstChoice","U","wildcard","wildcardChar","optional","optionalSegmentStartChar","pattern","optionalSegmentEndChar","segmentNameCharset","named","segmentNameStartChar","escapedChar","escapeChar","token","segmentValueCharset","astNode","params","nextIndexes","sideEffects","maxIndex","arg1","arg2","groupCount","parsed","withoutWhitespace","isRegex","ast","names","TypeError","groups","config","APP_TITLE","PATH_ROOT","pathname","PATH_PREFIX","clearInvalidPath","handleInvalidRoute","normalizePath","cleansePath","Route","rootPath","isCurrent","makePath","props","matchedState","_change","oldState","newState","HistoryState","query","queryData","URLSearchParams","k","history","isBefore","isBack","isAfter","isForward","pushState","save","replaceState","toJSON","HistoryStates","storedData","states","_current","current","create","oldNum","oldStates","ROUTES","Router","currentState","requireState","_changeRoute","goTo","didMatch","route","routes","rootRoutes","PanelControllers","PanelController","for","rootPanelController","panels","overflowScrollAt","topPanel","panelOnTop","disableOverscrollClose","panel","delete","_updatePanels","onTop","panelOnTopWithRoute","updateRoutes","zIndex","wasOnTop","didBecomeActive","didBecomeInactive","hostEl","_updateRoute","app","sv","sheets","setHash","router","controller","p","quickJump","menu","description","quickJumpOpened","text","unshift","selected","Menu","PanelToolbar","look","panelController","PanelDefaults","closeBtn","anchor","animation","closeOnEsc","disableBackdropClick","RegisteredPanels","_initiate","_routeChange","registered","Panel","Modal","ActionSheet","animationTime","defaultOpts","__route","isOpen","didEnter","opened","didExit","closed","animate","effect","main","bounce","__html","toolbar","__view","__viewOriginalPlacement","replaceWith","_linkToolbar","lastElementChild","onBackdropClick","__panelController","_val","Controller","willOpen","onOpen","__title","immediate","NotifControllers","sticky","closeOnClick","autoClose","alert","failed","success","info","warning","btnPresets","cancelBtns","makeBtn","emitEvent","msg","btns","renderIcon","onBtnClick","btn","renderBtn","btnData","NOTIFS","nid","onWindowFocus","onWindowBlur","random","animationForReplace","TYPES","defaults","onMouseOver","onMouseOut","notif","existingNotif","TouchEvent","clearTimeout","_autoCloseTimeout","hasFocus","delay","onSnackbarClick","notifClass","Notif","Dialog","w","iconName","iconClass","TemplateResult","prepend","promise","_resolve","btnInfo","resolveBtn","code","activeElement","onResolve","presenter","$","$$","querySelectorAll","adjustForMobile","modal","mobileOpts","actionsheet","default","waiting","confirm","confirmDelete","prompt","suffix","required","helpText","multiline","onSubmit","control","dialog","isInvalid","textValue","focus","t","Fuse","r","o","l","c","enumerable","Symbol","toStringTag","__esModule","hasOwnProperty","iterator","configurable","writable","distance","threshold","maxPatternLength","u","caseSensitive","tokenSeparator","g","findAllMatches","minMatchCharLength","S","M","shouldSort","L","getFn","A","C","sortFn","I","score","O","tokenize","j","matchAllTokens","F","T","includeMatches","z","E","includeScore","K","verbose","J","isCaseSensitive","setCollection","list","limit","_log","_prepareSearchers","tokenSearchers","fullSearcher","_search","weights","_computeScore","_sort","_format","_analyze","record","resultMap","weight","arrayIndex","isMatch","output","matchedIndices","nScore","indices","patternAlphabet","errors","currentLocation","expectedLocation","lastIndexOf","TouchRippleElement","cssText","ripple","enter","CheckBoxElement","_onClick","relatedTarget","checked","SHOW_ALL_RESULTS_THRESHOLD","SearchTypes","registerSearchType","searchOpts","SelectFieldElement","_input","_value","_selected","assignedNodes","attrs","attr","onKeypress","toggleMenu","isEmpty","showEmpty","_isInvalid","_opts","__options","_oldSelected","labels","isFocused","focused","openMenu","menuOpts","minW","jumpNav","onSelect","autoSelectFirst","showAll","popoverOpts","optionVals","typeDelay","hasMenuIcon","SearchDefaults","row","handle","handler","cn","minWidth","maxW","matching","_promise","updateMenu","__menu","searchUrl","__origMenu","__fuse","displayMenu","__filteredMenu","searchIsOn","searchShouldShowAll","hideUnselected","keyVals","__selected","matchedIndex","mergeData","selection","toggleSelected","focusSearch","searchParse","searchIcon","searchPlaceholder","searchSpinner","__searchSpinner","fetchResults","term","_fetchingTerm","encodeURIComponent","fetch","json","appendTo","appendElement","showJumpNav","renderItem","checkbox","clearsAll","menuIcon","selections","selectOptionsChanged","extras","elName","dataTitle","didClickCheckbox","_itemMenu","isSelected","clear","menuSelected","onLetterPress","activeItem","setActiveItem","scrollIntoViewIfNeeded","__lastFilterVal","__searchTermDelay","_lastLetterPressTS","_lastLetterPress","li","didHandle","handlerArgs","scrollToSelected","modalOpts","TabView","_viewName","_viewClass","tabOptions","__icon","__id","tabView","canDisplay","isActive","didChange","TabViews","tabBar","first","fallbackView","at","last","layout","singlemenu","_resizeHandler","shouldBeSingleMenu","childNodes","_views","menuItems","offsetLeft","offsetTop","__views","renderTabBar","__customTabBar","TabBar","model","onMenuClick","menuClick","part","popoverMenu","oldTabView","onModelChange","_propagateModel","FormHandler","controlsByKey","onModelSync","onModelEdited","onEditorChange","autoGridArea","autoSave","patchSave","formHandler","bindControls","vals","controls","editors","gridArea","_updateEditors","_model","off","_editedAttrs","storedValue","has","_datePicker","setControlIfs","trigger","isEdited","editedAttrs","changed","changes","validateChange","_key","_el","formatted","patch","editAttr","ifKey","toggleTypes","toggleIf","toggleKey","allowedVal","__disabled","ed","displayIf","hideIf","disableIf","enableIf","validate","okKeys","ctrlKey","okPress","onInput","onFocus","onBlur","onKeyDown","autocomplete","testPattern","_originalVal","CONTROLS","MIRROR_CONTROL_ATTRS","FormControlElement","mutations","attributeName","_onChange","_setClassNames","dbValue","labelNodes","changeEvent","details","DatePickerElement","htmlDaysHeader","startYear","endYear","years","_yearEl","_dateEl","_monthEl","_monthDays","_setDate","_dateSelected","clone","_renderMonth","_date","day","numDays","daysInMonth","_lookingAtSelectedMonth","elSelected","_lookingAtToday","_today","nextMonth","prevMonth","pickYear","pickMonth","activeYear","scrollIntoView","year","month","_refresh","yearEl","monthEl","DEFAULT_ALLOW_TAGS","DEFAULT_ALLOW_STYLES","fontStyle","fontWeight","textAlign","DOMParser","dom","parseFromString","stripHTML","clean","keepParent","allowTags","allowStyles","cleanNode","styleName","allow","child","simplifyTextNode","decimals","divisor","pow","median","numbers","numsLen","modes","count","number","roundTo","ratio","prettyDecimal","strData","strDelimiter","hasHeader","objPattern","arrData","arrMatches","strMatchedDelimiter","strMatchedValue","comments","header","footer","foundRow","rowLengths","rowLength","line","strings","oldPlural","valAfter","wholematch","firstmatch","valBefore","globalThis","numberFormat","reader","FileReader","onload","readAsText","word","rawData","delimiter","newline","toCSV","rows","csvContent","infoArray","dataString","TextFieldElement","isMultiline","_editor","htmlCleaner","htmlClean","isPlain","_onPaste","_onKeypress","_onBlur","contentEditable","dataset","doc","nodeValue","insertText","execCommand","_updateValue","_oldVal","select","removeAllRanges","currentValue","emptyVal","pickDate","picker","_changeValue","clipboardData","getData","eventDetail","lines","div","cleanOpts","isInlineText","firstChild","Text","outerHTML","editorEl","selectNodeContents","addRange","charLen","lastChar","sel","endOffset","Event","_didPressKey","_changeDelay","RadioBtnElement","RadioGroupElement","outline","nav","onChildrenChange","radios","radio","DataSource","perPage","fetchOnLoad","_pageFetched","lastFiltered","_rawData","_filteredData","coll","hasFetched","__coll","refilter","models","applyFilters","_fetching","flatMap","_fetchFromServer","pageAt","fetchSync","filters","toPostData","sorts","merge","catch","_filtering","_sorting","finally","lastChanged","filterByTerm","_applyFiltersEventEmit","emit","defaultLabel","presets","clearDates","onEnter","usePreset","d1","d2","startOf","m1","m2","thisYear","sameYear","isSame","diffDays","diff","endOf","month1","month2","preset","clearValue","clearVal","__value","_values","onDeselect","menuForValues","valueMenu","parseResult","didClose","filterBy","CustomViews","FilterViewDate","FilterViewInput","FilterViewSlider","FilterViewSearch","unsetValues","defaultSearch","defaultFilterby","Filters","_storeKey","queuing","resetData","valueLabel","changeFrom","changeTo","isCustomView","customView","queuedChanges","__queue","__queuedChanges","use","__lastFilters","searchOptions","Filter","__searchOptions","showSearch","searchMatches","_fuseSearch","newKey","fuse","filterData","needsDatabaseFetch","isDB","db","isMulti","multi","matchedVal","noDisplay","toolbarLabel","showMenu","showCustomView","viewName","_customView","viewOpts","Sorts","unset","sortOnDB","defaultVals","desc","__lastSorts","Sort","isDesc","sortCompare","sortBy","v1","v2","Layouts","layouts","next","__layout","sortMenu","onFilterQueuing","onFilterChange","applyQueuedFilters","resetFilters","Btn","setIcon","textField","openOver","_keydownTimeout","__selection","createRenderRoot","loadContent","onScroll","andLoadContent","prevModel","getContent","addContent","scrollHeight","down","_scrollDelta","dataSource","_fetchFailed","emptyView","fetchFailed","checkNotEnoughContent","$all","$$all","ResultMap","elements","DISABLE_EVENTS","Selection","itemTagName","selectedAttr","endWhenNoResults","endOnEsc","autoScrollThreshold","autoScrollAcceleration","onBegin","onEnd","EVENTS","DOWN","UP","DRAG","SELECTED","onEventDown","onEventUp","onEventDrag","isOn","__on","begin","bindEvents","_dragging","_startItem","itemInEvent","unbindEvents","getItems","_deselect","evt","oldStart","oldEnd","startIndex","endIndex","startItem","_toggleSelect","shouldSelect","_item","_select","stopImmediatePropagation","_autoScroll","_scrolling","button","isClickEvent","autoScroll","_lastTouchItem","changedTouches","listRect","acceleration","elementFromPoint","composedPath","speed","_autoScrollSpeed","onKeyup","createRow","createEmptyElement","createDivider","__collHasBeenSetOnce","shouldFetchData","refresh","reload","__key","__filters","__sorts","onSortChange","__layouts","listOptions","__dataSource","__spinner","customStyles","onFilterTermChange","doQueue","rowElement","emptyElement","shouldDisplay","selectionOptions","isOverflow","caldate","isWeekend","isToday","oldDate","_loadDays","goToToday","toggleCollapseWeekend","colors","sheet","styleSheets","rules","cssRules","rule","Icon","fileIconColors","pdf","js","video","xml","onix","zip","jpg","jpeg","png","gif","wav","mp3","flac","m4a","excel","psd","indd","icml","ai","fileIconLabels","ext","customColors","customLabels","convertComments","tw","createTreeWalker","NodeFilter","SHOW_COMMENT","comment","nextNode","com","strs","script","eval","ret","bundleURL","getBundleURLCached","getBundleURL","stack","getBaseURL","loadBundlesLazy","bundles","LazyPromise","loadBundles","loadBundle","bundleLoaders","registerBundleLoader","loader","load","bundle","substring","bundleLoader","resolved","executor","onSuccess","onError","loadHTMLBundle","res"],"mappings":"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,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OAFsB;AAG7BvD,MAAAA,IAAI,EAAE;AAAEqD,QAAAA,IAAI,EAAEW;AAAR,OAHuB;AAI7BrB,MAAAA,IAAI,EAAE;AAACU,QAAAA,IAAI,EAAER,OAAP;AAAgBU,QAAAA,OAAO,EAAE,IAAzB;AAA+BW,QAAAA,SAAS,EAAE;AAA1C;AAJuB,KAAP;AAKxB;;AAEF,aAAW5C,MAAX,GAAmB;AAAE,WAAO,oBAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjVyB;AAiVnB;;AAEFkC,EAAAA,MAAM,GAAE;AAAE,WAAO,qBAAK;AAC1B;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAKxD,IAAL,GAAU,qBAAK,iBAAgB,KAAKA,IAAK,aAAzC,GAAsD,EAAG;AAC/E;AACA;AACA;AACA;AACA,KAXc;AAWR;;AAELuB,EAAAA,WAAW,GAAE;AACZ;AACM,SAAKvB,IAAL,GAAY,EAAZ;AACA,SAAK2C,IAAL,GAAY,KAAZ;AACN;;AAEEwB,EAAAA,YAAY,GAAE;AACV,SAAKC,gBAAL,CAAsB,OAAtB,EAA+B,MAAI;AAC/B,UAAI,KAAKL,IAAT,EACI,IAAI,KAAKtB,YAAL,CAAkB,QAAlB,KAA+B,QAAnC,EACI4B,MAAM,CAACC,IAAP,CAAY,KAAKP,IA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnIyB;AAmInB;;AAEFkC,EAAAA,MAAM,GAAE;AAAE,WAAO,qBAAK;AAC1B;AACA,KAFc;AAER;;AApJuC;;;AAwJ7CT,cAAc,CAACC,MAAf,CAAsB,SAAtB,EAAiCmK,YAAjC;;;;;;;;;AC1JA;;AAEApK,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAwB;AAEpD,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7CwB;AA6ClB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,gBAAgB,KAAKS,KAAM;AAC3B,KAFa;AAEP;;AAvD6C;;;AA0DnDlB,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCmN,UAAvC;;;;;;;;;AC/DA;;AAEe,MAAMC,KAAN,SAAoBlN,sBAApB,CAA+B;AAE1C,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B,gBAAU;AAACE,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADiB;AAE3B,eAAS;AAACF,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OAFkB;AAG3B,iBAAW;AAACF,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB;AAHgB,KAAP;AAItB;;AAEF,aAAWjC,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5LwB;AA4LlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA;AACA;AACA,KALa;AAKP;;AA3MwC;;;AA8M9CT,cAAc,CAACC,MAAf,CAAsB,SAAtB,EAAiCoN,KAAjC;;;;;;;;;AChNA;;AAEArN,cAAc,CAACC,MAAf,CAAsB,UAAtB,EAAkC,cAAcE,sBAAd,CAAwB;AAEtD,aAAWC,UAAX,GAAuB;AAAE,WAAO;AAC5BkN,MAAAA,GAAG,EAAE;AAAChN,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADuB;AAE5BU,MAAAA,KAAK,EAAE;AAACZ,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OAFqB;AAG5BM,MAAAA,MAAM,EAAE;AAACR,QAAAA,IAAI,EAAER,OAAP;AAAgBU,QAAAA,OAAO,EAAE;AAAzB;AAHoB,KAAP;AAIvB;;AAEFhC,EAAAA,WAAW,GAAE;AACT;AACA,SAAK8O,GAAL,GAAW,MAAX;AACA,SAAKpM,KAAL,GAAa,EAAb;AACA,SAAKJ,MAAL,GAAc,IAAd;AACH;;AAED,aAAWvC,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5EwB;AA4ElB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA;AACA,4BAA4B,KAAKS,KAAM;AACvC;AACA;AACA;AACA,KARa;AAQP;;AArGoD,CAA1D;;eAyGelB,cAAc,CAACpC,GAAf,CAAmB,UAAnB;;;;;;;;;;;AC3Gf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,MAAtB,EAA8B,cAAcE,sBAAd,CAAwB;AAElD,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3CwB;AA2ClB,GA7CgD,CA+ClD;;;AACAkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK,EAAZ;AAAc;;AAhD2B,CAAtD;;eAoDeT,cAAc,CAACpC,GAAf,CAAmB,MAAnB;;;;;;;;;;;ACnDf;;AAHA;AACA;AACA;AAGAoC,cAAc,CAACC,MAAf,CAAsB,OAAtB,EAA+B,cAAcE,sBAAd,CAAwB;AAEnD,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAZwB;AAYlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,KAFa;AAE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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxFwB;AAwFlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA;AACA,6BAA6B,KAAKwvB,KAAM,iBAAgB,KAAKoM,SAAU;AACvE;AACA;AACA;AACA;AACA,iCAAiC,KAAK7xB,KAAM;AAC5C;AACA;AACA;AACA;AACA;AACA,KAfa;AAeP;;AAEFylB,EAAAA,KAAK,GAAE;AACH,SAAKiL,KAAL,IAAY,KAAKA,KAAL,CAAWjL,KAAX,EAAZ;AACH;;AAEDoM,EAAAA,SAAS,CAAC54B,CAAD,EAAG;AAER,QAAI,CAAC,KAAKy3B,KAAN,IAAe,KAAKA,KAAL,CAAW7K,IAAX,CAAgBgM,SAAhB,KAA8B,IAAjD,EACI;AAEJ54B,IAAAA,CAAC,CAACsD,cAAF;AACA,SAAKm0B,KAAL,IAAY,KAAKA,KAAL,CAAW6B,eAAvB,IAAwC,KAAK7B,KAAL,CAAW6B,eAAX,CAA2BV,SAA3B,CAAqC54B,CAAC,CAACyD,MAAvC,CAAxC;AACH;;AAnIiC;;AAsItClH,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC48B,YAAzC;;eAEgB78B,cAAc,CAACpC,GAAf,CAAmB,iBAAnB;;;;;;;;;;;AC1IhB;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAEO,MAAMo/B,aAAa,GAAG;AACzB18B,EAAAA,IAAI,EAAE,EADmB;AAEzB28B,EAAAA,QAAQ,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AP,CAA2B,SAA3B,EAAsC,KAAKwqB,UAA3C,EAAuD,IAAvD;AACA,SAAKsM,eAAL,CAAqB59B,MAArB,CAA4B,IAA5B;AACA,SAAKC,eAAL,CAAqB,MAArB;AAEA,QAAImgC,SAAJ,EACI,KAAKpgC,MAAL,GADJ,KAGAyC,UAAU,CAAC,MAAI;AACX,WAAKzC,MAAL;AACH,KAFS,EAEPu+B,KAAK,CAACG,aAFC,CAAV;AAGH;;AAED,aAAWt/B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkCm/B,KAAK,CAACG,aAAc;AACtD,2CAA2CH,KAAK,CAACG,aAAc;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0BH,KAAK,CAACG,aAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3PwB;AA2PlB;;AA1kBgC;;;AA6kBtC79B,cAAc,CAACC,MAAf,CAAsB,SAAtB,EAAiCy9B,KAAjC;;eAEe19B,cAAc,CAACpC,GAAf,CAAmB,SAAnB;;;;;;;;;;;ACzsBf;;AAEA,MAAM4hC,gBAAgB,GAAG,EAAzB;AAEAx/B,cAAc,CAACC,MAAf,CAAsB,UAAtB,EAAkC,cAAcE,sBAAd,CAAwB;AAEtD;AAEA,SAAOvC,GAAP,CAAWZ,IAAI,GAAC,MAAhB,EAAuB;AAEnB,QAAIA,IAAI,IAAI,MAAR,IAAkB,CAACwiC,gBAAgB,CAACxiC,IAAD,CAAvC,EAA+C;AAC3C,UAAIm/B,UAAU,GAAG/+B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACA8+B,MAAAA,UAAU,CAAC98B,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;AACAjC,MAAAA,QAAQ,CAACsY,IAAT,CAAc7W,WAAd,CAA0Bs9B,UAA1B;AACAqD,MAAAA,gBAAgB,CAACxiC,IAAD,CAAhB,GAAyBm/B,UAAzB;AACH;;AAED,WAAOqD,gBAAgB,CAACxiC,IAAD,CAAvB;AACH;;AAED,MAAIA,IAAJ,GAAU;AACN,WAAO,KAAK+C,YAAL,CAAkB,MAAlB,IAA4B,KAAKL,YAAL,CAAkB,MAAlB,CAA5B,GAAwD2T,SAA/D;AACH;;AAED7U,EAAAA,WAAW,GAAE;AACT;;AAEA,QAAI,KAAKxB,IAAT,EAAe;AACX,UAAIwiC,gBAAgB,CAAC,KAAKxiC,IAAN,CAApB,EACIU,OAAO,CAACC,IAAR,CAAa,wDAAb,EAAuE,KAAKX,IAA5E,EADJ,KAGIwiC,gBAAgB,CAAC,KAAKxiC,IAAN,CAAhB,GAA8B,IAA9B;AACP;AACJ;;AAEDqF,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,QAAI,KAAKrF,IAAT,EACI,OAAOwiC,gBAAgB,CAAC,KAAKxiC,IAAN,CAAvB;AACP;;AAEDgF,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,QAAI,KAAKhF,IAAL,IAAa,CAACwiC,gBAAgB,CAAC,KAAKxiC,IAAN,CAAlC,EACIwiC,gBAAgB,CAAC,KAAKxiC,IAAN,CAAhB,GAA8B,IAA9B;AACP;;AAED,aAAWuB,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/FwB;AA+FlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAba;AAaP;;AAzJoD,CAA1D;;eA6JeT,cAAc,CAACpC,GAAf,CAAmB,UAAnB;;;;;;;;;;;ACjKf;;eAEe,oBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;eCvHe;AACX6hC,EAAAA,MAAM,EAAE;AACJC,IAAAA,YAAY,EAAE,KADV;AAEJC,IAAAA,SAAS,EAAE;AAFP,GADG;AAKXC,EAAAA,KAAK,EAAE,EALI;AAOXx2B,EAAAA,KAAK,EAAE;AACHnM,IAAAA,IAAI,EAAE,kBADH;AAEHoN,IAAAA,KAAK,EAAE,KAFJ;AAGH8yB,IAAAA,SAAS,EAAE;AAHR,GAPI;AAYX0C,EAAAA,MAAM,EAAE;AACJ5iC,IAAAA,IAAI,EAAE,gBADF;AAEJoN,IAAAA,KAAK,EAAE;AAFH,GAZG;AAgBXy1B,EAAAA,OAAO,EAAE;AACL7iC,IAAAA,IAAI,EAAE,YADD;AAELoN,IAAAA,KAAK,EAAE;AAFF,GAhBE;AAoBX01B,EAAAA,IAAI,EAAE;AACF9iC,IAAAA,IAAI,EAAE,cADJ;AAEFoN,IAAAA,KAAK,EAAE;AAFL,GApBK;AAwBX21B,EAAAA,OAAO,EAAE;AACL/iC,IAAAA,IAAI,EAAE,aADD;AAELoN,IAAAA,KAAK,EAAE;AAFF;AAxBE;;;;;;;;;;ACCf,MAAM41B,UAAU,GAAG;AAClB,aAAW;AAAC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,GAAL,CAASgN,MAAT,CAAjB;AACH;;AAED,MAAI0lC,KAAJ,GAAW;AACP,WAAO,KAAKE,EAAL,CAAQ,CAAR,CAAP;AACH;;AAEDA,EAAAA,EAAE,CAACloC,CAAD,EAAG;AACD,WAAOjK,KAAK,CAACqC,IAAN,CAAW,KAAKyzB,MAAL,EAAX,EAA0B7rB,CAA1B,CAAP;AACH;;AAED,MAAImoC,IAAJ,GAAU;AACN,WAAO,KAAKD,EAAL,CAAQ,KAAKvxC,IAAL,GAAU,CAAlB,CAAP;AACH;;AAED2B,EAAAA,GAAG,CAACyE,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAKtF,OAAL,CAAa,CAACyM,CAAD,EAAIlC,GAAJ,KAAUjF,IAAI,CAAC4D,IAAL,CAAUjC,EAAE,CAACwF,CAAD,EAAIlC,GAAJ,CAAZ,CAAvB;AACA,WAAOjF,IAAP;AACH;;AA5DqC;;;;ACF1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/BA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/LA;;AACA;;AACA;;AACA;;AACA;;;;AAEA1D,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErD,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3BuI,MAAAA,GAAG,EAAE;AAACrI,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OADsB;AAE3BkwC,MAAAA,MAAM,EAAE;AAACpwC,QAAAA,IAAI,EAAEW,MAAP;AAAeT,QAAAA,OAAO,EAAE;AAAxB,OAFmB;AAG3BmwC,MAAAA,UAAU,EAAE;AAACrwC,QAAAA,IAAI,EAAER,OAAP;AAAgBU,QAAAA,OAAO,EAAE;AAAzB;AAHe,KAAP;AAItB;;AAEFhC,EAAAA,WAAW,GAAE;AACT;AACA,SAAKmyC,UAAL,GAAkB,KAAlB;AACA,SAAKhoC,GAAL,GAAW,EAAX;AACA,SAAK+nC,MAAL,GAAc,KAAd;AAEA,SAAKE,cAAL,GAAsB,uBAAS,MAAI;AAC/B,WAAKD,UAAL,GAAkB,KAAKE,kBAAvB;AA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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjNwB;AAiNlB;;AAEF6yC,EAAAA,YAAY,GAAE;AAEV,QAAI,CAAC,MAAD,EAAS,OAAT,EAAkBppC,QAAlB,CAA2B,KAAKtI,YAAL,CAAkB,SAAlB,CAA3B,CAAJ,EACI,OAAO,qBAAK,aAAZ;;AAEJ,QAAI,KAAKA,YAAL,CAAkB,SAAlB,CAAJ,EAAkC;AAE9B,UAAI,CAAC,KAAK2xC,cAAV,EAA0B;AAEtB,YAAIC,MAAM,GAAGtxC,cAAc,CAACpC,GAAf,CAAmB,KAAK8B,YAAL,CAAkB,SAAlB,CAAnB,CAAb;AACA,YAAI,CAAC4xC,MAAL,EAAc,OAAO5zC,OAAO,CAAC0L,KAAR,CAAe,SAAQ,KAAK1J,YAAL,CAAkB,SAAlB,CAA6B,iBAApD,CAAP;AAEd,aAAK2xC,cAAL,GAAsB,IAAIC,MAAJ,EAAtB;AACA,aAAKD,cAAL,CAAoBnvC,IAApB,GAA2B,IAA3B;AACA,aAAKmvC,cAAL,CAAoBE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AU38B,KAAV,EAAgB;AACrB,QAAIA,KAAJ,EACC28B,OAAO,CAACj8B,MAAR,GAAiB,IAAjB,CADD,KAGCi8B,OAAO,CAACj8B,MAAR,GAAiB,KAAjB;AACD,GAZe;;AAahB2sC,EAAAA,SAAS,CAAC1Q,OAAD,EAAU38B,KAAV,EAAgB;AACxB,QAAIA,KAAJ,EACC28B,OAAO,CAACp/B,QAAR,GAAmB,IAAnB,CADD,KAGCo/B,OAAO,CAACp/B,QAAR,GAAmB,KAAnB;AACD,GAlBe;;AAmBhB+vC,EAAAA,QAAQ,CAAC3Q,OAAD,EAAU38B,KAAV,EAAgB;AACvB,QAAIA,KAAJ,EACC28B,OAAO,CAACp/B,QAAR,GAAmB,KAAnB,CADD,KAGCo/B,OAAO,CAACp/B,QAAR,GAAmB,IAAnB;AACD;;AAxBe,CAAjB;;;;;;;;;ACnUA;;eAEe,oBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;eCrhBe,CAAC6d,EAAD,EAAK7iB,GAAL,KAAW;AAEtB,MAAI,CAACA,GAAD,IAAQA,GAAG,KAAK,GAApB,EACI6iB,EAAE,CAACnjB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB,EADJ,KAGImjB,EAAE,CAACpjB,eAAH,CAAmB,OAAnB;AAEA,MAAI,CAACO,GAAL,EACA6iB,EAAE,CAACnjB,YAAH,CAAgB,UAAhB,EAA4B,EAA5B,EADA,KAGAmjB,EAAE,CAACpjB,eAAH,CAAmB,UAAnB;AAEJ,MAAI,CAACO,GAAD,IAAQ,CAAC6iB,EAAE,CAAC9iB,YAAH,CAAgB,aAAhB,CAAb,EACI8iB,EAAE,CAACnjB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB,EADJ,KAGImjB,EAAE,CAACpjB,eAAH,CAAmB,OAAnB;AAC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;AACA;;AA5M2C;;AAgN7CnkC,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsCu1C,kBAAtC;;eAEex1C,cAAc,CAACpC,GAAf,CAAmB,cAAnB;;;;;;;;;;;AC7Nf;;AACA;;;;AAEA,MAAMW,MAAM,GAAG,oBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAnLA;;AAqLA,MAAMw3C,WAAW,GAAG,UAASvzB,EAAT,EAAawzB,OAAO,GAAC,EAArB,EAAwB;AACxC,MAAI5uB,KAAK,GAAG,IAAI5f,WAAJ,CAAgB,QAAhB,EAA0B;AAClCC,IAAAA,OAAO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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC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AAClvC,EAAE,GAAC,CAAJ,KAAQ;AACnB,SAAO,IAAIxJ,OAAJ,CAAYC,OAAO,IAAE;AACxB3B,IAAAA,UAAU,CAACoa,CAAC,IAAE;AACVzY,MAAAA,OAAO;AACV,KAFS,EAEPuJ,EAFO,CAAV;AAGH,GAJM,CAAP;AAKH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPD;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;ACPA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMvO,MAAM,GAAG,oBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtIA;;AAwIA,MAAM49C,gBAAN,SAA+Bl+C,WAA/B,CAA2C;AAE1CO,EAAAA,WAAW,GAAG;AACP;AAEA,QAAIsC,MAAM,GAAG,KAAKrC,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,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C5X,MAAH,GAAU,KAAV;AACD,KALD;AAMA,SAAKvL,YAAL,CAAkB,OAAlB,EAA2BM,GAA3B;AACA;;AAED,MAAIgF,QAAJ,GAAc;AAAE,WAAO,KAAK5E,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAI4E,QAAJ,CAAahF,GAAG,GAAC,IAAjB,EAAsB;AACrBA,IAAAA,GAAG,GAAG,KAAKN,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKD,eAAL,CAAqB,UAArB,CAA1C;AACA,SAAKggD,MAAL,CAAYhhD,OAAZ,CAAoBokB,EAAE,IAAEA,EAAE,CAAC7d,QAAH,GAAYhF,GAApC;AACA;;AA9F0C;;AAkG5CK,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC++C,iBAArC;;eAEeh/C,cAAc,CAACpC,GAAf,CAAmB,aAAnB;;;;;;AClGf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/KA;;;;AAEe,MAAM0hD,UAAN,CAAiB;AAE5B9gD,EAAAA,WAAW,CAAC6xB,IAAI,GAAC,EAAN,EAAS;AAChB,SAAK3Y,KAAL;AAEA,SAAK2Y,IAAL,GAAYlsB,MAAM,CAAC0J,MAAP,CAAc;AACtB0xC,MAAAA,OAAO,EAAE,EADa;AAEtB7R,MAAAA,KAAK,EAAE,IAFe;AAGtB8R,MAAAA,WAAW,EAAE;AAHS,KAAd,EAITnvB,IAJS,CAAZ;AAKH;;AAED3Y,EAAAA,KAAK,GAAE;AACH,SAAK+nC,YAAL,GAAoB,IAApB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,EAAhB,CAHG,CAGqB;;AACxB,SAAKC,aAAL,GAAqB,EAArB,CAJG,CAIqB;;AACxB,SAAKlnC,IAAL,GAAY,EAAZ,CALG,CAKqB;AAC3B;;AAED,MAAImnC,IAAJ,CAASA,IAAT,EAAc;AACV,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,MAAL,GAAcF,IAAd;AACH;;AACD,MAAIA,IAAJ,GAAU;AAAE,WAAO,KAAKE,MAAZ;AAAmB;;AAE/B,QAAMC,QAAN,GAAgB;AACZ,SAAKN,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,KAAKE,IAAL,IAAa,KAAKA,IAAL,CAAUI,MAAvB,IAAiC,KAAKJ,IAAtC,IAA8C,EAA9D;AACA,SAAKD,aAAL,GAAqB,KAAKD,QAA1B;AACA,SAAKjnC,IAAL,GAAY,KAAKinC,QAAjB;AAEA,UAAM,KAAKO,YAAL,EAAN;AACH;;AAED,MAAIX,OAAJ,GAAa;AAAE,WAAO,KAAKlvB,IAAL,CAAUkvB,OAAjB;AAA0B;;AAEzC,QAAMh6C,MAAN,GAAc;AAEV,QAAI,KAAK46C,SAAT,EACI,MAAM,KAAKA,SAAX;AAEJ,WAAO,KAAKznC,IAAL,CAAUnT,MAAjB;AACH;;AAEDirC,EAAAA,EAAE,CAACloC,CAAD,EAAG;AAAE,WAAO,KAAKoQ,IAAL,CAAUpQ,CAAV,CAAP;AAAqB;;AAC5BgoC,EAAAA,KAAK,CAAChoC,CAAD,EAAG;AAAE,WAAO,KAAKoQ,IAAL,CAAU,CAAV,CAAP;AAAqB;;AAC/B+3B,EAAAA,IAAI,GAAE;AAAE,WAAO,KAAK/3B,IAAL,CAAU,KAAKA,IAAL,CAAUnT,MAAV,GAAiB,CAA3B,CAAP;AAAqC;;AAE7CnH,EAAAA,OAAO,CAACiH,EAAD,EAAI;AAAE,WAAO,KAAKqT,IAAL,CAAUta,OAAV,CAAkBiH,EAAlB,CAAP;AAA8B;;AAC3CzE,EAAAA,GAAG,CAACyE,EAAD,EAAI;AAAE,WAAO,KAAKqT,IAAL,CAAU9X,GAAV,CAAcyE,EAAd,CAAP;AAA0B;;AACnC+6C,EAAAA,OAAO,CAAC/6C,EAAD,EAAI;AAAE,WAAO,KAAKqT,IAAL,CAAU0nC,OAAV,CAAkB/6C,EAAlB,CAAP;AAA8B;;AAC3Cse,EAAAA,MAAM,CAACte,EAAD,EAAI;AAAE,WAAO,KAAKqT,IAAL,CAAUiL,MAAV,CAAiBte,EAAjB,CAAP;AAA6B;;AACzCqoB,EAAAA,MAAM,CAACroB,EAAD,EAAKuH,KAAK,GAAC,CAAX,EAAa;AAAE,WAAO,KAAK8L,IAAL,CAAUgV,MAAV,CAAiBroB,EAAjB,EAAqBuH,KAArB,CAAP;AAAoC;;AAEzD,QAAMyzC,gBAAN,CAAuBC,MAAvB,EAA8B;AAE1B;AACA,QAAI,KAAKT,IAAL,IAAa,KAAKA,IAAL,CAAUU,SAA3B,EAAsC;AAElC,UAAI7nC,IAAI,GAAG;AAAC60B,QAAAA,IAAI,EAAC,KAAKiT,OAAL,CAAajT,IAAb,IAAmB;AAAzB,OAAX;;AAEA,UAAI,KAAKld,IAAL,CAAUqd,KAAV,IAAmB,MAAvB,EAA+B;AAC3Bh1B,QAAAA,IAAI,CAAC4nC,MAAL,GAAcA,MAAd;AACA5nC,QAAAA,IAAI,CAAC6mC,OAAL,GAAe,KAAKA,OAApB;AACH;;AAED,UAAI,KAAKiB,OAAT,EACI9nC,IAAI,CAAC8nC,OAAL,GAAe,KAAKA,OAAL,CAAaC,UAAb,EAAf;AAEJ,UAAI,KAAKC,KAAT,EACIhoC,IAAI,CAACgoC,KAAL,GAAa,KAAKA,KAAL,CAAWx/C,KAAxB;AAEJ,YAAM,KAAK2+C,IAAL,CAAUU,SAAV,CAAoB;AACtB7nC,QAAAA,IAAI,EAACA,IADiB;AAEtBioC,QAAAA,KAAK,EAAE,IAFe;AAGtB;AACA31C,QAAAA,MAAM,EAAE;AAJc,OAApB,CAAN;AAMH;AACJ;;AAED0iC,EAAAA,KAAK,CAAC4S,MAAD,EAAQ;AACT,WAAO,KAAKH,SAAL,GAAiB,IAAI78C,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAAyB;AAEzD,UAAK88C,MAAM,IAAI,CAAV,IAAe,KAAKX,QAAL,CAAcp6C,MAAd,IAAwB,CAAxC,IACA,KAAKk6C,YAAL,IAAqBa,MAArB,IAA+B,KAAKX,QAAL,CAAcp6C,MAAd,IAAwB+6C,MAAvD,IAAiE,KAAKjwB,IAAL,CAAUqd,KAAV,IAAmB,MADxF,EACkG;AAE9F,aAAK+R,YAAL,GAAoBa,MAApB;AAEA,YAAI,KAAKjwB,IAAL,CAAUqd,KAAd,EACI,MAAM,KAAK2S,gBAAL,CAAsBC,MAAtB,EAA8BM,KAA9B,CAAoC/8C,GAAG,IAAE;AAC3CL,UAAAA,MAAM,CAACK,GAAD,CAAN;AACH,SAFK,CAAN;AAIJ,cAAM,KAAKm8C,QAAL,EAAN;AACH,OAbwD,CAezD;AACA;AACA;;;AAEA,UAAI,KAAKa,UAAT,EACI,MAAM,KAAKA,UAAX;AAEJ,UAAI,KAAKC,QAAT,EACI,MAAM,KAAKA,QAAX;AAEJ,WAAKhB,UAAL,GAAkB,IAAlB;AAEAv8C,MAAAA,OAAO,CAAC,KAAKmV,IAAL,CAAUvR,KAAV,CAAgBm5C,MAAhB,EAAwBA,MAAM,GAAC,KAAKjwB,IAAL,CAAUkvB,OAAzC,CAAD,CAAP;AACH,KA5BuB,EA4BrBwB,OA5BqB,CA4Bb/kC,CAAC,IAAE,OAAO,KAAKmkC,SA5BF,CAAxB;AA6BH;;AAEDD,EAAAA,YAAY,GAAE;AACV,WAAO,KAAKW,UAAL,GAAkB,IAAIv9C,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAEhD,UAAI,CAAC,KAAKi9C,OAAV,EAAoB,OAAOj9C,OAAO,CAAC,KAAKmV,IAAN,CAAd;;AAEpB,UAAI,KAAKgnC,YAAL,GAAoB,KAAKc,OAAL,CAAaQ,WAArC,EAAkD;AAC9C,aAAKtoC,IAAL,GAAY,MAAM,KAAK8nC,OAAL,CAAa78B,MAAb,CAAoB,KAAKg8B,QAAzB,CAAlB;AACA,cAAM,KAAKjpC,IAAL,EAAN;AACA,aAAKkpC,aAAL,GAAqB,KAAKlnC,IAA1B;AACH;;AAED,WAAKA,IAAL,GAAY,MAAM,KAAK8nC,OAAL,CAAaS,YAAb,CAA0B,KAAKrB,aAA/B,CAAlB;AAEAr8C,MAAAA,OAAO,CAAC,KAAKmV,IAAN,CAAP;AAEA,WAAKgnC,YAAL,GAAoB,IAAIlzC,IAAJ,GAAWC,OAAX,EAApB;AAEAg1B,MAAAA,YAAY,CAAC,KAAKyf,sBAAN,CAAZ;AACA,WAAKA,sBAAL,GAA8Bt/C,UAAU,CAAC,MAAI;AACzC,aAAKu/C,IAAL,CAAU,SAAV;AACH,OAFuC,EAEtC,GAFsC,CAAxC;AAKH,KAtBwB,EAsBtBJ,OAtBsB,CAsBd/kC,CAAC,IAAE,OAAO,KAAK6kC,UAtBD,CAAzB;AAuBH;;AAEDnqC,EAAAA,IAAI,GAAE;AACF,WAAO,KAAKoqC,QAAL,GAAgB,IAAIx9C,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAE9C,UAAI,CAAC,KAAKm9C,KAAV,EAAkB,OAAOn9C,OAAO,CAAC,KAAKmV,IAAN,CAAd;AAElB,WAAKA,IAAL,GAAY,MAAM,KAAKgoC,KAAL,CAAWhqC,IAAX,CAAgB,KAAKgC,IAArB,CAAlB;AAEAnV,MAAAA,OAAO,CAAC,KAAKmV,IAAN,CAAP;AAEH,KARsB,EAQpBqoC,OARoB,CAQZ/kC,CAAC,IAAE,OAAO,KAAK8kC,QARH,CAAvB;AASH;;AAtJ2B;;;AAyJhC,+BAAQxB,UAAU,CAACh7C,SAAnB;;;;;;;;;AC3JA;;AACA;;;;AAEAtE,cAAc,CAACC,MAAf,CAAsB,yBAAtB,EAAiD,cAAcE,sBAAd,CAAwB;AAErE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7DwB;AA6DlB;;AAEFC,EAAAA,WAAW,CAAC6xB,IAAI,GAAC,EAAN,EAAS;AAChB;AAEA,SAAKA,IAAL,GAAYlsB,MAAM,CAAC0J,MAAP,CAAc;AACtBuzC,MAAAA,YAAY,EAAE,GADQ;AAEtBC,MAAAA,OAAO,EAAE,IAFa,CAER;;AAFQ,KAAd,EAGThxB,IAHS,CAAZ;AAIH;;AAEDjvB,EAAAA,YAAY,GAAE;AACV,SAAKuxC,OAAL,GAAe,KAAK/zC,UAAL,CAAgBokC,gBAAhB,CAAiC,cAAjC,CAAf;AAEA,QAAI9hC,KAAK,GAAG,KAAKyiB,MAAL,CAAYziB,KAAxB;AAEA,QAAIA,KAAJ,EACI,KAAKyxC,OAAL,CAAav0C,OAAb,CAAqB,CAACokB,EAAD,EAAIla,CAAJ,KAAQka,EAAE,CAACthB,KAAH,GAASA,KAAK,CAACoH,CAAD,CAA3C;AACP;;AAED7H,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,gCAAgC,KAAK6gD,UAAW;AAChD;AACA;AACA;AACA;AACA,2FAA2F,KAAKC,OAAQ;AACxG;AACA;AACA;AACA;AACA;AACA,2FAA2F,KAAKA,OAAQ;AACxG;AACA;AACA;AACA,UAAU,KAAKlxB,IAAL,CAAUgxB,OAAV,KAAoB,KAApB,GAA0B,qBAAK;AACzC;AACA;AACA,oCAAoC,KAAKG,SAAU;AACnD,oCAAoC,KAAKA,SAAU;AACnD,oCAAoC,KAAKA,SAAU;AACnD,oCAAoC,KAAKA,SAAU;AACnD,oCAAoC,KAAKA,SAAU;AACnD;AACA,SATU,GASA,EAAG;AACb,KA3Ba;AA2BP;;AAEF,MAAItgD,KAAJ,GAAW;AACP,QAAIA,KAAK,GAAG,EAAZ,CADO,CAGP;;AACA,QAAI,CAAC,KAAKyxC,OAAV,EACI,OAAO,KAAKhvB,MAAL,CAAYziB,KAAnB;AAEJ,SAAKyxC,OAAL,CAAav0C,OAAb,CAAqBokB,EAAE,IAAE;AACrB,UAAI3X,CAAC,GAAG2X,EAAE,CAACqzB,OAAX;AACA,UAAIhrC,CAAJ,EACI3J,KAAK,CAACoG,IAAN,CAAWuD,CAAX;AACP,KAJD;AAMA,QAAI3J,KAAK,CAACqE,MAAN,IAAgB,CAApB,EACI,OAAO,IAAP;AAEJ,QAAIrE,KAAK,CAACqE,MAAN,IAAgB,CAApB,EACIrE,KAAK,GAAG,CAACA,KAAK,CAAC,CAAD,CAAN,EAAWA,KAAK,CAAC,CAAD,CAAhB,CAAR;AAEJA,IAAAA,KAAK,CAACwV,IAAN;AAEA,WAAOxV,KAAP;AACH;;AAED,MAAIA,KAAJ,CAAUvB,GAAV,EAAc;AAEV,QAAI,CAACA,GAAD,IAAQA,GAAG,CAAC4F,MAAJ,IAAc,CAA1B,EACI5F,GAAG,GAAG,CAAC,IAAD,EAAO,IAAP,CAAN;AAEJ,QAAI,OAAOA,GAAP,IAAc,QAAlB,EACIA,GAAG,GAAG,CAACA,GAAD,EAAMA,GAAN,CAAN;AAEJ,QAAIA,GAAG,CAAC4F,MAAJ,IAAc,CAAlB,EACI5F,GAAG,GAAG,CAACA,GAAG,CAAC,CAAD,CAAJ,EAASA,GAAG,CAAC,CAAD,CAAZ,CAAN;AAEJ,QAAI,KAAKgzC,OAAT,EACA,KAAKA,OAAL,CAAav0C,OAAb,CAAqB,CAACokB,EAAD,EAAIla,CAAJ,KAAQ;AACzBka,MAAAA,EAAE,CAACthB,KAAH,GAAWvB,GAAG,CAAC2I,CAAD,CAAH,IAAQ,IAAnB;AACH,KAFD;AAGH;AAED;AACJ;AACA;AACA;;;AACI,MAAIvG,KAAJ,GAAW;AAEP,QAAIpC,GAAG,GAAG,KAAKuB,KAAf;AAEA,QAAI,CAACvB,GAAL,EACI,OAAO,KAAK0wB,IAAL,CAAU+wB,YAAjB;AAEJ,QAAI,CAACK,EAAD,EAAKC,EAAL,IAAW/hD,GAAf;AACA,QAAIgzB,CAAC,GAAG,sBAAQgvB,OAAR,CAAgB,KAAhB,CAAR;AACA,QAAIC,EAAE,GAAG,oBAAMH,EAAN,CAAT;AACA,QAAII,EAAE,GAAG,oBAAMH,EAAN,CAAT;AACA,QAAII,QAAQ,GAAGF,EAAE,CAAChK,IAAH,MAAajlB,CAAC,CAACilB,IAAF,EAAb,IAAyBiK,EAAE,CAACjK,IAAH,MAAaiK,EAAE,CAACjK,IAAH,EAArD;AACA,QAAImK,QAAQ,GAAGH,EAAE,CAAChK,IAAH,MAAaiK,EAAE,CAACjK,IAAH,EAA5B,CAZO,CAcP;;AACA,QAAI6J,EAAE,IAAIC,EAAV,EAAc;AACV,UAAIE,EAAE,GAAG,oBAAMH,EAAN,CAAT;AAEA,UAAI9uB,CAAC,CAACqvB,MAAF,CAASJ,EAAT,CAAJ,EACI,OAAO,OAAP;AAEJ,UAAIK,QAAQ,GAAGtvB,CAAC,CAACuvB,IAAF,CAAON,EAAP,EAAW,MAAX,CAAf;AAEA,UAAIK,QAAQ,IAAI,CAAhB,EACI,OAAO,WAAP;AAEJ,UAAIA,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,IAAI,EAAhC,EACI,OAAOA,QAAQ,GAAC,WAAhB,CAZM,CAcV;;AACA,UAAIH,QAAJ,EACI,OAAOF,EAAE,CAAC30C,MAAH,CAAU,OAAV,CAAP;AAEJ,aAAO20C,EAAE,CAAC30C,MAAH,CAAU,QAAV,CAAP;AACH,KAlCM,CAoCP;;;AACA,QAAI20C,EAAE,CAACnzC,IAAH,MAAa,CAAb,IAAkBozC,EAAE,CAACpzC,IAAH,MAAaozC,EAAE,CAACjL,KAAH,GAAWuL,KAAX,CAAiB,OAAjB,EAA0B1zC,IAA1B,EAAnC,EAAqE;AAEjE,UAAI2zC,MAAM,GAAGR,EAAE,CAAC30C,MAAH,CAAU,KAAV,CAAb;AACA,UAAIo1C,MAAM,GAAGR,EAAE,CAAC50C,MAAH,CAAU,KAAV,CAAb;;AAEA,UAAIm1C,MAAM,IAAIC,MAAV,IAAoBN,QAAxB,EAAkC;AAE9B,YAAIK,MAAM,IAAIzvB,CAAC,CAAC1lB,MAAF,CAAS,KAAT,CAAV,IAA6B60C,QAAjC,EACI,OAAO,YAAP;AAEJ,YAAIA,QAAJ,EACI,OAAOM,MAAP;AAEJ,eAAOA,MAAM,GAAC,IAAP,GAAYR,EAAE,CAAC30C,MAAH,CAAU,IAAV,CAAnB;AACH;;AAED,UAAI60C,QAAQ,IAAIC,QAAZ,IAAwBH,EAAE,CAAC/J,KAAH,MAAc,CAAtC,IAA2CgK,EAAE,CAAChK,KAAH,MAAc,EAA7D,EACI,OAAO,WAAP,CADJ,KAEK,IAAIiK,QAAQ,IAAIC,QAAhB,EACD,OAAOK,MAAM,GAAC,KAAP,GAAaC,MAApB,CADC,KAEA,IAAIN,QAAJ,EACD,OAAOK,MAAM,GAAC,KAAP,GAAaC,MAAb,GAAoB,GAApB,GAAwBR,EAAE,CAAC50C,MAAH,CAAU,MAAV,CAA/B,CADC,KAGD,OAAOm1C,MAAM,GAAC,IAAP,GAAYR,EAAE,CAAC30C,MAAH,CAAU,IAAV,CAAZ,GAA4B,KAA5B,GAAkCo1C,MAAlC,GAAyC,IAAzC,GAA8CR,EAAE,CAAC50C,MAAH,CAAU,IAAV,CAArD;AACP,KA7DM,CA+DP;;;AACA,QAAI60C,QAAJ,EACI,OAAOF,EAAE,CAAC30C,MAAH,CAAU,OAAV,IAAmB,KAAnB,GAAyB40C,EAAE,CAAC50C,MAAH,CAAU,OAAV,CAAhC;AAEJ,WAAO20C,EAAE,CAAC30C,MAAH,CAAU,QAAV,IAAoB,KAApB,GAA0B40C,EAAE,CAAC50C,MAAH,CAAU,QAAV,CAAjC;AACH;;AAEDs0C,EAAAA,OAAO,GAAE;AACL,SAAKtxB,KAAL;AACH;;AAEDqxB,EAAAA,UAAU,GAAE;AACR,SAAKpgD,KAAL,GAAa,IAAb;AACA,SAAK+uB,KAAL;AACH;;AAEDuxB,EAAAA,SAAS,CAAC/9C,CAAD,EAAG;AACR,QAAI6+C,MAAM,GAAG7+C,CAAC,CAACyD,MAAF,CAASuD,SAAtB;AACA,QAAI0pB,MAAM,GAAG,EAAb;AACA,QAAI1lB,IAAI,GAAG,qBAAX;AACA,QAAIxB,MAAM,GAAG,YAAb;;AAEA,YAAOq1C,MAAP;AACI,WAAK,OAAL;AACInuB,QAAAA,MAAM,GAAG,CAAC1lB,IAAI,CAACxB,MAAL,CAAYA,MAAZ,CAAD,CAAT;AACA;;AAEJ,WAAK,WAAL;AACIknB,QAAAA,MAAM,GAAG,CAAC1lB,IAAI,CAACqR,QAAL,CAAc,GAAd,EAAmB,KAAnB,EAA0B7S,MAA1B,CAAiCA,MAAjC,CAAD,CAAT;AACA;;AAEJ,WAAK,SAAL;AACIknB,QAAAA,MAAM,GAAG,CAAC1lB,IAAI,CAACmoC,KAAL,GAAa92B,QAAb,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC7S,MAAnC,CAA0CA,MAA1C,CAAD,EAAoDwB,IAAI,CAACxB,MAAL,CAAYA,MAAZ,CAApD,CAAT;AACA;;AAEJ,WAAK,YAAL;AACIknB,QAAAA,MAAM,GAAG,CAAC1lB,IAAI,CAACkzC,OAAL,CAAa,OAAb,EAAsB10C,MAAtB,CAA6BA,MAA7B,CAAD,EAAuCwB,IAAI,CAAC0zC,KAAL,CAAW,OAAX,EAAoBl1C,MAApB,CAA2BA,MAA3B,CAAvC,CAAT;AACA;;AAEJ,WAAK,WAAL;AACIknB,QAAAA,MAAM,GAAG,CAAC1lB,IAAI,CAACkzC,OAAL,CAAa,MAAb,EAAqB10C,MAArB,CAA4BA,MAA5B,CAAD,EAAsCwB,IAAI,CAAC0zC,KAAL,CAAW,MAAX,EAAmBl1C,MAAnB,CAA0BA,MAA1B,CAAtC,CAAT;AACA;AAnBR;;AAsBA,SAAK/L,KAAL,GAAaizB,MAAb;AACA,SAAKlE,KAAL;AACH;;AA1QoE,CAAzE;;eA8QejwB,cAAc,CAACpC,GAAf,CAAmB,yBAAnB;;;;;;;;;;;ACjRf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,0BAAtB,EAAkD,cAAcE,sBAAd,CAAwB;AAEtE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApBwB;AAoBlB;;AAEFC,EAAAA,WAAW,CAAC6xB,IAAD,EAAM;AACb;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAEDjvB,EAAAA,YAAY,GAAE;AAEV,SAAKszB,KAAL,GAAa,KAAK91B,UAAL,CAAgB+H,aAAhB,CAA8B,cAA9B,CAAb;AAEA,QAAIzF,KAAK,GAAG,KAAKyiB,MAAL,CAAYziB,KAAxB;AAEA,QAAIA,KAAJ,EACI,KAAKwzB,KAAL,CAAWxzB,KAAX,GAAmBA,KAAnB;AACP;;AAEDT,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,qDAAqD,KAAK7C,GAAL,CAAS,aAAT,CAAwB,eAAc,KAAK2jD,OAAQ;AACxG,gCAAgC,KAAK3jD,GAAL,CAAS,UAAT,CAAqB;AACrD,oFAAoF,KAAK2kD,UAAW;AACpG;AACA,KANa;AAMP;;AAEF3kD,EAAAA,GAAG,CAAC+K,GAAD,EAAM4H,UAAU,GAAC,EAAjB,EAAoB;AACnB,QAAI5Q,GAAG,GAAG,KAAK0wB,IAAL,CAAU1nB,GAAV,CAAV,CADmB,CAGnB;;AACA,QAAIhJ,GAAG,IAAI0T,SAAX,EACI1T,GAAG,GAAG,KAAKgkB,MAAL,CAAYomB,KAAZ,CAAkBphC,GAAlB,CAAN;AAEJ,WAAOhJ,GAAG,IAAI0T,SAAP,GAAmB1T,GAAnB,GAAyB4Q,UAAhC;AACH;;AAED,MAAIrP,KAAJ,GAAW;AACP,QAAIA,KAAK,GAAG,EAAZ,CADO,CAGP;;AACA,QAAI,CAAC,KAAKwzB,KAAV,EACI,OAAO,KAAK/Q,MAAL,CAAYziB,KAAnB;AAEJ,WAAO,KAAKwzB,KAAL,CAAWxzB,KAAlB;AACH;;AAED,MAAIA,KAAJ,CAAUvB,GAAV,EAAc;AACV,QAAI,KAAK+0B,KAAT,EACI,KAAKA,KAAL,CAAWxzB,KAAX,GAAmBvB,GAAnB;AACP;AAED;AACJ;AACA;AACA;;;AACI,MAAIoC,KAAJ,GAAW;AACP,WAAO,KAAKb,KAAL,IAAc,KAAKtD,GAAL,CAAS,cAAT,EAAyB,OAAzB,CAArB;AACH;;AAED2jD,EAAAA,OAAO,GAAE;AACL,SAAKtxB,KAAL;AACH;;AAEDsyB,EAAAA,UAAU,GAAE;AACR,SAAKrhD,KAAL,GAAa,IAAb;AACA,SAAK+uB,KAAL;AACH;;AAvFqE,CAA1E;;eA2FejwB,cAAc,CAACpC,GAAf,CAAmB,0BAAnB;;;;;;;;;;;AC7Ff;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,2BAAtB,EAAmD,cAAcE,sBAAd,CAAwB;AAEvE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAXwB;AAWlB;;AAEFC,EAAAA,WAAW,CAAC6xB,IAAI,GAAC,EAAN,EAAS;AAChB;AAEA,SAAKA,IAAL,GAAYlsB,MAAM,CAAC0J,MAAP,CAAc;AACtBkI,MAAAA,KAAK,EAAE,KADe;AAEtBH,MAAAA,GAAG,EAAE,CAFiB;AAGtBC,MAAAA,GAAG,EAAE,GAHiB;AAItBC,MAAAA,IAAI,EAAE,CAJgB;AAKtB/T,MAAAA,KAAK,EAAE,MALe;AAMtB8O,MAAAA,KAAK,EAAE,OANe;AAOtB3T,MAAAA,MAAM,EAAE,EAPc;AAQtBwmC,MAAAA,MAAM,EAAE;AARc,KAAd,EASTrT,IATS,CAAZ;AAUH;;AAED5vB,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,6BAA6B,KAAK+hD,QAAS;AAC3C;AACA;AACA;AACA;AACA,2BAA2B,KAAKnyB,IAAL,CAAUxf,KAAM;AAC3C,sBAAsB,KAAK4D,QAAS;AACpC,qBAAqB,KAAK4b,IAAL,CAAUta,KAAM;AACrC,kBAAkB,KAAKsa,IAAL,CAAUza,GAAI;AAChC,kBAAkB,KAAKya,IAAL,CAAUxa,GAAI;AAChC,mBAAmB,KAAKwa,IAAL,CAAUva,IAAK;AAClC,oBAAoB,KAAKua,IAAL,CAAUtuB,KAAM;AACpC,qBAAqB,KAAKb,KAAM;AAChC;AACA,KAhBa;AAgBP;;AAEFshD,EAAAA,QAAQ,GAAE;AACN,SAAKthD,KAAL,GAAa,IAAb;AAEA,SAAKtC,UAAL,CAAgB+H,aAAhB,CAA8B,cAA9B,EAA8C+Q,KAA9C;AACA,SAAKuY,KAAL;AACH;;AAEDxb,EAAAA,QAAQ,CAAChR,CAAD,EAAG;AACP,SAAKvC,KAAL,GAAauC,CAAC,CAACyD,MAAF,CAAShG,KAAtB,CADO,CAEP;AACH;;AAED,MAAIA,KAAJ,GAAW;AAEP,QAAI,KAAKuhD,OAAL,KAAiBpvC,SAArB,EACI,KAAKovC,OAAL,GAAe,KAAK9+B,MAAL,CAAYziB,KAAZ,IAAqB,IAApC;AAEJ,WAAO,KAAKuhD,OAAZ;AACH;;AAED,MAAIvhD,KAAJ,CAAUvB,GAAV,EAAc;AACV;AACA,SAAK8iD,OAAL,GAAe9iD,GAAf,CAFU,CAGV;AACH;;AAED,MAAIoC,KAAJ,GAAW;AACP,QAAIpC,GAAG,GAAG,KAAKuB,KAAf;AAEA,QAAIvB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,EAA5B,EAAiC,OAAO,GAAP;AAEjC,QAAIuN,GAAG,GAAG7O,KAAK,CAACC,OAAN,CAAcqB,GAAd,IAAsBA,GAAG,CAAC,CAAD,CAAH,IAAUA,GAAG,CAAC,CAAD,CAAb,GAAmBA,GAAG,CAAC,CAAD,CAAtB,GAA4BA,GAAG,CAACwN,IAAJ,CAAS,GAAT,CAAlD,GAAmExN,GAA7E;AAEA,WAAO,KAAK0wB,IAAL,CAAUnzB,MAAV,GAAiBgQ,GAAjB,GAAqB,KAAKmjB,IAAL,CAAUqT,MAAtC;AACH;;AAlFsE,CAA3E;;eAsFe1jC,cAAc,CAACpC,GAAf,CAAmB,2BAAnB;;;;;;;;;;;ACxFf;;AACA;;;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,2BAAtB,EAAmD,cAAcE,sBAAd,CAAwB;AAEvE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KARwB;AAQlB;;AAEFC,EAAAA,WAAW,CAAC6xB,IAAI,GAAC,EAAN,EAAS;AAChB;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAED5vB,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,KAFa;AAEP;;AAEFkvB,EAAAA,SAAS,CAAClsB,CAAD,EAAG;AAER,QAAIA,CAAC,CAACkF,GAAF,IAAS,QAAb,EAAuB;AACnB,WAAKzH,KAAL,GAAa,KAAKyiB,MAAL,CAAYziB,KAAzB;AACA,WAAK+uB,KAAL;AACA;AACH;;AAED,SAAKqM,IAAL,CAAU3M,SAAV,CAAoBphB,IAApB,CAAyB,KAAK+tB,IAA9B,EAAoC74B,CAApC;AACH;;AAEDunC,EAAAA,QAAQ,CAACvhC,IAAD,EAAM;AAEV,SAAKi5C,OAAL,CAAap7C,IAAb,CAAkBmC,IAAlB;;AACA,SAAKvI,KAAL,GAAa,KAAKwhD,OAAlB;AAEA,SAAKpmB,IAAL,CAAUqS,KAAV;AACA,SAAKxK,KAAL;AACH;;AAEDwe,EAAAA,UAAU,CAACp5C,KAAD,EAAO;AAEb,QAAIA,KAAK,CAAChE,MAAN,IAAgB,CAAhB,IAAqBgE,KAAK,CAAC,CAAD,CAAL,CAAS5J,GAAT,IAAgB,EAAzC,EACI4J,KAAK,GAAG,EAAR;AAEJ,SAAKrI,KAAL,GAAaqI,KAAb;AAEA,QAAIA,KAAK,CAAChE,MAAN,IAAgB,CAApB,EACI,KAAK0qB,KAAL,GADJ,KAGI,KAAKkU,KAAL;AACP;;AAED,MAAIye,aAAJ,GAAmB;AACf,QAAItmB,IAAI,GAAG,EAAX;;AACA,QAAIK,QAAQ,GAAG,KAAK+lB,OAAL,CAAa9hD,GAAb,CAAiBzD,CAAC,IAAEA,CAAC,CAACwC,GAAtB,CAAf;;AAEA,QAAI,KAAK+iD,OAAL,CAAan9C,MAAb,GAAsB,CAA1B,EAA6B;AACzB+2B,MAAAA,IAAI,CAACh1B,IAAL,CAAU;AAACvF,QAAAA,KAAK,EAAE,KAAR;AAAepC,QAAAA,GAAG,EAAE,EAApB;AAAwBsuC,QAAAA,SAAS,EAAE;AAAnC,OAAV,EAAoD,SAApD;AACA3R,MAAAA,IAAI,CAACh1B,IAAL,CAAU,GAAG,KAAKo7C,OAAL,CAAa9hD,GAAb,CAAiBzD,CAAC,IAAE;AAC7BA,QAAAA,CAAC,CAACw/B,QAAF,GAAa,IAAb;AACA,eAAOx/B,CAAP;AACH,OAHY,CAAb;AAIH;;AAED,WAAO,CAACm/B,IAAD,EAAOK,QAAP,CAAP;AACH;;AAEDv7B,EAAAA,YAAY,GAAE;AAEV,SAAKshD,OAAL,GAAe,KAAK/+B,MAAL,CAAYziB,KAAZ,IAAqB,EAApC;AAEA,QAAI,CAACo7B,IAAD,EAAOK,QAAP,IAAmB,KAAKimB,aAA5B;AACA,SAAKC,SAAL,GAAiB,IAAIjmB,aAAJ,CAASN,IAAT,EAAe;AAC5Bz3B,MAAAA,QAAQ,EAAE,QADkB;AAE5B83B,MAAAA,QAAQ,EAAEA,QAFkB;AAG5BqO,MAAAA,QAAQ,EAAE,KAAK2X,UAAL,CAAgB1/C,IAAhB,CAAqB,IAArB;AAHkB,KAAf,CAAjB;AAKA,SAAKpE,WAAL,CAAiB,KAAKgkD,SAAL,CAAergC,EAAhC;AACA,SAAKqgC,SAAL,CAAepiD,MAAf;AAGA,SAAK67B,IAAL,GAAY,IAAIM,aAAJ,CAAS,EAAT,EAAa;AACrByO,MAAAA,SAAS,EAAE,GADU;AAErBJ,MAAAA,eAAe,EAAE,IAFI;AAGrBD,MAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAc/nC,IAAd,CAAmB,IAAnB,CAHW;AAIrBoqB,MAAAA,MAAM,EAAE;AACJ7qB,QAAAA,GAAG,EAAE,KAAK6tB,IAAL,CAAU7tB,GADX;AAEJsC,QAAAA,WAAW,EAAE,KAAKurB,IAAL,CAAUvrB,WAAV,IAAyB,QAFlC;AAGJZ,QAAAA,KAAK,EAAE,KAAKmsB,IAAL,CAAUyyB;AAHb;AAJa,KAAb,CAAZ;AAWA,SAAKjkD,WAAL,CAAiB,KAAKy9B,IAAL,CAAU9Z,EAA3B;AACA,SAAK8Z,IAAL,CAAU77B,MAAV;AACH;;AAEDsiD,EAAAA,QAAQ,GAAE;AACN,SAAKzmB,IAAL,IAAW,KAAKA,IAAL,CAAUqS,KAAV,EAAX;AACH;;AAED3sC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKmiC,KAAL;AACH;;AAEDA,EAAAA,KAAK,GAAE;AACHviC,IAAAA,UAAU,CAAC,MAAI;AACX,UAAG,KAAK06B,IAAR,EACI,KAAKA,IAAL,CAAU0Q,WAAV;AACP,KAHS,EAGP,GAHO,CAAV;AAIH;;AAED,MAAI9rC,KAAJ,GAAW;AAEP,QAAI,CAAC,KAAKwhD,OAAV,EACI,OAAO,KAAK/+B,MAAL,CAAYziB,KAAnB;AAEJ,WAAO,KAAKwhD,OAAL,CAAa9hD,GAAb,CAAiBzD,CAAC,IAAE;AACvB,aAAO;AAAC4E,QAAAA,KAAK,EAAE5E,CAAC,CAAC4E,KAAV;AAAiBpC,QAAAA,GAAG,EAAExC,CAAC,CAACwC;AAAxB,OAAP;AACH,KAFM,CAAP;AAGH;;AAED,MAAIuB,KAAJ,CAAUvB,GAAV,EAAc;AACV,SAAK+iD,OAAL,GAAe,CAAC/iD,GAAG,IAAE,EAAN,EAAUiB,GAAV,CAAc2jC,CAAC,IAAEpgC,MAAM,CAAC0J,MAAP,CAAc,EAAd,EAAkB02B,CAAlB,CAAjB,CAAf;;AAEA,QAAI,KAAKse,SAAT,EAAoB;AAChB,UAAI,CAACvmB,IAAD,EAAOK,QAAP,IAAmB,KAAKimB,aAA5B;AACA,WAAKC,SAAL,CAAe7W,UAAf,CAA0B1P,IAA1B,EAAgCK,QAAhC;AACH;AACJ;;AAED,MAAI56B,KAAJ,GAAW;AACP,QAAIpC,GAAG,GAAG,KAAKuB,KAAf;AAEA,QAAI,CAACvB,GAAD,IAAQA,GAAG,CAAC4F,MAAJ,IAAc,CAA1B,EACI,OAAO,GAAP;AAEJ,WAAO5F,GAAG,CAACiB,GAAJ,CAAQzD,CAAC,IAAEA,CAAC,CAAC4E,KAAb,EAAoBoL,IAApB,CAAyB,IAAzB,CAAP;AACH,GA5IsE,CA8IvE;;;AACA,MAAIoD,UAAJ,GAAgB;AACZ;AACA,WAAO,IAAP;AACH;;AAEDyyC,EAAAA,QAAQ,CAACzR,KAAD,EAAQ5xC,GAAR,EAAagJ,GAAb,EAAiB;AACrB,WAAO,KAAKzH,KAAL,CAAWmF,IAAX,CAAgBlJ,CAAC,IAAEA,CAAC,CAACwC,GAAF,IAAO4xC,KAAK,CAAC3zC,GAAN,CAAU+K,GAAV,CAA1B,CAAP;AACH;;AAtJsE,CAA3E;;eA0Je3I,cAAc,CAACpC,GAAf,CAAmB,2BAAnB;;;;;;;;;;;AC7Jf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;AAEA,MAAMqlD,WAAW,GAAG;AAChB,UAAQC,uBADQ;AAEhB,WAASC,wBAFO;AAGhB,YAAUC,yBAHM;AAIhB,YAAUC,eAJM,CAKhB;;AALgB,CAApB,EAQA;;AACA,MAAMC,WAAW,GAAG,CAACjwC,SAAD,EAAY,IAAZ,EAAkB,EAAlB,CAApB;;AAEA,MAAMkwC,aAAa,GAAGhS,KAAK,IAAI;AAC3B,MAAI74B,IAAI,GAAG,EAAX;AACA,GAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,OAAxB,EAAiC,MAAjC,EAAyC,KAAzC,EAAgDta,OAAhD,CAAwDuK,GAAG,IAAE;AACzD,QAAI4oC,KAAK,CAAC2B,GAAN,KAAc7/B,SAAlB,EAA6B;AACzB,UAAIk+B,KAAK,CAAC2B,GAAN,CAAUvqC,GAAV,CAAJ,EACI+P,IAAI,CAAC/P,GAAD,CAAJ,GAAY4oC,KAAK,CAAC3zC,GAAN,CAAU+K,GAAV,CAAZ;AACP,KAHD,MAGM,IAAI4oC,KAAK,CAAC5oC,GAAD,CAAL,KAAe0K,SAAnB,EACFqF,IAAI,CAAC/P,GAAD,CAAJ,GAAY4oC,KAAK,CAAC5oC,GAAD,CAAjB;AACP,GAND;AAOA,SAAO+P,IAAP;AACH,CAVD;;AAYA,MAAM8qC,eAAe,GAAG,CAACjS,KAAD,EAAQ5xC,GAAR,EAAagJ,GAAb,KAAqB;AACzC,MAAItK,KAAK,CAACC,OAAN,CAAcqB,GAAd,CAAJ,EACI,OAAOA,GAAG,CAACqI,QAAJ,CAAaupC,KAAK,CAAC3zC,GAAN,CAAU+K,GAAV,CAAb,CAAP,CADJ,KAGI,OAAOhJ,GAAG,IAAI4xC,KAAK,CAAC3zC,GAAN,CAAU+K,GAAV,CAAd;AACP,CALD;;AAOe,MAAM86C,OAAN,SAAsB3mD,GAAtB,CAA0B;AAErC,MAAI4mD,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK/6C,GAAf,GAAmB,UAA1B;AAAsC;;AAEvD+O,EAAAA,KAAK,CAACyc,MAAM,GAAC,EAAR,EAAW;AACZ,SAAKwvB,OAAL,GAAe,KAAf;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,SAAKhjD,GAAL,CAAS+iB,MAAM,IAAE;AACbigC,MAAAA,SAAS,CAACjgC,MAAM,CAAChb,GAAR,CAAT,GAAwBwrB,MAAM,CAACxQ,MAAM,CAAChb,GAAR,CAAN,KAAuB0K,SAAvB,GAAmC8gB,MAAM,CAACxQ,MAAM,CAAChb,GAAR,CAAzC,GAAwDgb,MAAM,CAACpT,UAAvF;AACH,KAFD;AAGA,SAAKrP,KAAL,CAAW0iD,SAAX;AACH;;AAED5mC,EAAAA,QAAQ,GAAE;AACN,QAAIpS,MAAM,GAAG,EAAb;AACA,SAAKxM,OAAL,CAAaulB,MAAM,IAAE;AACjB,UAAIA,MAAM,CAACusB,QAAX,EACItlC,MAAM,CAACtD,IAAP,CAAa,GAAEqc,MAAM,CAAC5hB,KAAM,KAAI4hB,MAAM,CAACkgC,UAAW,EAAlD;AACP,KAHD;AAKA,WAAOj5C,MAAM,CAACuC,IAAP,CAAY,KAAZ,CAAP;AACH,GArBoC,CAuBrC;;;AACAnC,EAAAA,MAAM,CAACw1C,OAAD,EAAS;AACX,SAAKt/C,KAAL,CAAWs/C,OAAX;AACH;;AAEDt/C,EAAAA,KAAK,CAACyH,GAAD,EAAMhJ,GAAN,EAAU;AACX;AACA,QAAI,KAAK8iD,OAAL,KAAiBpvC,SAArB,EAAgC;AAC5B,WAAKovC,OAAL,GAAe,KAAK95C,GAAL,IAAY1E,IAAI,CAACC,KAAL,CAAW6Q,YAAY,CAACE,OAAb,CAAqB,KAAKyuC,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACH,KAJU,CAMX;;;AACA,QAAI/jD,GAAG,KAAK0T,SAAR,IAAqB,OAAO1K,GAAP,IAAc,QAAvC,EAAiD;AAE7C,WAAKq4C,WAAL,GAAmB,IAAIx0C,IAAJ,GAAWC,OAAX,EAAnB,CAF6C,CAI7C;;AACA,UAAIgnC,OAAO,GAAG,OAAO9qC,GAAP,IAAc,QAAd,GAAyBA,GAAzB,GAA+B;AAAC,SAACA,GAAD,GAAMhJ;AAAP,OAA7C;AACA,UAAIwwC,SAAS,GAAG,EAAhB;;AAEA,WAAK,IAAItX,CAAT,IAAc4a,OAAd,EAAsB;AAElB,YAAIqQ,UAAU,GAAG,KAAKrB,OAAL,CAAa5pB,CAAb,CAAjB;AACA,YAAIkrB,QAAQ,GAAGtQ,OAAO,CAAC5a,CAAD,CAAtB,CAHkB,CAKlB;;AACA,YAAI,CAAC,IAAD,EAAOxlB,SAAP,EAAkBrL,QAAlB,CAA2B+7C,QAA3B,KACA1lD,KAAK,CAACC,OAAN,CAAcylD,QAAd,KAA2B,CAAC,IAAD,EAAO1wC,SAAP,EAAkBrL,QAAlB,CAA2B+7C,QAAQ,CAAC,CAAD,CAAnC,CAD/B,EAEI,OAAO,KAAKtB,OAAL,CAAa5pB,CAAb,CAAP,CAFJ,KAII,KAAK4pB,OAAL,CAAa5pB,CAAb,IAAkBkrB,QAAlB,CAVc,CAYlB;;AACA,YAAI9/C,IAAI,CAAC2U,SAAL,CAAe,KAAK6pC,OAAL,CAAa5pB,CAAb,CAAf,KAAmC50B,IAAI,CAAC2U,SAAL,CAAekrC,UAAf,CAAvC,EAAmE;AAC/D3T,UAAAA,SAAS,CAAC7oC,IAAV,CAAeuxB,CAAf;AACH,SAFD,MAEK;AACD,iBAAO4a,OAAO,CAAC5a,CAAD,CAAd;AACH;AACJ;;AAED,UAAI,KAAKlwB,GAAT,EACIoM,YAAY,CAACC,OAAb,CAAqB,KAAK0uC,SAA1B,EAAqCz/C,IAAI,CAAC2U,SAAL,CAAe,KAAK6pC,OAApB,CAArC;;AAEJ,UAAItS,SAAS,CAAC5qC,MAAV,GAAmB,CAAvB,EAA0B;AACtB;AACA4qC,QAAAA,SAAS,CAAC/xC,OAAV,CAAkBy6B,CAAC,IAAE;AACjB,cAAIlV,MAAM,GAAG,KAAK/lB,GAAL,CAASi7B,CAAT,CAAb;AACA,cAAIlV,MAAM,CAACqgC,YAAX,EACIrgC,MAAM,CAACsgC,UAAP,CAAkB/iD,KAAlB,GAA0B,KAAKA,KAAL,CAAW23B,CAAX,CAA1B;AACJlV,UAAAA,MAAM,CAACw9B,IAAP,CAAY,QAAZ,EAAsB,KAAKjgD,KAAL,CAAW23B,CAAX,CAAtB;AACH,SALD;AAOA,YAAI,KAAK8qB,OAAT,EACI,KAAKO,aAAL,GAAqBzQ,OAArB,CADJ,KAGI,KAAK0N,IAAL,CAAU,QAAV,EAAoB1N,OAApB;AACP,OA5C4C,CA8CjD;;AACC,KA/CD,MA+CK;AACD,aAAO9qC,GAAG,GAAG,KAAK85C,OAAL,CAAa95C,GAAb,CAAH,GAAuB,KAAK85C,OAAtC;AACH;AACJ;;AAEDhC,EAAAA,UAAU,GAAE;AACR,QAAIv/C,KAAK,GAAG,KAAKA,KAAL,EAAZ;AACA,QAAIwX,IAAI,GAAG,EAAX;;AAEA,SAAK,IAAI/P,GAAT,IAAgBzH,KAAhB,EAAuB;AACnB,UAAI/D,CAAC,GAAG+D,KAAK,CAACyH,GAAD,CAAb,CADmB,CAEnB;;AACA,UAAItK,KAAK,CAACC,OAAN,CAAcnB,CAAd,CAAJ,EACIub,IAAI,CAAC/P,GAAD,CAAJ,GAAYxL,CAAC,CAACyD,GAAF,CAAM6I,IAAI,IAAE;AACpB,eAAOA,IAAI,CAAC9J,GAAL,IAAY0T,SAAZ,GAAwB5J,IAAI,CAAC9J,GAA7B,GAAmC8J,IAA1C;AACH,OAFW,CAAZ,CADJ,KAKIiP,IAAI,CAAC/P,GAAD,CAAJ,GAAYxL,CAAZ;AACP;;AAED,WAAOub,IAAP;AACH;;AAED,MAAIirC,OAAJ,GAAa;AAAC,WAAO,KAAKQ,OAAL,IAAgB,KAAvB;AAA8B;;AAC5C,MAAIR,OAAJ,CAAYhkD,GAAZ,EAAgB;AACZ,SAAKwkD,OAAL,GAAerkD,OAAO,CAACH,GAAD,CAAtB;;AAEA,QAAI,CAAC,KAAKgkD,OAAN,IAAiB,KAAKO,aAA1B,EAAyC;AACrC,WAAK/C,IAAL,CAAU,QAAV,EAAoB,KAAK+C,aAAzB;AACA,WAAKA,aAAL,GAAqB,IAArB;AACH;AACJ;;AAED,MAAIA,aAAJ,GAAmB;AAAE,WAAO,KAAKE,eAAZ;AAA6B;;AAClD,MAAIF,aAAJ,CAAkBzQ,OAAlB,EAA0B;AACtB,QAAI,CAACA,OAAL,EAAc;AACV,aAAO,KAAK2Q,eAAZ;AACA,WAAKjD,IAAL,CAAU,SAAV,EAAqB,KAArB;AACA;AACH;;AAED,SAAKiD,eAAL,GAAuBjgD,MAAM,CAAC0J,MAAP,CAAe,KAAKu2C,eAAL,IAAwB,EAAvC,EAA4C3Q,OAA5C,CAAvB;AAEA,SAAK0N,IAAL,CAAU,SAAV,EAAqBh9C,MAAM,CAACxD,IAAP,CAAY,KAAKyjD,eAAjB,EAAkC7+C,MAAvD;AACH;;AAED8+C,EAAAA,GAAG,CAAC7D,OAAD,EAAS;AAER,QAAIA,OAAO,IAAI,KAAK8D,aAApB,EACI;AAEJ,SAAKA,aAAL,GAAqB9D,OAArB;AAEA,SAAKpiD,OAAL,CAAaulB,MAAM,IAAE,OAAOA,MAAM,CAAChe,MAAnC;AACA,SAAKgpC,KAAL;;AAEA,SAAK,IAAIhmC,GAAT,IAAgB63C,OAAhB,EAAyB;AAErB,UAAI,CAACA,OAAO,CAAC73C,GAAD,CAAZ,EACI;;AAEJ,UAAIA,GAAG,IAAI,QAAX,EAAqB;AACjB,aAAK47C,aAAL,GAAqB/D,OAAO,CAAC73C,GAAD,CAA5B;AACA;AACH;;AAED,UAAIgb,MAAM,GAAG,IAAI6gC,MAAJ,CAAW77C,GAAX,EAAgB63C,OAAO,CAAC73C,GAAD,CAAvB,CAAb;AACAgb,MAAAA,MAAM,CAAChe,MAAP,GAAgB,IAAhB;AACA,WAAK9H,GAAL,CAAS8K,GAAT,EAAcgb,MAAd;AACH;;AAED,SAAKq9B,WAAL,GAAmB,IAAIx0C,IAAJ,GAAWC,OAAX,EAAnB;AACH;;AAED7L,EAAAA,GAAG,CAACyE,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAKtF,OAAL,CAAa,CAACyM,CAAD,EAAIlC,GAAJ,KAAUjF,IAAI,CAAC4D,IAAL,CAAUjC,EAAE,CAACwF,CAAD,EAAIlC,GAAJ,CAAZ,CAAvB;AACA,WAAOjF,IAAP;AACH;;AAED,MAAI6gD,aAAJ,CAAkBl0B,IAAlB,EAAuB;AACnB,QAAIA,IAAI,KAAK,KAAb,EACI,KAAKo0B,eAAL,GAAuB;AAAC/rC,MAAAA,IAAI,EAAC;AAAN,KAAvB,CAFe,CAEqB;;AAExC,QAAI,OAAO2X,IAAP,IAAe,QAAnB,EACI,KAAKo0B,eAAL,GAAuBp0B,IAAvB;AACP;;AAED,MAAIk0B,aAAJ,GAAmB;AACf,WAAOpgD,MAAM,CAAC0J,MAAP,CAAc;AACjB6K,MAAAA,IAAI,EAAE6qC,aADW;AAEjB5c,MAAAA,cAAc,EAAE,IAFC;AAGjBjB,MAAAA,kBAAkB,EAAE,CAHH;AAIjBP,MAAAA,SAAS,EAAE,GAJM;AAKjB3jC,MAAAA,QAAQ,EAAE,CALO;AAMjB0jC,MAAAA,QAAQ,EAAE,GANO;AAOjBpgC,MAAAA,WAAW,EAAE,QAPI;AAQjB88B,MAAAA,KAAK,EAAE;AARU,KAAd,EASJ,KAAK6iB,eAAL,IAAsB,EATlB,CAAP;AAUH;;AAED,MAAIC,UAAJ,GAAgB;AACZ,WAAO,CAAC,CAAC,KAAKH,aAAL,CAAmB7rC,IAA5B;AACH;;AAEDuoC,EAAAA,YAAY,CAACvoC,IAAD,EAAM;AACd,WAAO,IAAIpV,OAAJ,CAAYC,OAAO,IAAE;AAExB,UAAIghD,aAAa,GAAGpgD,MAAM,CAAC0J,MAAP,CAAc,EAAd,EAAkB,KAAK02C,aAAvB,CAApB;AACA,UAAI5jD,IAAI,GAAG4jD,aAAa,CAAC5jD,IAAzB;AAEA+X,MAAAA,IAAI,CAACta,OAAL,CAAau0B,CAAC,IAAE;AACZA,QAAAA,CAAC,CAACgyB,aAAF,GAAkB,EAAlB;AACH,OAFD;AAIA,UAAI,CAAC,KAAKpX,IAAN,IACA,CAACgX,aAAa,CAAC7rC,IAAf,IAAuB6rC,aAAa,CAAC7rC,IAAd,KAAuB,IAD9C,IAED,KAAK60B,IAAL,CAAUhoC,MAAV,GAAmBg/C,aAAa,CAAC7e,kBAFpC,EAGI,OAAOniC,OAAO,CAACmV,IAAD,CAAd;AAEJA,MAAAA,IAAI,CAACta,OAAL,CAAau0B,CAAC,IAAE;AACZA,QAAAA,CAAC,CAACiyB,WAAF,GAAcL,aAAa,CAAC7rC,IAAd,CAAmBia,CAAnB,CAAd,CADY,CAGZ;;AACA,YAAI,CAAChyB,IAAL,EACIA,IAAI,GAAGwD,MAAM,CAACxD,IAAP,CAAYgyB,CAAC,CAACiyB,WAAd,CAAP;AACP,OAND,EAdwB,CAsBxB;AACA;;AACA,UAAIjkD,IAAJ,EACA4jD,aAAa,CAAC5jD,IAAd,GAAqBA,IAAI,CAACC,GAAL,CAAS+H,GAAG,IAAE;AAC/B,YAAI,OAAOA,GAAP,IAAc,QAAlB,EACI,OAAO,iBAAeA,GAAtB;AAEJ,YAAIk8C,MAAM,GAAG1gD,MAAM,CAAC0J,MAAP,CAAc,EAAd,EAAkBlF,GAAlB,CAAb;AACAk8C,QAAAA,MAAM,CAAC7nD,IAAP,GAAc,iBAAe6nD,MAAM,CAAC7nD,IAApC;AACA,eAAO6nD,MAAP;AACH,OAPoB,CAArB;AASA,UAAIC,IAAI,GAAG,IAAIzgB,aAAJ,CAAS3rB,IAAT,EAAe6rC,aAAf,CAAX;AACA7rC,MAAAA,IAAI,GAAGosC,IAAI,CAACz3B,MAAL,CAAY,KAAKkgB,IAAjB,CAAP,CAnCwB,CAqCxB;;AACA,UAAIgX,aAAa,CAAC5d,cAAlB,EACIjuB,IAAI,GAAGA,IAAI,CAAC9X,GAAL,CAASzD,CAAC,IAAE;AACfA,QAAAA,CAAC,CAACsM,IAAF,CAAOk7C,aAAP,GAAuB,EAAvB;AACAxnD,QAAAA,CAAC,CAACwW,OAAF,CAAUvV,OAAV,CAAkBu0B,CAAC,IAAE;AACjBx1B,UAAAA,CAAC,CAACsM,IAAF,CAAOk7C,aAAP,CAAqBhyB,CAAC,CAAChqB,GAAF,CAAMlL,OAAN,CAAc,cAAd,EAA8B,EAA9B,CAArB,IAA0Dk1B,CAAC,CAACzxB,KAA5D;AACH,SAFD;AAGA,eAAO/D,CAAC,CAACsM,IAAT;AACH,OANM,CAAP;AAQJlG,MAAAA,OAAO,CAACmV,IAAD,CAAP;AACH,KAhDM,CAAP;AAiDH;;AAED,QAAMiL,MAAN,CAAajL,IAAb,EAAkB;AACd,QAAI8nC,OAAO,GAAG,KAAK5/C,GAAL,CAAS+iB,MAAM,IAAEA,MAAjB,CAAd,CADc,CAGd;;AACA,WAAO68B,OAAO,CAAC9yB,MAAR,CAAe,CAAC4U,OAAD,EAAU3e,MAAV,KAAqB;AACvC,aAAO2e,OAAO,CAAC7lB,IAAR,CAAa/D,IAAI,IAAEiL,MAAM,CAACohC,UAAP,CAAkBrsC,IAAlB,CAAnB,CAAP;AACH,KAFM,EAEJpV,OAAO,CAACC,OAAR,CAAgBmV,IAAhB,CAFI,CAAP;AAIH;;AAEDssC,EAAAA,kBAAkB,CAACvR,OAAD,EAAS;AACvB,SAAK,IAAI9qC,GAAT,IAAgB8qC,OAAhB,EAAyB;AACrB,UAAI,KAAK71C,GAAL,CAAS+K,GAAT,EAAcs8C,IAAlB,EACI,OAAO,IAAP;AACP;;AACD,WAAO,KAAP;AACH;;AA/PoC;AAmQzC;AACA;AACA;;;;;AACO,MAAMT,MAAN,CAAa;AAEhBhmD,EAAAA,WAAW,CAACmK,GAAD,EAAMohC,KAAN,EAAY;AACnB,SAAKphC,GAAL,GAAWA,GAAX;AACA,SAAKohC,KAAL,GAAaA,KAAb;AACH;;AAED,MAAI5V,MAAJ,GAAY;AACR;AACA,QAAIA,MAAM,GAAG,KAAK4V,KAAL,CAAW5V,MAAxB;AACAA,IAAAA,MAAM,GAAG,OAAOA,MAAP,IAAiB,UAAjB,GAA8BA,MAAM,CAAC5lB,IAAP,CAAY,KAAK5I,MAAL,CAAYyhC,IAAxB,EAA8B,IAA9B,CAA9B,GAAoEjT,MAA7E;AAEAA,IAAAA,MAAM,GAAGA,MAAM,CAACvzB,GAAP,CAAWiK,CAAC,IAAE;AACnB,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwB,CAAC,CAAC,SAAD,EAAY7C,QAAZ,CAAqB6C,CAArB,CAA7B,EACIA,CAAC,GAAG;AAAC9I,QAAAA,KAAK,EAAE8I,CAAR;AAAWlL,QAAAA,GAAG,EAAEkL;AAAhB,OAAJ,CAFe,CAInB;;AACA,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwBy4C,WAAW,CAACt7C,QAAZ,CAAqB6C,CAAC,CAAClL,GAAvB,CAA5B,EAAyD;AACrDkL,QAAAA,CAAC,CAAClL,GAAF,GAAQ,IAAR;AACAkL,QAAAA,CAAC,CAACojC,SAAF,GAAc,IAAd;AACH;;AAED,aAAOpjC,CAAP;AACH,KAXQ,CAAT;AAaA,WAAOspB,MAAP;AACH;;AAED,MAAIpyB,KAAJ,GAAW;AACP,WAAO,KAAKgoC,KAAL,CAAWhoC,KAAX,IAAoB,uBAAS,KAAK4G,GAAd,CAA3B;AACH;;AAED,MAAI1L,IAAJ,GAAU;AACN,WAAO,KAAK8sC,KAAL,CAAW9sC,IAAX,IAAmB,IAA1B;AACH;;AAED,MAAI+lD,QAAJ,GAAc;AACV,QAAI,CAAC,KAAKjZ,KAAL,CAAWiZ,QAAZ,IAAwB,KAAKgB,YAA7B,IAA6C,KAAKC,UAAL,CAAgBjB,QAAjE,EACI,OAAO,KAAKiB,UAAL,CAAgBjB,QAAvB;AAEJ,WAAO,KAAKjZ,KAAL,CAAWiZ,QAAX,IAAuBQ,eAA9B;AACH,GAzCe,CA2ChB;;;AACA,MAAIyB,IAAJ,GAAU;AACN,WAAO,KAAKlb,KAAL,CAAWmb,EAAX,KAAkB,IAAzB;AACH;;AAED,MAAIlB,YAAJ,GAAkB;AACd,WAAO,CAAC,CAAC,KAAKja,KAAL,CAAW3Z,IAApB;AACH;;AAED,MAAI8f,QAAJ,GAAc;AACV,QAAIvwC,GAAG,GAAG,KAAKwlD,OAAL,GAAe,KAAKjkD,KAAL,IAAY,KAAKA,KAAL,CAAW,CAAX,CAA3B,GAA2C,KAAKA,KAA1D;AACA,WAAO,CAACoiD,WAAW,CAACt7C,QAAZ,CAAqBrI,GAArB,CAAR;AACH;;AAED,MAAIwlD,OAAJ,GAAa;AACT,WAAO,KAAKpb,KAAL,CAAWqb,KAAX,KAAqB,IAA5B;AACH;;AAED,MAAIlkD,KAAJ,GAAW;AACP,WAAO,KAAKyE,MAAL,CAAYzE,KAAZ,CAAkB,KAAKyH,GAAvB,CAAP;AACH;;AAED,MAAIzH,KAAJ,CAAUvB,GAAV,EAAc;AACV,SAAKgG,MAAL,CAAYzE,KAAZ,CAAkB,KAAKyH,GAAvB,EAA4BhJ,GAA5B;AACH;;AAED,MAAI4Q,UAAJ,GAAgB;AACZ,QAAI,KAAKw5B,KAAL,CAAWx5B,UAAf,EAA4B,OAAO,KAAKw5B,KAAL,CAAWx5B,UAAlB;AAE5B,QAAI,KAAKyzC,YAAT,EACI,OAAO,KAAKC,UAAL,CAAgB1zC,UAAhB,GAA6B,KAAK0zC,UAAL,CAAgB1zC,UAA7C,GAA0D,IAAjE;AAEJ,QAAI+/B,KAAK,GAAG,KAAKnc,MAAL,CAAY,CAAZ,CAAZ;AACA,WAAOmc,KAAK,GAAGA,KAAK,CAAC3wC,GAAT,GAAe,IAA3B;AACH;;AAED,MAAIkkD,UAAJ,GAAgB;AACZ,QAAIlkD,GAAG,GAAG,KAAKuB,KAAf;AAEA,QAAI7C,KAAK,CAACC,OAAN,CAAcqB,GAAd,CAAJ,EACIA,GAAG,GAAGA,GAAG,CAACiB,GAAJ,CAAQiK,CAAC,IAAEA,CAAC,CAAClL,GAAF,IAAOkL,CAAlB,CAAN,CADJ,KAGIlL,GAAG,GAAGA,GAAG,KAAGA,GAAG,CAACA,GAAJ,IAASA,GAAZ,CAAT;;AAEJ,QAAI,KAAKqkD,YAAT,EAAuB;AACnB,UAAI5zB,IAAI,GAAG,KAAK6zB,UAAhB;AACA,aAAO7zB,IAAI,GAAGA,IAAI,CAACruB,KAAR,GAAgB,aAA3B;AACH;;AAED,QAAIsjD,UAAU,GAAG,KAAKlxB,MAAL,CAAYxQ,MAAZ,CAAmB,CAAC9Y,CAAD,EAAGvC,CAAH,KAAO;AACvC,UAAI,OAAOuC,CAAP,IAAY,QAAZ,IAAwBA,CAAC,CAACuiB,OAA1B,IAAqCviB,CAAC,CAAC4xB,IAAvC,IAA+C5xB,CAAC,CAACy6C,SAArD,EAAiE,OAAO,KAAP,CAD1B,CAEvC;;AAEA,UAAI,CAACjnD,KAAK,CAACC,OAAN,CAAcqB,GAAd,CAAL,EAAyB;AACrB,YAAIkL,CAAC,CAAClL,GAAF,IAAOA,GAAX,EAAgB;AACZwE,UAAAA,MAAM,CAAC0J,MAAP,CAAchD,CAAd,EAAiB,KAAK3J,KAAtB;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH;;AAED,UAAI0rC,YAAY,GAAGjtC,GAAG,CAAC2c,OAAJ,CAAYzR,CAAC,CAAClL,GAAd,CAAnB;;AAEA,UAAIitC,YAAY,GAAG,CAAC,CAApB,EAAuB;AAEnB,YAAIC,SAAS,GAAG,KAAK3rC,KAAL,CAAW0rC,YAAX,CAAhB;;AAEA,YAAIC,SAAS,IAAI,OAAOA,SAAP,IAAoB,QAArC,EAA+C;AAC3C1oC,UAAAA,MAAM,CAAC0J,MAAP,CAAchD,CAAd,EAAiBgiC,SAAjB;AACH;;AAED,eAAO,IAAP;AACH;;AAED,aAAO,KAAP;AACH,KA1BgB,CAAjB;AA4BA,WAAOwY,UAAU,GACfA,UAAU,CAACzkD,GAAX,CAAemzB,CAAC,IAAE;AAChB,aAAO,CAACA,CAAC,CAAC+Y,SAAH,EAAc/Y,CAAC,CAACwxB,YAAF,IAAgBxxB,CAAC,CAAChyB,KAAhC,EAAuC4hB,MAAvC,CAA8ClN,CAAC,IAAEA,CAAjD,EAAoDtJ,IAApD,CAAyD,GAAzD,CAAP;AACH,KAFC,EAECA,IAFD,CAEM,IAFN,CADe,GAIfxN,GAJF;AAKH;;AAED,QAAM6lD,QAAN,CAAehjC,EAAf,EAAkB;AAEd,QAAI,KAAKwhC,YAAT,EACI,OAAO,KAAKyB,cAAL,CAAoBjjC,EAApB,CAAP;AAEJ,QAAIma,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,KAAKzI,MAAd,EAAsB;AACvCwI,MAAAA,QAAQ,EAAE,KAAKz7B,KADwB;AAEvC2D,MAAAA,QAAQ,EAAE,KAAKsgD,OAFwB;AAGvCt0C,MAAAA,KAAK,EAAE,KAAKk5B,KAAL,CAAWl5B,KAAX,IAAkB;AAHc,KAAtB,EAIlBsf,OAJkB,CAIV3N,EAJU,EAIN;AACXiN,MAAAA,eAAe,EAAE,KAAKsa,KAAL,CAAWta,eAAX,IAA8B,cADpC;AAEXH,MAAAA,SAAS,EAAE,KAAKya,KAAL,CAAWza,SAAX,IAAwB,MAFxB;AAGX2T,MAAAA,eAAe,EAAE;AAHN,KAJM,CAArB;AAUA,QAAIp3B,MAAM,GAAG,KAAK3K,KAAlB;AAEA,QAAIy7B,QAAQ,KAAK,KAAb,IAAsBA,QAAQ,CAACp3B,MAAT,IAAmB,CAA7C,EAAkD,OAAlD,CACI;AADJ,SAEK,IAAIlH,KAAK,CAACC,OAAN,CAAcq+B,QAAd,CAAJ,EACD,KAAKz7B,KAAL,GAAay7B,QAAQ,CAAC/7B,GAAT,CAAa6V,CAAC,IAAE;AACzB,eAAOA,CAAC,CAACq2B,SAAF,GAAc;AAACntC,UAAAA,GAAG,EAAE8W,CAAC,CAAC9W,GAAR;AAAamtC,UAAAA,SAAS,EAAEr2B,CAAC,CAACq2B;AAA1B,SAAd,GAAqDr2B,CAAC,CAAC9W,GAA9D;AACH,OAFY,CAAb,CADC,KAKD,KAAKuB,KAAL,GAAay7B,QAAQ,CAACmQ,SAAT,GAAqB;AAACntC,QAAAA,GAAG,EAAEg9B,QAAQ,CAACh9B,GAAf;AAAoBmtC,QAAAA,SAAS,EAAEnQ,QAAQ,CAACmQ;AAAxC,OAArB,GAA0EnQ,QAAQ,CAACh9B,GAAhG;AACP;;AAED,MAAIskD,UAAJ,GAAgB;AACZ,QAAIyB,QAAQ,GAAG,KAAK3b,KAAL,CAAW3Z,IAA1B;AACA,QAAIS,IAAI,GAAG,IAAX;;AAEA,QAAI,CAAC,KAAK80B,WAAV,EAAuB;AAEnB,UAAI1C,WAAW,CAACyC,QAAD,CAAf,EAA2B;AACvB70B,QAAAA,IAAI,GAAGoyB,WAAW,CAACyC,QAAD,CAAlB;AACH,OAFD,MAEM,IAAI,OAAOA,QAAP,IAAmB,QAAvB,EAAkC;AACpC70B,QAAAA,IAAI,GAAG7wB,cAAc,CAACpC,GAAf,CAAmB8nD,QAAnB,CAAP;AACH,OAFK,MAEA,IAAI,OAAOA,QAAP,IAAmBznD,WAAvB,EAAoC;AACtC4yB,QAAAA,IAAI,GAAG60B,QAAP;AACH;;AAED,UAAI70B,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACvsB,SAAL,CAAe2rB,KAAf,GAAuB,YAAU;AAC7B,eAAKE,OAAL,IAAc,KAAKA,OAAL,CAAaG,MAAb,EAAd,CAD6B,CACO;AACvC,SAFD;;AAGA,aAAKq1B,WAAL,GAAmB,IAAI90B,IAAJ,CAAU,KAAKkZ,KAAL,CAAW6b,QAAX,IAAqB,EAA/B,CAAnB;AACA,aAAKD,WAAL,CAAiBhiC,MAAjB,GAA0B,IAA1B;AACH;AACJ;;AAED,WAAO,KAAKgiC,WAAZ;AACH;;AAED,QAAMF,cAAN,CAAqBjjC,EAArB,EAAwB;AAEpB,QAAI,CAAC,KAAKyhC,UAAV,EACI,OAAOjiB,gBAAOrkC,IAAP,CAAY;AAAC0iC,MAAAA,GAAG,EAAE,GAAE,KAAK13B,GAAI;AAAjB,KAAZ,EAAmDwnB,OAAnD,CAA2D3N,EAA3D,CAAP;;AAEJ,QAAIkN,OAAO,GAAG1T,CAAC,IAAE;AACb;AACA;AACApa,MAAAA,UAAU,CAAC,MAAI;AACX,aAAKV,KAAL,GAAa,KAAK+iD,UAAL,CAAgB/iD,KAA7B;AACA,aAAK+iD,UAAL,CAAgBlB,QAAhB,IAA0B,KAAKkB,UAAL,CAAgBlB,QAAhB,EAA1B;AACH,OAHS,CAAV;AAIH,KAPD,CALoB,CAcpB;;;AACA,QAAIryB,gBAAJ,CAAYlO,EAAZ,EAAgB,KAAKyhC,UAArB,EAAiC;AAC7BpzC,MAAAA,KAAK,EAAE,KAAKk5B,KAAL,CAAWl5B,KAAX,IAAkB,IADI;AAE7B6e,MAAAA,OAAO,EAAEA,OAFoB;AAG7BC,MAAAA,SAAS,EAAE,CAAC,GAAGthB,IAAJ,KAAW;AAClB,YAAI,KAAK41C,UAAL,CAAgBt0B,SAApB,EAA+B;AAC3B,eAAKs0B,UAAL,CAAgBt0B,SAAhB,CAA0B,GAAGthB,IAA7B;AACH;AACJ;AAP4B,KAAjC;AASH;;AAED02C,EAAAA,UAAU,CAACrsC,IAAD,EAAM;AACZ,WAAO,IAAIpV,OAAJ,CAAYC,OAAO,IAAE;AAExB;AACA,UAAI,CAAC,KAAK2sC,QAAV,EAAqB,OAAO3sC,OAAO,CAACmV,IAAD,CAAd;AACrB,UAAI,CAAC,KAAKsqC,QAAV,EAAqB,OAAOz/C,OAAO,CAACmV,IAAD,CAAd;AACrB,UAAI,KAAKusC,IAAT,EAAgB,OAAO1hD,OAAO,CAACmV,IAAD,CAAd;AAEhB,UAAI/Y,GAAG,GAAG,KAAKuB,KAAf;AACAwX,MAAAA,IAAI,GAAGA,IAAI,CAACiL,MAAL,CAAYgP,CAAC,IAAE,KAAKqwB,QAAL,CAAcz0C,IAAd,CAAmB,KAAK5I,MAAL,CAAYyhC,IAA/B,EAAqCzU,CAArC,EAAwChzB,GAAxC,EAA6C,KAAKgJ,GAAlD,CAAf,CAAP;AACApF,MAAAA,OAAO,CAACmV,IAAD,CAAP;AACH,KAVM,CAAP;AAWH;;AA1Ne;;;AA8NpB,+BAAQ+qC,OAAO,CAACn/C,SAAhB;AACA,+BAAQkgD,MAAM,CAAClgD,SAAf;;;;;;;;;AC/gBA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMuhD,KAAN,SAAoB/oD,GAApB,CAAwB;AAEnC,MAAI4mD,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK/6C,GAAf,GAAmB,OAA1B;AAAkC;;AAEnD,MAAIzH,KAAJ,GAAW;AACP;AACH,QAAI,KAAKuhD,OAAL,KAAiBpvC,SAArB,EAAgC;AAClC,WAAKovC,OAAL,GAAe,KAAK95C,GAAL,IAAY1E,IAAI,CAACC,KAAL,CAAW6Q,YAAY,CAACE,OAAb,CAAqB,KAAKyuC,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACM;;AAED,WAAO,KAAKjB,OAAZ;AACH;;AAED,MAAIvhD,KAAJ,CAAUvB,GAAV,EAAc;AAEV,QAAIwwC,SAAS,GAAGlsC,IAAI,CAAC2U,SAAL,CAAe,KAAK6pC,OAApB,KAAgCx+C,IAAI,CAAC2U,SAAL,CAAejZ,GAAf,CAAhD;AAEA,SAAK8iD,OAAL,GAAe9iD,GAAf;;AAEA,QAAI,KAAKgJ,GAAT,EAAc;AACV,UAAIhJ,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAI0T,SAA1B,EACI0B,YAAY,CAAC4D,UAAb,CAAwB,KAAK+qC,SAA7B,EADJ,KAGI3uC,YAAY,CAACC,OAAb,CAAqB,KAAK0uC,SAA1B,EAAqCz/C,IAAI,CAAC2U,SAAL,CAAejZ,GAAf,CAArC;AACP;;AAED,SAAKvB,OAAL,CAAasY,IAAI,IAAEA,IAAI,CAACimB,QAAL,GAAc,KAAKz7B,KAAL,CAAWwV,IAAI,CAAC/N,GAAhB,CAAjC;AAEA,QAAIwnC,SAAJ,EACI,KAAKgR,IAAL,CAAU,QAAV,EAAoBxhD,GAApB;AACP;;AAED,MAAImmD,KAAJ,GAAW;AACP,WAAO3hD,MAAM,CAACxD,IAAP,CAAY,KAAKO,KAAjB,EAAwBqE,MAAxB,IAAkC,CAAzC;AACH;;AAED8+C,EAAAA,GAAG,CAAC3D,KAAD,EAAO;AAEN,QAAIA,KAAK,CAACwE,EAAV,EAAc;AACV,WAAKa,QAAL,GAAgB,IAAhB;AACA,aAAOrF,KAAK,CAACwE,EAAb;AACH;;AAED,QAAIxE,KAAK,CAACvf,QAAV,EAAoB;AAChB,UAAI6kB,WAAW,GAAG,EAAlB;AAEAtF,MAAAA,KAAK,CAACvf,QAAN,CAAevgC,GAAf,CAAmB+H,GAAG,IAAE;AAEpB,YAAI,CAAC+3C,KAAK,CAAC/3C,GAAD,CAAV,EAAkB;AAElBq9C,QAAAA,WAAW,CAACr9C,GAAD,CAAX,GAAmB;AACfs9C,UAAAA,IAAI,EAAEvF,KAAK,CAAC/3C,GAAD,CAAL,CAAWs9C,IAAX,IAAmB;AADV,SAAnB;AAGH,OAPD;;AASA,UAAI,KAAKH,KAAT,EAAgB;AACZ,aAAKrD,OAAL,GAAeuD,WAAf;AACAjxC,QAAAA,YAAY,CAACC,OAAb,CAAqB,KAAK0uC,SAA1B,EAAqCz/C,IAAI,CAAC2U,SAAL,CAAeotC,WAAf,CAArC;AACH;;AAED,aAAOtF,KAAK,CAACvf,QAAb;AACH;;AAED,QAAIuf,KAAK,IAAI,KAAKwF,WAAlB,EACI;AAEJ,SAAKA,WAAL,GAAmBxF,KAAnB;AAEA,SAAK/R,KAAL;;AAEA,SAAK,IAAIhmC,GAAT,IAAgB+3C,KAAhB,EAAuB;AACnB,UAAIhqC,IAAI,GAAG,IAAIyvC,IAAJ,CAASx9C,GAAT,EAAc+3C,KAAK,CAAC/3C,GAAD,CAAnB,CAAX;AACA+N,MAAAA,IAAI,CAACgqC,KAAL,GAAa,IAAb;AACAhqC,MAAAA,IAAI,CAACimB,QAAL,GAAgB,KAAKz7B,KAAL,CAAWyH,GAAX,CAAhB;AACA,WAAK9K,GAAL,CAAS8K,GAAT,EAAc+N,IAAd;AACH;AACJ;;AAED9V,EAAAA,GAAG,CAACyE,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAKtF,OAAL,CAAa,CAACyM,CAAD,EAAIlC,GAAJ,KAAUjF,IAAI,CAAC4D,IAAL,CAAUjC,EAAE,CAACwF,CAAD,EAAIlC,GAAJ,CAAZ,CAAvB;AACA,WAAOjF,IAAP;AACH;;AAEJ,MAAI3B,KAAJ,GAAW;AACJ,QAAI6I,MAAM,GAAG,KAAKA,MAAlB;AACA,WAAOA,MAAM,CAACrF,MAAP,IAAiB,CAAjB,GAAqB,MAArB,GAA8BqF,MAAM,CAAChK,GAAP,CAAW8V,IAAI,IAAEA,IAAI,CAAC3U,KAAtB,EAA6BoL,IAA7B,CAAkC,IAAlC,CAArC;AACN;;AAED,MAAIvC,MAAJ,GAAY;AACL,QAAIA,MAAM,GAAG,EAAb;AACAzG,IAAAA,MAAM,CAACxD,IAAP,CAAY,KAAKO,KAAjB,EAAwB9C,OAAxB,CAAgCuK,GAAG,IAAE;AACjC,UAAI,KAAK/K,GAAL,CAAS+K,GAAT,CAAJ,EACIiC,MAAM,CAACtD,IAAP,CAAa,KAAK1J,GAAL,CAAS+K,GAAT,CAAb;AACP,KAHD;AAIA,WAAOiC,MAAP;AACN;;AAEE,QAAM46C,QAAN,CAAehjC,EAAf,EAAkB;AAEd,QAAI3W,MAAM,GAAG,KAAK3K,KAAlB;AAEA,QAAIo7B,IAAI,GAAG,KAAK17B,GAAL,CAAS8V,IAAI,IAAE;AACtB,aAAO;AACH3U,QAAAA,KAAK,EAAE2U,IAAI,CAAC3U,KADT;AAEHpC,QAAAA,GAAG,EAAE+W,IAAI,CAAC/N,GAFP;AAGH4zB,QAAAA,WAAW,EAAE7lB,IAAI,CAAC6lB,WAHf;AAIH0pB,QAAAA,IAAI,EAAEvvC,IAAI,CAAC0vC,MAJR;AAKH/X,QAAAA,MAAM,EAAE,CAAC,qBAAD;AALL,OAAP;AAOH,KARU,CAAX;AAUA/R,IAAAA,IAAI,CAACh1B,IAAL,CAAU;AAACm1B,MAAAA,IAAI,EAAE,qBAAK;AAAZ,KAAV;AAEA,QAAIE,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAASN,IAAT,EAAe;AAChCnN,MAAAA,SAAS,EAAE,kBADqB;AAEhCtqB,MAAAA,QAAQ,EAAE,IAFsB;AAGzC83B,MAAAA,QAAQ,EAAEx4B,MAAM,CAACxD,IAAP,CAAYkL,MAAZ;AAH+B,KAAf,EAIlBskB,OAJkB,CAIV3N,EAJU,EAIN;AAACygB,MAAAA,eAAe,EAAC,IAAjB;AAAuB3T,MAAAA,SAAS,EAAE;AAAlC,KAJM,CAArB;AAMA,QAAIqN,QAAQ,KAAK,KAAjB,EAAyB,OAtBX,CAwBd;;AACA,QAAIh9B,GAAG,GAAG,EAAV;AACAg9B,IAAAA,QAAQ,CAACv+B,OAAT,CAAiBqY,CAAC,IAAE9W,GAAG,CAAC8W,CAAC,CAAC9W,GAAH,CAAH,GAAW;AAACsmD,MAAAA,IAAI,EAACxvC,CAAC,CAACwvC;AAAR,KAA/B;AACN,SAAK/kD,KAAL,GAAavB,GAAb;AACG;;AAEJ+W,EAAAA,IAAI,CAACgC,IAAD,EAAM;AACH;AACN,QAAIgoC,KAAK,GAAG,KAAK91C,MAAjB;AAEA,WAAO,IAAItH,OAAJ,CAAYC,OAAO,IAAE;AAE3B,UAAIm9C,KAAK,CAACn7C,MAAN,IAAgB,CAApB,EAAwB,OAAOhC,OAAO,CAACmV,IAAD,CAAd;AAEfA,MAAAA,IAAI,CAAChC,IAAL,CAAU,UAAUkrC,EAAV,EAAcC,EAAd,EAAkB;AAExB,aAAK,IAAInrC,IAAT,IAAiBgqC,KAAjB,EAAwB;AAEpB,cAAI/gD,GAAG,GAAG+W,IAAI,CAAC2vC,WAAL,CAAiBzE,EAAjB,EAAqBC,EAArB,CAAV,CAFoB,CAIpB;;AACA,cAAIliD,GAAG,KAAK,KAAZ,EACI,OAAOA,GAAP;AACP;AAEJ,OAXD;AAaT4D,MAAAA,OAAO,CAACmV,IAAD,CAAP;AACA,KAlBM,CAAP;AAmBA;;AAvJqC;;;AA4JvC,+BAAQmtC,KAAK,CAACvhD,SAAd;;AAGA,MAAM6hD,IAAN,CAAW;AAEP3nD,EAAAA,WAAW,CAACmK,GAAD,EAAMohC,KAAN,EAAY;AACnB,SAAKphC,GAAL,GAAWA,GAAX;AAEA,QAAI,OAAOohC,KAAP,IAAgB,UAApB,EACIA,KAAK,GAAG;AAACuc,MAAAA,MAAM,EAAEvc;AAAT,KAAR;AAEJ,SAAKA,KAAL,GAAaA,KAAb;AACH;;AAED,MAAIuc,MAAJ,GAAY;AACR,WAAO,KAAKvc,KAAL,CAAWuc,MAAX,KAAsB3zB,CAAC,IAAEA,CAAC,CAAC/0B,GAAF,CAAM,KAAK+K,GAAX,CAAzB,CAAP;AACH;;AAED,MAAI5G,KAAJ,GAAW;AACP,WAAO,KAAKgoC,KAAL,CAAWhoC,KAAX,IAAoB,uBAAS,KAAK4G,GAAd,CAA3B;AACH;;AAED,MAAI4zB,WAAJ,GAAiB;AACb,WAAO,KAAKwN,KAAL,CAAWxN,WAAX,IAA0B,IAAjC;AACH;;AAED,MAAI6pB,MAAJ,GAAY;AACR,WAAO,KAAKzpB,QAAL,GAAgB,KAAKA,QAAL,CAAcspB,IAA9B,GAAsC,KAAKlc,KAAL,CAAWkc,IAAX,IAAmB,KAAhE;AACH;;AAEDI,EAAAA,WAAW,CAACzE,EAAD,EAAKC,EAAL,EAAQ;AACf,QAAI0E,EAAE,GAAG,KAAKD,MAAL,CAAY1E,EAAZ,CAAT;AACA,QAAI4E,EAAE,GAAG,KAAKF,MAAL,CAAYzE,EAAZ,CAAT;AAEA,QAAI0E,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAC,CAAf,GAAmB,CAA1B;AACd,QAAIG,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAd,GAAkB,CAAC,CAA1B;AAEd,WAAO,KAAP;AACH;;AAnCM;;;;;;;;;ACrKX;;;;AAEe,MAAMK,OAAN,SAAsB3pD,GAAtB,CAA0B;AAErC,MAAI4mD,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK/6C,GAAf,GAAmB,SAA1B;AAAoC;;AAErDnK,EAAAA,WAAW,CAACkoD,OAAD,EAAS;AAChB,QAAI,CAACroD,KAAK,CAACC,OAAN,CAAcooD,OAAd,CAAL,EACIA,OAAO,GAAGviD,MAAM,CAACyF,OAAP,CAAe88C,OAAf,CAAV;AAEJ,UAAMA,OAAN;AACH;;AAEDlW,EAAAA,EAAE,CAACllB,KAAD,EAAO;AACL,WAAOjtB,KAAK,CAACqC,IAAN,CAAW,KAAKC,IAAL,EAAX,EAAwB2qB,KAAxB,CAAP;AACH;;AAEDq7B,EAAAA,IAAI,GAAE;AACF,QAAIhmD,IAAI,GAAGtC,KAAK,CAACqC,IAAN,CAAW,KAAKC,IAAL,EAAX,CAAX;AACA,QAAI2qB,KAAK,GAAG3qB,IAAI,CAAC2b,OAAL,CAAa,KAAK1R,MAAlB,CAAZ;AACA0gB,IAAAA,KAAK;AAEL,QAAIA,KAAK,IAAI3qB,IAAI,CAAC4E,MAAlB,EACI+lB,KAAK,GAAG,CAAR;AAEJ,SAAK1gB,MAAL,GAAc,KAAK4lC,EAAL,CAAQllB,KAAR,CAAd;AACH;;AAED,MAAI1gB,MAAJ,GAAY;AACR,WAAO,KAAKg8C,QAAL,IAAiB7xC,YAAY,CAACE,OAAb,CAAqB,KAAKyuC,SAA1B,CAAjB,IAAyD,KAAKlT,EAAL,CAAQ,CAAR,CAAhE;AACH;;AAED,MAAI5lC,MAAJ,CAAWjL,GAAX,EAAe;AACX,QAAIkM,MAAM,GAAG,KAAKjB,MAAlB;AAEA,QAAI,CAAC,KAAKsoC,GAAL,CAASvzC,GAAT,CAAL,EACIA,GAAG,GAAG,KAAK6wC,EAAL,CAAQ,CAAR,CAAN;AAEJ,SAAKoW,QAAL,GAAgBjnD,GAAhB;AAEA,QAAI,KAAKgJ,GAAL,IAAYhJ,GAAhB,EACIoV,YAAY,CAACC,OAAb,CAAqB,KAAK0uC,SAA1B,EAAqC,KAAKkD,QAA1C,EADJ,KAGK,IAAI,KAAKj+C,GAAL,IAAY,CAAChJ,GAAjB,EACDoV,YAAY,CAAC4D,UAAb,CAAwB,KAAK+qC,SAA7B;AAEJ,QAAI/jD,GAAG,IAAIkM,MAAX,EACI,KAAKs1C,IAAL,CAAU,QAAV,EAAoBxhD,GAApB;AACP;;AA9CoC;;;AAkDzC,+BAAQ8mD,OAAO,CAACniD,SAAhB;;;;;;;;;ACpDA;;AAEAtE,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAwB;AAE7D,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArDwB;AAqDlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,2CAA2C,KAAKomD,QAAS;AACzD;AACA;AACA;AACA;AACA,sBAAsB,KAAKnG,KAAL,CAAW91C,MAAX,CAAkBhK,GAAlB,CAAsB8V,IAAI,IAAE,qBAAK;AACvD,mDAAmDA,IAAK;AACxD,4CAA4CA,IAAI,CAAC0vC,MAAL,GAAY,eAAZ,GAA4B,aAAc,eAAc1vC,IAAI,CAAC3U,KAAM;AAC/G;AACA,qBAJsB,CAIC;AACvB;AACA;AACA;AACA,+CAA+C,KAAK2+C,KAAL,CAAW91C,MAAX,CAAkBrF,MAAlB,GAAyB,CAAE;AAC1E,2BAA2B,KAAKm7C,KAAL,CAAW91C,MAAX,CAAkBrF,MAAlB,GAAyB,CAAE;AACtD;AACA;AACA;AACA;AACA,KApBa;AAoBP;;AAEFvD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKgJ,MAAL,GAAc,KAAKA,MAAL,CAAY/H,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKy9C,KAAL,CAAW/9C,EAAX,CAAc,QAAd,EAAwB,KAAKqI,MAA7B;AACH;;AAED3I,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAKq+C,KAAL,CAAW3N,GAAX,CAAe,QAAf,EAAyB,KAAK/nC,MAA9B;AACH,GAxF4D,CA0F7D;AACA;AACA;AACA;;;AAEA67C,EAAAA,QAAQ,CAACpjD,CAAD,EAAG;AACP,SAAKi9C,KAAL,CAAW8E,QAAX,CAAoB/hD,CAAC,CAACwH,aAAtB;AACH;;AAjG4D,CAAjE;;eAqGejL,cAAc,CAACpC,GAAf,CAAmB,iBAAnB;;;;;;ACvGf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,qBAAtB,EAA6C,cAAcE,sBAAd,CAAwB;AAEjE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAfwB;AAelB;;AAEF6C,EAAAA,YAAY,GAAE;AACV,SAAKM,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACH;;AAEDlB,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,6BAA6B,KAAKgJ,IAAL,CAAUw8C,IAAV,GAAe,eAAf,GAA+B,aAAc,YAAW,KAAK17C,OAAQ;AAClG,KAFa;AAEP;;AAEFA,EAAAA,OAAO,CAAC9G,CAAD,EAAG;AACNA,IAAAA,CAAC,CAACgC,eAAF;AACA,SAAKgE,IAAL,CAAUw8C,IAAV,GAAiB,CAAC,KAAKx8C,IAAL,CAAUw8C,IAA5B;AACA,SAAKj7C,MAAL;AACH;;AA/BgE,CAArE;;;;;;;;;ACFA;;AAEAhL,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnCwB;AAmClB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,8BAA8B,KAAKkjB,MAAL,CAAYusB,QAAS,WAAU,KAAKsV,QAAS;AAC3E;AACA,8BAA8B,KAAK7hC,MAAL,CAAY5hB,KAAM;AAChD;AACA,sBAAsB,KAAK4hB,MAAL,CAAY1mB,IAAZ,GAAiB,qBAAK,iBAAgB,KAAK0mB,MAAL,CAAY1mB,IAAK,aAAvD,GAAoE,EAAG;AAC7F,sBAAsB,KAAK0mB,MAAL,CAAYkgC,UAAW;AAC7C;AACA;AACA;AACA,KAVa;AAUP;;AAEF7hD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKgJ,MAAL,GAAc,KAAKA,MAAL,CAAY/H,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAK0gB,MAAL,CAAYhhB,EAAZ,CAAe,QAAf,EAAyB,KAAKqI,MAA9B,EAHe,CAIf;AACH;;AAED3I,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAKshB,MAAL,CAAYovB,GAAZ,CAAgB,QAAhB,EAA0B,KAAK/nC,MAA/B,EAFkB,CAGlB;AACH;;AAEDw6C,EAAAA,QAAQ,CAAC/hD,CAAD,EAAG;AACP,SAAKkgB,MAAL,CAAY6hC,QAAZ,CAAqB/hD,CAAC,CAACwH,aAAvB;AACH;;AAlE8D,CAAnE;;eAsEejL,cAAc,CAACpC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACxEf;;AACA;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC,cAAcE,sBAAd,CAAwB;AAE5D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3Bs5C,MAAAA,KAAK,EAAE;AAACp5C,QAAAA,IAAI,EAAEC;AAAP,OADoB;AAE3BojD,MAAAA,OAAO,EAAE;AAACrjD,QAAAA,IAAI,EAAEC;AAAP;AAFkB,KAAP;AAGtB;;AAEF/B,EAAAA,WAAW,GAAE;AACT;AACA,SAAKsoD,eAAL,GAAuB,KAAKA,eAAL,CAAqB7jD,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAK8jD,cAAL,GAAsB,KAAKA,cAAL,CAAoB9jD,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAED,aAAW1E,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvBwB;AAuBlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,uCAAuC,CAAC,KAAKkjD,OAAQ;AACrD,qBAAqB,KAAKqD,kBAAmB,IAAG,KAAKrD,OAAQ;AAC7D;AACA,UAAU,KAAKnD,OAAL,CAAa5/C,GAAb,CAAiB+iB,MAAM,IAAE,qBAAK;AACxC,yCAAyCA,MAAM,CAACusB,QAAS,YAAWvsB,MAAO;AAC3E,SAFU,CAEC;AACX;AACA,kFAAkF,KAAKsjC,YAAa;AACpG,KATa;AASP;;AAEFD,EAAAA,kBAAkB,GAAE;AAChB,SAAKxG,OAAL,CAAamD,OAAb,GAAuB,KAAvB;AACH;;AAEDsD,EAAAA,YAAY,GAAE;AACV,SAAKzG,OAAL,CAAa9oC,KAAb;AACH;;AAED1V,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;;AAEA,QAAI,KAAKw+C,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAa79C,EAAb,CAAgB,SAAhB,EAA2B,KAAKmkD,eAAhC;AACA,WAAKtG,OAAL,CAAa79C,EAAb,CAAgB,QAAhB,EAA0B,KAAKokD,cAA/B;AACH;AAEJ;;AAED1kD,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;;AAEA,QAAI,KAAKm+C,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAazN,GAAb,CAAiB,SAAjB,EAA4B,KAAK+T,eAAjC;AACA,WAAKtG,OAAL,CAAazN,GAAb,CAAiB,QAAjB,EAA2B,KAAKgU,cAAhC;AACH;AACJ;;AAEDD,EAAAA,eAAe,CAACvhD,MAAD,EAAQ;AACnB,SAAKo+C,OAAL,GAAep+C,MAAf;AACH;;AAEDwhD,EAAAA,cAAc,GAAE;AACZ,SAAK/7C,MAAL;AACH;;AAlF2D,CAAhE;;eAsFehL,cAAc,CAACpC,GAAf,CAAmB,gBAAnB;;;;;;;;;;;ACzFf;;;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcinD,YAAd,CAAiB;AAExD9lD,EAAAA,YAAY,GAAE;AACV,SAAK+lD,OAAL;AACA,SAAK9lD,gBAAL,CAAsB,OAAtB,EAA+BoC,CAAC,IAAE;AAC9B,WAAKijD,OAAL,CAAaC,IAAb;AACH,KAFD;AAGH;;AAEDQ,EAAAA,OAAO,GAAE;AACL,SAAKlqD,IAAL,GAAY,KAAKypD,OAAL,CAAa9oD,GAAb,CAAiB,KAAK8oD,OAAL,CAAa97C,MAA9B,CAAZ;AACH;;AAED5I,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKmlD,OAAL,GAAe,KAAKA,OAAL,CAAalkD,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKyjD,OAAL,CAAa/jD,EAAb,CAAgB,QAAhB,EAA0B,KAAKwkD,OAA/B;AACH;;AAED9kD,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAKqkD,OAAL,CAAa3T,GAAb,CAAiB,QAAjB,EAA2B,KAAKoU,OAAhC;AACH;;AAtBuD,CAA5D;;eA0BennD,cAAc,CAACpC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;AC5Bf;;AACA;;AACA;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B0E,MAAAA,WAAW,EAAE;AAACxE,QAAAA,IAAI,EAAEW;AAAP;AADc,KAAP;AAEtB;;AAEFzC,EAAAA,WAAW,GAAE;AACT;AACA,SAAKsG,WAAL,GAAmB,QAAnB;AACH;;AAED,aAAWvG,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtCwB;AAsClB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,uCAAuC,KAAKqE,WAAY;AACxD,6BAA6B,KAAKq/B,KAAM;AACxC;AACA,KALa;AAKP;;AAEFA,EAAAA,KAAK,GAAE;AACH,SAAKvlC,UAAL,CAAgB+H,aAAhB,CAA8B,cAA9B,EAA8Cw9B,KAA9C;AACH;;AAED,MAAIjjC,KAAJ,GAAW;AACP,SAAKkmD,SAAL,GAAiB,KAAKA,SAAL,IAAkB,KAAKxoD,UAAL,CAAgB+H,aAAhB,CAA8B,YAA9B,CAAnC;AACA,WAAO,KAAKygD,SAAL,CAAe9J,YAAtB;AACH;;AAjE8D,CAAnE;;eAqEet9C,cAAc,CAACpC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACzEf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC,cAAcE,sBAAd,CAAwB;AAE5D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3Bs5C,MAAAA,KAAK,EAAE;AAACp5C,QAAAA,IAAI,EAAEC;AAAP;AADoB,KAAP;AAEtB;;AAEF/B,EAAAA,WAAW,GAAE;AACT;AACA,SAAKk7C,KAAL,GAAa,CAAb;AACH;;AAED,aAAWn7C,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9DwB;AA8DlB;;AAEFkC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA,6BAA6B,KAAKi5C,KAAM;AACxC;AACA;AACA;AACA,cAAc,CAAC,KAAKgH,KAAN,GAAY,EAAZ,GAAe,qBAAK;AAClC,0CAA0C,KAAKA,KAAM;AACrD,aAAc;AACd;AACA,cAAc,CAAC,KAAKF,OAAN,GAAc,EAAd,GAAiB,qBAAK;AACpC,2CAA2C,KAAKA,OAAQ;AACxD,aAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc,CAAC,KAAKA,OAAN,IAAe,CAAC,KAAKA,OAAL,CAAakE,UAA7B,GAAwC,EAAxC,GAA2C,qBAAK;AAC9D,0CAA0C,KAAKxP,SAAU,gBAAe,KAAKsL,OAAL,CAAa+D,aAAb,CAA2Bz/C,WAAY;AAC/G,aAAc;AACd;AACA,cAAc,CAAC,KAAK4hD,OAAN,GAAc,EAAd,GAAiB,qBAAK;AACpC,8CAA8C,KAAKA,OAAQ;AAC3D,aAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjCa;AAiCP,GA5G0D,CA8G5D;;;AACAW,EAAAA,QAAQ,CAAC7kC,EAAD,EAAK6N,IAAL,EAAU;AACd,QAAIK,gBAAJ,CAAYlO,EAAZ,EAAgB,IAAhB,EAAsB6N,IAAtB;AACH;;AAED6kB,EAAAA,SAAS,CAACzxC,CAAD,EAAG;AACR,QAAIyD,MAAM,GAAGzD,CAAC,CAACyD,MAAf;AACA,QAAI4F,EAAE,GAAG,KAAK0zC,OAAL,CAAa+D,aAAb,CAA2B3iB,KAApC;AAEAH,IAAAA,YAAY,CAAC,KAAK6lB,eAAN,CAAZ;AACA,SAAKA,eAAL,GAAuB1lD,UAAU,CAACoa,CAAC,IAAE;AAEjC,UAAIuxB,IAAI,GAAGrmC,MAAM,CAAChG,KAAlB;AAEA,UAAIqsC,IAAI,IAAI,KAAKiT,OAAL,CAAajT,IAAzB,EAAgC;AAEhC,WAAKiT,OAAL,CAAajT,IAAb,GAAoBA,IAApB;AAEA,WAAKhmC,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,qBAAhB,EAAuC;AACtDC,QAAAA,OAAO,EAAE,IAD6C;AAEtDC,QAAAA,QAAQ,EAAE,IAF4C;AAGtDC,QAAAA,MAAM,EAAE;AACJ4lC,UAAAA,IAAI,EAAEA;AADF;AAH8C,OAAvC,CAAnB;AAQH,KAhBgC,EAgB9BzgC,EAhB8B,CAAjC;AAiBH;;AAzI2D,CAAhE;;eA6Ie9M,cAAc,CAACpC,GAAf,CAAmB,gBAAnB;;;;;;ACrJf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,sBAAtB,EAA8C,cAAcE,sBAAd,CAAwB;AAElE,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlCwB;AAkClB;;AAEF,MAAIuuC,SAAJ,CAAcA,SAAd,EAAwB;AACpB,SAAKya,WAAL,GAAmBza,SAAnB,CADoB,CAGpB;;AACAA,IAAAA,SAAS,CAACnqC,EAAV,CAAa,OAAb,EAAsBc,CAAC,IAAE;AACrB,WAAK/B,SAAL,CAAeC,GAAf,CAAmB,MAAnB;AACA,WAAKqJ,MAAL;AACH,KAHD;AAKA8hC,IAAAA,SAAS,CAACnqC,EAAV,CAAa,KAAb,EAAoBc,CAAC,IAAE;AACnB,WAAK/B,SAAL,CAAevC,MAAf,CAAsB,MAAtB;AACH,KAFD;AAIA2tC,IAAAA,SAAS,CAACnqC,EAAV,CAAa,QAAb,EAAuBoe,MAAM,IAAE;AAC3B,WAAK/V,MAAL;AACH,KAFD;AAGH;;AAED,MAAI8hC,SAAJ,GAAe;AAAE,WAAO,KAAKya,WAAZ;AAAyB;;AAE1C9mD,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,UAAU,KAAKqsC,SAAL,GAAe,qBAAK;AAC9B;AACA;AACA,mEAAmE,KAAK5tB,GAAI;AAC5E;AACA;AACA,kBAAkB,KAAK4tB,SAAL,CAAe/rB,MAAf,CAAsB9hB,IAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfU,GAeA,EAAG;AACb,KAjBa;AAiBP;;AAEFigB,EAAAA,GAAG,GAAE;AACD,SAAK4tB,SAAL,CAAe5tB,GAAf;AACH;;AA/EiE,CAAtE;;;;;;;;;ACFA;;AACA;;AAEAlf,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAyB;AAE9DqnD,EAAAA,gBAAgB,GAAE;AAAE,WAAO,IAAP;AAAa,GAF6B,CAI9D;AACA;AACA;AACA;AACA;;;AAEAhpD,EAAAA,WAAW,GAAE;AACT;AACA,SAAK8hD,MAAL,GAAc,CAAd;AACA,SAAKnb,SAAL,GAAiB,GAAjB;AACH;;AAED/jC,EAAAA,YAAY,GAAE;AACV;AACA,QAAIqmD,WAAW,GAAG,KAAK/nD,YAAL,CAAkB,eAAlB,MAAuC,OAAzD;AACA,SAAKgY,KAAL,CAAW+vC,WAAX;AACH;;AAEDzlD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKX,gBAAL,CAAsB,QAAtB,EAAgC,KAAKqmD,QAArC,EAA+C,IAA/C;AACH;;AAEDrlD,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK4D,mBAAL,CAAyB,QAAzB,EAAmC,KAAKyhD,QAAxC,EAAkD,IAAlD;AACH;;AAED,QAAMhwC,KAAN,CAAYiwC,cAAc,GAAC,IAA3B,EAAgC;AAC5B,SAAKrH,MAAL,GAAc,CAAd;AACA,SAAKvgC,SAAL,GAAiB,CAAjB;AACA,SAAK6nC,SAAL,GAAiB,IAAjB;AAEA,QAAID,cAAJ,EACI,MAAM,KAAKE,UAAL,CAAgB;AAAClZ,MAAAA,KAAK,EAAC;AAAP,KAAhB,CAAN,CADJ,KAGI,KAAKmZ,UAAL,CAAgB,EAAhB,EAAoB;AAACnZ,MAAAA,KAAK,EAAC;AAAP,KAApB;AACP;;AAED+Y,EAAAA,QAAQ,GAAE;AAEN,QAAI37C,KAAK,GAAG,KAAKg8C,YAAL,GAAoB,KAAKhoC,SAAzB,GAAqC,KAAK9O,YAAtD;AACA,QAAI+2C,IAAI,GAAG,CAAC,KAAKC,YAAN,IAAsBl8C,KAAK,GAAG,KAAKk8C,YAA9C;AAEA,SAAKA,YAAL,GAAoBl8C,KAApB;AAEA,QAAI,CAACi8C,IAAD,IAASj8C,KAAK,IAAI,CAAtB,EAA0B;AAE1B,QAAIA,KAAK,IAAI,KAAKo5B,SAAlB,EACI,KAAK0iB,UAAL;AACP;;AAED,QAAMA,UAAN,CAAiB;AAAClZ,IAAAA,KAAK,GAAC;AAAP,MAAc,EAA/B,EAAkC;AAE9B,QAAI,CAAC,KAAKuZ,UAAV,EAAuB;AAEvB,QAAI,KAAK/H,SAAT,EAAqB;AAErB,QAAIG,MAAM,GAAG,KAAKA,MAAlB;AAEA,SAAKH,SAAL,GAAiB,IAAjB;AACA,SAAKgI,YAAL,GAAoB,KAApB;;AACA,QAAG;AACC,UAAIlI,MAAM,GAAG,MAAM,KAAKiI,UAAL,CAAgBxa,KAAhB,CAAsB4S,MAAtB,CAAnB;AACA,WAAKwH,UAAL,CAAgB7H,MAAhB,EAAwB;AAACtR,QAAAA,KAAK,EAACA;AAAP,OAAxB;AACH,KAHD,CAGC,OAAM9qC,GAAN,EAAU;AACP,WAAKskD,YAAL,GAAoBtkD,GAApB;AACA,WAAKikD,UAAL,CAAgB,EAAhB,EAAoB;AAACnZ,QAAAA,KAAK,EAACA;AAAP,OAApB;AACH;;AACD,SAAKwR,SAAL,GAAiB,IAAjB;;AAEA,QAAIG,MAAM,IAAI,CAAd,EAAiB;AACb,WAAK/4C,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,iBAAhB,EAAkC;AACjDG,QAAAA,MAAM,EAAE;AAAC+Q,UAAAA,IAAI,EAAE,KAAKwvC;AAAZ,SADyC;AAEjDzgD,QAAAA,OAAO,EAAE,IAFwC;AAGjDC,QAAAA,QAAQ,EAAE;AAHuC,OAAlC,CAAnB;AAKH;;AAED,QAAI,KAAKygD,YAAT,EACI,MAAM,KAAKA,YAAX;AACP,GArF6D,CAuF9D;;;AAEAL,EAAAA,UAAU,CAAC7H,MAAD,EAAS;AAACtR,IAAAA,KAAK,GAAC;AAAP,MAAc,EAAvB,EAA0B;AAEhC,SAAK2R,MAAL,IAAeL,MAAM,CAAC16C,MAAtB;AAEA,QAAIopC,KAAJ,EACI,KAAKrxC,SAAL,GAAiB,EAAjB;;AAEJ,QAAI,KAAKgjD,MAAL,IAAe,CAAnB,EAAsB;AAClB,UAAI8H,SAAS,GAAG,KAAK99C,KAAL,IAAc,KAAKA,KAAL,EAA9B;;AACA,UAAI89C,SAAJ,EAAe;AACXA,QAAAA,SAAS,CAACC,WAAV,GAAwB,KAAKF,YAA7B;AACA,aAAKtpD,WAAL,CAAiBupD,SAAjB;AACH;;AACD;AACH;;AAEDnI,IAAAA,MAAM,CAAC7hD,OAAP,CAAemzC,KAAK,IAAE;AAElB,UAAInkB,OAAO,GAAG,KAAKA,OAAL,IAAgB,KAAKA,OAAL,CAAa,KAAKw6B,SAAlB,EAA6BrW,KAA7B,CAA9B;;AACA,UAAInkB,OAAJ,EAAa;AACT,aAAKvuB,WAAL,CAAiBuuB,OAAjB;AACH;;AAED,UAAIoe,GAAG,GAAG,KAAKA,GAAL,IAAY,KAAKA,GAAL,CAAS+F,KAAT,CAAtB;;AACA,UAAI/F,GAAJ,EAAS;AACL,aAAK3sC,WAAL,CAAiB2sC,GAAjB;AACH;;AAED,WAAKoc,SAAL,GAAiBrW,KAAjB;AACH,KAbD;AAeA3vC,IAAAA,UAAU,CAAC,KAAK0mD,qBAAL,CAA2BrlD,IAA3B,CAAgC,IAAhC,CAAD,CAAV;AACH;;AAEDqlD,EAAAA,qBAAqB,GAAE;AACnB,QAAI,KAAKP,YAAL,IAAqB,KAAK92C,YAA9B,EAA4C;AACxC,WAAK42C,UAAL;AACH;AACJ;;AA/H6D,CAAlE;;eAmIe7nD,cAAc,CAACpC,GAAf,CAAmB,iBAAnB;;;;;;ACnIf;;AAHA;AACA;AACA;AAGAuC,uBAAWmE,SAAX,CAAqBw+B,CAArB,GAAyB,UAASpK,KAAT,EAAe;AACpC,SAAO,KAAK/xB,aAAL,CAAmB+xB,KAAnB,CAAP;AACH,CAFD;;AAIAv4B,uBAAWmE,SAAX,CAAqBikD,IAArB,GAA4B,UAAS7vB,KAAT,EAAe;AACvC,SAAO,KAAKsK,gBAAL,CAAsBtK,KAAtB,CAAP;AACH,CAFD;;AAIAv4B,uBAAWmE,SAAX,CAAqBy+B,EAArB,GAA0B,UAASrK,KAAT,EAAe;AACrC,SAAO,KAAK95B,UAAL,GAAkB,KAAKA,UAAL,CAAgB+H,aAAhB,CAA8B+xB,KAA9B,CAAlB,GAAyD,KAAK/xB,aAAL,CAAmB+xB,KAAnB,CAAhE;AACH,CAFD;;AAIAv4B,uBAAWmE,SAAX,CAAqBkkD,KAArB,GAA6B,UAAS9vB,KAAT,EAAe;AACxC,SAAO,KAAK95B,UAAL,GAAkB,KAAKA,UAAL,CAAgBokC,gBAAhB,CAAiCtK,KAAjC,CAAlB,GAA4D,KAAKsK,gBAAL,CAAsBtK,KAAtB,CAAnE;AACH,CAFD;;;;;;;;;ACjBA;;;;AAEA,MAAMnlB,OAAO,IAAG,kBAAkBjS,MAArB,CAAb;;AAEA,MAAMmnD,SAAN,SAAwB3rD,GAAxB,CAA4B;AAExB,MAAImjD,MAAJ,GAAY;AACR,WAAO5hD,KAAK,CAACqC,IAAN,CAAW,KAAKyzB,MAAL,EAAX,CAAP;AACH;;AAED,MAAIu0B,QAAJ,GAAc;AACV,WAAOrqD,KAAK,CAACqC,IAAN,CAAW,KAAKC,IAAL,EAAX,CAAP;AACH;;AAED,MAAI4E,MAAJ,GAAY;AAAE,WAAO,KAAKtG,IAAZ;AAAkB;;AAVR;;AAa5B,MAAM0pD,cAAc,GAAE,CAClB,WADkB,EAElB,aAFkB,EAGlB,WAHkB,EAIlB,YAJkB,EAKlB,WALkB,EAMlB,OANkB,CAAtB;;AASe,MAAMC,SAAN,CAAgB;AAE3BpqD,EAAAA,WAAW,CAAC4oC,IAAD,EAAOyhB,WAAP,EAAoBx4B,IAAI,GAAC,EAAzB,EAA4B;AAEnC,SAAKA,IAAL,GAAYlsB,MAAM,CAAC0J,MAAP,CAAc;AACtB6wB,MAAAA,OAAO,EAAE,IADa;AAEtBoqB,MAAAA,YAAY,EAAE,YAFQ;AAGtBC,MAAAA,gBAAgB,EAAE,IAHI;AAItBC,MAAAA,QAAQ,EAAE,IAJY;AAKtBC,MAAAA,mBAAmB,EAAE,EALC;AAMtBC,MAAAA,sBAAsB,EAAE,CANF;AAOtBC,MAAAA,OAAO,EAAE,MAAI,CAAE,CAPO;AAQtBC,MAAAA,KAAK,EAAE,MAAI,CAAE,CARS;AAStB30C,MAAAA,QAAQ,EAAEsM,MAAM,IAAE,CAAE;AATE,KAAd,EAUTsP,IAVS,CAAZ;AAYA,SAAKg5B,MAAL,GAAc;AACVC,MAAAA,IAAI,EAAE/1C,OAAO,GAAG,YAAH,GAAkB,WADrB;AAEVg2C,MAAAA,EAAE,EAAEh2C,OAAO,GAAG,UAAH,GAAgB,SAFjB;AAGVi2C,MAAAA,IAAI,EAAEj2C,OAAO,GAAG,WAAH,GAAiB;AAHpB,KAAd;AAMA,QAAI,KAAK8c,IAAL,CAAUqO,OAAd,EACI,KAAKrO,IAAL,CAAUqO,OAAV,CAAkBoO,SAAlB,GAA8B,IAA9B;AAEJ,SAAK/rB,MAAL,GAAc,IAAI0nC,SAAJ,EAAd;AAEA,SAAKrhB,IAAL,GAAYA,IAAZ;AACA,SAAKyhB,WAAL,GAAmBA,WAAW,CAACliC,WAAZ,EAAnB;AAEA,SAAK8iC,QAAL,GAAgB,KAAKp5B,IAAL,CAAUy4B,YAA1B,CA5BmC,CA8BnC;;AACA,SAAKrjD,eAAL,GAAuB,KAAKA,eAAL,CAAqBxC,IAArB,CAA0B,IAA1B,CAAvB,CA/BmC,CAgCnC;;AACA,SAAKykD,QAAL,GAAgB,KAAKA,QAAL,CAAczkD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAK0sB,SAAL,GAAiB,KAAKA,SAAL,CAAe1sB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKymD,WAAL,GAAmB,KAAKA,WAAL,CAAiBzmD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK0mD,SAAL,GAAiB,KAAKA,SAAL,CAAe1mD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAK2mD,WAAL,GAAmB,KAAKA,WAAL,CAAiB3mD,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAED,MAAI4mD,IAAJ,GAAU;AAAE,WAAO,KAAKC,IAAL,KAAc,IAArB;AAA2B;;AAEvCC,EAAAA,KAAK,CAACtmD,CAAD,EAAG;AAEJ,QAAI,KAAKomD,IAAT,EAAgB;AAEhB,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAK1iB,IAAL,CAAU/nC,YAAV,CAAuB,cAAvB,EAAuC,EAAvC;AAEA,SAAK2qD,UAAL,CAAgBvmD,CAAhB,EAPI,CASJ;;AACA,QAAIA,CAAJ,EAAO;AACH,WAAKwmD,SAAL,GAAiB,IAAjB;AACA,WAAKC,UAAL,GAAkB,KAAKC,WAAL,CAAiB1mD,CAAjB,CAAlB;AACA,WAAK25C,MAAL,CAAY,KAAK8M,UAAjB;AACH;;AAED,SAAK75B,IAAL,CAAU84B,OAAV;AACA,SAAKhI,IAAL,CAAU,OAAV;AACH;;AAEDjiC,EAAAA,GAAG,GAAE;AACD,SAAK4qC,IAAL,GAAY,KAAZ;AACA,SAAK1iB,IAAL,CAAUhoC,eAAV,CAA0B,cAA1B;AACA,SAAKgrD,YAAL;AACA,QAAI;AAAC7gD,MAAAA;AAAD,QAAU,KAAK8gD,QAAL,EAAd;AACA9gD,IAAAA,KAAK,CAACnL,OAAN,CAAcqL,IAAI,IAAE;AAChB,WAAK6gD,SAAL,CAAe7gD,IAAf;AACH,KAFD;AAIA,SAAK4mB,IAAL,CAAU+4B,KAAV;AACA,SAAKjI,IAAL,CAAU,KAAV;AACH;;AAED6I,EAAAA,UAAU,CAACvmD,CAAD,EAAG;AACT;AACA;AACAklD,IAAAA,cAAc,CAACvqD,OAAf,CAAuBmsD,GAAG,IAAE;AACxB,WAAKnjB,IAAL,CAAU/lC,gBAAV,CAA2BkpD,GAA3B,EAAgC,KAAK9kD,eAArC,EAAsD,IAAtD;AACH,KAFD;AAIAnE,IAAAA,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKsuB,SAAxC;AACA,SAAKyX,IAAL,CAAU/lC,gBAAV,CAA2B,QAA3B,EAAqC,KAAKqmD,QAA1C,EAAoD,IAApD;AACA,SAAKtgB,IAAL,CAAU/lC,gBAAV,CAA2B,KAAKgoD,MAAL,CAAYC,IAAvC,EAA6C,KAAKI,WAAlD,EAA+D,IAA/D;AACA,SAAKtiB,IAAL,CAAU/lC,gBAAV,CAA2B,KAAKgoD,MAAL,CAAYE,EAAvC,EAA2C,KAAKI,SAAhD,EAA2D,IAA3D;AAEA,QAAIlmD,CAAC,IAAIA,CAAC,CAACkE,MAAP,IAAiBlE,CAAC,CAACkE,MAAF,CAAS3C,QAA9B,EACI,KAAKoiC,IAAL,CAAU/lC,gBAAV,CAA2B,KAAKgoD,MAAL,CAAYG,IAAvC,EAA6C,KAAKI,WAAlD,EAA+D,IAA/D;AACP;;AAEDQ,EAAAA,YAAY,GAAE;AACVzB,IAAAA,cAAc,CAACvqD,OAAf,CAAuBmsD,GAAG,IAAE;AACxB,WAAKnjB,IAAL,CAAUnhC,mBAAV,CAA8BskD,GAA9B,EAAmC,KAAK9kD,eAAxC,EAAyD,IAAzD;AACH,KAFD;AAIAnE,IAAAA,MAAM,CAAC2E,mBAAP,CAA2B,SAA3B,EAAsC,KAAK0pB,SAA3C;AACA,SAAKyX,IAAL,CAAUnhC,mBAAV,CAA8B,QAA9B,EAAwC,KAAKyhD,QAA7C,EAAuD,IAAvD;AACA,SAAKtgB,IAAL,CAAUnhC,mBAAV,CAA8B,KAAKojD,MAAL,CAAYG,IAA1C,EAAgD,KAAKI,WAArD,EAAkE,IAAlE;AACA,SAAKxiB,IAAL,CAAUnhC,mBAAV,CAA8B,KAAKojD,MAAL,CAAYC,IAA1C,EAAgD,KAAKI,WAArD,EAAkE,IAAlE;AACA,SAAKtiB,IAAL,CAAUnhC,mBAAV,CAA8B,KAAKojD,MAAL,CAAYE,EAA1C,EAA8C,KAAKI,SAAnD,EAA8D,IAA9D;AACH;;AAEDU,EAAAA,QAAQ,CAACz9C,KAAD,EAAQsS,GAAR,EAAY;AAChB,QAAI3V,KAAK,GAAGlL,KAAK,CAACqC,IAAN,CAAW,KAAK0mC,IAAL,CAAUpE,gBAAV,CAA2B,KAAK6lB,WAAhC,CAAX,CAAZ;AAEA,QAAI,OAAOj8C,KAAP,KAAiB,QAArB,EACIA,KAAK,GAAGrD,KAAK,CAACqD,KAAD,CAAb;AAEJ,QAAI,OAAOsS,GAAP,KAAe,QAAnB,EACIA,GAAG,GAAG3V,KAAK,CAAC2V,GAAD,CAAX;AAEJ,QAAIsrC,QAAQ,GAAG,KAAKP,SAAL,IAAgB,KAAKA,SAAL,CAAer9C,KAA9C;AACA,QAAI69C,MAAM,GAAG,KAAKR,SAAL,IAAgB,KAAKA,SAAL,CAAe/qC,GAA5C;;AAEA,QAAItS,KAAK,IAAIsS,GAAb,EAAkB;AACd,UAAIwrC,UAAU,GAAGnhD,KAAK,CAAC+S,OAAN,CAAc1P,KAAd,CAAjB;AACA,UAAI+9C,QAAQ,GAAGphD,KAAK,CAAC+S,OAAN,CAAc4C,GAAd,CAAf;;AAEA,UAAIwrC,UAAU,IAAI,CAAC,CAAf,IAAoBC,QAAQ,IAAI,CAAC,CAArC,EAAwC;AACpC/9C,QAAAA,KAAK,GAAG,IAAR;AACAsS,QAAAA,GAAG,GAAG,IAAN;AACH,OAHD,MAGK;AACDtS,QAAAA,KAAK,GAAG89C,UAAU,GAAGC,QAAb,GAAwBD,UAAxB,GAAqCC,QAA7C;AACAzrC,QAAAA,GAAG,GAAGwrC,UAAU,GAAGC,QAAb,GAAwBA,QAAxB,GAAmCD,UAAzC;AACH;;AAED,WAAKT,SAAL,GAAiB;AAAC1gD,QAAAA,KAAD;AAAQqD,QAAAA,KAAR;AAAesS,QAAAA;AAAf,OAAjB;AACH;;AAED,WAAO;AAAC3V,MAAAA,KAAD;AAAQqD,MAAAA,KAAR;AAAesS,MAAAA,GAAf;AAAoBsrC,MAAAA,QAApB;AAA8BC,MAAAA;AAA9B,KAAP;AACH;;AAEDrN,EAAAA,MAAM,CAAC3zC,IAAD,EAAOmhD,SAAP,EAAiB;AAEnB,QAAInhD,IAAI,YAAYm1C,KAApB,EACIn1C,IAAI,GAAG,KAAK0gD,WAAL,CAAiB1gD,IAAjB,CAAP;AAEJ,QAAI,CAACA,IAAL,EAAY;;AAEZ,QAAI,CAACmhD,SAAL,EAAgB;AACZ,WAAKC,aAAL,CAAmBphD,IAAnB;;AAEA,WAAK4mB,IAAL,CAAU5b,QAAV,CAAmB,KAAKsM,MAAxB;AACA,WAAKogC,IAAL,CAAU,QAAV,EAAoB,KAAKpgC,MAAzB;AAEA,UAAI,KAAKsP,IAAL,CAAU04B,gBAAV,IAA8B,KAAKhoC,MAAL,CAAY9hB,IAAZ,IAAoB,CAAtD,EACI2C,UAAU,CAAC,MAAI,KAAKsd,GAAL,EAAL,CAAV,CAPQ,CAOmB;;AAE/B;AACH;;AAED,QAAI;AAAC3V,MAAAA,KAAD;AAAQqD,MAAAA,KAAR;AAAesS,MAAAA,GAAf;AAAoBsrC,MAAAA,QAApB;AAA8BC,MAAAA;AAA9B,QAAwC,KAAKJ,QAAL,CAAcO,SAAd,EAAyBnhD,IAAzB,CAA5C;AACA,QAAIqhD,YAAY,GAAGF,SAAS,CAAC7qD,YAAV,CAAuB,KAAK0pD,QAA5B,CAAnB;AAEAlgD,IAAAA,KAAK,CAACnL,OAAN,CAAc,CAAC2sD,KAAD,EAAOziD,CAAP,KAAW;AACrB,UAAIA,CAAC,IAAIsE,KAAL,IAActE,CAAC,IAAI4W,GAAvB,EACG4rC,YAAY,GAAG,KAAKE,OAAL,CAAaD,KAAb,CAAH,GAAyB,KAAKT,SAAL,CAAeS,KAAf,CAArC,CADH,KAGK,IAAIP,QAAQ,KAAK,KAAb,IAAsBC,MAAM,KAAK,KAAjC,IAA0CniD,CAAC,IAAIkiD,QAA/C,IAA2DliD,CAAC,IAAImiD,MAApE,EACD,KAAKH,SAAL,CAAeS,KAAf;AACP,KAND;AAQA,SAAK5J,IAAL,CAAU,QAAV,EAAoB,KAAKpgC,MAAzB;AAEA,QAAI,KAAKsP,IAAL,CAAU04B,gBAAV,IAA8B,KAAKhoC,MAAL,CAAY9hB,IAAZ,IAAoB,CAAtD,EACI2C,UAAU,CAAC,MAAI,KAAKsd,GAAL,EAAL,CAAV,CAjCe,CAiCY;AAClC;;AAED2rC,EAAAA,aAAa,CAACphD,IAAD,EAAM;AACf,QAAIA,IAAI,CAAC1J,YAAL,CAAkB,KAAK0pD,QAAvB,CAAJ,EACI,KAAKa,SAAL,CAAe7gD,IAAf,EADJ,KAGI,KAAKuhD,OAAL,CAAavhD,IAAb;AACP;;AAEDuhD,EAAAA,OAAO,CAACvhD,IAAD,EAAM;AACTA,IAAAA,IAAI,CAACpK,YAAL,CAAkB,KAAKoqD,QAAvB,EAAiC,EAAjC;AACA,SAAK1oC,MAAL,CAAYljB,GAAZ,CAAgB4L,IAAhB,EAAsBA,IAAI,CAAC8nC,KAAL,IAAY9nC,IAAlC;AACH;;AAED6gD,EAAAA,SAAS,CAAC7gD,IAAD,EAAM;AACXA,IAAAA,IAAI,CAACrK,eAAL,CAAqB,KAAKqqD,QAA1B;AACA,SAAK1oC,MAAL,CAAYoa,MAAZ,CAAmB1xB,IAAnB;AACH;;AAEDhE,EAAAA,eAAe,CAAChC,CAAD,EAAG;AACdA,IAAAA,CAAC,CAACsD,cAAF;AACAtD,IAAAA,CAAC,CAACwnD,wBAAF;AACAxnD,IAAAA,CAAC,CAACgC,eAAF;AACH;;AAEDiiD,EAAAA,QAAQ,GAAE;AACN,QAAIn0C,OAAO,IAAI,CAAC,KAAK23C,WAAjB,IAAgC,CAAC,KAAKjB,SAA1C,EAAqD;AACjD,WAAKkB,UAAL,GAAkB,IAAI3+C,IAAJ,GAAWC,OAAX,EAAlB;AACH;AACJ;;AAEDkjB,EAAAA,SAAS,CAAClsB,CAAD,EAAG;AACR,QAAI,KAAK4sB,IAAL,CAAU24B,QAAV,IAAsBvlD,CAAC,CAACkF,GAAF,IAAS,QAAnC,EACI,KAAKuW,GAAL;AACP;;AAEDwqC,EAAAA,WAAW,CAACjmD,CAAD,EAAG;AAEV;AACA,QAAIA,CAAC,CAAC2nD,MAAF,KAAa/3C,SAAb,IAA0B5P,CAAC,CAAC2nD,MAAF,KAAa,CAA3C,EAA+C;AAE/C3nD,IAAAA,CAAC,CAACgC,eAAF,GALU,CAOV;;AACA,SAAK2hC,IAAL,CAAU/lC,gBAAV,CAA2B,KAAKgoD,MAAL,CAAYG,IAAvC,EAA6C,KAAKI,WAAlD,EAA+D,IAA/D;AAEA,QAAIngD,IAAI,GAAG,KAAK0gD,WAAL,CAAiB1mD,CAAjB,CAAX;AAEA,QAAIgG,IAAJ,EACA,KAAK4hD,YAAL,GAAoBzpD,UAAU,CAAC,MAAI;AAE/B,UAAIkL,EAAE,GAAG,IAAIN,IAAJ,GAAWC,OAAX,EAAT,CAF+B,CAI/B;;AACA,aAAO,KAAK4+C,YAAZ;AAEA,UAAI,KAAKF,UAAL,IAAmBr+C,EAAE,GAAC,KAAKq+C,UAAR,IAAoB,EAA3C,EAAgD;AAEhD,aAAO,KAAKA,UAAZ;AAEA,WAAKlB,SAAL,GAAiB,IAAjB;AACA,WAAKC,UAAL,GAAkBzgD,IAAlB;;AACA,WAAKuhD,OAAL,CAAavhD,IAAb;AAEH,KAf6B,EAe3B,GAf2B,CAA9B;AAgBH;;AAEDkgD,EAAAA,SAAS,CAAClmD,CAAD,EAAG;AAER,SAAKgC,eAAL,CAAqBhC,CAArB;AACA,SAAKwmD,SAAL,GAAiB,KAAjB;AACA,SAAKqB,UAAL,CAAgB,KAAhB;AACA7pB,IAAAA,YAAY,CAAC,KAAK4pB,YAAN,CAAZ;AAEA,QAAIv+C,EAAE,GAAG,IAAIN,IAAJ,GAAWC,OAAX,EAAT;;AAEA,QAAI,KAAK4+C,YAAL,KAAsB,CAAC,KAAKF,UAAN,IAAoBr+C,EAAE,GAAC,KAAKq+C,UAAR,GAAmB,EAA7D,CAAJ,EAAsE;AAElE,aAAO,KAAKE,YAAZ;AACA,UAAI5hD,IAAI,GAAG,KAAK0gD,WAAL,CAAiB1mD,CAAjB,CAAX;AACA,WAAK25C,MAAL,CAAY3zC,IAAZ,EAAkBhG,CAAC,CAACsY,QAAF,GAAW,KAAKmuC,UAAhB,GAA2B,IAA7C;AAEA,UAAI,CAACzmD,CAAC,CAACsY,QAAP,EACI,KAAKmuC,UAAL,GAAkBzgD,IAAlB;AAEP,KATD,MASK;AACD,aAAO,KAAKygD,UAAZ;AACA,aAAO,KAAKqB,cAAZ;AACH;;AAED,WAAO,KAAKJ,UAAZ;AACA,SAAK/jB,IAAL,CAAUnhC,mBAAV,CAA8B,KAAKojD,MAAL,CAAYG,IAA1C,EAAgD,KAAKI,WAArD,EAAkE,IAAlE;AACH;;AAEDA,EAAAA,WAAW,CAACnmD,CAAD,EAAG;AAEV,QAAI,KAAKwmD,SAAT,EACI,KAAKxkD,eAAL,CAAqBhC,CAArB;AAEJ,QAAI,KAAK4nD,YAAL,IAAsB,KAAKF,UAAL,IAAmB,CAAC,KAAKD,WAAnD,EAAkE,OALxD,CAOV;;AACA,QAAIznD,CAAC,CAAC+nD,cAAN,EAAsB;AAElB,UAAI;AAAC55B,QAAAA,OAAD;AAAUC,QAAAA;AAAV,UAAqBpuB,CAAC,CAAC+nD,cAAF,CAAiB,CAAjB,CAAzB;;AAEA,UAAI,KAAKn7B,IAAL,CAAU44B,mBAAV,KAAkC,KAAtC,EAA4C;AAExC,YAAIwC,QAAQ,GAAG,KAAKrkB,IAAL,CAAUrvB,qBAAV,EAAf;AAEA,YAAImI,GAAG,GAAGurC,QAAQ,CAACvzC,CAAT,GAAa,KAAKmY,IAAL,CAAU44B,mBAAjC;AACA,YAAI9oC,MAAM,GAAGsrC,QAAQ,CAACvzC,CAAT,GAAauzC,QAAQ,CAAC36C,MAAtB,GAA+B,KAAKuf,IAAL,CAAU44B,mBAAtD;AAEA,YAAIyC,YAAY,GAAG,CAAC,KAAKr7B,IAAL,CAAU64B,sBAAV,IAAkC,CAAnC,IAAwC,EAA3D,CAPwC,CASxC;;AACA,YAAIr3B,OAAO,GAAG3R,GAAd,EACI,KAAKorC,UAAL,CAAgB,CAAC,CAAD,GAAKxiD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACuwC,GAAL,CAASn5B,GAAG,GAAC2R,OAAb,EAAsB65B,YAAtB,CAAX,CAArB,EADJ,CAGA;AAHA,aAIK,IAAI75B,OAAO,GAAG1R,MAAd,EACD,KAAKmrC,UAAL,CAAgB,IAAIxiD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACuwC,GAAL,CAASxnB,OAAO,GAAC1R,MAAjB,EAAyBurC,YAAzB,CAAX,CAApB,EADC,CAGL;AAHK,eAKD,KAAKJ,UAAL,CAAgB,KAAhB;AAEP;;AAED,UAAI7hD,IAAI,GAAG,KAAK29B,IAAL,CAAUxhC,WAAV,GAAwB+lD,gBAAxB,CAAyC/5B,OAAzC,EAAkDC,OAAlD,CAAX;;AAEA,UAAIpoB,IAAI,IAAIA,IAAI,CAACyN,OAAL,IAAgB,KAAK2xC,WAA7B,IACDp/C,IAAI,IAAI,KAAK8hD,cADhB,EACgC;AAC5B,aAAKA,cAAL,GAAsB9hD,IAAtB;AACA,aAAK2zC,MAAL,CAAY3zC,IAAZ,EAAkB,KAAKygD,UAAvB;AACH,OAjCiB,CAmCtB;;AACC,KApCD,MAoCK;AACD;AACA;AACA,UAAIzgD,IAAI,GAAGhG,CAAX;AACA,WAAK25C,MAAL,CAAY3zC,IAAZ,EAAkB,KAAKygD,UAAvB;AACH;AACJ;;AAEDC,EAAAA,WAAW,CAAC1mD,CAAD,EAAG;AACV,QAAIysB,IAAI,GAAGzsB,CAAC,CAACmoD,YAAF,EAAX;AACA,WAAO17B,IAAI,CAAC7pB,IAAL,CAAUutC,GAAG,IAAEA,GAAG,CAAC18B,OAAJ,IAAa,KAAK2xC,WAAjC,CAAP;AACH;;AAEDyC,EAAAA,UAAU,CAACO,KAAK,GAAC,CAAP,EAAS;AAEf,QAAIA,KAAK,IAAI,KAAT,IAAkB,KAAKC,gBAAL,IAAyBD,KAA/C,EAAsD;AAClDv/C,MAAAA,aAAa,CAAC,KAAK4+C,WAAN,CAAb;;AAEA,UAAIW,KAAK,IAAI,KAAb,EAAoB;AAChB,eAAO,KAAKX,WAAZ;AACA,eAAO,KAAKY,gBAAZ;AACH;AACJ;;AAED,QAAID,KAAK,KAAK,KAAV,IAAmB,KAAKC,gBAAL,IAAyBD,KAAhD,EAAuD;AACnD,WAAKC,gBAAL,GAAwBD,KAAxB;AAEA,WAAKzkB,IAAL,CAAUrnB,SAAV,GAAsB,KAAKqnB,IAAL,CAAUrnB,SAAV,GAAoB,KAAK+rC,gBAA/C;AAEA,WAAKZ,WAAL,GAAmBx+C,WAAW,CAAC,MAAI;AAC/B,aAAK06B,IAAL,CAAUrnB,SAAV,GAAsB,KAAKqnB,IAAL,CAAUrnB,SAAV,GAAoB,KAAK+rC,gBAA/C;AACH,OAF6B,EAE5B,EAF4B,CAA9B;AAGH;AACJ;;AApV0B;;;AAwV/B,+BAAQlD,SAAS,CAACtkD,SAAlB;;;;;;;;;AClXA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEAtE,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErD3B,EAAAA,WAAW,GAAE;AACT;AAEA,SAAKmxB,SAAL,GAAiB,KAAKA,SAAL,CAAe1sB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAK8oD,OAAL,GAAe,KAAKA,OAAL,CAAa9oD,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAK+oD,SAAL,GAAiB,KAAKA,SAAL,CAAe/oD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKgpD,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBhpD,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKipD,aAAL,GAAqB,KAAKA,aAAL,CAAmBjpD,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAED,MAAI48C,IAAJ,GAAU;AAAE,WAAO,KAAKE,MAAZ;AAAoB;;AAChC,MAAIF,IAAJ,CAASA,IAAT,EAAc;AACV,QAAI1P,SAAS,GAAG,KAAKgc,oBAAL,IAA6B,KAAKpM,MAAL,IAAeF,IAA5D;AACA,SAAKE,MAAL,GAAcF,IAAd;AACA,SAAKqI,UAAL,CAAgBrI,IAAhB,GAAuBA,IAAvB;AACA,SAAKsM,oBAAL,GAA4B,IAA5B,CAJU,CAMV;;AACA,QAAIhc,SAAJ,EACI,KAAKic,eAAL,GAAuB,KAAKC,OAAL,EAAvB,GAAwC,KAAKC,MAAL,EAAxC;AACP;;AAED,MAAI3jD,GAAJ,CAAQA,GAAR,EAAY;AAAE,SAAK4jD,KAAL,GAAa5jD,GAAb;AAAkB;;AAChC,MAAIA,GAAJ,GAAS;AACL,WAAO,KAAK4jD,KAAL,IAAc,KAAK7sD,YAAL,CAAkB,KAAlB,CAArB;AACH;;AAED,MAAI8gD,OAAJ,GAAa;AACT,QAAI,CAAC,KAAKgM,SAAV,EACI,KAAKhM,OAAL,GAAe,EAAf;AAEJ,WAAO,KAAKgM,SAAZ;AACH;;AACD,MAAIhM,OAAJ,CAAYA,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKgM,SAAV,EAAqB;AACjB,WAAKA,SAAL,GAAiB,IAAI/I,gBAAJ,EAAjB;AACA,WAAKjD,OAAL,CAAa73C,GAAb,GAAmB,KAAKA,GAAxB;AACA,WAAK63C,OAAL,CAAapZ,IAAb,GAAoB,IAApB;AACA,WAAK8gB,UAAL,CAAgB1H,OAAhB,GAA0B,KAAKA,OAA/B;AACA,WAAKA,OAAL,CAAa79C,EAAb,CAAgB,QAAhB,EAA0B,KAAKokD,cAAL,CAAoB9jD,IAApB,CAAyB,IAAzB,CAA1B;AACH;;AAED,SAAKu9C,OAAL,CAAa6D,GAAb,CAAiB7D,OAAjB;AACH;;AAED,MAAIE,KAAJ,GAAW;AAAE,WAAO,KAAK+L,OAAZ;AAAqB;;AAClC,MAAI/L,KAAJ,CAAUA,KAAV,EAAgB;AACZ,QAAI,CAAC,KAAK+L,OAAV,EAAmB;AACf,WAAKA,OAAL,GAAe,IAAI5G,cAAJ,EAAf;AACA,WAAKnF,KAAL,CAAW/3C,GAAX,GAAiB,KAAKA,GAAtB;AACA,WAAK+3C,KAAL,CAAWtZ,IAAX,GAAkB,IAAlB;AACA,WAAK8gB,UAAL,CAAgBxH,KAAhB,GAAwB,KAAKA,KAA7B;AACA,WAAKA,KAAL,CAAW/9C,EAAX,CAAc,QAAd,EAAwB,KAAK+pD,YAAL,CAAkBzpD,IAAlB,CAAuB,IAAvB,CAAxB;AACH;;AAED,SAAKy9C,KAAL,CAAW2D,GAAX,CAAe3D,KAAf;AACH;;AAED,MAAIhQ,MAAJ,GAAY;AAAE,WAAO,KAAKgW,OAAL,IAAc,KAAKA,OAAL,CAAa97C,MAAlC;AAAyC;;AACvD,MAAI8lC,MAAJ,CAAW/wC,GAAX,EAAe;AAAE,QAAG,KAAK+mD,OAAR,EAAiB,KAAKA,OAAL,CAAa97C,MAAb,GAAsBjL,GAAtB;AAA0B;;AAC5D,MAAI+mD,OAAJ,GAAa;AACT,QAAI,CAAC,KAAKiG,SAAN,IAAmB,KAAKC,WAAxB,IAAuC,KAAKA,WAAL,CAAiBlG,OAA5D,EAAoE;AAChE,WAAKiG,SAAL,GAAiB,IAAIlG,gBAAJ,CAAY,KAAKmG,WAAL,CAAiBlG,OAA7B,CAAjB;AACA,WAAKA,OAAL,CAAa/9C,GAAb,GAAmB,KAAKA,GAAxB;AACA,WAAK+9C,OAAL,CAAatf,IAAb,GAAoB,IAApB;AACA,WAAK/nC,YAAL,CAAkB,QAAlB,EAA4B,KAAKqxC,MAAjC;AACA,WAAKgW,OAAL,CAAa/jD,EAAb,CAAgB,QAAhB,EAA0B+tC,MAAM,IAAE;AAC9B,aAAKrxC,YAAL,CAAkB,QAAlB,EAA4B,KAAKqxC,MAAjC;AACA,aAAK1lC,MAAL;AACA,aAAKshD,MAAL;AACH,OAJD;AAKH;;AAED,WAAO,KAAKK,SAAZ;AACH;;AAED,MAAIzE,UAAJ,GAAgB;AACZ,QAAI,CAAC,KAAK2E,YAAV,EAAwB;AACpB,WAAKA,YAAL,GAAoB,IAAIvN,eAAJ,CAAe,KAAKsN,WAApB,CAApB;;AACA,WAAKC,YAAL,CAAkBlqD,EAAlB,CAAqB,cAArB,EAAqC+2C,KAAK,IAAE;AACxC,aAAKhb,OAAL,CAAagb,KAAb,GAAqBA,KAArB;AACH,OAFD;AAGH;;AACD,WAAO,KAAKmT,YAAZ;AACH;;AAED,aAAWtuD,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhGwB;AAgGlB;;AAEF,MAAI4D,OAAJ,GAAa;AACT,WAAO,KAAK2qD,SAAL,GAAiB,KAAKA,SAAL,IACD,KAAKnmD,aAAL,CAAmB,kBAAnB,CADC,IAED,KAAK/H,UAAL,CAAgB+H,aAAhB,CAA8B,mBAA9B,CAFvB;AAGH;;AAEDlG,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA,iBAAiB,KAAKssD,YAAL,IAAmB,EAAG;AACvC;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAKvM,OAAQ,WAAU,KAAKE,KAAM,aAAY,KAAKgG,OAAQ;AAC9F,mCAAmC,KAAKsG,kBAAmB;AAC3D;AACA;AACA;AACA,4DAA4D,KAAKX,OAAQ;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAKJ,kBAAmB;AAC9C,oBAAoB,KAAKD,SAAU;AACnC,uBAAuB,KAAKE,aAAc;AAC1C,0BAA0B,KAAKhE,UAAW;AAC1C,4BAA6B,KAAK0E,WAAL,IAAkB,KAAKA,WAAL,CAAiBpN,WAAa;AAC7E,sBAAsB,KAAK9O,MAAO;AAClC;AACA;AACA,KAjCa;AAiCP;;AAEF1uC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEAV,IAAAA,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKsuB,SAAxC,EAAmD,IAAnD;AACAruB,IAAAA,MAAM,CAACD,gBAAP,CAAwB,OAAxB,EAAiC,KAAK0qD,OAAtC,EAA+C,IAA/C;AAEA,QAAI7pD,IAAI,GAAG,KAAK0D,WAAL,GAAmB1D,IAA9B;;AAEN,QAAIA,IAAJ,EAAU;AACA,WAAKA,IAAL,GAAYA,IAAZ;AACAA,MAAAA,IAAI,CAACklC,IAAL,GAAYllC,IAAI,CAACklC,IAAL,IAAa,IAAzB;AACH;AACJ;;AAED/kC,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AAEAf,IAAAA,MAAM,CAAC2E,mBAAP,CAA2B,SAA3B,EAAsC,KAAK0pB,SAA3C,EAAsD,IAAtD;AACAruB,IAAAA,MAAM,CAAC2E,mBAAP,CAA2B,OAA3B,EAAoC,KAAK8lD,OAAzC,EAAkD,IAAlD;AAEA,QAAI,KAAK7pD,IAAL,IAAa,KAAKA,IAAL,CAAUklC,IAAV,IAAkB,IAAnC,EACI,OAAO,KAAKllC,IAAZ;AACP;;AAEDytB,EAAAA,SAAS,CAAClsB,CAAD,EAAG;AACR,QAAIA,CAAC,CAACyD,MAAF,KAAa9J,QAAQ,CAACsY,IAA1B,EAAiC;AACjC,QAAI,CAACjS,CAAC,CAACwY,OAAH,IAAc,CAACxY,CAAC,CAACoxC,OAArB,EAA+B;AAC/B,SAAK8O,OAAL,GAAe,IAAf;AACH;;AAEDoI,EAAAA,OAAO,CAACtoD,CAAD,EAAG;AACN,QAAI,KAAKkgD,OAAL,IAAgB,CAAC,KAAKnD,OAAL,CAAa0D,aAAlC,EACI,KAAKP,OAAL,GAAgB,KAAhB;AACP;;AAED,MAAIA,OAAJ,GAAa;AAAE,WAAO,KAAKnD,OAAL,IAAgB,KAAKA,OAAL,CAAamD,OAApC;AAA6C;;AAC5D,MAAIA,OAAJ,CAAYsJ,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKzM,OAAV,EAAoB;AAEpB,SAAKA,OAAL,CAAamD,OAAb,GAAuBsJ,OAAvB;AAEAA,IAAAA,OAAO,GAAG,KAAK5tD,YAAL,CAAkB,SAAlB,EAA6B,EAA7B,CAAH,GAAsC,KAAKD,eAAL,CAAqB,SAArB,CAA7C;AACH;;AAED,MAAI8tD,UAAJ,GAAgB;AAAE,WAAO,KAAKxtD,YAAL,CAAkB,KAAlB,KAA4B,EAAnC;AAAsC;;AACxD,MAAIytD,YAAJ,GAAkB;AAAE,WAAO,KAAKztD,YAAL,CAAkB,OAAlB,KAA8B,eAArC;AAAqD;;AAEzE,MAAIg/B,OAAJ,GAAa;AACT,WAAO,KAAK9/B,UAAL,CAAgB+H,aAAhB,CAA8B,gBAA9B,CAAP;AACH;;AAED,MAAIygC,IAAJ,GAAU;AACN,WAAO,KAAKxoC,UAAL,CAAgB+H,aAAhB,CAA8B,iBAA9B,CAAP;AACH;;AAEDqlD,EAAAA,SAAS,CAACza,KAAD,EAAO;AAEZ,QAAI/F,GAAG,GAAGxrC,cAAc,CAACpC,GAAf,CAAmB,KAAKsvD,UAAxB,CAAV;;AAEA,QAAI1hB,GAAJ,EAAS;AACLA,MAAAA,GAAG,GAAG,IAAIA,GAAJ,EAAN;AACAA,MAAAA,GAAG,CAAC+F,KAAJ,GAAYA,KAAZ;AACA/F,MAAAA,GAAG,CAACpE,IAAJ,GAAW,IAAX;AACAoE,MAAAA,GAAG,CAACkG,IAAJ,GAAW,KAAX;AACA,aAAOlG,GAAP;AACH;AACJ;;AAEDygB,EAAAA,kBAAkB,GAAE;AAChB,SAAK7D,SAAL,GAAiB,KAAKA,SAAL,IAAkBhrD,QAAQ,CAACC,aAAT,CAAuB,KAAK8vD,YAA5B,CAAnC;AACA,SAAK/E,SAAL,CAAe1W,IAAf,GAAsB,YAAtB;AACA,SAAK0W,SAAL,CAAehhB,IAAf,GAAsB,IAAtB;AACA,SAAKghB,SAAL,CAAeF,UAAf,GAA4B,KAAKA,UAAjC,CAJgB,CAMhB;;AAEA,QAAI3a,IAAI,GAAG,KAAK2a,UAAL,CAAgB1H,OAAhB,IAAyB,KAAK0H,UAAL,CAAgB1H,OAAhB,CAAwBjT,IAA5D;AACA,SAAK6a,SAAL,CAAelnD,KAAf,GAAuBqsC,IAAI,GAAI,mBAAkBA,IAAK,GAA3B,GAAiC,KAAK7tC,YAAL,CAAkB,aAAlB,KAAoC,YAAhG;AACA,SAAK0oD,SAAL,CAAex/C,aAAf;AACA,WAAO,KAAKw/C,SAAZ;AACH;;AAED8D,EAAAA,aAAa,CAACtE,SAAD,EAAYrW,KAAZ,EAAkB;AAE3B,QAAInkB,OAAO,GAAG,KAAK1tB,YAAL,CAAkB,SAAlB,CAAd;AAEA0tB,IAAAA,OAAO,GAAGA,OAAO,IAAIptB,cAAc,CAACpC,GAAf,CAAmBwvB,OAAnB,CAArB;;AAEA,QAAIA,OAAO,IAAIA,OAAO,CAACggC,aAAnB,IAAoChgC,OAAO,CAACggC,aAAR,CAAsBxF,SAAtB,EAAiCrW,KAAjC,EAAwC,IAAxC,CAAxC,EAAuF;AACnFnkB,MAAAA,OAAO,GAAG,IAAIA,OAAJ,CAAYw6B,SAAZ,EAAuBrW,KAAvB,EAA8B,IAA9B,CAAV;AACAnkB,MAAAA,OAAO,CAACskB,IAAR,GAAe,SAAf;AACAtkB,MAAAA,OAAO,CAACga,IAAR,GAAe,IAAf;AACAha,MAAAA,OAAO,CAACmkB,KAAR,GAAgBA,KAAhB;AACAnkB,MAAAA,OAAO,CAACw6B,SAAR,GAAoBA,SAApB;AACA,aAAOx6B,OAAP;AACH;;AAED,WAAO,IAAP;AACH;;AAED,QAAMhsB,YAAN,GAAoB;AAEhB;AACAQ,IAAAA,UAAU,CAAC,YAAU;AACjB,WAAKO,OAAL,CAAaL,IAAb,GAAoB,IAApB;;AACA,UAAG;AACC,aAAK48B,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACH,OAFD,CAEC,OAAM1B,GAAN,EAAU,CAAE;;AAEb,WAAK1B,OAAL,CAAaL,IAAb,GAAoB,KAApB;AAEH,KARS,CAAV;AAUA,SAAK04C,MAAL,GAAc,KAAKzX,EAAL,CAAQ,iBAAR,EAA2B+G,aAA3B,GAA2C,CAA3C,CAAd;AACA,SAAK2Q,MAAL,GAAc,KAAK1X,EAAL,CAAQ,iBAAR,EAA2B+G,aAA3B,GAA2C,CAA3C,CAAd;AAEA,QAAI,KAAK0Q,MAAL,IAAe,KAAKC,MAAxB,EACA,KAAKrT,IAAL,CAAU/lC,gBAAV,CAA2B,QAA3B,EAAqCoC,CAAC,IAAE;AAEpC,UAAI,KAAK+2C,MAAT,EACI,KAAKA,MAAL,CAAYx6B,UAAZ,GAAyBvc,CAAC,CAACwH,aAAF,CAAgB+U,UAAzC;AAEJ,UAAI,KAAKy6B,MAAT,EACI,KAAKA,MAAL,CAAYz6B,UAAZ,GAAyBvc,CAAC,CAACwH,aAAF,CAAgB+U,UAAzC;AAEJ,UAAIvc,CAAC,CAACwH,aAAF,CAAgB+U,UAAhB,IAA8B,CAAlC,EACI,KAAK5gB,eAAL,CAAqB,YAArB,EADJ,KAGI,KAAKC,YAAL,CAAkB,YAAlB,EAAgC,EAAhC;AACP,KAZD,EAjBgB,CA+BhB;;AACA,SAAKytC,SAAL,GAAiB,IAAI8b,kBAAJ,CAAc,KAAKxhB,IAAnB,EAAyB,KAAK8lB,UAA9B,EAA0C/oD,MAAM,CAAC0J,MAAP,CAAc;AACrE6wB,MAAAA,OAAO,EAAE,KAAK9/B,UAAL,CAAgB+H,aAAhB,CAA8B,sBAA9B;AAD4D,KAAd,EAEvD,KAAK0mD,gBAAL,IAAuB,EAFgC,CAA1C,CAAjB;AAIA,SAAKvgB,SAAL,CAAenqC,EAAf,CAAkB,OAAlB,EAA2B,MAAI;AAC3B,WAAKtD,YAAL,CAAkB,cAAlB,EAAkC,EAAlC;AACH,KAFD;AAIA,SAAKytC,SAAL,CAAenqC,EAAf,CAAkB,KAAlB,EAAyB,MAAI;AACzB,WAAKvD,eAAL,CAAqB,cAArB;AACH,KAFD;AAIA,SAAKiC,gBAAL,CAAsB,iBAAtB,EAAyCoC,CAAC,IAAE;AACxCA,MAAAA,CAAC,CAACgC,eAAF;AACA,WAAKqnC,SAAL,CAAeid,KAAf,CAAqBtmD,CAArB;AACH,KAHD;AAIH;;AAED,QAAM4oD,OAAN,GAAe;AACX,SAAKlqD,OAAL,CAAaL,IAAb,GAAoB,IAApB;;AACA,QAAG;AACC,WAAKgrC,SAAL,CAAe5tB,GAAf;AACA,WAAKgpC,UAAL,CAAgBxwC,KAAhB;AACA,WAAK0vB,IAAL,CAAU1vB,KAAV;AACA,WAAKgnB,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACH,KALD,CAKC,OAAM1B,GAAN,EAAU,CAAE;;AACb,SAAK1B,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAMwqD,MAAN,GAAc;AACV,SAAKxf,SAAL,CAAe5tB,GAAf;AACA,SAAKgpC,UAAL,CAAgBlI,QAAhB;AACA,SAAK5Y,IAAL,CAAU1vB,KAAV,CAAgB,KAAK00C,eAArB;AACA,SAAK1tB,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACH;;AAED,MAAI6mD,eAAJ,GAAqB;AACjB,WAAO,KAAKlE,UAAL,CAAgBpI,UAAhB,IAA8B,KAAK8M,WAAL,IAAkB,KAAKA,WAAL,CAAiBpN,WAAxE;AACH;;AAED,QAAMwN,kBAAN,CAAyBvZ,OAAzB,EAAiC;AAE7B;AACA,QAAI,KAAKmZ,WAAL,IAAoB,KAAKA,WAAL,CAAiBlf,KAAjB,IAA0B,MAAlD,EAA0D;AACtD,WAAKwa,UAAL,CAAgBxwC,KAAhB;AACH;;AAED,SAAKwwC,UAAL,CAAgBhI,YAAhB;AACA,SAAK9Y,IAAL,CAAU1vB,KAAV,CAAgB,KAAK00C,eAArB;AACA,SAAK1tB,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACH;;AAED,QAAMwhD,cAAN,CAAqBtT,OAArB,EAA6B;AAEzB,QAAI,KAAK+M,OAAL,CAAawE,kBAAb,CAAgCvR,OAAhC,CAAJ,EAA8C;AAC1C,WAAKtxC,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAKomD,UAAL,CAAgBxwC,KAAhB;AACH;;AAED,SAAKwwC,UAAL,CAAgBhI,YAAhB;AACA,SAAK9Y,IAAL,CAAU1vB,KAAV,CAAgB,KAAK00C,eAArB;AACA,SAAK1tB,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACA,SAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAM4qD,YAAN,GAAoB;AAEhB,QAAI,KAAKhM,KAAL,CAAWqF,QAAX,KAAwB,IAA5B,EAAkC;AAC9B,WAAK5jD,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAKomD,UAAL,CAAgBxwC,KAAhB;AACH,KAHD,MAGK;AACD,WAAKwwC,UAAL,CAAgBxxC,IAAhB;AACH;;AAED,SAAK0wB,IAAL,CAAU1vB,KAAV,CAAgB,KAAK00C,eAArB;AACA,SAAK1tB,OAAL,CAAagb,KAAb,GAAqB,MAAM,KAAKwO,UAAL,CAAgB3iD,MAAhB,EAA3B;AACA,SAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AApboD,CAAzD;;eAwbe9B,cAAc,CAACpC,GAAf,CAAmB,QAAnB;;;;;;;;;;;ACpcf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,WAAtB,EAAmC,cAAcE,sBAAd,CAAwB;AAEvD,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnCwB;AAmClB;;AAEF,MAAI+uD,UAAJ,GAAgB;AACZ,WAAO,KAAKC,OAAL,CAAa1V,KAAb,MAAwB,KAAKppC,IAAL,CAAUopC,KAAV,EAA/B;AACH;;AAED,MAAI2V,SAAJ,GAAe;AACX,WAAO,CAAC,CAAD,EAAI,CAAJ,EAAOxlD,QAAP,CAAgB,KAAKyG,IAAL,CAAUsoC,GAAV,EAAhB,CAAP;AACH;;AAED,MAAI0W,OAAJ,GAAa;AACT,WAAO,KAAKh/C,IAAL,CAAUuzC,MAAV,CAAiB,IAAIx1C,IAAJ,EAAjB,EAA6B,KAA7B,CAAP;AACH;;AAED/L,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA;AACA,kBAAkB,KAAKgO,IAAL,CAAUA,IAAV,MAAkB,CAAlB,GAAoB,KAAKA,IAAL,CAAUxB,MAAV,CAAiB,KAAjB,CAApB,GAA4C,EAAG;AACjE,kBAAkB,KAAKwB,IAAL,CAAU7Q,GAAV,CAAc,MAAd,CAAsB;AACxC;AACA;AACA;AACA;AACA;AACA,KAXa;AAWP;;AAEF,MAAI6Q,IAAJ,CAASA,IAAT,EAAc;AACV,SAAKc,MAAL,GAAcd,IAAd;AAEA,SAAK5O,eAAL,CAAqB,SAArB,EAAgC,KAAK2tD,SAArC;AACA,SAAK3tD,eAAL,CAAqB,UAArB,EAAiC,KAAKytD,UAAtC;AACA,SAAKztD,eAAL,CAAqB,OAArB,EAA8B,KAAK4tD,OAAnC;AAEA,SAAK7kD,aAAL;AACH;;AAED,MAAI6F,IAAJ,GAAU;AACN,WAAO,KAAKc,MAAZ;AACH,GA5EsD,CA8EvD;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;;;AA7FuD,CAA3D;;eAiGevP,cAAc,CAACpC,GAAf,CAAmB,WAAnB;;;;;;;;;;;ACnGf;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,OAAtB,EAA+B,cAAcE,sBAAd,CAAwB;AAEnD3B,EAAAA,WAAW,GAAE;AACT;AAEA,SAAKuQ,QAAL,GAAgB3D,eAAM8D,WAAN,EAAhB;AAEA,SAAKF,IAAL,GAAY,IAAI3Q,KAAJ,CAAU,IAAE,CAAZ,EAAe6T,IAAf,CAAoB,EAApB,CAAZ;AACA,SAAKzD,IAAL,GAAY,KAAKqoC,KAAL,IAAc,KAAKp3C,YAAL,CAAkB,MAAlB,CAAd,IAA2C,qBAAvD;AACH;;AAED,aAAWnB,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvEwB;AAuElB;;AAEF,MAAIkQ,IAAJ,GAAU;AAAE,WAAO,KAAKqoC,KAAZ;AAAmB;;AAE/B,MAAIroC,IAAJ,CAAS9O,GAAT,EAAa;AAET,QAAI+tD,OAAO,GAAG,KAAK5W,KAAL,IAAc,KAAKA,KAAL,CAAWF,KAAX,EAA5B;;AAEA,QAAIj3C,GAAG,YAAYyL,cAAnB,EAA0B;AACtB,WAAK0rC,KAAL,GAAan3C,GAAb;AACT,WAAKg3C,aAAL,GAAqB,KAAKG,KAAL,CAAWF,KAAX,EAArB;AAEM,KAJD,MAIM,IAAI,OAAOj3C,GAAP,IAAc,QAAlB,EAA4B;AAE9B,WAAKm3C,KAAL,GAAa,oBAAMn3C,GAAN,CAAb;AACT,WAAKg3C,aAAL,GAAqB,KAAKG,KAAL,CAAWF,KAAX,EAArB;AAEA,KALW,MAKN,IAAIj3C,GAAG,IAAI,OAAOA,GAAP,IAAc,QAAzB,EAAmC;AACxC,WAAKg3C,aAAL,CAAmB94C,GAAnB,CAAuB8B,GAAvB;;AACA,WAAKm3C,KAAL,CAAWj5C,GAAX,CAAe8B,GAAf;AACM;;AAEP,SAAKm3C,KAAL,CAAWj5C,GAAX,CAAe;AAAC4Q,MAAAA,IAAI,EAAE;AAAP,KAAf;;AAEM,QAAIi/C,OAAO,IAAI,KAAK5W,KAAL,CAAWkL,MAAX,CAAkB0L,OAAlB,CAAf,EACI;;AAEJ,SAAKC,SAAL;;AAEA,SAAKvtB,SAAL,CAAe,cAAf,EAA+B,KAAKrqB,KAApC;AACN;;AAEE3U,EAAAA,YAAY,GAAE;AACV,SAAKg/B,SAAL,CAAe,cAAf,EAA+B,KAAKrqB,KAApC;AACH;;AAED43C,EAAAA,SAAS,GAAE;AACP,QAAI/gD,KAAK,GAAG,KAAKkqC,KAAL,CAAWC,GAAX,EAAZ;;AACN,QAAIC,OAAO,GAAG,KAAKF,KAAL,CAAWG,WAAX,EAAd;;AAEM,SAAKjoC,IAAL,GAAY,KAAKA,IAAL,CAAUpO,GAAV,CAAc,CAACob,CAAD,EAAI1T,CAAJ,KAAQ;AAC9B,aAAO,KAAKwuC,KAAL,CAAWF,KAAX,GAAmBj1C,GAAnB,CAAuB2G,CAAC,GAACsE,KAAzB,EAAgC,KAAhC,CAAP;AACH,KAFW,CAAZ;AAGH;;AAED,MAAImJ,KAAJ,GAAW;AACP,WAAO,CAAC,KAAK/G,IAAL,CAAU,CAAV,CAAD,EAAe,KAAKA,IAAL,CAAU,KAAKA,IAAL,CAAUzJ,MAAV,GAAiB,CAA3B,CAAf,CAAP;AACH;;AAED+xC,EAAAA,SAAS,GAAE;AACb,SAAK7oC,IAAL,GAAY,KAAKqoC,KAAL,CAAWF,KAAX,GAAmBj1C,GAAnB,CAAuB,CAAvB,EAA0B,OAA1B,CAAZ;AACM,SAAKqJ,MAAL;AACN;;AAEDusC,EAAAA,SAAS,GAAE;AACV,SAAK9oC,IAAL,GAAY,KAAKqoC,KAAL,CAAWF,KAAX,GAAmBj1C,GAAnB,CAAuB,CAAC,CAAxB,EAA2B,OAA3B,CAAZ;AACM,SAAKqJ,MAAL;AACN;;AAEE4iD,EAAAA,SAAS,GAAE;AACP,SAAKn/C,IAAL,GAAY,qBAAZ;AACA,SAAKzD,MAAL;AACH;;AAEDvK,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB;AACA;AACA,sBAAsB,KAAKgO,IAAL,CAAUxB,MAAV,CAAiB,WAAjB,CAA8B;AACpD;AACA;AACA;AACA;AACA;AACA,8DAA8D,KAAKsqC,SAAU;AAC7E,yCAAyC,KAAKqW,SAAU;AACxD,+DAA+D,KAAKtW,SAAU;AAC9E;AACA;AACA;AACA;AACA,oCAAoC,KAAKvoC,QAAL,CAAcnO,GAAd,CAAkB,CAACsM,GAAD,EAAK5E,CAAL,KAAS,qBAAK;AACpE,kBAAkBA,CAAC,IAAE,CAAH,IAAMA,CAAC,IAAE,CAAT,GAAW,qBAAK;AAClC,kCAAkC,KAAKulD,qBAAsB,IAAG3gD,GAAI;AACpE,iBAFkB,GAEA,qBAAK;AACvB,2BAA2BA,GAAI;AAC/B,iBAAkB;AAClB,aANoC,CAMrB;AACf;AACA;AACA;AACA,UAAU,KAAK8B,IAAL,CAAUpO,GAAV,CAAc6N,IAAI,IAAE,qBAAK;AACnC,kCAAkC,KAAKqoC,KAAM,UAASroC,IAAK;AAC3D,8BAA8BA,IAAI,CAACxB,MAAL,CAAY,YAAZ,CAA0B;AACxD;AACA,SAJU,CAIC;AACX;AACA,KAhCa;AAgCP;;AAEF4gD,EAAAA,qBAAqB,GAAE;AACnB,SAAKhuD,eAAL,CAAqB,kBAArB,EAAyC,CAAC,KAAKE,YAAL,CAAkB,kBAAlB,CAA1C;AACH;;AAtLkD,CAAvD;;eA0LeC,cAAc,CAACpC,GAAf,CAAmB,OAAnB;;;;;;ACjMf;;AAEAoC,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0C,cAAcE,sBAAd,CAAwB;AAE9D,aAAW5B,MAAX,GAAmB;AAAC,WAAO,oBAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvCwB;AAuClB;;AAEFyD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEA,SAAK8rD,MAAL,GAAc,EAAd;;AAEA,SAAK,IAAIC,KAAT,IAAkB3wD,QAAQ,CAAC4wD,WAA3B,EAAwC;AAEpC,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAG;AAAEA,QAAAA,KAAK,GAAGF,KAAK,CAACG,QAAd;AAAwB,OAA7B,CAA6B,OAAMzqD,CAAN,EAAQ,CAAE;;AAEvC,UAAIwqD,KAAJ,EACA,KAAK,IAAIE,IAAT,IAAiBF,KAAjB,EAAwB;AAEpB,YAAIE,IAAI,CAACplB,OAAL,CAAar+B,KAAb,CAAmB,iBAAnB,CAAJ,EAA2C;AAEvC,cAAIiJ,OAAO,GAAGw6C,IAAI,CAACplB,OAAL,CAAar+B,KAAb,CAAmB,uBAAnB,CAAd;AACA,cAAIojD,MAAM,GAAG,EAAb;AAEAn6C,UAAAA,OAAO,CAAC/S,GAAR,CAAYiK,CAAC,IAAE;AAEX,gBAAI,CAACqC,GAAD,EAAMlQ,IAAN,EAAYyT,GAAZ,EAAiBpG,KAAjB,IAA0BQ,CAAC,CAACH,KAAF,CAAQ,uCAAR,CAA9B;AACA,gBAAI/B,GAAG,GAAG3L,IAAI,IAAIyT,GAAG,GAAC,MAAIA,GAAL,GAAS,EAAhB,CAAd;;AAEA,gBAAIA,GAAJ,EAAS;AACLq9C,cAAAA,MAAM,CAAC9wD,IAAD,CAAN,GAAe8wD,MAAM,CAAC9wD,IAAD,CAAN,IAAgB;AAACA,gBAAAA,IAAI,EAAEA,IAAP;AAAa8wD,gBAAAA,MAAM,EAAE;AAArB,eAA/B;AACAA,cAAAA,MAAM,CAAC9wD,IAAD,CAAN,CAAa8wD,MAAb,CAAoBxmD,IAApB,CAAyB;AAAEqB,gBAAAA,GAAF;AAAO3L,gBAAAA,IAAP;AAAayT,gBAAAA,GAAb;AAAkBpG,gBAAAA;AAAlB,eAAzB;AACH,aAHD,MAGK;AACDyjD,cAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBA,MAAM,CAAC,SAAD,CAAN,IAAqB;AAAC9wD,gBAAAA,IAAI,EAAE,SAAP;AAAkB8wD,gBAAAA,MAAM,EAAE;AAA1B,eAAzC;AACAA,cAAAA,MAAM,CAAC,SAAD,CAAN,CAAkBA,MAAlB,CAAyBxmD,IAAzB,CAA8B;AAAEqB,gBAAAA,GAAF;AAAO3L,gBAAAA,IAAP;AAAayT,gBAAAA,GAAb;AAAkBpG,gBAAAA;AAAlB,eAA9B;AACH;AAEJ,WAbD;AAeA,eAAKyjD,MAAL,GAAc3pD,MAAM,CAACgwB,MAAP,CAAc25B,MAAd,CAAd;AACH;AACJ;AACJ;AACJ;;AAEDrtD,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;AACzB,UAAU,KAAKqtD,MAAL,CAAYltD,GAAZ,CAAgB4kC,CAAC,IAAE,qBAAK;AAClC,0BAA0BA,CAAC,CAACxoC,IAAK;AACjC,sBAAsBwoC,CAAC,CAACxoC,IAAK;AAC7B;AACA,kBAAkBwoC,CAAC,CAACsoB,MAAF,CAASltD,GAAT,CAAa6jC,CAAC,IAAE,qBAAK;AACvC,+BAA+BA,CAAC,CAACh0B,GAAI,SAAQg0B,CAAC,CAAC97B,GAAI,kDAAiD87B,CAAC,CAAC97B,GAAI;AAC1G,+BAA+B87B,CAAC,CAAC97B,GAAI;AACrC,sCAAsC87B,CAAC,CAACh0B,GAAF,GAAMg0B,CAAC,CAACp6B,KAAR,GAAc,EAAG;AACvD;AACA,iBALkB,CAKC;AACnB;AACA;AACA,SAZU,CAYC;AACX,KAda;AAcP;;AAjG4D,CAAlE;;;;ACDA;;;;AAEA+jD,cAAKlwD,QAAL,CACI,CAAC,SAAD,EAAYqP,OAAO,CAAC,oBAAD,CAAnB,CADJ,EAEC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAFD,EAGC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAHD,EAIC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAJD,EAKC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CALD,EAMC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAND,EAOC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAPD,EAQC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CARD,EASC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CATD,EAUC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAVD,EAWC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CAXD,EAYC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAZD,EAaC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CAbD,EAcC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAdD,EAeC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAfD,EAgBC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhBD,EAiBC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAjBD,EAkBC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAlBD,EAmBC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAnBD,EAoBC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CApBD,EAqBC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CArBD,EAsBC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAtBD,EAuBC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAvBD,EAwBC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAxBD,EAyBC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAzBD,EA0BC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA1BD,EA2BC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA3BD,EA4BC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA5BD,EA6BC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA7BD,EA8BC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA9BD,EA+BC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA/BD,EAgCC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAhCD,EAiCC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAjCD,EAkCC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAlCD,EAmCC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAnCD,EAoCC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CApCD,EAqCC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CArCD,EAsCC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAtCD,EAuCC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAvCD,EAwCC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAxCD,EAyCC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAzCD,EA0CC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA1CD,EA2CC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA3CD,EA4CC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA5CD,EA6CC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA7CD,EA8CC,CAAC,mBAAD,EAAsBA,OAAO,CAAC,8BAAD,CAA7B,CA9CD,EA+CC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CA/CD,EAgDC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhDD,EAiDC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAjDD,EAkDC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAlDD,EAmDC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAnDD,EAoDC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CApDD,EAqDC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CArDD,EAsDC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CAtDD,EAuDC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAvDD,EAwDC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAxDD,EAyDC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAzDD,EA0DC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA1DD,EA2DC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA3DD,EA4DC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA5DD,EA6DC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA7DD,EA8DC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA9DD,EA+DC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA/DD,EAgEC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAhED,EAiEC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAjED,EAkEC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CAlED,EAmEC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAnED,EAoEC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CApED,EAqEC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CArED,EAsEC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAtED,EAuEC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAvED,EAwEC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAxED,EAyEC,CAAC,oBAAD,EAAuBA,OAAO,CAAC,+BAAD,CAA9B,CAzED,EA0EC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CA1ED,EA2EC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA3ED,EA4EC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA5ED,EA6EC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA7ED,EA8EC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA9ED,EA+EC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA/ED,EAgFC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAhFD,EAiFC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAjFD,EAkFC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAlFD,EAmFC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAnFD,EAoFC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CApFD,EAqFC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CArFD,EAsFC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAtFD,EAuFC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAvFD,EAwFC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAxFD,EAyFC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAzFD,EA0FC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA1FD,EA2FC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA3FD,EA4FC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA5FD,EA6FC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CA7FD,EA8FC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA9FD,EA+FC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA/FD,EAgGC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhGD,EAiGC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAjGD,EAkGC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAlGD,EAmGC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAnGD,EAoGC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CApGD,EAqGC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CArGD,EAsGC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAtGD,EAuGC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAvGD,EAwGC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CAxGD,EAyGC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CAzGD,EA0GC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA1GD,EA2GC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA3GD,EA4GC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA5GD,EA6GC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA7GD,EA8GC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA9GD,EA+GC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA/GD,EAgHC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhHD,EAiHC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAjHD,EAkHC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAlHD,EAmHC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAnHD,EAoHC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CApHD,EAqHC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CArHD,EAsHC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CAtHD,EAuHC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAvHD,EAwHC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAxHD,EAyHC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAzHD,EA0HC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA1HD,EA2HC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA3HD,EA4HC,CAAC,iBAAD,EAAoBA,OAAO,CAAC,4BAAD,CAA3B,CA5HD,EA6HC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA7HD,EA8HC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA9HD,EA+HC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA/HD,EAgIC,CAAC,mBAAD,EAAsBA,OAAO,CAAC,8BAAD,CAA7B,CAhID,EAiIC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAjID,EAkIC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAlID,EAmIC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAnID,EAoIC,CAAC,mBAAD,EAAsBA,OAAO,CAAC,8BAAD,CAA7B,CApID,EAqIC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CArID,EAsIC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAtID,EAuIC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAvID,EAwIC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAxID,EAyIC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAzID,EA0IC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA1ID,EA2IC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CA3ID,EA4IC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA5ID,EA6IC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CA7ID,EA8IC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA9ID,EA+IC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA/ID,EAgJC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhJD,EAiJC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAjJD,EAkJC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAlJD,EAmJC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAnJD,EAoJC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CApJD,EAqJC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CArJD,EAsJC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAtJD,EAuJC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CAvJD,EAwJC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAxJD,EAyJC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAzJD,EA0JC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CA1JD,EA2JC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA3JD,EA4JC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA5JD,EA6JC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA7JD,EA8JC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA9JD,EA+JC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CA/JD,EAgKC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CAhKD,EAiKC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CAjKD,EAkKC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAlKD,EAmKC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAnKD,EAoKC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CApKD,EAqKC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CArKD,EAsKC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAtKD,EAuKC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAvKD,EAwKC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CAxKD,EAyKC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAzKD,EA0KC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA1KD,EA2KC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CA3KD,EA4KC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA5KD,EA6KC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA7KD,EA8KC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA9KD,EA+KC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA/KD,EAgLC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAhLD,EAiLC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAjLD,EAkLC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAlLD,EAmLC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CAnLD,EAoLC,CAAC,mBAAD,EAAsBA,OAAO,CAAC,8BAAD,CAA7B,CApLD,EAqLC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CArLD,EAsLC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAtLD,EAuLC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAvLD,EAwLC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAxLD,EAyLC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAzLD,EA0LC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CA1LD,EA2LC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CA3LD,EA4LC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA5LD,EA6LC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA7LD,EA8LC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CA9LD,EA+LC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CA/LD,EAgMC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CAhMD,EAiMC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAjMD,EAkMC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAlMD,EAmMC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAnMD,EAoMC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CApMD,EAqMC,CAAC,yBAAD,EAA4BA,OAAO,CAAC,oCAAD,CAAnC,CArMD,EAsMC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAtMD,EAuMC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAvMD,EAwMC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAxMD,EAyMC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAzMD,EA0MC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA1MD,EA2MC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA3MD,EA4MC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA5MD,EA6MC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA7MD,EA8MC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CA9MD,EA+MC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CA/MD,EAgNC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAhND,EAiNC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAjND,EAkNC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAlND,EAmNC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAnND,EAoNC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CApND,EAqNC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CArND,EAsNC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CAtND,EAuNC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAvND,EAwNC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAxND,EAyNC,CAAC,iBAAD,EAAoBA,OAAO,CAAC,4BAAD,CAA3B,CAzND,EA0NC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CA1ND,EA2NC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CA3ND,EA4NC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CA5ND,EA6NC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA7ND,EA8NC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA9ND,EA+NC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA/ND,EAgOC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhOD,EAiOC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAjOD,EAkOC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAlOD,EAmOC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAnOD,EAoOC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CApOD,EAqOC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CArOD,EAsOC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CAtOD,EAuOC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAvOD,EAwOC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAxOD,EAyOC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CAzOD,EA0OC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA1OD,EA2OC,CAAC,kBAAD,EAAqBA,OAAO,CAAC,6BAAD,CAA5B,CA3OD,EA4OC,CAAC,gBAAD,EAAmBA,OAAO,CAAC,2BAAD,CAA1B,CA5OD,EA6OC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA7OD,EA8OC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA9OD,EA+OC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CA/OD,EAgPC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAhPD,EAiPC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAjPD,EAkPC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAlPD,EAmPC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAnPD,EAoPC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CApPD,EAqPC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CArPD,EAsPC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAtPD,EAuPC,CAAC,KAAD,EAAQA,OAAO,CAAC,gBAAD,CAAf,CAvPD,EAwPC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAxPD,EAyPC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAzPD,EA0PC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA1PD,EA2PC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA3PD,EA4PC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CA5PD,EA6PC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA7PD,EA8PC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CA9PD,EA+PC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CA/PD,EAgQC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAhQD,EAiQC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAjQD,EAkQC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAlQD,EAmQC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CAnQD,EAoQC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CApQD,EAqQC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CArQD,EAsQC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CAtQD,EAuQC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAvQD,EAwQC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAxQD,EAyQC,CAAC,IAAD,EAAOA,OAAO,CAAC,eAAD,CAAd,CAzQD,EA0QC,CAAC,cAAD,EAAiBA,OAAO,CAAC,yBAAD,CAAxB,CA1QD,EA2QC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CA3QD,EA4QC,CAAC,MAAD,EAASA,OAAO,CAAC,iBAAD,CAAhB,CA5QD,EA6QC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA7QD,EA8QC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA9QD,EA+QC,CAAC,OAAD,EAAUA,OAAO,CAAC,kBAAD,CAAjB,CA/QD,EAgRC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAhRD,EAiRC,CAAC,WAAD,EAAcA,OAAO,CAAC,sBAAD,CAArB,CAjRD,EAkRC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CAlRD,EAmRC,CAAC,YAAD,EAAeA,OAAO,CAAC,uBAAD,CAAtB,CAnRD,EAoRC,CAAC,eAAD,EAAkBA,OAAO,CAAC,0BAAD,CAAzB,CApRD,EAqRC,CAAC,aAAD,EAAgBA,OAAO,CAAC,wBAAD,CAAvB,CArRD,EAsRC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAtRD,EAuRC,CAAC,UAAD,EAAaA,OAAO,CAAC,qBAAD,CAApB,CAvRD,EAwRC,CAAC,QAAD,EAAWA,OAAO,CAAC,mBAAD,CAAlB,CAxRD,EAyRC,CAAC,SAAD,EAAYA,OAAO,CAAC,oBAAD,CAAnB,CAzRD;;;;;;;;;;ACFA;;AAEO,MAAM8gD,cAAc,GAAG;AAE1BC,EAAAA,GAAG,EAAE,oBAAI,uCAFiB;AAG1BC,EAAAA,EAAE,EAAE,oBAAI,qDAHkB;AAI1B5gB,EAAAA,IAAI,EAAE,oBAAI,sDAJgB;AAK1B6gB,EAAAA,KAAK,EAAE,oBAAI,yCALe;AAM1Bv6C,EAAAA,IAAI,EAAE,oBAAI,sCANgB;AAO1Bw6C,EAAAA,GAAG,EAAE,oBAAI,qCAPiB;AAQ1BC,EAAAA,IAAI,EAAE,oBAAI,uCARgB;AAS1BC,EAAAA,GAAG,EAAE,oBAAI,8CATiB;AAW1BC,EAAAA,GAAG,EAAE,oBAAI,2CAXiB;AAY1BC,EAAAA,IAAI,EAAE,oBAAI,4CAZgB;AAa1BC,EAAAA,GAAG,EAAE,oBAAI,2CAbiB;AAc1BC,EAAAA,GAAG,EAAE,oBAAI,2CAdiB;AAgB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAhBiB;AAiB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAjBiB;AAkB1BC,EAAAA,IAAI,EAAE,oBAAI,mDAlBgB;AAmB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAnBiB;AAqB1B;AACAzT,EAAAA,IAAI,EAAE,oBAAI;AACd;AACA;AACA;AACA;AACA,KA3B8B;AA4B1B0T,EAAAA,KAAK,EAAE,oBAAI;AACf;AACA;AACA;AACA;AACA;AACA,KAlC8B;AAoC1B;AACAC,EAAAA,GAAG,EAAE,oBAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KA5C8B;AA6C1BC,EAAAA,IAAI,EAAE,oBAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArD8B;AAsD1BC,EAAAA,IAAI,EAAE,oBAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA,KA7D8B;AA8D1BC,EAAAA,EAAE,EAAE,oBAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtE8B;AAuE1BlB,EAAAA,GAAG,EAAE,oBAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AA9E8B,CAAvB;;AAmFA,MAAMmB,cAAc,GAAG;AAC1B,UAAQ,qBAAK,kBADa;AAE1B,SAAO,qBAAK,mCAFc;AAI1B,SAAOC,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QAJhC;AAK1B,SAAOA,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QALhC;AAM1B,UAAQA,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QANjC;AAQ1B,UAAQA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QARhC;AAS1B,SAAOA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QAT/B;AAU1B,UAAQA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QAVhC;AAY1B,SAAO,qBAAK,6BAZc;AAa1B,SAAO,qBAAK,6BAbc;AAe1B,SAAO,qBAAK,uCAfc;AAgB1B,UAAQA,GAAG,IAAE,qBAAK,0CAAyCA,GAAI;AAhBrC,CAAvB;;;AAoBQ,kBAASC,YAAY,GAAC,EAAtB,EAA0BC,YAAY,GAAC,EAAvC,EAA0C;AAEzDzrD,EAAAA,MAAM,CAAC0J,MAAP,CAAcwgD,cAAd,EAA8BsB,YAA9B;AACAxrD,EAAAA,MAAM,CAAC0J,MAAP,CAAc4hD,cAAd,EAA8BG,YAA9B;AAEA5vD,EAAAA,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC,cAAcE,sBAAd,CAAwB;AAEzD,eAAWC,UAAX,GAAuB;AAAE,aAAO;AAC5BsvD,QAAAA,GAAG,EAAE;AAACpvD,UAAAA,IAAI,EAAEW,MAAP;AAAeT,UAAAA,OAAO,EAAE;AAAxB;AADuB,OAAP;AAEvB;;AAEF,eAAWjC,MAAX,GAAmB;AACf,aAAO,CAAC,oBAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArEe,EAqERgtB,MArEQ,CAqEDpnB,MAAM,CAACgwB,MAAP,CAAck6B,cAAd,CArEC,CAAP;AAqEsC;;AAE1C5tD,IAAAA,MAAM,GAAE;AAAC,aAAO,qBAAK;AACzB;AACA;AACA;AACA,yBAAyB,KAAKsB,KAAM;AACpC;AACA;AACA;AACA,KARa;AAQP;;AAEF,QAAIA,KAAJ,GAAW;AACP,UAAIA,KAAK,GAAG0tD,cAAc,CAAC,KAAKC,GAAN,CAA1B;AAEA,UAAI3tD,KAAJ,EACI,OAAO,OAAOA,KAAP,IAAgB,UAAhB,GAA6BA,KAAK,CAAC,KAAK2tD,GAAN,CAAlC,GAA+C3tD,KAAtD;AAEJ,aAAO,KAAK2tD,GAAZ;AACH;;AA/FwD,GAA7D;AAmGC;;;;AClND;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAGA;;AAGA;;AAGA;;;;AARA;AAGApuD,MAAM,CAAC0gC,MAAP,GAAgBA,eAAhB;AAGA1gC,MAAM,CAACs7B,IAAP,GAAcA,aAAd;AAGAt7B,MAAM,CAACygC,KAAP,GAAeA,cAAf;;AAGA,SAAS8tB,eAAT,GAA0B;AACtB,MAAIC,EAAE,GAAG1yD,QAAQ,CAAC2yD,gBAAT,CAA0B3yD,QAA1B,EAAoC4yD,UAAU,CAACC,YAA/C,EAA6D,IAA7D,EAAmE,IAAnE,CAAT;AACA,MAAIC,OAAJ;AACA,MAAI3V,QAAQ,GAAG,EAAf;;AAEA,SAAO2V,OAAO,GAAGJ,EAAE,CAACK,QAAH,EAAjB,EAAgC;AAC5B5V,IAAAA,QAAQ,CAACjzC,IAAT,CAAc4oD,OAAd;AACH;;AAED3V,EAAAA,QAAQ,CAACn8C,OAAT,CAAiBgyD,GAAG,IAAE;AAClB,QAAIrS,GAAG,GAAG3gD,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACA0gD,IAAAA,GAAG,CAACr8C,SAAJ,CAAcC,GAAd,CAAkB,YAAlB;AAEA,QAAIuL,GAAG,GAAGkjD,GAAG,CAACl/C,WAAd;AACA,QAAIm/C,IAAI,GAAGnjD,GAAG,CAAC3I,KAAJ,CAAU,IAAV,CAAX;AACA,QAAIjE,IAAI,GAAG+vD,IAAI,CAAC5rD,KAAL,EAAX;AACAyI,IAAAA,GAAG,GAAGmjD,IAAI,CAACljD,IAAL,CAAU,IAAV,CAAN;AACA4wC,IAAAA,GAAG,CAACzgD,SAAJ,GAAgB4P,GAAhB;AAEA,QAAI5M,IAAJ,EACIy9C,GAAG,CAAC1+C,YAAJ,CAAiB,MAAjB,EAAyBiB,IAAzB;AAEJ,QAAIgwD,MAAM,GAAGvS,GAAG,CAACp3C,aAAJ,CAAkB,QAAlB,CAAb;AACA,QAAI2pD,MAAJ,EACIC,IAAI,CAACD,MAAM,CAAC7lD,SAAR,CAAJ;AAEJ2lD,IAAAA,GAAG,CAACvxB,WAAJ,CAAgBkf,GAAhB;AACH,GAlBD;AAmBH;;AAED8R,eAAe,IAEf;;AACA/2B,OAAO,CAACK,SAAR,GAAoB,CAAEpF,CAAC,IAAI,SAASoF,SAAT,GAAoB;AAC3C,MAAIq3B,GAAG,GAAGz8B,CAAC,CAAClf,KAAF,CAAQ,IAAR,EAAcxR,SAAd,CAAV;AACAwsD,EAAAA,eAAe;AACf,SAAOW,GAAP;AACH,CAJmB,EAIjB13B,OAAO,CAACK,SAJS,CAApB;;AAMAL,OAAO,CAACO,YAAR,GAAuB,CAAEtF,CAAC,IAAI,SAASsF,YAAT,GAAuB;AACjD,MAAIm3B,GAAG,GAAGz8B,CAAC,CAAClf,KAAF,CAAQ,IAAR,EAAcxR,SAAd,CAAV;AACAwsD,EAAAA,eAAe;AACf,SAAOW,GAAP;AACH,CAJsB,EAIpB13B,OAAO,CAACO,YAJY,CAAvB;;AAMA/3B,MAAM,CAACD,gBAAP,CAAwB,UAAxB,EAAoC,YAAU;AAC1CwuD,EAAAA,eAAe;AAClB,CAFD;;ACvFA,IAAIY,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAI7sD,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOD,GAAP,EAAY;AACZ,QAAI8P,OAAO,GAAG,CAAC,KAAK9P,GAAG,CAAC+sD,KAAV,EAAiBlmD,KAAjB,CAAuB,+DAAvB,CAAd;;AACA,QAAIiJ,OAAJ,EAAa;AACX,aAAOk9C,UAAU,CAACl9C,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASk9C,UAAT,CAAoBruD,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAW/E,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD;;AAED2R,OAAO,CAACuhD,YAAR,GAAuBD,kBAAvB;AACAthD,OAAO,CAACyhD,UAAR,GAAqBA,UAArB;;AC5BA,IAAIF,YAAY,GAAGpjD,OAAO,CAAC,cAAD,CAAP,CAAwBojD,YAA3C;;AAEA,SAASG,eAAT,CAAyBC,OAAzB,EAAkC;AAChC,MAAI,CAAC1yD,KAAK,CAACC,OAAN,CAAcyyD,OAAd,CAAL,EAA6B;AAC3BA,IAAAA,OAAO,GAAG,CAACA,OAAD,CAAV;AACD;;AAED,MAAIvzD,EAAE,GAAGuzD,OAAO,CAACA,OAAO,CAACxrD,MAAR,GAAiB,CAAlB,CAAhB;;AAEA,MAAI;AACF,WAAOjC,OAAO,CAACC,OAAR,CAAgBgK,OAAO,CAAC/P,EAAD,CAAvB,CAAP;AACD,GAFD,CAEE,OAAOqG,GAAP,EAAY;AACZ,QAAIA,GAAG,CAAC6+B,IAAJ,KAAa,kBAAjB,EAAqC;AACnC,aAAO,IAAIsuB,WAAJ,CAAgB,UAAUztD,OAAV,EAAmBC,MAAnB,EAA2B;AAChDytD,QAAAA,WAAW,CAACF,OAAO,CAAC5pD,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAD,CAAX,CACGsV,IADH,CACQ,YAAY;AAChB,iBAAOlP,OAAO,CAAC/P,EAAD,CAAd;AACD,SAHH,EAIGif,IAJH,CAIQlZ,OAJR,EAIiBC,MAJjB;AAKD,OANM,CAAP;AAOD;;AAED,UAAMK,GAAN;AACD;AACF;;AAED,SAASotD,WAAT,CAAqBF,OAArB,EAA8B;AAC5B,SAAOztD,OAAO,CAACwG,GAAR,CAAYinD,OAAO,CAACnwD,GAAR,CAAYswD,UAAZ,CAAZ,CAAP;AACD;;AAED,IAAIC,aAAa,GAAG,EAApB;;AACA,SAASC,oBAAT,CAA8B9wD,IAA9B,EAAoC+wD,MAApC,EAA4C;AAC1CF,EAAAA,aAAa,CAAC7wD,IAAD,CAAb,GAAsB+wD,MAAtB;AACD;;AAEDliD,MAAM,CAACC,OAAP,GAAiBA,OAAO,GAAG0hD,eAA3B;AACA1hD,OAAO,CAACkiD,IAAR,GAAeL,WAAf;AACA7hD,OAAO,CAAClR,QAAR,GAAmBkzD,oBAAnB;AAEA,IAAIL,OAAO,GAAG,EAAd;;AACA,SAASG,UAAT,CAAoBK,MAApB,EAA4B;AAC1B,MAAI/zD,EAAJ;;AACA,MAAIa,KAAK,CAACC,OAAN,CAAcizD,MAAd,CAAJ,EAA2B;AACzB/zD,IAAAA,EAAE,GAAG+zD,MAAM,CAAC,CAAD,CAAX;AACAA,IAAAA,MAAM,GAAGA,MAAM,CAAC,CAAD,CAAf;AACD;;AAED,MAAIR,OAAO,CAACQ,MAAD,CAAX,EAAqB;AACnB,WAAOR,OAAO,CAACQ,MAAD,CAAd;AACD;;AAED,MAAIjxD,IAAI,GAAG,CAACixD,MAAM,CAACC,SAAP,CAAiBD,MAAM,CAAC1oB,WAAP,CAAmB,GAAnB,IAA0B,CAA3C,EAA8C0oB,MAAM,CAAChsD,MAArD,KAAgEgsD,MAAjE,EAAyE/gD,WAAzE,EAAX;AACA,MAAIihD,YAAY,GAAGN,aAAa,CAAC7wD,IAAD,CAAhC;;AACA,MAAImxD,YAAJ,EAAkB;AAChB,WAAOV,OAAO,CAACQ,MAAD,CAAP,GAAkBE,YAAY,CAACd,YAAY,KAAKY,MAAlB,CAAZ,CACtB90C,IADsB,CACjB,UAAUi1C,QAAV,EAAoB;AACxB,UAAIA,QAAJ,EAAc;AACZviD,QAAAA,MAAM,CAACoiD,MAAP,CAAcrzD,QAAd,CAAuBV,EAAvB,EAA2Bk0D,QAA3B;AACD;;AAED,aAAOA,QAAP;AACD,KAPsB,EAOpB9Q,KAPoB,CAOd,UAASn9C,CAAT,EAAY;AACnB,aAAOstD,OAAO,CAACQ,MAAD,CAAd;AAEA,YAAM9tD,CAAN;AACD,KAXsB,CAAzB;AAYD;AACF;;AAED,SAASutD,WAAT,CAAqBW,QAArB,EAA+B;AAC7B,OAAKA,QAAL,GAAgBA,QAAhB;AACA,OAAKrvB,OAAL,GAAe,IAAf;AACD;;AAED0uB,WAAW,CAAC1sD,SAAZ,CAAsBmY,IAAtB,GAA6B,UAAUm1C,SAAV,EAAqBC,OAArB,EAA8B;AACzD,MAAI,KAAKvvB,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAIh/B,OAAJ,CAAY,KAAKquD,QAAjB,CAAf;AAC3B,SAAO,KAAKrvB,OAAL,CAAa7lB,IAAb,CAAkBm1C,SAAlB,EAA6BC,OAA7B,CAAP;AACD,CAHD;;AAKAb,WAAW,CAAC1sD,SAAZ,CAAsBs8C,KAAtB,GAA8B,UAAUiR,OAAV,EAAmB;AAC/C,MAAI,KAAKvvB,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAIh/B,OAAJ,CAAY,KAAKquD,QAAjB,CAAf;AAC3B,SAAO,KAAKrvB,OAAL,CAAase,KAAb,CAAmBiR,OAAnB,CAAP;AACD,CAHD;;AC/EA1iD,MAAM,CAACC,OAAP,GAAiB,SAAS0iD,cAAT,CAAwBP,MAAxB,EAAgC;AAC/C,SAAO7jB,KAAK,CAAC6jB,MAAD,CAAL,CAAc90C,IAAd,CAAmB,UAAUs1C,GAAV,EAAe;AACvC,WAAOA,GAAG,CAACt1B,IAAJ,EAAP;AACD,GAFM,CAAP;AAGD,CAJD","file":"bui.js","sourceRoot":"../demo","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  readonly polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = typeof window !== 'undefined' &&\n    window.customElements != null &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.insertBefore(start!, before);\n        start = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes =\n    (container: Node, start: Node|null, end: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.removeChild(start!);\n        start = n;\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  readonly parts: TemplatePart[] = [];\n  readonly element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n\n    const nodesToRemove: Node[] = [];\n    const stack: Node[] = [];\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        element.content,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    // Keeps track of the last index associated with a part. We try to delete\n    // unnecessary nodes, but we never want to associate two different parts\n    // to the same index. They must have a constant node between.\n    let lastPartIndex = 0;\n    let index = -1;\n    let partIndex = 0;\n    const {strings, values: {length}} = result;\n    while (partIndex < length) {\n      const node = walker.nextNode() as Element | Comment | Text | null;\n      if (node === null) {\n        // We've exhausted the content inside a nested template element.\n        // Because we still have parts (the outer for-loop), we know:\n        // - There is a template in the stack\n        // - The walker will find a nextNode outside the template\n        walker.currentNode = stack.pop()!;\n        continue;\n      }\n      index++;\n\n      if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n        if ((node as Element).hasAttributes()) {\n          const attributes = (node as Element).attributes;\n          const {length} = attributes;\n          // Per\n          // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n          // attributes are not guaranteed to be returned in document order.\n          // In particular, Edge/IE can return them out of order, so we cannot\n          // assume a correspondence between part index and attribute index.\n          let count = 0;\n          for (let i = 0; i < length; i++) {\n            if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n              count++;\n            }\n          }\n          while (count-- > 0) {\n            // Get the template literal section leading up to the first\n            // expression in this attribute\n            const stringForPart = strings[partIndex];\n            // Find the attribute name\n            const name = lastAttributeNameRegex.exec(stringForPart)![2];\n            // Find the corresponding attribute\n            // All bound attributes have had a suffix added in\n            // TemplateResult#getHTML to opt out of special attribute\n            // handling. To look up the attribute value we also need to add\n            // the suffix.\n            const attributeLookupName =\n                name.toLowerCase() + boundAttributeSuffix;\n            const attributeValue =\n                (node as Element).getAttribute(attributeLookupName)!;\n            (node as Element).removeAttribute(attributeLookupName);\n            const statics = attributeValue.split(markerRegex);\n            this.parts.push({type: 'attribute', index, name, strings: statics});\n            partIndex += statics.length - 1;\n          }\n        }\n        if ((node as Element).tagName === 'TEMPLATE') {\n          stack.push(node);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n      } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n        const data = (node as Text).data;\n        if (data.indexOf(marker) >= 0) {\n          const parent = node.parentNode!;\n          const strings = data.split(markerRegex);\n          const lastIndex = strings.length - 1;\n          // Generate a new text node for each literal section\n          // These nodes are also used as the markers for node parts\n          for (let i = 0; i < lastIndex; i++) {\n            let insert: Node;\n            let s = strings[i];\n            if (s === '') {\n              insert = createMarker();\n            } else {\n              const match = lastAttributeNameRegex.exec(s);\n              if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                s = s.slice(0, match.index) + match[1] +\n                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n              }\n              insert = document.createTextNode(s);\n            }\n            parent.insertBefore(insert, node);\n            this.parts.push({type: 'node', index: ++index});\n          }\n          // If there's no text, we must insert a comment to mark our place.\n          // Else, we can trust it will stick around after cloning.\n          if (strings[lastIndex] === '') {\n            parent.insertBefore(createMarker(), node);\n            nodesToRemove.push(node);\n          } else {\n            (node as Text).data = strings[lastIndex];\n          }\n          // We have a part for each match found\n          partIndex += lastIndex;\n        }\n      } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n        if ((node as Comment).data === marker) {\n          const parent = node.parentNode!;\n          // Add a new marker node to be the startNode of the Part if any of\n          // the following are true:\n          //  * We don't have a previousSibling\n          //  * The previousSibling is already the start of a previous part\n          if (node.previousSibling === null || index === lastPartIndex) {\n            index++;\n            parent.insertBefore(createMarker(), node);\n          }\n          lastPartIndex = index;\n          this.parts.push({type: 'node', index});\n          // If we don't have a nextSibling, keep this node so we have an end.\n          // Else, we can remove it to save future costs.\n          if (node.nextSibling === null) {\n            (node as Comment).data = '';\n          } else {\n            nodesToRemove.push(node);\n            index--;\n          }\n          partIndex++;\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            // TODO (justinfagnani): consider whether it's even worth it to\n            // make bindings in comments work\n            this.parts.push({type: 'node', index: -1});\n            partIndex++;\n          }\n        }\n      }\n    }\n\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\nconst endsWith = (str: string, suffix: string): boolean => {\n  const index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  readonly type: 'node'; index: number;\n}|{\n  readonly type: 'attribute';\n  index: number;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    // eslint-disable-next-line no-control-regex\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(\n    template: Template, nodesToRemove: Set<Node>) {\n  const {element: {content}, parts} = template;\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let part = parts[partIndex];\n  let nodeIndex = -1;\n  let removeCount = 0;\n  const nodesToRemoveInTemplate = [];\n  let currentRemovingNode: Node|null = null;\n  while (walker.nextNode()) {\n    nodeIndex++;\n    const node = walker.currentNode as Element;\n    // End removal if stepped past the removing node\n    if (node.previousSibling === currentRemovingNode) {\n      currentRemovingNode = null;\n    }\n    // A node to remove was found in the template\n    if (nodesToRemove.has(node)) {\n      nodesToRemoveInTemplate.push(node);\n      // Track node we're removing\n      if (currentRemovingNode === null) {\n        currentRemovingNode = node;\n      }\n    }\n    // When removing, increment count by which to adjust subsequent part indices\n    if (currentRemovingNode !== null) {\n      removeCount++;\n    }\n    while (part !== undefined && part.index === nodeIndex) {\n      // If part is in a removed node deactivate it by setting index to -1 or\n      // adjust the index as needed.\n      part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n      // go to the next active part.\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n      part = parts[partIndex];\n    }\n  }\n  nodesToRemoveInTemplate.forEach((n) => n.parentNode!.removeChild(n));\n}\n\nconst countNodes = (node: Node) => {\n  let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n  const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n  while (walker.nextNode()) {\n    count++;\n  }\n  return count;\n};\n\nconst nextActiveIndexInTemplateParts =\n    (parts: TemplatePart[], startIndex = -1) => {\n      for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(\n    template: Template, node: Node, refNode: Node|null = null) {\n  const {element: {content}, parts} = template;\n  // If there's no refNode, then put node at end of template.\n  // No part indices need to be shifted in this case.\n  if (refNode === null || refNode === undefined) {\n    content.appendChild(node);\n    return;\n  }\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let insertCount = 0;\n  let walkerIndex = -1;\n  while (walker.nextNode()) {\n    walkerIndex++;\n    const walkerNode = walker.currentNode as Element;\n    if (walkerNode === refNode) {\n      insertCount = countNodes(node);\n      refNode.parentNode!.insertBefore(node, refNode);\n    }\n    while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n      // If we've inserted the node, simply adjust all subsequent parts\n      if (insertCount > 0) {\n        while (partIndex !== -1) {\n          parts[partIndex].index += insertCount;\n          partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n        return;\n      }\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  readonly value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, causing it to actually be written to the\n   * DOM.\n   *\n   * Directives are run at the start of `commit`, so that if they call\n   * `part.setValue(...)` synchronously that value will be used in the current\n   * commit, and there's no need to call `part.commit()` within the directive.\n   * If directives set a part value asynchronously, then they must call\n   * `part.commit()` manually.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  private readonly __parts: Array<Part|undefined> = [];\n  readonly processor: TemplateProcessor;\n  readonly options: RenderOptions;\n  readonly template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: readonly unknown[]) {\n    let i = 0;\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // There are a number of steps in the lifecycle of a template instance's\n    // DOM fragment:\n    //  1. Clone - create the instance fragment\n    //  2. Adopt - adopt into the main document\n    //  3. Process - find part markers and create parts\n    //  4. Upgrade - upgrade custom elements\n    //  5. Update - set node, attribute, property, etc., values\n    //  6. Connect - connect to the document. Optional and outside of this\n    //     method.\n    //\n    // We have a few constraints on the ordering of these steps:\n    //  * We need to upgrade before updating, so that property values will pass\n    //    through any property setters.\n    //  * We would like to process before upgrading so that we're sure that the\n    //    cloned fragment is inert and not disturbed by self-modifying DOM.\n    //  * We want custom elements to upgrade even in disconnected fragments.\n    //\n    // Given these constraints, with full custom elements support we would\n    // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n    //\n    // But Safari does not implement CustomElementRegistry#upgrade, so we\n    // can not implement that order and still have upgrade-before-update and\n    // upgrade disconnected fragments. So we instead sacrifice the\n    // process-before-upgrade constraint, since in Custom Elements v1 elements\n    // must not modify their light DOM in the constructor. We still have issues\n    // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n    // that don't strictly adhere to the no-modification rule because shadow\n    // DOM, which may be created in the constructor, is emulated by being placed\n    // in the light DOM.\n    //\n    // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n    // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n    // in one step.\n    //\n    // The Custom Elements v1 polyfill supports upgrade(), so the order when\n    // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n    // Connect.\n\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const stack: Node[] = [];\n    const parts = this.template.parts;\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        fragment,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    let partIndex = 0;\n    let nodeIndex = 0;\n    let part: TemplatePart;\n    let node = walker.nextNode();\n    // Loop through all the nodes and parts of a template\n    while (partIndex < parts.length) {\n      part = parts[partIndex];\n      if (!isTemplatePartActive(part)) {\n        this.__parts.push(undefined);\n        partIndex++;\n        continue;\n      }\n\n      // Progress the tree walker until we find our next part's node.\n      // Note that multiple parts may share the same node (attribute parts\n      // on a single element), so this loop may not run at all.\n      while (nodeIndex < part.index) {\n        nodeIndex++;\n        if (node!.nodeName === 'TEMPLATE') {\n          stack.push(node!);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n        if ((node = walker.nextNode()) === null) {\n          // We've exhausted the content inside a nested template element.\n          // Because we still have parts (the outer for-loop), we know:\n          // - There is a template in the stack\n          // - The walker will find a nextNode outside the template\n          walker.currentNode = stack.pop()!;\n          node = walker.nextNode();\n        }\n      }\n\n      // We've arrived at our part's node.\n      if (part.type === 'node') {\n        const part = this.processor.handleTextExpression(this.options);\n        part.insertAfterNode(node!.previousSibling!);\n        this.__parts.push(part);\n      } else {\n        this.__parts.push(...this.processor.handleAttributeExpressions(\n            node as Element, part.name, part.strings, this.options));\n      }\n      partIndex++;\n    }\n\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\ndeclare const trustedTypes: typeof window.trustedTypes;\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = window.trustedTypes &&\n    trustedTypes!.createPolicy('lit-html', {createHTML: (s) => s});\n\nconst commentMarker = ` ${marker} `;\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  readonly strings: TemplateStringsArray;\n  readonly values: readonly unknown[];\n  readonly type: string;\n  readonly processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: readonly unknown[], type: string,\n      processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const l = this.strings.length - 1;\n    let html = '';\n    let isCommentBinding = false;\n\n    for (let i = 0; i < l; i++) {\n      const s = this.strings[i];\n      // For each binding we want to determine the kind of marker to insert\n      // into the template source before it's parsed by the browser's HTML\n      // parser. The marker type is based on whether the expression is in an\n      // attribute, text, or comment position.\n      //   * For node-position bindings we insert a comment with the marker\n      //     sentinel as its text content, like <!--{{lit-guid}}-->.\n      //   * For attribute bindings we insert just the marker sentinel for the\n      //     first binding, so that we support unquoted attribute bindings.\n      //     Subsequent bindings can use a comment marker because multi-binding\n      //     attributes must be quoted.\n      //   * For comment bindings we insert just the marker sentinel so we don't\n      //     close the comment.\n      //\n      // The following code scans the template source, but is *not* an HTML\n      // parser. We don't need to track the tree structure of the HTML, only\n      // whether a binding is inside a comment, and if not, if it appears to be\n      // the first binding in an attribute.\n      const commentOpen = s.lastIndexOf('<!--');\n      // We're in comment position if we have a comment open with no following\n      // comment close. Because <-- can appear in an attribute value there can\n      // be false positives.\n      isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n          s.indexOf('-->', commentOpen + 1) === -1;\n      // Check to see if we have an attribute-like sequence preceding the\n      // expression. This can match \"name=value\" like structures in text,\n      // comments, and attribute values, so there can be false-positives.\n      const attributeMatch = lastAttributeNameRegex.exec(s);\n      if (attributeMatch === null) {\n        // We're only in this branch if we don't have a attribute-like\n        // preceding sequence. For comments, this guards against unusual\n        // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n        // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n        // below.\n        html += s + (isCommentBinding ? commentMarker : nodeMarker);\n      } else {\n        // For attributes we use just a marker sentinel, and also append a\n        // $lit$ suffix to the name to opt-out of attribute-specific parsing\n        // that IE and Edge do for style and certain SVG attributes.\n        html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n            attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n            marker;\n      }\n    }\n    html += this.strings[l];\n    return html;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    let value = this.getHTML();\n    if (policy !== undefined) {\n      // this is secure because `this.strings` is a TemplateStringsArray.\n      // TODO: validate this when\n      // https://github.com/tc39/proposal-array-is-template-object is\n      // implemented.\n      value = policy.createHTML(value) as unknown as string;\n    }\n    template.innerHTML = value;\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return Array.isArray(value) ||\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !!(value && (value as any)[Symbol.iterator]);\n};\n\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attribute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  readonly parts: ReadonlyArray<AttributePart>;\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      (this.parts as AttributePart[])[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    const parts = this.parts;\n\n    // If we're assigning an attribute via syntax like:\n    //    attr=\"${foo}\"  or  attr=${foo}\n    // but not\n    //    attr=\"${foo} ${bar}\" or attr=\"${foo} baz\"\n    // then we don't want to coerce the attribute value into one long\n    // string. Instead we want to just return the value itself directly,\n    // so that sanitizeDOMValue can get the actual value rather than\n    // String(value)\n    // The exception is if v is an array, in which case we do want to smash\n    // it together into a string without calling String() on the array.\n    //\n    // This also allows trusted values (when using TrustedTypes) being\n    // assigned to DOM sinks without being stringified in the process.\n    if (l === 1 && strings[0] === '' && strings[1] === '') {\n      const v = parts[0].value;\n      if (typeof v === 'symbol') {\n        return String(v);\n      }\n      if (typeof v === 'string' || !isIterable(v)) {\n        return v;\n      }\n    }\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (isPrimitive(v) || !isIterable(v)) {\n          text += typeof v === 'string' ? v : String(v);\n        } else {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart implements Part {\n  readonly committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(committer: AttributeCommitter) {\n    this.committer = committer;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart implements Part {\n  readonly options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n   * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n   * such as those that appear in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part.__insert(this.startNode = createMarker());\n    part.__insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref.__insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    if (this.startNode.parentNode === null) {\n      return;\n    }\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    const value = this.__pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this.__commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this.__commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this.__commitNode(value);\n    } else if (isIterable(value)) {\n      this.__commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this.__commitText(value);\n    }\n  }\n\n  private __insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private __commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this.__insert(value);\n    this.value = value;\n  }\n\n  private __commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    // If `value` isn't already a string, we explicitly convert it here in case\n    // it can't be implicitly converted - i.e. it's a symbol.\n    const valueAsString: string =\n        typeof value === 'string' ? value : String(value);\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = valueAsString;\n    } else {\n      this.__commitNode(document.createTextNode(valueAsString));\n    }\n    this.value = value;\n  }\n\n  private __commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this.__commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private __commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: readonly string[];\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: readonly string[]) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n    const value = !!this.__pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n      this.value = value;\n    }\n    this.__pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  readonly single: boolean;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  protected _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n  try {\n    const options = {\n      get capture() {\n        eventOptionsSupported = true;\n        return false;\n      }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    window.addEventListener('test', options as any, options);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    window.removeEventListener('test', options as any, options);\n  } catch (_e) {\n    // event options not supported\n  }\n})();\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  readonly element: Element;\n  readonly eventName: string;\n  readonly eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  private __options?: AddEventListenerOptions;\n  private __pendingValue: undefined|EventHandlerWithOptions = undefined;\n  private readonly __boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this.__boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this.__pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    if (shouldAddListener) {\n      this.__options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    this.value = newListener;\n    this.__pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behavior, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport interface TemplateCache {\n  readonly stringsArray: WeakMap<TemplateStringsArray, Template>;\n  readonly keyString: Map<string, Template>;\n}\n\nexport const templateCaches = new Map<string, TemplateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): ReadonlyArray<Part> {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const committer = new PropertyCommitter(element, name.slice(1), strings);\n      return committer.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const committer = new AttributeCommitter(element, name, strings);\n    return committer.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @packageDocumentation\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n  (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @packageDocumentation\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {removeNodes} from './dom.js';\nimport {insertNodeIntoTemplate, removeNodesFromTemplate} from './modify-template.js';\nimport {RenderOptions} from './render-options.js';\nimport {parts, render as litRender} from './render.js';\nimport {templateCaches} from './template-factory.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\nexport {html, svg, TemplateResult} from '../lit-html.js';\n\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type: string, scopeName: string) =>\n    `${type}--${scopeName}`;\n\nlet compatibleShadyCSSVersion = true;\n\nif (typeof window.ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n  console.warn(\n      `Incompatible ShadyCSS version detected. ` +\n      `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n      `@webcomponents/shadycss@1.3.1.`);\n  compatibleShadyCSSVersion = false;\n}\n\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nexport const shadyTemplateFactory = (scopeName: string) =>\n    (result: TemplateResult) => {\n      const cacheKey = getTemplateCacheKey(result.type, scopeName);\n      let templateCache = templateCaches.get(cacheKey);\n      if (templateCache === undefined) {\n        templateCache = {\n          stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n          keyString: new Map<string, Template>()\n        };\n        templateCaches.set(cacheKey, templateCache);\n      }\n\n      let template = templateCache.stringsArray.get(result.strings);\n      if (template !== undefined) {\n        return template;\n      }\n\n      const key = result.strings.join(marker);\n      template = templateCache.keyString.get(key);\n      if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n          window.ShadyCSS!.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n      }\n      templateCache.stringsArray.set(result.strings, template);\n      return template;\n    };\n\nconst TEMPLATE_TYPES = ['html', 'svg'];\n\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName: string) => {\n  TEMPLATE_TYPES.forEach((type) => {\n    const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n    if (templates !== undefined) {\n      templates.keyString.forEach((template) => {\n        const {element: {content}} = template;\n        // IE 11 doesn't support the iterable param Set constructor\n        const styles = new Set<Element>();\n        Array.from(content.querySelectorAll('style')).forEach((s: Element) => {\n          styles.add(s);\n        });\n        removeNodesFromTemplate(template, styles);\n      });\n    }\n  });\n};\n\nconst shadyRenderSet = new Set<string>();\n\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles =\n    (scopeName: string, renderedDOM: DocumentFragment, template?: Template) => {\n      shadyRenderSet.add(scopeName);\n      // If `renderedDOM` is stamped from a Template, then we need to edit that\n      // Template's underlying template element. Otherwise, we create one here\n      // to give to ShadyCSS, which still requires one while scoping.\n      const templateElement =\n          !!template ? template.element : document.createElement('template');\n      // Move styles out of rendered DOM and store.\n      const styles = renderedDOM.querySelectorAll('style');\n      const {length} = styles;\n      // If there are no styles, skip unnecessary work\n      if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n        return;\n      }\n      const condensedStyle = document.createElement('style');\n      // Collect styles into a single style. This helps us make sure ShadyCSS\n      // manipulations will not prevent us from being able to fix up template\n      // part indices.\n      // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n      // currently does this anyway. When it does not, this should be changed.\n      for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode!.removeChild(style);\n        condensedStyle.textContent! += style.textContent;\n      }\n      // Remove styles from nested templates in this scope.\n      removeStylesFromLitTemplates(scopeName);\n      // And then put the condensed style into the \"root\" template passed in as\n      // `template`.\n      const content = templateElement.content;\n      if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n      } else {\n        content.insertBefore(condensedStyle, content.firstChild);\n      }\n      // Note, it's important that ShadyCSS gets the template that `lit-html`\n      // will actually render so that it can update the style inside when\n      // needed (e.g. @apply native Shadow DOM case).\n      window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n      const style = content.querySelector('style');\n      if (window.ShadyCSS!.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n      } else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set<Node>();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n      }\n    };\n\nexport interface ShadyRenderOptions extends Partial<RenderOptions> {\n  scopeName: string;\n}\n\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment|ShadowRoot,\n     options: ShadyRenderOptions) => {\n      if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n      }\n      const scopeName = options.scopeName;\n      const hasRendered = parts.has(container);\n      const needsScoping = compatibleShadyCSSVersion &&\n          container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n          !!(container as ShadowRoot).host;\n      // Handle first render to a scope specially...\n      const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n      // On first scope render, render into a fragment; this cannot be a single\n      // fragment that is reused since nested renders can occur synchronously.\n      const renderContainer =\n          firstScopeRender ? document.createDocumentFragment() : container;\n      litRender(\n          result,\n          renderContainer,\n          {templateFactory: shadyTemplateFactory(scopeName), ...options} as\n              RenderOptions);\n      // When performing first scope render,\n      // (1) We've rendered into a fragment so that there's a chance to\n      // `prepareTemplateStyles` before sub-elements hit the DOM\n      // (which might cause them to render based on a common pattern of\n      // rendering in a custom element's `connectedCallback`);\n      // (2) Scope the template with ShadyCSS one time only for this scope.\n      // (3) Render the fragment into the container and make sure the\n      // container knows its `part` is the one we just rendered. This ensures\n      // DOM will be re-used on subsequent renders.\n      if (firstScopeRender) {\n        const part = parts.get(renderContainer)!;\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(\n            scopeName, renderContainer as DocumentFragment, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n      }\n      // After elements have hit the DOM, update styling if this is the\n      // initial render to this container.\n      // This is needed whenever dynamic changes are made so it would be\n      // safest to do every render; however, this would regress performance\n      // so we leave it up to the user to call `ShadyCSS.styleElement`\n      // for dynamic changes.\n      if (!hasRendered && needsScoping) {\n        window.ShadyCSS!.styleElement((container as ShadowRoot).host);\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    <P extends PropertyKey>(prop: P, _obj: unknown): P => prop;\n\ndeclare global {\n  var JSCompiler_renameProperty: <P extends PropertyKey>(\n      prop: P, _obj: unknown) => P;\n\n  interface Window {\n    JSCompiler_renameProperty: typeof JSCompiler_renameProperty;\n  }\n}\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Function called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string|null, type?: TypeHint): Type;\n\n  /**\n   * Function called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n    ComplexAttributeConverter<Type>|\n    ((value: string|null, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean|string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\n/**\n * Map of changed properties with old values. Takes an optional generic\n * interface corresponding to the declared element properties.\n */\n// tslint:disable-next-line:no-any\nexport type PropertyValues<T = any> =\n    keyof T extends PropertyKey ? Map<keyof T, unknown>: never;\n\nexport const defaultConverter: ComplexAttributeConverter = {\n\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        return value ? '' : null;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        return value == null ? value : JSON.stringify(value);\n    }\n    return value;\n  },\n\n  fromAttribute(value: string|null, type?: unknown) {\n    switch (type) {\n      case Boolean:\n        return value !== null;\n      case Number:\n        return value === null ? null : Number(value);\n      case Object:\n      case Array:\n        return JSON.parse(value!);\n    }\n    return value;\n  }\n\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean => {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual\n};\n\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\ntype UpdateState = typeof STATE_HAS_UPDATED|typeof STATE_UPDATE_REQUESTED|\n    typeof STATE_IS_REFLECTING_TO_ATTRIBUTE|\n    typeof STATE_IS_REFLECTING_TO_PROPERTY;\n\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nexport abstract class UpdatingElement extends HTMLElement {\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   */\n  private static _attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having finished creating properties.\n   */\n  protected static[finalized] = true;\n\n  /**\n   * Memoized list of all class properties, including any superclass properties.\n   * Created lazily on user subclasses when finalizing the class.\n   */\n  private static _classProperties?: PropertyDeclarationMap;\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring the property.\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   */\n  static get observedAttributes() {\n    // note: piggy backing on this to ensure we're finalized.\n    this.finalize();\n    const attributes: string[] = [];\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    this._classProperties!.forEach((v, p) => {\n      const attr = this._attributeNameForProperty(p, v);\n      if (attr !== undefined) {\n        this._attributeToPropertyMap.set(attr, p);\n        attributes.push(attr);\n      }\n    });\n    return attributes;\n  }\n\n  /**\n   * Ensures the private `_classProperties` property metadata is created.\n   * In addition to `finalize` this is also called in `createProperty` to\n   * ensure the `@property` decorator can add property metadata.\n   */\n  /** @nocollapse */\n  private static _ensureClassProperties() {\n    // ensure private storage for property declarations.\n    if (!this.hasOwnProperty(\n            JSCompiler_renameProperty('_classProperties', this))) {\n      this._classProperties = new Map();\n      // NOTE: Workaround IE11 not supporting Map constructor argument.\n      const superProperties: PropertyDeclarationMap =\n          Object.getPrototypeOf(this)._classProperties;\n      if (superProperties !== undefined) {\n        superProperties.forEach(\n            (v: PropertyDeclaration, k: PropertyKey) =>\n                this._classProperties!.set(k, v));\n      }\n    }\n  }\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist\n   * and stores a PropertyDeclaration for the property with the given options.\n   * The property setter calls the property's `hasChanged` property option\n   * or uses a strict identity check to determine whether or not to request\n   * an update.\n   *\n   * This method may be overridden to customize properties; however,\n   * when doing so, it's important to call `super.createProperty` to ensure\n   * the property is setup correctly. This method calls\n   * `getPropertyDescriptor` internally to get a descriptor to install.\n   * To customize what properties do when they are get or set, override\n   * `getPropertyDescriptor`. To customize the options for a property,\n   * implement `createProperty` like this:\n   *\n   * static createProperty(name, options) {\n   *   options = Object.assign(options, {myOption: true});\n   *   super.createProperty(name, options);\n   * }\n   *\n   * @nocollapse\n   */\n  static createProperty(\n      name: PropertyKey,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    // Note, since this can be called by the `@property` decorator which\n    // is called before `finalize`, we ensure storage exists for property\n    // metadata.\n    this._ensureClassProperties();\n    this._classProperties!.set(name, options);\n    // Do not generate an accessor if the prototype already has one, since\n    // it would be lost otherwise and that would never be the user's intention;\n    // Instead, we expect users to call `requestUpdate` themselves from\n    // user-defined accessors. Note that if the super has an accessor we will\n    // still overwrite it\n    if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n      return;\n    }\n    const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n    const descriptor = this.getPropertyDescriptor(name, key, options);\n    if (descriptor !== undefined) {\n      Object.defineProperty(this.prototype, name, descriptor);\n    }\n  }\n\n  /**\n   * Returns a property descriptor to be defined on the given named property.\n   * If no descriptor is returned, the property will not become an accessor.\n   * For example,\n   *\n   *   class MyElement extends LitElement {\n   *     static getPropertyDescriptor(name, key, options) {\n   *       const defaultDescriptor =\n   *           super.getPropertyDescriptor(name, key, options);\n   *       const setter = defaultDescriptor.set;\n   *       return {\n   *         get: defaultDescriptor.get,\n   *         set(value) {\n   *           setter.call(this, value);\n   *           // custom action.\n   *         },\n   *         configurable: true,\n   *         enumerable: true\n   *       }\n   *     }\n   *   }\n   *\n   * @nocollapse\n   */\n  protected static getPropertyDescriptor(\n      name: PropertyKey, key: string|symbol, options: PropertyDeclaration) {\n    return {\n      // tslint:disable-next-line:no-any no symbol in index\n      get(): any {\n        return (this as {[key: string]: unknown})[key as string];\n      },\n      set(this: UpdatingElement, value: unknown) {\n        const oldValue =\n            (this as {} as {[key: string]: unknown})[name as string];\n        (this as {} as {[key: string]: unknown})[key as string] = value;\n        (this as unknown as UpdatingElement)\n            .requestUpdateInternal(name, oldValue, options);\n      },\n      configurable: true,\n      enumerable: true\n    };\n  }\n\n  /**\n   * Returns the property options associated with the given property.\n   * These options are defined with a PropertyDeclaration via the `properties`\n   * object or the `@property` decorator and are registered in\n   * `createProperty(...)`.\n   *\n   * Note, this method should be considered \"final\" and not overridden. To\n   * customize the options for a given property, override `createProperty`.\n   *\n   * @nocollapse\n   * @final\n   */\n  protected static getPropertyOptions(name: PropertyKey) {\n    return this._classProperties && this._classProperties.get(name) ||\n        defaultPropertyDeclaration;\n  }\n\n  /**\n   * Creates property accessors for registered properties and ensures\n   * any superclasses are also finalized.\n   * @nocollapse\n   */\n  protected static finalize() {\n    // finalize any superclasses\n    const superCtor = Object.getPrototypeOf(this);\n    if (!superCtor.hasOwnProperty(finalized)) {\n      superCtor.finalize();\n    }\n    this[finalized] = true;\n    this._ensureClassProperties();\n    // initialize Map populated in observedAttributes\n    this._attributeToPropertyMap = new Map();\n    // make any properties\n    // Note, only process \"own\" properties since this element will inherit\n    // any properties defined on the superClass, and finalization ensures\n    // the entire prototype chain is finalized.\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      // support symbols in properties (IE11 does not support this)\n      const propKeys = [\n        ...Object.getOwnPropertyNames(props),\n        ...(typeof Object.getOwnPropertySymbols === 'function') ?\n            Object.getOwnPropertySymbols(props) :\n            []\n      ];\n      // This for/of is ok because propKeys is an array\n      for (const p of propKeys) {\n        // note, use of `any` is due to TypeSript lack of support for symbol in\n        // index types\n        // tslint:disable-next-line:no-any no symbol in index\n        this.createProperty(p, (props as any)[p]);\n      }\n    }\n  }\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static _attributeNameForProperty(\n      name: PropertyKey, options: PropertyDeclaration) {\n    const attribute = options.attribute;\n    return attribute === false ?\n        undefined :\n        (typeof attribute === 'string' ?\n             attribute :\n             (typeof name === 'string' ? name.toLowerCase() : undefined));\n  }\n\n  /**\n   * Returns true if a property should request an update.\n   * Called when a property value is set and uses the `hasChanged`\n   * option for the property if present or a strict identity check.\n   * @nocollapse\n   */\n  private static _valueHasChanged(\n      value: unknown, old: unknown, hasChanged: HasChanged = notEqual) {\n    return hasChanged(value, old);\n  }\n\n  /**\n   * Returns the property value for the given attribute value.\n   * Called via the `attributeChangedCallback` and uses the property's\n   * `converter` or `converter.fromAttribute` property option.\n   * @nocollapse\n   */\n  private static _propertyValueFromAttribute(\n      value: string|null, options: PropertyDeclaration) {\n    const type = options.type;\n    const converter = options.converter || defaultConverter;\n    const fromAttribute =\n        (typeof converter === 'function' ? converter : converter.fromAttribute);\n    return fromAttribute ? fromAttribute(value, type) : value;\n  }\n\n  /**\n   * Returns the attribute value for the given property value. If this\n   * returns undefined, the property will *not* be reflected to an attribute.\n   * If this returns null, the attribute will be removed, otherwise the\n   * attribute will be set to the value.\n   * This uses the property's `reflect` and `type.toAttribute` property options.\n   * @nocollapse\n   */\n  private static _propertyValueToAttribute(\n      value: unknown, options: PropertyDeclaration) {\n    if (options.reflect === undefined) {\n      return;\n    }\n    const type = options.type;\n    const converter = options.converter;\n    const toAttribute =\n        converter && (converter as ComplexAttributeConverter).toAttribute ||\n        defaultConverter.toAttribute;\n    return toAttribute!(value, type);\n  }\n\n  private _updateState!: UpdateState;\n  private _instanceProperties?: PropertyValues;\n  // Initialize to an unresolved Promise so we can make sure the element has\n  // connected before first update.\n  private _updatePromise!: Promise<unknown>;\n  private _enableUpdatingResolver: (() => void)|undefined;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   */\n  private _changedProperties!: PropertyValues;\n\n  /**\n   * Map with keys of properties that should be reflected when updated.\n   */\n  private _reflectingProperties?: Map<PropertyKey, PropertyDeclaration>;\n\n  constructor() {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Performs element initialization. By default captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    this._updateState = 0;\n    this._updatePromise =\n        new Promise((res) => this._enableUpdatingResolver = res);\n    this._changedProperties = new Map();\n    this._saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this.requestUpdateInternal();\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private _saveInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    (this.constructor as typeof UpdatingElement)\n        ._classProperties!.forEach((_v, p) => {\n          if (this.hasOwnProperty(p)) {\n            const value = this[p as keyof this];\n            delete this[p as keyof this];\n            if (!this._instanceProperties) {\n              this._instanceProperties = new Map();\n            }\n            this._instanceProperties.set(p, value);\n          }\n        });\n  }\n\n  /**\n   * Applies previously saved instance properties.\n   */\n  private _applyInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    // tslint:disable-next-line:no-any\n    this._instanceProperties!.forEach((v, p) => (this as any)[p] = v);\n    this._instanceProperties = undefined;\n  }\n\n  connectedCallback() {\n    // Ensure first connection completes an update. Updates cannot complete\n    // before connection.\n    this.enableUpdating();\n  }\n\n  protected enableUpdating() {\n    if (this._enableUpdatingResolver !== undefined) {\n      this._enableUpdatingResolver();\n      this._enableUpdatingResolver = undefined;\n    }\n  }\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   */\n  disconnectedCallback() {\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   */\n  attributeChangedCallback(name: string, old: string|null, value: string|null) {\n    if (old !== value) {\n      this._attributeToProperty(name, value);\n    }\n  }\n\n  private _propertyToAttribute(\n      name: PropertyKey, value: unknown,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const attr = ctor._attributeNameForProperty(name, options);\n    if (attr !== undefined) {\n      const attrValue = ctor._propertyValueToAttribute(value, options);\n      // an undefined value does not change the attribute.\n      if (attrValue === undefined) {\n        return;\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n    }\n  }\n\n  private _attributeToProperty(name: string, value: string|null) {\n    // Use tracking info to avoid deserializing attribute value if it was\n    // just set from a property setter.\n    if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n      return;\n    }\n    const ctor = (this.constructor as typeof UpdatingElement);\n    // Note, hint this as an `AttributeMap` so closure clearly understands\n    // the type; it has issues with tracking types through statics\n    // tslint:disable-next-line:no-unnecessary-type-assertion\n    const propName = (ctor._attributeToPropertyMap as AttributeMap).get(name);\n    if (propName !== undefined) {\n      const options = ctor.getPropertyOptions(propName);\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n      this[propName as keyof this] =\n          // tslint:disable-next-line:no-any\n          ctor._propertyValueFromAttribute(value, options) as any;\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n    }\n  }\n\n  /**\n   * This protected version of `requestUpdate` does not access or return the\n   * `updateComplete` promise. This promise can be overridden and is therefore\n   * not free to access.\n   */\n  protected requestUpdateInternal(\n      name?: PropertyKey, oldValue?: unknown, options?: PropertyDeclaration) {\n    let shouldRequestUpdate = true;\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      const ctor = this.constructor as typeof UpdatingElement;\n      options = options || ctor.getPropertyOptions(name);\n      if (ctor._valueHasChanged(\n              this[name as keyof this], oldValue, options.hasChanged)) {\n        if (!this._changedProperties.has(name)) {\n          this._changedProperties.set(name, oldValue);\n        }\n        // Add to reflecting properties set.\n        // Note, it's important that every change has a chance to add the\n        // property to `_reflectingProperties`. This ensures setting\n        // attribute + property reflects correctly.\n        if (options.reflect === true &&\n            !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n          if (this._reflectingProperties === undefined) {\n            this._reflectingProperties = new Map();\n          }\n          this._reflectingProperties.set(name, options);\n        }\n      } else {\n        // Abort the request if the property should not be considered changed.\n        shouldRequestUpdate = false;\n      }\n    }\n    if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n      this._updatePromise = this._enqueueUpdate();\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should\n   * be called when an element should update based on some state not triggered\n   * by setting a property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored. Returns the `updateComplete` Promise which is resolved\n   * when the update completes.\n   *\n   * @param name {PropertyKey} (optional) name of requesting property\n   * @param oldValue {any} (optional) old value of requesting property\n   * @returns {Promise} A Promise that is resolved when the update completes.\n   */\n  requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    this.requestUpdateInternal(name, oldValue);\n    return this.updateComplete;\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async _enqueueUpdate() {\n    this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await this._updatePromise;\n    } catch (e) {\n      // Ignore any previous errors. We only care that the previous cycle is\n      // done. Any error should have been handled in the previous update.\n    }\n    const result = this.performUpdate();\n    // If `performUpdate` returns a Promise, we await it. This is done to\n    // enable coordinating updates with a scheduler. Note, the result is\n    // checked to avoid delaying an additional microtask unless we need to.\n    if (result != null) {\n      await result;\n    }\n    return !this._hasRequestedUpdate;\n  }\n\n  private get _hasRequestedUpdate() {\n    return (this._updateState & STATE_UPDATE_REQUESTED);\n  }\n\n  protected get hasUpdated() {\n    return (this._updateState & STATE_HAS_UPDATED);\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * You can override this method to change the timing of updates. If this\n   * method is overridden, `super.performUpdate()` must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```\n   * protected async performUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.performUpdate();\n   * }\n   * ```\n   */\n  protected performUpdate(): void|Promise<unknown> {\n    // Abort any update if one is not pending when this is called.\n    // This can happen if `performUpdate` is called early to \"flush\"\n    // the update.\n    if (!this._hasRequestedUpdate) {\n      return;\n    }\n    // Mixin instance properties once, if they exist.\n    if (this._instanceProperties) {\n      this._applyInstanceProperties();\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.update(changedProperties);\n      } else {\n        this._markUpdated();\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      // Ensure element can accept additional updates after an exception.\n      this._markUpdated();\n      throw e;\n    }\n    if (shouldUpdate) {\n      if (!(this._updateState & STATE_HAS_UPDATED)) {\n        this._updateState = this._updateState | STATE_HAS_UPDATED;\n        this.firstUpdated(changedProperties);\n      }\n      this.updated(changedProperties);\n    }\n  }\n\n  private _markUpdated() {\n    this._changedProperties = new Map();\n    this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `_getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super._getUpdateComplete()`, then any subsequent state.\n   *\n   * @returns {Promise} The Promise returns a boolean that indicates if the\n   * update resolved without triggering another update.\n   */\n  get updateComplete() {\n    return this._getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   *   class MyElement extends LitElement {\n   *     async _getUpdateComplete() {\n   *       await super._getUpdateComplete();\n   *       await this._myChild.updateComplete;\n   *     }\n   *   }\n   */\n  protected _getUpdateComplete() {\n    return this._updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(_changedProperties: PropertyValues) {\n    if (this._reflectingProperties !== undefined &&\n        this._reflectingProperties.size > 0) {\n      // Use forEach so this works even if for/of loops are compiled to for\n      // loops expecting arrays\n      this._reflectingProperties.forEach(\n          (v, k) => this._propertyToAttribute(k, this[k as keyof this], v));\n      this._reflectingProperties = undefined;\n    }\n    this._markUpdated();\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected updated(_changedProperties: PropertyValues) {\n  }\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {LitElement} from '../lit-element.js';\n\nimport {PropertyDeclaration, UpdatingElement} from './updating-element.js';\n\nexport type Constructor<T> = {\n  // tslint:disable-next-line:no-any\n  new (...args: any[]): T\n};\n\n// From the TC39 Decorators proposal\ninterface ClassDescriptor {\n  kind: 'class';\n  elements: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n}\n\n// From the TC39 Decorators proposal\ninterface ClassElement {\n  kind: 'field'|'method';\n  key: PropertyKey;\n  placement: 'static'|'prototype'|'own';\n  initializer?: Function;\n  extras?: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n  descriptor?: PropertyDescriptor;\n}\n\nconst legacyCustomElement =\n    (tagName: string, clazz: Constructor<HTMLElement>) => {\n      window.customElements.define(tagName, clazz);\n      // Cast as any because TS doesn't recognize the return type as being a\n      // subtype of the decorated class when clazz is typed as\n      // `Constructor<HTMLElement>` for some reason.\n      // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n      // applied to elements however.\n      // tslint:disable-next-line:no-any\n      return clazz as any;\n    };\n\nconst standardCustomElement =\n    (tagName: string, descriptor: ClassDescriptor) => {\n      const {kind, elements} = descriptor;\n      return {\n        kind,\n        elements,\n        // This callback is called once the class is otherwise fully defined\n        finisher(clazz: Constructor<HTMLElement>) {\n          window.customElements.define(tagName, clazz);\n        }\n      };\n    };\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * ```\n * @customElement('my-element')\n * class MyElement {\n *   render() {\n *     return html``;\n *   }\n * }\n * ```\n * @category Decorator\n * @param tagName The name of the custom element to define.\n */\nexport const customElement = (tagName: string) =>\n    (classOrDescriptor: Constructor<HTMLElement>|ClassDescriptor) =>\n        (typeof classOrDescriptor === 'function') ?\n    legacyCustomElement(tagName, classOrDescriptor) :\n    standardCustomElement(tagName, classOrDescriptor);\n\nconst standardProperty =\n    (options: PropertyDeclaration, element: ClassElement) => {\n      // When decorating an accessor, pass it through and add property metadata.\n      // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n      // stomp over the user's accessor.\n      if (element.kind === 'method' && element.descriptor &&\n          !('value' in element.descriptor)) {\n        return {\n          ...element,\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      } else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n          kind: 'field',\n          key: Symbol(),\n          placement: 'own',\n          descriptor: {},\n          // When @babel/plugin-proposal-decorators implements initializers,\n          // do this instead of the initializer below. See:\n          // https://github.com/babel/babel/issues/9260 extras: [\n          //   {\n          //     kind: 'initializer',\n          //     placement: 'own',\n          //     initializer: descriptor.initializer,\n          //   }\n          // ],\n          initializer(this: {[key: string]: unknown}) {\n            if (typeof element.initializer === 'function') {\n              this[element.key as string] = element.initializer.call(this);\n            }\n          },\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      }\n    };\n\nconst legacyProperty =\n    (options: PropertyDeclaration, proto: Object, name: PropertyKey) => {\n      (proto.constructor as typeof UpdatingElement)\n          .createProperty(name, options);\n    };\n\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration) {\n  // tslint:disable-next-line:no-any decorator\n  return (protoOrDescriptor: Object|ClassElement, name?: PropertyKey): any =>\n             (name !== undefined) ?\n      legacyProperty(options!, protoOrDescriptor as Object, name) :\n      standardProperty(options!, protoOrDescriptor as ClassElement);\n}\n\nexport interface InternalPropertyDeclaration<Type = unknown> {\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n}\n\n/**\n * Declares a private or protected property that still triggers updates to the\n * element when it changes.\n *\n * Properties declared this way must not be used from HTML or HTML templating\n * systems, they're solely for properties internal to the element. These\n * properties may be renamed by optimization tools like closure compiler.\n * @category Decorator\n */\nexport function internalProperty(options?: InternalPropertyDeclaration) {\n  return property({attribute: false, hasChanged: options?.hasChanged});\n}\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n * @param cache An optional boolean which when true performs the DOM query only\n * once and caches the result.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * @example\n *\n * ```ts\n * class MyElement {\n *   @query('#first')\n *   first;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function query(selector: string, cache?: boolean) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelector(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    if (cache) {\n      const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n      descriptor.get = function(this: LitElement) {\n        if ((this as unknown as\n             {[key: string]: Element | null})[key as string] === undefined) {\n          ((this as unknown as {[key: string]: Element | null})[key as string] =\n               this.renderRoot.querySelector(selector));\n        }\n        return (\n            this as unknown as {[key: string]: Element | null})[key as string];\n      };\n    }\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\n// Note, in the future, we may extend this decorator to support the use case\n// where the queried element may need to do work to become ready to interact\n// with (e.g. load some implementation code). If so, we might elect to\n// add a second argument defining a function that can be run to make the\n// queried element loaded/updated/ready.\n/**\n * A property decorator that converts a class property into a getter that\n * returns a promise that resolves to the result of a querySelector on the\n * element's renderRoot done after the element's `updateComplete` promise\n * resolves. When the queried property may change with element state, this\n * decorator can be used instead of requiring users to await the\n * `updateComplete` before accessing the property.\n *\n * @param selector A DOMString containing one or more selectors to match.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * @example\n * ```ts\n * class MyElement {\n *   @queryAsync('#first')\n *   first;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n *\n * // external usage\n * async doSomethingWithFirst() {\n *  (await aMyElement.first).doSomething();\n * }\n * ```\n * @category Decorator\n */\nexport function queryAsync(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      async get(this: LitElement) {\n        await this.updateComplete;\n        return this.renderRoot.querySelector(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n *\n * @example\n * ```ts\n * class MyElement {\n *   @queryAll('div')\n *   divs;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function queryAll(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelectorAll(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\nconst legacyQuery =\n    (descriptor: PropertyDescriptor, proto: Object, name: PropertyKey) => {\n      Object.defineProperty(proto, name, descriptor);\n    };\n\nconst standardQuery = (descriptor: PropertyDescriptor, element: ClassElement) =>\n    ({\n      kind: 'method',\n      placement: 'prototype',\n      key: element.key,\n      descriptor,\n    });\n\nconst standardEventOptions =\n    (options: AddEventListenerOptions, element: ClassElement) => {\n      return {\n        ...element,\n        finisher(clazz: typeof UpdatingElement) {\n          Object.assign(\n              clazz.prototype[element.key as keyof UpdatingElement], options);\n        }\n      };\n    };\n\nconst legacyEventOptions =\n    // tslint:disable-next-line:no-any legacy decorator\n    (options: AddEventListenerOptions, proto: any, name: PropertyKey) => {\n      Object.assign(proto[name], options);\n    };\n\n/**\n * Adds event listener options to a method used as an event listener in a\n * lit-html template.\n *\n * @param options An object that specifies event listener options as accepted by\n * `EventTarget#addEventListener` and `EventTarget#removeEventListener`.\n *\n * Current browsers support the `capture`, `passive`, and `once` options. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters\n *\n * @example\n * ```ts\n * class MyElement {\n *   clicked = false;\n *\n *   render() {\n *     return html`\n *       <div @click=${this._onClick}`>\n *         <button></button>\n *       </div>\n *     `;\n *   }\n *\n *   @eventOptions({capture: true})\n *   _onClick(e) {\n *     this.clicked = true;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function eventOptions(options: AddEventListenerOptions) {\n  // Return value typed as any to prevent TypeScript from complaining that\n  // standard decorator function signature does not match TypeScript decorator\n  // signature\n  // TODO(kschaaf): unclear why it was only failing on this decorator and not\n  // the others\n  return ((protoOrDescriptor: Object|ClassElement, name?: string) =>\n              (name !== undefined) ?\n              legacyEventOptions(options, protoOrDescriptor as Object, name) :\n              standardEventOptions(\n                  options, protoOrDescriptor as ClassElement)) as\n             // tslint:disable-next-line:no-any decorator\n             any;\n}\n\n// x-browser support for matches\n// tslint:disable-next-line:no-any\nconst ElementProto = Element.prototype as any;\nconst legacyMatches =\n    ElementProto.msMatchesSelector || ElementProto.webkitMatchesSelector;\n\n/**\n * A property decorator that converts a class property into a getter that\n * returns the `assignedNodes` of the given named `slot`. Note, the type of\n * this property should be annotated as `NodeListOf<HTMLElement>`.\n *\n * @param slotName A string name of the slot.\n * @param flatten A boolean which when true flattens the assigned nodes,\n * meaning any assigned nodes that are slot elements are replaced with their\n * assigned nodes.\n * @param selector A string which filters the results to elements that match\n * the given css selector.\n *\n * * @example\n * ```ts\n * class MyElement {\n *   @queryAssignedNodes('list', true, '.item')\n *   listItems;\n *\n *   render() {\n *     return html`\n *       <slot name=\"list\"></slot>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function queryAssignedNodes(\n    slotName = '', flatten = false, selector = '') {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        const slotSelector =\n            `slot${slotName ? `[name=${slotName}]` : ':not([name])'}`;\n        const slot = this.renderRoot.querySelector(slotSelector);\n        let nodes = slot && (slot as HTMLSlotElement).assignedNodes({flatten});\n        if (nodes && selector) {\n          nodes = nodes.filter(\n              (node) => node.nodeType === Node.ELEMENT_NODE &&\n                      (node as Element).matches ?\n                  (node as Element).matches(selector) :\n                  legacyMatches.call(node as Element, selector));\n        }\n        return nodes;\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nexport const supportsAdoptingStyleSheets = (window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\nconst constructionToken = Symbol();\n\nexport class CSSResult {\n  _styleSheet?: CSSStyleSheet|null;\n\n  readonly cssText: string;\n\n  constructor(cssText: string, safeToken: symbol) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n          'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n    }\n\n    this.cssText = cssText;\n  }\n\n  // Note, this is a getter so that it's lazy. In practice, this means\n  // stylesheets are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet|null {\n    if (this._styleSheet === undefined) {\n      // Note, if `supportsAdoptingStyleSheets` is true then we assume\n      // CSSStyleSheet is constructable.\n      if (supportsAdoptingStyleSheets) {\n        this._styleSheet = new CSSStyleSheet();\n        this._styleSheet.replaceSync(this.cssText);\n      } else {\n        this._styleSheet = null;\n      }\n    }\n    return this._styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\n/**\n * Wrap a value for interpolation in a [[`css`]] tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) => {\n  return new CSSResult(String(value), constructionToken);\n};\n\nconst textFromCSSResult = (value: CSSResult|number) => {\n  if (value instanceof CSSResult) {\n    return value.cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n        `Value passed to 'css' function must be a 'css' function result: ${\n            value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n  }\n};\n\n/**\n * Template tag which which can be used with LitElement's [[LitElement.styles |\n * `styles`]] property to set element styles. For security reasons, only literal\n * string values may be used. To incorporate non-literal values [[`unsafeCSS`]]\n * may be used inside a template string part.\n */\nexport const css =\n    (strings: TemplateStringsArray, ...values: (CSSResult|number)[]) => {\n      const cssText = values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]);\n      return new CSSResult(cssText, constructionToken);\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * The main LitElement module, which defines the [[`LitElement`]] base class and\n * related APIs.\n *\n *  LitElement components can define a template and a set of observed\n * properties. Changing an observed property triggers a re-render of the\n * element.\n *\n *  Import [[`LitElement`]] and [[`html`]] from this module to create a\n * component:\n *\n *  ```js\n * import {LitElement, html} from 'lit-element';\n *\n * class MyElement extends LitElement {\n *\n *   // Declare observed properties\n *   static get properties() {\n *     return {\n *       adjective: {}\n *     }\n *   }\n *\n *   constructor() {\n *     this.adjective = 'awesome';\n *   }\n *\n *   // Define the element's template\n *   render() {\n *     return html`<p>your ${adjective} template here</p>`;\n *   }\n * }\n *\n * customElements.define('my-element', MyElement);\n * ```\n *\n * `LitElement` extends [[`UpdatingElement`]] and adds lit-html templating.\n * The `UpdatingElement` class is provided for users that want to build\n * their own custom element base classes that don't use lit-html.\n *\n * @packageDocumentation\n */\nimport {render, ShadyRenderOptions} from 'lit-html/lib/shady-render.js';\n\nimport {PropertyValues, UpdatingElement} from './lib/updating-element.js';\n\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport {html, svg, TemplateResult, SVGTemplateResult} from 'lit-html/lit-html.js';\nimport {supportsAdoptingStyleSheets, CSSResult, unsafeCSS} from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n\ndeclare global {\n  interface Window {\n    litElementVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n\nexport type CSSResultOrNative = CSSResult|CSSStyleSheet;\n\nexport interface CSSResultArray extends\n    Array<CSSResultOrNative|CSSResultArray> {}\n\n/**\n * Sentinal value used to avoid calling lit-html's render function when\n * subclasses do not implement `render`\n */\nconst renderNotImplemented = {};\n\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the [[`properties`]] property or the [[`property`]] decorator.\n */\nexport class LitElement extends UpdatingElement {\n  /**\n   * Ensure this class is marked as `finalized` as an optimization ensuring\n   * it will not needlessly try to `finalize`.\n   *\n   * Note this property name is a string to prevent breaking Closure JS Compiler\n   * optimizations. See updating-element.ts for more information.\n   */\n  protected static['finalized'] = true;\n\n  /**\n   * Reference to the underlying library method used to render the element's\n   * DOM. By default, points to the `render` method from lit-html's shady-render\n   * module.\n   *\n   * **Most users will never need to touch this property.**\n   *\n   * This  property should not be confused with the `render` instance method,\n   * which should be overridden to define a template for the element.\n   *\n   * Advanced users creating a new base class based on LitElement can override\n   * this property to point to a custom render method with a signature that\n   * matches [shady-render's `render`\n   * method](https://lit-html.polymer-project.org/api/modules/shady_render.html#render).\n   *\n   * @nocollapse\n   */\n  static render:\n      (result: unknown, container: Element|DocumentFragment,\n       options: ShadyRenderOptions) => void = render;\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the [[`css`]] tag function or via constructible stylesheets.\n   */\n  static styles?: CSSResultOrNative|CSSResultArray;\n\n  private static _styles: Array<CSSResultOrNative|CSSResult>|undefined;\n\n  /**\n   * Return the array of styles to apply to the element.\n   * Override this method to integrate into a style management system.\n   *\n   * @nocollapse\n   */\n  static getStyles(): CSSResultOrNative|CSSResultArray|undefined {\n    return this.styles;\n  }\n\n  /** @nocollapse */\n  private static _getUniqueStyles() {\n    // Only gather styles once per class\n    if (this.hasOwnProperty(JSCompiler_renameProperty('_styles', this))) {\n      return;\n    }\n    // Take care not to call `this.getStyles()` multiple times since this\n    // generates new CSSResults each time.\n    // TODO(sorvell): Since we do not cache CSSResults by input, any\n    // shared styles will generate new stylesheet objects, which is wasteful.\n    // This should be addressed when a browser ships constructable\n    // stylesheets.\n    const userStyles = this.getStyles();\n\n    if (Array.isArray(userStyles)) {\n      // De-duplicate styles preserving the _last_ instance in the set.\n      // This is a performance optimization to avoid duplicated styles that can\n      // occur especially when composing via subclassing.\n      // The last item is kept to try to preserve the cascade order with the\n      // assumption that it's most important that last added styles override\n      // previous styles.\n      const addStyles = (styles: CSSResultArray, set: Set<CSSResultOrNative>):\n          Set<CSSResultOrNative> => styles.reduceRight(\n              (set: Set<CSSResultOrNative>, s) =>\n                  // Note: On IE set.add() does not return the set\n              Array.isArray(s) ? addStyles(s, set) : (set.add(s), set),\n              set);\n      // Array.from does not work on Set in IE, otherwise return\n      // Array.from(addStyles(userStyles, new Set<CSSResult>())).reverse()\n      const set = addStyles(userStyles, new Set<CSSResultOrNative>());\n      const styles: CSSResultOrNative[] = [];\n      set.forEach((v) => styles.unshift(v));\n      this._styles = styles;\n    } else {\n      this._styles = userStyles === undefined ? [] : [userStyles];\n    }\n\n    // Ensure that there are no invalid CSSStyleSheet instances here. They are\n    // invalid in two conditions.\n    // (1) the sheet is non-constructible (`sheet` of a HTMLStyleElement), but\n    //     this is impossible to check except via .replaceSync or use\n    // (2) the ShadyCSS polyfill is enabled (:. supportsAdoptingStyleSheets is\n    //     false)\n    this._styles = this._styles.map((s) => {\n      if (s instanceof CSSStyleSheet && !supportsAdoptingStyleSheets) {\n        // Flatten the cssText from the passed constructible stylesheet (or\n        // undetectable non-constructible stylesheet). The user might have\n        // expected to update their stylesheets over time, but the alternative\n        // is a crash.\n        const cssText = Array.prototype.slice.call(s.cssRules)\n                            .reduce((css, rule) => css + rule.cssText, '');\n        return unsafeCSS(cssText);\n      }\n      return s;\n    });\n  }\n\n  private _needsShimAdoptedStyleSheets?: boolean;\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   */\n  readonly renderRoot!: Element|DocumentFragment;\n\n  /**\n   * Performs element initialization. By default this calls\n   * [[`createRenderRoot`]] to create the element [[`renderRoot`]] node and\n   * captures any pre-set values for registered properties.\n   */\n  protected initialize() {\n    super.initialize();\n    (this.constructor as typeof LitElement)._getUniqueStyles();\n    (this as {\n      renderRoot: Element|DocumentFragment;\n    }).renderRoot = this.createRenderRoot();\n    // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n    // element's getRootNode(). While this could be done, we're choosing not to\n    // support this now since it would require different logic around de-duping.\n    if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n      this.adoptStyles();\n    }\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   * @returns {Element|DocumentFragment} Returns a node into which to render.\n   */\n  protected createRenderRoot(): Element|ShadowRoot {\n    return this.attachShadow({mode: 'open'});\n  }\n\n  /**\n   * Applies styling to the element shadowRoot using the [[`styles`]]\n   * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n   * available and will fallback otherwise. When Shadow DOM is polyfilled,\n   * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n   * is available but `adoptedStyleSheets` is not, styles are appended to the\n   * end of the `shadowRoot` to [mimic spec\n   * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n   */\n  protected adoptStyles() {\n    const styles = (this.constructor as typeof LitElement)._styles!;\n    if (styles.length === 0) {\n      return;\n    }\n    // There are three separate cases here based on Shadow DOM support.\n    // (1) shadowRoot polyfilled: use ShadyCSS\n    // (2) shadowRoot.adoptedStyleSheets available: use it\n    // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n    // rendering\n    if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n      window.ShadyCSS.ScopingShim!.prepareAdoptedCssText(\n          styles.map((s) => s.cssText), this.localName);\n    } else if (supportsAdoptingStyleSheets) {\n      (this.renderRoot as ShadowRoot).adoptedStyleSheets =\n          styles.map((s) => s instanceof CSSStyleSheet ? s : s.styleSheet!);\n    } else {\n      // This must be done after rendering so the actual style insertion is done\n      // in `update`.\n      this._needsShimAdoptedStyleSheets = true;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // Note, first update/render handles styleElement so we only call this if\n    // connected after first update.\n    if (this.hasUpdated && window.ShadyCSS !== undefined) {\n      window.ShadyCSS.styleElement(this);\n    }\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(changedProperties: PropertyValues) {\n    // Setting properties in `render` should not trigger an update. Since\n    // updates are allowed after super.update, it's important to call `render`\n    // before that.\n    const templateResult = this.render();\n    super.update(changedProperties);\n    // If render is not implemented by the component, don't call lit-html render\n    if (templateResult !== renderNotImplemented) {\n      (this.constructor as typeof LitElement)\n          .render(\n              templateResult,\n              this.renderRoot,\n              {scopeName: this.localName, eventContext: this});\n    }\n    // When native Shadow DOM is used but adoptedStyles are not supported,\n    // insert styling after rendering to ensure adoptedStyles have highest\n    // priority.\n    if (this._needsShimAdoptedStyleSheets) {\n      this._needsShimAdoptedStyleSheets = false;\n      (this.constructor as typeof LitElement)._styles!.forEach((s) => {\n        const style = document.createElement('style');\n        style.textContent = s.cssText;\n        this.renderRoot.appendChild(style);\n      });\n    }\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method may return\n   * any value renderable by lit-html's `NodePart` - typically a\n   * `TemplateResult`. Setting properties inside this method will *not* trigger\n   * the element to update.\n   */\n  protected render(): unknown {\n    return renderNotImplemented;\n  }\n}\n","/*\n\thttps://icomoon.io/app\n*/\nimport { LitElement, html, css } from 'lit-element';\n\nconst SVG_ICONS = new Map()\n\nfunction registerIcon(name, icon, {prefix='icon-'}={}){\n\n\tlet d = document.createElement('div')\n\td.innerHTML = icon\n\ticon = d.firstElementChild\n\n\t// if no name, get it from the icon attribute\n\tif( !name ){\n\t\tname = icon.id || icon.name || ''\n\t\tname = name.replace(prefix, '')\n\t}\n\n\tif( !name )\n\t\treturn console.warn('Icons must have a name')\n\n\tif( SVG_ICONS.get(name) )\n\t\treturn console.warn('There is already an icon registered with that name' )\n\n\tSVG_ICONS.set(name, icon)\n}\n\nlet hasWarnedNoIcons = false\nfunction warnNoIcons(){\n\tif( hasWarnedNoIcons ) return\n\thasWarnedNoIcons = true\n\tconsole.warn('No icons have been registered. Do so with `IconElement.register()`  Or import `bui/elements/icons/_all`')\n}\n\nexport default class IconElement extends HTMLElement {\n\n\tstatic register(...icons){\n\t\ticons.forEach(icon=>{\n\t\t\tlet name = ''\n\n\t\t\tif( Array.isArray(icon) )\n\t\t\t\t[name, icon] = icon\n\t\t\t\t\n\t\t\tregisterIcon(name, icon)\n\t\t})\n\t}\n\n\t// not ideal...\n\tget styles(){return /*css*/`\n\t\t:host {\n\t\t\tdisplay: inline-flex;\n\t\t\tvertical-align: middle;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tcolor: inherit;\n\t\t\t--size: 1em;\n\t\t\theight: var(--size);\n\t\t}\n\n\t\t:host([hidden]) {\n\t\t\tdisplay: none !important;\n\t\t}\n\n\t\t:host([link]) {\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t:host([muted]) {\n\t\t\topacity: .5;\n\t\t}\n\n\t\t:host([square]) {\n\t\t\twidth: var(--size);\n\t\t}\n\n\t\t:host([invalid]) {\n\t\t\tbackground: #f44336;\n\t\t}\n\n\t\tsvg {\n\t\t\theight: 100%;\n\t\t\t/* width: 100%; */\n\t\t\tdisplay: inline-block;\n\t\t\tfill: currentColor;\n\t\t\tcolor: currentColor;\n\t\t}\n\n\t\t@keyframes rotate360 {\n\t\t\tto { transform: rotate(360deg); }\n\t\t}\n\n\t\t@keyframes rotate360CCW {\n\t\t\tto { transform: rotate(-360deg); }\n\t\t}\n\n\t\t:host([spin]) svg {\n\t\t\tanimation: 1600ms rotate360 infinite linear;\n\t\t}\n\n\t\t:host([name=\"arrows-ccw\"][spin]) svg {\n\t\t\tanimation: 1600ms rotate360CCW infinite linear;\n\t\t}\n\t`}\n\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\ttemp.innerHTML = `<style>\n\t\t${this.styles}\n\t\t</style>\n\t\t<slot></slot>\n\t\t`\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\t_setSVG(){\n\n\t\tif( SVG_ICONS.size == 0 )\n\t\t\twarnNoIcons()\n\n\t\tif( this._svg )\n\t\t\tthis._svg.remove()\n\n\t\tthis._svg = SVG_ICONS.get(this.name)\n\t\t\n\t\tif( this._svg ){\n\t\t\tthis.removeAttribute('invalid')\n\t\t\tthis.shadowRoot.appendChild(this._svg.cloneNode(true))\n\t\t}else{\n\t\t\tthis.setAttribute('invalid', '')\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['name']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'name' )\n\t\t\tthis._setSVG()\n\t}\n\t\n\tget name(){ return this.getAttribute('name')}\n\tset name(val){ return this.setAttribute('name', val)}\n\n\tset spin(val){\n\t\tthis.toggleAttribute('spin', Boolean(val))\n\t}\n\tget spin(){\n\t\treturn this.hasAttribute('spin')\n\t}\n\n}\n\t\ncustomElements.define('b-icon', IconElement)\n\nexport class IconList extends LitElement {\n\n\tstatic get properties(){return {\n\t\tcols: {type: Number, reflect: true}\n\t}}\n\n\tconstructor(){\n\t\tsuper()\n\t\tthis.cols = 6\n\t}\n\n\tstatic get styles(){return css`\n\t\t:host {\n\t\t\tdisplay: block;\n\t\t\tcolumn-count: 6;\n\t\t\tgap: 1em;\n\t\t\twidth: 100%;\n\t\t\tfont-size:1.2em;\n\t\t\tpadding: 1em;\n\t\t\toverflow: auto;\n\t\t}\n\n\t\t:host([cols=\"1\"]) { column-count: 1}\n\t\t:host([cols=\"2\"]) { column-count: 2}\n\t\t:host([cols=\"3\"]) { column-count: 3}\n\t\t:host([cols=\"4\"]) { column-count: 4}\n\t\t:host([cols=\"5\"]) { column-count: 5}\n\t\t:host([cols=\"6\"]) { column-count: 6}\n\n\t\t:host > div {\n\t\t\tmargin: .75em;\n\t\t}\n\n\t\t:host > div:first-child {\n\t\t\tmargin-top: 0;\n\t\t}\n\n\t\tb-icon {\n\t\t\twidth: 1.6em;\n\t\t}\n\n\t\tsmall {\n\t\t\tcolor: var(--theme-text-accent);\n\t\t}\n\n\t\t@media (max-width: 550px) {\n            :host {\n                column-count: 1 !important;\n            }\n        }\n\t`}\n\n\trender(){return html`\n\t\t${Array.from(SVG_ICONS.keys()).map(name=>html`\n\t\t\t<div>\n\t\t\t\t<b-icon name=${name}></b-icon> <small>${name}</small>\n\t\t\t</div>\n\t\t`)}\n\t`}\n}\ncustomElements.define('b-icon-list', IconList)","/*\n\tSVG and idea taken from https://ant.design/components/button/\n\t\n\tExamples: \n\t<circle-spinner/>\n\t<circle-spinner style=\"--size:.8em; color: white\"/>\n*/\n\nclass SpinnerElement extends HTMLElement {\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        \n        temp.innerHTML = `<style>\n\t\t\t:host {\n\t\t\t\t--size: .8em;\n\t\t\t\theight: var(--size);\n\t\t\t    width: var(--size);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\t\t\t}\n\t\t\t\n\t\t\t:host(.overlay) {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tz-index: 10000;\n\t\t\t}\n\t\t\t\n\t\t\t@keyframes spin {\n\t\t\t\t100% {\n\t\t\t\t    transform: rotate(360deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsvg {\n\t\t\t\tanimation: spin 1s infinite linear;\n\t\t\t\ttransform-origin: center center;\n\t\t\t}\n\t\t\t</style>\n\t\t\t<svg viewBox=\"0 0 1024 1024\" class=\"spin\" data-icon=\"loading\" width=\"100%\" height=\"100%\" fill=\"currentColor\" aria-hidden=\"true\">\n\t\t\t\t<path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path>\n\t\t\t</svg>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n    }\n}\n\ncustomElements.define('b-spinner', SpinnerElement)\n","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\nimport './icon'\n\nexport default class BtnElement extends LitElement {\n\n    static get properties() { return {\n        href: {type: String, reflect: true},\n        value: {type: String, reflect: true},\n        icon: { type: String },\n        spin: {type: Boolean, reflect: true, attribute: 'spin'}\n    }}\n\n    static get styles(){ return css`\n    \n        :host{\n            --red: var(--red-700);\n            /* --black: #333;\n            --orange: #F57C00;\n            --blue: #2196F3;\n            --red: #d32f2f;\n            --gray: #444444;\n            --green: #27ae60;\n            --yellow: #f2d57e;\n            --teal: #009688;\n            --purple: #7E57C2;\n            --brown: #795548;\n            --pink: #E91E63; */\n\n            --radius: 3px;\n            --color: var(--b-btn-bgd, var(--black)) ;\n            --bgdColor: var(--color);\n            --hoverBgdColor: rgba(255,255,255,.1);\n            --textColor: var(--b-btn-color, #fff);\n            --borderColor: var(--color);\n            --borderStyle: solid;\n            --borderWidth: 1px;\n            --padding: .4em .6em;\n\n            display: inline-grid;\n            position: relative;\n            box-sizing: border-box;\n            background: var(--bgdColor);\n            color: var(--textColor);\n            border-radius: var(--radius);\n            cursor: pointer;\n            transition: \n                color 160ms,\n                background-color 160ms,\n                border 160ms;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            text-rendering: optimizeLegibility;\n            font-size: .9rem;\n            line-height: 1rem;\n            font-weight: bold;\n            font-family: var(--b-btn-font);\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        /* hide by default */\n        @media print {\n            :host {\n                display: none;\n            }\n        }\n\n        :host([hidden]) {\n            display: none !important;\n        }\n\n        main {\n            border-radius: var(--radius);\n            position: relative;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            padding: var(--padding);\n            box-sizing: border-box;\n            /*padding-bottom: .3em;*/ /* remove descender line to make it look more centered*/\n            text-overflow: ellipsis;\n            border: var(--borderStyle) var(--borderWidth) var(--borderColor);\n            /* transition: 120ms; */\n        }\n\n        main > span {\n            display: inline-flex;\n            justify-content: center;\n        }\n\n        slot {\n            display: block;\n            margin-bottom: -.1em; /* remove descender line to make it look more centered*/\n        }\n\n        slot::slotted(*) {\n            display: inline-block;\n            margin-top: 0;\n            margin-bottom: 0;\n        }\n\n        .hover {\n            position: absolute;\n            display: block;\n            width: 100%;\n            height: 100%;\n            left: 0;\n            top: 0;\n            background: var(--hoverBgdColor);\n            visibility: hidden;\n            opacity: 0;\n            /* mix-blend-mode: saturation; */\n            border-radius: var(--radius);\n            /* transition: 120ms; */\n        }\n\n        @media (hover) {\n            :host(:hover) .hover {\n                opacity: 1;\n                visibility: visible;\n            }\n        }\n\n        /* b-icon,\n        ::slotted(b-icon) {\n            vertical-align: bottom;\n        } */\n\n        b-spinner {\n            opacity: 0;\n            visibility: hidden;\n            --size: 1em;\n            margin-left: -1.35em;\n            margin-right: .35em;\n            transition: 120ms;\n        }\n\n        :host([spin]) b-spinner {\n            opacity: 1;\n            visibility: visible;\n            margin-left: 0;\n        }\n\n        :host([spin]) b-icon {\n            display: none;\n        }\n\n        main b-icon {\n            margin-right: .35em;\n            margin-left: -.15em;\n        }\n\n        :host([stacked]) {\n            --padding: .3em .5em .1em .5em;\n        }\n\n        :host([stacked]) main {\n            display: inline-grid;\n            align-content: center;\n        }\n\n        :host([stacked]) b-icon {\n            font-size: 1.2em;\n            margin: 0;\n        }\n\n        :host([stacked]) slot {\n            font-size: .6em;\n        }\n\n        :host([stacked]) slot::slotted(*) {\n            opacity: var(--b-btn-stacked-label-opacity, .5);\n        }\n\n        :host([stacked]) slot[name=\"icon\"] {\n            font-size: 1em;\n            display: contents;\n        }\n\n        :host([stacked]) slot[name=\"icon\"]::slotted(*),\n        :host([stacked]) slot[name=\"icon\"] b-icon{\n            opacity: var(--b-btn-stacked-icon-opacity, 1);\n        }\n\n        :host([stacked]) b-spinner {\n            font-size: 1.2em;\n            margin-right: 0;\n            margin-left: -1em;\n        }\n        :host([stacked][spin]) b-spinner {\n            margin-left: 0;\n        }\n\n        :host([block]) {\n            display: block;\n            text-align: center\n        }\n\n        :host([block]) main {\n            display: flex;\n            justify-content: center\n        }\n\n        :host(:empty) {\n            --padding: .4em .5em;\n        }\n\n        :host(:empty) main b-icon {\n            margin-left: 0;\n            margin-right: 0;\n        }\n\n        /* offset play icon to make it appear more centered */\n        :host(:empty) main b-icon[name=\"play\"] {\n\t\t\tmargin: 0 -.1em 0 .1em;\n        }\n\n        :host([color^=\"primary\"])  { --color: var(--color-primary); }\n        :host([color^=\"theme\"])  { --color: var(--theme); }\n        :host([color^=\"black\"])  { --color: var(--black); }\n        :host([color^=\"white\"])  { --color: var(--white); --textColor: var(--black); }\n        :host([color^=\"orange\"]) { --color: var(--orange); }\n        :host([color^=\"blue\"])   { --color: var(--blue); }\n        :host([color^=\"red\"])    { --color: var(--red); }\n        :host([color^=\"gray\"])   { --color: var(--gray); }\n        :host([color^=\"green\"])  { --color: var(--green); }\n        :host([color^=\"yellow\"]) { --color: var(--yellow); }\n        :host([color^=\"teal\"])   { --color: var(--teal); }\n        :host([color^=\"purple\"]) { --color: var(--purple); }\n        :host([color^=\"brown\"])  { --color: var(--brown); }\n        :host([color^=\"pink\"])   { --color: var(--pink); }\n\n        @media (hover){\n        :host([color*=\"hover-black\"]:hover)  { --color: var(--black); }\n        :host([color*=\"hover-orange\"]:hover) { --color: var(--orange); }\n        :host([color*=\"hover-blue\"]:hover)   { --color: var(--blue); }\n        :host([color*=\"hover-red\"]:hover)    { --color: var(--red); }\n        :host([color*=\"hover-gray\"]:hover)   { --color: var(--gray); }\n        :host([color*=\"hover-green\"]:hover)  { --color: var(--green); }\n        :host([color*=\"hover-yellow\"]:hover) { --color: var(--yellow); }\n        :host([color*=\"hover-teal\"]:hover)   { --color: var(--teal); }\n        :host([color*=\"hover-purple\"]:hover) { --color: var(--purple); }\n        :host([color*=\"hover-brown\"]:hover)  { --color: var(--brown); }\n        :host([color*=\"hover-pink\"]:hover)   { --color: var(--pink); }\n        }\n\n        :host([pill]) {\n            --radius: 1em;\n        }\n\n        /* @media (hover) { */\n        :host([outline]:not(:hover)) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n        }\n        /* } */\n\n        /* :host([outline]:hover){\n            --bgdColor: var(--color);\n            --textColor: inherit;\n        } */\n\n        :host([text]),\n        :host([clear]) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n            --borderColor: transparent;\n        }\n\n        /* :host([text]) .hover,\n        :host([clear]) .hover {\n            display: none;\n        } */\n\n        :host([text]) {\n            font-size: 1em;\n            font-weight: normal;\n        }\n\n        @media (hover){\n        :host([text]:hover),\n        :host([clear]:hover) {\n            --bgdColor: rgba(0,0,0,.05);\n        }}\n\n        :host([text].popover-open),\n        :host([clear].popover-open) {\n            --bgdColor: rgba(0,0,0,.05);\n        }\n\n        :host([xs]) { font-size: .6rem; }\n        :host([sm]) { font-size: .8rem; }\n        :host([lg]) { font-size: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; }\n\n        /* floating action btn */\n        :host([fab]) {\n            position: absolute;\n            z-index: 100;\n            box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),\n                        0px 6px 10px 0px rgba(0,0,0,0.14),\n                        0px 1px 18px 0px rgba(0,0,0,0.12);\n            bottom: 1rem;\n            right: 1rem;\n            font-size: 1.4em;\n            width: 2em;\n            height: 2em;\n            --radius: 2em;\n            overflow: hidden;\n        }\n\n        :host([fab]) b-spinner {\n            margin-right: 0;\n            margin-left: -1em;\n        }\n\n        :host([fab][spin]) b-spinner {\n            margin-left: 0;\n        }\n\n        @keyframes shake {\n            from,\n            to {\n                transform: translate3d(0, 0, 0);\n            }\n\n            15%,\n            45%,\n            75% {\n                transform: translate3d(-.25em, 0, 0);\n            }\n\n            30%,\n            60%,\n            90% {\n                transform: translate3d(.25em, 0, 0);\n            }\n        }\n\n        :host(.shake) {\n            animation-name: shake;\n            animation-duration: 700ms;\n            animation-fill-mode: both;\n        }\n    `}\n\n    render(){ return html`\n        <div class=\"hover\"></div>\n        <main>\n            <span>\n                <b-spinner></b-spinner>\n                <slot name=\"icon\">\n                    ${this.icon?html`<b-icon name=\"${this.icon}\"></b-icon>`:''}\n                </slot>\n            </span>\n            <slot></slot>\n        </main>\n    `}\n\n\tconstructor(){\n\t\tsuper()\n        this.icon = ''\n        this.spin = false\n\t}\n\n    firstUpdated(){\n        this.addEventListener('click', ()=>{\n            if( this.href )\n                if( this.getAttribute('target') == '_blank' )\n                    window.open(this.href)\n                else\n                    window.location = this.href\n        }, true)\n    }\n\n    shake(){\n        this.classList.add('shake')\n        setTimeout(()=>{\n            this.classList.remove('shake')\n        },1000)\n    }\n\n}\n\ncustomElements.define('b-btn', BtnElement)\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-btn-group', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-flex;\n        }\n\n        ::slotted(b-btn:first-of-type:not(:last-of-type)){\n            border-radius: var(--radius) 0 0 var(--radius);\n        }\n\n        ::slotted(b-btn:not(:first-of-type):not(:last-of-type)){\n            border-radius: 0;\n            border-left: solid 1px rgba(0,0,0,.2);\n        }\n\n        ::slotted(b-btn:last-of-type:not(:first-of-type)){\n            border-radius: 0 var(--radius) var(--radius) 0;\n            border-left: solid 1px rgba(0,0,0,.2);\n        }\n\n        ::slotted(b-btn:not(:first-of-type)[clear]) {\n            border-left: solid 1px rgba(0,0,0,.1);\n        }\n\n\n        :host([vert]) {\n            flex-direction: column;\n        }\n\n        :host([vert]) ::slotted(b-btn:first-of-type:not(:last-of-type)){\n            border-radius: var(--radius) var(--radius) 0 0;\n        }\n\n        :host([vert]) ::slotted(b-btn:not(:first-of-type):not(:last-of-type)){\n            border-radius: 0;\n            border-top: solid 1px rgba(0,0,0,.2);\n            border-left: none;\n        }\n\n        :host([vert]) ::slotted(b-btn:last-of-type:not(:first-of-type)){\n            border-radius: 0 0 var(--radius) var(--radius);\n            border-top: solid 1px rgba(0,0,0,.2);\n            border-left: none;\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-btn-group')","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\n\nexport class SpinnerOverlayElement extends LitElement {\n\n    static get properties() { return {\n        show: {type: Boolean, reflect: true},\n\t\tlabel: {type:String, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.show = false\n\t\tthis.label = ''\n\t}\n\n\tconnectedCallback(){\n\t\tsuper.connectedCallback()\n\n\t\tif( this.parentNode && this.parentNode.host && !this.parentNode.host.spinner ){\n\t\t\tthis.host = this.parentNode.host\n\t\t\tthis.host.spinner = this\n\t\t}else if( this.parentElement && !this.parentElement.spinner ){\n\t\t\tthis.host = this.parentElement\n\t\t\tthis.host.spinner = this\n\t\t}\n\t}\n\n\tdisconnectedCallback(){\n\t\tsuper.disconnectedCallback()\n\t\t\n\t\tif( this.host )\n\t\t\tdelete this.host.spinner\n\t}\n\n    static get styles(){ return css`\n\t\t:host {\n\t\t\t--spinnerBgd: var(--b-spinner-overlay-bgd, rgba(255,255,255 ,.6));\n            --spinnerColor: inherit;\n            --spinnerSize: 1.6em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n            z-index: 1200;\n            background: var(--spinnerBgd);\n            color: var(--spinnerColor);\n\t\t\tborder-radius: var(--radius);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            opacity: 1;\n            transition: 140ms opacity;\n        }\n\n\t\t:host([dark]) {\n\t\t\t--spinnerBgd: rgba(0,0,0,.6);\n\t\t\t--spinnerColor: #fff;\n\t\t}\n\n\t\tmain {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t}\n\n\t\tlabel:not(:empty) {\n\t\t\tmargin-left: 1em;\n\t\t}\n\n\t\t:host([lg]) {\n\t\t\t--spinnerSize: 6em;\n\t\t}\n\n\t\t:host([lg]) main {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t:host([lg]) label:not(:empty) {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 2em;\n\t\t\tfont-weight: bold;\n\t\t\tmargin: 1em 0 0 0;\n\t\t\tbackground: rgba(0,0,0,.7);\n\t\t\tcolor: #fff;\n\t\t\tpadding: .25em .5em;\n\t\t\tborder-radius: 2em;\n\t\t}\n\n\t\t:host(:not([show])) {\n            visibility: hidden;\n            opacity: 0;\n        }\n\n\t\tb-spinner {\n\t\t\tfont-size: var(--spinnerSize);\n\t\t}\n    `}\n\n    render(){ return html`\n\t\t<main>\n\t\t\t<b-spinner></b-spinner>\n\t\t\t<label>${this.label}</label>\n\t\t</main>\n    `}\n\n}\n\ncustomElements.define('b-spinner-overlay', SpinnerOverlayElement)\n","export default class AJAX {\n\n    constructor(method, url){\n        \n        this.method = method\n        this.url = url\n\n        this.xhr = new XMLHttpRequest()\n        \n        this.on('load', this._onDone, false);\n        this.on('abort', this._onAbort, false);\n        this.on('error', this._onError, false);\n    }\n\n    on(eventName, cb){\n        cb = cb.bind(this)\n        this.xhr.addEventListener(eventName, cb, false)\n\n        // upload progress must be set on .upload\n        if( eventName == 'progress' )\n            this.xhr.upload.addEventListener(eventName, cb, false)\n\n        return this\n    }\n\n    send(){\n        this.xhr.open(this.method, this.url);\n        this.xhr.setRequestHeader('x-requested-with', 'xmlhttprequest')\n        this.xhr.send(...arguments)\n\n        return new Promise((resolve, reject)=>{\n            this.resolve = resolve\n            this.reject = reject\n        })\n    }\n\n    _onDone(e){\n        let resp = this.xhr.responseText\n\n        if( this.xhr.status != 200 ){\n            let err = new Error(this.xhr.statusText||'Unknown error')\n            err.errorCode = this.xhr.status\n            return this.reject&&this.reject(err)\n        }\n\n        // parse JSON if it looks like it\n        if( resp && (resp[0] == '{' || resp[0] == '[') ){\n            try{\n                resp = JSON.parse(resp)\n            }catch(err){\n                return this.reject&&this.reject(err)\n            }\n        }\n\n        this.resolve&&this.resolve(resp)\n    }\n\n    _onAbort(e){\n        // should error be thrown instead?\n        this.resolve&&this.resolve()\n    }\n\n    _onError(e){\n        this.reject&&this.reject()\n    }\n}","Object.defineProperty(File.prototype, 'ext', {\n    get: function(){\n        return this.name.split('.').pop()\n    }\n})\n\nObject.defineProperty(File.prototype, 'nameWithoutExt', {\n    get: function(){\n        return this.name.split('.').shift()\n    }\n})","import { LitElement, html, css } from 'lit-element';\nimport AJAX from '../util/ajax.js';\nimport '../util/file.ext.js'\n\nexport class UploaderElement extends LitElement {\n\n    static get properties() { return {\n        url: {type: String},\n        disabled: {type: Boolean},\n        accept: {type: String},\n        multiple: {type: Boolean},\n        placeholder: {type: String},\n        files: {type: Array},\n        dragging: {type: Boolean, reflect: true },\n        uploading: {type: Boolean, reflect: true }\n    }}\n\n    static get styles(){ return css`\n        :host {\n            --hoverBgd: rgba(255,236,179 ,.7);\n            --uploadingBgd: rgba(238,238,238 ,.8);\n            --progressBgd: var(--hoverBgd);\n            --hoverColor: currentColor;\n            --uploadingColor: currentColor;\n            background: var(--hoverBgd);\n            width: 100%;\n            height: 100%;\n            display: block;\n            position: absolute;\n            z-index: 10000;\n            left: 0;\n            top: 0;\n            visibility: hidden;\n            /* pointer-events: none; */\n        }\n\n        :host([dragging]),\n        :host([uploading]) {\n            visibility: visible;\n        }\n\n        .placeholder {\n            color: var(--hoverColor)\n        }\n\n        .progress {\n            color: var(--uploadingColor)\n        }\n\n        .placeholder,\n        .progress {\n            position: absolute;\n            height: 100%;\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n        \n        :host([uploading]) {\n            background: var(--uploadingBgd);\n        }\n\n        :host(:not([dragging])) .placeholder,\n        :host(:not([uploading])) .progress {\n            display: none;\n        }\n\n        .progress > div {\n            position: relative\n        }\n\n        .progress .bar {\n            position: absolute;\n            height: 100%;\n            left: 0;\n            background: var(--progressBgd);\n        }\n\n        .choose {\n            display: none;\n        }\n    `}\n\n\tconstructor(){\n\t\tsuper()\n\n        this.url = '';\n        this.disabled = false\n        this.accept = '';\n        this.multiple = false\n        this.placeholder = 'Drop to upload';\n        this.files = []\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.dragging = false;\n        this.uploading = false;\n\n        ['dragenter', 'dragleave', 'dragover', 'drop'].forEach(fn=>{\n            this[fn] = this['_'+fn].bind(this)\n        })\n\t}\n\n    get progress(){\n        let progress = this.files.length > 0 ? this._numUploaded * 100 : 0\n        progress += this._fileProgress\n        return progress > 0 ? (progress / (this.files.length * 100) * 100) : 0\n    }\n\n    get autoUpload(){ return this.hasAttribute('auto-upload') }\n\n    render(){ return html`\n        <input class=\"choose\" type=\"file\" @click=${e=>e.stopPropagation()} @change=${this._inputChange} accept=${this.accept} ?multiple=${this.multiple}>\n        <div class=\"placeholder\">${this.placeholder}</div>\n        <div class=\"progress\">\n            <div class=\"bar\" style=\"width:${this.progress}%\"></div>\n            <div>\n                <b-spinner></b-spinner>\n                Uploading ${this._numUploading} of ${this.files.length}\n            </div>\n        </div>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback();\n        if( this.parent ) return\n        this.parent = this.parentElement || this.getRootNode().host\n        this.parent.addEventListener('dragenter', this.dragenter, true)\n        this.addEventListener('dragleave', this.dragleave, true)\n        this.addEventListener('dragover', this.dragover, true)\n        this.addEventListener('drop', this.drop, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.parent.removeEventListener('dragenter', this.dragenter)\n        this.removeEventListener('dragleave', this.dragleave)\n        this.removeEventListener('dragover', this.dragover)\n        this.removeEventListener('drop', this.drop)\n        this.parent = null;\n    }\n\n    _acceptFile(file){\n        let doAccept = true\n        let accept = this.accept\n        if( !accept ) return true\n        return accept.split(',').find(patt=>{\n            patt = patt.trim()\n            if( patt[0] == '.' )\n                return new RegExp(patt+'$').test(file.name)\n            else\n                return new RegExp(patt).test(file.type)\n        })\n    }\n\n    chooseFile(){\n        if( this.disabled ) return\n        this.shadowRoot.querySelector('.choose').click()\n    }\n\n    // alias\n    selectFile(){\n        this.chooseFile()\n    }\n\n    _drop(e){\n        e.preventDefault()\n        this.dragging = false\n        // let files = new Files(e.dataTransfer)\n        this._selectFiles(e.dataTransfer.files)\n    }\n\n    _inputChange(e){\n        this._selectFiles(e.target.files)\n    }\n\n    _selectFiles(files){\n\n        if( this.uploading ) return\n\n        files = Array.from(files)\n        \n        if( !this.multiple )\n            files = files.slice(0,1)\n\n        let valid = []\n        let invalid = []\n\n        files.forEach(file=>{\n            if( this._acceptFile(file) )\n                valid.push(file)\n            else\n                invalid.push(file)\n        })\n\n        this.files = valid\n\n        this.dispatchEvent(new CustomEvent('change', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                invalid: invalid.length > 0 ? invalid : false\n            }\n        }))\n\n        if( this.autoUpload && this.url ){\n            this.upload()\n        }\n\n    }\n\n    _dragover(e){\n        e.preventDefault() // needed to allow `drop` event to trigger\n    }\n\n    _dragenter(e){\n        if( this.disabled \n        || this.hidden\n        || !e.dataTransfer.types.includes('Files')\n        || window.getComputedStyle(this).display == 'none'\n        ) return\n        \n        this.dragging = true\n    }\n\n    _dragleave(e){\n        this.dragging = false\n    }\n\n    async upload({ url='', method='POST', fileKey='file', formData={} }={}){\n\n        if( this.uploading )\n            throw new Error(\"Already uploading\")\n\n        url = url || this.url\n        \n        if( !url )\n            throw new Error(\"Missing URL\")\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.uploading = true\n\n        let resp = []\n\n        for( let i in this.files ){\n\n            let file = this.files[i]\n            let _formData = new FormData();\n\n            _formData.append(fileKey, file)\n            _formData.append('totalFiles', this.files.length)\n            _formData.append('fileNum', parseInt(i)+1)\n\n            for( let key in formData ){\n                if( typeof formData[key] === 'function' )\n                    _formData.append(key, formData[key](file))\n                else\n                    _formData.append(key, formData[key])\n            }\n\n            this._numUploading++\n            this.requestUpdate()\n\n            try{\n\n                let req = new AJAX(method, url)\n                \n                req.on('progress', e=>{\n                    this._fileProgress = Math.round(e.loaded / e.total * 100)\n                    this.requestUpdate()\n                })\n\n                let uploadResp = await req.send(_formData)\n\n                this._numUploaded++\n                this.requestUpdate()\n\n                resp.push(uploadResp)\n\n            }catch(e){\n                console.log(e);\n                resp.push({error: e, file: file})\n            }\n        }\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.files = []\n        this.uploading = false\n\n        this.dispatchEvent(new CustomEvent('upload-done', {\n            bubbles: true,\n            composed: true,\n            detail: resp\n        }))\n\n        return this.multiple ? resp : resp[0]\n    }\n\n}\n    \ncustomElements.define('b-uploader', UploaderElement)\n\n// WIP for uploading directories\nclass Files {\n\n    constructor(dataTransfer){\n        this.getFiles(dataTransfer)\n    }\n\n    async getFiles(dataTransfer){\n        if( dataTransfer.items[0].webkitGetAsEntry ){\n\n            Array.from(dataTransfer.items).forEach(async item=>{\n\n                item = item.webkitGetAsEntry()\n\n                if( item.isFile ){\n                    console.log('file', item);\n                }else{\n                    console.log('dir', item);\n\n                    let items = await Files.getDirItems(item)\n                    console.log(items);\n                }\n            })\n\n\n        }\n    }\n\n    static async getDirItems(item){\n\n        let entries = await dirEntries(item)\n        \n        let items = await Promise.all(entries.map(async entry=>{\n            if( entry.isFile )\n                return await entryFile(entry)\n            else\n                return await Files.getDirItems(entry)\n        }))\n\n        return {\n            name: item.name,\n            items: items\n        }\n    }\n}\n\n\nconst entryFile = entry=>{\n    return new Promise(resolve=>{\n        entry.file(file=>{\n            resolve(file)\n        })\n    })\n}\n\nconst dirEntries = dir=>{\n    return new Promise(resolve=>{\n        dir.createReader().readEntries(entries=>{\n            resolve(entries)\n        });\n    })\n}","import { LitElement, html, css } from 'lit-element';\n\nexport class PaperElement extends LitElement {\n\n    static get properties() { return {\n        color: {type: String, reflect: true},\n        empty: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.color = ''\n        this.empty = false\n\t}\n\n    static get styles(){ return css`\n        :host {\n            box-sizing: border-box;\n            display: block;\n            background: var(--bgd);\n            box-shadow: var(--b-paper-shadow, rgba(0,0,0,.1) 0 1px 5px);\n            border: solid 1px transparent;\n            --radius: var(--b-paper-radius, 3px);\n            border-radius: var(--radius);\n            --padding: 1em;\n            padding: var(--padding);\n            position: relative;\n            --bgd: var(--b-paper-bgd, #fff);\n            --bgdAccent: var(--bgd);\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([overshadow]) {\n            box-shadow: var(--b-paper-overshadow, rgba(0, 0, 0, 0.1) 0px 0px 20px);\n        }\n\n        :host([inline]) {\n            display: inline-block;\n        }\n\n        :host([empty]) {\n            background: none;\n            box-shadow: none;\n            border: 1px dashed rgba(0,0,0,.3);\n        }\n\n        :host([centered]) {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        :host([border]) {\n            border-left: solid 5px var(--bgdAccent);\n        }\n\n        :host([outline]) {\n            box-shadow: none;\n            border-color: rgba(0, 0, 0, 0.1);\n        }\n\n        :host([noshadow]) {\n            box-shadow: none;\n        }\n\n        :host([dense]) {\n            --padding: .5em;\n        }\n\n        :host([compact]) {\n            --padding: 0;\n        }\n\n        ::slotted(header:first-child) {\n            border-radius: 3px 3px 0 0;\n            margin: calc(var(--padding) * -1);\n            margin-bottom: var(--padding);\n            padding: var(--padding);\n            display: flex; \n            align-items: center;\n            justify-content: space-between;\n        }\n\n        ::slotted(b-icon:first-of-type) {\n            /* color: var(--bgdAccent); */\n            color: #000;\n            opacity: .5;\n            margin-right: .15em;\n        }\n\n        :host([color=\"gray\"]) {\n            --bgd: #EEEEEE;\n            --bgdAccent: #BDBDBD;\n            color: #212121;\n        }\n\n        :host([color=\"blue\"]) {\n            --bgd: #2196F3;\n            --bgdAccent: #1565C0;\n            color: #fff;\n        }\n\n        :host([color=\"green\"]) {\n            --bgd: #27ae60;\n            --bgdAccent: #00695C;\n            color: #fff;\n        }\n\n        :host([color=\"red\"]) {\n            --bgd: #f44336;\n            --bgdAccent: #c62828;\n            color: #fff;\n        }\n\n        :host([color=\"orange\"]) {\n            --bgd: #FF9800;\n            --bgdAccent: #EF6C00;\n            color: #fff;\n        }\n\n        :host([color=\"yellow\"]) {\n            --bgd: #FFC107;\n            --bgdAccent: #F9A825;\n            color: #fff;\n        }\n\n        :host([color=\"purple\"]) {\n            --bgd: #673AB7;\n            --bgdAccent: #4527A0;\n            color: #fff;\n        }\n\n        :host([color=\"postit\"]) {\n            color: var(--b-paper-postit-color, inherit);\n            --bgd: var(--b-paper-postit-bgd, #FFF8E1);\n            --bgdAccent: var(--b-paper-postit-bgd-accent, var(--orange));\n        }\n\n        :host([color=\"info\"]) {\n            color: var(--b-paper-info-color, inherit);\n            --bgd: var(--b-paper-info-bgd, var(--blue-50));\n            --bgdAccent: var(--b-paper-info-bgd-accent, var(--blue));\n        }\n    `}\n\n    render(){ return html`\n        <slot></slot>\n    `}\n\n}\n    \ncustomElements.define('b-paper', PaperElement)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-text', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n        }\n\n        :host([block]) {\n            display: block;\n        }\n\n        :host([inline]) {\n            display: inline;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([clip]) {\n            max-width: 100%;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            vertical-align: text-bottom;\n        }\n\n        :host([monospace]) {\n            font-family: var(--b-text-monospace, 'Source Code Pro', 'Courier New', Courier, monospace)\n        }\n\n        :host([bold]) { font-weight: bold; }\n        :host([italic]) { font-style: italic; }\n\n        :host([capitalize]) { text-transform: capitalize; }\n        :host([ucase]) { text-transform: uppercase; }\n        :host([lcase]) { text-transform: lowercase }\n\n        :host([breakall]) { word-break: break-all; }\n\n        :host([align=\"left\"]) { text-align: left; }\n        :host([align=\"right\"]) { text-align: right; }\n        :host([align=\"center\"]) { text-align: center; }\n        :host([align=\"justify\"]) { text-align: justify; }\n\n        :host([xs]) { font-size: .65em; line-height: 1.1em; }\n        :host([sm]) { font-size: .8em; line-height: 1.1em; }\n        :host([md]) { font-size: 1.2em; line-height: 1.1em; }\n        :host([lg]) { font-size: 1.4em; line-height: 1.1em; }\n        :host([xl]) { font-size: 1.7em; line-height: 1.1em; }\n        :host([xxl]) { font-size: 2em; line-height: 1.1em; }\n\n        :host([tone=\"muted\"]), :host([muted]) { color: rgba(var(--theme-text-rgb, 0,0,0),.4); }\n        :host([tone=\"theme\"]) { color: var(--theme); }\n        :host([tone=\"critical\"]) { color: var(--b-text-tone-critical, var(--red-A400, red)); }\n        :host([tone=\"warning\"]) { color: var(--b-text-tone-warning, var(--orange, orange)); }\n        :host([tone=\"info\"]) { color: var(--b-text-tone-info, var(--blue, blue)); }\n        :host([tone=\"good\"]) { color: var(--b-text-tone-good, var(--green, blue)); }\n\n        :host([link]),\n        :host([href]) {\n            cursor: default;\n        }\n\n        :host([nopointer]) {\n            pointer-events: none;\n        }\n\n        :host([link].popover-open),\n        :host([href]){\n            color: var(--b-text-link-color, var(--theme, var(--blue, blue)));\n        }\n\n        @media (hover){\n            :host([link]:hover){\n                color: var(--b-text-link-color, var(--theme, var(--blue, blue)));\n            }\n\n            :host([href]:hover) {\n                text-decoration: underline;\n            }\n        }\n\n        :host([sup]) {\n            vertical-align: super;\n            margin-top: -1em;\n        }\n\n        :host([sub]) {\n            vertical-align: sub;\n            margin-bottom: -1em;\n        }\n\n        ::slotted(b-icon) {\n            vertical-align: bottom;\n        }\n    `}\n\n    firstUpdated(){\n\n        this.addEventListener('click', this.onClick)\n\n        if( this.hasAttribute('clip') && !this.hasAttribute('title') )\n            this.title = this.innerText\n    }\n\n    onClick(){\n        let href = this.getAttribute('href')\n        if( href ){\n            if( href.match(/@/) ) href = 'mailto:'+href\n            window.open(href)\n        }\n    }\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-text')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-grid', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: max-content;\n            align-content: flex-start;\n            gap: 1em;\n            min-width: 0;\n        }\n\n        ::slotted(*) {\n            min-width: 0;\n            min-height: 0;\n        }\n\n        /* standard/simple colums */\n        :host([cols=\"1\"]) { grid-template-columns: 1fr; }\n        :host([cols=\"2\"]) { grid-template-columns: repeat(2, 1fr); }\n        :host([cols=\"3\"]) { grid-template-columns: repeat(3, 1fr); }\n        :host([cols=\"4\"]) { grid-template-columns: repeat(4, 1fr); }\n        :host([cols=\"5\"]) { grid-template-columns: repeat(5, 1fr); }\n        :host([cols=\"6\"]) { grid-template-columns: repeat(6, 1fr); }\n        :host([cols=\"7\"]) { grid-template-columns: repeat(7, 1fr); }\n        :host([cols=\"8\"]) { grid-template-columns: repeat(8, 1fr); }\n\n        /* two-thirds, one-third */\n        :host([cols=\"2,1\"]) { grid-template-columns: 2fr 1fr; }\n        :host([cols=\"1,2\"]) { grid-template-columns: 1fr 2fr; }\n\n        /* half, quarter, quarter */\n        :host([cols=\"2,1,1\"]) { grid-template-columns: 2fr 1fr 1fr; }\n        :host([cols=\"1,1,2\"]) { grid-template-columns: 1fr 1fr 2fr; }\n\n        :host([cols=\"auto,1\"]) { grid-template-columns: auto 1fr; }\n        :host([cols=\"1,auto\"]) { grid-template-columns: auto 1fr; }\n\n        :host([rows=\"auto,1\"]) { grid-template-rows: auto 1fr; }\n        :host([rows=\"1,auto\"]) { grid-template-rows: auto 1fr; }\n\n        @media (max-width:699px){\n            :host([cols-mobile=\"1\"]) { grid-template-columns: 1fr; }\n            :host([cols-mobile=\"2\"]) { grid-template-columns: repeat(2, 1fr); }\n            :host([cols-mobile=\"3\"]) { grid-template-columns: repeat(3, 1fr); }\n            :host([cols-mobile=\"2,1\"]) { grid-template-columns: 2fr 1fr; }\n            :host([cols-mobile=\"1,2\"]) { grid-template-columns: 1fr 2fr; }\n\n            :host([cols-mobile]) ::slotted([colspan]) {grid-column: 1/-1;}\n\n            :host([rows-mobile=\"auto,1\"]) { grid-template-rows: auto 1fr; }\n            :host([rows-mobile=\"1,auto\"]) { grid-template-rows: auto 1fr; }\n        }\n\n        :host([gap=\"0\"]), :host([gap=\"none\"]) { gap: 0; }\n        :host([gap=\".5\"]) { gap: .5em; }\n        :host([gap=\"1\"]) { gap: 1em; }\n        :host([gap=\"2\"]) { gap: 2em; }\n\n        :host([align=\"start\"]) { justify-items: flex-start; }\n        :host([align=\"center\"]) { justify-items: center; }\n        :host([align=\"end\"]) { justify-items: flex-end; }\n\n        ::slotted([colspan]) { grid-column: 1/-1; }\n        ::slotted([colspan=\"2\"]) { grid-column: span 2; }\n        ::slotted([colspan=\"3\"]) { grid-column: span 3; }\n        ::slotted([colspan=\"4\"]) { grid-column: span 4; }\n        ::slotted([colspan=\"5\"]) { grid-column: span 5; }\n        ::slotted([colspan=\"6\"]) { grid-column: span 6; }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-grid')","/*\n    TODO:\n    - add sliding animation?\n*/\nimport { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-carousel', class extends LitElement{\n\n    static get properties(){return {\n        views: {type: Array}\n    }}\n\n    constructor(){\n        super()\n        this.views = []\n        this.active = 0\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            --dotSize: 14px;\n            --dotPadding: 4px;\n            --dotMargin: 5px;\n            --dotExpand: scale(1.4);\n        }\n\n        [hidden] {\n            display: none;\n        }\n\n        nav {\n            display: flex;\n            margin: 1em 0;\n            justify-content: center;\n            align-items: center;\n        }\n\n        nav > div {\n            width: var(--dotSize);\n            height: var(--dotSize);\n            margin: var(--dotMargin);\n            padding: var(--dotPadding);\n            cursor: pointer;\n        }\n\n        nav > div > div {\n            height: 100%;\n            width: 100%;\n            border-radius: 20px;\n            background: #ccc;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n        }\n\n        nav > div:hover > div {\n            transform: var(--dotExpand);\n        }\n\n        nav > div[active] > div {\n            background: #2196F3;\n        }\n        \n        @media print {\n            nav {\n                display: none;\n            }\n\n            ::slotted(*) {\n                display: block !important\n            }\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n        <nav ?hidden=${this.views.length<=1}>${this.views.map((v,i)=>html`\n            <div i=${i} ?active=${i==this.active} @click=${this.navTo}>\n                <div></div>\n            </div>\n        `)}</nav>\n    `}\n\n    get active(){ return this.__active }\n    set active(val){\n        this.__active = val\n        this.views.forEach(v=>v.hidden=true)\n\n        if( !this.views[val] ) return \n\n        this.views[val].hidden = false\n        this.update()\n    }\n\n    navTo(e){\n        let i = e.currentTarget.getAttribute('i')\n        this.active = i\n    }\n\n    firstUpdated(){\n\n        let slot = this.shadowRoot.querySelector('slot');\n\n        slot.addEventListener('slotchange', e=>{\n            this.views = slot.assignedElements();\n            this.active = 0\n        });\n    }\n\n})\n\nexport default customElements.get('b-carousel')","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){\"use strict\";var t=\"millisecond\",e=\"second\",n=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",f=\"date\",h=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d+)?$/,c=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},$=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},l={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+$(r,2,\"0\")+\":\"+$(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),s=n-i<0,a=e.clone().add(r+(s?-1:1),u);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:i,D:f,h:r,m:n,s:e,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},y=\"en\",M={};M[y]=d;var m=function(t){return t instanceof S},D=function(t,e,n){var r;if(!t)return y;if(\"string\"==typeof t)M[t]&&(r=t),e&&(M[t]=e,r=t);else{var i=t.name;M[i]=t,r=i}return!n&&r&&(y=r),r||!n&&y},v=function(t,e){if(m(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},g=l;g.l=D,g.i=m,g.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function d(t){this.$L=D(t.locale,null,!0),this.parse(t)}var $=d.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return g},$.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},$.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},$.isAfter=function(t,e){return v(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<v(t)},$.$g=function(t,e,n){return g.u(t)?this[e]:this.set(n,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,a){var h=this,c=!!g.u(a)||a,d=g.p(t),$=function(t,e){var n=g.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return c?n:n.endOf(i)},l=function(t,e){return g.w(h.toDate()[t].apply(h.toDate(\"s\"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},y=this.$W,M=this.$M,m=this.$D,D=\"set\"+(this.$u?\"UTC\":\"\");switch(d){case o:return c?$(1,0):$(31,11);case u:return c?$(1,M):$(0,M+1);case s:var v=this.$locale().weekStart||0,S=(y<v?y+7:y)-v;return $(c?m-S:m+(6-S),M);case i:case f:return l(D+\"Hours\",0);case r:return l(D+\"Minutes\",1);case n:return l(D+\"Seconds\",2);case e:return l(D+\"Milliseconds\",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(s,a){var h,c=g.p(s),d=\"set\"+(this.$u?\"UTC\":\"\"),$=(h={},h[i]=d+\"Date\",h[f]=d+\"Date\",h[u]=d+\"Month\",h[o]=d+\"FullYear\",h[r]=d+\"Hours\",h[n]=d+\"Minutes\",h[e]=d+\"Seconds\",h[t]=d+\"Milliseconds\",h)[c],l=c===i?this.$D+(a-this.$W):a;if(c===u||c===o){var y=this.clone().set(f,1);y.$d[$](l),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[g.p(t)]()},$.add=function(t,a){var f,h=this;t=Number(t);var c=g.p(a),d=function(e){var n=v(h);return g.w(n.date(n.date()+Math.round(e*t)),h)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(f={},f[n]=6e4,f[r]=36e5,f[e]=1e3,f)[c]||1,l=this.$d.getTime()+t*$;return g.w(l,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this;if(!this.isValid())return\"Invalid Date\";var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=g.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},d=function(t){return g.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:g.s(a+1,2,\"0\"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:g.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:g.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:g.s(u,2,\"0\"),s:String(this.$s),ss:g.s(this.$s,2,\"0\"),SSS:g.s(this.$ms,3,\"0\"),Z:r};return n.replace(c,function(t,e){return e||l[t]||r.replace(\":\",\"\")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(t,f,h){var c,d=g.p(f),$=v(t),l=6e4*($.utcOffset()-this.utcOffset()),y=this-$,M=g.m(this,$);return M=(c={},c[o]=M/12,c[u]=M,c[a]=M/3,c[s]=(y-l)/6048e5,c[i]=(y-l)/864e5,c[r]=y/36e5,c[n]=y/6e4,c[e]=y/1e3,c)[d]||y,h?M:g.a(M)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return M[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=D(t,e,!0);return r&&(n.$L=r),n},$.clone=function(){return g.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},d}(),p=S.prototype;return v.prototype=p,[[\"$ms\",t],[\"$s\",e],[\"$m\",n],[\"$H\",r],[\"$W\",i],[\"$M\",u],[\"$y\",o],[\"$D\",f]].forEach(function(t){p[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t(e,S,v),v},v.locale=D,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=M[y],v.Ls=M,v.p={},v});\n","!function(t,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s():\"function\"==typeof define&&define.amd?define(s):t.dayjs_plugin_duration=s()}(this,function(){\"use strict\";var t,s,n=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,i={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},e=function(t){return t instanceof u},r=function(t,s,n){return new u(t,n,s.$l)},o=function(t){return s.p(t)+\"s\"},u=function(){function s(t,s,e){var u=this;if(this.$d={},this.$l=e,s)return r(t*i[o(s)],this);if(\"number\"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if(\"object\"==typeof t)return Object.keys(t).forEach(function(s){u.$d[o(s)]=t[s]}),this.calMilliseconds(),this;if(\"string\"==typeof t){var h=t.match(n);if(h)return this.$d.years=h[2],this.$d.months=h[3],this.$d.weeks=h[4],this.$d.days=h[5],this.$d.hours=h[6],this.$d.minutes=h[7],this.$d.seconds=h[8],this.calMilliseconds(),this}return this}var u=s.prototype;return u.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(s,n){return s+(t.$d[n]||0)*i[n]},0)},u.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=Math.floor(t/31536e6),t%=31536e6,this.$d.months=Math.floor(t/2592e6),t%=2592e6,this.$d.days=Math.floor(t/864e5),t%=864e5,this.$d.hours=Math.floor(t/36e5),t%=36e5,this.$d.minutes=Math.floor(t/6e4),t%=6e4,this.$d.seconds=Math.floor(t/1e3),t%=1e3,this.$d.milliseconds=t},u.toISOString=function(){var t=this.$d.years?this.$d.years+\"Y\":\"\",s=this.$d.months?this.$d.months+\"M\":\"\",n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=n?n+\"D\":\"\",e=this.$d.hours?this.$d.hours+\"H\":\"\",r=this.$d.minutes?this.$d.minutes+\"M\":\"\",o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var u=o?o+\"S\":\"\",h=\"P\"+t+s+i+(e||r||u?\"T\":\"\")+e+r+u;return\"P\"===h?\"P0D\":h},u.toJSON=function(){return this.toISOString()},u.as=function(t){return this.$ms/i[o(t)]},u.get=function(t){var s=this.$ms,n=o(t);return\"milliseconds\"===n?s%=1e3:s=\"weeks\"===n?Math.floor(s/i[n]):this.$d[n],s},u.add=function(t,s,n){var u;return u=s?t*i[o(s)]:e(t)?t.$ms:r(t,this).$ms,r(this.$ms+u*(n?-1:1),this)},u.subtract=function(t,s){return this.add(t,s,!0)},u.locale=function(t){var s=this.clone();return s.$l=t,s},u.clone=function(){return r(this.$ms,this)},u.humanize=function(s){return t().add(this.$ms,\"ms\").locale(this.$l).fromNow(!s)},u.milliseconds=function(){return this.get(\"milliseconds\")},u.asMilliseconds=function(){return this.as(\"milliseconds\")},u.seconds=function(){return this.get(\"seconds\")},u.asSeconds=function(){return this.as(\"seconds\")},u.minutes=function(){return this.get(\"minutes\")},u.asMinutes=function(){return this.as(\"minutes\")},u.hours=function(){return this.get(\"hours\")},u.asHours=function(){return this.as(\"hours\")},u.days=function(){return this.get(\"days\")},u.asDays=function(){return this.as(\"days\")},u.weeks=function(){return this.get(\"weeks\")},u.asWeeks=function(){return this.as(\"weeks\")},u.months=function(){return this.get(\"months\")},u.asMonths=function(){return this.as(\"months\")},u.years=function(){return this.get(\"years\")},u.asYears=function(){return this.as(\"years\")},s}();return function(n,i,o){t=o,s=o().$utils(),o.duration=function(t,s){var n=o.locale();return r(t,{$l:n},s)},o.isDuration=e;var u=i.prototype.add,h=i.prototype.subtract;i.prototype.add=function(t,s){return e(t)&&(t=t.asMilliseconds()),u.bind(this)(t,s)},i.prototype.subtract=function(t,s){return e(t)&&(t=t.asMilliseconds()),h.bind(this)(t,s)}}});\n","import { LitElement, html, css } from 'lit-element'\nimport dayjs from 'dayjs'\nimport duration from 'dayjs/plugin/duration'\ndayjs.extend(duration)\n\nexport class TimerElement extends LitElement {\n\n    static get properties() { return {\n        time: {type: Number},\n\t\tms: {type: Boolean},\n\t\tshort: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.time = 0\n\t\tthis.ms = false\n\t\tthis.short = false\n\t\tthis.running = this.hasAttribute('running') ? true : false\n\t}\n\n\tget time(){ return this.__time }\n\n\tset time(val){\n\n\t\tconst oldVal = this.__time\n\t\t\n\t\tif( !this.dur )\n\t\t\tthis.dur = dayjs.duration(val)\n\t\telse{\n\t\t\tlet delta = val - oldVal\n\t\t\tthis.dur = this.dur.add(delta)\n\t\t}\n\n\t\tif( val == 0 )\n\t\t\tthis.setAttribute('zero', '')\n\t\telse\n\t\t\tthis.removeAttribute('zero')\n\n\t\tthis.__time = val\n\t\tthis.requestUpdate('time', oldVal);\n\t}\n\n    static get styles(){ return css`\n        :host {\n            display: inline-flex;\n\t\t\t--zeroColor: rgba(0,0,0,.5);\n        }\n\n\t\t.hours[value=\"0\"],\n\t\t.hours[value=\"00\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.hours[value=\"0\"] + span,\n\t\t.hours[value=\"00\"] + span {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"0\"],\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"00\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"0\"] + span,\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"00\"] + span {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t/* span, */\n\t\t/* unit[value=\"00\"] {\n\t\t\tcolor: var(--zeroColor);\n\t\t} */\n    `}\n\n    render(){ return html`\n\t\t<unit class=\"hours\" value=\"${this.hours}\">${this.hours}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"minutes\" value=\"${this.minutes}\">${this.minutes}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"seconds\" value=\"${this.seconds}\">${this.seconds}</unit>\n\t\t${this.ms?html`<unit class=\"ms\">.${this.milliseconds}</unit>`:''}\n    `}\n\n\tget running(){\n\t\treturn this._lastTS != null\n\t}\n\n\tset running(run){\n\t\tif( !run ){\n\t\t\tthis.removeAttribute('running')\n\t\t\tthis._lastTS = null\n\t\t\tclearInterval(this._progressInterval)\n\t\t}else if( !this.running ){\n\t\t\tthis._lastTS = new Date().getTime()\n\t\t\tthis._progressInterval = setInterval(this._progress.bind(this), 100)\n\t\t\tthis.setAttribute('running', '')\n\t\t}\n\t}\n\n\tstart(){ this.running = true }\n\tstop(){ this.running = false }\n\n\t_progress(){\n\t\tlet ts = new Date().getTime()\n\t\tlet elapsedTime = ts - this._lastTS\n\t\tthis._lastTS = ts\n\t\tthis.time += elapsedTime\n\t}\n\n\tget hours(){\n\t\treturn String(this.dur.hours()).padStart(2, '0')\n\t}\n\n\tget minutes(){\n\t\treturn String(this.dur.minutes()).padStart(2, '0')\n\t}\n\n\tget seconds(){\n\t\treturn String(this.dur.seconds()).padStart(2, '0')\n\t}\n\n\tget milliseconds(){\n\t\treturn Math.round(this.dur.milliseconds() / 100)\n\t}\n\n\tget format(){\n\n\t\tlet str = [\n\t\t\tthis.hours,\n\t\t\tthis.minutes,\n\t\t\tthis.seconds\n\t\t].join(':')\n\n\t\tif( this.ms )\n\t\t\tstr += '.'+this.milliseconds\n\n\t\treturn str\n\t}\n}\n    \ncustomElements.define('b-timer', TimerElement)       \n","/*\n    https://undraw.co/illustrations\n*/\nimport { LitElement, html, css } from \"lit-element\";\n\nexport default class EmptyState extends LitElement {\n\n    static get properties(){return {\n        value: {type: String}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            color: var(--b-empty-state-color, rgba(55,71,79,.2));\n            font-size: 2em;\n            text-align: center;\n            padding: 1em;\n            box-sizing: border-box;\n            line-height: 1.2em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n        }\n\n        :host([ondark]) {\n            color: rgba(255,255,255,.1);\n        }\n\n        :host([static]) {\n            position: static;\n            height: auto;\n            min-height: 1em;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([xs]) { font-size: .8em; }\n        :host([sm]) { font-size: 1em; }\n        :host([md]) { font-size: 1.4em; }\n        :host([lg]) { font-size: 3em; }\n\n        :host([must-be=\"first\"]:not(:first-child)) {\n            display: none;\n        }\n\n        :host([must-be=\"last\"]:not(:last-child)) {\n            display: none;\n        }\n    `}\n\n    render(){return html`\n        <slot>${this.value}</slot>\n    `}\n}\n\ncustomElements.define('b-empty-state', EmptyState)","import { LitElement, html, css } from \"lit-element\";\n\nexport default class Label extends LitElement {\n\n    static get properties(){return {\n        'filled': {type: String, reflect: true},\n        'badge': {type: String, reflect: true},\n        'outline': {type: String, reflect: true}\n    }}\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            z-index: 1;\n            display: inline-block;\n            text-transform: uppercase;\n            color: var(--b-label-color, rgba(0,0,0,.33));\n            font-weight: bold;\n            font-size: 1rem;\n            line-height: 1rem;\n            --dividerThickness: 1px;\n            vertical-align: middle;\n            border-radius: var(--radius, 0);\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        :host([text]) {\n            font-weight: normal;\n            text-transform: none;\n        }\n\n        :host([hidden]) {\n            display: none !important;\n        }\n\n        :host([filled]),\n        :host([badge]),\n        :host([outline]) {\n            /* --bgd: #aaa;\n            --color: #fff; */\n            --bgd: rgba(var(--theme-text-rgb, 0,0,0), .5);\n            --color: var(--theme-bgd, #fff);\n\n            padding: 0.15em 0.3em 0.1em;\n            --radius: 3px;\n            font-size: .8rem;\n            text-transform: none;\n            background: var(--bgd);\n            color: var(--color);\n        }\n\n        :host([xs]) { font-size: .6rem; line-height: .6rem; }\n        :host([sm]) { font-size: .8rem; line-height: .8rem; }\n        :host([lg]) { font-size: 1.2rem; line-height: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; line-height: 1.4rem; }\n        :host([xxl]) { font-size: 1.8rem; line-height: 1.8rem; }\n\n        :host([outline]) {\n            background: none;\n            border: solid 1px;\n            border-color: var(--bgd);\n            --color: var(--bgd);\n        }\n\n        :host([badge]) {\n            --radius: 30px;\n            /* padding-left: .6em;\n            padding-right: .6em; */\n            padding-right: .45em;\n            padding-left: .45em;\n            min-width: .3em;\n            text-align: center;\n            min-height: 1em;\n        }\n\n        :host([dot]) {\n            height: 6px;\n            width: 6px;\n            min-width: 0;\n            min-height: 0;\n            padding: 0;\n        }\n\n        :host([filled=\"clear\"]), :host([badge=\"clear\"]) {\n            --bgd: transparent;\n            --color: inherit;\n        }\n        \n        :host([filled=\"black\"]), :host([badge=\"black\"]) { \n            --bgd: var(--theme-text, #333);\n            --color: var(--theme-bgd, #fff)\n        }\n        \n        :host([filled=\"white\"]), :host([badge=\"white\"]) {\n            --bgd: var(--theme-bgd, #fff);\n            --color: var(--theme-text, #333);\n        }\n\n        :host([filled=\"gray\"]), :host([badge=\"gray\"]) {\n            --bgd: rgba(var(--theme-text-rgb, 0,0,0), .15);\n            --color: rgba(var(--theme-text-rgb, 0,0,0), .5);\n        }\n\n        :host([filled=\"theme\"]), :host([badge=\"theme\"]) { --bgd: var(--theme); }\n        :host([filled=\"blue\"]), :host([badge=\"blue\"]) { --bgd: var(--blue); }\n        :host([filled=\"red\"]), :host([badge=\"red\"]) { --bgd: var(--red); }\n        :host([filled=\"orange\"]), :host([badge=\"orange\"]) { --bgd: var(--orange); }\n        :host([filled=\"green\"]), :host([badge=\"green\"]) { --bgd: var(--green); }\n        :host([filled=\"pink\"]), :host([badge=\"pink\"]) { --bgd: var(--pink); }\n        :host([filled=\"purple\"]), :host([badge=\"purple\"]) { --bgd: var(--deep-purple); }\n\n        :host([filled=\"text\"]), :host([badge=\"text\"]) { \n            --bgd: var(--theme-text, #333);\n            --color: var(--theme-bgd, #fff);\n        }\n        :host([filled=\"accent\"]), :host([badge=\"accent\"]) {\n            --bgd: rgba(var(--theme-text-rgb, 0,0,0), .2);\n            --color: var(--theme-text, #333);\n        }\n        \n\n        :host([outline=\"clear\"]) { --bgd: transparent; --color: inherit; }\n        :host([outline=\"black\"]) { --bgd: var(--theme-text,#333); }\n        :host([outline=\"gray\"]) { --bgd: var(--theme-text-accent, #ddd); }\n        :host([outline=\"theme\"]) { --bgd: var(--theme); }\n        :host([outline=\"blue\"]) { --bgd: var(--blue); }\n        :host([outline=\"red\"]) { --bgd: var(--red); }\n        :host([outline=\"orange\"]) { --bgd: var(--orange); }\n        :host([outline=\"green\"]) { --bgd: var(--green); }\n        :host([outline=\"pink\"]) { --bgd: var(--pink); }\n        :host([outline=\"purple\"]) { --bgd: var(--deep-purple); }\n\n        .bgd {\n            display: none;\n            background: var(--bgd);\n            opacity: .2;\n            position: absolute;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            border-radius: var(--radius);\n        }\n\n        :host([muted]) {\n            background: none;\n            --color: var(--bgd);\n        }\n\n        :host([muted]) .bgd {\n            display: block;\n        }\n\n        /* causes unwanted wrap on chrome */\n        /* slot {\n            display: flex;\n        } */\n\n        b-hr {\n            display: none;\n            grid-column: initial; /* remove default 100% width */\n            margin: 0;\n            width: auto;\n            height: var(--dividerThickness);\n        }\n\n        b-hr:first-child {\n            margin-right: 1em;\n        }\n\n        b-hr:last-child {\n            margin-left: 1em;\n        }\n\n        :host([divider]) {\n            display: grid;\n            align-items: center;\n            grid-template-columns: 0 auto 1fr;\n        }\n\n        :host([divider]) b-hr {\n            display: block;\n        }\n\n        :host([divider=\"center\"]) {\n            grid-template-columns: 1fr auto 1fr;\n        }\n\n        :host([divider=\"right\"]) {\n            grid-template-columns: 1fr auto 0;\n        }\n    `}\n\n    render(){return html`\n        <div class=\"bgd\"></div>\n        <b-hr></b-hr>\n        <slot></slot>\n        <b-hr></b-hr>\n    `}\n}\n\ncustomElements.define('b-label', Label)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-ribbon', class extends LitElement{\n\n    static get properties(){ return {\n        pos: {type: String, reflect: true},\n        value: {type: String, reflect: true},\n        shadow: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.pos = 'left'\n        this.value = ''\n        this.shadow = true;\n    }\n\n    static get styles(){return css`\n        :host {\n            --width: 4em;\n            --height: 1em;\n            --padding: .25em;\n            --color: var(--blue);\n            --shadow: none;\n            --offset: -2px;\n\n            line-height: 1em;\n            overflow: hidden;\n            position: absolute;\n            left: var(--offset);\n            top: var(--offset);\n            padding: 0 calc(var(--width) / 2) calc(var(--width) / 2) 0;\n            pointer-events: none;\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        :host([hidden]){ display: none; }\n        \n        :host([shadow]) {\n            --shadow: rgba(0,0,0,.5) 0 10px 5px -10px;\n        }\n\n        :host([pos=\"right\"]) {\n            left: auto;\n            right: var(--offset);\n            padding: 0 0 calc(var(--width) / 2) calc(var(--width) / 2);\n        }\n\n        .wrap {\n            /* background: yellow; */\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: var(--width);\n            height: var(--width);\n        }\n\n        .inner {\n            width: var(--width);\n            max-height: var(--height);\n            overflow: hidden;\n        }\n\n        .ribbon {\n            pointer-events:all;\n            transform-origin: center center;\n            position: relative;\n            padding: var(--padding) calc(var(--width) / 1.5);\n            width: var(--width);\n            height: var(--height);\n            background: var(--color);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            box-shadow: var(--shadow);\n            text-align: center;\n            transform: rotateZ(-45deg);\n            backface-visibility: hidden;\n            z-index: 10;\n            font-weight: bold;\n        }\n\n        :host([pos=\"right\"]) .ribbon {\n            transform: rotateZ(45deg);\n        }\n\n    `}\n\n    render(){return html`\n        <div class=\"wrap\">\n            <div class=\"ribbon\">\n                <div class=\"inner\">\n                    <slot>${this.value}</slot>\n                </div>\n            </div>\n        </div>\n    `}\n\n})\n\nexport default customElements.get('b-ribbon')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-hr', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            --bgd: var(--b-hr-bgd, rgba(0,0,0,.1));\n\n            display: block;\n            margin: var(--padding, 1em) auto;\n            height: 1px;\n            width: 100%;\n            background: var(--bgd);\n            \n            /* full width */\n            grid-column: 1/-1;\n        }\n\n        :host([thick]) {\n            height: 4px;\n        }\n\n        :host([short]) {\n            width: 180px;\n            max-width: 100%;\n        }\n\n        :host([vert]) {\n            display: inline-block;\n            vertical-align: middle;\n            min-height: 1em;\n            height: auto;\n            width: 1px;\n            margin: 0 var(--padding, .5em);\n            align-self: stretch;\n        }\n\n        :host([pad=\"none\"]) { --padding: 0em; }\n        :host([pad=\"xs\"]) { --padding: .25em; }\n        :host([pad=\"sm\"]) { --padding: .5em; }\n        :host([pad=\"md\"]) { --padding: 1.5em; }\n        :host([pad=\"lg\"]) { --padding: 2em; }\n\n        :host([vert][thick]) {\n            height: auto;\n            width: 4px;\n        }\n    `}\n\n    // dont support slotted content yet\n    render(){return html``}\n\n})\n\nexport default customElements.get('b-hr')","/*\n    DEPRECATED\n*/\nimport { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-sub', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline;\n            position:relative;\n            color: var(--b-sub-color, rgba(0,0,0,.4));\n            font-size: .8em;\n            font-weight: normal;\n        }\n\n        :host([ondark]) {\n            color: rgba(255,255,255,.4);\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-sub')","!function(r,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):r.dayjs_plugin_relativeTime=t()}(this,function(){\"use strict\";return function(r,t,e){r=r||{};var n=t.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};e.en.relativeTime=o;var d=function(t,n,d,i){for(var u,a,s,f=d.$locale().relativeTime||o,l=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],h=l.length,m=0;m<h;m+=1){var c=l[m];c.d&&(u=i?e(t).diff(d,c.d,!0):d.diff(t,c.d,!0));var y=(r.rounding||Math.round)(Math.abs(u));if(s=u>0,y<=c.r||!c.r){y<=1&&m>0&&(c=l[m-1]);var p=f[c.l];a=\"string\"==typeof p?p.replace(\"%d\",y):p(y,n,c.l,s);break}}return n?a:(s?f.future:f.past).replace(\"%s\",a)};n.to=function(r,t){return d(r,t,this,!0)},n.from=function(r,t){return d(r,t,this)};var i=function(r){return r.$u?e.utc():e()};n.toNow=function(r){return this.to(i(this),r)},n.fromNow=function(r){return this.from(i(this),r)}}});\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_localizedFormat=t()}(this,function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,n,o){var r=n.prototype,M=r.format;o.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var n=this.$locale().formats,o=function(t,n){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,o,r){var M=r&&r.toUpperCase();return o||n[r]||e[r]||n[M].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,n){return t||n.slice(1)})})}(t,void 0===n?{}:n);return M.call(this,o)}}});\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_calendar=t()}(this,function(){\"use strict\";return function(e,t,a){var n=\"h:mm A\",d={lastDay:\"[Yesterday at] \"+n,sameDay:\"[Today at] \"+n,nextDay:\"[Tomorrow at] \"+n,nextWeek:\"dddd [at] \"+n,lastWeek:\"[Last] dddd [at] \"+n,sameElse:\"MM/DD/YYYY\"};t.prototype.calendar=function(e,t){var n=t||this.$locale().calendar||d,s=a(e||void 0).startOf(\"d\"),o=this.diff(s,\"d\",!0),i=o<-6?\"sameElse\":o<-1?\"lastWeek\":o<0?\"lastDay\":o<1?\"sameDay\":o<2?\"nextDay\":o<7?\"nextWeek\":\"sameElse\",f=n[i]||d[i];return\"function\"==typeof f?f.call(this,a()):this.format(f)}}});\n","/*\n    Adds Day.js plugins that matches Blackstone's use of moment.js\n\n    - Also changes 'Invalid Date' in .format() to empty string\n    - adds dayjs.months()\n    - adds dayjs.weekdays()\n    - supports hash of changes in `.set()`\n*/\nvar dayjs = require('dayjs')\n\nvar relativeTime = require('dayjs/plugin/relativeTime')\ndayjs.extend(relativeTime)\n\nvar localizedFormat = require('dayjs/plugin/localizedFormat')\ndayjs.extend(localizedFormat)\n\nvar calendar = require('dayjs/plugin/calendar')\ndayjs.extend(calendar)\n\ndayjs.prototype.calendarDate = function(formats={}){\n    formats = Object.assign({\n        lastDay : '[Yesterday]',\n        sameDay : '[Today]',\n        nextDay : '[Tomorrow]',\n        lastWeek : '[last] dddd',\n        nextWeek : 'dddd',\n        sameElse : 'l'\n    }, formats)\n    return this.calendar(null, formats)\n}\n\nconst DayJsFormat = dayjs.prototype.format\ndayjs.prototype.format = function(...args){\n    // https://github.com/iamkun/dayjs/blob/dev/src/index.js#L252\n    if (!this.isValid()) return ''\n    return DayJsFormat.call(this, ...args)\n}\n\n// let `.set` handle hash of changes\nconst DayJsSet = dayjs.prototype.set\ndayjs.prototype.set = function(...args){\n    \n    if( args.length == 1 && typeof args[0] == 'object'  ){\n        let date = this\n        for( let unit in args[0] ){\n            date = DayJsSet.call(date, unit, args[0][unit])\n        }\n        return date\n    }\n    \n    return DayJsSet.call(this, ...args)\n}\n\nconst MONTH_NAMES = {}\ndayjs.months = function(format=\"MMMM\"){\n\n    // cached\n    if( MONTH_NAMES[format] )\n        return MONTH_NAMES[format]\n\n    let d = dayjs()\n    let months = []\n    let i = 0\n    \n    while(i<12){\n        months.push(d.set('month', i++).format(format))\n    }\n    MONTH_NAMES[format] = months\n\n    return months\n}\n\ndayjs.monthsShort = function(){ return dayjs.months('MMM') }\n\nconst WEEKDAY_NAMES = {}\ndayjs.weekdays = function(format=\"dddd\"){\n\n    // cached\n    if( WEEKDAY_NAMES[format] )\n        return WEEKDAY_NAMES[format]\n\n    let d = dayjs()\n    let days = []\n    let i = 0\n    \n    while(i<7){\n        days.push(d.set('day', i++).format(format))\n    }\n    WEEKDAY_NAMES[format] = days\n\n    return days\n}\n\ndayjs.weekdaysShort = function(){ return dayjs.weekdays('ddd') }\ndayjs.weekdaysMin = function(){ return dayjs.weekdays('dd') }\n\nmodule.exports = dayjs","import { LitElement, html, css } from 'lit-element'\nimport dayjs from '../helpers/day-js'\n\ncustomElements.define('b-ts', class extends LitElement{\n\n    static get properties(){return {\n        format: {type: String}\n    }}\n\n    constructor(){\n        super()\n        this.format = 'relative'\n        this._extraTitle = this.getAttribute('title')||''\n    }\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n            white-space: nowrap;\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        if( this.format == 'relative' )\n            this._updateInterval = setInterval(this.update.bind(this), 60*1000)\n    }\n    \n    disconnectedCallback(){\n        super.disconnectedCallback()\n        clearInterval(this._updateInterval)\n    }\n\n    get date(){ return this.__date}\n    set date(date){\n\n        if( typeof date === 'string' )\n            date = dayjs(date)\n\n        this.__date = date\n\n        if( date )\n            this.title = this._extraTitle+this.date.format('LT l')\n        \n        this.requestUpdate()\n    }\n\n    get displayTime(){\n        if( !this.date ) return ''\n        \n        if( this.format == 'relative' && this.date.fromNow )\n            return this.date.fromNow()\n        if( this.format == 'calendar' && this.date.calendarDate )\n            return this.date.calendarDate()\n        else\n            return this.date.format(this.format)\n    }\n\n    render(){return html`\n        ${this.displayTime}\n    `}\n\n})\n\nexport default customElements.get('b-ts')","\nconst InvalidImages = []\nexport const BgdColors = ['#2196F3', '#f44336', '#673AB7', '#00BCD4', '#009688', '#4CAF50', '#FFC107', '#FF5722', '#795548', '#607D8B']\nexport const DefaultBgd = '#aaa';\n\nclass AvatarElement extends HTMLElement {\n\t\n\tstatic get observedAttributes(){\n\t\treturn ['initials', 'bgd', 'color', 'size', 'url', 'gravatar']\t\n\t}\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\n\t\tlet aspectRatio = this.getAttribute('cover') == 'false' ? '' : 'xMinYMin slice'\n        \n        temp.innerHTML = /*html*/`<style>\n\t\t\t:host {\n\t\t\t\t--bgd: ${this.bgd};\n\t\t\t\t--bgdDefault: transparent;\n\t\t\t\t--color: ${this.color};\n\t\t\t\theight: var(--size, 1em);\n\t\t\t    width: var(--size, 1em);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\t\t\t\tposition: relative;\n\t\t\t\tborder-radius: var(--b-avatar-radius, 50%);\n\n\t\t\t\t-webkit-touch-callout: none; /* iOS Safari */\n\t\t\t\t-webkit-user-select: none; /* Safari */\n\t\t\t\t-khtml-user-select: none; /* Konqueror HTML */\n\t\t\t\t-moz-user-select: none; /* Firefox */\n\t\t\t\t-ms-user-select: none; /* Internet Explorer/Edge */\n\t\t\t\tuser-select: none; \n\t\t\t}\n\n\t\t\t:host([shadow]) svg {\n\t\t\t\tbox-shadow: rgba(0,0,0,.1) 0 1px 3px;\n\t\t\t}\n\n\t\t\tsvg {\n\t\t\t\tborder-radius: var(--b-avatar-radius, 50%);\n\t\t\t}\n\t\t\t\n\t\t\tsvg rect {\n\t\t\t\tfill: var(--bgd);\n\t\t\t}\n\t\t\t\n\t\t\tsvg text {\n\t\t\t\tfill: var(--color);\n\t\t\t\tfont-size: var(--b-avatar-font-size, 60px);\n\t\t\t}\n\t\t\t\n\t\t\t:host([nobgd]) svg.imgloaded rect {\n\t\t\t\tfill: transparent;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloaded text {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\t\t\t\n\t\t\t:host([imgicon]) svg image {\n\t\t\t\twidth: 70%;\n\t\t\t\theight: 70%;\n\t\t\t\tx: 15%;\n\t\t\t\ty: 15%;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloading rect {\n\t\t\t\tfill: #eee;\n\t\t\t}\n\n\t\t\tsvg.imgloaded rect {\n\t\t\t\tfill: var(--bgdDefault);\n\t\t\t}\n\t\t\t</style>\n\t\t\t\n\t\t<svg class=\"imgloading\" viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" rx=\"0\" ry=\"0\"></rect>\n            <text x=\"50%\" y=\"50%\" dominant-baseline=\"central\" text-anchor=\"middle\">${this.initials}</text>\n\t\t\t<image xlink:href=\"\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\"\n\t\t\t\tpreserveAspectRatio=\"${aspectRatio}\"\n\t\t\t\tonload=\"this.parentElement.classList.add('imgloaded')\">\n        </svg>\n\t\t<slot></slot>`\n\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.img = this.shadowRoot.querySelector('image')\n\t\tthis.img.addEventListener('error', e=>{\n\t\t\tthis.img.style.display='none'\n\t\t\tthis.img.parentElement.classList.remove('imgloading')\n\t\t\tlet src = this.img.getAttribute('xlink:href')\n\t\t\tif( src )\n\t\t\t\tInvalidImages.push(src)\n\t\t})\n    }\n\t\n\tconnectedCallback(){\n\t\t// NOTE: https://stackoverflow.com/a/43837330/484780\n\t\t// this.style.display = 'inline-block'\n\t\t// this.style.verticalAlign = 'middle'\n\t\t// this.style.lineHeight = '0'\n\t\t\n\t\tif( this.hasAttribute('gravatar') )\n\t\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tattributeChangedCallback(name, oldVal, newVal){\n\t\tthis[name] = newVal\n\t}\n\t\n\tgetAttr(name, defaultVal){\n\t\treturn this.hasAttribute(name) ? (this.getAttribute(name)||defaultVal) : defaultVal\n\t}\n\t\n\tget initials(){\n\t\treturn this.getAttr('initials', '-')\n\t}\n\t\n\tset initials(str){\n\t\tthis.shadowRoot.querySelector('text').innerHTML = str || '-'\n\t\tthis.bgd = this.bgd // update bgd to match initial change (wont change if user specified the bgd attr)\n\t}\n\t\n\tget bgd(){\n\t\tlet color = this.getAttr('bgd')\n\t\tif( !color ){\n\t\t\t\n\t\t\tlet initials = this.getAttr('initials', '').toLowerCase()\n\t\t\t\n\t\t\tif( !initials ){\n\t\t\t\tcolor = DefaultBgd\n\t\t\t}else{\n\t\t\t\tlet num = 0\n\n\t\t\t\tfor( let char of initials ){\n\t\t\t\t\tnum += char.charCodeAt(0) - 97\n\t\t\t\t}\n\n\t\t\t\tcolor = BgdColors[ num % BgdColors.length ]\n\t\t\t}\n\t\t}\n\t\treturn color\n\t}\n\t\n\tset bgd(color){\n\t\t// if( this.style.getPropertyValue('--bgd') ) return\n\t\tthis.style.setProperty('--bgd', color)\n\t\t// this.shadowRoot.querySelector('rect').setAttribute('fill', color||this.bgd)\n\t}\n\t\n\tget color(){\n\t\treturn this.getAttr('color' ,'#fff')\n\t}\n\t\n\tset color(color){\n\t\tthis.style.setProperty('--color', color)\n\t\t// this.shadowRoot.querySelector('text').setAttribute('fill', color||this.color)\n\t}\n\t\n\tget size(){\n\t\treturn this.getAttr('size', 24)\n\t}\n\t\n\tset size(size){\n\t\tthis.style.width = size+'px'\n\t\tthis.style.height = size+'px'\n\t\t// reload the gravatar to get the correct size\n\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tset url(url){\n\t\t\n\t\tthis.img.parentElement.classList.remove('imgloaded')\n\t\tthis.img.style.display = ''\n\n\t\t// dont try to load an image we already know fails\n\t\tif( !url || InvalidImages.includes(url) ){\n\t\t\tthis.img.style.display = 'none'\n\t\t\tthis.img.setAttribute('xlink:href', '')\n\t\t\treturn\n\t\t}\n\n\t\tif( url ){\n\t\t\tthis.img.parentElement.classList.add('imgloading')\n\t\t\tthis.img.setAttribute('xlink:href', url)\n\t\t}\n\t\t\t\n\t}\n\t\n\tset gravatar(guid){\n\t\t// wait until el is connected so we can determine the height of the avatar\n\t\tif( !this.isConnected || !guid ) return\n\t\t// FIXME: accessing offsetHeight is a perf hit...as it requires a reflow\n\t\t// https://www.sitepoint.com/10-ways-minimize-reflows-improve-performance/\n\t\tlet size = this.offsetHeight * 2\n\t\tif( size < 80 ) size = 80\n\t\tthis.url = guid ? `//gravatar.com/avatar/${guid}?d=404&s=${size}` : ''\n\t}\n}\n\ncustomElements.define('b-avatar', AvatarElement)\nexport default customElements.get('b-avatar')\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-code', class extends LitElement{\n\n    static get styles(){return css`\n\n        :host {\n            background: var(--theme-bgd-accent, #ccc);\n            border-radius: 3px;\n            color: initial;\n            padding: 0 .3em;\n        }\n\n        code {\n            color: var(--theme-text, inherit);\n        }\n\n        :host([block]) {\n            display: block;\n            font-family: monospace;\n            padding: 1em;\n            overflow-x: auto;\n        }\n\n        :host([block]) code {\n            white-space: pre-wrap;\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.textContent = this.textContent.trim()\n    }\n\n    render(){return html`\n        <code><slot></slot></code>\n    `}\n\n})\n\nexport default customElements.get('b-code')","import { LitElement, html, css } from 'lit-element'\n\n// https://embedresponsively.com/ \ncustomElements.define('b-embed', class Embed extends LitElement {\n\n    static get properties(){return {\n        url: {type: String, reflect: true}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n        }\n\n        main {\n            position: relative;\n            padding-bottom: 56.25%;\n            height: 0;\n            overflow: hidden;\n            max-width: 100%;\n        }\n\n        iframe {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n    `}\n\n    render(){return html`\n        <main>\n            <iframe src='${this.formattedURL}' \n                    frameborder='0' \n                    allowfullscreen>\n            </iframe>\n        </main>\n    `}\n\n    get formattedURL(){\n\n        if( !this.url ) return ''\n\n        let match = Embed.isYoutube(this.url)\n\n        if( match ){\n            return 'https://www.youtube.com/embed/'+match[1]\n        }\n\n        return this.url\n    }\n\n    static isYoutube(url){\n        return url.match(/(?:youtu\\.be|youtube\\.com)\\/(?:watch\\?v\\=)?(?:embed\\/)?(.+)/)\n    }\n\n})\n\nexport default customElements.get('b-embed')","// https://blog.roomanna.com/09-24-2011/dynamically-coloring-a-favicon\n\nlet favicon\n\nexport default (color=false, method=\"lighten\")=>{\n\n    let icon = document.querySelector(\"link[rel='icon']\")\n\n    if( !favicon ){;\n        favicon = icon.cloneNode()\n    }\n\n    if( !color ){\n        icon.type = favicon.type\n        icon.href = favicon.href\n        return\n    }\n\n    function onImageLoaded() {\n        let canvas = document.createElement(\"canvas\");\n        let size = img.naturalHeight\n        let radius = size / 2\n\n        canvas.width = size;\n        canvas.height = size;\n        \n        let context = canvas.getContext(\"2d\");\n        \n        context.drawImage(img, 0, 0);\n        context.globalCompositeOperation = method;\n        context.fillStyle = color;\n        context.arc(radius, radius, radius, 0, 2 * Math.PI, false);\n        context.fill();\n\n        icon.type = \"image/x-icon\";\n        icon.href = canvas.toDataURL();\n    };\n\n    var img = document.createElement(\"img\");\n    img.addEventListener(\"load\", onImageLoaded);\n    img.src = favicon.href;\n}","import colorizeFavicon from './colorize-favicon'\n\nconst UA = navigator.userAgent\n\nconst device = {\n\n    get is_ios(){ return device.isiOS}, // DEPRECATED\n    get is_android(){ return device.isAndroid }, // DEPRECATED\n    get is_mobile(){ return device.isMobile }, // DEPRECATED\n\n    get isWindows(){ return /Win/.test(UA) },\n    get isMac(){ return /Mac/.test(UA) },\n    get isLinux(){ return /Linux/.test(UA) },\n\n    get minScreenSize(){\n        return window.outerWidth < window.outerHeight ? window.outerWidth : window.outerHeight;\n    },\n\n    get isiOS(){\n        return /iPad|iPhone|iPod/.test(UA)\n        || (device.isMac && navigator.standalone !== undefined ) // iPadOS 13+\n    },\n\n    get isiPad(){\n        return /iPad/.test(UA) || (!device.isiOS && device.isMac && navigator.standalone !== undefined )\n    },\n\n    get isAndroid(){\n        return /android/i.test(UA)\n    },\n\n    get isTouch(){\n        return 'ontouchstart' in window\n    },\n    \n    get isMobile(){\n        return device.isiOS || device.isAndroid\n    },\n\n    // https://developer.chrome.com/multidevice/user-agent\n    get isiOSChrome(){\n        return /CriOS/.test(UA)\n    },\n\n    get isElectron(){\n        return /Electron/.test(UA)\n    },\n\n    get electronVersion(){\n        let matches = UA.match(/Electron\\/([\\d\\.]+) /)\n        return matches ? matches[1] : 0\n    },\n\n    get isChromeInstalledApp(){\n        return this.isInstalled && /Chrome/.test(UA)\n    },\n\n    get isInstalled(){\n        return navigator.standalone || window.matchMedia('(display-mode: standalone)').matches\n    },\n\n    // alias\n    get isStandalone(){ return device.isInstalled },\n\n    applyClasses(){\n        const html = document.documentElement\n        if( !html ) return\n        html.classList.toggle('mobile', device.isMobile)\n        html.classList.toggle('ios', device.isiOS)\n        html.classList.toggle('electron', device.isElectron)\n        html.classList.toggle('android', device.isAndroid)\n        html.classList.toggle('mac', device.isMac)\n        html.classList.toggle('windows', device.isWindows)\n        html.classList.toggle('installed', device.isInstalled)\n    }\n    \n}\n\nexport default device\n\n// https://medium.com/@jonas_duri/enable-dark-mode-with-css-variables-and-javascript-today-66cedd3d7845\nexport const colorScheme = {\n\n    get isDarkMode(){ return window.matchMedia(\"(prefers-color-scheme: dark)\").matches },\n    get isLightMode(){ return window.matchMedia(\"(prefers-color-scheme: light)\").matches },\n    get isUnset(){ return window.matchMedia(\"(prefers-color-scheme: no-preference)\").matches },\n\n    get isSupported(){ return this.isDarkMode || this.isLightMode || this.isUnset },\n    \n    onChange(cb){\n        // first time, setup watchers\n        if( !this._watchers ){\n            this._watchers = new Map()\n\n            window.matchMedia(\"(prefers-color-scheme: dark)\").addListener(e => e.matches && this._dispatchChange('dark'))\n            window.matchMedia(\"(prefers-color-scheme: light)\").addListener(e => e.matches && this._dispatchChange('light'))\n        }\n\n        this._watchers.set(cb, cb)\n    },\n    \n    _dispatchChange(mode){\n        this._watchers.forEach(cb=>{\n            cb(mode)\n        })\n    },\n\n    apply({colorizeFaviconComposition=''}={}){\n        localStorage.setItem('theme-colorize-icon', \n            colorizeFaviconComposition||localStorage.getItem('theme-colorize-icon')||'lighten')\n        this.onChange(this.setTheme.bind(this))\n        this.setTheme()\n        this.setAccent()\n    },\n\n    get theme(){ return localStorage.getItem('theme') },\n    get accent(){ return localStorage.getItem('theme-accent') },\n\n    setTheme(theme){\n\n        const html = document.documentElement\n        let metaThemeColor = document.head.querySelector('meta[name=\"theme-color\"]')\n\n        // create the meta theme color if not found\n        // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/theme-color\n        if( !metaThemeColor ){\n            metaThemeColor = document.createElement('meta')\n            metaThemeColor.setAttribute('name', 'theme-color')\n            document.head.appendChild(metaThemeColor)\n        }\n\n        html.removeAttribute('light')\n        html.removeAttribute('dark')\n\n        if( theme === undefined )\n            theme = localStorage.getItem('theme') || 'system'\n        \n        localStorage.setItem('theme', theme)\n\n        if( theme == 'system' )\n            theme = this.isDarkMode ? 'dark' : 'light'\n\n        html.setAttribute(theme, '')\n        metaThemeColor.content = this.getCssVar('theme-bgd')\n        localStorage.setItem('meta-theme-color', metaThemeColor.content)  \n    },\n\n    setAccent(accent){\n\n        const html = document.documentElement\n        let colorizeFaviconComposition = localStorage.getItem('theme-colorize-icon')\n\n        if( accent === undefined ){\n            accent = localStorage.getItem('theme-accent')\n        }else{\n            localStorage.setItem('theme-accent', accent)\n        }\n\n        if( accent ){\n            html.style.setProperty('--theme', `var(--${accent}, #${accent})`);\n            html.style.setProperty('--theme-chosen', `var(--${accent}, #${accent})`);\n\n            if( colorizeFaviconComposition )\n                colorizeFavicon(this.getCssVar('theme'), colorizeFaviconComposition)\n\n        }else{\n            html.style.removeProperty('--theme');\n            html.style.removeProperty('--theme-chosen');\n\n            colorizeFavicon(false)\n        }\n\n    },\n\n    getCssVar(name){\n        if( name[0] != '-' )\n            name = '--'+name\n        return getComputedStyle(document.body).getPropertyValue(name).trim()\n    }\n    \n}\n\n","import { LitElement, html, css } from 'lit-element'\nimport device from '../../../util/device'\n\ncustomElements.define('range-slider', class extends LitElement{\n\n    static get properties(){return {\n        min: {type: Number},\n        max: {type: Number},\n        step: {type: Number},\n        range: {type: Boolean, reflect: true},\n        value: {type: Object},\n        label: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.mouseUp = this.mouseUp.bind(this)\n        this.mouseMove = this.mouseMove.bind(this)\n\n        this.label = 'auto'\n        this.range = false\n        this.min = 0\n        this.max = 100\n        this.step = 1\n\n        this.valMin = 0\n        this.valMax = 0\n        this.value = [0,0]\n    }\n\n    static get styles(){return css`\n        :host {\n            --size: 6px;\n            --thumbSize: 18px;\n            --color: var(--fc-theme);\n            --thumbColor: var(--color);\n            --bgd: var(--theme-text-accent, rgba(0,0,0,.4));\n            --padding: 10px;\n\n            display: inline-block;\n            vertical-align: middle;\n            position:relative;\n            width: 140px;\n            height: var(--size);\n            margin: 0 auto;\n            padding: var(--padding) 0;\n            cursor: pointer;\n            font-size: .9em;\n            user-select: none;\n            --label-rotation: 45deg;\n        }\n\n        rail, track {\n            display: block;\n            height: var(--size);\n            width: 100%;\n            background: var(--color);\n            border-radius: 6px;\n            position: absolute;\n            top: var(--padding);\n            left: 0;\n        }\n\n        rail {\n            background: var(--bgd);\n        }\n\n        thumb {\n            height: var(--thumbSize);\n            width: var(--thumbSize);\n            transform: translate(-50%, -50%);\n            position: absolute;\n            left: 0;\n            top: calc(var(--padding) + (var(--size) / 2));\n            background: var(--thumbColor);\n            border-radius: var(--thumbSize);\n            box-shadow: 0 0 0 1px var(--theme-bgd, var(--thumb-shadow, #fff)) inset\n        }\n\n        thumb:before {\n            content: '';\n            position: absolute;\n            height: 250%;\n            width: 250%;\n            left: -75%;\n            top: -75%;\n            background: var(--thumbColor);\n            opacity: .2;\n            border-radius: 30px;\n            z-index: -1;\n            transform: scale(.3);\n            transform-origin: center center;\n            opacity: 0;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        thumb:hover:before {\n            transform: scale(.9);\n            opacity: .2;\n        }\n\n        thumb[active]:before {\n            transform: scale(1);\n            opacity: .2;\n        }\n\n        thumb[active] {\n            background: var(--color);\n        }\n\n        thumb > div {\n            position: absolute;\n            font-size: .9em;\n            background: var(--color);\n            color: #fff;\n            height: 2.2em;\n            width: 2.2em;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            bottom: 100%;\n            left: 50%;\n            position: absolute;\n            transform-origin: bottom left;\n            transform: translate(0%,-4px) rotate(calc(-1 * var(--label-rotation))) scale(0);\n            border-radius: 50% 50% 50% 0;\n            transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n            \n        }\n\n        :host([label*=\"bottom\"]) thumb > div{\n            bottom: auto;\n            top: calc(0% - 4px);\n            --label-rotation: -135deg;\n        }\n\n        thumb > div > span {\n            transform: rotate(var(--label-rotation))\n        }\n\n        :host([label*=\"show\"]) thumb > div,\n        thumb:hover > div,\n        thumb[active] > div {\n            transform: translate(0%,-4px) rotate(calc(-1 * var(--label-rotation))) scale(1);\n        }\n\n        :host([label*=\"none\"]) thumb > div {\n            display: none !important;\n        }\n\n        :host(:not([range])) thumb[min] {\n            display: none;\n        }\n\n        .labels {\n            display: flex;\n            justify-content: space-between;\n            margin-top: .75em;\n        }\n    `}\n\n    _polishVal(val){\n\n        val = parseFloat((Math.round(val / this.step) * this.step).toFixed(2))\n\n        if( val < this.min )\n            val = this.min\n        \n        if( val > this.max )\n            val = this.max\n        \n        return val\n    }\n\n    set value(val){\n\n        let oldVal = this.value\n        let oldMin = this.valMin\n        let oldMax = this.valMax\n        \n        if( typeof val == 'string' )\n            val = val.split(',').map(s=>parseFloat(s))\n\n        // setting both min and max\n        if( Array.isArray(val) ){\n            if( typeof val[0] !== 'number' || typeof val[1] !== 'number' ) return\n\n            val.sort()\n\n            if( this.range )\n                this.valMin = this._polishVal(val[0])\n\n            this.valMax = this._polishVal(val[1])\n            \n            this.requestUpdate('value', oldVal)\n            return\n        }\n\n        if( typeof val !== 'number' ) return\n\n        val = this._polishVal(val)\n        // console.log(val);\n\n        let dmin = Math.abs(this.valMin - val);\n        let dmax = Math.abs(this.valMax - val)\n\n        if( this._active == 'max' && val == this.valMin ){\n            this.valMax = val\n            if( this.range )\n                this._active = 'min'\n        \n        }else if( this._active == 'min' && val == this.valMax ){\n            this.valMin = val\n            this._active = 'max'\n        }\n        else if( !this.range || (dmin == dmax && this.valMax > this.valMin && this._active == 'max') || dmax < dmin || val > this.valMax ){\n            this.valMax = val\n            this._active = 'max'\n        }else{\n            this.valMin = val\n            if( this.range )\n                this._active = 'min'\n        }\n\n        // this.setAttribute('value', this.value.join(','))\n        if( !this._mouseDown )\n            this._active = null\n\n        // nothing changed\n        if( oldMin == this.valMin && oldMax == this.valMax ) return\n    \n        this._didChange = true\n        \n        let setPropOn = this.parentElement && this.parentElement.tagName == 'FORM-CONTROL' \n                        ? this.parentElement : this\n\n        if( this.range ){\n            setPropOn.style.setProperty('--range-slider-min-val', `'${this.valMin}'`)\n            setPropOn.style.setProperty('--range-slider-max-val', `'${this.valMax}'`)\n        }else{\n            setPropOn.style.setProperty('--range-slider-val', `'${this.valMax}'`)\n        }\n\n        this.requestUpdate('value', oldVal)\n    }\n\n    get value(){\n        return this.range ? [this.valMin, this.valMax] : this.valMax;\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.addEventListener(device.isMobile ? 'touchstart' : 'mousedown', this.mouseDown, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.removeEventListener(device.isMobile ? 'touchstart' : 'mousedown', this.mouseDown, true)\n    }\n\n    get _len(){ return this.max - this.min }\n    get _minLeft(){ return (this.valMin) / this._len * 100 }\n    get _maxLeft(){ return (this.valMax - this.min) / this._len * 100 }\n    get _trackLength(){ return this._maxLeft - this._minLeft }\n\n    get atMin(){ return (this.range ? this.valMin : this.valMax ) == this.min }\n    get atMax(){ return this.valMax == this.max }\n\n    reset(){\n        this.valMin = this.min\n        this.valMax = this.min\n        // this.valMax = this.range ? this.max : this.min\n        this.value = [this.valMin, this.valMax]\n        this.update()\n    }\n\n    render(){return html`\n        <rail></rail>\n        <track style=\"left:${this._minLeft}%; width:${this._trackLength}%\"></track>\n        <thumb min ?active=${this._active=='min'} style=\"left:${this._minLeft}%\">\n            <div><span>${this.valMin}</span></div>\n        </thumb>\n        <thumb max ?active=${this._active=='max'} style=\"left:${this._maxLeft}%\">\n            <div><span>${this.valMax}</span></div>\n        </thumb>\n        <div class=\"labels\">\n            <b-text sm muted><slot name=\"label:min\"></slot></b-text>\n            <b-text sm muted><slot name=\"label:max\"></slot></b-text>\n        </div>\n    `}\n\n    mouseDown(e){\n        if( !device.isMobile && e.which !== 1 ) return // normal click\n        window.addEventListener(device.isMobile?'touchend':'mouseup', this.mouseUp, true)\n        window.addEventListener(device.isMobile?'touchmove':'mousemove', this.mouseMove, true)\n        this._mouseDown = true\n        this.mouseMove(e)\n    }\n\n    mouseUp(){\n        this._active = null\n        this._mouseDown = false\n        window.removeEventListener(device.isMobile?'touchend':'mouseup', this.mouseUp, true)\n        window.removeEventListener(device.isMobile?'touchmove':'mousemove', this.mouseMove, true)\n        this.update()\n\n        if( this._didChange ){\n            this._didChange = false\n            \n            this.dispatchEvent(new CustomEvent('change', {\n                bubbles: true,\n                composed: true,\n                detail: {value: this.value}\n            }))\n        }\n    }\n\n    mouseMove(e){\n        \n        // already at the min/max, stop tracking mouse move until within range again\n        if( this._active == 'min' && e.pageX < this._lastMousePos && this.atMin ) return\n        if( this._active == 'max' && e.pageX > this._lastMousePos && this.atMax ) return\n        \n        this._lastMousePos = e.pageX\n\n        let rect = this.getBoundingClientRect()\n        let offset = {x: rect.x, y: rect.y}\n\n        // let mouseX = offset.x < e.pageX ? (e.offsetX + e.srcElement.offsetLeft) : e.pagex\n        let eventScreenX = e.touches ? e.touches[0].screenX : e.screenX\n        let mouseX = eventScreenX - window.screenX\n        let x = mouseX - offset.x\n        let percent = x / this.clientWidth * 100;\n\n        let val = ((percent / 100) * this._len) + this.min\n\n        let oldVal = this.value\n        this.value = val\n\n        if( oldVal != this.value )\n        this.dispatchEvent(new CustomEvent('changing', {\n            bubbles: true,\n            composed: true,\n            detail: {value: this.value}\n        }))\n    }\n\n})\n\nexport default customElements.get('range-slider')","// TODO: support prefixing?\n\nconst store = (store, key, val)=>{\n\t\n\tif( val === undefined ){\n\t\tlet data = store.getItem(key)\n\t\t\n\t\tif( data === null || data === undefined )\n\t\t\treturn undefined\n\t\t\n\t\tvar val = ''\n\t\ttry { val = JSON.parse(data) }\n\t\tcatch(e) { val = data }\n\t\t\n\t\treturn val\n\t}\n\t\t\n\tif( val === null ){\n\t\treturn store.removeItem(key)\n\t}\n\t\t\n\tval = JSON.stringify(val)\n\t\n\treturn store.setItem(key, val)\n}\n\nexport const localStore = (key, val)=>{\n\treturn store(window.localStorage, key, val)\n}\n\nexport const sessionStore = (key, val)=>{\n\treturn store(window.sessionStorage, key, val)\n}\n\nexport default localStore\n\nexport function forceStorageEventsLocally(){\n\n\tlet setItem = window.localStorage.setItem\n\tlet removeItem = window.localStorage.removeItem\n\n\twindow.localStorage.setItem = function(key, val){\n\t\tsetItem.call(window.localStorage, key, val)\n\t\twindow.dispatchEvent(new CustomEvent('storage', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tkey: key,\n\t\t\t\toldVal: null,\n\t\t\t\tnewVal: val\n\t\t\t}\n\t\t}))\n\t}\n\n\twindow.localStorage.removeItem = function(key){\n\t\tremoveItem.call(window.localStorage, key)\n\t\twindow.dispatchEvent(new CustomEvent('storage', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tkey: key,\n\t\t\t\toldVal: null,\n\t\t\t\tnewVal: null\n\t\t\t}\n\t\t}))\n\t}\n\n}","import { LitElement, html, css } from 'lit-element'\n// import Menu from '../presenters/menu'\nimport './icon'\nimport '../presenters/form/controls/range-slider'\nimport dayjs from 'dayjs'\nimport duration from 'dayjs/plugin/duration'\nimport store from '../util/store'\n\ndayjs.extend(duration)\n\n// TODO: hook up settings menu\n\nconst formatTime = sec=>{\n    var dur = dayjs.duration(sec * 1000)\n    var hours = dur.hours()\n    var min = hours > 0 ? String(dur.minutes()).padStart(2,'0') : dur.minutes()\n    return (hours?hours+':':'') + min + ':' + String(dur.seconds()).padStart(2,'0')\n}\n\nlet ACTIVE_PLAYER = null\n\ncustomElements.define('b-audio', class extends LitElement {\n\n    static get properties(){return {\n        src: {type: String, reflect: true},\n        autoplay: {type: Boolean, reflect: true},\n        playing: {type: Boolean, reflect: true},\n        // currentTime: {type: Number},\n    }}\n\n    constructor(src='', {\n        autoplay = false\n    }={}){\n        super()\n        this.src = src\n        this.autoplay = autoplay\n        this.playing = false\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            /* padding: 1em; */\n            border: solid 1px rgba(0,0,0,.1);\n            background: var(--theme-bgd, #fff);\n            border-radius: var(--radius);\n            --radius: 4px;\n        }\n\n        main {\n            display: grid;\n            grid-template-columns: 2em 45px 1fr 45px;\n            align-items: center;\n            justify-content: space-between;\n            gap: .25em;\n            padding-right: .5em;\n        }\n\n        .time {\n            font-weight: bold;\n        }\n\n        .time.elapsed {\n            text-align: right;\n        }\n\n        .btn-play {\n            cursor: pointer;\n            height: 1.5em;\n            width: 1.5em;\n            margin: .25em;\n            padding: .25em;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            flex-shrink: 0;\n            border-radius: 20px;\n            /* margin-right: .5em; */\n            background: var(--theme-bgd-accent, #eee);\n            /* color: #fff; */\n            /* border: solid 2px; */\n            transition: color .15s ease-in-out, border-color .15s ease-in-out;\n        }\n\n        :host([status=\"error\"]) {\n            background: var(--red-50) !important;\n        }\n\n        :host([status=\"error\"]) .btn-play {\n            color: var(--red);\n            background: var(--red-100);\n        }\n\n\n        .btn-play:hover {\n            color: var(--blue);\n        }\n\n        input[type=range] {\n            -webkit-appearance: none;\n            min-width: 100px;\n            height: 10px;\n            border-radius: 5px;\n            background: var(--theme-text, var(--black));\n            outline: none;\n            padding: 0;\n            margin: 0 .5em;\n            border: none;\n            box-shadow: none;\n        }\n\n        input[type=range]::-webkit-slider-runnable-track {\n            border: none;\n            height: 100%;\n        }\n\n        input[type=range]::-webkit-slider-thumb {\n            display: none;\n            -webkit-appearance: none;\n            appearance: none;\n            width: 18px;\n            height: 18px;\n            border-radius: 50%;\n            border: solid 2px var(--theme-bgd, #fff);\n            background: var(--theme-text, var(--black));\n            cursor: pointer;\n            box-shadow: none;\n            margin-top: -4px;\n        }\n\n        input[type=range]::-webkit-slider-thumb:hover {\n            background: var(--blue);\n        }\n\n        input[type=range]:active::-webkit-slider-thumb {\n            background: var(--blue);\n        }\n\n        input[type=range]:hover::-webkit-slider-thumb {\n            display: block;\n        }\n\n        .settings {\n            transform: rotate(90deg);\n        }\n    `}\n\n    render(){ return html`\n        <main @mouseenter=${this.onHover} @mouseleave=${this.onHoverLeave}>\n            <audio\n                @loadedmetadata=${this.audioLoaded}\n                @timeupdate=${this.audioTimeChange}\n                @ended=${this.pause}\n                @error=${this.audioLoadError}\n            ></audio>\n            <span class=\"btn-play icon-play\" @click=${this.playPause}>\n                <b-icon name=${this.playing?'pause':'play'}></b-icon>\n            </span>\n            <span class=\"elapsed time\">00:00</span>\n            <input type=\"range\" value=\"0\" disabled\n                @input=${this.progressSliderChanging}\n                @change=${this.progressSliderChangingDone}\n                class=\"progress\"/>\n            <span class=\"remaining time\">00:00</span>\n            <!-- <b-btn clear icon=\"dot-3\" class=\"settings\" @click=${this.viewSettings}></b-btn> -->\n        </main>\n    `}\n\n    // events: {\n    //     'mouseenter': 'onHover',\n    //     'mouseleave': 'onHoverLeave',\n    //     'mouseenter .progress': 'progressHover',\n    //     'mouseleave .progress': 'progressHoverLeave',\n    //     'input .progress': 'progressSliderChanging',\n    //     'change .progress': 'progressSliderChangingDone',\n    //     'click .btn-settings': 'viewSettings',\n    //     'click .btn-play': 'playPause'\n    // },\n\n    firstUpdated(){\n\n        this.audio = this.shadowRoot.querySelector('audio')\n        this.progress = this.shadowRoot.querySelector('.progress')\n        this.elapsed = this.shadowRoot.querySelector('.elapsed')\n        this.remaining = this.shadowRoot.querySelector('.remaining')\n\n        this.loadAudio(this.src)\n    }\n    \n    get status(){ return this.getAttribute('status') }\n    set status(val){\n        this.setAttribute('status', val)\n    }\n\n    playPause(){\n        this.audio.paused ? this.play() : this.pause()\n    }\n\n    play(src){\n\n        // if another audio player is playing, pause it\n        if( ACTIVE_PLAYER && ACTIVE_PLAYER != this )\n            ACTIVE_PLAYER.pause()\n\n        // if audio src has not loaded yet or we have been given a new src, load it now\n        if( !this._loaded || src ){\n            this.loadAudio(src || this.src )\n            return\n        }\n\n        if( this.status == 'error' )\n            return;\n\n        ACTIVE_PLAYER = this;\n        this.audio.play()\n        this.playing = true\n    }\n\n    pause(){\n        ACTIVE_PLAYER = null;\n        this.clip = null; // clear any clips\n        this.audio.pause()\n        this.playing = false\n    }\n    \n    skipBack(val){ this.skip(-val||-10) }\n    skipForward(val){ this.skip(val||10) }\n    skip(amt){\n        var time = this.audio.currentTime + amt;\n        if( time < 0 ) time = 0;\n        if( time > this.audio.duration ) time = this.audio.duration;\n        this.audio.currentTime = time;\n    }\n    \n    loadAudio(src){\n        this.status = 'loading'\n        this.audio.src = src\n    }\n\n// Events ==================================================================\n\n    audioLoadError(){\n        this._loaded = true;\n        this.status = 'error'\n        this.progress.disabled = true\n    }\n\n    audioLoaded(){\n        this.status = 'loaded'\n        this._loaded = true;\n        this.progress.disabled = false\n        this.progress.max = this.audio.duration\n        this.setProgress()\n\n        // clips were set before fully loaded, so set them again if needed\n        if( this.clip && this.clip.length == 2 && isNaN(this.clip[1]) )\n            this.playLastClip()\n        else if( this.clip && this.clip.length > 2 && isNaN(this.clip[2]) )\n            this.playEndClips()\n        else if( this.autoplay )\n            this.play()\n    }\n\n/*\n    Playing <audio> time has changed\n*/\n    audioTimeChange(){\n        \n        // update the progress slider unless currently seeking\n        if( !this.seeking )\n            this.progress.value = this.audio.currentTime\n            \n        this.setProgress();\n\n        // reached end of clip, stop\n        if( this.clip && this.audio.currentTime >= this.clip[1] ){\n\n            // more than one clip is given, remove the just finished clip and begin playing the next one\n            if( this.clip.length > 2 ){\n                this.audio.pause();\n                setTimeout(function(){ // play next clip after 700ms pause\n                    this.playClip(this.clip.splice(2))\n                }.bind(this), 700)\n            }else{\n                this.pause();\n            }\n        }\n    }\n\n/*\n    Set Progress: uses current poisition to adjust background of proress slider on and updates elapsed/remaining times\n*/\n    setProgress(){\n\n        var percent = this.progress.value / this.audio.duration * 100;\n        var time = this.progress.value\n        var color = 'var(--theme-text, #333)'\n        var color2 = 'var(--theme-bgd-accent, #bbb)'\n        \n        this.progress.style.background = `linear-gradient(to right, ${color} ${percent}%, ${color2} ${percent}%)`\n\n        this.elapsed.innerHTML = formatTime(time)\n        this.remaining.innerHTML = this.audio.duration == Infinity ? '' : formatTime(this.audio.duration - time)\n    }\n\n    progressSliderChanging(){\n        this.seeking = true\n        this.wasPlaying = this.wasPlaying || !this.audio.paused\n        this.audio.pause();\n        this.setProgress()\n    }\n\n    progressSliderChangingDone(){\n        this.audio.currentTime = this.progress.value\n        this.wasPlaying && this.play()\n        this.wasPlaying = null;\n        this.seeking = false;\n        this.progress.blur() // so slider doesn't hijack the keyboard events\n    }\n\n    progressHover(){\n        this.classList.add('progress-hover')\n        this.setProgress();\n    }\n\n    progressHoverLeave(){\n        this.classList.remove('progress-hover')\n        this.setProgress();\n    }\n    \n// Clips ====================================================================\n\n    setClipLength(item){\n        store('audioplayer:clip-length', item.val)\n    }\n\n    clipLength(){\n        return store('audioplayer:clip-length') || 15\n    }\n\n    playFirstClip(){\n        if( this.audio.duration < this.clipLength() ) return; // TODO: improve\n        this.playClip([0, this.clipLength()])\n    }\n\n    playLastClip(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playEndClips(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([0, this.clipLength(), this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playClip(clip){\n        this.clip = clip\n        if( !isNaN(this.clip[0]) )\n            this.audio.currentTime = this.clip[0]\n        this.play()\n    }\n    \n// Keyboard Shortcuts =======================================================\n\n    onKeyPress(e){\n\n        if( this.status == 'error' )\n            return;\n\n        e.preventDefault()\n        e.stopPropagation()\n\n        switch(e.which){\n            case 32: this.playPause(); break; // space\n            case 27: this.pause(); break; // esc\n            case 70: this.playFirstClip(); break; // f\n            case 76: this.playLastClip(); break; // l\n            case 69: this.playEndClips(); break; // e\n            case 37: // left\n                if( e.shiftKey )\n                    this.audio.currentTime = 0;\n                else\n                    this.skipBack(_.metaKey()?30:10)\n                break;\n            case 39: // right\n                if( e.shiftKey )\n                    this.audio.currentTime = this.audio.duration\n                else\n                    this.skipForward(_.metaKey()?30:10)\n                break;\n        }\n    }\n\n    onHover(){\n        this._onKeyPress = this._onKeyPress || this.onKeyPress.bind(this)\n        window.addEventListener('keydown', this._onKeyPress)\n    }\n\n    onHoverLeave(){\n        window.removeEventListener('keydown', this._onKeyPress)\n    }\n\n})\n\nexport default customElements.get('b-audio')","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, NodePart, Part} from '../lit-html.js';\n\ninterface PreviousValue {\n  readonly value: unknown;\n  readonly fragment: DocumentFragment;\n}\n\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap<NodePart, PreviousValue>();\n\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value: unknown) => (part: Part): void => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) &&\n      value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value as string;  // innerHTML casts to string internally\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {value, fragment});\n});\n","/**\n * @license\n * Copyright (c) 2020 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, BooleanAttributePart, directive, EventPart, NodePart, PropertyPart} from '../lit-html.js';\n\n/**\n * Checks binding values against live DOM values, instead of previously bound\n * values, when determining whether to update the value.\n *\n * This is useful for cases where the DOM value may change from outside of\n * lit-html, such as with a binding to an `<input>` element's `value` property,\n * a content editable elements text, or to a custom element that changes it's\n * own properties or attributes.\n *\n * In these cases if the DOM value changes, but the value set through lit-html\n * bindings hasn't, lit-html won't know to update the DOM value and will leave\n * it alone. If this is not what you wantif you want to overwrite the DOM\n * value with the bound value no matter whatuse the `live()` directive:\n *\n *     html`<input .value=${live(x)}>`\n *\n * `live()` performs a strict equality check agains the live DOM value, and if\n * the new value is equal to the live value, does nothing. This means that\n * `live()` should not be used when the binding will cause a type conversion. If\n * you use `live()` with an attribute binding, make sure that only strings are\n * passed in, or the binding will update every render.\n */\nexport const live = directive(\n    (value: unknown) => (part: AttributePart|PropertyPart|\n                         BooleanAttributePart) => {\n      let previousValue: unknown;\n      if (part instanceof EventPart || part instanceof NodePart) {\n        throw new Error(\n            'The `live` directive is not allowed on text or event bindings');\n      }\n      if (part instanceof BooleanAttributePart) {\n        checkStrings(part.strings);\n        previousValue = part.element.hasAttribute(part.name);\n        // This is a hack needed because BooleanAttributePart doesn't have a\n        // committer and does its own dirty checking after directives\n        part.value = previousValue;\n      } else {\n        const {element, name, strings} = part.committer;\n        checkStrings(strings);\n        if (part instanceof PropertyPart) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          previousValue = (element as any)[name];\n          if (previousValue === value) {\n            return;\n          }\n        } else if (part instanceof AttributePart) {\n          previousValue = element.getAttribute(name);\n        }\n        if (previousValue === String(value)) {\n          return;\n        }\n      }\n      part.setValue(value);\n    });\n\nconst checkStrings = (strings: readonly string[]) => {\n  if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n    throw new Error('`live` bindings can only contain a single expression');\n  }\n};\n","export default typeof window !== 'undefined' && typeof document !== 'undefined';\n","import isBrowser from './isBrowser';\n\nconst longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nlet timeoutDuration = 0;\nfor (let i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nexport function microtaskDebounce(fn) {\n  let called = false\n  return () => {\n    if (called) {\n      return\n    }\n    called = true\n    window.Promise.resolve().then(() => {\n      called = false\n      fn()\n    })\n  }\n}\n\nexport function taskDebounce(fn) {\n  let scheduled = false;\n  return () => {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nconst supportsMicroTasks = isBrowser && window.Promise\n\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nexport default (supportsMicroTasks\n  ? microtaskDebounce\n  : taskDebounce);\n","/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nexport default function isFunction(functionToCheck) {\n  const getType = {};\n  return (\n    functionToCheck &&\n    getType.toString.call(functionToCheck) === '[object Function]'\n  );\n}\n","/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nexport default function getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  const window = element.ownerDocument.defaultView;\n  const css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n","/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nexport default function getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nexport default function getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n","import isBrowser from './isBrowser';\n\nconst isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nconst isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nexport default function isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nexport default function getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  const noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  let offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  const nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\n  ) {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n","import getOffsetParent from './getOffsetParent';\n\nexport default function isOffsetContainer(element) {\n  const { nodeName } = element;\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return (\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\n  );\n}\n","/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nexport default function getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n","import isOffsetContainer from './isOffsetContainer';\nimport getRoot from './getRoot';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nexport default function findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const { commonAncestorContainer } = range;\n\n  // Both nodes are inside #document\n  if (\n    (element1 !== commonAncestorContainer &&\n      element2 !== commonAncestorContainer) ||\n    start.contains(end)\n  ) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n","/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nexport default function getScroll(element, side = 'top') {\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  const nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    const html = element.ownerDocument.documentElement;\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n","import getScroll from './getScroll';\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nexport default function includeScroll(rect, element, subtract = false) {\n  const scrollTop = getScroll(element, 'top');\n  const scrollLeft = getScroll(element, 'left');\n  const modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n","/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nexport default function getBordersSize(styles, axis) {\n  const sideA = axis === 'x' ? 'Left' : 'Top';\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return (\n    parseFloat(styles[`border${sideA}Width`], 10) +\n    parseFloat(styles[`border${sideB}Width`], 10)\n  );\n}\n","import isIE from './isIE';\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(\n    body[`offset${axis}`],\n    body[`scroll${axis}`],\n    html[`client${axis}`],\n    html[`offset${axis}`],\n    html[`scroll${axis}`],\n    isIE(10)\n      ? (parseInt(html[`offset${axis}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Top' : 'Left'}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Bottom' : 'Right'}`]))\n    : 0 \n  );\n}\n\nexport default function getWindowSizes(document) {\n  const body = document.body;\n  const html = document.documentElement;\n  const computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle),\n  };\n}\n","/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nexport default function getClientRect(offsets) {\n  return {\n    ...offsets,\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height,\n  };\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getBordersSize from './getBordersSize';\nimport getWindowSizes from './getWindowSizes';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\nimport isIE from './isIE';\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nexport default function getBoundingClientRect(element) {\n  let rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      const scrollTop = getScroll(element, 'top');\n      const scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    }\n    else {\n      rect = element.getBoundingClientRect();\n    }\n  }\n  catch(e){}\n\n  const result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top,\n  };\n\n  // subtract scrollbar size from sizes\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  const width =\n    sizes.width || element.clientWidth || result.right - result.left;\n  const height =\n    sizes.height || element.clientHeight || result.bottom - result.top;\n\n  let horizScrollbar = element.offsetWidth - width;\n  let vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    const styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport includeScroll from './includeScroll';\nimport getScrollParent from './getScrollParent';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport runIsIE from './isIE';\nimport getClientRect from './getClientRect';\n\nexport default function getOffsetRectRelativeToArbitraryNode(children, parent, fixedPosition = false) {\n  const isIE10 = runIsIE(10);\n  const isHTML = parent.nodeName === 'HTML';\n  const childrenRect = getBoundingClientRect(children);\n  const parentRect = getBoundingClientRect(parent);\n  const scrollParent = getScrollParent(children);\n\n  const styles = getStyleComputedProperty(parent);\n  const borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if(fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  let offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height,\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    const marginTop = parseFloat(styles.marginTop, 10);\n    const marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (\n    isIE10 && !fixedPosition\n      ? parent.contains(scrollParent)\n      : parent === scrollParent && scrollParent.nodeName !== 'BODY'\n  ) {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n","import getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\n\nexport default function getViewportOffsetRectRelativeToArtbitraryNode(element, excludeScroll = false) {\n  const html = element.ownerDocument.documentElement;\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  const offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width,\n    height,\n  };\n\n  return getClientRect(offset);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nexport default function isFixed(element) {\n  const nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  const parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nexport default function getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n   if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  let el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n\n}\n","import getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getViewportOffsetRectRelativeToArtbitraryNode from './getViewportOffsetRectRelativeToArtbitraryNode';\nimport getWindowSizes from './getWindowSizes';\nimport isFixed from './isFixed';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nexport default function getBoundaries(\n  popper,\n  reference,\n  padding,\n  boundariesElement,\n  fixedPosition = false\n) {\n  // NOTE: 1 DOM access here\n\n  let boundaries = { top: 0, left: 0 };\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport' ) {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  }\n\n  else {\n    // Handle other cases based on DOM element used as boundaries\n    let boundariesNode;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    const offsets = getOffsetRectRelativeToArbitraryNode(\n      boundariesNode,\n      offsetParent,\n      fixedPosition\n    );\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      const { height, width } = getWindowSizes(popper.ownerDocument);\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  const isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0; \n  boundaries.top += isPaddingNumber ? padding : padding.top || 0; \n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0; \n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0; \n\n  return boundaries;\n}\n","import getBoundaries from '../utils/getBoundaries';\n\nfunction getArea({ width, height }) {\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeAutoPlacement(\n  placement,\n  refRect,\n  popper,\n  reference,\n  boundariesElement,\n  padding = 0\n) {\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  const boundaries = getBoundaries(\n    popper,\n    reference,\n    padding,\n    boundariesElement\n  );\n\n  const rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top,\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height,\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom,\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height,\n    },\n  };\n\n  const sortedAreas = Object.keys(rects)\n    .map(key => ({\n      key,\n      ...rects[key],\n      area: getArea(rects[key]),\n    }))\n    .sort((a, b) => b.area - a.area);\n\n  const filteredAreas = sortedAreas.filter(\n    ({ width, height }) =>\n      width >= popper.clientWidth && height >= popper.clientHeight\n  );\n\n  const computedPlacement = filteredAreas.length > 0\n    ? filteredAreas[0].key\n    : sortedAreas[0].key;\n\n  const variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? `-${variation}` : '');\n}\n","import findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nexport default function getReferenceOffsets(state, popper, reference, fixedPosition = null) {\n  const commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n","/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nexport default function getOuterSizes(element) {\n  const window = element.ownerDocument.defaultView;\n  const styles = window.getComputedStyle(element);\n  const x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  const y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  const result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x,\n  };\n  return result;\n}\n","/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nexport default function getOppositePlacement(placement) {\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched]);\n}\n","import getOuterSizes from './getOuterSizes';\nimport getOppositePlacement from './getOppositePlacement';\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nexport default function getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  const popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  const popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height,\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  const mainSide = isHoriz ? 'top' : 'left';\n  const secondarySide = isHoriz ? 'left' : 'top';\n  const measurement = isHoriz ? 'height' : 'width';\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] =\n    referenceOffsets[mainSide] +\n    referenceOffsets[measurement] / 2 -\n    popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] =\n      referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] =\n      referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n","/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n","import find from './find';\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(cur => cur[prop] === value);\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  const match = find(arr, obj => obj[prop] === value);\n  return arr.indexOf(match);\n}\n","import isFunction from './isFunction';\nimport findIndex from './findIndex';\nimport getClientRect from '../utils/getClientRect';\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nexport default function runModifiers(modifiers, data, ends) {\n  const modifiersToRun = ends === undefined\n    ? modifiers\n    : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(modifier => {\n    if (modifier['function']) { // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    const fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n","import computeAutoPlacement from '../utils/computeAutoPlacement';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nexport default function update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  let data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {},\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(\n    this.state,\n    this.popper,\n    this.reference,\n    this.options.positionFixed\n  );\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(\n    this.options.placement,\n    data.offsets.reference,\n    this.popper,\n    this.reference,\n    this.options.modifiers.flip.boundariesElement,\n    this.options.modifiers.flip.padding\n  );\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(\n    this.popper,\n    data.offsets.reference,\n    data.placement\n  );\n\n  data.offsets.popper.position = this.options.positionFixed\n    ? 'fixed'\n    : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n","/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nexport default function isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(\n    ({ name, enabled }) => enabled && name === modifierName\n  );\n}\n","/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nexport default function getSupportedPropertyName(property) {\n  const prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  const upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefix = prefixes[i];\n    const toCheck = prefix ? `${prefix}${upperProp}` : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n","import isModifierEnabled from '../utils/isModifierEnabled';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nexport default function destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n","/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nexport default function getWindow(element) {\n  const ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","import getScrollParent from './getScrollParent';\nimport getWindow from './getWindow';\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(\n      getScrollParent(target.parentNode),\n      event,\n      callback,\n      scrollParents\n    );\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function setupEventListeners(\n  reference,\n  options,\n  state,\n  updateBound\n) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  const scrollElement = getScrollParent(reference);\n  attachToScrollParents(\n    scrollElement,\n    'scroll',\n    state.updateBound,\n    state.scrollParents\n  );\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n","import setupEventListeners from '../utils/setupEventListeners';\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nexport default function enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(\n      this.reference,\n      this.options,\n      this.state,\n      this.scheduleUpdate\n    );\n  }\n}\n","import getWindow from './getWindow';\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(target => {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n","import removeEventListeners from '../utils/removeEventListeners';\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nexport default function disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n","/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nexport default function isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n","import isNumeric from './isNumeric';\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setStyles(element, styles) {\n  Object.keys(styles).forEach(prop => {\n    let unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (\n      ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !==\n        -1 &&\n      isNumeric(styles[prop])\n    ) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n","/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function(prop) {\n    const value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n","import setStyles from '../utils/setStyles';\nimport setAttributes from '../utils/setAttributes';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport computeAutoPlacement from '../utils/computeAutoPlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nexport default function applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nexport function applyStyleOnLoad(\n  reference,\n  popper,\n  options,\n  modifierOptions,\n  state\n) {\n  // compute reference element offsets\n  const referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  const placement = computeAutoPlacement(\n    options.placement,\n    referenceOffsets,\n    popper,\n    reference,\n    options.modifiers.flip.boundariesElement,\n    options.modifiers.flip.padding\n  );\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n","/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nexport default function getRoundedOffsets(data, shouldRound) {\n  const { popper, reference } = data.offsets;\n  const { round, floor } = Math;\n  const noRound = v => v;\n  \n  const referenceWidth = round(reference.width);\n  const popperWidth = round(popper.width);\n  \n  const isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  const isVariation = data.placement.indexOf('-') !== -1;\n  const sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  const bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  const horizontalToInteger = !shouldRound\n    ? noRound\n    : isVertical || isVariation || sameWidthParity\n    ? round\n    : floor;\n  const verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(\n      bothOddWidth && !isVariation && shouldRound\n        ? popper.left - 1\n        : popper.left\n    ),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right),\n  };\n}\n","import getSupportedPropertyName from '../utils/getSupportedPropertyName';\nimport find from '../utils/find';\nimport getOffsetParent from '../utils/getOffsetParent';\nimport getBoundingClientRect from '../utils/getBoundingClientRect';\nimport getRoundedOffsets from '../utils/getRoundedOffsets';\nimport isBrowser from '../utils/isBrowser';\n\nconst isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeStyle(data, options) {\n  const { x, y } = options;\n  const { popper } = data.offsets;\n\n  // Remove this legacy support in Popper.js v2\n  const legacyGpuAccelerationOption = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'applyStyle'\n  ).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn(\n      'WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'\n    );\n  }\n  const gpuAcceleration =\n    legacyGpuAccelerationOption !== undefined\n      ? legacyGpuAccelerationOption\n      : options.gpuAcceleration;\n\n  const offsetParent = getOffsetParent(data.instance.popper);\n  const offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  const styles = {\n    position: popper.position,\n  };\n\n  const offsets = getRoundedOffsets(\n    data,\n    window.devicePixelRatio < 2 || !isFirefox\n  );\n\n  const sideA = x === 'bottom' ? 'top' : 'bottom';\n  const sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  const prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  let left, top;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = `translate3d(${left}px, ${top}px, 0)`;\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    const invertTop = sideA === 'bottom' ? -1 : 1;\n    const invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = `${sideA}, ${sideB}`;\n  }\n\n  // Attributes\n  const attributes = {\n    'x-placement': data.placement,\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = { ...attributes, ...data.attributes };\n  data.styles = { ...styles, ...data.styles };\n  data.arrowStyles = { ...data.offsets.arrow, ...data.arrowStyles };\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nexport default function isModifierRequired(\n  modifiers,\n  requestingName,\n  requestedName\n) {\n  const requesting = find(modifiers, ({ name }) => name === requestingName);\n\n  const isRequired =\n    !!requesting &&\n    modifiers.some(modifier => {\n      return (\n        modifier.name === requestedName &&\n        modifier.enabled &&\n        modifier.order < requesting.order\n      );\n    });\n\n  if (!isRequired) {\n    const requesting = `\\`${requestingName}\\``;\n    const requested = `\\`${requestedName}\\``;\n    console.warn(\n      `${requested} modifier is required by ${requesting} modifier in order to work, be sure to include it before ${requesting}!`\n    );\n  }\n  return isRequired;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOuterSizes from '../utils/getOuterSizes';\nimport isModifierRequired from '../utils/isModifierRequired';\nimport getStyleComputedProperty from '../utils/getStyleComputedProperty';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  let arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn(\n        'WARNING: `arrow.element` must be child of its popper element!'\n      );\n      return data;\n    }\n  }\n\n  const placement = data.placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  const len = isVertical ? 'height' : 'width';\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\n  const side = sideCapitalized.toLowerCase();\n  const altSide = isVertical ? 'left' : 'top';\n  const opSide = isVertical ? 'bottom' : 'right';\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -=\n      popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] +=\n      reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  const center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  const css = getStyleComputedProperty(data.instance.popper);\n  const popperMarginSide = parseFloat(css[`margin${sideCapitalized}`], 10);\n  const popperBorderSide = parseFloat(css[`border${sideCapitalized}Width`], 10);\n  let sideValue =\n    center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {\n    [side]: Math.round(sideValue),\n    [altSide]: '', // make sure to unset any eventual altSide value from the DOM node\n  };\n\n  return data;\n}\n","/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nexport default function getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n","/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nexport default [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n","import placements from '../methods/placements';\n\n// Get rid of `auto` `auto-start` and `auto-end`\nconst validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nexport default function clockwise(placement, counter = false) {\n  const index = validPlacements.indexOf(placement);\n  const arr = validPlacements\n    .slice(index + 1)\n    .concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n","import getOppositePlacement from '../utils/getOppositePlacement';\nimport getOppositeVariation from '../utils/getOppositeVariation';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\nimport getBoundaries from '../utils/getBoundaries';\nimport isModifierEnabled from '../utils/isModifierEnabled';\nimport clockwise from '../utils/clockwise';\n\nconst BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise',\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    options.boundariesElement,\n    data.positionFixed\n  );\n\n  let placement = data.placement.split('-')[0];\n  let placementOpposite = getOppositePlacement(placement);\n  let variation = data.placement.split('-')[1] || '';\n\n  let flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach((step, index) => {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    const popperOffsets = data.offsets.popper;\n    const refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    const floor = Math.floor;\n    const overlapsRef =\n      (placement === 'left' &&\n        floor(popperOffsets.right) > floor(refOffsets.left)) ||\n      (placement === 'right' &&\n        floor(popperOffsets.left) < floor(refOffsets.right)) ||\n      (placement === 'top' &&\n        floor(popperOffsets.bottom) > floor(refOffsets.top)) ||\n      (placement === 'bottom' &&\n        floor(popperOffsets.top) < floor(refOffsets.bottom));\n\n    const overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    const overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    const overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    const overflowsBottom =\n      floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    const overflowsBoundaries =\n      (placement === 'left' && overflowsLeft) ||\n      (placement === 'right' && overflowsRight) ||\n      (placement === 'top' && overflowsTop) ||\n      (placement === 'bottom' && overflowsBottom);\n\n    // flip the variation if required\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    const flippedVariationByRef =\n      !!options.flipVariations &&\n      ((isVertical && variation === 'start' && overflowsLeft) ||\n        (isVertical && variation === 'end' && overflowsRight) ||\n        (!isVertical && variation === 'start' && overflowsTop) ||\n        (!isVertical && variation === 'end' && overflowsBottom));\n\n    // flips variation if popper content overflows boundaries\n    const flippedVariationByContent =\n      !!options.flipVariationsByContent &&\n      ((isVertical && variation === 'start' && overflowsRight) ||\n        (isVertical && variation === 'end' && overflowsLeft) ||\n        (!isVertical && variation === 'start' && overflowsBottom) ||\n        (!isVertical && variation === 'end' && overflowsTop));\n\n    const flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = {\n        ...data.offsets.popper,\n        ...getPopperOffsets(\n          data.instance.popper,\n          data.offsets.reference,\n          data.placement\n        ),\n      };\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function keepTogether(data) {\n  const { popper, reference } = data.offsets;\n  const placement = data.placement.split('-')[0];\n  const floor = Math.floor;\n  const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  const side = isVertical ? 'right' : 'bottom';\n  const opSide = isVertical ? 'left' : 'top';\n  const measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] =\n      floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n","import isNumeric from '../utils/isNumeric';\nimport getClientRect from '../utils/getClientRect';\nimport find from '../utils/find';\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nexport function toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  const split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  const value = +split[1];\n  const unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    let element;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    const rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    let size;\n    if (unit === 'vh') {\n      size = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      );\n    } else {\n      size = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      );\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nexport function parseOffset(\n  offset,\n  popperOffsets,\n  referenceOffsets,\n  basePlacement\n) {\n  const offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  const useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  const fragments = offset.split(/(\\+|\\-)/).map(frag => frag.trim());\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  const divider = fragments.indexOf(\n    find(fragments, frag => frag.search(/,|\\s/) !== -1)\n  );\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn(\n      'Offsets separated by white space(s) are deprecated, use a comma (,) instead.'\n    );\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  const splitRegex = /\\s*,\\s*|\\s+/;\n  let ops = divider !== -1\n    ? [\n        fragments\n          .slice(0, divider)\n          .concat([fragments[divider].split(splitRegex)[0]]),\n        [fragments[divider].split(splitRegex)[1]].concat(\n          fragments.slice(divider + 1)\n        ),\n      ]\n    : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map((op, index) => {\n    // Most of the units rely on the orientation of the popper\n    const measurement = (index === 1 ? !useHeight : useHeight)\n      ? 'height'\n      : 'width';\n    let mergeWithPrevious = false;\n    return (\n      op\n        // This aggregates any `+` or `-` sign that aren't considered operators\n        // e.g.: 10 + +5 => [10, +, +5]\n        .reduce((a, b) => {\n          if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n            a[a.length - 1] = b;\n            mergeWithPrevious = true;\n            return a;\n          } else if (mergeWithPrevious) {\n            a[a.length - 1] += b;\n            mergeWithPrevious = false;\n            return a;\n          } else {\n            return a.concat(b);\n          }\n        }, [])\n        // Here we convert the string values into number values (in px)\n        .map(str => toValue(str, measurement, popperOffsets, referenceOffsets))\n    );\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach((op, index) => {\n    op.forEach((frag, index2) => {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nexport default function offset(data, { offset }) {\n  const { placement, offsets: { popper, reference } } = data;\n  const basePlacement = placement.split('-')[0];\n\n  let offsets;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n","import getOffsetParent from '../utils/getOffsetParent';\nimport getBoundaries from '../utils/getBoundaries';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function preventOverflow(data, options) {\n  let boundariesElement =\n    options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  const transformProp = getSupportedPropertyName('transform');\n  const popperStyles = data.instance.popper.style; // assignment to help minification\n  const { top, left, [transformProp]: transform } = popperStyles;\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    boundariesElement,\n    data.positionFixed\n  );\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  const order = options.priority;\n  let popper = data.offsets.popper;\n\n  const check = {\n    primary(placement) {\n      let value = popper[placement];\n      if (\n        popper[placement] < boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return { [placement]: value };\n    },\n    secondary(placement) {\n      const mainSide = placement === 'right' ? 'left' : 'top';\n      let value = popper[mainSide];\n      if (\n        popper[placement] > boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.min(\n          popper[mainSide],\n          boundaries[placement] -\n            (placement === 'right' ? popper.width : popper.height)\n        );\n      }\n      return { [mainSide]: value };\n    },\n  };\n\n  order.forEach(placement => {\n    const side =\n      ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = { ...popper, ...check[side](placement) };\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function shift(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    const { reference, popper } = data.offsets;\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    const side = isVertical ? 'left' : 'top';\n    const measurement = isVertical ? 'width' : 'height';\n\n    const shiftOffsets = {\n      start: { [side]: reference[side] },\n      end: {\n        [side]: reference[side] + reference[measurement] - popper[measurement],\n      },\n    };\n\n    data.offsets.popper = { ...popper, ...shiftOffsets[shiftvariation] };\n  }\n\n  return data;\n}\n","import isModifierRequired from '../utils/isModifierRequired';\nimport find from '../utils/find';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  const refRect = data.offsets.reference;\n  const bound = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'preventOverflow'\n  ).boundaries;\n\n  if (\n    refRect.bottom < bound.top ||\n    refRect.left > bound.right ||\n    refRect.top > bound.bottom ||\n    refRect.right < bound.left\n  ) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOppositePlacement from '../utils/getOppositePlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function inner(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  const subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] =\n    reference[basePlacement] -\n    (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n","import applyStyle, { applyStyleOnLoad } from './applyStyle';\nimport computeStyle from './computeStyle';\nimport arrow from './arrow';\nimport flip from './flip';\nimport keepTogether from './keepTogether';\nimport offset from './offset';\nimport preventOverflow from './preventOverflow';\nimport shift from './shift';\nimport hide from './hide';\nimport inner from './inner';\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nexport default {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift,\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0,\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent',\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether,\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]',\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false,\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner,\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide,\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right',\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined,\n  },\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n","import modifiers from '../modifiers/index';\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nexport default {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: () => {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: () => {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers,\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n","// Utils\nimport debounce from './utils/debounce';\nimport isFunction from './utils/isFunction';\n\n// Methods\nimport update from './methods/update';\nimport destroy from './methods/destroy';\nimport enableEventListeners from './methods/enableEventListeners';\nimport disableEventListeners from './methods/disableEventListeners';\nimport Defaults from './methods/defaults';\nimport placements from './methods/placements';\n\nexport default class Popper {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  constructor(reference, popper, options = {}) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = { ...Popper.Defaults, ...options };\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: [],\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys({\n      ...Popper.Defaults.modifiers,\n      ...options.modifiers,\n    }).forEach(name => {\n      this.options.modifiers[name] = {\n        // If it's a built-in modifier, use it as base\n        ...(Popper.Defaults.modifiers[name] || {}),\n        // If there are custom options, override and merge with default ones\n        ...(options.modifiers ? options.modifiers[name] : {}),\n      };\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers)\n      .map(name => ({\n        name,\n        ...this.options.modifiers[name],\n      }))\n      // sort the modifiers by order\n      .sort((a, b) => a.order - b.order);\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(modifierOptions => {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(\n          this.reference,\n          this.popper,\n          this.options,\n          modifierOptions,\n          this.state\n        );\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    const eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n  update() {\n    return update.call(this);\n  }\n  destroy() {\n    return destroy.call(this);\n  }\n  enableEventListeners() {\n    return enableEventListeners.call(this);\n  }\n  disableEventListeners() {\n    return disableEventListeners.call(this);\n  }\n\n  /**\n   * Schedules an update. It will run on the next UI update available.\n   * @method scheduleUpdate\n   * @memberof Popper\n   */\n  scheduleUpdate = () => requestAnimationFrame(this.update);\n\n  /**\n   * Collection of utilities useful when writing custom modifiers.\n   * Starting from version 1.7, this method is available only if you\n   * include `popper-utils.js` before `popper.js`.\n   *\n   * **DEPRECATION**: This way to access PopperUtils is deprecated\n   * and will be removed in v2! Use the PopperUtils module directly instead.\n   * Due to the high instability of the methods contained in Utils, we can't\n   * guarantee them to follow semver. Use them at your own risk!\n   * @static\n   * @private\n   * @type {Object}\n   * @deprecated since version 1.8\n   * @member Utils\n   * @memberof Popper\n   */\n  static Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\n\n  static placements = placements;\n\n  static Defaults = Defaults;\n}\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n","/*\n\tPopover\n*/\nimport Popper from 'popper.js'\nimport device from '../../util/device'\n\nconst styles = require('./style.less')\n\nexport const DefaultOpts = {\n\talign: 'bottom',\n\tclassName: '',\n\tclickToggles: true,\n\tcloseOnHide: true,\n\tmaxHeight: 'auto',\n\tmaxHeightThreshold: 400,\n\tmaxWidth: '',\n\twidth: '',\n\tflip: true,\n\toverflowBoundry: 'scrollParent',\n\tonClose: ()=>{},\n\tonKeydown: e=>{}\n}\n\nconst OpenPopovers = []\nlet WatchingClicks = false\nlet WatchingKeyboard = false\n\nconst WatchClicks = function(e){\n\t\t\n\tlet found = false\n\tlet close = []\n\tlet target = e.path ? e.path.find(el=>el.popover) : e.target\n\n\t// the clicked target already has a popover and has the \"toggle\" setting, so close the current popover\n\tif( target && target.popover && target.popover.view != target && target.popover.opts.clickToggles ){\n\t\ttarget.popover._close()\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\treturn false\n\t}\n\t\n\t// close all popovers not part (nested) within the clicked target\n\tOpenPopovers.slice(0).reverse().forEach(dd=>{\n\t\tif( !found && !dd.contains(target) ){\n\t\t\tclose.push(dd)\n\t\t\t\n\t\t// as soon as one of the popovers is nested, all others that follow will be nested, no reason to continue testing\n\t\t}else{\n\t\t\tfound = true\n\t\t}\n\t})\n\t\n\tclose.forEach(dd=>dd._close())\n}\n\nconst WatchKeyboard = function(e){\n\tlet popover = OpenPopovers.slice(0).pop()\n\tpopover._onKeydown(e)\n}\n\nexport default class Popover {\n\t\n\tconstructor(target, view, opts={}){\n\t\t\n\t\topts = Object.assign({}, DefaultOpts, opts)\n\t\t\n\t\tif( !WatchingClicks ){\n\t\t\tWatchingClicks = true\n\t\t\twindow.addEventListener(device.isMobile?'touchend':'mousedown', WatchClicks, !device.isMobile)\n\t\t}\n\t\t\n\t\tif( !WatchingKeyboard ){\n\t\t\tWatchingKeyboard = true\n\t\t\twindow.addEventListener('keydown', WatchKeyboard, !device.isMobile)\n\t\t}\n\t\t\n\t\tif( typeof view == 'string' ){\n\n\t\t\tif( customElements.get(view) ){\n\t\t\t\tview = document.createElement(view)\n\t\t\t}else{\n\t\t\t\tlet _view = document.createElement('div')\n\t\t\t\t_view.classList.add('tooltip')\n\t\t\t\t_view.innerHTML = view\n\t\t\t\tview = _view\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( window.Backbone && view instanceof window.Backbone.View )\n\t\t\tview = view.el\n\n\t\tthis.opts = opts\n\t\tthis.view = view\n\t\t\n\t\tthis.view.classList.add('__view')\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('popover')\n\t\tthis.el.innerHTML = '<span class=\"__arrow\" x-arrow><span class=\"__arrow\" x-arrow></span></span>'\n\t\tthis.el.appendChild(view)\n\t\tdocument.body.append(this.el)\n\t\t\n\t\tif( this.opts.className ){\n\t\t\tthis.opts.className.split(' ').forEach(className=>this.el.classList.add(className));\n\t\t}\n\t\t\n\t\tthis.el.popover = this\n\t\tthis.view.popover = this\n\t\t\n\t\tthis.positionOver(target)\n\t\t\n\t\t// watch for the view to add elements so we can adjust position\n\t\tthis.mutationObserver = new MutationObserver(this.viewMutated.bind(this));\n\t\tthis.mutationObserver.observe(this.view, { attributes: true, childList: true, subtree: false });\n\t\t\n\t\t// keep track of open popovers so we can remove them later\n\t\tOpenPopovers.push(this)\n\t}\n\n\tpositionOver(target){\n\n\t\tthis.clearTarget()\n\t\tlet opts = this.opts\n\n\t\tif( !target ) return\n\n\t\tif( target instanceof MouseEvent || target instanceof KeyboardEvent ){\n\t\t\ttarget = this.createInvisiblePlaceholderTarget(target)\n\t\t}\n\n\t\tthis.target = target\n\t\tthis.target.popover = this\n\n\t\tif( this.target._popoverTarget )\n\t\t\tthis.target._popoverTarget.classList.add('popover-open')\n\t\telse\n\t\t\tthis.target.classList.add('popover-open')\n\n\t\tif( !this.popper ){\n\n\t\t\t// set position of the popover using Popper\n\t\t\tthis.popper = new Popper(target, this.el, {\n\t\t\t\tplacement: opts.align,\n\t\t\t\tremoveOnDestroy: true,\n\t\t\t\tonCreate: this._onPositionCreate.bind(this),\n\t\t\t\tonUpdate: this._onPositionUpdate.bind(this),\n\t\t\t\tmodifiers: {\n\t\t\t\t\tinner: {\n\t\t\t\t\t\tenabled: opts.inner || false\n\t\t\t\t\t},\n\t\t\t\t\toffset: {\n\t\t\t\t\t\tenabled: opts.offset?true:false,\n\t\t\t\t\t\toffset: opts.offset\n\t\t\t\t\t},\n\t\t\t\t\tflip: {\n\t\t\t\t\t\tenabled: opts.flip\n\t\t\t\t\t},\n\t\t\t\t\tpreventOverflow: {\n\t\t\t\t\t\tenabled: opts.preventDefault !== undefined ? opts.preventDefault : true, // FIXME: confusing naming and not sure it works\n\t\t\t\t\t\tboundariesElement: opts.overflowBoundry || 'scrollParent',\n\t\t\t\t\t\t// priority: []\n\t\t\t\t\t\tpriority: ['top', 'bottom'].includes(opts.align) ? ['left', 'right'] : ['top', 'bottom']\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tthis.popper.reference = target\n\t\t\tthis.popper.update()\n\t\t}\n\t}\n\n\tcreateInvisiblePlaceholderTarget(e){\n\t\tlet target = document.createElement('div')\n\t\ttarget._popoverTarget = e._popoverTarget = (e._popoverTarget || e.currentTarget)\n\t\ttarget.classList.add('popover-invisible-placeholder')\n\t\ttarget.style.position = 'absolute'\n\t\t\n\t\tif( e instanceof MouseEvent ){\n\t\t\ttarget.style.left = e.clientX+'px'\n\t\t\ttarget.style.top = e.clientY+'px'\n\n\t\t}else if( e instanceof KeyboardEvent ){\n\t\t\t// https://stackoverflow.com/a/16210994/484780\n\t\t\tlet root = e.target.getRootNode() // shadowRoot or window\n\t\t\tlet range = root.getSelection().getRangeAt(0)\n\t\t\tlet rect = range.getBoundingClientRect()\n\n\t\t\ttarget.style.left = rect.x+'px'\n\t\t\ttarget.style.top = rect.y+'px'\n\t\t\ttarget.style.height = rect.height+'px'\n\t\t}\n\n\t\tdocument.body.appendChild(target)\n\t\treturn target\n\t}\n\t\n\tcontains(target){\n\t\tif( !target ) return false\n\t\tif( this.el.contains(target) )\n\t\t\treturn true\n\t\t\n\t\t// let parentPopover = this.parentPopover\n\t\t// if( parentPopover && parentPopover.contains(target) )\n\t\t// \treturn true\n\t\t\n\t\tlet targetParent = target.parentElement && target.parentElement.popover\n\t\tif( targetParent && this.el.contains(targetParent.target) )\n\t\t\treturn true\n\t\t\t\n\t\treturn false\n\t}\n\t\n\tget parentPopover(){\n\t\tlet parentPopover = false\n\t\tlet parent = this.target\n\t\twhile(parent && !parentPopover){\n\t\t\tparent = parent.parentElement\n\t\t\tif( parent && parent.popover )\n\t\t\t\tparentPopover = parent\n\t\t}\n\t\treturn parentPopover\n\t}\n\t\n\tget isNested(){\n\t\treturn !!this.parentPopover\n\t}\n\t\n\tviewMutated(mutationsList, observer){\n\t\tthis._updatePosition()\n\t}\n\n\tclearTarget(){\n\t\tif( !this.target ) return\n\n\t\tthis.target.popover = null\n\n\t\tif( this.target._popoverTarget ){\n\t\t\tthis.target._popoverTarget.classList.remove('popover-open')\n\t\t\tthis.target.remove()\n\t\t}else\n\t\t\tthis.target.classList.remove('popover-open')\n\t}\n\t\n\tclose(){\n\t\t\n\t\tif( !this.target.popover ) return;\n\t\t\n\t\tthis.el.popover = null\n\t\tthis.view.popover = null\n\n\t\tthis.mutationObserver.disconnect()\n\t\tthis.popper.destroy()\n\n\t\tthis.clearTarget()\n\t\t\n\t\t// remove this from the list of open popovers as well as all popovers after it\n\t\tvar indx = OpenPopovers.indexOf(this)\n\t    if( indx > -1){\n\t        OpenPopovers.splice(indx).forEach((dd,i)=>{\n\t\t\t\tif( i > 0 ) dd._close() // close all popovers nested inside of this one\n\t\t\t})\n\t\t}\n\t\t\n\t\t// no more popovers, remove event listners\n\t\tif( OpenPopovers.length == 0 ){\n\t\t\tWatchingClicks = false\n\t\t\twindow.removeEventListener(device.isMobile?'touchend':'mousedown', WatchClicks, true)\n\t\t\t\n\t\t\tWatchingKeyboard = false\n\t\t\twindow.removeEventListener('keydown', WatchKeyboard, !device.isMobile)\n\t\t}\n\t}\n\t\n\t// internal close method that also triggers the onClose callback\n\t_close(){\n\t\tthis.close()\n\t\tthis.opts.onClose&&this.opts.onClose()\n\t}\n\t\n\t_updatePosition(){\n\t\tthis.popper.update()\n\t}\n\t\n\t_onPositionCreate(data){\n\t\tthis._setDimensions(data)\n\t}\n\t\n\t_onPositionUpdate(data){\n\t\tif( data.hide && this.opts.closeOnHide )\n\t\t\tthis._close()\n\t}\n\n\t_setDimensions(data){\n\n\t\tlet arrowH = data.arrowElement.offsetHeight\n\t\tlet top = data.offsets.reference.top\n\t\t// NOTE: bottom of element in relation to top of window\n\t\tlet bottom = data.offsets.reference.bottom\n\n\t\tdata.instance.modifiers.forEach(m=>{\n\t\t\tif( m.name == 'preventOverflow' && m.boundaries ){\n\n\t\t\t\t// TODO: needs improvement when alignmen is not bottom-*\n\t\t\t\tlet h = (window.innerHeight) - bottom - (arrowH*2)\n\n\t\t\t\tif( bottom > window.innerHeight/2 )\n\t\t\t\t\th = top - (arrowH*2)\t\n\n\t\t\t\tthis.maxHeight = h\n\t\t\t\tthis.view.style.width = this.opts.width||this.view.style.width\n\t\t\t\tthis.view.style.maxWidth = this.opts.maxWidth||this.view.style.maxWidth\n\t\t\t}\n\t\t})\n\t}\n\t\n\t_onKeydown(e){\n\t\tif( this.opts.onKeydown )\n\t\t\tthis.opts.onKeydown(e)\n\t}\n\t\n\tset maxHeight(val){\n\t\tif( this.opts.maxHeight != 'auto' )\n\t\t\tthis.view.style.maxHeight = this.opts.maxHeight\n\t\telse if( this.opts.maxHeight !== false )\n\t\t\tthis.view.style.maxHeight = val+'px'\n\t}\n\t\n}","// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n","\nconst config = {\n    APP_TITLE: document.title,\n    PATH_ROOT: location.pathname,\n    PATH_PREFIX: '',\n    clearInvalidPath: true,\n    handleInvalidRoute(state, config){\n        if( config.clearInvalidPath )\n            state.path = config.PATH_ROOT\n    }\n}\n\nexport default config\n\n// normalize path (always begin with prefix and path root)\nexport const normalizePath = path =>{\n    return path ? config.PATH_ROOT+config.PATH_PREFIX+cleansePath(path) : path\n}\n\nexport const cleansePath = path =>{\n    return path.replace(new RegExp(`^(${config.PATH_ROOT})?(${config.PATH_PREFIX})?`), '')\n}\n\n","import UrlPattern from 'url-pattern' // https://github.com/snd/url-pattern \nimport {normalizePath} from './config'\n\nexport default class Route {\n    \n    constructor(path, onChange){\n        \n        path = normalizePath(path)\n        this.path = path\n        this.patt = new UrlPattern(path)\n\n        this.onChange = onChange\n    }\n\n    get params(){\n        return this.state ? this.state.params : {}\n    }\n\n    get rootPath(){\n        return this.patt.ast[0].value\n    }\n\n    get isCurrent(){\n        return this.state&&this.state.isCurrent\n    }\n\n    makePath(params){\n        return this.patt.stringify(params)\n    }\n\n    update(props){\n        this.state&&this.state.isCurrent&&this.state.update(props)\n    }\n\n    matches(state){\n\n        // array of states, get the last matched state in the list\n        if( Array.isArray(state) ){\n            let matchedState = null\n            for(let i in state){\n                if( this.matches(state[i]) )\n                    matchedState = state[i]\n            }\n            return matchedState\n        }\n\n        let params = state ? this.patt.match(state.path?state.path:state) : false\n        if( params ){\n            this.state = state\n            state.params = params\n            return state\n        }\n        return null\n    }\n\n    _change(oldState, newState, dir){\n\n        oldState = this.matches(oldState)\n        newState = this.matches(newState)\n\n        // TODO: change signature to pass newState first\n        if( oldState || newState )\n            this.onChange(oldState, newState, dir)\n\n        return !!newState\n    }\n}","import config, {normalizePath, cleansePath} from './config'\n\nexport default class HistoryState {\n\n    constructor(parent, props={}){\n\n        this.parent = parent\n\n        if( !props.path )\n            props.path = ''\n\n        let [path, query] = props.path.split('?')\n\n        let queryData = {}\n        this.query = new URLSearchParams(query||props.query||'')\n\n        if( query ){\n            this.query.forEach((v, k)=>{\n                queryData[k] = v\n            })\n        }\n        \n        // removing leading slash and #\n        props.path = cleansePath(path)\n\n        this.props = Object.assign({\n            query: queryData,\n            title: config.APP_TITLE\n        }, props)\n    }\n\n    get num(){ return this.props.num }\n\n    get isCurrent() {\n        return !history.state || history.state.num == this.num\n    }\n\n    get isBefore(){\n        return history.state && history.state.num > this.num\n    }\n\n    get isBack(){\n        return this.isBefore()\n    }\n\n    get isAfter(){\n        return !history.state || history.state.num < this.num\n    }\n\n    get isForward(){\n        return this.isAfter()\n    }\n\n    get title(){\n        return this.props.title\n    }\n\n    set title(title){\n        this.update({title:title})\n    }\n\n    set path(path){\n        path = cleansePath(path)\n        this.update({path:path})\n    }\n\n    get path(){\n        return normalizePath(this.props.path)\n    }\n\n    get normalizePath(){\n        let path = this.props.path ? this.path : config.PATH_ROOT+config.PATH_PREFIX\n        // return path\n        let query = this.query.toString()\n        return path+(query?'?'+query:'')\n    }\n\n    push(props={}){\n        this.props = Object.assign(this.props, props)\n        history.pushState(this.props, null, this.normalizePath)\n        this.parent.save()\n\n        if( this.props.title && this.isCurrent )\n            document.title = this.props.title\n    }\n\n    update(props={}){\n\n        // do not let num be updated, this is set when newly created\n        delete props.num\n        \n        this.props = Object.assign(this.props, props)\n        this.parent.save()\n\n        if( !this.isCurrent ) return\n\n        history.replaceState(this.props, null, this.normalizePath)\n            \n        if( this.props.title )\n            document.title = this.props.title\n    }\n\n    toJSON(){\n        return JSON.stringify(this.props)\n    }\n}","\nimport HistoryState from './history-state'\n\nexport default class HistoryStates {\n    constructor(){\n        let storedData = sessionStorage.getItem('history-states')\n        this.states = JSON.parse(storedData||'[]').map(props=>new HistoryState(this, JSON.parse(props)))\n\n        this._current = history.state && history.state.num || -1\n\n        // set initial state data\n        this.add({\n            path: location.pathname+location.hash+location.search\n        })\n    }\n\n    get length(){ return this.states.length }\n\n    get current(){\n        return this.get(this._current)\n    }\n\n    save(){\n        sessionStorage.setItem('history-states', JSON.stringify(this.states))\n    }\n\n    get(num, create=false, props={}){\n        if( !this.states[num] && create ){\n            props.num = num\n            this.states[num] = new HistoryState(this, props)\n        }\n\n        return this.states[num]\n    }\n\n    add(props={}, push=false){\n        \n        let oldNum = this._current\n        let num = history.state && history.state.num\n\n        if( num == undefined || push ){\n            num = ++this._current\n            \n            // remove trailing states as they are no longer valid\n            this.states.splice(num+1).forEach(state=>{\n                state.parent = null\n            })\n        }\n        // else if( push )\n        //     num++\n\n        let state = this.get(num, true, props) // or create\n        \n        if( push )\n            state.push(props)\n        else\n            state.update(props)\n\n        this._current = state.num\n\n        let step = oldNum > this._current ? -1 : 1;\n        \n        let oldStates = []\n        // console.log(oldNum, this._current);\n        while(oldNum != this._current){\n            let oldState = this.get(oldNum)\n            if( oldState )\n                oldStates.push(oldState)\n            oldNum += step\n        }\n\n        // console.log(oldStates);\n\n        return [state, oldStates]\n    }\n}","import Route from './route'\nimport HistoryStates from './history-states'\nimport config, {normalizePath} from './config'\n\nconst ROUTES = []\n\nexport class Router {\n\n    // NOTE: this must be setup before anything uses router.add()\n    config(opts){\n        if( opts.root != undefined ){\n            config.PATH_ROOT = opts.root\n            delete opts.root\n        }\n\n        if( opts.prefix != undefined ){\n            config.PATH_PREFIX = opts.prefix\n            delete opts.prefix\n        }\n\n        if( opts.title != undefined ){\n            config.APP_TITLE = opts.title\n            delete opts.title\n        }\n        \n        for( let key in opts ){\n            config[key] = opts[key]\n        }\n    }\n\n    start(opts={}){\n\n        opts = Object.assign({\n            currentState: null,\n            requireState: false\n        }, opts)\n\n        this.states = new HistoryStates()\n\n        // listen for state changes and change routes accordingly\n        window.addEventListener('popstate', e=>{\n            \n            if( opts.requireState && !e.state ) return // probably a sheetview change, ignore\n\n            let [newState, oldStates] = this.states.add()\n\n            window.dispatchEvent(new CustomEvent('router:popstate', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    path: newState.path,\n                    state: newState,\n                    oldStates: oldStates\n                }\n            }))\n\n            this._changeRoute(oldStates, newState)\n        })\n\n        // trigger initial route\n        this._changeRoute([], this.states.current)\n\n        // update current state if no path\n        if( !this.states.current.path && opts.currentState ){\n            this.states.current.update(opts.currentState)\n        }\n    }\n\n    // pushes new path/state onto stack (does not trigger route change)\n    push(path, props={}){\n\n        if( path instanceof Route )\n            path = path.state ? path.state.props.path : path.rootPath\n\n        props.path = path\n\n        let [newState, oldStates] = this.states.add(props, true)\n        \n        window.dispatchEvent(new CustomEvent('router:push', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                path: newState.path,\n                state: newState,\n                oldStates: oldStates\n            }\n        }))\n\n        return [newState, oldStates]\n    }\n\n    // pushes new path/state and triggers route change\n    goTo(path, props){\n        let [newState, oldStates] = this.push(path, props)\n        this._changeRoute(oldStates, newState)\n    }\n\n    _changeRoute(oldStates, newState){\n\n        let dir = oldStates.length == 0 || oldStates[0].num < newState.num ? 'forward' : 'back'\n\n        let didMatch = false\n        ROUTES.forEach(route=>{\n            if( route._change(oldStates, newState, dir) )\n                didMatch = true\n        })\n\n        // if none of the routes matched, change current state path back to the root\n        if( !didMatch )\n            config.handleInvalidRoute(this.states.current, config)\n    }\n\n    add(path, onChange){\n        let route = new Route(path, onChange)\n        ROUTES.push(route)\n        return route\n    }\n\n    get routes(){\n        return ROUTES.map(route=>route.path)\n    }\n\n    get rootRoutes(){\n        return ROUTES.map(route=>route.rootPath)\n    }\n\n}\n\n// singleton\nexport default new Router()","import {LitElement, html, css} from 'lit-element'\nimport Menu from '../menu'\nimport router from '../../router'\nimport device from '../../util/device'\n\nconst PanelControllers = {}\n\nclass PanelController extends LitElement {\n\n    static for(name){\n\n        // create a root panel controller if there isn't one\n        if( name == 'root' && !PanelControllers[name] ){\n            let rootPanelController = document.createElement('b-panels')\n            rootPanelController.setAttribute('name', 'root')\n            document.body.appendChild(rootPanelController)\n            PanelControllers[name] = rootPanelController\n        }\n\n        return PanelControllers[name]\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            /* z-index: 10; */\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            pointer-events: none;\n        }\n    `}\n\n    get name(){\n        return this.hasAttribute('name') ? this.getAttribute('name') : undefined\n    }\n\n    constructor(){\n        super()\n        this.panels = new Map()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        \n        if( this.name ){\n            if( PanelControllers[this.name] )\n                console.warn('A panel-controller already exists with the name: ', this.name)\n            else\n                PanelControllers[this.name] = this\n        }\n\n        // TODO: support his in Android? make feature opt in?\n        if( this.name == 'root' && device.isiOS ){\n            let overflowScrollAt = 0\n            let topPanel = null\n\n            window.addEventListener('touchend', e=>{\n                if( overflowScrollAt < -40 ){\n                    topPanel&&topPanel.close()\n                    setTimeout(()=>{\n                        if( topPanel ) topPanel.style.top = 0\n                        topPanel = null\n                    },300)\n                }else{\n                    topPanel = null\n                }\n            })\n\n            window.addEventListener('scroll', e=>{\n\n                if( this.panels.size > 0 && !topPanel )\n                    topPanel = this.panelOnTop\n                \n                if( !topPanel || topPanel.opts.disableOverscrollClose === true ) return\n\n                overflowScrollAt = document.scrollingElement.scrollTop\n                \n                if( overflowScrollAt < 0 && topPanel ){\n                    topPanel.style.top = (Math.abs(overflowScrollAt) * 1) + 'px'\n                }\n            })\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.hasAttribute('name') && PanelControllers[this.name] == this )\n            delete PanelControllers[this.name]\n    }\n            \n    render(){return html`        \n        <slot></slot>\n    `}\n\n    remove(panel){\n        this.panels.delete(panel)\n        this._updatePanels()\n    }\n\n    add(panel){\n\n        // let SheetView and Panel work together\n        document.body.setAttribute('ontop', 'panel')\n\n        this.panels.delete(panel)\n        this.panels.set(panel, panel)\n\n        if( !this.contains(panel) )\n            this.append(panel)\n\n        this._updatePanels()\n    }\n\n    get panelOnTop(){\n        let onTop = null\n        this.panels.forEach(panel=>{\n            if( !onTop && panel.hasAttribute('ontop') )\n                onTop = panel\n        })\n        return onTop\n    }\n\n    get panelOnTopWithRoute(){\n        let onTop = null\n        this.panels.forEach(panel=>{\n            if( panel.route )\n                onTop = panel\n        })\n        return onTop\n    }\n\n    _updatePanels(updateRoutes=false){\n        let i = 0\n\n        // if( this.length == 0 && updateRoutes )\n        //     router.push('')\n        // else\n        this.panels.forEach((panel)=>{\n            \n            if( panel.type != 'modal' && panel.type != 'actionsheet' )\n                panel.style.zIndex = 100 + i++\n            \n            let wasOnTop = panel.onTop\n\n            if( i == this.length ){\n                panel.setAttribute('ontop', '')\n\n                if( !wasOnTop && panel.view )\n                    panel.view.didBecomeActive&&panel.view.didBecomeActive()\n\n                // if( updateRoutes && panel.route && !panel.route.isCurrent ){\n                //     console.log(panel.route);\n                //     // router.push(panel.route.path)\n                // }\n\n            }else{\n                panel.removeAttribute('ontop')\n                if( wasOnTop )\n                    setTimeout(()=>{\n                        if( panel.view && panel.view.didBecomeInactive )\n                            panel.view.didBecomeInactive()\n                    })\n            }\n        })\n\n        let hostEl = this.getRootNode()\n        hostEl = hostEl.host || hostEl.body || hostEl\n\n        if( hostEl ){\n            if( this.length == 0 ){\n                hostEl.classList.remove('b-panel-open')\n                hostEl.style.overflow = ''\n            }else{\n                hostEl.classList.add('b-panel-open')\n                hostEl.style.overflow = 'hidden'\n            }\n        }\n    }\n\n    _updateRoute(){\n        let i = 0\n\n        if( this.length == 0 ){\n            \n            // TEMP - improve interoperability with Groundwork\n            if( window.app && app.sv('sheets').sheets.length > 0 )\n                app.sv('sheets').setHash()\n            else\n                router.push('')\n\n            this.dispatchEvent(new CustomEvent('panels-closed', {\n                bubbles: true,\n                composed: true,\n                detail: {controller: this}\n            }))\n        \n        }else\n        this.panels.forEach((panel)=>{\n\n            if( panel.onTop && panel.route && !panel.route.isCurrent ){\n                // console.log(panel.route, panel.route.state.path);\n                router.push(panel.route)\n            }\n        })\n    }\n\n    get length(){\n        return this.panels.size\n    }\n\n    map(fn){\n        let resp = []\n        this.panels.forEach(p=>resp.push(fn(p)))\n        return resp.reverse() // most recent first\n    }\n\n    async quickJump(el){\n        \n        let menu = this.map(panel=>{\n            return {\n                label: panel.title,\n                icon: panel.icon||'window',\n                description: panel.path,\n                panel: panel\n            }\n        })\n\n        menu.shift() // remove first menu as its the open view\n\n        let ts = new Date().getTime()\n\n        // quick jump is already open\n        if( el.popover ){\n\n            // if quick jump triggered within a second, auto switch to the last opened view\n            if( el.quickJumpOpened && ts - el.quickJumpOpened <= 1000 && menu.length > 0){\n                el.popover.close()\n                menu[0].panel.open()\n            }\n            \n            return\n        }\n\n        el.quickJumpOpened = ts\n\n        if( menu.length == 0 )\n            menu.push({text: 'No other views open'})\n\n        menu.unshift({divider: 'Quick Jump Menu'}, 'divider')\n\n        let selected = await new Menu(menu).popover(el, {align: 'bottom-start'})\n\n        if( selected )\n            selected.panel.open()\n    }\n}\n\ncustomElements.define('b-panels', PanelController)\n\nexport default customElements.get('b-panels')","import {LitElement, html, css} from 'lit-element'\n\nclass PanelToolbar extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        look: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.title = ''\n        this.look = ''\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr max-content 1fr;\n            /* background: linear-gradient(to bottom, #fff, #f5f5f5); */\n            padding: .5em;\n            padding: .4em .5em .3em;\n            box-sizing: border-box;\n            justify-content: space-between;\n            align-items: center;\n            border-radius: 4px 4px 0 0;\n            min-height: 40px;\n            grid-column: 1/-1; /* full width */\n        }\n\n        :host([hidden]) { display: none; }\n\n        /* @media (max-width: 699px) {\n            .middle {\n                display: none;\n            }\n\n            :host {\n                grid-template-columns: auto auto;\n            }\n        } */\n\n        :host([overlay]) {\n            background: none;\n            box-shadow: none;\n            position: absolute;\n            z-index: 100;\n            pointer-events: none;\n            top: 0;\n            left: 0;\n            width: 100%;\n        }\n\n        :host([overlay]) > div * {\n            pointer-events: initial;\n        }\n\n        :host([shadow]) {\n            box-shadow: rgba(0,0,0,.2) 0 0 6px;\n        }\n\n        :host([look=\"white\"]) {\n            background: #fff;\n        }\n\n        :host([look=\"silver\"]) {\n            background: linear-gradient(to bottom,#eee,#ddd);\n            border-bottom: solid 1px #bbb;\n        }\n\n        :host([look=\"clear\"]) {\n            background: transparent;\n        }\n\n        :host([look=\"dark\"]) {\n            /* background: #2c3033; */\n            background: linear-gradient(to bottom,#303538,#2c3033);\n            color: #fff;\n        }\n\n        :host([look=\"dark\"]) b-btn[outline] {\n            --color: #ddd\n        }\n\n        slot[name=\"title\"] {\n            font-weight: bold;\n            font-size: 1.1em;\n        }\n\n        :host([notitle]) slot[name=\"title\"] {\n            display: none;\n        }\n\n        .right {\n            text-align: right;\n        }\n\n        @media print {\n            b-btn {\n                display: none; /* assume we dont want buttons to display on print */\n            }\n        }\n\n    `}\n\n    render(){return html`\n        <div class=\"left\">\n            <slot name=\"close-btn\">\n                <b-btn outline icon=\"cancel-1\" title=\"Right+click for quick jump menu\"\n                    @click=${this.close} @contextmenu=${this.quickJump}></b-btn>\n            </slot>\n            <slot name=\"left\"></slot>\n        </div>\n        <div class=\"middle\">\n            <slot name=\"title\">${this.title}</slot>\n            <slot name=\"middle\"></slot>\n        </div>\n        <div class=\"right\">\n            <slot name=\"right\"></slot>\n        </div>\n    `}\n\n    close(){\n        this.panel&&this.panel.close()\n    }\n\n    quickJump(e){\n\n        if( !this.panel || this.panel.opts.quickJump !== true )\n            return\n\n        e.preventDefault();\n        this.panel&&this.panel.panelController&&this.panel.panelController.quickJump(e.target)\n    }\n}\n\ncustomElements.define('b-panel-toolbar', PanelToolbar)\n\nexport default  customElements.get('b-panel-toolbar')","import {LitElement, html, css, unsafeCSS} from 'lit-element'\nimport Controller from './controller'\nimport router from '../../router'\nimport Route from '../../router/route'\nimport device from '../../util/device'\nimport './controller'\nimport './toolbar'\nimport '../../elements/btn'\n\nexport const PanelDefaults = {\n    type: '',\n    closeBtn: false,\n    title: '',\n    width: '100%',\n    height: '100%',\n    anchor: 'right',\n    animation: '',\n    quickJump: true,\n    closeOnEsc: false,\n    controller: null, // root controller will be created and used\n    disableBackdropClick: false,\n    disableOverscrollClose: false\n}\n\nclass RegisteredPanels {\n\n    constructor(){\n        this.register = new Map()\n    }\n\n    set(key, data){\n        return this.register.set(key, data)\n    }\n\n    get(path){\n        return this.register.get(path)\n    }\n\n    add(path, view, opts={}){\n        if( this.get(path) ){\n            return console.warn(`A panel is already registered for ${path}`)\n        }\n\n        this.set(path, {view, opts})\n\n        if( opts.route !== false )\n        this.get(path).route = router.add(path, (oldState, newState, dir)=>{\n            if( this._initiate(path) )\n                this.get(path).panel._routeChange(oldState, newState, dir)\n        })\n    }\n\n    _initiate(path){\n        let registered = this.get(path)\n\n        if( !registered ){\n            console.error(`Panel for ${path} not found`)\n            return false\n        }\n\n        // first time this panel is being requested\n        if( !registered.panel ){\n\n            if( typeof registered.view == 'function' ){\n                registered.panel = new Panel()\n                registered.panel.html = registered.view\n            }\n            else\n                registered.panel = new Panel(registered.view, (registered.opts||{}))\n\n            if( registered.route )\n                registered.panel.route = registered.route\n\n            // copy properties to panel\n            if( registered.opts ){\n                for(let key in registered.opts ){\n                    if( key != 'route' )\n                        registered.panel[key] = registered.opts[key]\n                }\n            }\n        }\n\n        return true\n    }\n\n    open(path){\n        if( !this._initiate(path) ) return\n\n        let registered = this.get(path)\n        \n        if( registered.route )\n            router.goTo(registered.route)\n        else\n            registered.panel.open()\n    }\n    \n}\n\nexport const register = new RegisteredPanels()\n\nexport const Modal = function(view, opts={}){\n    opts = Object.assign({\n        type: 'modal',\n    }, opts)\n\n    if( opts.closeBtn && opts.closeOnEsc === undefined )\n        opts.closeOnEsc = true\n\n    return new Panel(view, opts).open()\n}\n\nexport const ActionSheet = function(view, opts={}){\n    opts = Object.assign({\n        type: 'actionsheet',\n    }, opts)\n\n    if( opts.closeOnEsc === undefined )\n        opts.closeOnEsc = true\n\n    return new Panel(view, opts).open()\n}\n\nexport class Panel extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        width: {type: String},\n        height: {type: String},\n        anchor: {type: String, reflect: true},\n        type: {type: String, reflect: true},\n        animation: {type: String, reflect: true}\n    }}\n\n    static register(path, view, opts){\n        // move register to end of call stack\n        setTimeout(()=>{\n            register.add(path, view, opts)\n        })\n    }\n\n    static open(path){\n        register.open(path)\n    }\n\n    static get animationTime(){ return 300 }\n    \n    constructor(view, opts={}){\n        super()\n\n        let defaultOpts = Object.assign({}, PanelDefaults)\n\n        if( opts.type == 'modal' ){\n            defaultOpts.width = ''\n            defaultOpts.height = ''\n            defaultOpts.anchor = 'center'\n            defaultOpts.animation = 'scale'\n        }\n\n        if( opts.type == 'actionsheet' ){\n            defaultOpts.width = '100%'\n            defaultOpts.height = ''\n            defaultOpts.anchor = 'bottom'\n        }\n\n        opts = Object.assign(defaultOpts, opts)\n\n        this.animation = opts.animation\n        this.type = opts.type\n        this.closeBtn = opts.closeBtn\n        this.title = opts.title\n        this.width = opts.width\n        this.height = opts.height\n        this.anchor = opts.anchor\n        this.panelController = opts.controller\n\n        this.opts = opts\n\n        if( typeof view == 'function' ){\n            this.html = view\n\n        }else if( typeof view == 'string' ){\n            this.view = document.createElement(view)\n\n        }else if( view instanceof HTMLElement ){\n            this.view = view\n        }\n    }\n\n    onKeydown(e){\n        if( !this.onTop ) return\n\n        if( this.opts.closeOnEsc && e.key == 'Escape' )\n            this.close()\n\n        this.opts.onKeydown&&this.opts.onKeydown(e)\n        this.view.onKeydown&&this.view.onKeydown(e)\n    }\n\n    // DEPRECATED: hash changed to path\n    get hash(){ \n        console.warn('Panel: `.hash` is deprecated; use `.path`');\n        this.path\n    }\n\n    get path(){\n        return this.route&&this.route.state.props.path\n    }\n\n    get route(){ return this.__route}\n    set route(route){\n\n        if( this.route ){\n            return console.warn('Panel routes can only be set once')\n        }\n\n        this.__route = route instanceof Route ? route : router.add(route, this._routeChange.bind(this))\n    }\n\n    _routeChange(oldState, newState, dir){\n\n        // console.log(this.title, dir, oldState, newState);\n\n        let detail = {\n            oldState: oldState,\n            newState: newState\n        }\n\n        if( newState ){\n\n            newState.update({title: this.title})\n\n            if( !this.isOpen && dir == 'forward' )\n                newState.update({didEnter: true})\n            \n            this.open()\n            detail.opened = true\n        }\n\n        if( oldState && !newState ){\n\n            if( (oldState.isAfter && oldState.props.didEnter)\n            || (oldState.isBefore && oldState.props.didExit) ){\n                this._close(device.isiOS)\n                detail.closed = true\n            }\n\n            // if( (oldState.isBefore && oldState.props.didEnter)\n            // || (oldState.isAfter && oldState.props.didExit) )\n            //     this.open()\n\n        }\n\n        if( oldState && newState ){\n            \n            // console.log('same view, but new state', newState.params);\n\n            // if( this.view && this.view.onOpen ){\n            //     this.view.onOpen(this.route.state)\n            // }\n        }\n\n        this.dispatchEvent(new CustomEvent('route-changed', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: detail\n\t\t}))\n    }\n\n    render(){return html`\n        <div class=\"backdrop\"></div>\n        <main style=\"${this.width?`width:${this.width};`:''}${this.height?`height:${this.height};`:''}\">\n            <b-btn icon=\"cancel-1\" pill class=\"modal-close-btn\" @click=${this.close} ?hidden=${this.closeBtn!==true}></b-btn>\n            <slot></slot>\n            <div class=\"inlinehtml\">\n                ${this.html}\n            </div>\n        </main>\n    `}\n\n    animate(effect){\n        if( !effect ) return\n        let main = this.shadowRoot.querySelector('main')\n        main.classList.add(effect)\n        setTimeout(function(){\n            main.classList.remove(effect)\n        },1000)\n    }\n\n    bounce(){\n        this.animate('bounce')\n    }\n\n    shake(){\n        this.animate('shake')\n    }\n\n    set html(fn){ this.__html = fn}\n    get html(){ return this.__html ? this.__html.call(this) : ''}\n\n    set view(view){\n        if( this.view ){\n            this.view.panel = null\n            this.view.remove()\n        }\n\n        if( this.toolbar ){\n            this.toolbar.panel = null\n            this.toolbar = null\n        }\n            \n        this.__view = view;\n        \n        if( this.view ){\n\n            // already in the DOM, add a placeholder so we can put this view back after closing\n            if( this.view.offsetParent ){\n                this.__viewOriginalPlacement = document.createElement('span')\n                this.__viewOriginalPlacement.classList.add('panel-view-placeholder')\n                this.__viewOriginalPlacement.style.position = 'absolute'\n                this.view.replaceWith(this.__viewOriginalPlacement)\n            }\n\n            this.view.panel = this\n            this.appendChild(this.view)\n            this._linkToolbar()\n        }\n    }\n    get view(){ return this.__view}\n\n    get isOpen(){ return this.hasAttribute('open')}\n    get onTop(){ return this.hasAttribute('ontop') || (this.type == 'modal' && this.parentElement.lastElementChild == this) }\n\n    firstUpdated(){\n        this._linkToolbar()\n        \n        this.shadowRoot.querySelector('.backdrop').addEventListener('click', e=>{\n            \n            if( this.opts.onBackdropClick && this.opts.onBackdropClick() === false )\n                return\n\n            if( this.opts.disableBackdropClick !== true )\n                this.close()\n        })\n    }\n\n    _linkToolbar(){\n        setTimeout(()=>{\n            \n            if( this.view && this.view.shadowRoot )\n                this.toolbar = this.view.shadowRoot.querySelector('b-panel-toolbar')\n            else\n                this.toolbar = this.shadowRoot.querySelector('b-panel-toolbar') || this.querySelector('b-panel-toolbar')\n            \n            if( this.toolbar ){\n                this.toolbar.panel = this\n                this.toolbar.title = this.title\n            }\n            \n        },0)\n    }\n\n    get panelController(){return this.__panelController}\n    set controller(val){ this.panelController = val }\n    set panelController(val){\n        \n        if( typeof val === 'string' ){\n            let _val = val\n            val = Controller.for(val)\n            if( !val )\n                console.warn('Panel controller `'+_val+'` does not exist, root will be used')\n        }\n\n        this.__panelController = val\n    }\n\n    async open(...args){\n        \n        if( this.route && this.route.state.props.controller )\n            this.controller = this.route.state.props.controller\n\n        // if no controller set, use the root controller\n        if( !this.panelController ){\n            this.panelController = Controller.for('root')\n        }\n\n        if( this.view && this.view.willOpen ){\n            if( await this.view.willOpen(this.route.state) === false )\n                return false;\n        }\n\n        this._onKeydown = this._onKeydown || this.onKeydown.bind(this)\n        window.removeEventListener('keydown', this._onKeydown, true)\n        window.addEventListener('keydown', this._onKeydown, true)\n\n        this.panelController.add(this)\n\n        setTimeout(()=>{\n            this.setAttribute('open', '')\n\n            if( this.view && this.view.onOpen ){\n                if( this.route )\n                    args.unshift(this.route.state)\n                this.view.onOpen(...args)\n            }\n\n        },100)\n\n        return this\n    }\n\n    set title(str){\n        this.__title = str\n        this.route&&this.route.update({title: str})\n        if(this.toolbar) this.toolbar.title = str\n    }\n    get title(){ return this.__title }\n\n    get params(){\n        return this.route ? this.route.state.params : {}\n    }\n\n    async close(){\n\n        if( this.opts.onClose && await this.opts.onClose() === false )\n            return\n        \n        if( this.view && this.view.onClose && await this.view.onClose() === false )\n            return\n\n        this.route&&this.route.update({didExit: true})\n        this._close()\n\n        if( this.route)\n            this.panelController._updateRoute()\n\n        // put the view back to it's original DOM location (if it had one)\n        if( this.__viewOriginalPlacement ){\n            this.__viewOriginalPlacement.replaceWith(this.view)\n            delete this.__viewOriginalPlacement\n        }\n\n        return this\n    }\n\n    _close(immediate=false){\n        window.removeEventListener('keydown', this._onKeydown, true)\n        this.panelController.remove(this)\n        this.removeAttribute('open')\n        \n        if( immediate )\n            this.remove()\n        else\n        setTimeout(()=>{\n            this.remove()\n        }, Panel.animationTime)\n    }\n\n    static get styles(){return css`\n        :host {\n            pointer-events: initial;\n            display: flex;\n            position: absolute;\n            overflow: visible;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: var(--b-panel-overlay, rgba(0,0,0,.4)); /* overlay */\n            opacity: 0;\n            transition: opacity ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1),\n                        background-color ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n            --radius: var(--b-panel-radius, 5px);\n            --radius-top: var(--radius);\n            --radius-bottom: 0;\n        }\n\n        :host([type=\"modal\"]) {\n            z-index: 1000; /* always on top */\n        }\n\n        :host([type=\"actionsheet\"]) {\n            z-index: 1001 !important;\n        }\n\n        :host > main {\n            pointer-events: none;\n            position: absolute;\n            right: 0;\n            min-width: min(80vw, 300px);\n            min-height: 1em;\n            max-width: var(--max-width, 100%);\n            max-height: var(--max-height, 100%);\n            overflow: visible;\n            display: flex;\n            flex-direction: column;\n            background: var(--b-panel-bgd, #fff);\n            box-shadow: var(--b-panel-shadow, rgba(0,0,0,.2) 0 3px 10px);\n            border-radius: var(--radius-top) var(--radius-top) var(--radius-bottom) var(--radius-bottom);\n            transition: ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        :host([type=\"modal\"]) > main {\n            max-height: var(--max-height, 96%);\n            max-width: var(--max-width, 96%);\n        }\n\n        :host([type=\"actionsheet\"]) main {\n            max-width: var(--b-panel-actionsheet-max-w, 500px);\n            margin-bottom: 0;\n            max-height: var(--b-panel-actionsheet-max-h, 70vh);\n            /* --radius: 12px; */\n        }\n\n        :host([type=\"actionsheet\"]) > main {\n            transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        /* :host([type=\"actionsheet\"][anchor=\"top\"]) > main {\n            padding-top: env(safe-area-inset-top);\n        } */\n\n        :host([type=\"actionsheet\"][anchor=\"bottom\"]) > main {\n            padding-bottom: env(safe-area-inset-bottom);\n        }\n\n        :host([open]) {\n            opacity: 1;\n        }\n\n        :host([open]) > main {\n            opacity: 1;\n            transform: none !important;\n        }\n\n        :host([anchor=\"right\"]) > main {\n            transform: translateX(100px);\n            height: 100%;\n        }\n\n        :host([anchor=\"left\"]) > main {\n            right: auto;\n            left: 0;\n            transform: translateX(-100px);\n            height: 100%;\n        }\n\n        :host([anchor=\"center\"]) > main,\n        :host([anchor=\"top\"]) > main,\n        :host([anchor=\"bottom\"]) > main {\n            position: relative;\n            margin: auto auto;\n            transform: translateY(100px);\n        }\n\n        :host([anchor=\"center\"]) > main {\n            border-radius: var(--radius);\n        }\n\n        :host([anchor=\"center\"][animation=\"scale\"]) > main {\n            transform: scale(.5);\n        }\n\n        :host([anchor=\"center\"][animation=\"fade\"]) > main {\n            transform: none;\n        }\n\n        :host([anchor=\"top\"]) > main {\n            margin-top: 0;\n            transform: translateY(-100px);\n            border-radius: 0 0 var(--radius) var(--radius);\n        }\n\n        :host([anchor=\"bottom\"]) > main {\n            margin-bottom: 0;\n        }\n\n        .backdrop {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n        }\n\n        .modal-close-btn {\n            position: absolute;\n            top: 0;\n            right: 0;\n            z-index: 10000;\n            transform: translate(50%, -50%);\n        }\n\n        main > slot::slotted(*) {\n            width: 100%;\n            pointer-events: all;\n            /* display: grid;\n            grid-template-rows: auto 1fr; */\n        }\n\n        main > slot::slotted(.dialog) {\n            font-size: 1.1em;\n        }\n\n        main > slot::slotted(b-embed) {\n            border-radius: var(--radius);\n            overflow: hidden;\n        }\n\n        main {\n            display: grid;\n        }\n\n        main > section {\n            padding: 1em;\n        }\n\n        .inlinehtml {\n            display: contents;\n        }\n\n        .inlinehtml > * {\n            pointer-events: all;\n        }\n\n        @media print {\n            :host {\n                background: none;\n                position: static;\n            }\n\n            :host(:not([ontop])) {\n                display: none !important;\n            }\n\n            :host > main {\n                width: 100% !important;\n                border-radius: 0;\n                box-shadow: none;\n            }\n        }\n\n        @keyframes bounce {\n            from,\n            20%,\n            53%,\n            80%,\n            to {\n                -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            40%,\n            43% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -30px, 0);\n                transform: translate3d(0, -30px, 0);\n            }\n\n            70% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -15px, 0);\n                transform: translate3d(0, -15px, 0);\n            }\n\n            90% {\n                -webkit-transform: translate3d(0, -4px, 0);\n                transform: translate3d(0, -4px, 0);\n            }\n        }\n\n        @keyframes shake {\n            from,\n            to {\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            15%,\n            45%,\n            75% {\n                -webkit-transform: translate3d(-10px, 0, 0);\n                transform: translate3d(-10px, 0, 0);\n            }\n\n            30%,\n            60%,\n            90% {\n                -webkit-transform: translate3d(10px, 0, 0);\n                transform: translate3d(10px, 0, 0);\n            }\n        }\n\n        .bounce {\n            animation-name: bounce;\n            transform-origin: center bottom;\n            animation-duration: 1s;\n            animation-fill-mode: both;\n        }\n\n        .shake {\n            animation-name: shake;\n            animation-duration: 700ms;\n            animation-fill-mode: both;\n        }\n    `}\n}\n\ncustomElements.define('b-panel', Panel)\n\nexport default customElements.get('b-panel')","import { LitElement, html, css } from 'lit-element'\n\nconst NotifControllers = {}\n\ncustomElements.define('b-notifs', class extends LitElement{\n\n    // createRenderRoot(){ return this }\n\n    static get(name='main'){\n\n        if( name == 'main' && !NotifControllers[name] ){\n            let controller = document.createElement('b-notifs')\n            controller.setAttribute('name', 'main')\n            document.body.appendChild(controller)\n            NotifControllers[name] = controller\n        }\n\n        return NotifControllers[name]\n    }\n\n    get name(){\n        return this.hasAttribute('name') ? this.getAttribute('name') : undefined\n    }\n\n    constructor(){\n        super()\n\n        if( this.name ){\n            if( NotifControllers[this.name] )\n                console.warn('A `b-notifs` controller already exists with the name: ', this.name)\n            else\n                NotifControllers[this.name] = this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        if( this.name )\n            delete NotifControllers[this.name]\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        if( this.name && !NotifControllers[this.name] )\n            NotifControllers[this.name] = this\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            pointer-events: none;\n            \n            overflow: hidden;\n            position:absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            z-index: 1200;\n            --padding: var(--b-notif-padding, 1em);\n        }\n\n        :host([name=\"main\"]) {\n            position: fixed;\n            top: env(safe-area-inset-top);\n            left: env(safe-area-inset-left);\n            bottom: env(safe-area-inset-bottom);\n            right: env(safe-area-inset-right);\n        }\n\n        @media (max-width:699px), (max-height: 699px) {\n            :host {\n                position: fixed;\n                top: env(safe-area-inset-top);\n                left: env(safe-area-inset-left);\n                bottom: env(safe-area-inset-bottom);\n                right: env(safe-area-inset-right);\n            }\n        }\n\n        slot {\n            position: absolute;\n            display: flex;\n        }\n\n        slot[name=\"top\"],\n        slot[name=\"bottom\"] {\n            width: 100%;\n            align-items: center;\n        }\n\n        slot[name*=\"top\"] {\n            top: 0;\n            flex-direction: column;\n            padding-top: var(--padding);\n        }\n\n        slot[name*=\"bottom\"] {\n            bottom: 0;\n            flex-direction: column-reverse;\n            padding-bottom: var(--padding);\n        }\n\n        slot[name*=\"left\"] {\n            left: 0;\n            padding-left: var(--padding);\n            align-items: flex-start;\n        }\n\n        slot[name*=\"right\"] {\n            right: 0;\n            padding-right: var(--padding);\n            align-items: flex-end;\n        }\n\n        @media (max-width:699px) {\n            slot {\n                padding: 0 !important;\n                position: static !important;\n                --b-notif-width: 100%;\n            }\n\n            .top {\n                position: absolute;\n                top: 0;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                padding: var(--padding);\n                box-sizing: border-box;\n            }\n\n            .bottom {\n                position: absolute;\n                bottom: 0;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                padding: var(--padding);\n                box-sizing: border-box;\n            }\n        }\n    `}\n\n    render(){return html`\n        <div class=\"bottom\">\n            <slot name=\"bottom-left\"></slot>\n            <slot name=\"bottom\"></slot>\n            <slot name=\"bottom-right\"></slot>\n        </div>\n\n        <div class=\"top\">\n            <slot name=\"top-left\"></slot>\n            <slot name=\"top\"></slot>\n            <slot name=\"top-right\"></slot>\n        </div>\n        \n    `}\n\n})\n\nexport default customElements.get('b-notifs')","import { LitElement, html, css } from 'lit-element'\n\nexport default css`\n:host {\n    display: block;\n    position:relative;\n    pointer-events: all;\n    width: var(--b-notif-width, 300px);\n    max-width: 100%;\n\n    /* overflow: hidden; */\n\n    transition: \n        height 300ms cubic-bezier(0.4, 0, 0.2, 1) 300ms,\n        opacity 300ms,\n        transform 300ms cubic-bezier(0.4, 0, 0.2, 1);\n\n    opacity: 0;\n    will-change: transform; \n}\n\n:host([slot*=\"right\"]) { transform: translateX(100%); }\n:host([slot*=\"left\"]) { transform: translateX(-100%); }\n:host([slot=\"top\"]) { transform: translateY(-100%); }\n:host([slot=\"bottom\"]) { transform: translateY(100%); }\n\n:host([animation=\"grow\"]) {\n    transform: scale(.8)\n}\n\n:host([animation=\"bounce\"]) {\n    transform: none;\n}\n\n:host([animation=\"bounce\"].entered) {\n    animation-name: bounce;\n    animation-duration: 700ms;\n    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    animation-fill-mode: forwards;\n}\n\n:host([animation=\"fade\"]) {\n    transform: none;\n}\n\n:host([slot*=\"top\"]) {\n    --spacing-bottom: var(--padding);\n}\n\n:host([slot*=\"bottom\"]) {\n    --spacing-top: var(--padding);\n}\n\n:host(.entered) {\n    opacity: 1;\n    transform: none;\n}\n\n:host(.exit) {\n    height: 0 !important;\n}\n\n:host([color=\"red\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--red);\n}\n\n:host([color=\"blue\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--blue);\n}\n\n:host([color=\"green\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--green);\n}\n\n:host([color=\"orange\"]) {\n    --b-notif-color: #222;\n    --b-notif-bgd: var(--orange);\n}\n\n:host([color=\"amber\"]) {\n    --b-notif-color: var(--gray-900);\n    --b-notif-bgd: var(--amber);\n}\n\nmain {\n    --radius: var(--b-notif-radius, 4px);\n    border-radius: var(--radius);\n    color: var(--b-notif-color, #fff);\n    background: var(--b-notif-bgd, #333);\n    margin-top: var(--spacing-top, 0);\n    margin-bottom: var(--spacing-bottom, 0);\n\n    box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),\n                0px 6px 10px 0px rgba(0,0,0,0.14),\n                0px 1px 18px 0px rgba(0,0,0,0.12);\n}\n\nslot {\n    display: block;\n}\n\n\n:host {\n    --b-notif-btn-color: var(--b-notif-color);\n}\n\n:host([color]) {\n    --b-notif-btn-bgd: rgba(255,255,255,.1);\n}\n\n@keyframes bounce {\n  0% { transform: scale(0.8); }\n  14% { transform: scale(1.1); }\n  28% { transform: scale(.9); }\n  42% { transform: scale(1.1); }\n  70% { transform: scale(1); }\n`","export default {\n    sticky: {\n        closeOnClick: false,\n        autoClose: false\n    },\n    alert: {\n    },\n    error: {\n        icon: 'attention-circle',\n        color: 'red',\n        animation: 'bounce'\n    },\n    failed: {\n        icon: 'cancel-circled',\n        color: 'red'\n    },\n    success: {\n        icon: 'ok-circled',\n        color: 'green'\n    },\n    info: {\n        icon: 'info-circled',\n        color: 'blue'\n    },\n    warning: {\n        icon: 'attention-1',\n        color: 'orange'\n    }\n}","\nconst btnPresets = {\n\t'dismiss': {label: 'Dismiss'},\n\t'cancel': {label: 'Cancel'},\n\t'no': {label: 'No'},\n\t'done': {label: 'Done'},\n\t'ok': {label: 'Okay', color: 'primary'},\n\t'yes': {label: 'Yes', color: 'primary'},\n\t'save': {label: 'Save', color: 'primary'},\n\t'create': {label: 'Create', color: 'primary'},\n\t'delete': {label: 'Delete', color: 'red'}\n}\n\nexport const cancelBtns = ['dismiss', 'cancel', 'no']\n\nexport default function makeBtn(opts={}, i){\n\t\n\tif( typeof opts == 'string' ){\n\t\tif( !btnPresets[opts] )\n\t\t\treturn console.warn('Button preset `'+opts+'` does not exist')\n\t\t\n\t\topts = btnPresets[opts]\n\t}\n\t\n\tlet {\n\t\tlabel='',\n\t\tclassName='',//'text-btn fw-bold',\n\t\tcolor='',\n\t\ticon='',\n\t\ttext=true\n\t} = opts;\n\t\n\t// icon = icon ? 'icon-'+icon : ''\n\t\n\treturn `<b-btn ${text&&'text'} icon=\"${icon}\" color=\"${color}\" class=\"${className}\">${label}</b-btn>`\n\n\t// return `<span class=\"btn ${className} ${color} ${icon}\">${label}</span>`\n}","import {LitElement} from 'lit-element'\n\nLitElement.prototype.emitEvent = function(eventName, detail=null){\n\n    var event = new CustomEvent(eventName, {\n        bubbles: true,\n        composed: true,\n        detail: detail\n    });\n    \n    this.dispatchEvent(event)\n}\n\n","import { LitElement, html, css } from 'lit-element'\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html'\nimport makeBtn, {cancelBtns} from '../dialog/make-btn'\nimport '../../helpers/lit-element/events'\n\ncustomElements.define('b-snackbar', class extends LitElement{\n\n    static get properties(){ return {\n        msg: {type: String},\n        btns: {type: Array},\n        icon: {type: String},\n    }}\n\n    static get styles(){return css`\n        :host {\n            padding: var(--b-snackbar-padding, .85em 1em);\n            display: grid;\n            grid-template-columns: auto 1fr max-content;\n            align-items: center;\n        }\n\n        .icon {\n            line-height: 0;\n        }\n\n        .icon > b-icon,\n        .icon > .icon {\n            margin: -.5em 0;\n            margin-right: .75em;\n            --size: 1.2em;\n            vertical-align: middle;\n        }\n\n        .msg {\n            margin: 0.05em 0 -.05em; /* better alignment with icon and btns */\n        }\n\n        .btns {\n            margin-top: -0.05em;\n            margin-right: calc(-.5 * var(--padding));\n            margin-left: calc(-.5 * var(--padding));\n        }\n\n        .btns b-btn {\n            font-weight: bold;\n            text-transform: uppercase;\n            margin: -1em 0;\n            vertical-align: middle;\n        }\n\n        .btns b-btn[color=''] {\n            color: var(--b-notif-btn-color, #fff);\n        }\n\n        :host([color]) .btns b-btn  {\n            color: var(--b-notif-btn-color, #fff);\n        }\n\n        @media (hover){\n            .btns b-btn:hover {\n                --bgdColor: var(--b-notif-btn-bgd, rgba(0,0,0,.05));\n            }\n        }\n    `}\n\n    render(){return html`\n        <div class=\"icon\">${this.renderIcon()}</div>\n        <div class=\"msg\">${this.msg}</div>\n        <div class=\"btns\" @click=${this.onBtnClick}>\n            ${this.btns.map(btn=>this.renderBtn(btn))}\n        </div>\n    `}\n\n    renderIcon(){\n        if( !this.icon ) return ''\n\n        if( typeof this.icon == 'string' )\n            return html`<b-icon name=\"${this.icon}\"></b-icon>`\n        \n        else\n            return this.icon\n    }\n\n    renderBtn(btn){\n        return html`${unsafeHTML(makeBtn(btn))}`\n    }\n\n    onBtnClick(e){\n\n        e.stopPropagation()\n        let index = Array.from(e.currentTarget.children).indexOf(e.target)\n        let btnData = index > -1 ? this.btns[index] : e.target\n\n        if( cancelBtns.includes(btnData) )\n            btnData = undefined\n\n        this.emitEvent('click', btnData)\n    }\n\n})\n\nexport default customElements.get('b-snackbar')","import { LitElement, html, css } from 'lit-element'\nimport Controller from './controller'\nimport device from '../../util/device'\nimport style from './style'\nimport TYPES from './types'\nimport './snackbar'\n\n// list of open notifs\nconst NOTIFS = new Map()\n\nwindow.NOTIFS = NOTIFS\n\ncustomElements.define('b-notif', class extends LitElement{\n\n    static get styles(){return style}\n\n    static get properties(){ return {\n        nid: {type: String, reflect: true},\n        msg: {type: String},\n        btns: {type: Array},\n        icon: {type: String},\n        color: {type: String, reflect: true},\n        width: {type: String},\n        animation: {type: String, reflect: true},\n    }}\n\n    constructor(opts={}){\n        super()\n\n        this.onWindowFocus = this.onWindowFocus.bind(this)\n        this.onWindowBlur = this.onWindowBlur.bind(this)\n\n        let controller = Controller.get(opts.controller || 'main')\n\n        this.opts = Object.assign({\n            nid: String(Math.round(Math.random() * 10000)),\n            msg: '',\n            icon: '',\n            btns: [],\n\n            animation: device.minScreenSize <= 699 ? 'grow' : 'slide',\n            animationForReplace: 'grow',\n            \n            autoClose: 4000,\n            closeOnClick: true,\n\n            anchor: 'bottom-right', //device.minScreenSize <= 699 ? 'bottom' : 'bottom-right',\n\n            onClose(){},\n            onClick(){}\n        }, (TYPES[opts.type]||{}), (controller.defaults||{}), opts)\n\n        let props = this.constructor.properties\n\n        for( let key in this.opts ){\n            if( props[key] != undefined )\n                this[key] = this.opts[key]\n        }        \n\n        this.slot = this.opts.anchor\n        \n        this.addEventListener('click', this.onClick, false)\n        this.addEventListener(device.isMobile?'touchdown':'mouseover', this.onMouseOver)\n        this.addEventListener(device.isMobile?'touchend':'mouseout', this.onMouseOut)\n\n        if( this.opts.view ){\n            this.appendChild(this.opts.view)\n            this.opts.view.notif = this\n        }\n\n        let existingNotif = NOTIFS.get(this.nid)\n\n        NOTIFS.set(this.nid, this)\n\n        if( existingNotif ){\n            existingNotif.replaceWith(this)\n            return\n        }\n        \n        if( controller )\n            controller.appendChild(this)\n    }\n\n    close(btn){\n        return new Promise(resolve=>{\n\n            this.style.height = (this.getBoundingClientRect().height)+'px';\n            this.classList.remove('entered')\n            \n            setTimeout(()=>{\n                this.classList.add('exit')\n            },100)\n\n            setTimeout(()=>{\n                this.remove()\n                NOTIFS.delete(this.nid)\n                this.opts.onClose(this)\n                \n                if( this.opts.view )\n                    delete this.opts.view.notif\n\n                resolve(btn)\n            },700)\n\n        })\n    }\n\n    replaceWith(el){\n        let animation = el.animation\n        \n        // let's reduce visual animation when replacing\n        if( animation == 'slide' ){\n            this.animation = this.opts.animationForReplace\n            el.animation = this.opts.animationForReplace\n        }\n        \n        this.classList.remove('entered')\n        \n        // setTimeout(()=>{\n            super.replaceWith(el)\n\n            this.opts.onClose(this)\n            \n            if( this.opts.view )\n                delete this.opts.view.notif\n\n            setTimeout(()=>{\n                el.animation = animation\n            },310)\n\n        // },310)\n    }\n\n    onClick(btn){\n        \n        if( btn instanceof MouseEvent || (window.TouchEvent && btn instanceof TouchEvent) )\n            btn = undefined\n\n        if( this.opts.onClick(this, btn) !== false && this.opts.closeOnClick )\n            this.close(btn)\n    }\n\n    onWindowFocus(){\n        this.autoClose(3000)\n    }\n\n    onWindowBlur(){\n        // this.autoClose(false)\n    }\n\n    onMouseOver(e){\n        e.stopPropagation()\n        this.autoClose(false)\n    }\n\n    onMouseOut(e){\n        e.stopPropagation()\n        this.autoClose(3000)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        window.addEventListener('blur', this.onWindowBlur)\n        window.addEventListener('focus', this.onWindowFocus)\n\n        if( this.opts.width )\n            this.style.width = this.opts.width\n\n        setTimeout(()=>{\n            this.classList.add('entered')\n        },100)\n\n        this.autoClose()\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        window.removeEventListener('blur', this.onWindowBlur)\n        window.removeEventListener('focus', this.onWindowFocus)\n    }\n\n    autoClose(start=true){\n\n        clearTimeout(this._autoCloseTimeout)\n\n        if( !document.hasFocus() ) return\n\n        // use the `autoClose` delay if no time given OR we've never started the autoClose\n        let delay = start===true||!this._autoCloseTimeout?this.opts.autoClose:start\n\n        // requested to stop, or setting turned off\n        if( !start || !this.opts.autoClose ) return\n        \n        this._autoCloseTimeout = setTimeout(()=>{\n            this.close()\n        }, delay)\n    }\n\n    render(){return html`\n        <main>\n        <slot>\n            <b-snackbar\n                .icon=${this.icon}\n                .msg=${this.msg}\n                .btns=${this.btns}\n                ?color=${!!this.color}\n                @click=${this.onSnackbarClick}></b-snackbar>\n        </slot>\n        </main>\n    `}\n\n    onSnackbarClick(e){\n        e.stopPropagation()\n        let data = e.constructor.name == 'CustomEvent' ? e.detail : undefined\n        this.onClick(data)\n    }\n    \n\n})\n\nexport default customElements.get('b-notif')\n\nlet notifClass = customElements.get('b-notif')\n\nfor( let key in TYPES ){\n    if( !notifClass[key] )\n        notifClass[key] = (msg, opts={})=>{\n            // string or lit-html\n            if( typeof msg == 'string' || msg.constructor.name == 'TemplateResult' ){\n                opts = opts || {}\n                opts.msg = msg\n            }\n\n            let Notif = customElements.get('b-notif')\n            return new Notif(Object.assign({}, TYPES[key], opts))\n        }\n}\n","import {render, TemplateResult} from 'lit-html';\nimport device from '../../util/device';\nimport Panel from '../panel'\nimport Notif from '../notif'\nimport Popover from '../popover'\nimport makeBtn, {cancelBtns} from './make-btn'\n\n// FIXME: this module needs to be refactored using lit-element to better apply styles\nconst styles = require('./style.less')\n\nexport default class Dialog {\n\tconstructor(opts={}){\n\t\t\n\t\tthis.opts = opts = Object.assign({\n\t\t\ticon:'',\n\t\t\ttitle:'',\n\t\t\tmsg:'',\n\t\t\tview: null,\n\t\t\tw: null,\n\t\t\tbtns:['dismiss'],\n\t\t\tclassName: '',\n\t\t}, opts)\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\t\n\t\topts.className += ' nopadding dialog'\n\n\t\tif( this.opts.icon )\n\t\t\topts.className += ' sideicon'\n\n\t\topts.className.split(' ').forEach(className=>className&&this.el.classList.add(className));\n\n\t\tlet [iconName, iconClass] = (opts.icon||'').split(' ')\n\t\t\n\t\tlet icon = opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''}\"></b-icon>` : ''\n\t\tlet btns = opts.btns ? opts.btns.map(btn=>btn&&makeBtn(btn)).join(\"\\n\") : ''\n\n\t\tif( opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\telse if( opts.icon && opts.icon[0] == '<' )\n\t\t\ticon = opts.icon\n\t\telse if( customElements.get(opts.icon) )\n\t\t\ticon = `<${opts.icon}></${opts.icon}>`\n\n\t\tthis.el.innerHTML = `${typeof styles === 'string'?`<style>${styles}</style>`:''}\n\t\t\t\t\t\t\t<div class=\"d-icon\">${icon}</div>\n\t\t\t\t\t\t\t<h2 class=\"d-title\">${opts.title}</h2>\n\t\t\t\t\t\t\t<div class=\"d-msg\">${opts.msg}</div>\n\t\t\t\t\t\t\t<div class=\"d-btns\">${btns}</div>`;\n\t\tif(opts.msg instanceof TemplateResult){\n\t\t\trender(opts.msg, this.el.querySelector('.d-msg'));\n\t\t}\n\t\t\n\t\tif( this.opts.w )\n\t\t\tthis.el.style.width = (typeof this.opts.w == 'number') ? this.opts.w+'px' : this.opts.w;\n\t\t\n\t\tif( this.opts.view ){\n\t\t\tif( !this.opts.icon && !this.opts.title && !this.opts.msg ){\n\n\t\t\t\tif( this.opts.view instanceof HTMLElement ){\n\t\t\t\t\tthis.el.innerHTML = `<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t\tthis.el.prepend(this.opts.view)\n\t\t\t\t}else{\n\t\t\t\t\tthis.el.innerHTML = `${this.opts.view}<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.el.querySelector('.d-msg').classList.add('custom-view')\n\t\t\t\tthis.el.querySelector('.d-msg').appendChild(this.opts.view)\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this), true)\n\t\t\n\t\tthis.promise = new Promise(resolve=>{ this._resolve = resolve })\n\t}\n\n\tset title(str){\n\t\tthis.opts.title = str\n\t\tlet el = this.el.querySelector('.d-title')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset msg(str){\n\t\tthis.opts.msg = str\n\t\tlet el = this.el.querySelector('.d-msg')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset btns(btns){\n\t\tthis.opts.btns = btns\n\t\tbtns = btns ? btns.map(btn=>makeBtn(btn)).join(\"\\n\") : ''\n\t\tlet el = this.el.querySelector('.d-btns')\n\t\tif( el )\n\t\t\tel.innerHTML = btns\n\t}\n\n\tset icon(icon){\n\t\tthis.opts.icon = icon\n\t\tlet [iconName, iconClass] = (icon||'').split(' ')\n\t\ticon = this.opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''} animated speed-2 flipInY\"></b-icon>` : ''\n\n\t\tif( this.opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\t\n\t\tlet el = this.el.querySelector('.d-icon')\n\t\tif( el )\n\t\t\tel.innerHTML = icon\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet el = e.target\n\t\t\n\t\tif( el.tagName == 'B-BTN' ){\n\t\t\t\n\t\t\tlet index = Array.from(el.parentElement.children).indexOf(el)\n\t\t\tlet btnInfo = this.opts.btns[index]\n\t\t\tthis.resolveBtn(btnInfo)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\t\t\n\t\tlet btnInfo = undefined\n\t\n\t\tif( this.opts.btns && e.code == 'Escape' ){\n\t\t\tbtnInfo = this.opts.btns.find(btn=>cancelBtns.includes(btn))\n\t\t\n\t\t}else if( this.opts.btns && e.code == 'Enter' ){\n\t\t\tbtnInfo = this.opts.btns.reverse().find(btn=>!cancelBtns.includes(btn))\n\t\t}\n\t\t\n\t\tif( btnInfo != undefined ){\n\n\t\t\t// let other views finish with keydown before we process (ex: Dialog.prompt)\n\t\t\tsetTimeout(()=>{\n\t\t\t\tif( document.activeElement == document.body )\n\t\t\t\t\tthis.resolveBtn(btnInfo)\n\t\t\t}, 0);\n\t\t}\n\t}\n\t\n\tresolveBtn(btnInfo){\n\t\tif( cancelBtns.includes(btnInfo) )\n\t\t\tbtnInfo = false\n\t\t\n\t\tif( this.resolve(btnInfo) === true )\n\t\t\tthis.close()\n\t}\n\t\n\tresolve(resp){\n\t\tif( this.opts.onResolve ){\n\t\t\t\n\t\t\ttry{\n\t\t\t\tresp = this.opts.onResolve(resp, this)\n\t\t\t}catch(err){\n\t\t\t\tconsole.log('failed to resolve');\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( this._resolve )\n\t\t\tthis._resolve(resp)\n\t\t\t\n\t\treturn true\n\t}\n\t\n\tclose(){\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\t$(str){\n\t\treturn this.el.querySelector(str)\n\t}\n\t\n\t$$(str){\n\t\treturn this.el.querySelectorAll(str)\n\t}\n\t\n\t/*\n\t\tPresenters\n\t*/\n\tpopover(target, opts={}){\n\n\t\tif( opts.adjustForMobile && device.is_mobile )\n\t\t\treturn this.modal((typeof opts.adjustForMobile == 'object' ? opts.adjustForMobile : {}))\n\t\t\n\t\tif( target.currentTarget )\n\t\t\ttarget = target.currentTarget\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\n\t\t// layout timing issue on Safari (mac and iOS)... this will fix it for now\n\t\tsetTimeout(()=>{\n\t\t\tthis.presenter._updatePosition()\n\t\t})\n\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}, mobileOpts){\n\t\tif( mobileOpts && device.isMobile )\n\t\t\treturn this.panel(mobileOpts)\n\t\telse\n\t\t\treturn this.panel(opts)\n\t}\n\n\tactionsheet(opts={}){\n\t\treturn this.panel(Object.assign({\n\t\t\ttype: 'actionsheet'\n\t\t}, opts))\n\t}\n\n\tpanel(opts={}){\n\n\t\topts = Object.assign({\n\t\t\ttype: 'modal',\n\t\t\tanimation: 'scale',\n\t\t\tdisableBackdropClick: true\n\t\t}, opts)\n\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\n\t\tthis.presenter = new Panel(this.el, opts)\n\t\tthis.presenter.open()\n\t\treturn this.promise\n\t}\n\t\n\tnotif(opts){\n\t\topts = Object.assign({\n\t\t\tautoClose: this.opts.btns ? false : 3000,\n\t\t\tcloseOnClick: !this.opts.btns,\n\t\t\tonClose: ()=>{ this.resolve(false) }\n\t\t}, opts)\n\t\t\n\t\topts.view = this.el\n\t\t\n\t\tthis.presenter = new Notif(opts)\n\t\treturn this.promise\n\t}\n}","\nconst Dialog = require('./dialog').default;\n\nmodule.exports = Dialog\n\nDialog.waiting = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'spinner',\n\t\ttitle: 'Processing...',\n\t\tmsg: '',\n\t\tbtns: false\n  \t}, opts))\n}\n\nDialog.confirm = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\t// icon: 'trash text-red',\n\t\ttitle: 'Continue?',\n\t\tmsg: 'Are you sure?',\n\t\tbtns: ['cancel', 'ok']\n  \t}, opts))\n}\n\nDialog.confirmDelete = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: opts.title||opts.msg?'trash red':'',\n\t\tbtns: ['cancel', 'delete']\n  \t}, opts))\n}\n\nDialog.alert = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'info-circled',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.error = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'alert red',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.warn = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'attention-1 orange',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.success = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'ok-circled green',\n\t\ttitle: 'Success',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.prompt = function(opts={}){\n\t\n\topts = Object.assign({\n\t\tval: '',\n\t\tmsg: '',\n\t\tprefix: '',\n\t\tsuffix: '',\n\t\tpattern: '',\n\t\thtml: false,\n\t\trequired: false,\n\t\tlabel: '',\n\t\tplaceholder: '',\n\t\thelpText: '',\n\t\tw: 300,\n\t\ttype: '',\n\t\tmultiline: false,\n\t\tmultiple: false,\n\t\tbtns: ['cancel', 'save'],\n\t\tonSubmit(val, control, blur){}\n\t}, opts)\n\t\n\tif( opts.msg )\n\t\topts.msg = `<div>${opts.msg}</div>`\n\t\t\n\topts.onResolve = function(resp, dialog){\n\t\t\n\t\tlet control = dialog.$('form-control')\n\n\t\tcontrol.removeEventListener('change', onSubmit)\n\t\t\n\t\tif( !resp ) return opts.btns.length > 2 ? [resp] : resp\n\t\t\n\t\tif( control.isInvalid )\n\t\t\tthrow Error('Invalid data')\n\t\t\n\t\tlet val = opts.html ? control.value : (control.control.textValue || control.value)\n\t\t\n\t\treturn opts.btns.length > 2 ? [resp, val] : val\n\t}\n\t\n\tlet prefix = ''\n\tlet suffix = ''\n\t\n\tif( opts.prefix.match(/^icon/) ){\n\t\tprefix = `<span slot=\"prefix\" class=\"${opts.prefix}\"></span>`\n\t\topts.prefix = ''\n\t}\n\t\n\tif( opts.suffix.match(/^icon/) ){\n\t\tsuffix = `<span slot=\"suffix\" class=\"${opts.suffix}\"></span>`\n\t\topts.suffix = ''\n\t}\n\t\n\tlet control = `<text-field\n\t\tpattern=\"${opts.pattern}\"\n\t\tplaceholder=\"${opts.placeholder}\"\n\t\t${opts.html?'html':''}\n\t\t${opts.multiline?'multiline':''}\n\t\t${opts.required?'required':''}>${opts.val}</text-field>`\n\t\n\tif( opts.type )\n\t\tcontrol = `<input\n\t\t\t\t\tslot=\"control\"\n\t\t\t\t\ttype=${opts.type} \n\t\t\t\t\tpattern=\"${opts.pattern}\" \n\t\t\t\t\tplaceholder=\"${opts.placeholder}\"\n\t\t\t\t\tvalue=\"${opts.val}\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t${opts.required?'required':''}>`\n\n\tif( opts.options )\n\t\tcontrol = `<select-field\n\t\t\t\t\tplaceholder=\"${opts.placeholder}\"\n\t\t\t\t\t${opts.multiple?'multiple':''}\n\t\t\t\t\t></select-field>`\n\t\n\topts.msg += `\n\t\t\t<form-control material=\"filled\" \n\t\t\t${opts.label?`label=\"${opts.label}\"`:''} \n\t\t\tshow=\"suffix prefix\"\n\t\t\tprefix=\"${opts.prefix}\"\n\t\t\tsuffix=\"${opts.suffix}\">\n\t\t\t\t${control}\n\t\t\t\t<div slot=\"help\">${opts.helpText}</div>\n\t\t\t\t${prefix}\n\t\t\t\t${suffix}\n\t\t\t</form-control>\n\t\t\t`\n\t\n\tlet dialog = new Dialog(opts)\n\t\n\tcontrol = dialog.$('form-control')\n\n\tlet onSubmit = (e)=>{\n\t\tif( ['TEXT-FIELD', 'INPUT'].includes(e.target.tagName) ){\n\t\t\t// if onSubmit given, dont close input...let function do that if \n\t\t\tif( opts.onSubmit ){\n\t\t\t\tlet val = opts.html ? control.value : (control.control.textValue || control.value)\n\t\t\t\tlet blur = function(){ control.control.blur() }\n\t\t\t\topts.onSubmit(val, control, blur)\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcontrol.control.blur()\n\t\t\t}\n\t\t}\n\t}\n\n\tcontrol.addEventListener('change', onSubmit)\n\t\n\tif( opts.options )\n\t\tcontrol.options = opts.options\n\t\n\tsetTimeout(function(){\t\n\t\tcontrol.focus()\n\t},500)\n\t\n\treturn dialog\n}\n","/*!\n * Fuse.js v3.4.5 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"Fuse\",[],t):\"object\"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),a=n(8),s=n(0),c=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.caseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m,S=n.id,x=void 0===S?null:S,b=n.keys,M=void 0===b?[]:b,_=n.shouldSort,L=void 0===_||_,w=n.getFn,A=void 0===w?a:w,C=n.sortFn,I=void 0===C?function(e,t){return e.score-t.score}:C,O=n.tokenize,j=void 0!==O&&O,P=n.matchAllTokens,F=void 0!==P&&P,T=n.includeMatches,z=void 0!==T&&T,E=n.includeScore,K=void 0!==E&&E,$=n.verbose,J=void 0!==$&&$;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k,id:x,keys:M,includeMatches:z,includeScore:K,shouldSort:L,getFn:A,sortFn:I,verbose:J,tokenize:j,matchAllTokens:F},this.setCollection(t)}var t,n,c;return t=e,(n=[{key:\"setCollection\",value:function(e){return this.list=e,e}},{key:\"search\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\\nSearch pattern: \"'.concat(e,'\"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,o=n.fullSearcher,i=this._search(r,o),a=i.weights,s=i.results;return this._computeScore(a,s),this.options.shouldSort&&this._sort(s),t.limit&&\"number\"==typeof t.limit&&(s=s.slice(0,t.limit)),this._format(s)}},{key:\"_prepareSearchers\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:\"_search\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},o=[];if(\"string\"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:\"\",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},c=0,h=n.length;c<h;c+=1)for(var l=n[c],u=0,f=this.options.keys.length;u<f;u+=1){var d=this.options.keys[u];if(\"string\"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error(\"Key weight has to be > 0 and <= 1\");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:c},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:\"_analyze\",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,i=e.value,a=e.record,c=e.index,h=t.tokenSearchers,l=void 0===h?[]:h,u=t.fullSearcher,f=void 0===u?[]:u,d=t.resultMap,v=void 0===d?{}:d,p=t.results,g=void 0===p?[]:p;if(null!=i){var y=!1,m=-1,k=0;if(\"string\"==typeof i){this._log(\"\\nKey: \".concat(\"\"===n?\"-\":n));var S=f.search(i);if(this._log('Full text: \"'.concat(i,'\", score: ').concat(S.score)),this.options.tokenize){for(var x=i.split(this.options.tokenSeparator),b=[],M=0;M<l.length;M+=1){var _=l[M];this._log('\\nPattern: \"'.concat(_.pattern,'\"'));for(var L=!1,w=0;w<x.length;w+=1){var A=x[w],C=_.search(A),I={};C.isMatch?(I[A]=C.score,y=!0,L=!0,b.push(C.score)):(I[A]=1,this.options.matchAllTokens||b.push(1)),this._log('Token: \"'.concat(A,'\", score: ').concat(I[A]))}L&&(k+=1)}m=b[0];for(var O=b.length,j=1;j<O;j+=1)m+=b[j];m/=O,this._log(\"Token score average:\",m)}var P=S.score;m>-1&&(P=(P+m)/2),this._log(\"Score average:\",P);var F=!this.options.tokenize||!this.options.matchAllTokens||k>=l.length;if(this._log(\"\\nCheck Matches: \".concat(F)),(y||S.isMatch)&&F){var T=v[c];T?T.output.push({key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}):(v[c]={item:a,output:[{key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}]},g.push(v[c]))}}else if(s(i))for(var z=0,E=i.length;z<E;z+=1)this._analyze({key:n,arrayIndex:z,value:i[z],record:a,index:c},{resultMap:v,results:g,tokenSearchers:l,fullSearcher:f})}}},{key:\"_computeScore\",value:function(e,t){this._log(\"\\n\\nComputing score:\\n\");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,i=o.length,a=1,s=1,c=0;c<i;c+=1){var h=e?e[o[c].key].weight:1,l=(1===h?o[c].score:o[c].score||.001)*h;1!==h?s=Math.min(s,l):(o[c].nScore=l,a*=l)}t[n].score=1===s?a:s,this._log(t[n])}}},{key:\"_sort\",value:function(e){this._log(\"\\n\\nSorting....\"),e.sort(this.options.sortFn)}},{key:\"_format\",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log(\"\\n\\nOutput:\\n\\n\",JSON.stringify(e,function(e,t){if(\"object\"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t})),n=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty(\"arrayIndex\")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var i=0,a=e.length;i<a;i+=1){var s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},h=0,l=o.length;h<l;h+=1)o[h](s,c);t.push(c)}else t.push(s.item)}return t}},{key:\"_log\",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,n),c&&o(t,c),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(3),i=n(4),a=n(7),s=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.isCaseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,n,s;return t=e,(n=[{key:\"search\",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return o(e,this.pattern,r);var a=this.options,s=a.location,c=a.distance,h=a.threshold,l=a.findAllMatches,u=a.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:u})}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t){var n=/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(n,\"\\\\$&\").replace(r,\"|\")),i=e.match(o),a=!!i,s=[];if(a)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];s.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(5),o=n(6);e.exports=function(e,t,n,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,f=i.findAllMatches,d=void 0!==f&&f,v=i.minMatchCharLength,p=void 0===v?1:v,g=s,y=e.length,m=u,k=e.indexOf(t,g),S=t.length,x=[],b=0;b<y;b+=1)x[b]=0;if(-1!==k){var M=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});if(m=Math.min(M,m),-1!==(k=e.lastIndexOf(t,g+S))){var _=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});m=Math.min(_,m)}}k=-1;for(var L=[],w=1,A=S+y,C=1<<S-1,I=0;I<S;I+=1){for(var O=0,j=A;O<j;){r(t,{errors:I,currentLocation:g+j,expectedLocation:g,distance:h})<=m?O=j:A=j,j=Math.floor((A-O)/2+O)}A=j;var P=Math.max(1,g-j+1),F=d?y:Math.min(g+j,y)+S,T=Array(F+2);T[F+1]=(1<<I)-1;for(var z=F;z>=P;z-=1){var E=z-1,K=n[e.charAt(E)];if(K&&(x[E]=1),T[z]=(T[z+1]<<1|1)&K,0!==I&&(T[z]|=(L[z+1]|L[z])<<1|1|L[z+1]),T[z]&C&&(w=r(t,{errors:I,currentLocation:E,expectedLocation:g,distance:h}))<=m){if(m=w,(k=E)<=g)break;P=Math.max(1,2*g-k)}}if(r(t,{errors:I+1,currentLocation:g,expectedLocation:g,distance:h})>m)break;L=T}return{isMatch:k>=0,score:0===w?.001:w,matchedIndices:o(x,p)}}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=r/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===r?r=i:s||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){var r=n(0);e.exports=function(e,t){return function e(t,n,o){if(n){var i=n.indexOf(\".\"),a=n,s=null;-1!==i&&(a=n.slice(0,i),s=n.slice(i+1));var c=t[a];if(null!=c)if(s||\"string\"!=typeof c&&\"number\"!=typeof c)if(r(c))for(var h=0,l=c.length;h<l;h+=1)e(c[h],s,o);else s&&e(c,s,o);else o.push(c.toString())}else o.push(t);return o}(e,t,[])}}])});","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\topacity: 0;\n\tposition: absolute;\n\t/* left: -7px;\n\ttop: -7px;\n\twidth: 48px;\n\theight: 48px; */\n\twidth: 120%;\n\theight: 120%;\n\tleft: -10%;\n\ttop: -10%;\n\tdisplay: block;\n\tz-index: 100;\n\tbackground: currentColor;\n\tborder-radius: 50px;\n}\n\n:host(.enter) {\n\topacity: 0.3;\n\t/* transform: scale(.5); */\n\tanimation: ripple-enter 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-enter;\n}\n\n:host(.exit) {\n\topacity: 0;\n\t/* transform: scale(1); */\n\tanimation: ripple-exit 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-exit;\n}\n\n\n@-webkit-keyframes ripple-enter {\n  0% {\n    opacity: 0.1;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n}\n@-webkit-keyframes ripple-exit {\n  0% {\n    opacity: .3;\n\ttransform: scale(.7);\n  }\n  100% {\n    opacity: 0;\n\ttransform: scale(1.2);\n  }\n}\n@-webkit-keyframes ripple-pulsate {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.92);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n`\n\nclass TouchRippleElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\tripple(){\n\t\tthis.animate('exit')\n\t}\n\t\n\tenter(){\n\t\tthis.classList.add('enter')\n\t}\n\t\n\thide(){\n\t\tthis.classList.remove('exit')\n\t\tthis.classList.remove('enter')\n\t}\n\t\n\tanimate(str){\n\t\tthis.hide()\n\t\tthis.classList.add(str)\n\t\tsetTimeout(()=>this.classList.remove(str), 550)\n\t}\n\t\n}\n\ncustomElements.define('touch-ripple', TouchRippleElement)\n\nexport default customElements.get('touch-ripple')\n","import {css} from 'lit-element'\nimport './touch-ripple'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: var(--fc-theme);\n\t--colorDisabled: var(--fc-disabled-color, rgba(0, 0, 0, 0.26));\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tflex-grow: 0 !important;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tcursor: pointer;\n\toutline: none;\n}\n\n:host([hidden]) { display: none; }\n\n:host([checked]) svg.uncheck,\n:host(:not([checked])) svg.check {\n\tdisplay: none\n}\n\nmain {\n\tposition: relative;\n\tdisplay: inherit;\n}\n\n:host([placement=\"top\"]) { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) { flex-direction: column; }\n:host([placement=\"left\"]) { flex-direction: row-reverse; }\n:host([placement=\"right\"]) { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\n.switch {\n\tdisplay: none\n}\n\n:host([type=\"switch\"]) svg { display: none; }\n\n:host([type=\"switch\"]) .switch {\n\tdisplay: inline-block;\n}\n\n:host([checked]) {\n\tcolor: var(--color)\n}\n\n:host([disabled]) {\n\tcursor: default;\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled)\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nmain label {\n\tcursor: pointer;\n}\n\n.indeterminate {\n\tdisplay: none;\n}\n\n.switch {\n\tposition: relative;\n\talign-items: center;\n\tmargin: .5em;\n}\n\n.switch:before, .switch:after {\n\tcontent: \"\";\n\tmargin: 0;\n\toutline: 0;\n\ttransition: all 0.3s ease;\n}\n\n.switch:before {\n\tdisplay: block;\n\twidth: 2em;\n\theight: 1em;\n\tbackground-color: #9E9E9E;\n\tborder-radius: 1em;\n}\n\n.switch:after {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 50%;\n\ttransform: translate(0, -50%);\n\twidth: 1.3em;\n\theight: 1.3em;\n\tbackground-color: #FAFAFA;\n\tborder-radius: 50%;\n\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.14), 0 2px 2px 0 rgba(0, 0, 0, 0.098), 0 1px 5px 0 rgba(0, 0, 0, 0.084);\n}\n\n\n:host([checked]) .switch:before {\n\tbackground-color: var(--color);\n\topacity: .5\n}\n\n:host([checked]) .switch:after {\n\tbackground-color: var(--color);\n\ttransform: translate(80%, -50%);\n}\n`\n\nclass CheckBoxElement extends HTMLElement {\n\n\tget key(){ return this.getAttribute('key')}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>\n\t\t\t${styles.cssText}\n\t\t\t</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"uncheck\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"></path></svg>\n\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t<div class=\"switch\"></div>\n\t\t\t\t<touch-ripple></touch-ripple>\n\t\t\t</main>\n\t\t\t<label>${label}</label>\n\t\t\t`\n\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.ripple = this.shadowRoot.querySelector('touch-ripple')\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['Space', 'Enter'].includes(e.code) )\n\t\t\t\tthis._onClick()\n\t\t})\n\t\t\n\t\tthis.addEventListener('focus', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.enter()\n\t\t})\n\t\t\n\t\tthis.addEventListener('blur', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.hide()\n\t\t})\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.ripple.ripple()\n\t\t\n\t\tthis.checked = !this.checked\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.checked\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t\t\n\t\t// this.blur()\n\t}\n\t\n\tset checked(val){\n\t\tif( val === '0' || val === '' ) val = false\n\t\tval ? this.setAttribute('checked', '') : this.removeAttribute('checked')\n\t}\n\t\n\tget checked(){ return this.hasAttribute('checked') }\n\tget value(){ return this.checked }\n\tset value(val){ this.checked = val }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('check-box', CheckBoxElement)\n\nexport default customElements.get('check-box')\n","/*\n\tSelect Field\n*/\nimport {css} from 'lit-element'\nimport Menu from '../../menu'\nimport device from '../../../util/device';\n\nconst SHOW_ALL_RESULTS_THRESHOLD = 100\n\nconst styles = css`\n\n:host(:not([disabled])) {\n\tcursor: pointer;\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 1em;\n\tposition: relative;\n}\n\nmain > svg {\n\theight: 1em;\n\twidth: 1em;\n\tflex-shrink: 0;\n\tfill: var(--theme-text-accent, #333);\n}\n\nslot#options {\n\tdisplay: none;\n}\n\nmain input {\n\tposition: absolute;\n\tz-index: -1;\n\topacity: 0;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n}\n\n\n#value {\n\tflex-grow: 1;\n\tmin-width: 1em;\n}\n\n#value:empty:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n}\n\n#value > span {\n\tdisplay: inline-block;\n\tpadding: 0;\n    min-width: 1em;\n\tvertical-align: bottom;\n}\n\n:host(:not([chip])) #value > span:not(:last-child):after {\n\tcontent: ', ';\n\tmargin-right: .5em;\n}\n\n:host([chip]) #value {\n\tmargin-top: -.15em;\n\tmargin-bottom: -.15em;\n}\n\n:host([chip]) #value > span {\n\tbackground: rgba(0,0,0,.1);\n    margin: .1em;\n    padding: .15em .5em;\n    border-radius: 20px;\n\tline-height: 1em;\n\tdisplay: inline-flex;\n\tjustify-content: center;\n\talign-items: center;\n}`\n\nconst SearchTypes = new Map()\n\n// search opts should match `Menu.options.search`\nexport function registerSearchType(type, searchOpts={}){\n\n\tif( !opts.url )\n\t\treturn console.warn(`Cannot register select-field search type: '${type}' - opts.url is required`)\n\t\n\tif( SearchTypes.get(type) )\n\t\treturn console.warn(`select-field search type ${type} already set`)\n\n\tSearchTypes.set(type, Object.assign({\n\t\t// no defaults yet\n\t}, searchOpts))\n}\n\nclass SelectFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\tlet arrow = this.hasAttribute('no-arrow') ? '' : '<svg focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M7 10l5 5 5-5z\"></path></svg>'\n\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<input type=\"input\" readonly=\"true\"/>\n\t\t\t\t<div id=\"value\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t${arrow}\n\t\t\t</main>\n\t\t\t<slot id=\"options\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._input = this.$('input')\n\t\tthis._value = this.$('#value')\n\t\tthis._selected = []\n\t\t\n\t\tlet options = this.$('#options')\n\t\tthis.options = []\n\t\t\n\t\toptions.assignedNodes&&options.assignedNodes().map(el=>{\n\n\t\t\tif( !el.tagName ) return // skip comments and empty text blocks\n\t\t\t\n\t\t\tif( el.tagName == 'HR' )\n\t\t\t\treturn this.options.push('divider')\n\t\t\t\n\t\t\tif( el.tagName == 'OPTGROUP' )\n\t\t\t\treturn this.options.push({'divider': el.innerHTML})\n\t\t\t\n\t\t\tif( el.tagName != 'OPTION'){\n\t\t\t\treturn this.options.push({'text': el.innerHTML})\n\t\t\t}\n\t\t\t\n\t\t\tif( el.hasAttribute('selected') )\n\t\t\t\tthis._selected.push(el.value)\n\t\t\t\n\t\t\tlet attrs = {}\n\t\t\t\n\t\t\tArray.from(el.attributes).forEach(attr=>{\n\t\t\t\tif( !['value', 'selected'].includes(attr.name) )\n\t\t\t\t\tattrs[attr.name] = attr.value\n\t\t\t})\n\t\t\t\n\t\t\tthis.options.push(Object.assign(attrs, {\n\t\t\t\tlabel: el.innerHTML,\n\t\t\t\tval: el.value||null\n\t\t\t}))\n\t\t})\n\t\t\n\t\tthis.addEventListener('click', this.focus.bind(this))\n\t\tthis.addEventListener('keypress', this.onKeypress.bind(this))\n    }\n\t\n\tonKeypress(e){\n\t\tif( e.code == 'Space' ){\n\t\t\tthis.toggleMenu()\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['disabled']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\tif( name === 'disabled' )\n\t\t\tthis._input.disabled = this.disabled\n\t}\n\t\n\tsetAttributes(){\n\t\t\n\t\tif( this.isEmpty && !this.showEmpty && !this.getAttribute('placeholder') )\n\t\t\tthis.setAttribute('empty', true)\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis.selected = this._selected\n\t}\n\tdisconnectedCallback(){}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n\tget multiple(){ return this.hasAttribute('multiple') }\n\tget showEmpty(){ return this.hasAttribute('show-empty') }\n\t\n\tget value(){\n\t\tif( this.multiple )\n\t\t\treturn this.selected && this.selected.map(m=>m.val)\n\t\telse\n\t\t\treturn this.selected && this.selected.val\n\t}\n\t\n\tset value(val){\n\t\tthis.selected = val\n\t}\n\t\n\tget isEmpty(){\n\t\tlet val = this.value\n\t\treturn this.multiple ? val.length <= 1 && !val[0] : !val\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\n\tset options(opts){\n\n\t\tif( opts instanceof Promise ){\n\t\t\topts.then(result=>{\n\t\t\t\tthis.options = result\n\t\t\t\treturn result\n\t\t\t})\n\t\t\topts = [] // clear options until promise resolves\n\t\t}\n\n\t\tif( Array.isArray(opts) )\n\t\t\topts = opts.map(o=>{\n\t\t\t\tif( typeof o != 'object' )\n\t\t\t\t\treturn {label: o, val: o}\n\t\t\t\telse\n\t\t\t\t\treturn Object.assign({}, o, {val: String(o.val)})\n\t\t\t})\n\t\telse if( typeof opts == 'object' ){\n\t\t\tlet _opts = []\n\t\t\tfor( let k in opts ){\n\t\t\t\t_opts.push({label: opts[k], val: k})\n\t\t\t}\n\t\t\topts = _opts\n\t\t}\n\n\t\tthis.__options = opts\n\t\tthis.selected = this._selected\n\t}\n\tget options(){ return this.__options}\n\t\n\tset selected(val){\n\t\t\n\t\tthis._oldSelected = this._selected.slice(0)\n\t\t\n\t\tif( val === undefined || val === null ) val = []\n\t\telse if( !Array.isArray(val) ) val = [String(val)]\n\t\t\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn val.includes(m.val) || (val.length == 0 && !m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn val.indexOf(a.val) - val.indexOf(b.val)\n\t\t})\n\t\t\n\t\tthis._selected = []\n\n\t\t// if no options, keep the selected value\n\t\t// FIXME: could be improved with the `labels`\n\t\tif( this.options.length == 0 )\n\t\t\tthis._selected = val\n\t\t\n\t\tlet labels = ''\n\t\t\n\t\tselected.forEach(m=>{\n\t\t\t\n\t\t\tthis._selected.push(m.val)\n\t\t\t\n\t\t\tif(m.val || this.showEmpty)\n\t\t\t\tlabels += `<span value=\"${m.val}\">${m.label}</span>`\n\t\t\t\t\n\t\t})\n\t\t\n\t\tthis._value.innerHTML = labels\n\n\t\tthis.setAttribute('value', val.join(','))\n\t\t\n\t\tthis.setAttributes()\n\t}\n\t\n\tget selected(){\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn this._selected.includes(m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn this._selected.indexOf(a.val) - this._selected.indexOf(b.val)\n\t\t})\n\t\t\n\t\treturn this.multiple ? selected : selected[0]\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._input || this.hasAttribute('focused')\n\t}\n\t\n\tfocus(){\n\t\tthis.toggleMenu()\n\t}\n\t\n\tset focused(focused){\n\t\tif( focused ){\n\t\t\tthis._input.focus()\n\t\t\tthis.setAttribute('focused', '')\n\t\t}else{\n\t\t\tthis._input.blur()\n\t\t\tthis.removeAttribute('focused')\n\t\t}\n\t}\n\n\tasync toggleMenu(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tif( this.openMenu ){\n\t\t\tthis.openMenu.resolve(false)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tthis.focused = true\n\t\t\n\t\tlet menuOpts = {\n\t\t\tminW: this.offsetWidth,\n\t\t\tselected: this._selected,\n\t\t\tmultiple: this.multiple ? 'always' : false,\n\t\t\tjumpNav: this.hasAttribute('jump-nav'),\n\t\t\t\n\t\t\t// only called when in multiple mode\n\t\t\tonSelect: selected=>{\n\t\t\t\tthis.selected = Array.isArray(selected) ? selected.map(m=>m.val) : selected.val\n\t\t\t}\n\t\t}\n\n\t\tif( this.search && typeof this.search == \"object\" ){\n\t\t\tif( !this.search.url )\n\t\t\t\tconsole.warn('select-field .search=${} must contain a `url`')\n\t\t\telse\n\t\t\t\tmenuOpts.search = this.search\n\n\t\t}else if( this.hasAttribute('search')){\n\t\t\tlet search = this.getAttribute('search')\n\t\t\t// use search type or assume a URL was given\n\t\t\tmenuOpts.search = SearchTypes.get(search) || {url:search}\n\t\t}\n\n\t\tif( menuOpts.search && this.multiple ){\n\t\t\tdelete menuOpts.search\n\t\t\tconsole.warn('select-field[multiple] does work with `search`')\n\t\t}else if( menuOpts.search  )\n\t\t\tmenuOpts.autoSelectFirst = true\n\n\t\tif( this.getAttribute('search') == 'false' )\n\t\t\tmenuOpts.search = false\n\n\t\t// change \"search.showAll\" to false when over 100 results\n\t\t// lots of results are slow to render to DOM\n\t\tif( this.options.length > SHOW_ALL_RESULTS_THRESHOLD ){\n\t\t\tmenuOpts.search = Object.assign({\n\t\t\t\tshowAll: false,\n\t\t\t\tplaceholder: `Search (${this.options.length} results)`\n\t\t\t}, menuOpts.search)\n\n\t\t}\n\t\t\n\t\tlet menu = this.options\n\t\tlet popoverOpts = {\n\t\t\talign: this.getAttribute('menu-align') || 'bottom',\n\t\t\tmaxHeight: this.getAttribute('menu-max-height') || 'auto',\n\t\t\tmaxWidth: this.getAttribute('menu-max-width') || 'none',\n\t\t\toverflowBoundry: this.getAttribute('menu-overflow') ? 'window' : null,\n\t\t\tadjustForMobile: this.getAttribute('adjust-for-mobile') == 'false' ? false : {type:'actionsheet'}\n\t\t}\n\t\t\n\t\tif( !menu || menu.length == 0 )\n\t\t\tmenu = [{'divider': 'No options available'}]\n\t\t\t\n\t\tthis.openMenu = new Menu(menu, menuOpts)\n\t\t\n\t\tthis.openMenu.el.setAttribute('select-field', this.className)\n\n\t\tlet val = await this.openMenu.popover(this.$('main'), popoverOpts)\n\t\t\n\t\tthis.openMenu = null\n\t\tthis.focused = false\n\t\t\n\t\tif( !device.is_mobile )\n\t\t\tthis._input.focus() // retain focus\n\t\t\n\t\tif( val === false ) return\n\t\t\n\t\tval = this.multiple ? val : [val]\n\n\t\tif( menuOpts.search && menuOpts.search.url ){\n\t\t\t\n\t\t\tlet optionVals = this.options.map(o=>o.val)\n\t\t\t\n\t\t\tval.forEach(v=>{\n\t\t\t\tif( !optionVals.includes(v.val) )\n\t\t\t\t\tthis.__options.push(v)\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.selected = val.map(m=>m.val)\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n}\n\ncustomElements.define('select-field', SelectFieldElement)\n\nexport default customElements.get('select-field')\n","import {html, render} from 'lit-html'\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html'\nimport {live} from 'lit-html/directives/live'\nimport Popover from '../popover'\nimport Dialog from '../dialog'\nimport Panel from '../panel'\nimport Fuse from 'fuse.js'\nimport '../../elements/hr'\nimport '../form/controls/check-box'\nimport '../form/controls/select-field'\nimport device from '../../util/device';\n\nconst styles = require('./style.less')\n\nexport const DefaultOpts = {\n\tselected: false,\n\tmultiple: false,\n\tsearch: 20, // true (always show) or number of results for it to show\n\tminW: false,\n\twidth: null,\n\tautoSelectFirst: false,\n\tjumpNav: false, // true (always show) or number of results for it to show\n\ttypeDelay: 700, // how long until typed characters reset\n\thasMenuIcon: 'right-open',\n\tonSelect: ()=>{}\n}\n\nconst SearchDefaults = {\n\tplaceholder: 'Search',\n\ticon: 'search',\n\tparse: (row)=>{\n\t\treturn {\n\t\t\tlabel: row.label || row.name || row.title || 'Unknown',\n\t\t\tval: row.val || row.id || null,\n\t\t\tdescription: row.description || ''\n\t\t}\n\t}\n}\n\nexport default class Menu {\n\n\tstatic handle(selected, handler, args){\n\t\tif( !selected ) return true\n\n\t\tif( !args )\n\t\t\targs = []\n\t\telse if( !Array.isArray(args) )\n\t\t\targs = [args]\n\n\t\tif( selected.fn && typeof selected.fn == 'function'){\n\t\t\tsetTimeout(()=>{ // move to end of call stack\n\t\t\t\tselected.fn.apply(handler, args)\n\t\t\t})\n\t\t\treturn true\n\t\t}\n\n\t\tif( selected.fn && typeof handler[selected.fn] == 'function' ){\n\t\t\tsetTimeout(()=>{ // move to end of call stack\n\t\t\t\thandler[selected.fn].apply(handler, args)\n\t\t\t})\n\t\t\treturn true\n\t\t}\n\t\t\n\t\treturn false // NOT handled\n\t}\n\t\n\tconstructor(menu=[], opts={}){\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('b-menu')\n\t\tthis.el.classList.add('nopadding')\n\t\tthis.el.menu = this\n\n\t\tif( opts.className )\n\t\t\topts.className.split(' ').forEach(cn=>{\n\t\t\t\tthis.el.classList.add(cn.trim())\n\t\t\t})\n\t\t\n\t\tthis.opts = Object.assign({}, DefaultOpts, opts)\n\t\tthis.menu = menu\n\t\t\n\t\tif( opts.multiple == undefined && this.opts.selected instanceof Array )\n\t\t\tthis.opts.multiple = true\n\t\t\n\t\tlet selected = this.opts.selected !== undefined ? this.opts.selected : []\n\t\tif( Array.isArray(selected) ) selected = selected.slice(0) // clone\n\t\tthis.selected = selected\n\t\t\n\t\tif( this.opts.minW )\n\t\t\tthis.el.style.minWidth = this.opts.minW\n\t\t\n\t\tif( this.opts.maxW )\n\t\t\tthis.el.style.maxWidth = this.opts.maxW\n\t\t\n\t\tif( this.opts.width )\n\t\t\tthis.el.style.width = this.opts.width\n\n\t\tif( this.opts.matching )\n\t\t\tthis.matching(this.opts.matching)\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this))\n\t}\n\n\tget promise(){\n\t\tif( !this._promise )\n\t\t\tthis._promise = new Promise(resolve=>{this._resolve = resolve})\n\t\treturn this._promise\n\t}\n\n\tset promise(val){\n\t\tthis._promise = val\n\t\tif( !val )\n\t\t\tthis._resolve = null\n\t}\n\n\tupdateMenu(menu, selected){\n\t\tthis.menu = menu\n\t\tif( selected != undefined )\n\t\t\tthis.selected = selected\n\t\tthis.render()\n\t}\n\n\tset menu(menu){\n\n\t\tif( typeof menu == 'function' )\n\t\t\tmenu = menu()\n\n\t\tthis.__menu = menu\n\n\t\tif( this.searchUrl && !this.__origMenu )\n\t\t\tthis.__origMenu = menu || []\n\n\t\tif( !this.searchUrl )\n\t\tthis.__fuse = new Fuse(this.__menu, {\n\t\t\tkeys: [{\n\t\t\t\tname: 'dataTitle',\n\t\t\t\tweight: 0.7\n\t\t\t},{\n\t\t\t\tname: 'label',\n\t\t\t\tweight: 0.5\n\t\t\t}, {\n\t\t\t\tname: 'description',\n\t\t\t\tweight: 0.3\n\t\t\t}],\n\t\t\tminMatchCharLength: 3,\n\t\t\tthreshold: 0.4,\n\t\t\tlocation: 0,\n\t\t\tdistance: 300,\n\t\t})\n\t}\n\n\tget menu(){\n\t\treturn this.__menu || []\n\t}\n\n\tget displayMenu(){\n\t\tif( this.__filteredMenu )\n\t\t\treturn this.__filteredMenu\n\t\t\n\t\tif( this.searchIsOn && !this.searchShouldShowAll )\n\t\t\treturn []\n\n\t\tif( this.searchIsOn && this.hideUnselected )\n\t\t\treturn this.menu.filter(m=>m.label===undefined || m.selected)\n\n\t\treturn this.menu\n\t}\n\n\tset selected(keys){\n\n\t\t// always store selected values as an array\n\t\tif( !Array.isArray(keys) )\n\t\t\tkeys = [keys]\n\n\t\tlet keyVals = keys.map(k=>k&&k.val||k)\n\n\t\t// store selected values as the actual values (not just the keys)\n\t\tthis.__selected = this.menu.filter(m=>{\n\n\t\t\tif( m.val === undefined ) return false\n\n\t\t\tlet matchedIndex = keyVals.indexOf(m.val)\n\n\t\t\t// select/deselect each value\n\t\t\tif( matchedIndex > -1 ){\n\t\t\t\tlet mergeData = keys[matchedIndex]\n\t\t\t\t\n\t\t\t\tif( mergeData && typeof mergeData == 'object' )\n                    Object.assign(m, mergeData)\n\n\t\t\t\tm.selected = true\n\n\t\t\t}else{\n\t\t\t\tdelete m.selected\n\t\t\t\tdelete m.selection\n\t\t\t}\n\t\t\t\n\t\t\treturn m.selected\n\t\t})\n\n\t\t// keep values in the order that they were selected\n\t\tthis.__selected = this.__selected.sort((a,b)=>{\n\t\t\treturn keyVals.indexOf(a.val) - keyVals.indexOf(b.val)\n\t\t})\n\t}\n\t\n\tget selected(){\n\t\treturn this.opts.multiple ? this.__selected : this.__selected[0]\n\t}\n\n\ttoggleSelected(item){\n\t\tlet index = this.__selected.indexOf(item)\n\t\t\t\t\n\t\tif( index > -1 && !item.selection ){\n\t\t\titem.selected = false\n\t\t\tthis.__selected.splice(index, 1)\n\t\t\treturn false\n\t\t}else{\n\t\t\titem.selected = true\n\t\t\tthis.__selected.push(item)\n\t\t\treturn true\n\t\t}\n\t}\n\n\tfocusSearch(){\n\t\tlet input = this.el.querySelector('.menu-search-bar input')\n\t\tinput&&input.focus()\n\t}\n\n\tget searchIsOn(){\n\t\tlet s = this.opts.search\n\t\treturn s === true \n\t\t|| (typeof s == 'object')\n\t\t|| (typeof s == 'number' && this.menu.length >= s)\n\t}\n\n\tget searchUrl(){\n\t\treturn this.opts.search&&this.opts.search.url\n\t}\n\n\tget searchShouldShowAll(){\n\t\treturn this.opts.search&&this.opts.search.showAll!==false\n\t}\n\n\tget hideUnselected(){\n\t\treturn this.opts.search&&this.opts.search.hideUnselected===true\n\t}\n\n\tget searchParse(){\n\t\tlet parse = this.opts.search&&this.opts.search.parse\n\t\tif( typeof parse !== 'function' )\n\t\t\tparse = SearchDefaults.parse\n\t\treturn parse\n\t}\n\n\tget searchIcon(){\n\t\treturn (this.opts.search&&this.opts.search.icon) || SearchDefaults.icon\n\t}\n\n\tget searchPlaceholder(){\n\t\treturn (this.opts.search&&this.opts.search.placeholder) || SearchDefaults.placeholder\n\t}\n\n\tget searchSpinner(){\n\t\treturn this.__searchSpinner = this.__searchSpinner || this.el.querySelector('.menu-search-bar b-spinner')\n\t}\n\n\tasync fetchResults(term){\n\n\t\t// already in process of looking up this term\n\t\tif( this._fetchingTerm === term )\n\t\t\treturn\n\n\t\tthis._fetchingTerm = term\n\n\t\tlet url = this.searchUrl\n\n\t\t// URL can be a dynamic function\n\t\tif( typeof url == 'function' )\n\t\t\turl = url(encodeURIComponent(term))\n\t\telse\n\t\t\turl += encodeURIComponent(term)\n\n\t\tthis.searchSpinner.hidden = false\n\n\t\tlet resp = await fetch(url).then(resp=>resp.json())\n\n\t\t// looks like we started searching for another term before we got\n\t\t// this response back, so ignore the results\n\t\tif( this._fetchingTerm !== term )\n\t\t\treturn\n\n\t\t// parse the search results to fit the expected \"menu\" structure\n\t\tif( Array.isArray(resp) )\n\t\t\tthis.menu = resp.map(row=>this.searchParse(row)) \n\t\telse\n\t\t\tthis.menu = []\n\n\t\tthis._fetchingTerm = null\n\t\tthis.searchSpinner.hidden = true\n\n\t\tthis.render()\n\t}\n\n\tappendTo(el){\n\t\tel.appendElement(this.el)\n\t\tthis.render()\n\t}\n\n\trender(){\n\n\t\tlet showJumpNav = this.opts.jumpNav === true\n\t\t\t\t\t\t|| (typeof this.opts.jumpNav == 'number' && this.displayMenu.length >= this.opts.jumpNav)\n\n\t\tthis._active = this.opts.autoSelectFirst ? 0 : null\n\n\t\trender(html`\n\n\t\t\t${this.searchIsOn?html`\n\t\t\t\t<div class=\"menu-search-bar\">\n\t\t\t\t\t<b-icon name=\"${this.searchIcon}\"></b-icon>\n\t\t\t\t\t<b-spinner hidden></b-spinner>\n\t\t\t\t\t<input type=\"text\" placeholder=\"${this.searchPlaceholder}\" value=${this.opts.matching||''}>\n\t\t\t\t</div>\n\t\t\t`:''}\n\n\t\t\t<div class=\"results\">\n\t\t\t\t\n\t\t\t\t${showJumpNav?html`\n\t\t\t\t\t<alphabet-jump-nav>\n\t\t\t\t\t\t<span style=\"color: red\">'alphabet-jump-nav' custom element not loaded</span>\n\t\t\t\t\t</alphabet-jump-nav>`\n\t\t\t\t:''}\n\n\t\t\t\t${this.displayMenu.map((m,i)=>this.renderItem(m,i))}\n\t\t\t</div>\n\n\t\t`, this.el)\n\n\t\t// update popover position\n\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\tthis.presenter._updatePosition()\n\n\t\treturn this\n\t}\n\t\n\trenderItem(m, i){\n\t\t\n\t\tif( m == 'divider' || (m.label == 'divider' && m.val == 'divider') )\n\t\t\treturn html`<b-hr></b-hr>`\n\n\t\tif( m.divider !== undefined )\n\t\t\treturn html`<div class=\"menu-divider\">${m.divider}</div>`\n\t\t\n\t\tif( m.text !== undefined )\n\t\t\treturn html`<div class=\"menu-text\">${m.text}</div>`\n\t\t\n\t\tif( m.title )\n\t\t\treturn html`<div class=\"menu-title\"><h2>${m.title}</h2></div>`\n\n\t\t// capture menu item index for use in resolve (if so desired)\n\t\tm.index = i\n\n\t\tlet icon = ''\n\t\t\n\t\tif( m.icon && typeof m.icon == 'string' )\n\t\t\ticon = html`<b-icon name=\"${m.icon}\"></b-icon>`\n\t\telse if( m.icon ) \n\t\t\ticon = html`<span class=\"icon\">${m.icon}</span>`\n\n\t\tlet checkbox = (this.opts.multiple && !m.clearsAll) || m.selected ? html`<check-box ?checked=${live(m.selected)}></check-box>` : ''\n\t\tlet menuIcon = m.menu && this.opts.hasMenuIcon ? html`<b-icon class=\"has-menu\" name=\"${this.opts.hasMenuIcon}\"></b-icon>` :''\n\n\t\tif( m.selections ){\n\t\t\tlet selections = m.selections\n\t\t\t\n\t\t\tif( this.opts.multiple)\n\t\t\t\tselections = [{label: 'unset', val:''}].concat(selections)\n\n\t\t\tcheckbox = html`<select-field \n\t\t\t\t\t\t\t.options=${selections} \n\t\t\t\t\t\t\tplaceholder=\"unset\"\n\t\t\t\t\t\t\t@change=${this.selectOptionsChanged.bind(this)}\n\t\t\t\t\t\t\t.selected=${m.selection}\n\t\t\t\t\t\t\t></select-field>`\n\t\t}\n\n\n\t\tlet extras = ''\n\t\tif( m.extras ){\n\t\t\textras = m.extras.map(elName=>{\n\n\t\t\t\tif( typeof elName == 'string' && customElements.get(elName) ){\n\t\t\t\t\tlet el = document.createElement(elName)\n\t\t\t\t\tel.item = m\n\t\t\t\t\tel.classList.add('menu-item-extra')\n\t\t\t\t\treturn el\n\t\t\t\t}\n\n\t\t\t\treturn elName\n\t\t\t})\n\t\t}\n\n\t\tlet dataTitle = (m.dataTitle || m.label+' '+m.description).trim().toLowerCase()\n\n\t\tlet label = m.label && m.label.constructor.name == 'TemplateResult' ? m.label : unsafeHTML(m.label||'')\n\t\tlet description = m.description && m.description.constructor.name == 'TemplateResult' ? m.description : unsafeHTML(m.description||'')\n\n\t\treturn html`\n\t\t\t<div class=\"menu-item ${m.className}\" val=${m.val} index=${i}\n\t\t\t\tdata-title=${dataTitle}\n\t\t\t\t?active=${this._active==i}\n\t\t\t\t?icon-only=${!m.label && !m.description} ?selected=${m.selected}>\n\t\t\t\t${checkbox}\n\t\t\t\t${icon}\n\t\t\t\t${m.view&&m.view instanceof HTMLElement ?m.view:html`\n\t\t\t\t\t<span class=\"mi-content\">\n\t\t\t\t\t\t<div class=\"mi-label\">${label}</div>\n\t\t\t\t\t\t<div class=\"mi-description\">${description}</div>\n\t\t\t\t\t</span>\n\t\t\t\t`}\n\t\t\t\t${extras}\n\t\t\t\t${menuIcon}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tselectOptionsChanged(e){\n\t\tlet val = e.currentTarget.value\n\t\tlet data = this.displayMenu[e.currentTarget.parentElement.getAttribute('index')]\n\t\tdata.selection = val\n\n\t\tif( !this.opts.multiple )\n\t\t\tthis.resolve(data)\n\t\telse\n\t\t\tthis.toggleSelected(data)\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet target = e.target\n\n\t\tif( target.tagName == 'SELECT-FIELD' )\n\t\t\treturn\n\n\t\tlet didClickCheckbox = target.tagName == 'CHECK-BOX'\n\t\t\n\t\twhile(target && !target.classList.contains('menu-item')){\n\t\t\ttarget = target.parentElement\n\t\t}\n\t\t\n\t\tif( target ){\n\t\t\t\n\t\t\tlet data = this.displayMenu[target.getAttribute('index')]\n\n\t\t\tif( data.selections && !data.selection )\n\t\t\t\tdata.selection = data.selections[0]&&data.selections[0].val||data.selections[0]\n\t\t\t\n\t\t\tif( data.menu )\n\t\t\t\treturn this._itemMenu(target, data)\n\n\t\t\tif( this.opts.multiple ){\n\n\t\t\t\tif( data.clearsAll || (this.opts.multiple !== 'always' && !didClickCheckbox) ){\n\t\t\t\t\tthis.opts.onSelect&&this.opts.onSelect([data])\n\t\t\t\t\treturn this.resolve([data])\n\t\t\t\t}\n\n\t\t\t\tlet isSelected = this.toggleSelected(data)\n\t\t\t\t\n\t\t\t\tif( this.searchIsOn && this.hideUnselected ){\n\t\t\t\t\tthis.render()\n\t\t\t\t\t// update popover position\n\t\t\t\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\t\t\t\tthis.presenter._updatePosition()\n\t\t\t\t}else if( isSelected ){\n\t\t\t\t\ttarget.classList.add('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = true\n\t\t\t\t}else{\n\t\t\t\t\ttarget.classList.remove('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = false\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.opts.onSelect&&this.opts.onSelect(this.selected)\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.opts.onSelect&&this.opts.onSelect(data)\n\t\t\t\tthis.resolve(data)\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(){\n\t\tlet input = this.el.querySelector('.menu-search-bar input')\n\t\tif( input )\n\t\t\tinput.value = ''\n\t\t\n\t\tthis.menu = this.__origMenu\n\t\tthis.render()\t\n\t}\n\n\tasync _itemMenu(target, data){\n\t\tlet menu = new Menu(data.menu, data.menuOpts||{})\n\n\t\tlet popoverOpts = data.menuOpts && data.menuOpts.popover || {}\n\t\tlet val = await menu.popover(target, popoverOpts) \n\t\tif( val ){\n\t\t\tdata.menuSelected = val\n\t\t\tthis.resolve(data)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\n\t\tif( (e.which >= 65 && e.which <= 90) // a-z\n\t\t|| (e.which >= 48 && e.which <= 57) // 0-9\n\t\t|| [8].includes(e.which) ){ // delete\n\t\t\tthis.onLetterPress(e)\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( e.code == 'Escape' ){\n\t\t\tthis.resolve(false)\n\t\t\treturn;\n\t\t}\n\n\t\t// if( e.target.tagName == 'INPUT' && ['ArrowLeft', 'ArrowRight'].includes(e.code) )\n\t\tif( ['ArrowLeft', 'ArrowRight'].includes(e.code) )\n\t\t\treturn\n\t\t\n\t\t// stop processing the keypress unless it is one of these\n\t\tif( !['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'Space'].includes(e.code) ) return\n\n\t\tif( !this.opts.multiple && e.code == 'Space' ) return\n\t\t\n\t\tlet items = this.el.querySelectorAll('.menu-item')\n\t\tlet activeItem = items[this._active]\n\n\t\t// if active item has a menu open, dont perform any actions\n\t\tif( activeItem && activeItem.classList.contains('popover-open') )\n\t\t\treturn\n\n\t\tif( this.opts.multiple && e.code == 'Space' ){\n\t\t\tif( activeItem ){\n\t\t\t\tactiveItem.click()\n\t\t\t\te.preventDefault()\n\t\t\t\te.stopPropagation()\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( this.opts.multiple && e.code == 'Enter' ){\n\t\t\tthis.resolve(this.selected)\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn\n\t\t}\n\n\t\tif( e.code == 'Enter' ){\n\t\t\tif( activeItem )\n\t\t\t\tactiveItem.click()\n\t\t\t\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( this._active == null )\n\t\t\tthis._active = -1;\n\t\t\n\t\tthis._active += ['ArrowUp', 'ArrowLeft'].includes(e.code) ? -1 : 1;\n\t\t\n\t\tif( this._active < 0 )\n\t\t\tthis._active = items.length - 1\n\t\t\t\n\t\tif( this._active >= items.length )\n\t\t\tthis._active = 0\n\t\t\n\t\tthis.setActiveItem(items[this._active])\n\t\t\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\n\tset active(index){\n\n\t\tif( index == null )\n\t\t\tindex = 0;\n\t\t\n\t\tif( index < 0 )\n\t\t\tindex = this.displayMenu.length - 1\n\t\t\t\n\t\tif( index >= this.displayMenu.length )\n\t\t\tindex = 0\n\t\t\n\t\tthis._active = index\n\t\t\n\n\t\tlet items = this.el.querySelectorAll('.menu-item')\n\t\t\n\t\tif( items.length == 0 ) return\n\n\t\tthis.setActiveItem(items[this._active])\n\t}\n\n\tsetActiveItem(el){\n\n\t\tlet items = Array.from(this.el.querySelectorAll('.menu-item'))\n\n\t\titems.forEach(el=>el.removeAttribute('active'))\n\n\t\tif( typeof el === 'number' )\n\t\t\tel = items[el]\n\t\t\n\t\tthis._active = null\n\t\t\n\t\tif( el ){\n\t\t\tthis._active = items.indexOf(el)\n\n\t\t\tel.setAttribute('active', '')\n\t\t\tel.scrollIntoViewIfNeeded()\n\t\t}\n\t}\n\n\tonLetterPress(e){\n\n\t\tif( e.target.tagName == 'INPUT' ){\n\n\t\t\tsetTimeout(()=>{\n\n\t\t\t\tlet val = e.target.value\n\n\t\t\t\t// interpret only 1 character as \"empty\"\n\t\t\t\tif( !val || val.length < 2 )\n\t\t\t\t\tval = ''\n\n\t\t\t\tif( val === this.__lastFilterVal ) return\n\t\t\t\tthis.__lastFilterVal = val\n\n\t\t\t\tif( this.searchUrl ){\n\n\t\t\t\t\t// must stop typing for a moment before fetching results\n\t\t\t\t\tclearTimeout(this.__searchTermDelay)\n\n\t\t\t\t\tif( !val ){\n\t\t\t\t\t\tthis.menu = this.__origMenu\n\t\t\t\t\t\tthis.render()\n\n\t\t\t\t\t\t// update popover position\n\t\t\t\t\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\t\t\t\t\tthis.presenter._updatePosition()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.__searchTermDelay = setTimeout(()=>{\n\t\t\t\t\t\tthis.fetchResults(val)\n\t\t\t\t\t}, 700)\n\n\t\t\t\t}else{\n\t\t\t\t\tthis.matching(val)\n\t\t\t\t\tthis.render()\n\t\t\t\t\tthis.setActiveItem(this.opts.autoSelectFirst?0:null)\n\t\t\t\t}\n\n\t\t\t}, 0)\n\n\t\t\treturn\n\t\t}\n\n\t\tlet ts = new Date().getTime()\n\n\t\tif( !this._lastLetterPressTS || ts - this._lastLetterPressTS > this.opts.typeDelay )\n\t\t\tthis._lastLetterPress = ''\n\n\t\tthis._lastLetterPressTS = ts\n\n\t\tthis._lastLetterPress += e.key\n\n\t\tlet li = this.el.querySelector(`.menu-item[data-title^=\"${this._lastLetterPress}\"]`)\n\n\t\tif( li )\n\t\t\tthis.setActiveItem(li)\n\t}\n\n\tmatching(val){\n\t\tif( !val )\n\t\t\tthis.__filteredMenu = null\n\t\telse\n\t\t\tthis.__filteredMenu = this.__fuse.search(val)\n\t}\n\t\n\tresolve(data){\n\t\t\n\t\t// if( this.opts.onSelect )\n\t\t// \tthis.opts.onSelect(data)\n\n\t\tlet didHandle = false\n\n\t\tif( this.opts.handler )\n\t\t\tdidHandle = Menu.handle(data, this.opts.handler, this.opts.handlerArgs)\n\n\t\tif( !didHandle && this._resolve ){\n\t\t\tthis._resolve(data)\n\t\t\tthis._resolve = null\n\t\t}\n\t\t\t\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\tscrollToSelected(){\n\t\tsetTimeout(()=>{\n\t\t\tlet el = this.el.querySelector('.selected')\n\t\t\tel && this.setActiveItem(el)\n\t\t},0)\n\t}\n\n\tclose(){\n\t\tthis.presenter&&this.presenter.close()\n\t\tthis.presenter = null\n\t\tthis._resolve = null\n\t\tthis.promise = null\n\t}\n\n/*\n\tPresenters\n*/\n\tpopover(target, opts={}){\n\n\t\tif( this.__filteredMenu && this.__filteredMenu.length == 0 ){\n\t\t\tthis.promise = null\n\t\t\treturn Promise.resolve(false)\n\t\t}\n\n\t\tif( this.presenter && this.presenter instanceof Popover ){\n\t\t\tthis.presenter.positionOver(target)\n\t\t\treturn this.promise\n\t\t}\n\n\t\tif( opts.adjustForMobile && device.isMobile && !device.isiPad ){\n\t\t\tlet modalOpts = {btns: ['cancel','done']}\n\n\t\t\tif( this.searchIsOn )\n\t\t\t\tmodalOpts.anchor = 'top'\n\t\t\t\n\t\t\tif( typeof opts.adjustForMobile == 'object' )\n\t\t\t\tmodalOpts = Object.assign(modalOpts, opts.adjustForMobile)\n\n\t\t\treturn this.modal(modalOpts)\n\t\t}\n\t\t\n\t\tthis.render()\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.presenter = null\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\n\t\tthis.scrollToSelected()\n\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}, mobileOpts){\n\t\tif( mobileOpts && device.isMobile && device.minScreenSize <= 699 )\n\t\t\treturn this.panel(mobileOpts)\n\t\telse\n\t\t\treturn this.panel(opts)\n\t}\n\n\tactionsheet(opts={}){\n\t\treturn this.panel(Object.assign({\n\t\t\ttype: 'actionsheet'\n\t\t}, opts))\n\t}\n\n\tpanel(opts={}){\n\t\t\n\t\tthis.render()\n\t\t\n\t\topts = Object.assign({\n\t\t\ttype: 'modal',\n\t\t\t// animation: 'scale'\n\t\t}, opts)\n\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\t\n\t\t\tthis.presenter = null\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\n\t\tlet dialog = new Dialog({\n\t\t\ticon: opts.icon||'',\n\t\t\ttitle: opts.title||'',\n\t\t\tview: this.el,\n\t\t\tbtns: opts.btns||false\n\t\t})\n\t\tthis.presenter = new Panel(dialog.el, opts)\n\t\tthis.presenter.open()\n\n\t\t// if dialog btn clicked, take action\n\t\tdialog.promise.then(btn=>{\n\t\t\tif( btn )\n\t\t\t\tthis.resolve(btn)\n\t\t\t\t// this.presenter.close()\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t})\n\n\t\tthis.scrollToSelected()\n\t\t\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n}","import {html} from 'lit-html'\n\nexport default class TabView {\n\n    constructor(view){\n        \n        // custom element - we lazy load these\n        if( typeof view === 'string' ){\n\n            this._viewName = view\n            this._viewClass = customElements.get(view)\n\n            if( this._viewClass && this._viewClass.title ){\n                this.__title = this._viewClass.title\n                this.__options = this._viewClass.tabOptions || {}\n                this.__icon = this._viewClass.icon\n                this.__id = this.__title\n            }else{\n                this.__id = this._viewName\n            }\n\n            if( this._viewClass.id )\n                this.__id = this._viewClass.id\n\n        // HTML element\n        }else{\n            view.hidden = true\n            this.__view = view\n            this.__title = view.title\n            this.__icon = view.getAttribute('icon')\n\n            if( view.hasAttribute('view-id') ){\n                this.__id = view.getAttribute('view-id')\n            }else{\n                this.__id = this.__title\n                this.__view.setAttribute('view-id', this.id)\n            }\n\n            this.__view.tabView = this\n            view.title = ''\n        }\n    }\n\n    render(onClick){\n        return this.canDisplay?html`\n            <div class=\"tab-bar-item\" ?active=${this.active} .tabView=${this} @click=${onClick}>\n                <slot name=\"menu:${this.id}\">${this.title}</slot>\n            </div>\n        `:''\n    }\n\n    get active(){ return this.__active }\n    set active(isActive){\n        let didChange = this.__active != isActive\n        this.__active = isActive\n        if( !this.__view ) return // view not created yet\n        \n        if( !didChange )\n            didChange = this.view.hidden == isActive\n\n        this.view.hidden = !isActive\n\n        if( !didChange ) return\n\n        if( isActive )\n            this.view.didBecomeActive&&this.view.didBecomeActive()\n        else\n            this.view.didBecomeInactive&&this.view.didBecomeInactive()\n    }\n\n    get view(){\n        // lazy loading the html element view\n        if( !this.__view ){\n            \n            if( this._viewClass ){\n                this.__view = new this._viewClass()\n                this.__view.tabView = this\n            }else{\n                this.__view = document.createElement('section')\n                this.__view.innerHTML = `<b-paper color=\"red\" border dense><b>${this._viewName}</b> is not a custom element</b-paper>`\n            }\n\n            this.__view.setAttribute('view-id', this.id)\n        }\n        return this.__view \n    }\n\n    get id(){\n        return this.__id\n    }\n\n    get title(){\n        return this.__title || 'No Title'\n    }\n\n    get options(){\n        return this.__options || {}\n    }\n\n    get icon(){ return this.__icon }\n\n    // NOTE: rename to \"route\" ?\n    get path(){\n        if( this._viewClass ){\n            return this._viewClass.path || this.id\n        }else if(this.__view) {\n            return this.__view.path || this.__view.getAttribute('path') || this.id\n        }\n    }\n\n    get canDisplay(){\n        if( !this._viewClass || this._viewClass.canDisplay === undefined ) return true\n        return this._viewClass.canDisplay\n    }\n}","import TabView from './view'\n\nexport default class TabViews extends Map {\n\n    set active(view){\n        \n        if( view instanceof HTMLElement )\n            view = view.tabBar.id\n        if( view instanceof TabView )\n            view = view.id\n        \n        view = this.get(view) || this.first\n        \n        // view is already the active one\n        // if( view && view == this.active )\n        //     return \n\n        if( view && !view.canDisplay ){\n\n            // find the first view we can display\n            let fallbackView\n            this.forEach(v=>{\n                if( !fallbackView && v.canDisplay )\n                    fallbackView = v\n            })\n\n            this.active = fallbackView\n            return false\n        }\n        \n        this.forEach(v=>v.active=false)\n\n        if( view ){\n            this.__active = view.id\n            view.active = true\n        }\n        \n        if( this.key )\n            view ? localStorage.setItem('tab-bar:'+this.key+':active', view.id) : localStorage.removeItem('tab-bar:'+this.key+':active')\n    }\n\n    get active(){\n        let active = this.key ? localStorage.getItem('tab-bar:'+this.key+':active') : this.__active\n        return active && this.get(active)\n    }\n    \n    get first(){\n        return this.at(0)\n    }\n\n    at(i){\n        return Array.from(this.values())[i]\n    }\n\n    get last(){\n        return this.at(this.size-1)\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { LitElement, html, css } from 'lit-element'\nimport Menu from '../menu'\nimport TabViews from './views'\nimport TabView from './view'\nimport debounce from 'lodash/debounce'\n\ncustomElements.define('b-tabs', class extends LitElement {\n\n    static get properties(){return {\n        key: {type: String, reflect: true},\n        layout: {type: String, reflect: true},\n        singlemenu: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.singlemenu = false\n        this.key = ''\n        this.layout = 'top'\n\n        this._resizeHandler = debounce(()=>{\n            this.singlemenu = this.shouldBeSingleMenu\n        }, 250)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        // window.addEventListener('resize', this._resizeHandler)\n\n        if( !this.views ){\n            \n            let views = []\n            this.childNodes.forEach(node=>{\n\n                if( node.nodeName == '#text' ){\n                    let str = node.textContent.trim()\n                    if( !str ) return\n                    let _views = str.split(\"\\n\").map(s=>s.trim())\n                    _views = _views.filter(v=>v) // ignore empty lines\n                    views.push(..._views)\n                    node.textContent = ''\n                \n                }else if( node.slot || ['#comment', 'SCRIPT', 'STYLE'].includes(node.nodeName) ){\n                    // ignore views that have a slot name\n\n                }else if( node.title ){\n                    views.push(node)\n                }else{\n                    node.hidden = true\n                    console.error('Cannot use `'+node.tagName+'` as it is missing a `title`')\n                }\n            })\n\n            this.views = views\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        // window.removeEventListener('resize', this._resizeHandler)\n    }\n\n    // this breaks down when last item is hidden\n    get shouldBeSingleMenu(){\n        if( this.offsetWidth == 0 ) return false\n        let menuItems = this.shadowRoot.querySelectorAll('.tab-bar-item')\n        let last = menuItems[menuItems.length-1]\n        if( !last ) return false\n        return last.offsetLeft+last.offsetWidth >= this.offsetWidth || last.offsetTop+last.offsetHeight >= this.offsetHeight\n    }\n\n    get views(){ return this.__views }\n    set views(views){\n        this.__views = this.__views || new TabViews()\n        this.__views.key = this.key\n\n        views.forEach(v=>{\n            v = new TabView(v)\n            this.__views.set(v.id, v)\n        })\n\n        this.active = this.getAttribute('active') || this.views.active || this.views.first\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            display: grid;\n            flex: 1;\n            min-height: 0;\n\n            --menuBgd: none;\n            --menuFontSize: 1em;\n            --contentPadding: var(--view-gutter);\n            --menuItemPadding: .75em 1em;\n            --menuItemRadius: 4px;\n            --inactiveColor: var(--b-tabs-inactive-color, rgba(0,0,0,.4));\n            --activeColor:  var(--b-tabs-active-color, inherit);\n            --border-color: var(--b-tabs-border-color, rgba(0, 0, 0, 0.1));\n            --contentBgd: none;\n            --contentShadow: none;\n            --contentRadius: 0;\n        }\n\n        .tab-bar {\n            display: flex;\n            font-size: var(--menuFontSize);\n            min-width: 0;\n            overflow: hidden;\n            background: var(--menuBgd);\n        }\n\n        .tab-bar-item {\n            padding: var(--menuItemPadding);\n            cursor: pointer;\n            box-sizing: border-box;\n            color: var(--inactiveColor);\n        }\n\n        .tab-bar-item[active] {\n            color: var(--activeColor)\n        }\n\n        :host(:not([singlemenu])) .single-menu {display: none;}\n        :host([singlemenu]) .tab-bar-item:not(.single-menu) {display: none;}\n\n        :host([sticky]) {\n            --menuBgd: #fff;\n        }\n        \n        :host([sticky]) header {\n            position: sticky;\n            top: 0px;\n            z-index: 1000;\n        }\n\n        :host([layout=\"top\"]) { grid-template-rows: auto 1fr; }\n        :host([layout=\"bottom\"]) { grid-template-rows: 1fr auto; }\n        :host([layout=\"left\"]) { grid-template-columns: auto 1fr; }\n        :host([layout=\"right\"]) { grid-template-columns: 1fr auto; }\n\n        :host([layout=\"left\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            flex-direction: column;\n        }\n\n        :host([layout=\"bottom\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            order: 2;\n        }\n\n        :host([layout=\"top\"]) .tab-bar { border-bottom: solid 1px var(--border-color); }\n        :host([layout=\"bottom\"]) .tab-bar { border-top: solid 1px var(--border-color); }\n        :host([layout=\"left\"]) .tab-bar { border-right: solid 1px var(--border-color); }\n        :host([layout=\"right\"]) .tab-bar { border-left: solid 1px var(--border-color); }\n\n        :host([layout=\"top\"]) .tab-bar-item { border-bottom: solid 2px transparent; }\n        :host([layout=\"bottom\"]) .tab-bar-item { border-top: solid 2px transparent; }\n        :host([layout=\"left\"]) .tab-bar-item { border-right: solid 2px transparent; }\n        :host([layout=\"right\"]) .tab-bar-item { border-left: solid 2px transparent; }\n\n        :host([layout=\"top\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item:hover { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item:hover { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item:hover { border-left-color: currentColor; }\n\n        :host([layout=\"top\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item[active] { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item[active] { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item[active] { border-left-color: currentColor; }\n\n        @media (max-width: 550px) {\n\n            :host([layout=\"left\"]),\n            :host([layout=\"right\"]) {\n                grid-template-columns: none;\n                grid-template-rows: auto 1fr;\n            }\n\n            :host([layout=\"left\"]) .tab-bar,\n            :host([layout=\"right\"]) .tab-bar {\n                flex-direction: row;\n                overflow: auto;\n                -webkit-overflow-scrolling: touch;\n                border-bottom: solid 1px rgba(0,0,0,.1);\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item { border-right: none; }\n            :host([layout=\"right\"]) .tab-bar-item { border-left: none; }\n\n            :host([layout=\"left\"]) .tab-bar-item, \n            :host([layout=\"right\"]) .tab-bar-item {\n                border-bottom: solid 2px transparent;\n                flex-shrink: 0;\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item:hover, \n            :host([layout=\"right\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n\n            :host([layout=\"left\"]) .tab-bar-item[active], \n            :host([layout=\"right\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        }\n\n        /*\n            Slotted Content\n        */\n        slot.content {\n            display: flex;\n            background: var(--contentBgd);\n            box-shadow: var(--contentShadow);\n            border-radius: var(--contentRadius);\n            overflow: var(--overflow, auto);\n        }\n\n        .content::slotted(*) {\n            flex: 1;\n            align-self: flex-start;\n            max-height: 100%;\n            box-sizing: border-box;\n        }\n        \n        /* dont add padding to custom elements */\n        .content::slotted(.padded),\n        .content::slotted(div),\n        .content::slotted(section) {\n            padding: var(--contentPadding);\n        }\n\n        .content::slotted([hidden]) {\n            display: none !important;\n        }\n        \n        /*\n        THEME: root-tabs\n        */\n        :host(.root-tabs) {\n            --activeColor: inherit;\n            --contentBgd: #fff;\n            --contentShadow: rgba(0,0,0,.2) 0 0 3px;\n            --menuFontSize: 1.1em;\n            --menuItemPadding: .65em 1em;\n        }\n\n        :host(.root-tabs) slot.content {\n            border-radius: 4px 0 0 0;\n        }\n\n        :host(.root-tabs) .tab-bar {\n            border: none !important;\n            padding-left: .35em;\n            padding-top: .25em;\n            z-index: 1;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar { padding: 0 0 .5em .5em; }\n        :host(.root-tabs[layout=\"left\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"right\"]) .tab-bar { padding: .5em .5em 0 0; }\n\n        :host(.root-tabs) .tab-bar-item {\n            border: solid 1px transparent;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar-item {\n            border-bottom: none !important;\n            border-radius: var(--menuItemRadius) var(--menuItemRadius) 0 0;\n        }\n\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar-item {\n            border-top: none !important;\n            border-radius: 0 0 var(--menuItemRadius) var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"left\"]) .tab-bar-item {\n            border-right: none !important;\n            border-radius: var(--menuItemRadius) 0 0 var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"right\"]) .tab-bar-item {\n            border-left: none !important;\n            border-radius: 0 var(--menuItemRadius) var(--menuItemRadius) 0;\n        }\n\n        :host(.root-tabs) .tab-bar-item:hover:not([active]) {\n            border-color: rgba(0,0,0,.1);\n            color: rgba(0,0,0,.5);\n        }\n\n        :host(.root-tabs) .tab-bar-item[active] {\n            background: var(--contentBgd);\n            /* border: solid 1px rgba(0,0,0,.1); */\n            box-shadow: rgba(0,0,0,.2) 0 0 3px;\n        }\n    `}\n\n    renderTabBar(){\n\n        if( ['none', 'false'].includes(this.getAttribute('tab-bar')) )\n            return html`<div></div>`\n\n        if( this.getAttribute('tab-bar') ){\n\n            if( !this.__customTabBar ){\n                \n                let TabBar = customElements.get(this.getAttribute('tab-bar'))\n                if( !TabBar ) return console.error(`Tabs: ${this.getAttribute('tab-bar')} does not exist`)\n\n                this.__customTabBar = new TabBar()\n                this.__customTabBar.host = this\n                this.__customTabBar.model = this.model\n                this.__customTabBar.views = this.views\n                this.__customTabBar.onMenuClick = this.menuClick.bind(this)\n                this.__customTabBar.classList.add('tab-bar')\n                this.__customTabBar.part = 'tab-bar'\n                this.__customTabBar.innerHTML = /*html*/`\n                    <span slot=\"menu:before\"><slot name=\"menu:before\"></slot></span>\n                    <span slot=\"menu:after\"><slot name=\"menu:after\"></slot></span>\n                `\n            }else{\n                this.__customTabBar.update()\n            }\n\n            return this.__customTabBar\n\n        }else{\n\n            return html`\n            <header class=\"tab-bar\" part=\"tab-bar\">\n                <slot name=\"menu:before\"></slot>\n                <div class=\"tab-bar-item single-menu\" active @click=${this.popoverMenu}>\n                    <b-icon name=\"menu\"></b-icon>\n                    ${this.views.active.title}\n                </div>\n                ${this.views.map(v=>v.render(this.menuClick))}\n                <slot name=\"menu:after\"></slot>\n            </header>`\n        }\n    }\n\n    render(){return html`\n        ${this.renderTabBar()}\n        <slot class=\"content\"></slot>\n    `}\n\n    async popoverMenu(e){\n\n        let selected = await new Menu(this.views.map(v=>{\n            return {label: v.title, val: v}\n        })).popover(e.target)\n\n        if( selected )\n            this.active = selected.val\n    }\n\n    menuClick(e){\n        let oldVal = this.active\n\n        if( !e.currentTarget.tabView ){\n            return console.error(`Tabs: tab menu items must have .tabView set`)\n        }\n\n        this.dispatchEvent(new CustomEvent('menu-clicked',{\n            detail: {\n                tabView: e.currentTarget.tabView,\n                oldTabView: this.views.get(oldVal)\n            },\n            bubbles: false, \n            composed: true\n        }))\n\n        this.active = e.currentTarget.tabView\n\n        if( this.active != oldVal )\n        this.dispatchEvent(new CustomEvent('active-changed',{\n            detail: {tabView: this.views.active},\n            bubbles: false, \n            composed: true\n        }))\n    }\n\n    onModelChange(){\n\n        // once a model has been set on the tabs (even if setting to null)\n        // we will then begin propagating the model to the tab views\n        this._propagateModel = true\n\n        if( this.views )\n            this.views.active.view.model = this.model\n    }\n\n    get active(){\n        return this.views && this.views.active && this.views.active.id\n    }\n\n    set active(val){\n        this.views.active = val\n        this.update()\n        \n        let view = this.views.active.view\n\n        this.setAttribute('active', this.views.active.id)\n\n        if( this._propagateModel )\n            view.model = this.model\n\n        if( view.parentElement != this)\n            this.appendChild( view )\n    }\n\n})\n\nexport default customElements.get('b-tabs')","import store from '../../util/store'\n\nclass FormHandler extends HTMLElement {\n\t\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis.controlsByKey = {}\n\t\t\n\t\t// bind context to functions\n\t\tthis.onModelSync = this.onModelSync.bind(this)\n\t\tthis.onModelChange = this.onModelChange.bind(this)\n\t\tthis.onModelEdited = this.onModelEdited.bind(this)\n\t\tthis.onEditorChange = this.onEditorChange.bind(this)\n\t}\n\n\tget autoGridArea(){ return this.hasAttribute('auto-grid-area') }\n\t\n\tget autoSave(){ return this.hasAttribute('autosave') }\n\tset autoSave(val){ val ? this.setAttribute('autosave', '') : this.removeAttribute('autosave') }\n\n\tget patchSave(){ return this.hasAttribute('patchsave') }\n\tset patchSave(val){ val ? this.setAttribute('patchsave', '') : this.removeAttribute('patchsave') }\n\t\n\tconnectedCallback(){\n\n\t\tlet host = this.getRootNode().host\n\t\tif( host && !host.formHandler )\n\t\t\thost.formHandler = this\n\n\t\t// allow for nested custom elements to render first\n\t\tsetTimeout(()=>{\n\t\t\tthis.bindControls()\n\t\t},0)\n\t}\n\t\n\tget values(){\n\t\tlet vals = {}\n\t\tthis.controls.forEach(control=>{\n\t\t\tif( control.key )\n\t\t\t\tvals[control.key] = control.value\n\t\t})\n\t\treturn vals\n\t}\n\n\tbindControls(){\n\t\t// TODO: change to `controls`?\n\t\tthis.controls = this.editors = Array.from(this.querySelectorAll('form-control[key], check-box[key], radio-group[key], text-field[key], select-field[key]'))\n\n\t\tthis.controls.forEach(el=>{\n\t\t\tlet key = el.getAttribute('key')\n\t\t\tif( key ){\n\t\t\t\tthis.controlsByKey[key] = el\n\n\t\t\t\tif( this.autoGridArea )\n\t\t\t\t\tel.style.gridArea = key\n\t\t\t}\n\t\t})\n\n\t\tif( this.disabled || this.hasAttribute('disabled') )\n\t\t\tthis.disabled = true\n\n\t\tthis.addEventListener('change', this.onEditorChange, true)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstatic get observedAttributes(){ return ['disabled'] }\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tif( name == 'disabled' )\n\t\t\tthis.disabled = newValue !== null\n\t}\n\n\tdisconnectedCallback(){\n\t\tthis.controls = this.editors = []\n\t\tthis.controlsByKey = {}\n\t\tthis.model = null\n\n\t\tthis.removeEventListener('change', this.onEditorChange)\n\t}\n\n\tget model(){ return this._model }\n\tset model(model){\n\n\t\tif( model == this.model ) return\n\n\t\tif( this.model ){\n\t\t\tthis.model.off('sync', null, this)\n\t\t\tthis.model.off('change', null, this)\n\t\t\tthis.model.off('edited', null, this)\n\t\t\tdelete this._model\n\t\t}\n\n\t\tif( !model ) return\n\n\t\tthis._model = model\n\t\tthis.model._editedAttrs = this.model._editedAttrs || {}\n\n\t\tthis.model.on('sync', this.onModelSync, this)\n\t\tthis.model.on('change', this.onModelChange, this)\n\t\tthis.model.on('edited', this.onModelEdited, this)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstore(vals){\n\t\tlet key = this.getAttribute('store')\n\t\tif( !key ) return undefined\n\n\t\tlet data = store(key) || {}\n\n\t\tif( vals === undefined )\n\t\t\treturn data\n\n\t\tdata = Object.assign(data, vals)\n\n\t\tstore(key, data)\n\t}\n\n\tstoredValue(key, defaultVal=null){\n\t\tif( this.model )\n\t\t\treturn this.model.has(key) ? this.model.get(key): defaultVal\n\t\t\n\t\tlet data = this.store()\n\t\treturn data ? data[key] : defaultVal\n\t}\n\n\t_updateEditors(){\n\t\tif( this.controls && (this.model || this.hasAttribute('store')) ){\n\n\t\t\tthis.controls.forEach(el=>{\n\t\t\t\t// set the value of each editor based on the value in the model\n\t\t\t\tlet key = el.getAttribute('key')\n\t\t\t\tlet val = this.storedValue(key)\n\n\t\t\t\tif( val && val.format )\n\t\t\t\t\tval = val.format(el.control._datePicker?el.control._datePicker.format:'MM/DD/YYYY')\n\n\t\t\t\tif( val !== undefined )\n\t\t\t\t\tel.value = val\n\t\t\t})\n\n\t\t\tthis.setControlIfs()\n\n\t\t}\n\t}\n\t\n\tonModelSync(m, attrs, opts){\n\t\tlet trigger = false\n\t\t\n\t\t// see if we need to clear any \"edited\" attributes\n\t\tfor( let key in attrs ){\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] !== undefined ){\n\t\t\t\ttrigger = true\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if we cleared any edited attributes, trigger the change\n\t\tif( trigger )\n\t\t\tthis.model.trigger('edited', this.model.isEdited(), this.model.editedAttrs())\n\t}\n\t\n\tonModelEdited(isEdited, editedAttrs){\n\t\tthis.controls.forEach(el=>{\n\t\t\tif( editedAttrs[el.key] != undefined && !this.autoSave )\n\t\t\t\tel.setAttribute('unsaved', '')\n\t\t\telse\n\t\t\t\tel.removeAttribute('unsaved')\n\t\t})\n\n\t\tif( !isEdited )\n\t\t\tthis.setControlIfs()\n\t}\n\t\n\tonModelChange(m, opts={}){\n\t\t\n\t\tfor( let key in m.changed ){\n\t\t\t\n\t\t\t// if changed value is different than edited value, clear the edited value\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] && m._editedAttrs[key] != m.changed[key]){\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t\t\n\t\t\t// set the editor with the new value\n\t\t\tif( this.controlsByKey[key] ){\n\t\t\t\tthis.controlsByKey[key].value = m.changed[key]\n\t\t\t\tthis.controlsByKey[key].removeAttribute('unsaved')\n\t\t\t\t\n\t\t\t\t// this causes problems with tracking \"editedAttr\"\n\t\t\t\t// if( m._origAttrs )\n\t\t\t\t// \tm._origAttrs[key] = m.changed[key]\n\t\t\t}\n\t\t}\n\t}\n\t\n\tasync onEditorChange(e){\n\n\t\tif( !e.detail ) return\n\n\t\tlet m = this.model\n\t\tlet el = e.target\n\t\tlet key = el.getAttribute('key')\n\t\tlet val = e.detail.value\n\t\t\n\t\tif( !key ) return\n\t\t\n\t\tlet changes = {}\n\t\tchanges[key] = val\n\t\t\n\t\tif( this.validateChange && await this.validateChange(m, changes, key, val) === false ){\n\t\t\tel.value = changes[key] !== undefined ? changes[key] : el.value\n\t\t\treturn\n\t\t}\n\n\t\t// optionally make other changes based on this change\n\t\t// TODO: think of a way to implement this again for the custom element?\n\t\t// if( this.opts.onEditorChange && this.opts.onEditorChange(m, changes, key, val) === false )\n\t\t// \treturn\n\t\t// if other changes where made from validate, propagate to other controls\n\t\tif( this.validateChange )\n\t\tfor( let _key in changes ){\n\t\t\tif( _key != key ){\n\t\t\t\tlet _el = this.get(_key)\n\t\t\t\tif( _el ) _el.value = changes[_key]\n\t\t\t}\n\t\t}\n\n\t\t// ugh, this is hacky and should be solved a better way\n\t\tif( el.control && el.control.type=='date' && val ){\n\t\t\tchanges[key] = el.control._datePicker.formatted('YYYY-MM-DD')\n\t\t}\n\n\t\tthis.store(changes)\n\t\t\n\t\tif( this.model ){\n\t\t\tif( this.autoSave === true ){\n\t\t\t\tthis.model.save(changes, {patch:this.patchSave||false})\n\t\t\t\tthis.model.trigger('edited', false, changes)\n\t\t\t\tthis.model.trigger('saved', changes)\n\t\t\t}else{\n\t\t\t\tthis.model.editAttr(changes)\n\t\t\t}\n\t\t}\n\n\t\tthis.setControlIfs(key)\n\n\t\tthis.onChange&&this.onChange(changes)\n\t}\n\n\tsetControlIfs(ifKey){\n\n\t\tlet toggleTypes = Object.keys(toggleIf)\n\n\t\tthis.controls.forEach(control=>{\n\n\t\t\ttoggleTypes.forEach(toggleKey=>{\n\n\t\t\t\t// skip controls that dont need testing\n\t\t\t\tif( !control[toggleKey] ) return\n\n\t\t\t\tlet valid = true\n\n\t\t\t\tif( typeof control[toggleKey] == 'function' ){\n\n\t\t\t\t\tvalid = control[toggleKey](this, control)\n\n\t\t\t\t}else{\n\n\t\t\t\t\tif( ifKey && control[toggleKey][ifKey] === undefined ) return\n\t\t\t\t\t\n\t\t\t\t\tfor( let key in control[toggleKey] ){\n\n\t\t\t\t\t\tlet allowedVal = control[toggleKey][key]\n\t\t\t\t\t\t\n\t\t\t\t\t\t// prefer the model, but \n\t\t\t\t\t\tlet val = this.model ? this.model.get(key) : this.get(key).value\n\n\t\t\t\t\t\tif( Array.isArray(allowedVal) ){\n\t\t\t\t\t\t\tif( !allowedVal.includes(val) )\n\t\t\t\t\t\t\t\tvalid = false\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif( allowedVal != val )\n\t\t\t\t\t\t\t\tvalid = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoggleIf[toggleKey](control, valid)\n\n\t\t\t})\n\n\t\t})\n\t}\n\t\n\tget disabled(){ return this.__disabled || false }\n\tset disabled(disabled=false){\n\t\tthis.__disabled = disabled === true\n\t\tthis.controls&&this.controls.forEach(el=>el.disabled=this.__disabled)\n\t}\n\n\tget isInvalid(){\n\t\treturn !!this.controls.find(el=>el.isInvalid)\n\t}\n\t\n\tfocus(index=0){\n\t\tthis.controls[index]&&this.controls[index].focus()\n\t}\n\t\n\tget(key){\n\t\tif( typeof key == 'number' )\n\t\t\treturn this.controls[key]\n\t\t\t\n\t\treturn Array.from(this.controls).find(ed=>ed.key==key)\n\t}\n}\n\ncustomElements.define('form-handler', FormHandler)\n\nexport default customElements.get('form-handler')\n\n\nconst toggleIf = {\n\tdisplayIf(control, valid){\n\t\tif( valid )\n\t\t\tcontrol.hidden = false\n\t\telse\n\t\t\tcontrol.hidden = true\n\t},\n\thideIf(control, valid){\n\t\tif( valid )\n\t\t\tcontrol.hidden = true\n\t\telse\n\t\t\tcontrol.hidden = false\n\t},\n\tdisableIf(control, valid){\n\t\tif( valid )\n\t\t\tcontrol.disabled = true\n\t\telse\n\t\t\tcontrol.disabled = false\n\t},\n\tenableIf(control, valid){\n\t\tif( valid )\n\t\t\tcontrol.disabled = false\n\t\telse\n\t\t\tcontrol.disabled = true\n\t}\n}\n","import {css} from 'lit-element'\n\nexport default css`\nslot#value {\n\tdisplay: none;\n}\n\nslot[name=\"before\"] { grid-area: before }\nslot[name=\"help\"] { grid-area: help }\nslot[name=\"after\"] { grid-area: after }\n\nslot[name=\"before\"],\nslot[name=\"help\"],\nslot[name=\"after\"]{\n\tdisplay: block;\n}\n\n:host {\n\talign-self: flex-start;\n\t/* contain: content; */\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\t--placeholderColor: var(--fc-placeholder-color, rgba(0,0,0,.3));\n\t--selectionBgd: #FFECB3;\n\t--focusBgd: #FFF8E1;\n\t--focusColor: var(--fc-theme);\n\t --bgd:var(--fc-bgd, #fff);\n\t--borderColor: rgba(0,0,0,.3);\n\t--invalidColor: #ff1744;\n\t--unsavedColor: transparent; /*#FFC107;*/\n\t--disabledColor: var(--fc-disabled-color, rgba(0,0,0,.3));\n\t--labelFontFamily: inherit;\n\t--labelFontSize: inherit;\n\t--padY: 0;\n\t--padX: 0;\n}\n\n:host main {\n\tgrid-area: main;\n\twidth: 100%;\n\tposition: relative;\n\tz-index: 10;\n\tdisplay: flex;\n\tline-height: 1em;\n\tcaret-color: #E91E63;\n\tbox-sizing: border-box;\n}\n\n/* :host(:not([disabled]):hover) main, */\n/* :host(:not([disabled]):focus-within) main */\n/* :host(:not([disabled])[focused]) main { */\n\t/* background: var(--focusBgd);\n} */\n\n:host([disabled]) main {\n\tcolor: var(--disabledColor);\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd);\n}\n\n/* :host(:not([disabled])) main {\n\tcursor: text;\n} */\n\n.label {\n\tposition: absolute;\n\tz-index: 0;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\twhite-space: nowrap;\n\tfont-family: var(--labelFontFamily);\n\tfont-size: var(--labelFontSize);\n}\n\n:host([nolabel]) .label {\n\tdisplay: none !important;\n}\n\n.prefix {\n\torder: 10;\n}\n\n.suffix {\n\torder: 30;\n}\n\n.prefix, .suffix {\n\tposition: relative;\n\tz-index: 10;\n\tflex-shrink: 0;\n    color: var(--placeholderColor);\n\tdisplay: flex;\n\talign-items: center;\n}\n\nslot[name=\"prefix\"]::slotted(form-control),\nslot[name=\"suffix\"]::slotted(form-control) {\n\tcolor: #333;\n}\n\n/* .control {\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n} */\n\nslot[name=\"control\"]::slotted(*) {\n\t/* background: red; */\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n}\n\n:host(:not([disabled])) slot[name=\"control\"]::slotted(*) {\n\t-webkit-user-select: text;\n}\n\n/* .control[empty]:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n} */\n\n:host(:not([material])[invalid]) main {\n\tcolor: var(--invalidColor)\n}\n\n.btns {\n\tdisplay: none;\n}\n\n:host([btns]) .btns {\n\torder: 40;\n\tdisplay: grid;\n\t/* height: 100%; */\n\ttop: 0;\n\tflex-direction: column;\n\tmin-width: 0;\n\tflex-grow: 0;\n\tfont-size: 50%;\n\tposition: relative;\n\tcursor: pointer;\n}\n\n.btns > span {\n\tpadding: 0 .25em;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.btns > span svg {\n\theight: 2em;\n\twidth: 2em;\n}\n\n.btn-save:hover {\n\tcolor: green;\n\t/* background: blue; */\n}\n\n.btn-cancel:hover {\n\tcolor: red;\n\t/* background: orange; */\n}\n\n:host([hidden]),\n[hidden] {\n\tdisplay: none !important;\n}\n\nslot[name=\"help\"] {\n\tmargin: .5em 0 0;\n\tfont-size: .8em;\n\tcolor: var(--fc-help-color, rgba(0,0,0,.6));\n\tdisplay: block;\n}\n\n/* some default styles for native input controls */ \n::slotted(input) {\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tcolor: inherit;\n\twidth: 4em; /* flex will make it grow */\n\tborder: none;\n\tbackground: none;\n\tpadding: var(--padX) var(--padY);\n}\n\n/* doesn't appear to work */\n::slotted(input::placeholder) {\n\tcolor: var(--placeholderColor);\n}\n\n/* remove autofill blue/yellow background */\n::slotted(input:-webkit-autofill) {\n    -webkit-box-shadow:0 0 0 50px var(--bgd) inset;\n\t-webkit-text-fill-color: var(--theme-text);\n}\n\n::slotted(input:-webkit-autofill:focus) {\n    -webkit-box-shadow: 0 0 0 50px var(--bgd) inset;\n}\n\n:host([label]:not([material])) {\n\tmargin-top: 1em;\n}\n\n:host(:not([material])) .label {\n\ttop: -1em;\n}\n\n\n/*\n\tMaterial\n*/\n\n:host([material]) {\n\t--focusBgd: transparent;\n\t/* padding-top: .25em; */\n\t--padY: .6em;\n\t--borderColor: var(--fc-border-color, rgba(0,0,0,.2));\n}\n\n:host([material]) main {\n\tborder-bottom: solid var(--fc-border-size, 1px) var(--borderColor);\n\tpadding-top: var(--padY);\n\tborder-radius: var(--fc-border-radius, 0px);\n}\n\n:host([material]:not(:focus-within):not([focused]):hover) main {\n\tbackground: var(--bgd);\n}\n\n:host([material]) main:before {\n\tcontent: '';\n\tborder: solid 2px transparent;\n\tposition: absolute;\n\twidth: calc(100% + 2px);\n\theight: calc(100% + 2px);\n\tbox-sizing: border-box;\n\ttop: -1px;\n\tleft: -1px;\n\tborder-radius: var(--fc-border-radius, 0px);\n}\n\n:host([material]) slot[name=\"control\"]::slotted(*) {\n\tpadding: var(--padY) 0;\n\t/* border-bottom: solid 1px transparent; */\n}\n\n:host([material]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .25em;\n}\n\n:host slot[name=\"control\"]::slotted(check-box) {\n\t border-bottom: solid 2px transparent\n}\n\n/* :host([unsaved]:not([material])) slot[name=\"control\"]::slotted(check-box) {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]) .label {\n\tcolor: var(--placeholderColor);\n\tdisplay: block;\n\ttransition: 120ms;\n\tposition: absolute;\n\tpadding: var(--padY) 0;\n}\n\n:host([material]) .prefix,\n:host([material]) .suffix {\n\tpadding: var(--padY) 0;\n}\n\n:host([material]:not([empty])),\n:host([material][show*=\"placeholder\"]),\n:host([material]:focus-within),\n:host([material][focused]) {\n\t--labelFontSize: .7em;\n}\n\n:host([material]) .control:not([empty]) ~ .label,\n:host([material]:not([empty])) .label,\n:host([material][show*=\"placeholder\"]) .label,\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: inherit;\n\ttransform: translateY(calc(-50% - (var(--padY) / 2)));\n\tz-index: 11;\n}\n\n:host([material][empty]:not([nolabel]):not(:focus-within)) [name=\"control\"]::slotted(*),\n:host([material][empty]:not([nolabel]):not(:focus-within)) [name=\"main\"]::slotted(*) {\n\topacity: 0;\n}\n\n:host([material]:not([show*=\"prefix\"])) .prefix,\n:host([material]:not([show*=\"suffix\"])) .suffix {\n\topacity: 0;\n\ttransition: 120ms;\n}\n\n:host([material][show*=\"placeholder\"]) [name=\"control\"]::slotted(*) {\n\topacity: 1 !important;\n}\n\n/* :host([material]) .control:not([empty]) ~ .prefix,\n:host([material]) .control:not([empty]) ~ .suffix, */\n:host([material]:not([empty])) .prefix,\n:host([material]:not([empty])) .suffix,\n:host([material]:focus-within) .prefix,\n:host([material]:focus-within) .suffix,\n:host([material][focused]) .prefix,\n:host([material][focused]) .suffix {\n\topacity: 1;\n}\n\n:host([material]:focus-within) main:before,\n:host([material][focused]) main:before {\n\tborder-bottom-color: var(--focusColor);\n}\n\n:host([material][invalid]) main:before {\n\tborder-bottom-color: var(--invalidColor);\n}\n\n/* :host([material][unsaved]) main:before {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: var(--focusColor);\n}\n\n:host([material][invalid]) .label {\n\tcolor: var(--invalidColor);\n}\n\n\n/*\n\tMaterial Outline\n*/\n:host([material=\"outline\"]) {\n\t/* margin: 0 .5em .5em 0; */\n\t--padY: .75em;\n\t--padX: .75em;\n}\n\n:host([material=\"outline\"]),\n:host([material=\"outline\"]) main,\n:host([material=\"outline\"]) main:before {\n\tborder-radius: var(--fc-border-radius, 4px);\n}\n\t\n:host([material=\"outline\"]) main {\n\tborder: solid 1px var(--borderColor);\n\tpadding-top: 0;\n\tbackground: var(--bgd);\n}\n\n/* :host([material=\"outline\"]) .control, */\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"outline\"]) .label {\n\tpadding: var(--padX) var(--padY);\n\tborder-radius: var(--fc-border-radius, 3px);\n}\n\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .5em;\n}\n\n:host([material=\"outline\"]) .label {\n\twidth: auto;\n}\n\n:host([material=\"outline\"]) .prefix {\n\tpadding: var(--padX) var(--padY);\n    padding-right: 0;\n    margin-right: calc(var(--padX) * -1);\n}\n\n:host([material=\"outline\"]) .suffix {\n\tpadding: var(--padX) var(--padY);\n    padding-left: 0;\n    margin-left: calc(var(--padX) * -1);\n}\n\n:host([material=\"outline\"]) .control:not([empty]) ~ .label,\n:host([material=\"outline\"]:not([empty])) .label,\n:host([material=\"outline\"]:focus-within) .label,\n:host([material=\"outline\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: var(--padX);\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"outline\"]:focus-within) main:before,\n:host([material=\"outline\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"outline\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"outline\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"outline\"]) slot[name=\"help\"] {\n\tmargin: .5em var(--padX) 0\n}\n\n/*\n\tFilled\n*/\t\t\n:host([material=\"filled\"]) {\n\t--bgd: var(--fc-bgd, #eee);\n\t--focusBgd: var(--bgd);\n\t--padY: .75em;\n\t--padX: .75em;\n\t--placeholderColor: var(--fc-placeholder-color, rgba(0,0,0,.3));\n\t/* margin: 0 0 .5em 0; */\n}\n\n:host([material=\"filled\"]) main {\n\tborder: solid 1px var(--bgd);\n\tpadding-top: 1em;\n\tborder-radius: var(--fc-border-radius, 4px);\n\tbackground: var(--bgd);\n}\n\n:host([material=\"filled\"][outside]) main {\n\tpadding-top: 0;\n}\n\n:host([material=\"filled\"].nolabel) main, /* deprecated, use attribute */\n:host([material=\"filled\"][nolabel]) main {\n\tpadding-top: 0;\n}\n\n:host([material=\"filled\"].dense) main, /* deprecated, use attribute */\n:host([material=\"filled\"][dense]) main {\n\t--padY: .5em;\n}\n\n:host([material=\"filled\"]) main:before {\n\tborder-radius: var(--fc-border-radius, 4px);\n}\n\n:host([material=\"filled\"]) .control,\n:host([material=\"filled\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"filled\"]) .label {\n\tpadding: var(--padY) var(--padX);\n\tborder-radius: 3px;\n}\n\n:host([material=\"filled\"]) slot[name=\"control\"]::slotted(input) {\n\tpadding: 0;\n    margin: var(--padY) var(--padX);\n    border-radius: 0;\n}\n\n:host([material=\"filled\"]) .label {\n\ttransform: translateY(-20%);\n\twidth: auto;\n}\n\n:host([material=\"filled\"][outside]) .label {\n\ttransform: translateY(0%);\n}\n\n:host([material=\"filled\"]) .prefix {\n\tpadding: var(--padY) var(--padX);\n    padding-right: 0;\n    margin-right: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]) .suffix {\n\tpadding: var(--padY) var(--padX);\n    padding-left: 0;\n    margin-left: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]:not([empty])) .label,\n:host([material=\"filled\"][show*=\"placeholder\"]) .label,\n:host([material=\"filled\"]:focus-within) .label,\n:host([material=\"filled\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: var(--padX);\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"filled\"][outside]:not([empty])) .label,\n:host([material=\"filled\"][outside][show*=\"placeholder\"]) .label,\n:host([material=\"filled\"][outside]:focus-within) .label,\n:host([material=\"filled\"][outside][focused]) .label {\n\ttransform: translateY(-100%);\n\tbackground: none;\n\tmargin-left: 0;\n}\n\n:host([material=\"filled\"]:focus-within) main:before,\n:host([material=\"filled\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"filled\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"filled\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"filled\"]) slot[name=\"help\"] {\n\tmargin: var(--padY) var(--padX) 0;\n}\n`","export default (el, val)=>{\n\n    if( !val || val === '0' )\n        el.setAttribute('falsy', '')\n    else\n        el.removeAttribute('falsy')\n        \n        if( !val )\n        el.setAttribute('no-value', '')\n    else\n        el.removeAttribute('no-value')\n        \n    if( !val && !el.getAttribute('placeholder') )\n        el.setAttribute('empty', '')\n    else\n        el.removeAttribute('empty')\n}","export default (el, val) => {\n\n    let required = el.hasAttribute('required')\n\n    // `validate` is deprecated, use `pattern`\n    let pattern = el.getAttribute('pattern') || el.getAttribute('validate')\n\n    if( !pattern && el.validate )\n        return el.validate(val, el) !== false\n    \n    if( !pattern ) return required ? !!val : true\n    \n    switch(pattern){\n        case 'int':\n            pattern = '^\\\\d+$'; break;\n        case 'float':\n        case 'decimal':\n            pattern = '^\\\\d+(\\\\.\\\\d*)?$|^\\\\.\\\\d+$'; break;\n        case 'email':\n            pattern = '^\\\\S+@\\\\S+\\\\.\\\\S+$'; break;\n    }\n    \n    return !required && !val ? true : (new RegExp(pattern)).test(val)\n    \n}","export default (e, el, val) => {\n\n    let okKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Backspace', 'Delete', 'Tab']\n    let metaKey = (e.metaKey || e.ctrlKey)\n    let okPress = okKeys.includes(e.key) || metaKey\n        \n    let max = el.getAttribute('maxlength') || el.getAttribute('max')\n\n    if( max && val.length >= max && !okPress )\n        return true\n    \n    return false\n}","import setValueAttrs from './setValueAttrs'\nimport validatePattern from './validatePattern'\nimport stopMaxLength from './stopMaxLength'\n\nexport default function(input){\n\n    setTimeout(()=>{\n        setValueAttrs(input, input.value)\n    })\n\n    input.addEventListener('change:value', onChange)\n    input.addEventListener('input', onInput)\n    input.addEventListener('focus', onFocus)\n    input.addEventListener('blur', onBlur)\n    input.addEventListener('keydown', onKeyDown)\n\n    // let hasPattern = input.hasAttribute('pattern')\n    // let hasAutocomplete = input.hasAttribute('autoComplete')\n\n    if( input.type == 'email' ){\n        if( !input.pattern ) input.pattern = 'email'\n        if( !input.autocomplete ) input.autocomplete = 'email'\n    }\n\n    if( input.type == 'tel' ){\n        if( !input.autocomplete ) input.autocomplete = 'phone'\n    }\n}\n\n\nconst testPattern = input => {\n\n    if( validatePattern(input, input.value) ){\n        delete input.isInvalid\n        input.removeAttribute('invalid')\n\n    }else if(input.hasAttribute('reset-invalid')){\n        input.value = input._originalVal || ''\n        delete input.isInvalid\n        input.removeAttribute('invalid')\n\n    }else{\n        input.isInvalid = true\n        input.setAttribute('invalid', '')\n    }\n}\n\nconst onChange = e =>{\n    setValueAttrs(e.target, e.target.value)\n}\n\nconst onFocus = e =>{\n    e.target._originalVal = e.target.value\n}\n\nconst onBlur = e =>{\n    testPattern(e.target)\n    setValueAttrs(e.target, e.target.value)\n    delete e.target._originalVal\n}\n\nconst onInput = e =>{\n    setValueAttrs(e.target, e.target.value)\n}\n\nconst onKeyDown = e =>{\n    \n    if( e.target.hasAttribute('invalid') )\n        e.target.removeAttribute('invalid')\n\n    if( e.key == 'Escape' ){\n        e.target.value = e.target._originalVal || ''\n        e.target.blur()\n    }\n\n    // maxlength doesn't work on iOS, so let's implement our own\n    if( stopMaxLength(e, e.target, e.target.value) )\n        e.preventDefault()\n}\n","/*\n\tForm Control\n*/\n\nimport styles from './control.css.js'\nimport nativeInputHelper from './util/nativeInputHelper'\n\nconst CONTROLS = '[slot=\"control\"], .control, text-field, rich-text-field, select-field, check-box, radio-group, token-text-field'\nconst MIRROR_CONTROL_ATTRS = ['invalid', 'empty', 'no-value', 'falsy', 'focused', 'value']\n\n\nclass FormControlElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\tlet prefix = this.getAttribute('prefix') || '<slot name=\"prefix\"></slot>'\n\t\tlet suffix = this.getAttribute('suffix') || '<slot name=\"suffix\"></slot>'\n\n\t\t// if prefix/suffix have spaces at the beginning or end of string assume the\n\t\t// developer wanted the sapce to show and replace with non-breaking space so it does\n\t\tprefix = prefix.replace(/^\\s+/, '&nbsp;')\n\t\tprefix = prefix.replace(/\\s+$/, '&nbsp;')\n\t\tsuffix = suffix.replace(/^\\s+/, '&nbsp;')\n\t\tsuffix = suffix.replace(/\\s+$/, '&nbsp;')\n\t\t\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<slot name=\"before\"></slot>\n\t\t\t<main>\n\t\t\t\t<slot name=\"control\"></slot>\n\t\t\t\t<slot name=\"main\"></slot>\n\t\t\t\t<div class=\"prefix\">${prefix}</div>\n\t\t\t\t<div class=\"label\">${label}</div>\n\t\t\t\t<div class=\"suffix\">${suffix}</div>\n\t\t\t\t<div class=\"btns\">\n\t\t\t\t\t<span class=\"btn-save\">\n\t\t\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"btn-cancel\">\n\t\t\t\t\t\t<svg class=\"j2dfb39\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path><path fill=\"none\" d=\"M0 0h24v24H0z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t\t<slot name=\"help\"></slot>\n\t\t\t<slot name=\"after\"></slot>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis.control = this.querySelector(CONTROLS)\n\t\t\n\t\tif( this.control ){\n\t\t\t\n\t\t\tthis.control.slot = 'control'\n\n\t\t\tthis.mutationObserver = new MutationObserver(mutations=>{\n\t\t\t\tmutations.forEach(m=>{\n\t\t\t\t\t\n\t\t\t\t\t// mirror these attributes from the control onto the form-control\n\t\t\t\t\tif( MIRROR_CONTROL_ATTRS.includes(m.attributeName) ){\n\t\t\t\t\t\tif( this.control.hasAttribute(m.attributeName) )\n\t\t\t\t\t\t\tthis.setAttribute(m.attributeName, this.control.getAttribute(m.attributeName))\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.removeAttribute(m.attributeName)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\t\t\tthis.mutationObserver.observe(this.control, { attributes: true, childList: false, subtree: false });\n\n\t\t\t// if native input, we need to add a helper to set expected values for mutation observer above\n\t\t\tif( this.control.tagName == 'INPUT' )\n\t\t\t\tnativeInputHelper(this.control)\n\t\t}\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this), true)\n\t\t\n\t\tthis.addEventListener('change', this._onChange)\n\n\t\tthis.$$('slot').forEach(slot=>{\n\t\t\tslot.addEventListener('slotchange', e=>{\n\t\t\t\tif( slot.assignedNodes().length == 0 )\n\t\t\t\t\tslot.setAttribute('hidden', '')\n\t\t\t\telse\n\t\t\t\t\tslot.removeAttribute('hidden')\n\t\t\t})\n\t\t})\n    }\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\n\t\tif( e.target.tagName == 'FORM-CONTROL') return\n\t\t\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\tkey: this.key\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t\t\n\t\t// hide slots that are empty\n\t\tthis.$$('slot').forEach(slot=>{\n\t\t\tif( slot.assignedNodes().length == 0 )\n\t\t\t\tslot.setAttribute('hidden', '')\n\t\t\telse\n\t\t\t\tslot.removeAttribute('hidden')\n\t\t})\n\t\t\n\t\t// defer - then make sure the form-control remains as wide as the label\n\t\tsetTimeout(()=>{\n\t\t\tif( this.style.minWidth == '' )\n\t\t\t\tthis.style.minWidth = this.$('.label').offsetWidth\n\n\t\t\tif( this.control )\n\t\t\t\tthis.control.disabled = this.disabled\n\t\t},0)\n\t\t\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' && this.control && this.control.disabled !== undefined)\n\t\t\tthis.control.disabled = this.disabled\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\n\t\n\tget key(){ return this.getAttribute('key')}\n\t\n\tget value(){\n\t\treturn this.control && this.control.value\n\t}\n\t\n\tset value(val){\n\t\tif( this.control )\n\t\t\tthis.control.value = val\n\t\t\n\t\tif( this.control && this.control.tagName == 'INPUT' )\n\t\t\tthis.control.dispatchEvent(new CustomEvent('change:value'))\n\t}\n\n\tget dbValue(){\n\t\tlet control = this.control\n\t\tif( !control ) return undefined\n\t\tlet val = control.dbValue\n\t\treturn val !== undefined ? val : control.value\n\t}\n\t\n\tget options(){ return this.control && this.control.options}\n\t\n\tset options(val){\n\t\tif( this.control )\n\t\t\tthis.control.options = val\n\t}\n\t\t\n\tget isInvalid(){\n\t\treturn this.control&&this.control.isInvalid\n\t}\n\n\tget label(){ return this.$('.label').innerText }\n\tset label(str){\n\t\tthis.$('.label').innerHTML = str\n\t\tif( str ){\n\t\t\tthis.setAttribute('nolabel', '')\n\t\t}else{\n\t\t\tthis.removeAttribute('nolabel')\n\t\t}\n\t}\n\t\n\t_setClassNames(){\n\t\t\n\t\tlet labelNodes = this.$('.label').childNodes\n\t\t\n\t\tif( labelNodes.length == 0 || (labelNodes[0].tagName == 'SLOT' && labelNodes[0].assignedNodes().length == 0) )\n\t\t\tthis.setAttribute('nolabel', '')\n\t}\n\t\n\t_onClick(e){\n\t\t// console.log(e.target);\n\t\tif( e.target == this )\n\t\t\tthis.focus()\n\t\t// if( !e.target.isFocused && !e.target.slot)\n\t\t// \tthis.focus()\n\t}\n\t\n\tfocus(){\n\t\tthis.control && this.control.focus()\n\t}\n\n}\n\ncustomElements.define('form-control', FormControlElement)\n\nexport default customElements.get('form-control')\n","import dayjs from '../../../helpers/day-js';\nimport {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n    display: inline-block;\n    --color: var(--fc-theme);\n    --radius: 4px;\n    text-align: left;\n    border-radius: var(--radius);\n    /* background: #fff; */\n}\n\nmain > header {\n    background: var(--color);\n    color: #fff;\n    padding: 1em 1em 1.25em 1em;\n    border-radius: var(--radius) var(--radius) 0 0;\n    display: grid;\n    grid-template-columns: 1fr auto\n}\n\nmain > header * {\n    margin: 0;\n    padding: 0;\n    font-weight: normal;\n    cursor: pointer;\n    display: inline-block;\n    justify-self: flex-start;\n}\n\nmain > header .today {\n    text-transform: uppercase;\n    font-size: .7em;\n    font-weight: bold;\n    justify-self: flex-end;\n    align-self: flex-start;\n    opacity: .6;\n}\n\nmain > header .today:hover {\n    opacity: 1;\n}\n\nmain > header h4 {\n    margin: 0 0 .75em 0;\n}\n\nmain:not(.pick-year) > header h4 {\n    color: rgba(255,255,255,.5);\n}\n\nmain.pick-year > header h1 {\n    color: rgba(255,255,255,.5);\n}\n\nsection {\n    padding: 1em;\n    position: relative;\n}\n\nnav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    user-select: none;\n}\n\nnav > svg {\n    height: 1.4em;\n    padding: .25em;\n    margin: -.25em;\n\tcolor: var(--theme-text, #000);\n\tfill: currentColor;\n    opacity: .4;\n    cursor: pointer;\n\n}\n\nnav > svg:hover {\n    opacity: 1;\n}\n\nsvg > * {\n\tpointer-events: none;\n}\n\nsection header,\nsection .days {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n    font-size: .8em;\n    text-align: center;\n}\n\nmain.pick-year section > *,\nmain.pick-month section > *{\n\tvisibility: hidden\n}\n\nsection header {\n    color: var(--theme-text-accent, rgba(0,0,0,.3));\n    margin: 1em 0;\n    font-size: .7em;\n}\n\nday {\n    padding: .7em;\n    height: 1.4em;\n    width: 1.4em;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 2em;\n    cursor: pointer;\n}\n\nday[active] {\n    background: var(--color);\n    color: #fff;\n}\n\nday[today]:not([active]) {\n    color: var(--color)\n}\n\n\nyears,\nmonths {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    overflow: auto;\n    /* background: #fff; */\n    border-radius: 0 0 var(--radius) var(--radius);\n\tvisibility: visible !important;\n}\n\nmain:not(.pick-year) years {\n    display: none;\n}\n\nyear {\n    padding: .5em 0;\n    cursor: pointer;\n}\n\nyear[active],\nmonth[active] {\n    color: var(--color);\n    font-size: 1.4em;\n}\n\nmonths {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\tgrid-template-rows: 1fr 1fr 1fr 1fr;\n\talign-content: space-around;\n}\n\nmonth {\n    justify-self: stretch;\n    align-self: stretch;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\nmain:not(.pick-month) months {\n    display: none;\n}\n\n:host([calendar-only]) main > header {\n    display: none;\n}`\n\nconst changeEvent = function(el, details={}){\n    var event = new CustomEvent('change', {\n        bubbles: true,\n        composed: true,\n        detail: Object.assign({}, details, {\n            value: el.value\n        })\n    });\n    \n    el.dispatchEvent(event)\n}\n\nclass DatePickerElement extends HTMLElement {\n\n\tconstructor(){\n\t\tsuper()\n\t\n\t\tlet htmlDaysHeader = dayjs.weekdaysMin().map(str=>`<div>${str}</div>`).join(\"\\n\")\n\n\t\tlet startYear = parseInt(this.getAttribute('year-start') || '1900')\n\t\tlet endYear = parseInt(this.getAttribute('year-end') || '2099')\n\t\tlet years = ''\n\t\twhile(startYear <= endYear){\n\t\t\tyears += `<year value=\"${startYear}\">${startYear++}</year>`\n        }\n        \n        let months = dayjs.monthsShort().map((m,i)=>`<month value=\"${i}\">${m}</month>`).join(\"\\n\")\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<header>\n\t\t\t\t\t<h4 class=\"selected-year\">Year</h4>\n\t\t\t\t\t<a class=\"today\">Today</a>\n\t\t\t\t\t<h1 class=\"selected-date\">Date, Day</h1>\n\t\t\t\t</header>\n\t\t\t\t<section>\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<svg class=\"back\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<div class=\"viewing-month\">Month</div>\n\t\t\t\t\t\t<svg class=\"forward\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</nav>\n\t\t\t\t\t<header>${htmlDaysHeader}</header>\n\t\t\t\t\t<div class=\"days\"></div>\n                    <years>${years}</years>\n                    <months>${months}</months>\n\t\t\t\t</section>\n\t\t\t</main>`\n\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._yearEl = this.$('.selected-year')\n\t\tthis._dateEl = this.$('.selected-date')\n\t\tthis._monthEl = this.$('.viewing-month')\n\t\tthis._monthDays = this.$('main .days')\n\n\t\tthis.shadowRoot.querySelector('main').addEventListener('click', this._onClick.bind(this))\n\t}\n\n\tconnectedCallback(){\n\t\tthis._setDate(this.value)\n    }\n    \n    get value(){ return this.getAttribute('value') }\n\tset value(val){ this._setDate(val) }\n\n\tget format(){ return this.getAttribute('format') || 'MM/DD/YYYY'}\n\tset format(val){ this.setAttribute('format', val) }\n\n\tget date(){ return this._dateSelected.clone() }\n\tget isValid(){ return this._dateSelected.isValid() }\n\n\tformatted(format){\n\t\tif( format === undefined )\n\t\t\tformat = this.format\n\n\t\treturn this._dateSelected.format(format)\n\t}\n\n\t_renderMonth(){\n\n\t\tlet start = this._date.day()\n\t\tlet numDays = this._date.daysInMonth()\n\t\tlet days = new Array(7*6).fill('')\n\t\tlet i = 0\n\n\t\twhile(i<numDays){ days[i+start] = ++i }\n\n\t\tthis._monthDays.innerHTML = days.map(day=>`<day value=\"${day}\">${day}</day>`).join(\"\\n\")\n        this._monthEl.innerHTML = this._date.format('MMMM YYYY')\n        \n        if( this._lookingAtSelectedMonth ){\n\n            let elSelected = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( elSelected )\n\t\t\t\telSelected.setAttribute('active', '')\n        }\n\n        if( this._lookingAtToday ){\n            let el = this.$(`day[value=\"${this._today.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('today', '')\n        }\n\t}\n\n\tnextMonth(){\n\t\tthis._date = this._date.add(1, 'month')\n\t\tthis._renderMonth()\n\t}\n\n\tprevMonth(){\n\t\tthis._date = this._date.add(-1, 'month')\n\t\tthis._renderMonth()\n\t}\n\n\tpickYear(show=true){\n\n        this.pickMonth(false)\n\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-year')\n\n\t\t\tlet activeYear = this.$('year[active]')\n\t\t\tif( activeYear )\n\t\t\t\tactiveYear.scrollIntoView()\n\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-year')\n    }\n    \n    pickMonth(show=true){\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-month')\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-month')\n\t}\n\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\n\t_onClick(e){\n\t\t\n\t\tif( e.target.tagName == 'DAY' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: this._date.year(),\n\t\t\t\t\tmonth: this._date.month(),\n\t\t\t\t\tdate: parseInt(val)\n                })\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.tagName == 'YEAR' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: parseInt(val)\n\t\t\t\t})\n                this.pickYear(false)\n\t\t\t}\n\t\t\treturn\n        }\n        \n        if( e.target.tagName == 'MONTH' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n                    date: 1,\n\t\t\t\t\tmonth: parseInt(val)\n\t\t\t\t})\n                this.pickMonth(false)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.classList.contains('selected-year') )\n\t\t\treturn this.pickYear()\n\n\t\tif( e.target.classList.contains('selected-date') )\n\t\t\treturn this.pickYear(false)\n\n\t\tif( e.target.classList.contains('today') ){\n            this.pickMonth(false)\n            this.pickYear(false)\n            return this._setDate()\n        }\n            \n        if( e.target.classList.contains('viewing-month') )\n            return this.pickMonth()\n\n\t\tif( e.target.tagName == 'svg' ){\n\t\t\te.target.classList.contains('back') ? this.prevMonth() : this.nextMonth()\n\t\t\treturn\n\t\t}\n    }\n    \n    get _lookingAtToday(){\n        this._today = this._today || dayjs()\n        return this._date.year() == this._today.year() && this._date.month() == this._today.month()\n    }\n\n    get _lookingAtSelectedMonth(){\n        this._today = this._today || dayjs()\n        return this._date.year() == this._dateSelected.year() && this._date.month() == this._dateSelected.month()\n    }\n\n\t_setDate(val){\n\n\t\tif( val && typeof val == 'object' ){\n\t\t\tthis._dateSelected = this._dateSelected.set(val)\n\t\t\tthis._date = this._date.set(val)\n\n\t\t\tchangeEvent(this, val)\n\t\t}else{\n\t\t\tthis._date = val ? dayjs(val, this.format) : dayjs()\n\t\t\tthis._dateSelected = this._date.clone()\n\t\t}\n\n\t\tthis._date = this._date.set({date: 1})\n\n\t\tthis._renderMonth()\n\t\tthis._refresh()\n\t}\n\n\t_refresh(){\n\n\t\tif( this._dateSelected.isValid() )\n\t\t\tthis.removeAttribute('invalid')\n\t\telse\n\t\t\tthis.setAttribute('invalid', '')\n\n\t\tthis.setAttribute('value', this.formatted())\n\n        this.$$('[active]').forEach(el=>el.removeAttribute('active'))\n\n\t\tif( !this._dateSelected.isValid() ){\n\t\t\tthis._yearEl.innerHTML = ''\n\t\t\tthis._dateEl.innerHTML = 'Invalid'\n\t\t\treturn\n\t\t}\n\n\t\tif( this._lookingAtSelectedMonth ){\n\t\t\tlet el = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('active', '')\n\t\t}\n\n\t\tlet yearEl = this.$(`year[value=\"${this._dateSelected.year()}\"]`)\n\t\tif( yearEl ){\n\t\t\tyearEl.setAttribute('active', '')\n        }\n        \n        let monthEl = this.$(`month[value=\"${this._dateSelected.month()}\"]`)\n\t\tif( monthEl ){\n\t\t\tmonthEl.setAttribute('active', '')\n\t\t}\n\n\t\tthis._yearEl.innerHTML = this._dateSelected.year()\n\t\tthis._dateEl.innerHTML = this.formatted('ddd, MMM D')\n    }\n}\n\n\ncustomElements.define('date-picker', DatePickerElement)\n\nexport default customElements.get('date-picker')\n","/*\n    HTML Cleaner\n\n    Takes a string of html and removes non-standard\n    html, removes inline styles and classes, and removes\n    any new lines. The end result is a much cleaner\n    underlying html structure.\n\n    ```\n    import {htmlCleaner} from 'util/html-cleander'\n    let html = htmlCleaner.clean(strOfHtml)\n    ```\n\n    You can override the parser if you need (for example, in node.js)\n    \n    ```\n    htmlCleaner.parser = function(str){ return [document, body] }\n    ```\n*/\n\nconst DEFAULT_ALLOW_TAGS = ['p', 'br', 'b', 'strong', 'em', 'i', 'ul', 'ol', 'li']\n\n// TODO: move to param\nconst DEFAULT_ALLOW_STYLES = {\n    fontStyle: ['italic'],\n    fontWeight: ['bold'],\n    textAlign: ['left', 'justify', 'right', 'center']\n}\n\nfunction parser(str){\n    if( typeof DOMParser === 'undefined' )\n        throw Error('DOMParser does not exist')\n        \n    var dom = new DOMParser().parseFromString(str, \"text/html\");\n    return [typeof document !== 'undefined' ? document : dom, dom.body||dom]\n}\n\nfunction stripHTML(str){\n    var [document, body] = this.parser(str)\n    let childNodes = Array.from(body.childNodes)\n    return childNodes.map(node=>node.textContent).join(' ')\n}\n\nfunction clean(str, opts={}){\n\n    opts = Object.assign({\n        keepParent:true,\n        allowTags: DEFAULT_ALLOW_TAGS,\n        allowStyles: DEFAULT_ALLOW_STYLES\n    }, opts)\n    \n    var [document, body] = this.parser(str)\n    var el = document.createElement('div')\n    var p = null\n\n    let childNodes = Array.from(body.childNodes)\n\n    // if there is only one child node and its a paragraph, lets loop \n    // through its child nodes (we'll recreate the <p> tag down below)\n    // we do this because I've seen copy that has fake paragraphs \n    // using br tags inside a paragraph: <p>para 1<br><br>para 2</p>\n    if( childNodes.length == 1 && childNodes[0].tagName == 'P' )\n        childNodes = Array.from(childNodes[0].childNodes)\n\n    childNodes.forEach(node=>{\n\n        // top level <br> tags terminate the current <p>\n        if( node.nodeName == 'BR' )\n            return p = null\n\n        // if we have a top level <p>, lets keep it\n        if( childNodes.length == 1 && node.nodeName == 'P' ){\n            p = node\n\n            // clean all its children\n            cleanNode(null, p, opts)\n\n            // if NOT empty after cleaning, keep it\n            if( p.innerText !== '')\n                el.appendChild(p)\n\n            return\n        \n        // all other tags\n        }else{\n\n            // create a top level <p> if we dont have one\n            if( !p ){\n                p = document.createElement('p')\n                el.appendChild(p)\n            }\n        \n            // cleaning will append to `p`\n            cleanNode(p, node, opts)\n        }\n    })\n\n    if( opts.keepParent === 'never' )\n        el = el.childNodes[0] || el\n    if( opts.keepParent === false && el.childNodes[0].childNodes.length > 1 )\n        el = el.childNodes[0] || el\n\n    let html = el.innerHTML ? el.innerHTML : Array.from(el.childNodes).map(node=>node.toString()).join('')\n\n    // remove line breaks as they dont provide anything and can cause problems in csv exports\n    html = html.replace(/[\\n\\r]/g, ' ')\n    // replace non-breaking spaces with normal spaces\n    html = html.replace(/&nbsp;/g, ' ')\n\n    return html\n}\n\nfunction cleanNode(parent, node, opts={}){\n\n    opts.allowTags = opts.allowTags != undefined ? opts.allowTags : DEFAULT_ALLOW_TAGS\n    opts.allowStyles = opts.allowStyles != undefined ? opts.allowStyles : DEFAULT_ALLOW_STYLES\n\n    // remove all attributes known to be a problem\n    if( node.removeAttribute ){\n        \n        let styles = Object.assign({}, node.style)\n        \n        node.removeAttribute('id')\n        node.removeAttribute('class')\n        node.removeAttribute('style')\n\n        for( let styleName in opts.allowStyles ){\n            let allow = opts.allowStyles[styleName]\n\n            if( allow === true && styles[styleName] ){\n                node.style[styleName] = styles[styleName]\n            }else{\n\n                allow = Array.isArray(allow) ? allow : [allow]\n\n                if( allow.includes(styles[styleName]) ){\n                    node.style[styleName] = styles[styleName]\n                }\n            }\n        }\n    }\n\n    // if the node is a comment or a known weird tag (word docs have things like <o:p>) remove it\n    if( node.nodeName == '#comment' || node.nodeName.match(/:/) )\n        return node.remove()\n\n    // if text node, do some cleaning\n    else if( node.nodeName == \"#text\" ){\n\n        // if the text node is just spaces, remove them\n        // node.textContent = node.textContent.replace(/^\\s+$/g, '')\n\n        // swap multiple spaces in a row for just one space\n        node.textContent = node.textContent.replace(/\\s{2,}/g, ' ')\n\n        // optionally clean more data for platforms that need it\n        // TEST\n        // simplifyTextNode(node)\n    }\n\n    // clean all child nodes of this node\n    let childNodes = node.childNodes ? Array.from(node.childNodes) : []\n    childNodes.forEach(n=>cleanNode(node, n, opts))\n\n    // remove any empty nodes (but keep <br> which are always empty)\n    if( node.nodeName != 'BR' && node.innerText == '' )\n        return node.remove()\n\n    // if( parent && parent.tagName == 'P' ){\n    if( parent ){\n\n        // keep spans that have styles since they will be bold/italics\n        if( node.nodeName == 'SPAN' && node.hasAttribute('style') ){\n            parent.appendChild(node)\n\n        // keep tags we want\n        }else if( (['#text'].concat(opts.allowTags)).includes(node.nodeName.toLowerCase()) ){\n            // make sure inline elements dont start with a <br> tag ie <br><i><br> as this will parse to <p><i><br> and break Quill\n            if( ['i', 'b', 'strong', 'em'].includes(node.nodeName.toLowerCase()) ){\n                if( node.childNodes[0] && node.childNodes[0].nodeName == 'BR' )\n                    node.childNodes[0].remove()\n            }\n            // if( parent.tagName == 'P' )\n            parent.appendChild(node)\n\n        // remove tags we dont want, but keep their contents\n        // example: <font>we want to keep this text and any <b>good</b> tags</font>\n        }else{\n\n            if( node.remove )\n                node.remove()\n            else\n                node.parentNode.removeChild(node) // node.js xmldom\n\n            childNodes = Array.from(node.childNodes)\n            childNodes.forEach(child=>{\n                parent.appendChild(child)\n            })\n        }\n    }\n\n    return node\n}\n\n\nfunction simplifyTextNode(node){\n    // replace fancy quotes with simple ones\n    node.textContent = node.textContent.replace(/[]/g, '\"')\n    node.textContent = node.textContent.replace(/[]/g, \"'\")\n\n    // replace mdash and ndash with regular dashes\n    node.textContent = node.textContent.replace(/[]/g, \"-\")\n\n    // replace ellipsis\n    node.textContent = node.textContent.replace(//g, \"...\")\n}\n\n\nmodule.exports = {\n    clean: clean,\n    stripHTML: stripHTML,\n    parser: parser\n}","\nexport default (str='') => {\n    return str.replace(/\\b'\\b/g, \"\\u2019\")                      // apostrophes\n            .replace(/'(?=[^>]*<)\\b/g, \"\\u2018\")     \t\t\t// Opening singles\n            .replace(/\\b([\\.\\?\\!,]*)(?=[^>]*<)'/g, \"$1\\u2019\")  // Closing singles\n            .replace(/\"(?=[^>]*<)\\b/g, \"\\u201c\")     \t\t\t// Opening doubles\n            .replace(/\\b([\\.\\?\\!,]*)(?=[^>]*<)\"/g, \"$1\\u201d\")  // Closing doubles\n            .replace(/\\.\\.\\./g,  \"\\u2026\")     \t\t\t        // ellipsis\n            .replace(/--/g,  \"\\u2014\")     \t\t\t\t        // em-dashes\n}","// https://jonlabelle.com/snippets/view/javascript/calculate-mean-median-mode-and-range-in-javascript\n\nmodule.exports = {\n\nround(num, decimals=2){\n    if( typeof num == 'string' )\n\t\tnum = parseFloat(num)\n\t\n\tlet divisor = Math.pow(10, decimals)\n\t\n\treturn Math.round(num * divisor) / divisor \n},\n\n/**\n * The \"median\" is the \"middle\" value in the list of numbers.\n *\n * @param {Array} numbers An array of numbers.\n * @return {Number} The calculated median value from the specified numbers.\n */\nmedian(numbers){\n    // median of [3, 5, 4, 4, 1, 1, 2, 3] = 3\n    var median = 0, numsLen = numbers.length;\n    numbers.sort();\n \n    if (\n        numsLen % 2 === 0 // is even\n    ) {\n        // average of two middle numbers\n        median = (numbers[numsLen / 2 - 1] + numbers[numsLen / 2]) / 2;\n    } else { // is odd\n        // middle number only\n        median = numbers[(numsLen - 1) / 2];\n    }\n \n    return median;\n},\n\n/**\n * The \"mode\" is the number that is repeated most often.\n *\n * For example, the \"mode\" of [3, 5, 4, 4, 1, 1, 2, 3] is [1, 3, 4].\n *\n * @param {Array} numbers An array of numbers.\n * @return {Array} The mode of the specified numbers.\n */\nmode(numbers) {\n    // as result can be bimodal or multi-modal,\n    // the returned result is provided as an array\n    // mode of [3, 5, 4, 4, 1, 1, 2, 3] = [1, 3, 4]\n    var modes = [], count = [], i, number, maxIndex = 0;\n \n    for (i = 0; i < numbers.length; i += 1) {\n        number = numbers[i];\n        count[number] = (count[number] || 0) + 1;\n        if (count[number] > maxIndex) {\n            maxIndex = count[number];\n        }\n    }\n \n    for (i in count)\n        if (count.hasOwnProperty(i)) {\n            if (count[i] === maxIndex) {\n                modes.push(Number(i));\n            }\n        }\n \n    return modes;\n},\n\nroundTo(num, ratio=2){\n    num = parseFloat(num)\n    if( isNaN(num) ) return ''\n    return Math.round(num * ratio) / ratio;\n},\n\nprettyDecimal(val='', ratio=null){\n    if( ratio != null )\n        val = this.roundTo(val, ratio)\n\n    val = String(val)\n\n    val = val.replace(/\\.00?$/, '');\n    val = val.replace(/\\.25$/, '');\n    val = val.replace(/\\.50?$/, '');\n    val = val.replace(/\\.75$/, '');\n    val = val.replace(/^0*/, '') // remove leading 0s\n    return val\n}\n\n}","// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nconst mode = require('./math').mode\n\nmodule.exports = (strData, {strDelimiter=',', hasHeader=true}={})=>{\n\n    // Create a regular expression to parse the CSV values.\n    var objPattern = new RegExp(\n        (\n            // Delimiters.\n            \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n            // Quoted fields.\n            \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n            // Standard fields.\n            \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"\n        ),\n            \"gi\"\n        );\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    var arrData = [[]];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    var arrMatches = null;\n\n    strData = strData.trim();\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    while (arrMatches = objPattern.exec( strData )){\n\n        // Get the delimiter that was found.\n        var strMatchedDelimiter = arrMatches[ 1 ];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n        ){\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push( [] );\n        }\n\n        var strMatchedValue;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[ 2 ]){\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[ 2 ].replace(\n            new RegExp( \"\\\"\\\"\", \"g\" ),\n                \"\\\"\"\n            );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[ 3 ];\n\n        }\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[ arrData.length - 1 ].push( strMatchedValue );\n    }\n\n\n    let comments = []\n\n    // filter out comments\n    arrData = arrData.filter(row=>{\n        if( row && row[0][0] == '#' ){\n            comments.push(row)\n            return false\n        }\n        return true\n    })\n\n    let header = []\n    let footer = []\n    let foundRow = false\n    let rowLengths = arrData.map(r=>r.length)\n    let rowLength = mode(rowLengths)[0]\n\n    arrData = arrData.filter(row=>{\n\n        if( row.length < rowLength ){\n\n            if( row[0] && foundRow )\n                footer.push(row)\n            else if( row[0] )\n                header.push(row)\n            \n            return false\n        }\n        foundRow = true\n        return true\n    })\n\n    if( hasHeader ){\n        let header = arrData.shift()\n    \n        arrData = arrData.map(line=>{\n            let obj = {};\n            header.forEach((key, i) => obj[key] = line[i]);\n            return obj\n        })\n    }\n\n    arrData.comments = comments.join(`\\n`)\n    arrData.header = header\n    arrData.footer = footer\n\n    // Return the parsed data.\n    return( arrData );\n}","/*\n\tPlural - create singular or plural sentence based on number given (all numbers but 1 return plural sentence)\n\n\tNew Plural (tagged template)\n\tplural`There {are|is} ${num} item[s]`\n\t\n\tPlaceholders:\n\t{plural|singular} => evaluates based on the following number\n\t[plural|singular] => evaulates based on the preceding number\n\t[plural]\n\n\tOld Plural:\n\tvar str = \"Do you want to delete this? There {are|is} [num] book{s} attached.\"\n\n\tvar num = 2 // or 0, 3, 4, ...\n\t\t\"Do you want to delete this? There are 2 books attached.\"\n\n\tvar num = 1\n\t\t\"Do you want to delete this? There is 1 book attached.\"\n*/\n\nmodule.exports = function(strings, ...keys){\n\t\n\tif( typeof strings == 'string')\n\t\treturn oldPlural(strings, keys[0])\n\t\n\tlet str = ''\n\tstrings.forEach((s,i)=>{\n\t\t\n\t\tlet valAfter = keys[i]||''\n\t\tif( valAfter && typeof valAfter == 'number' ){\n\t\t\tlet indx = valAfter == 1 ? 1 : 0;\n\t\t\ts = s.replace(/\\{(.[^}]*)}/g, function(wholematch,firstmatch){\n\t\t\t\tvar values = firstmatch.split('|');\n\t\t\t\treturn values[indx] || '';\n\t\t\t});\n\t\t}\n\t\t\n\t\tlet valBefore = keys[i-1]||''\n\t\t\n\t\tif( valBefore && typeof valBefore == 'number' ){\n\t\t\tlet indx = valBefore == 1 ? 1 : 0;\n\t\t\ts = s.replace(/\\[(.[^\\]]*)\\]/g, function(wholematch,firstmatch){\n\t\t\t\tvar values = firstmatch.split('|');\n\t\t\t\treturn values[indx] || '';\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tstr += valBefore + s\n\t})\n\treturn str\n}\n\n// DEPRECATED\nfunction oldPlural(str, num){\n\t\n\tif( num instanceof Array )\n\t\tnum = num.length\n\tif( num instanceof Object )\n\t\tnum = Object.keys(num).length\n\t\n\tvar indx = num == 1 ? 1 : 0;\n\n\tif( typeof num != 'number' ){\n\t\tif( globalThis._ === undefined )\n\t\t\treturn console.warn('underscore not installed')\n\n\t\tif( !_.numberFormat )\n\t\t\treturn console.warn('underscore.string not installed')\n\t\t\n\t\tnum = parseFloat(num)\n\t\tnum = _.numberFormat(parseFloat(num), ((num % 1)>0?1:0) )\n\t}\n\n\tstr = str.replace(/\\[num\\]/, num);\n\n\tstr = str.replace(/{(.[^}]*)}/g, function(wholematch,firstmatch){\n\n\t\tvar values = firstmatch.split('|');\n\n\t\treturn values[indx] || '';\n\t});\n\n\treturn str;\n}","\nexport default (file)=>{\n\n    return new Promise(resolve=>{\n\n        var reader = new FileReader();\n\n        reader.onload = e=>{\n            var text = reader.result;\n            resolve(text)\n        }\n\n        reader.readAsText(file);\n    \n    })\n\n}","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var toString = require('./toString'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nmodule.exports = capitalize;\n","import capitalize from 'lodash/capitalize'\n\nexport default str => {\n    return str.replace(/[\\-_]/g, ' ')\n            .split(' ')\n            .map(word=>capitalize(word))\n            .join(' ')\n}","\nexport default (rawData, opts)=>{\n\n\topts = Object.assign({\n\t\tdelimiter: ',',\n\t\tnewline: \"\\n\",\n\t\ttitle: '',\n\t\tdescription: '',\n\t\theader: true,\n\t}, opts)\n\n\n\tif( !rawData || rawData.length == 0 )\n\t\treturn console.log('No data to export');\n\n\t// see if the array of data contains Backbone Models or custom classes that implement `toCSV` or `toJSON`\n\trawData = rawData.map(d=>{\n\t\tif( d && d.toCSV )\n\t\t\treturn d.toCSV()\n\n\t\tif( d && d.toJSON )\n\t\t\treturn d.toJSON()\n\t\t\n\t\treturn d\n\t})\n\t\n\tvar header = Object.keys(rawData[0])\n\tvar rows = rawData.map(d=>Object.values(d))\n\t\t\t\t\n\tvar data = opts.header === false ? rows : [header].concat(rows);\n\n\tif( opts.title || opts.description )\n\t\tdata.unshift([]);\n\n\tif( opts.description )\n\t\tdata.unshift([opts.description]);\n\n\tif( opts.title )\n\t\tdata.unshift([opts.title]);\n\t\n\t// clean data\n\tdata = data.map(row=>{\n\t\treturn row.map(val=>{\n\t\n\t\t\t// encapsulate in \"\" if the value contains a delimiter or new line\n            // TODO: this needs to be dynamic to match the opts\n\t\t\tif( typeof val === 'string' && val.match(/,|\\n|\"/) ){\n\t\t\t\tval = '\"'+val.replace(/\"/gi,'\"\"')+'\"';\n\t\t\t}\n\n\t\t\tif( Array.isArray(val) ){\n\t\t\t\tval = '[array]'\n\t\t\t}\n\t\n\t\t\treturn val;\n\t\t})\n\t})\n\t\n\tlet csvContent = \"\\ufeff\"; // utf-8 bom\n\tdata.forEach(function(infoArray, index){\n\t   let dataString = infoArray.join(opts.delimiter);\n\t   csvContent += index < data.length ? dataString+ opts.newline : dataString;\n\t});\n\n\t\n\treturn csvContent\n}","\nexport default (ts=0)=>{\n    return new Promise(resolve=>{\n        setTimeout(_=>{\n            resolve()\n        }, ts)\n    })\n}","export {default as htmlCleaner} from './htmlCleaner'\nexport {default as normalizeText} from './normalizeText'\nexport {default as csvToArray} from './csvToArray'\nexport {default as plural} from './plural'\nexport {default as readFile} from './readFile'\nexport {default as titleize} from './titleize'\nexport {default as toCSV} from './toCSV'\nexport {default as wait} from './wait'","import {css} from 'lit-element'\nimport dayjs from 'dayjs'\nimport Dialog from '../../dialog'\nimport './date-picker'\nimport setValueAttrs from '../util/setValueAttrs'\nimport validatePattern from '../util/validatePattern'\nimport stopMaxLength from '../util/stopMaxLength'\nimport {normalizeText, htmlCleaner} from '../../../util'\n\nconst styles = css`\n:host {\n\tdisplay: inline-block;\n\tcontain: layout;\n\tmin-width: .25em;\n}\n\n:host(:not([disabled])){\n\tcursor: text;\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd, #FFF8E1);\n}\n\nmain {\n\tdisplay: flex;\n}\n\n:host([input]) .editor {\n\tdisplay: none;\n}\n\n:host(:not([input])) .input {\n\tdisplay: none;\n}\n\n.input {\n\toutline: none;\n\twidth: 100%;\n\tdisplay: inline-block;\n\tmin-height: 1em;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tline-height: 1.2em;\n\tmargin: -.1em 0;\n\tborder: none;\n\tbackground: transparent;\n\t/* background: yellow; */\n}\n\n.editor {\n\tposition: relative;\n\toutline: none;\n\twidth: 100%;\n\tdisplay: inline-block;\n\twhite-space: pre-wrap;\n\tmin-height: 1em;\n\tline-height: 1.2em;\n\tmargin: -.1em 0;\n}\n\n.editor p {\n\tmargin: var(--b-text-field-paragraph-margin, 1em) 0;\n}\n\n.editor p:first-child{ margin-top: 0;}\n.editor p:last-child{ margin-bottom: 0;}\n\n/* :host([single-line]) .editor {\n\twhite-space: nowrap;\n\toverflow-x: auto;\n\toverflow-x: -moz-scrollbars-none; \n}\n\n:host([single-line]) .editor::-webkit-scrollbar {\n\twidth: 0 !important;\n} */\n\n:host([empty]) .editor:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n\t/* position: absolute; */\n}\n\n:host([multiline]) .editor:before {\n\tposition: absolute;\n\tleft: 0;\n    right: 0;\n}\n\n/* keep placeholder on one line, clipping to ellipsis when overflowed */\n:host(:not([multiline])) .editor:before {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 100%;\n}\n\n.calendar {\n\tdisplay: none;\n\topacity: .3;\n\theight: 1.2em;\n    margin: -0.3em -.5em -.5em 0;\n    padding: .25em;\n\tcursor: pointer;\n\tposition: relative;\n\tz-index: 1000;\n}\n\n:host([type=\"date\"]) .calendar {\n\tdisplay: inline-block;\n}\n\n:host([type=\"date\"][disabled]) .calendar {\n\tdisplay: none;\n}\n\n/* .calendar:hover,\n.calendar.popover-open {\n\topacity: .7;\n} */\n\n.input::-webkit-calendar-picker-indicator,\n.input::-webkit-inner-spin-button { \n    display: none;\n}\n\ninput:-webkit-autofill {\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tbackground: red;\n}\n\n/* remove autofill blue/yellow background */\ninput:-webkit-autofill {\n    -webkit-box-shadow:0 0 0 50px var(--bgd) inset;\n    /* -webkit-text-fill-color: #333; */\n}\n\ninput:-webkit-autofill:focus {\n    -webkit-box-shadow: 0 0 0 50px var(--bgd) inset;\n    /* -webkit-text-fill-color: #333; */\n} \n`\n\nclass TextFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\t\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t\n\t\t\t\t<div class=\"editor\" contenteditable=\"true\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t\n\t\t\t\t<input class=\"input\" placeholder=\"${placeholder}\" \n\t\t\t\t\t\ttype=\"${this.input||'text'}\" \n\t\t\t\t\t\tname=\"${this.name||this.input}\"\n\t\t\t\t\t\tautocomplete=\"${this.autocomplete}\">\n\t\t\t\t\t\t\n\t\t\t\t<b-icon name=\"calendar-3\" class=\"calendar\"></b-icon>\n\t\t\t</main>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\n\t\tif( this.isMultiline )\n\t\t\tthis.removeAttribute('input')\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis._editor = this.$('.editor')\n\t\tthis._input = this.$('.input')\n\n\t\tif( this.type == 'date' ){\n\t\t\tthis._datePicker = document.createElement('date-picker')\n\t\t\tthis._datePicker.value = this.value\n\t\t\tthis._datePicker.format = this.format\n\n\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\tlet date = dayjs(this._val)\n\t\t\t\tthis._val = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( this._val ){\n\t\t\tthis._editor.innerHTML = htmlCleaner.clean(this._val, this.htmlClean||{})\n\t\t\tthis._input.value = this._val\n\t\t}\n\n\t\tif( !this._val && this.isMultiline && !this.isPlain ){\n\t\t\tthis._val = '<p><br></p>'\n\t\t\tthis._editor.innerHTML = this._val\n\t\t}\n\t\t\n\t\tthis.innerText = ''\n\t\t\n\t\tthis._editor.addEventListener('paste', this._onPaste.bind(this), true)\n\t\tthis._editor.addEventListener('keydown', this._onKeydown.bind(this), true)\n\t\tthis._input.addEventListener('keydown', this._onKeydown.bind(this), true)\n\t\tthis._editor.addEventListener('keyup', this._onKeypress.bind(this), true)\n\t\tthis._editor.addEventListener('blur', this._onBlur.bind(this))\n\t\tthis._input.addEventListener('blur', this._onBlur.bind(this))\n\n\t\tthis.shadowRoot.addEventListener('click', this._onClick.bind(this))\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\n\t\tthis.shadowRoot.querySelector('.calendar').addEventListener('click', this._onClick.bind(this))\n    }\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled', 'placeholder']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' )\n\t\t\tthis._editor.contentEditable = !this.disabled\n\n\t\tif( name === 'placeholder' )\n\t\t\tthis._editor.dataset.placeholder = newValue\n\t}\n\t\n\tget input(){ return this.getAttribute('input') }\n\tget type(){ return this.getAttribute('type') }\n\tget name(){ return this.getAttribute('name') }\n\tget autocomplete(){ return this.getAttribute('autocomplete') }\n\tget format(){ return this.getAttribute('format') || 'MM/DD/YYYY' }\n\n\tget isMultiline(){ return this.hasAttribute('multiline') }\n\tget isHTML(){ return this.hasAttribute('html') }\n\t// get isPlain(){ return this.hasAttribute('plain') }\n\tget isPlain(){ return !this.isHTML }\n\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\tget value(){ return this._val}\n\n\tget textValue(){\n\t\tif( !this.value ) return this.value\n\t\tlet doc = (new DOMParser()).parseFromString(this.value, 'text/html')\n\t\treturn Array.from(doc.body.childNodes).map(node=>node.nodeValue||node.innerText).join(\"\\n\")\n\t}\n\n\tinsertText(text){\n\t\tif( !this.isFocused )\n\t\t\tthis.focus()\n\t\tdocument.execCommand('insertText', false, text)\n\t\tthis._updateValue()\n\t}\n\t\n\tset value(val){\n\t\t\n\t\tthis._oldVal = this._val\n\t\t\n\t\tif( this.hasAttribute('default') && !val ){\n\t\t\tval = this.getAttribute('default')\n\t\t\t\n\t\t\tthis._val = val\n\t\t\t\n\t\t\tlet selection = this.select()\n\t\t\tdocument.execCommand('insertText', false, val)\n\t\t\tselection.removeAllRanges();\n\t\t}else{\n\n\t\t\tif( this.type == 'date' ){\n\t\t\t\t\n\t\t\t\tif( val === 'Invalid date' )\n\t\t\t\t\tval = null\n\n\t\t\t\tthis._datePicker.value = val\n\t\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tlet date = dayjs(val)\n\t\t\t\t\tval = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t\t}\n\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tval = this._val\n\t\t\t\t\tthis._datePicker.value = val\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis._val = val\n\n\t\t\tif( this._editor.innerHTML != val ){\n\t\t\t\t\n\t\t\t\tif( this.isMultiline && !this.isPlain )\n\t\t\t\t\tval = val || '<p><br></p>'\n\t\t\t\telse\n\t\t\t\t\tval = val || ''\n\n\t\t\t\tthis._editor.innerHTML = val\n\t\t\t}\n\t\t\t\t\n\t\t\tif( this._input.value != val )\n\t\t\t\tthis._input.value = val\n\t\t}\n\t\t\n\t\tthis._setClassNames()\n\t}\n\n\tget dbValue(){\n\t\tif( this._datePicker )\n\t\t\treturn this.value ? this._datePicker.formatted('YYYY-MM-DD') : this.value\n\t\treturn this.value\n\t}\n\n\tget currentValue(){\n\n\t\t// retain current empty value\n\t\tlet emptyVal = this.value === null ? null : ''\n\n\t\tif( this.input )\n\t\t\treturn this._input.value || emptyVal\n\t\t\t\n\t\telse if( this._editor.innerHTML === '<p><br></p>' || this._editor.innerHTML === '<br>' )\n\t\t\treturn emptyVal\n\t\t\n\t\telse if( this.isHTML )\n\t\t\treturn this._editor.innerHTML || emptyVal\n\t\t\t\n\t\telse\n\t\t\treturn this._editor.innerText || this._editor.innerHTML || emptyVal\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._editor\n\t\t\t|| this.shadowRoot.activeElement == this._input\n\t}\n\t\n\t_setClassNames(){\n\t\tsetValueAttrs(this, this._val)\n\t\tif( this._val && this._val !== '<p><br></p>' )\n\t\t\tthis.removeAttribute('empty')\n\t\telse\n\t\t\tthis.setAttribute('empty', '')\n\t}\n\t\n\t_onClick(e){\n\n\t\t// was calendar icon clicked?\n\t\tif( e.target.classList.contains('calendar') ){\n\t\t\te.stopPropagation()\n\t\t\treturn this.pickDate()\n\t\t}\n\n\t\tif( e.target != this )\n\t\t\treturn\n\n\t\tif( !e.target.isFocused )\n\t\t\tthis.focus()\n\t}\n\n\tasync pickDate(){\n\t\tthis._datePicker.value = this.value\n\t\tlet picker = new Dialog({view: this._datePicker, btns: ['cancel', 'ok']})\n\n\t\tif( await picker.popover(this.$('.calendar'), {\n\t\t\talign: 'left', \n\t\t\toverflowBoundry: 'window',\n\t\t\tmaxHeight: false, \n\t\t\tadjustForMobile: true})\n\t\t){\n\t\t\tthis._changeValue(picker.$('date-picker').value)\n\t\t}\n\t}\n\t\n\t_onPaste(e){\n\t\te.preventDefault();\n\n\t\tlet val = ''\n\n\t\tif( this.isHTML \n\t\t&& !e.clipboardData.types.includes('text/rtf')\n\t\t&& e.clipboardData.types.includes('text/html') )\n\t\t{\n\t\t\tval = e.clipboardData.getData('text/html')\n\t\t\tval = htmlCleaner.clean(val, this.htmlClean||{})\n\t\t}else{\n\t\t\tval = e.clipboardData.getData('text')\n\t\t\t\n\t\t\t// remove excessive line breaks\n\t\t\tval = val.replace(/\\n{2,}/g, \"\\n\")\n\n\t\t\tif( this.isHTML )\n\t\t\t\tval = '<p>'+val.split(`\\n`).join(`</p>\\n<p>`)+'</p>'\n\t\t\telse\n\t\t\t\tval = val.split(`\\n`).join(`<br>\\n`)\n\t\t}\n\n\t\tlet eventDetail = {\n\t\t\tstr: val,\n\t\t\textras: []\n\t\t}\n\n\t\t// only keep first line, but send extra lines in the event detail\n\t\tif( !this.isMultiline ){\n\n\t\t\tlet lines = []\n\n\t\t\tlet div = document.createElement('div')\n\t\t\tlet cleanOpts = Object.assign({\n\t\t\t\tkeepParent: false,\n\t\t\t\tallowTags:['p', 'b', 'i', 'strong', 'em']\n\t\t\t}, this.htmlClean||{})\n\n\t\t\tdiv.innerHTML = htmlCleaner.clean(val, cleanOpts)\n\t\t\t\n\t\t\tlet isInlineText = div.firstChild instanceof Text || !['P','DIV'].includes(div.firstChild.tagName)\n\n\t\t\tif( cleanOpts.keepParent == 'never' || isInlineText )\n\t\t\t\tlines.push(this.isHTML ? div.innerHTML : div.textContent)\n\t\t\t\t\n\t\t\telse for( let child of div.childNodes ){\n\t\t\t\tlines.push( this.isHTML ? (child.outerHTML||child.textContent) : child.textContent )\n\t\t\t}\n\n\t\t\teventDetail.str = val = lines.shift()\n\t\t\teventDetail.extras = lines \n\t\t}\n\n\t\t// NOTE: using insertHTML (rather than insertText) keeps the browser from\n\t\t// converting line breaks to <div> and <br> tags\n\t\tdocument.execCommand('insertHTML', false, val);\n\n\t\tthis._updateValue()\n\n\t\tthis.dispatchEvent(new CustomEvent(\"pasted\", {detail:eventDetail}));\n\t}\n\t\n\tget editorEl(){\n\t\treturn this.input ? this._input : this._editor\n\t}\n\t\n\tselect(range='all'){\n\n\t\tlet el = this.editorEl,\n\t\t    s = window.getSelection(),\n\t\t    r = document.createRange();\n\t\t\n\t\tif( range == 'start' ){\n\t\t\tr.setStart(el, 0);\n\t\t\tr.setEnd(el, 0);\n\t\t}else if( range == 'end' ){\n\t\t\tr.setStart(el, el.childNodes.length);\n\t\t\tr.setEnd(el, el.childNodes.length);\n\t\t}else{\n\t\t\tr.selectNodeContents(el);\n\t\t}\n\t\t\n\t\ts.removeAllRanges();\n\t\ts.addRange(r);\n\t\treturn s\n\t}\n\n\t_onKeypress(e){\n\t\tif( !this.input && this._editor.innerText.trim() == '' )\n\t\t\tthis.setAttribute('empty', '')\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t_onKeydown(e){\n\t\tlet stop = false\n\t\t\n\t\tthis.isInvalid = false\n\n\t\tif( e.key.length == 1)\n\t\t\tthis.removeAttribute('empty')\n\n\t\t// make sure to remove trailing <br> when deleting content\n\t\tif( e.key == 'Backspace' && this.isHTML ){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tif( this._editor.innerHTML == '<br>' )\n\t\t\t\t\tthis._editor.innerHTML = ''\n\t\t\t})\n\t\t}\n\n\t\tif( e.key == 'Backspace' && this.isMultiline && this._editor.innerText.trim() == '' ){\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn false\n\t\t}\n\n\t\t// Multiline Plain  only use newlines (keep divs/br from appearing)\n\t\tif( e.key == 'Enter' && this.isMultiline && this.isPlain ){\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\n\t\t\tlet charLen = this._editor.innerText.length\n\t\t\tlet lastChar = this._editor.innerText[charLen-1]\n\t\t\tlet sel = this.shadowRoot.getSelection()\n\t\t\tlet range = sel.getRangeAt(0);\n\n\t\t\tif( range.endOffset < charLen || lastChar=='\\n' )\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, '\\n');\n\t\t\telse\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, '\\n\\n');\n\t\t\t\n\t\t\treturn false\n\t\t}\n\t\t\n\t\tif( e.key == 'Enter' && (!this.isMultiline || e.metaKey || e.ctrlKey )){\n\t\t\tstop = true\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\n\t\t\t// NOTE: will this be weird to not blur on enter?\n\t\t\tthis._updateValue()\n\t\t\t// this.blur() // will trigger a change if there is one\n\n\t\t\tlet detail = {\n\t\t\t\tshiftKey: e.shiftKey,\n\t\t\t\tctrlKey: e.ctrlKey,\n\t\t\t\tmetaKey: e.metaKey,\n\t\t\t}\n\n\t\t\t// Force change event for empty search/ re-search\n\t\t\tif( !this.value )\n\t\t\t\tthis.dispatchEvent(new CustomEvent(\"change\", {detail}));\n\t\t\t\n\t\t\tthis.dispatchEvent(new Event(\"enterkey\")); // DEPRECATED\n\t\t\tthis.dispatchEvent(new CustomEvent(\"submit\", {detail})); // I think this makes more sense\n\t\t}\n\t\t\n\t\tif( e.key == 'Escape' ){\n\t\t\tthis.value = this.value // reset the value\n\t\t\tthis.blur()\n\t\t\tthis.dispatchEvent(new Event(\"esckey\"));\n\t\t}\n\n\t\tthis._didPressKey = true\n\n\t\tlet val = this.input ? this._input.value : this._editor.innerText\n\t\tstop = stopMaxLength(e, this, val)\n\n\t\tlet delay = this.getAttribute('change-delay')\n\t\tclearTimeout(this._changeDelay)\n\t\tif( delay !== null ){\n\t\t\tdelay = delay || 500\n\t\t\tthis._changeDelay = setTimeout(this._updateValue.bind(this), delay)\n\t\t}\n\n\t\tif( stop ){\n\t\t\te.preventDefault()\n\t\t}else if( !this.hasAttribute('bubble-keypress') ){\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\tfocus(){\n\t\tif( this.input )\n\t\t\tthis._input.focus()\n\t\telse\n\t\t\tthis.select('end')\n\t}\n\n\t_onBlur(){\n\t\tif( this._didPressKey )\n\t\t\tthis._updateValue()\n\t\t\t\n\t\tdelete this._didPressKey\n\t}\n\t\n\t_updateValue(){\n\t\t\n\t\tlet val = this.currentValue\n\t\t\n\t\tif( !validatePattern(this, val) ){\n\t\t\t\n\t\t\tif( this.hasAttribute('reset-invalid') ){\n\t\t\t\tthis.value = this.value\n\t\t\t}else{\n\t\t\t\tthis.value = val\n\t\t\t\tthis.isInvalid = true\n\t\t\t\tthis._setClassNames()\n\t\t\t}\n\t\t\t// }else{\n\t\t\t// \t\n\t\t\t// \tthis.focus()\n\t\t\t// }\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( val == this.value )\n\t\t\treturn\n\t\t\n\t\tlet max = this.getAttribute('max')\n\t\tif( max )\n\t\t\tval = val.slice(0, max)\n\t\t\n\t\tthis._changeValue(val)\n\t}\n\n\t_changeValue(val){\n\t\tthis.value = val\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\toldVal: this._oldVal\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n}\n\ncustomElements.define('text-field', TextFieldElement)\n\nexport default customElements.get('text-field')\n","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: var(--fc-theme);\n\t--colorDisabled: var(--fc-disabled-color, rgba(0, 0, 0, 0.26));\n\t--labelSize: 1em;\n\t--labelColor: currentColor;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n:host(.control) {\n\tflex-grow: 0 !important;\n}\n\n:host([active]) svg.inactive,\n:host(:not([active])) svg.active {\n\tdisplay: none\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n:host([placement=\"top\"]) main { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) main { flex-direction: column; }\n:host([placement=\"left\"]) main { flex-direction: row-reverse; }\n:host([placement=\"right\"]) main { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\nsvg.active {\n\tfill: var(--color);\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled);\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nlabel {\n\tfont-size: var(--labelSize);\n\tcolor: var(--labelColor);\n}\n\nmain label {\n\tcursor: pointer;\n}`\n\nclass RadioBtnElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"inactive\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<svg class=\"active\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<label>${label}</label>\n\t\t\t</main>\n\t\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.active = !this.active\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tset active(val){\n\t\tval ? this.setAttribute('active', '') : this.removeAttribute('active')\n\t}\n\t\n\tget active(){ return this.hasAttribute('active') }\n\tget value(){ return this.hasAttribute('value') ? (this.getAttribute('value')||null) : this.getAttribute('label') }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('radio-btn', RadioBtnElement)\n\nexport default customElements.get('radio-btn')\n","\nclass RadioGroupElement extends HTMLElement {\n\n\tget key(){ return this.getAttribute('key')}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\t// let shadow = this.attachShadow({mode: 'open'})\n\t\t// let temp = document.createElement('template')\n\t\t// temp.innerHTML = `<style>${styles}</style>`\n\t\t// this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\n\t\tthis.style.outline = 'none'\n\t\t\n\t\tthis.addEventListener('change', this._onChange.bind(this), true)\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['ArrowLeft', 'ArrowUp'].includes(e.code) ){\n\t\t\t\tthis.nav(-1)\n\t\t\t}else if( ['ArrowRight', 'ArrowDown'].includes(e.code) ){\n\t\t\t\tthis.nav(1)\n\t\t\t}\n\t\t})\n\n\t\tthis.onChildrenChange = this.onChildrenChange.bind(this)\n\t\tconst observer = new MutationObserver(this.onChildrenChange);\n\t\tobserver.observe(this, {attributes: false, childList: true, subtree: false});\n\t}\n\n\tonChildrenChange(e){\n\t\tthis.radios = Array.from(this.querySelectorAll('radio-btn'))\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\n\t\tthis.radios = Array.from(this.querySelectorAll('radio-btn'))\n\t}\n\t\n\tnav(dir=1){\n\t\tlet i = this.radios.indexOf(this.active)\n\t\t\n\t\tif( i == undefined ) i = dir < 0 ? this.radios.length-1 : 0\n\t\telse i += dir\n\t\t\n\t\tif( i >= this.radios.length ) i = 0\n\t\telse if( i < 0 ) i = this.radios.length-1\n\t\t\n\t\tthis.value = this.radios[i].value\n\t}\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\t\t\n\t\tthis.value = e.target.value\n\t\tthis.setAttribute('value', this.value)\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tget active(){\n\t\treturn this.radios.find(el=>el.active)\n\t}\n\t\n\tget value(){\n\t\tlet radio = this.active\n\t\treturn radio && radio.value\n\t}\n\t\n\tset value(val){\n\t\t(this.radios||[]).forEach(el=>{\n\t\t\tif( el.value == val )\n\t\t\t\tel.active=true\n\t\t\telse\n\t\t\t\tel.active=false\n\t\t})\n\t\tthis.setAttribute('value', val)\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){\n\t\tval ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n\t\tthis.radios.forEach(el=>el.disabled=val)\n\t}\n\t\n}\n\ncustomElements.define('radio-group', RadioGroupElement)\n\nexport default customElements.get('radio-group')\n","/*\n\tForm Controls\n*/\nimport './handler'\nimport './control'\nimport './controls/text-field'\nimport './controls/select-field'\nimport './controls/check-box'\nimport './controls/radio-btn'\nimport './controls/radio-group'\nimport './controls/touch-ripple'\nimport './controls/range-slider'\n\n// must manually import this as it adds quite a bit of overhead with Quill\n// import './controls/rich-text-field'","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import Emitter from 'component-emitter'\n\nexport default class DataSource {\n\n    constructor(opts={}){\n        this.reset()\n\n        this.opts = Object.assign({\n            perPage: 30,\n            fetch: true,\n            fetchOnLoad: true\n        }, opts)   \n    }\n\n    reset(){\n        this._pageFetched = null\n        this.lastFiltered = 0\n        this._rawData = []      // unaltered data from server\n        this._filteredData = [] // raw data with after filters applied\n        this.data = []          // filtered data with \"search term\" applied\n    }\n\n    set coll(coll){\n        this.hasFetched = false\n        this.__coll = coll\n    }\n    get coll(){ return this.__coll}\n\n    async refilter(){\n        this.lastFiltered = 0\n        this._rawData = this.coll && this.coll.models || this.coll || []\n        this._filteredData = this._rawData\n        this.data = this._rawData\n\n        await this.applyFilters()\n    }\n\n    get perPage(){ return this.opts.perPage }\n\n    async length(){\n\n        if( this._fetching )\n            await this._fetching\n\n        return this.data.length\n    }\n    \n    at(i){ return this.data[i] }\n    first(i){ return this.data[0] }\n    last(){ return this.data[this.data.length-1]}\n\n    forEach(fn){ return this.data.forEach(fn) }\n    map(fn){ return this.data.map(fn) }\n    flatMap(fn){ return this.data.flatMap(fn) }\n    filter(fn){ return this.data.filter(fn) }\n    reduce(fn, start=0){ return this.data.reduce(fn, start) }\n\n    async _fetchFromServer(pageAt){\n\n        // TODO: support fetching data with `fetch` and a url?\n        if( this.coll && this.coll.fetchSync ){\n\n            let data = {term:this.filters.term||''}\n\n            if( this.opts.fetch == 'more' ){\n                data.pageAt = pageAt\n                data.perPage = this.perPage\n            }\n\n            if( this.filters )\n                data.filters = this.filters.toPostData()\n\n            if( this.sorts )\n                data.sorts = this.sorts.value\n\n            await this.coll.fetchSync({\n                data:data,\n                merge: true,\n                // for Backone 0.9.10/0.9.9, 'update' is needed to register change events on the model, rather than mass \"reset\" (see line 815 in backbone source)\n                update: true,\n            })\n        }\n    }\n\n    fetch(pageAt){\n        return this._fetching = new Promise(async (resolve, reject)=>{\n\n            if( (pageAt == 0 && this._rawData.length == 0) \n            || (this._pageFetched != pageAt && this._rawData.length == pageAt && this.opts.fetch == 'more' ) ){\n\n                this._pageFetched = pageAt\n\n                if( this.opts.fetch )\n                    await this._fetchFromServer(pageAt).catch(err=>{\n                        reject(err)\n                    })\n                \n                await this.refilter()\n            }\n\n            // why was I doing this? it doesn't work when data is filtered\n            // if( this._rawData.length > pageAt )\n            //     this.emit('change:count', this._rawData.length)\n\n            if( this._filtering )\n                await this._filtering\n\n            if( this._sorting )\n                await this._sorting\n\n            this.hasFetched = true\n\n            resolve(this.data.slice(pageAt, pageAt+this.opts.perPage))\n        }).finally(_=>delete this._fetching)\n    }\n\n    applyFilters(){\n        return this._filtering = new Promise(async resolve=>{\n\n            if( !this.filters ) return resolve(this.data)\n\n            if( this.lastFiltered < this.filters.lastChanged ){\n                this.data = await this.filters.filter(this._rawData)\n                await this.sort()\n                this._filteredData = this.data\n            }\n\n            this.data = await this.filters.filterByTerm(this._filteredData)\n\n            resolve(this.data)\n\n            this.lastFiltered = new Date().getTime()\n\n            clearTimeout(this._applyFiltersEventEmit)\n            this._applyFiltersEventEmit = setTimeout(()=>{\n                this.emit('changed')\n            },500)\n\n\n        }).finally(_=>delete this._filtering)\n    }\n\n    sort(){\n        return this._sorting = new Promise(async resolve=>{\n\n            if( !this.sorts ) return resolve(this.data)\n\n            this.data = await this.sorts.sort(this.data)\n\n            resolve(this.data)\n\n        }).finally(_=>delete this._sorting)\n    }\n}\n\nEmitter(DataSource.prototype)","import { LitElement, html, css } from 'lit-element'\nimport dayjs from 'dayjs'\n\ncustomElements.define('b-list-filter-view-date', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        header {\n            display: grid;\n        }\n\n        footer {\n            display: flex;\n            justify-content: flex-end;\n        }\n\n        b-btn {\n            margin: .05em 0;\n            padding: .1em;\n        }\n\n        b-btn:hover {\n            --bgdColor: rgba(0, 0, 0, 0.1);\n        }\n\n        text-field {\n            /* padding-right: .5em; */\n            /* margin-right: -.5em; */\n            /* width: 160px; */\n        }\n\n        b-hr {\n            margin: .25em -.25em;\n        }\n        \n        .controls {\n            padding: .25em .5em;\n            /* font-size: 1.4em; */\n            /* display: flex; */\n            display: grid;\n            grid-template-columns: 1fr auto 1fr;\n            align-items: center;\n            /* flex-direction: column; */\n        }\n\n        .controls span {\n            margin: 0 .25em;\n        }\n\n        form-control:first-child {\n            margin-bottom: .35em;\n        }\n\n        footer {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n        }\n\n        b-label {\n            margin: 0 .5rem;\n        }\n    `}\n\n    constructor(opts={}){\n        super()\n        \n        this.opts = Object.assign({\n            defaultLabel: '-',\n            presets: true // TODO: support custom presets?\n        }, opts)\n    }\n\n    firstUpdated(){\n        this.editors = this.shadowRoot.querySelectorAll('form-control')\n\n        let value = this.filter.value\n\n        if( value )\n            this.editors.forEach((el,i)=>el.value=value[i])\n    }\n\n    render(){return html`\n\n        <b-btn text md @click=${this.clearDates}>Clear</b-btn>\n        <b-hr></b-hr>\n\n        <div class=\"controls\">\n            <form-control material=\"filled\" key=\"date1\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\" @enterkey=${this.onEnter}></text-field>\n            </form-control>\n            \n            <span></span>\n            \n            <form-control material=\"filled\" key=\"date2\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\" @enterkey=${this.onEnter}></text-field>\n            </form-control>\n        </div>\n\n        ${this.opts.presets!==false?html`\n        <b-label sm divider>Presets</b-label>\n        <footer>\n            <b-btn text md @click=${this.usePreset}>Today</b-btn>\n            <b-btn text md @click=${this.usePreset}>Yesterday</b-btn>\n            <b-btn text md @click=${this.usePreset}>30 Days</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Month</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Year</b-btn>\n        </footer>\n        `:''}\n    `}\n\n    get value(){\n        let value = []\n\n        // editors not setup yet, so just use the value from the filter object\n        if( !this.editors )\n            return this.filter.value\n\n        this.editors.forEach(el=>{\n            let v = el.dbValue\n            if( v )\n                value.push(v)\n        })\n\n        if( value.length == 0 )\n            return null\n\n        if( value.length == 1 )\n            value = [value[0], value[0]]\n\n        value.sort()\n\n        return value\n    }\n\n    set value(val){\n\n        if( !val || val.length == 0 )\n            val = [null, null]\n\n        if( typeof val == 'string' )\n            val = [val, val]\n        \n        if( val.length == 0 )\n            val = [val[0], val[0]]\n\n        if( this.editors )\n        this.editors.forEach((el,i)=>{\n            el.value = val[i]||null\n        })\n    }\n\n    /*\n        We do a bunch of fancy logic to display a label that is hopefully\n        the easy to scan while taking up the least amount of space\n    */\n    get label(){\n\n        let val = this.value\n\n        if( !val )\n            return this.opts.defaultLabel\n\n        let [d1, d2] = val\n        let m = dayjs().startOf('day')\n        let m1 = dayjs(d1)\n        let m2 = dayjs(d2)\n        let thisYear = m1.year() == m.year() && m2.year() == m2.year()\n        let sameYear = m1.year() == m2.year()\n\n        // single day selected\n        if( d1 == d2 ){\n            let m1 = dayjs(d1)\n\n            if( m.isSame(m1) )\n                return 'Today'\n\n            let diffDays = m.diff(m1, 'days')\n\n            if( diffDays == 1 )\n                return 'Yesterday'\n\n            if( diffDays > 1 && diffDays <= 14 )\n                return diffDays+' days ago'\n\n            // leave off the year since it's this year\n            if( thisYear )\n                return m1.format('MMM D')\n\n            return m1.format('M/D/YY')\n        }\n\n        // month range (beginning of one month to end of another month)\n        if( m1.date() == 1 && m2.date() == m2.clone().endOf('month').date() ){\n\n            let month1 = m1.format('MMM')\n            let month2 = m2.format('MMM')\n            \n            if( month1 == month2 && sameYear ){\n\n                if( month1 == m.format('MMM') && thisYear )\n                    return 'This Month'\n                \n                if( thisYear )\n                    return month1\n\n                return month1+' '+m1.format('YY')\n            }\n\n            if( thisYear && sameYear && m1.month() == 0 && m2.month() == 11)\n                return 'This Year'\n            else if( thisYear && sameYear )\n                return month1+' - '+month2\n            else if( sameYear )\n                return month1+' - '+month2+' '+m2.format('YYYY')\n            else\n                return month1+' '+m1.format('YY')+' - '+month2+' '+m2.format('YY')\n        }\n\n        // leave off the year since it's this year\n        if( thisYear )\n            return m1.format('MMM D')+' - '+m2.format('MMM D')\n\n        return m1.format('M/D/YY')+' - '+m2.format('M/D/YY')\n    }\n\n    onEnter(){\n        this.close()\n    }\n\n    clearDates(){\n        this.value = null\n        this.close()\n    }\n\n    usePreset(e){\n        let preset = e.target.innerText\n        let values = []\n        let date = dayjs()\n        let format = 'YYYY-MM-DD'\n\n        switch(preset){\n            case 'Today':\n                values = [date.format(format)]\n                break;\n\n            case 'Yesterday':\n                values = [date.subtract('1', 'day').format(format)]\n                break;\n\n            case '30 Days':\n                values = [date.clone().subtract('30', 'day').format(format), date.format(format)]\n                break;\n\n            case 'This Month':\n                values = [date.startOf('month').format(format), date.endOf('month').format(format)]\n                break;\n\n            case 'This Year':\n                values = [date.startOf('year').format(format), date.endOf('year').format(format)]\n                break;\n        }\n\n        this.value = values\n        this.close()\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-date')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-view-input', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .5em;\n        }\n\n        form-control {\n            margin:0;\n        }\n\n        b-btn.cancel {\n            margin: -.5em -.5em -.5em 0;\n            vertical-align: middle;\n        }\n\n        [empty] ~ b-btn.cancel {\n            visibility: hidden;\n        }\n\n    `}\n\n    constructor(opts){\n        super()\n        this.opts = opts\n    }\n\n    firstUpdated(){\n\n        this.input = this.shadowRoot.querySelector('form-control')\n\n        let value = this.filter.value\n\n        if( value )\n            this.input.value = value\n    }\n\n    render(){return html`\n        <form-control material=\"filled\">\n            <text-field reset-invalid placeholder=\"${this.get('placeholder')}\" @enterkey=${this.onEnter}></text-field>\n            <span slot=\"help\">${this.get('helpText')}</span>\n            <b-btn slot=\"suffix\" class=\"cancel\" icon=\"cancel-circled\" text @click=${this.clearValue}></b-btn>\n        </form-control>\n    `}\n\n    get(key, defaultVal=''){\n        let val = this.opts[key]\n        \n        // legacy - should use viewOpts now\n        if( val == undefined )\n            val = this.filter.attrs[key]\n        \n        return val != undefined ? val : defaultVal\n    }\n\n    get value(){\n        let value = ''\n\n        // editors not setup yet, so just use the value from the filter object\n        if( !this.input )\n            return this.filter.value\n\n        return this.input.value\n    }\n\n    set value(val){\n        if( this.input ) \n            this.input.value = val\n    }\n\n    /*\n        We do a bunch of fancy logic to display a label that is hopefully\n        the easy to scan while taking up the least amount of space\n    */\n    get label(){\n        return this.value || this.get('defaultLabel', 'unset')\n    }\n\n    onEnter(){\n        this.close()\n    }\n\n    clearValue(){\n        this.value = null\n        this.close()\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-input')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-view-slider', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        range-slider {\n            width: 100%;\n            margin: 1em 1.5em .5em 1.5em;\n        }\n    `}\n\n    constructor(opts={}){\n        super()\n        \n        this.opts = Object.assign({\n            range: false,\n            min: 0,\n            max: 100,\n            step: 1,\n            label: 'show',\n            width: '160px',\n            prefix: '',\n            suffix: ''\n        }, opts)\n    }\n\n    render(){return html`\n        \n        <b-btn text @click=${this.clearVal}>Clear</b-btn>\n\n        <b-hr></b-hr>\n\n        <range-slider \n            style=\"width:${this.opts.width}\"\n            @change=${this.onChange}\n            ?range=${this.opts.range}\n            min=${this.opts.min}\n            max=${this.opts.max}\n            step=${this.opts.step}\n            label=${this.opts.label}\n            .value=${this.value}\n        ></range-slider>\n    `}\n\n    clearVal(){\n        this.value = null\n        \n        this.shadowRoot.querySelector('range-slider').reset()\n        this.close()\n    }\n\n    onChange(e){\n        this.value = e.target.value\n        // this.close()\n    }\n\n    get value(){\n\n        if( this.__value === undefined )\n            this.__value = this.filter.value || null\n\n        return this.__value\n    }\n\n    set value(val){\n        // let oldVal = this.value\n        this.__value = val\n        // this.requestUpdate('value', oldVal)\n    }\n\n    get label(){\n        let val = this.value\n        \n        if( val === null || val === '' ) return ''\n\n        let str = Array.isArray(val) ? (val[0] == val[1] ? val[0] : val.join('-')) : val\n\n        return this.opts.prefix+str+this.opts.suffix\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-slider')","import { LitElement, html, css } from 'lit-element'\nimport Menu from '../../../menu'\n\ncustomElements.define('b-list-filter-view-search', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            width: 200px;\n            /* min-height: 300px; */\n            max-height: 70vh;\n        }\n    `}\n\n    constructor(opts={}){\n        super()\n        this.opts = opts\n    }\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n    onKeydown(e){\n        \n        if( e.key == 'Escape' ){\n            this.value = this.filter.value\n            this.close()\n            return\n        }\n\n        this.menu.onKeydown.call(this.menu, e)\n    }\n\n    onSelect(item){\n\n        this._values.push(item)\n        this.value = this._values\n\n        this.menu.clear()\n        this.focus()\n    }\n\n    onDeselect(items){\n\n        if( items.length == 1 && items[0].val == '' )\n            items = []\n\n        this.value = items\n\n        if( items.length == 0 )\n            this.close()\n        else\n            this.focus()\n    }\n\n    get menuForValues(){\n        let menu = []\n        let selected = this._values.map(d=>d.val)\n\n        if( this._values.length > 0 ){\n            menu.push({label: 'Any', val: '', clearsAll: true}, 'divider')\n            menu.push(...this._values.map(d=>{\n                d.selected = true\n                return d\n            }))\n        }\n\n        return [menu, selected]\n    }\n\n    firstUpdated(){\n\n        this._values = this.filter.value || []\n\n        let [menu, selected] = this.menuForValues\n        this.valueMenu = new Menu(menu, {\n            multiple: 'always',\n            selected: selected,\n            onSelect: this.onDeselect.bind(this),\n        })\n        this.appendChild(this.valueMenu.el)\n        this.valueMenu.render()\n\n\n        this.menu = new Menu([], {\n            typeDelay: 200,\n            autoSelectFirst: true,\n            onSelect: this.onSelect.bind(this),\n            search: {\n                url: this.opts.url,\n                placeholder: this.opts.placeholder || 'Search',\n                parse: this.opts.parseResult\n            }\n        })\n\n        this.appendChild(this.menu.el)\n        this.menu.render()\n    }\n\n    didClose(){\n        this.menu&&this.menu.clear()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.focus()\n    }\n\n    focus(){\n        setTimeout(()=>{\n            if(this.menu )\n                this.menu.focusSearch()\n        }, 100)\n    }\n\n    get value(){\n\n        if( !this._values )\n            return this.filter.value\n\n        return this._values.map(d=>{\n            return {label: d.label, val: d.val}\n        })\n    }\n\n    set value(val){\n        this._values = (val||[]).map(o=>Object.assign({}, o))\n\n        if( this.valueMenu ){\n            let [menu, selected] = this.menuForValues\n            this.valueMenu.updateMenu(menu, selected)\n        }\n    }\n\n    get label(){\n        let val = this.value\n\n        if( !val || val.length == 0 )\n            return ''\n        \n        return val.map(d=>d.label).join(', ')\n    }\n\n    // OPTIONAL\n    get defaultVal(){\n        // when the filters are cleared/reset, what value should be the default?\n        return null\n    }\n\n    filterBy(model, val, key){\n        return this.value.find(d=>d.val==model.get(key))\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-search')","import Menu from '../../menu'\nimport Dialog from '../../dialog'\nimport Popover from '../../popover'\nimport titleize from '../../../util/titleize'\nimport Fuse from 'fuse.js'\nimport Emitter from 'component-emitter'\nimport FilterViewDate from '../toolbar/filter-view-date'\nimport FilterViewInput from '../toolbar/filter-view-input'\nimport FilterViewSlider from '../toolbar/filter-view-slider'\nimport FilterViewSearch from '../toolbar/filter-view/search'\n// import FilterViewToken from '../toolbar/filter-view/token'\n\nconst CustomViews = {\n    'date': FilterViewDate,\n    'input': FilterViewInput,\n    'slider': FilterViewSlider,\n    'search': FilterViewSearch,\n    // 'token': FilterViewToken\n}\n\n// do NOT include 0 or false as unset values\nconst unsetValues = [undefined, null, '']\n\nconst defaultSearch = model => {\n    let data = {};\n    ['id', 'title', 'name', 'label', 'file', 'dir'].forEach(key=>{\n        if( model.has !== undefined ){\n            if( model.has(key) )\n                data[key] = model.get(key)\n        }else if( model[key] !== undefined )\n            data[key] = model[key]\n    })\n    return data;\n};\n\nconst defaultFilterby = (model, val, key) => {\n    if( Array.isArray(val) )\n        return val.includes(model.get(key))\n    else\n        return val == model.get(key)\n};\n\nexport default class Filters extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':filters' }\n\n    reset(values={}){\n        this.queuing = false\n        let resetData = {}\n        this.map(filter=>{\n            resetData[filter.key] = values[filter.key] !== undefined ? values[filter.key] : filter.defaultVal\n        })\n        this.value(resetData)\n    }\n\n    toString(){\n        let active = []\n        this.forEach(filter=>{\n            if( filter.isActive )\n                active.push(`${filter.label}: ${filter.valueLabel}`)\n        })\n\n        return active.join(' | ')\n    }\n\n    // alias that makes more sense when working programically\n    update(filters){\n        this.value(filters)\n    }\n\n    value(key, val){\n        // first time getting value, get it from local storage\n        if( this.__value === undefined ){\n            this.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        // SETTING\n        if( val !== undefined || typeof key == 'object' ){\n\n            this.lastChanged = new Date().getTime()\n            \n            // may be setting more than one value\n            let changes = typeof key == 'object' ? key : {[key]:val}\n            let didChange = []\n\n            for( let k in changes){\n                \n                let changeFrom = this.__value[k]\n                let changeTo = changes[k]\n\n                // is the selected value effectively \"unset\" (`multi` filters will be an array: `[null]` )\n                if( [null, undefined].includes(changeTo)\n                || (Array.isArray(changeTo) && [null, undefined].includes(changeTo[0]) ) )\n                    delete this.__value[k]\n                else\n                    this.__value[k] = changeTo\n\n                // converting to JSON string so we can compare arrays\n                if( JSON.stringify(this.__value[k]) != JSON.stringify(changeFrom) ){\n                    didChange.push(k)\n                }else{\n                    delete changes[k]\n                }\n            }\n            \n            if( this.key )\n                localStorage.setItem(this._storeKey, JSON.stringify(this.__value))\n\n            if( didChange.length > 0 ){\n                // emit a change on each filter\n                didChange.forEach(k=>{\n                    let filter = this.get(k)    \n                    if( filter.isCustomView )\n                        filter.customView.value = this.value(k)\n                    filter.emit('change', this.value(k))\n                })\n\n                if( this.queuing )\n                    this.queuedChanges = changes\n                else\n                    this.emit('change', changes)\n            }\n\n        // GETTING\n        }else{\n            return key ? this.__value[key] : this.__value\n        }\n    }\n\n    toPostData(){\n        let value = this.value()\n        let data = {}\n\n        for( let key in value ){\n            let d = value[key]\n            // only send \"values\" from the `search` filter view\n            if( Array.isArray(d) )\n                data[key] = d.map(item=>{\n                    return item.val != undefined ? item.val : item\n                })\n            else\n                data[key] = d\n        }\n\n        return data\n    }\n\n    get queuing(){return this.__queue || false }\n    set queuing(val){\n        this.__queue = Boolean(val)\n\n        if( !this.queuing && this.queuedChanges ){\n            this.emit('change', this.queuedChanges)\n            this.queuedChanges = null\n        }\n    }\n\n    get queuedChanges(){ return this.__queuedChanges }\n    set queuedChanges(changes){\n        if( !changes ){\n            delete this.__queuedChanges\n            this.emit('queuing', false)\n            return\n        }\n\n        this.__queuedChanges = Object.assign((this.__queuedChanges || {}), changes)\n\n        this.emit('queuing', Object.keys(this.__queuedChanges).length )\n    }\n\n    use(filters){\n        \n        if( filters == this.__lastFilters )\n            return\n\n        this.__lastFilters = filters\n\n        this.forEach(filter=>delete filter.parent)\n        this.clear()\n\n        for( let key in filters ){\n\n            if( !filters[key] )\n                continue\n\n            if( key == 'search' ){\n                this.searchOptions = filters[key]\n                continue\n            }\n\n            let filter = new Filter(key, filters[key])\n            filter.parent = this\n            this.set(key, filter)\n        }\n\n        this.lastChanged = new Date().getTime()\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n    set searchOptions(opts){\n        if( opts === false )\n            this.__searchOptions = {data:false} // turns search off\n\n        if( typeof opts == 'object' )\n            this.__searchOptions = opts\n    }\n    \n    get searchOptions(){\n        return Object.assign({\n            data: defaultSearch,\n            includeMatches: true,\n            minMatchCharLength: 3,\n            threshold: 0.2,\n            location: 0,\n            distance: 100,\n            placeholder: 'Search',\n            delay: 0\n        }, this.__searchOptions||{})\n    }\n\n    get showSearch(){\n        return !!this.searchOptions.data\n    }\n\n    filterByTerm(data){\n        return new Promise(resolve=>{\n            \n            let searchOptions = Object.assign({}, this.searchOptions)\n            let keys = searchOptions.keys\n\n            data.forEach(m=>{\n                m.searchMatches = {}\n            })\n\n            if( !this.term \n            || (!searchOptions.data || searchOptions.data === 'db' )\n            || this.term.length < searchOptions.minMatchCharLength )\n                return resolve(data)\n\n            data.forEach(m=>{\n                m._fuseSearch=searchOptions.data(m)\n\n                // no search option keys set yet, so set them automatically\n                if( !keys )\n                    keys = Object.keys(m._fuseSearch)\n            })\n\n            // prefix all keys with `_fuseSearch.` so the data is searched properly\n            // keys can be an array of strings or objects with name/weight\n            if( keys )\n            searchOptions.keys = keys.map(key=>{\n                if( typeof key == 'string' )\n                    return '_fuseSearch.'+key\n                \n                let newKey = Object.assign({}, key)\n                newKey.name = '_fuseSearch.'+newKey.name\n                return newKey\n            })\n\n            let fuse = new Fuse(data, searchOptions)\n            data = fuse.search(this.term)\n\n            // reformat to array of models\n            if( searchOptions.includeMatches )\n                data = data.map(d=>{\n                    d.item.searchMatches = {}\n                    d.matches.forEach(m=>{\n                        d.item.searchMatches[m.key.replace('_fuseSearch.', '')] = m.value\n                    })\n                    return d.item\n                })\n\n            resolve(data)\n        })\n    }\n\n    async filter(data){\n        let filters = this.map(filter=>filter)\n\n        // apply each filter, waiting for the first one to finish before moving on to the next filter\n        return filters.reduce((promise, filter) => {\n            return promise.then(data=>filter.filterData(data));\n        }, Promise.resolve(data))\n\n    }\n\n    needsDatabaseFetch(changes){\n        for( let key in changes ){\n            if( this.get(key).isDB )\n                return true\n        }\n        return false\n    }\n\n}\n\n/*\n    Filter\n*/\nexport class Filter {\n\n    constructor(key, attrs){\n        this.key = key\n        this.attrs = attrs\n    }\n\n    get values(){\n        // TODO: implement \"context\" for function?\n        let values = this.attrs.values\n        values = typeof values == 'function' ? values.call(this.parent.list, this) : values\n\n        values = values.map(v=>{\n            if( typeof v == 'string' && !['divider'].includes(v) )\n                v = {label: v, val: v}\n\n            // make \"unset\" values uniform\n            if( typeof v == 'object' && unsetValues.includes(v.val) ){\n                v.val = null\n                v.clearsAll = true\n            }\n\n            return v\n        })\n\n        return values\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get icon(){\n        return this.attrs.icon || null\n    }\n\n    get filterBy(){\n        if( !this.attrs.filterBy && this.isCustomView && this.customView.filterBy )\n            return this.customView.filterBy\n\n        return this.attrs.filterBy || defaultFilterby\n    }\n\n    // is a database filter\n    get isDB(){\n        return this.attrs.db === true\n    }\n\n    get isCustomView(){\n        return !!this.attrs.view\n    }\n\n    get isActive(){\n        let val = this.isMulti ? this.value&&this.value[0] : this.value\n        return !unsetValues.includes(val)\n    }\n\n    get isMulti(){\n        return this.attrs.multi === true\n    }\n\n    get value(){\n        return this.parent.value(this.key)\n    }\n\n    set value(val){\n        this.parent.value(this.key, val)\n    }\n\n    get defaultVal(){\n        if( this.attrs.defaultVal ) return this.attrs.defaultVal\n        \n        if( this.isCustomView )\n            return this.customView.defaultVal ? this.customView.defaultVal : null\n\n        let first = this.values[0]\n        return first ? first.val : null\n    }\n\n    get valueLabel(){\n        let val = this.value\n        \n        if( Array.isArray(val) )\n            val = val.map(v=>v.val||v)\n        else\n            val = val&&(val.val||val)\n\n        if( this.isCustomView ){\n            let view = this.customView\n            return view ? view.label : 'UNSUPORRTED'\n        }\n\n        let matchedVal = this.values.filter((v,i)=>{\n            if( typeof v == 'string' || v.divider || v.text || v.noDisplay ) return false\n            // return v.val==val\n\n            if( !Array.isArray(val) ){\n                if( v.val==val ){\n                    Object.assign(v, this.value)\n                    return true\n                }\n                return false\n            }\n\n            let matchedIndex = val.indexOf(v.val)\n\n            if( matchedIndex > -1 ){\n                \n                let mergeData = this.value[matchedIndex]\n                \n                if( mergeData && typeof mergeData == 'object' ){\n                    Object.assign(v, mergeData)\n                }\n\n                return true\n            }\n            \n            return false\n        })\n\n        return matchedVal \n        ? matchedVal.map(f=>{\n            return [f.selection, f.toolbarLabel||f.label].filter(s=>s).join(' ')\n        }).join(', ')\n        : val\n    }\n\n    async showMenu(el){\n\n        if( this.isCustomView  )\n            return this.showCustomView(el)\n\n        let selected = await new Menu(this.values, {\n            selected: this.value,\n            multiple: this.isMulti,\n            width: this.attrs.width||null\n        }).popover(el, {\n            overflowBoundry: this.attrs.overflowBoundry || 'scrollParent',\n            maxHeight: this.attrs.maxHeight || '60vh',\n            adjustForMobile: true\n        })\n\n        let oldVal = this.value\n\n        if( selected === false || selected.length == 0  ) return\n            // this.value = null\n        else if( Array.isArray(selected))\n            this.value = selected.map(s=>{\n                return s.selection ? {val: s.val, selection: s.selection} : s.val\n            })\n        else\n            this.value = selected.selection ? {val: selected.val, selection: selected.selection} : selected.val\n    }\n\n    get customView(){\n        let viewName = this.attrs.view\n        let View = null\n\n        if( !this._customView ){\n\n            if( CustomViews[viewName] ){\n                View = CustomViews[viewName]\n            }else if( typeof viewName == 'string' ) {\n                View = customElements.get(viewName)\n            }else if( typeof viewName == HTMLElement ){\n                View = viewName\n            }\n\n            if( View ){\n                View.prototype.close = function(){\n                    this.popover&&this.popover._close() // to trigger onClose\n                }\n                this._customView = new View((this.attrs.viewOpts||{}))\n                this._customView.filter = this\n            }\n        }\n\n        return this._customView\n    }\n\n    async showCustomView(el){\n\n        if( !this.customView )\n            return Dialog.warn({msg:`${this.key}: unsupported view`}).popover(el)\n        \n        let onClose = _=>{\n            // let menu close before attempting to set value\n            // with larger datasets, a user can feel it lag for a split second\n            setTimeout(()=>{\n                this.value = this.customView.value\n                this.customView.didClose&&this.customView.didClose()\n            })\n        }\n        \n        // TODO: support `adjustForMobile`\n        new Popover(el, this.customView, {\n            width: this.attrs.width||null,\n            onClose: onClose,\n            onKeydown: (...args)=>{\n                if( this.customView.onKeydown ){\n                    this.customView.onKeydown(...args)\n                }\n            }\n        })\n    }\n\n    filterData(data){\n        return new Promise(resolve=>{\n\n            // pass through the data unchanged if any of these are met\n            if( !this.isActive ) return resolve(data)\n            if( !this.filterBy ) return resolve(data)\n            if( this.isDB ) return resolve(data)\n\n            let val = this.value\n            data = data.filter(m=>this.filterBy.call(this.parent.list, m, val, this.key))\n            resolve(data)\n        })\n    }\n\n}\n\nEmitter(Filters.prototype)\nEmitter(Filter.prototype)","import {html} from 'lit-element'\nimport Menu from '../../menu'\nimport titleize from '../../../util/titleize'\nimport device from '../../../util/device'\nimport Emitter from 'component-emitter'\n\nexport default class Sorts extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':sort'}\n\n    get value(){\n        // first time getting value, get it from local storage\n    \tif( this.__value === undefined ){\n\t\t\tthis.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        return this.__value\n    }\n\n    set value(val){\n\n        let didChange = JSON.stringify(this.__value) != JSON.stringify(val)\n\n        this.__value = val\n\n        if( this.key ){\n            if( val == null || val == undefined )\n                localStorage.removeItem(this._storeKey)\n            else\n                localStorage.setItem(this._storeKey, JSON.stringify(val))\n        }\n\n        this.forEach(sort=>sort.selected=this.value[sort.key])\n\n        if( didChange )\n            this.emit('change', val)\n    }\n\n    get unset(){\n        return Object.keys(this.value).length == 0 \n    }\n\n    use(sorts){\n\n        if( sorts.db ){\n            this.sortOnDB = true\n            delete sorts.db\n        }\n\n        if( sorts.defaults ){\n            let defaultVals = {}\n\n            sorts.defaults.map(key=>{\n\n                if( !sorts[key] ) return\n\n                defaultVals[key] = {\n                    desc: sorts[key].desc || false\n                }\n            })\n\n            if( this.unset ){\n                this.__value = defaultVals\n                localStorage.setItem(this._storeKey, JSON.stringify(defaultVals))\n            }\n\n            delete sorts.defaults\n        }\n\n        if( sorts == this.__lastSorts )\n            return\n\n        this.__lastSorts = sorts\n        \n        this.clear()\n\n        for( let key in sorts ){\n            let sort = new Sort(key, sorts[key])\n            sort.sorts = this\n            sort.selected = this.value[key]\n            this.set(key, sort)\n        }\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n\tget label(){\n        let active = this.active\n        return active.length == 0 ? 'None' : active.map(sort=>sort.label).join(', ')\n\t}\n\n\tget active(){\n        let active = []\n        Object.keys(this.value).forEach(key=>{\n            if( this.get(key) )\n                active.push( this.get(key) )\n        })\n        return active\n\t}\n\n    async showMenu(el){\n\n        let oldVal = this.value\n\n        let menu = this.map(sort=>{\n            return {\n                label: sort.label,\n                val: sort.key,\n                description: sort.description,\n                desc: sort.isDesc,\n                extras: ['b-list-sort-dir-btn']\n            }\n        })\n\n        menu.push({text: html`Sorts will be applied in the order they are chosen.`})\n\n        let selected = await new Menu(menu, {\n            className: 'b-list-sort-menu',\n            multiple: true,\n\t\t\tselected: Object.keys(oldVal)\n        }).popover(el, {adjustForMobile:true, maxHeight: '50vh'})\n\n        if( selected === false ) return\n\n        // reformat selected values to what we need\n        let val = {}\n        selected.forEach(s=>val[s.val]={desc:s.desc})\n\t\tthis.value = val\n    }\n\n\tsort(data){\n        // return\n\t\tlet sorts = this.active\n\n\t\treturn new Promise(resolve=>{\n\t\t\t\n\t\t\tif( sorts.length == 0 ) return resolve(data)\n\n            data.sort(function (m1, m2) {\n\n                for( let sort of sorts ){\n\n                    let val = sort.sortCompare(m1, m2);\n\n                    // the sort compare found different values\n                    if( val !== false )\n                        return val\n                }\n\n            });\n\n\t\t\tresolve(data)\n\t\t})\t\n\t}\n\n}\n\n\nEmitter(Sorts.prototype)\n\n\nclass Sort {\n    \n    constructor(key, attrs){\n        this.key = key\n\n        if( typeof attrs == 'function' )\n            attrs = {sortBy: attrs}\n\n        this.attrs = attrs\n    }\n\n    get sortBy(){\n        return this.attrs.sortBy || (m=>m.get(this.key))\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get description(){\n        return this.attrs.description || null\n    }\n\n    get isDesc(){\n        return this.selected ? this.selected.desc : (this.attrs.desc || false )\n    }\n\n    sortCompare(m1, m2){\n        let v1 = this.sortBy(m1)\n        let v2 = this.sortBy(m2)\n\n        if( v1 > v2 ) return this.isDesc ? -1 : 1\n        if( v1 < v2 ) return this.isDesc ? 1 : -1\n\n        return false\n    }\n\n}\n","import Emitter from 'component-emitter'\n\nexport default class Layouts extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':layout'}\n\n    constructor(layouts){\n        if( !Array.isArray(layouts) )\n            layouts = Object.entries(layouts)\n\n        super(layouts)\n    }\n\n    at(index){\n        return Array.from(this.keys())[index]\n    }\n\n    next(){\n        let keys = Array.from(this.keys())\n        let index = keys.indexOf(this.active)\n        index++\n\n        if( index >= keys.length )\n            index = 0\n        \n        this.active = this.at(index)\n    }\n\n    get active(){\n        return this.__layout || localStorage.getItem(this._storeKey) || this.at(0)\n    }\n\n    set active(val){\n        let oldVal = this.active\n\n        if( !this.has(val) )\n            val = this.at(0)\n\n        this.__layout = val\n\n        if( this.key && val )\n            localStorage.setItem(this._storeKey, this.__layout)\n        \n        else if( this.key && !val )\n            localStorage.removeItem(this._storeKey)\n\n        if( val != oldVal )\n            this.emit('change', val)\n    }\n\n}\n\nEmitter(Layouts.prototype)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        b-btn {\n            --color: var(--toolbarTextColor);\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            color: var(--toolbarTextColor);\n            grid-area: unset !important;\n        }\n\n        .none:not(:first-child) {\n            display: none;\n        }\n\n        .count {\n            display: none;\n            vertical-align: super;\n            margin: -1em 0;\n            font-weight: normal;\n            opacity: .5;\n            font-size: .8em;\n        }\n\n        @media (max-width:999px){\n            .count:not([val=\"0\"]) {\n                display: inline-block;\n            }\n\n            .sort ~ .sort {\n                display: none;\n            }\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: var(--toolbarTextColor);\n            opacity: .5;\n        }\n\n        /* b-icon:hover {\n            cursor: pointer;\n            color: var(--primaryColor)\n        } */\n    `}\n\n    render(){return html`\n        <b-btn text class=\"sorts\" @click=${this.sortMenu}>\n            <main>\n                <b-label xs>Sort</b-label>\n\n                <div>\n                    ${this.sorts.active.map(sort=>html`\n                        <span class=\"sort\" .sort=${sort}>\n                            <b-icon name=\"${sort.isDesc?'sort-alt-down':'sort-alt-up'}\"></b-icon> ${sort.label}\n                        </span>\n                    `)}\n                    \n                    <span class=\"none\">None</span>\n                    \n                    <span class=\"count\" val=\"${this.sorts.active.length-1}\">\n                        +${this.sorts.active.length-1}\n                    </span>\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.sorts.on('change', this.update)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.sorts.off('change', this.update)\n    }\n\n    // changeDir(e){\n    //     e.stopPropagation()\n    //     let sort = e.currentTarget.parentElement.sort\n    // }\n\n    sortMenu(e){\n        this.sorts.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-sort-btn')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-dir-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        b-btn {\n            margin-top: -.5em;\n            margin-bottom: -.5em;\n            margin-right: -.5em;\n        }\n\n        b-btn:hover {\n            --bgdColor: none !important;\n            --textColor: var(--primaryColor)\n        }\n    `}\n\n    firstUpdated(){\n        this.classList.add('when-active')\n    }\n\n    render(){return html`\n        <b-btn clear icon=\"${this.item.desc?'sort-alt-down':'sort-alt-up'}\" @click=${this.onClick}></b-btn>\n    `}\n\n    onClick(e){\n        e.stopPropagation()\n        this.item.desc = !this.item.desc\n        this.update()\n    }\n})\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n        }\n\n        b-btn {\n            --color: var(--toolbarTextColor);\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            grid-area: unset;\n            color: var(--toolbarTextColor);\n            /* opacity: .4; */\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn:not([active]) {\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn[active] {\n            font-weight: bold;\n        }\n    `}\n\n    render(){return html`\n        <b-btn text ?active=${this.filter.isActive} @click=${this.showMenu}>\n            <main>\n                <b-label xs>${this.filter.label}</b-label>\n                <div>\n                    ${this.filter.icon?html`<b-icon name=\"${this.filter.icon}\"></b-icon>`:''}\n                    ${this.filter.valueLabel}\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.filter.on('change', this.update)\n        // this.addEventListener('filter-changed', this.update, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.filter.off('change', this.update)\n        // this.removeEventListener('filter-changed', this.update, true)\n    }\n\n    showMenu(e){\n        this.filter.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-filter-btn')","import { LitElement, html, css } from 'lit-element'\nimport './filter-btn'\n\ncustomElements.define('b-list-filters', class extends LitElement{\n\n    static get properties(){return {\n        count: {type: Number},\n        queuing: {type: Number}\n    }}\n\n    constructor(){\n        super()\n        this.onFilterQueuing = this.onFilterQueuing.bind(this)\n        this.onFilterChange = this.onFilterChange.bind(this)\n    }\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            align-items: center;\n            overflow: -moz-scrollbars-none;\n            flex: 1;\n        }\n\n        [icon='erase'] { display: none; }\n        b-list-filter-btn[active] ~ [icon=\"erase\"] {\n            display: inline-block\n        }\n\n        b-list-filter-btn {\n            flex-shrink: 0;\n        }\n\n        @media (max-width:699px) {\n            /* move active filters  to front on small devices */\n            .filters b-list-filter-btn[active] {\n                order: -1;\n            }\n        }\n    `}\n\n    render(){return html`\n        <b-btn icon=\"layers\" ?hidden=${!this.queuing} title=\"Apply queued filters\" text\n            @click=${this.applyQueuedFilters}>${this.queuing}</b-btn>\n        \n        ${this.filters.map(filter=>html`\n            <b-list-filter-btn ?active=${filter.isActive} .filter=${filter}></b-list-filter-btn>\n        `)}\n        \n        <b-btn color=\"hover-red\" title=\"Clear filters\" icon=\"erase\" text @click=${this.resetFilters}></b-btn>\n    `}\n\n    applyQueuedFilters(){\n        this.filters.queuing = false\n    }\n\n    resetFilters(){\n        this.filters.reset()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        if( this.filters ){\n            this.filters.on('queuing', this.onFilterQueuing)\n            this.filters.on('change', this.onFilterChange)\n        }\n        \n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.filters ){\n            this.filters.off('queuing', this.onFilterQueuing)\n            this.filters.off('change', this.onFilterChange)\n        }\n    }\n\n    onFilterQueuing(length){\n        this.queuing = length\n    }\n\n    onFilterChange(){\n        this.update()\n    }\n\n})\n\nexport default customElements.get('b-list-filters')","import Btn from '../../../elements/btn'\n\ncustomElements.define('b-list-layout-btn', class extends Btn{\n\n    firstUpdated(){\n        this.setIcon()\n        this.addEventListener('click', e=>{\n            this.layouts.next()\n        })\n    }\n\n    setIcon(){\n        this.icon = this.layouts.get(this.layouts.active)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.setIcon = this.setIcon.bind(this)\n        this.layouts.on('change', this.setIcon)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.layouts.off('change', this.setIcon)\n    }\n\n})\n\nexport default customElements.get('b-list-layout-btn')","import { LitElement, html, css } from 'lit-element'\nimport '../../form/control'\nimport '../../form/controls/text-field'\n\ncustomElements.define('b-list-search-bar', class extends LitElement{\n\n    static get properties(){return {\n        placeholder: {type: String}\n    }}\n\n    constructor(){\n        super()\n        this.placeholder = 'Search'\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        form-control {\n            padding: .5em .65em;\n            background: var(--searchBgd, #f5f5f5); /* backwards comp */\n            background: var(--list-search-bgd, var(--searchBgd));\n            border-radius: 30px;\n            /* max-width: 140px; */\n        }\n\n        text-field {\n            min-width: 70px;\n            /* transition: 300ms; */\n        }\n\n        form-control[falsy]:not(:focus-within):not(:hover){\n            background: none;\n        }\n\n        form-control[falsy]:not(:focus-within){\n            cursor: pointer;\n        }\n\n        form-control[falsy]:not(:focus-within) text-field {\n            height: 1em;\n            overflow: hidden;\n            min-width: 0;\n            width: 0;\n            margin-right: -.5em;\n        }\n\n        b-icon {\n            color: var(--theme-text,#444);\n            margin-right: .5em;\n        }\n    `}\n\n    render(){return html`\n        <form-control>\n            <text-field placeholder=\"${this.placeholder}\" bubble-keypress single-line></text-field>\n            <b-icon @click=${this.focus} name=\"search\" slot=\"prefix\"></b-icon>\n        </form-control>\n    `}\n\n    focus(){\n        this.shadowRoot.querySelector('form-control').focus()\n    }\n\n    get value(){\n        this.textField = this.textField || this.shadowRoot.querySelector('text-field')\n        return this.textField.currentValue\n    }\n\n})\n\nexport default customElements.get('b-list-search-bar')","import { LitElement, html, css } from 'lit-element'\nimport Popover from '../../popover'\nimport './sort-btn'\nimport './sort-dir-btn'\nimport './filters-view'\nimport './layout-btn'\nimport './search'\n\ncustomElements.define('b-list-toolbar', class extends LitElement{\n\n    static get properties(){return {\n        count: {type: Number},\n    }}\n\n    constructor(){\n        super()\n        this.count = 0\n    }\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            align-items: center;\n            min-width: 0;\n            position: relative;\n        }\n\n        [hidden] { display: none; }\n\n        b-list-sort-btn {\n            flex-shrink: 0;\n        }\n\n        b-btn {\n            color: var(--toolbarTextColor);\n        }\n\n        .scroller {\n            display: flex;\n            overflow-y: auto;\n            align-items: center;\n            overflow: -moz-scrollbars-none;\n            flex: 1;\n        }\n\n        .scroller::-webkit-scrollbar { width: 0 !important; height: 0 !important; }\n\n        b-list-sort-btn + b-list-filters {\n            border-left: solid 2px rgba(0,0,0,.1);\n            margin-left: .25em;\n            padding-left: .25em;\n        }\n\n        .after {\n            margin-left: auto;\n            display: flex;\n            align-items: center;\n        }\n\n        .count {\n            align-self: stretch;\n            display: flex;\n            align-items: center;\n            border-right: 2px solid rgba(0, 0, 0, 0.1);\n            padding: 0 .75em 0 .25em;\n            margin-right: .25em;\n        }\n\n        .controls {\n            display: inline-grid;\n        }\n\n        .controls > b-icon {\n            font-size: .8em;\n            padding: .2em .35em;\n            color: rgba(0, 0, 0, 0.4);\n        }\n\n        .controls > b-icon:hover {\n            color: #333;\n        }\n    `}\n\n    render(){return html`\n        <slot name=\"before\"></slot>\n\n        <div class=\"count\">${this.count}</div>\n\n        <div class=\"scroller\">\n\n            ${!this.sorts?'':html`\n                <b-list-sort-btn .sorts=${this.sorts}></b-list-sort-btn>\n            `}\n            \n            ${!this.filters?'':html`\n                <b-list-filters .filters=${this.filters}></b-list-filters>\n            `}\n\n        </div>\n        \n        <div class=\"after\">\n\n            ${!this.filters||!this.filters.showSearch?'':html`\n            <b-list-search-bar @keydown=${this.onKeyDown} placeholder=${this.filters.searchOptions.placeholder}></b-list-search-bar>\n            `}\n\n            ${!this.layouts?'':html`\n                <b-list-layout-btn .layouts=${this.layouts} pill text></b-list-layout-btn>\n            `}\n\n            <slot name=\"refresh-btn\"></slot>\n\n            <slot name=\"after\"></slot>\n\n            <slot></slot>\n        </div>\n    `}\n\n    // not used, testing idea\n    openOver(el, opts){\n        new Popover(el, this, opts)\n    }\n\n    onKeyDown(e){\n        let target = e.target\n        let ts = this.filters.searchOptions.delay\n\n        clearTimeout(this._keydownTimeout)\n        this._keydownTimeout = setTimeout(_=>{\n\n            let term = target.value\n\n            if( term == this.filters.term ) return\n\n            this.filters.term = term\n\n            this.dispatchEvent(new CustomEvent('filter-term-changed', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    term: term\n                }\n            }))\n\n        }, ts)\n    }\n\n})\n\nexport default customElements.get('b-list-toolbar')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-selection-bar', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:absolute;\n            z-index: 10;\n            left: 0;\n            top: 0;\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            background: var(--theme-bgd, #fff);\n\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-width: 0;\n            padding: 0 .5em;\n        }\n\n        :host(:not(.show)) {\n            display: none;\n        }\n\n        .cancel-btn {\n            margin-right: .5em;\n            /* margin: 0 1em; */\n        }\n\n        @media (max-width: 699px) {\n            .count > span {\n                display: none;\n            }\n        }\n\n    `}\n\n    set selection(selection){\n        this.__selection = selection\n        \n        // TODO: unbind when changing?\n        selection.on('begin', e=>{\n            this.classList.add('show')\n            this.update()\n        })\n\n        selection.on('end', e=>{\n            this.classList.remove('show')\n        })\n\n        selection.on('change', result=>{\n            this.update()\n        })\n    }\n\n    get selection(){ return this.__selection }\n\n    render(){return html`\n        ${this.selection?html`\n\n            <div>\n                <b-btn class=\"cancel-btn\" icon=\"cancel-1\" @click=${this.end} outline></b-btn>\n\n                <span class=\"count\">\n                ${this.selection.result.size} <span>selected</span>\n                </span>\n\n                <slot name=\"left\"></slot>\n            </div>\n\n            <div>\n                <slot name=\"right\"></slot>\n            </div>\n        `:''}\n    `}\n\n    end(){\n        this.selection.end()\n    }\n\n})\n","import { LitElement, html, css } from 'lit-element'\nimport '../../elements/empty-state'\n\ncustomElements.define('b-infinite-list', class extends LitElement {\n\n    createRenderRoot(){ return this }\n\n    // static get styles(){return css`\n    //     :host {\n    //         display: block\n    //     }\n    // `}\n    \n    constructor(){\n        super()\n        this.pageAt = 0\n        this.threshold = 400\n    }\n\n    firstUpdated(){\n        // after first updating, reset and get content\n        let loadContent = this.getAttribute('fetch-on-load') !== 'false'\n        this.reset(loadContent)\n    }\n    \n    connectedCallback(){\n        super.connectedCallback()\n        this.addEventListener('scroll', this.onScroll, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.removeEventListener('scroll', this.onScroll, true)\n    }\n\n    async reset(andLoadContent=true){\n        this.pageAt = 0\n        this.scrollTop = 0\n        this.prevModel = null\n        \n        if( andLoadContent )\n            await this.getContent({clear:true})\n        else\n            this.addContent([], {clear:true})\n    }\n\n    onScroll(){\n\n        let delta = this.scrollHeight - this.scrollTop - this.offsetHeight\n        let down = !this._scrollDelta || delta < this._scrollDelta\n\n        this._scrollDelta = delta\n\n        if( !down || delta == 0 ) return\n        \n        if( delta <= this.threshold )\n            this.getContent()\n    }\n\n    async getContent({clear=false}={}){\n        \n        if( !this.dataSource ) return\n\n        if( this._fetching ) return;\n\n        let pageAt = this.pageAt\n\n        this._fetching = true\n        this._fetchFailed = false\n        try{\n            let models = await this.dataSource.fetch(pageAt)\n            this.addContent(models, {clear:clear})\n        }catch(err){\n            this._fetchFailed = err\n            this.addContent([], {clear:clear})\n        }\n        this._fetching = null\n\n        if( pageAt == 0 ){\n            this.dispatchEvent(new CustomEvent('content-changed',{\n                detail: {data: this.dataSource},\n                bubbles: true, \n                composed: true\n            }))\n        }\n\n        if( this._fetchFailed )\n            throw this._fetchFailed\n    }\n\n    // get emptyElement(){return this.getAttribute('empty') || 'b-empty-state'}\n\n    addContent(models, {clear=false}={}){\n        \n        this.pageAt += models.length\n\n        if( clear )\n            this.innerHTML = ''\n\n        if( this.pageAt == 0 ){\n            let emptyView = this.empty && this.empty()\n            if( emptyView ){\n                emptyView.fetchFailed = this._fetchFailed\n                this.appendChild(emptyView)\n            }\n            return \n        }\n\n        models.forEach(model=>{\n\n            let divider = this.divider && this.divider(this.prevModel, model)\n            if( divider ){\n                this.appendChild(divider)\n            }\n\n            let row = this.row && this.row(model)\n            if( row ){\n                this.appendChild(row)\n            }\n            \n            this.prevModel = model\n        })\n\n        setTimeout(this.checkNotEnoughContent.bind(this))\n    }\n\n    checkNotEnoughContent(){\n        if( this.scrollHeight <= this.offsetHeight ){\n            this.getContent()\n        }\n    }\n\n})\n\nexport default customElements.get('b-infinite-list')","/*\n    Creates shortcuts for selector querying\n*/\nimport {LitElement} from 'lit-element'\n\nLitElement.prototype.$ = function(query){\n    return this.querySelector(query)\n}\n\nLitElement.prototype.$all = function(query){\n    return this.querySelectorAll(query)\n}\n\nLitElement.prototype.$$ = function(query){\n    return this.shadowRoot ? this.shadowRoot.querySelector(query) : this.querySelector(query)\n}\n\nLitElement.prototype.$$all = function(query){\n    return this.shadowRoot ? this.shadowRoot.querySelectorAll(query) : this.querySelectorAll(query)\n}","import Emitter from 'component-emitter'\n\nconst isTouch = 'ontouchstart' in window\n\nclass ResultMap extends Map {\n    \n    get models(){\n        return Array.from(this.values())\n    }\n\n    get elements(){\n        return Array.from(this.keys())\n    }\n\n    get length(){ return this.size }\n}\n\nconst DISABLE_EVENTS =[\n    'longpress', \n    'contextmenu', \n    'dragstart', \n    'mouseenter', \n    'mousemove', \n    'click'\n]\n\nexport default class Selection {\n\n    constructor(list, itemTagName, opts={}){\n\n        this.opts = Object.assign({\n            toolbar: null,\n            selectedAttr: 'isSelected',\n            endWhenNoResults: true,\n            endOnEsc: true,\n            autoScrollThreshold: 48,\n            autoScrollAcceleration: 5,\n            onBegin: ()=>{},\n            onEnd: ()=>{},\n            onChange: result=>{}\n        }, opts)\n\n        this.EVENTS = {\n            DOWN: isTouch ? 'touchstart' : 'mousedown',\n            UP: isTouch ? 'touchend' : 'mouseup',\n            DRAG: isTouch ? 'touchmove' : 'mouseover'\n        }\n\n        if( this.opts.toolbar )\n            this.opts.toolbar.selection = this\n        \n        this.result = new ResultMap()\n\n        this.list = list\n        this.itemTagName = itemTagName.toUpperCase()\n\n        this.SELECTED = this.opts.selectedAttr\n\n        // bind method context\n        this.stopPropagation = this.stopPropagation.bind(this)\n        // this.onClick = this.onClick.bind(this)\n        this.onScroll = this.onScroll.bind(this)\n        this.onKeydown = this.onKeydown.bind(this)\n        this.onEventDown = this.onEventDown.bind(this)\n        this.onEventUp = this.onEventUp.bind(this)\n        this.onEventDrag = this.onEventDrag.bind(this)\n    }\n\n    get isOn(){ return this.__on === true }\n\n    begin(e){\n\n        if( this.isOn ) return\n\n        this.__on = true\n        this.list.setAttribute('selection-on', '')\n\n        this.bindEvents(e)\n\n        // select the item that triggered the selection\n        if( e ){\n            this._dragging = true\n            this._startItem = this.itemInEvent(e)\n            this.select(this._startItem)\n        }\n\n        this.opts.onBegin()\n        this.emit('begin')\n    }\n\n    end(){\n        this.__on = false\n        this.list.removeAttribute('selection-on')\n        this.unbindEvents()\n        let {items} = this.getItems()\n        items.forEach(item=>{\n            this._deselect(item)\n        })\n\n        this.opts.onEnd()\n        this.emit('end')\n    }\n\n    bindEvents(e){\n        // incase other code is listening for these events\n        // disable them while we are in selection mode\n        DISABLE_EVENTS.forEach(evt=>{\n            this.list.addEventListener(evt, this.stopPropagation, true)    \n        })\n        \n        window.addEventListener('keydown', this.onKeydown)\n        this.list.addEventListener('scroll', this.onScroll, true)\n        this.list.addEventListener(this.EVENTS.DOWN, this.onEventDown, true)\n        this.list.addEventListener(this.EVENTS.UP, this.onEventUp, true)\n\n        if( e && e.detail && e.detail.dragging )\n            this.list.addEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n    }\n\n    unbindEvents(){\n        DISABLE_EVENTS.forEach(evt=>{\n            this.list.removeEventListener(evt, this.stopPropagation, true)    \n        })\n        \n        window.removeEventListener('keydown', this.onKeydown)\n        this.list.removeEventListener('scroll', this.onScroll, true)\n        this.list.removeEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n        this.list.removeEventListener(this.EVENTS.DOWN, this.onEventDown, true)\n        this.list.removeEventListener(this.EVENTS.UP, this.onEventUp, true)\n    }\n\n    getItems(start, end){\n        let items = Array.from(this.list.querySelectorAll(this.itemTagName))\n\n        if( typeof start === 'number' )\n            start = items[start]\n        \n        if( typeof end === 'number' )\n            end = items[end]\n        \n        let oldStart = this._dragging&&this._dragging.start\n        let oldEnd = this._dragging&&this._dragging.end\n\n        if( start && end ){\n            let startIndex = items.indexOf(start)\n            let endIndex = items.indexOf(end)\n\n            if( startIndex == -1 || endIndex == -1 ){\n                start = null\n                end = null\n            }else{\n                start = startIndex < endIndex ? startIndex : endIndex\n                end = startIndex < endIndex ? endIndex : startIndex\n            }\n\n            this._dragging = {items, start, end}\n        }\n\n        return {items, start, end, oldStart, oldEnd}\n    }\n\n    select(item, startItem){\n        \n        if( item instanceof Event )\n            item = this.itemInEvent(item)\n\n        if( !item ) return\n\n        if( !startItem ){\n            this._toggleSelect(item)\n\n            this.opts.onChange(this.result)\n            this.emit('change', this.result)\n            \n            if( this.opts.endWhenNoResults && this.result.size == 0 )\n                setTimeout(()=>this.end()) // let mouseup finish\n\n            return\n        }\n\n        let {items, start, end, oldStart, oldEnd} = this.getItems(startItem, item)\n        let shouldSelect = startItem.hasAttribute(this.SELECTED)\n\n        items.forEach((_item,i)=>{\n            if( i >= start && i <= end)\n               shouldSelect ? this._select(_item) : this._deselect(_item)\n            \n            else if( oldStart !== false && oldEnd !== false && i >= oldStart && i <= oldEnd)\n                this._deselect(_item)\n        })\n\n        this.emit('change', this.result)\n        \n        if( this.opts.endWhenNoResults && this.result.size == 0 )\n            setTimeout(()=>this.end()) // let mouseup finish\n    }\n\n    _toggleSelect(item){\n        if( item.hasAttribute(this.SELECTED))\n            this._deselect(item)\n        else\n            this._select(item)\n    }\n\n    _select(item){\n        item.setAttribute(this.SELECTED, '')\n        this.result.set(item, item.model||item)\n    }\n\n    _deselect(item){\n        item.removeAttribute(this.SELECTED)\n        this.result.delete(item)\n    }\n\n    stopPropagation(e){\n        e.preventDefault()\n        e.stopImmediatePropagation()\n        e.stopPropagation()\n    }\n\n    onScroll(){\n        if( isTouch && !this._autoScroll && !this._dragging ){\n            this._scrolling = new Date().getTime()\n        }\n    }\n\n    onKeydown(e){\n        if( this.opts.endOnEsc && e.key == 'Escape' )\n            this.end()\n    }\n\n    onEventDown(e){\n\n        // only work on \"main\" buttons\n        if( e.button !== undefined && e.button !== 0 ) return\n\n        e.stopPropagation()\n\n        // while mouse/touch is down...watch dragging\n        this.list.addEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n\n        let item = this.itemInEvent(e)\n\n        if( item )\n        this.isClickEvent = setTimeout(()=>{\n            \n            let ts = new Date().getTime()\n\n            // no longer a mouse click\n            delete this.isClickEvent\n\n            if( this._scrolling && ts-this._scrolling<=50 ) return\n\n            delete this._scrolling\n\n            this._dragging = true\n            this._startItem = item\n            this._select(item)\n\n        }, 200)\n    }\n\n    onEventUp(e){\n\n        this.stopPropagation(e)\n        this._dragging = false\n        this.autoScroll(false)\n        clearTimeout(this.isClickEvent)\n\n        let ts = new Date().getTime()\n\n        if( this.isClickEvent && (!this._scrolling || ts-this._scrolling>50) ){\n\n            delete this.isClickEvent\n            let item = this.itemInEvent(e)\n            this.select(item, e.shiftKey?this._startItem:null)\n\n            if( !e.shiftKey )\n                this._startItem = item\n\n        }else{\n            delete this._startItem\n            delete this._lastTouchItem\n        }\n\n        delete this._scrolling\n        this.list.removeEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n    }\n\n    onEventDrag(e){\n\n        if( this._dragging )\n            this.stopPropagation(e)\n\n        if( this.isClickEvent || (this._scrolling && !this._autoScroll) ) return\n\n        // touch devices\n        if( e.changedTouches ){\n\n            let {clientX, clientY} = e.changedTouches[0]\n        \n            if( this.opts.autoScrollThreshold !== false){\n\n                let listRect = this.list.getBoundingClientRect()\n                \n                let top = listRect.y + this.opts.autoScrollThreshold\n                let bottom = listRect.y + listRect.height - this.opts.autoScrollThreshold\n\n                let acceleration = (this.opts.autoScrollAcceleration||1) / 10\n\n                // scroll up\n                if( clientY < top )\n                    this.autoScroll(-1 - Math.round(Math.pow(top-clientY, acceleration)))\n                \n                // scroll down\n                else if( clientY > bottom )\n                    this.autoScroll(1 + Math.round(Math.pow(clientY-bottom, acceleration)))\n                \n                // not within threshold, stop scrolling\n                else\n                    this.autoScroll(false)\n\n            }\n\n            let item = this.list.getRootNode().elementFromPoint(clientX, clientY);\n\n            if( item && item.tagName == this.itemTagName \n            && item != this._lastTouchItem ){\n                this._lastTouchItem = item\n                this.select(item, this._startItem)\n            }\n            \n        // mouse event\n        }else{\n            // hmm....why relatedTarget? it doesn't work right\n            // let item = e.relatedTarget && e.relatedTarget.tagName == this.itemTagName ? e.relatedTarget : e\n            let item = e\n            this.select(item, this._startItem)\n        }\n    }\n\n    itemInEvent(e){\n        let path = e.composedPath()\n        return path.find(_el=>_el.tagName==this.itemTagName)\n    }\n\n    autoScroll(speed=2){\n        \n        if( speed == false || this._autoScrollSpeed != speed ){\n            clearInterval(this._autoScroll)\n\n            if( speed == false ){\n                delete this._autoScroll\n                delete this._autoScrollSpeed\n            }\n        }\n        \n        if( speed !== false && this._autoScrollSpeed != speed ){\n            this._autoScrollSpeed = speed\n            \n            this.list.scrollTop = this.list.scrollTop+this._autoScrollSpeed\n            \n            this._autoScroll = setInterval(()=>{\n                this.list.scrollTop = this.list.scrollTop+this._autoScrollSpeed\n            },10)\n        }\n    }\n    \n}\n\nEmitter(Selection.prototype)\n","import { LitElement, html, css } from 'lit-element'\nimport DataSource from './data/source'\nimport Filters from './data/filters'\nimport Sorts from './data/sorts'\nimport Layouts from './data/layouts'\nimport './toolbar'\nimport './toolbar/selection-bar'\nimport './infinite-list'\nimport '../../elements/spinner-overlay'\nimport '../../helpers/lit-element/selectors'\nimport Selection from '../selection'\n\ncustomElements.define('b-list', class extends LitElement {\n\n    constructor(){\n        super()\n\n        this.onKeydown = this.onKeydown.bind(this)\n        this.onKeyup = this.onKeyup.bind(this)\n        this.createRow = this.createRow.bind(this)\n        this.createEmptyElement = this.createEmptyElement.bind(this)\n        this.createDivider = this.createDivider.bind(this)\n    }\n\n    get coll(){ return this.__coll }\n    set coll(coll){\n        let didChange = this.__collHasBeenSetOnce && this.__coll != coll\n        this.__coll = coll\n        this.dataSource.coll = coll\n        this.__collHasBeenSetOnce = true\n\n        // I think this is ok to do here\n        if( didChange )\n            this.shouldFetchData ? this.refresh() : this.reload() \n    }\n\n    set key(key){ this.__key = key }\n    get key(){\n        return this.__key || this.getAttribute('key')\n    }\n\n    get filters(){\n        if( !this.__filters )\n            this.filters = {}\n\n        return this.__filters\n    }\n    set filters(filters){\n        if( !this.__filters ){    \n            this.__filters = new Filters()\n            this.filters.key = this.key\n            this.filters.list = this\n            this.dataSource.filters = this.filters\n            this.filters.on('change', this.onFilterChange.bind(this))\n        }\n\n        this.filters.use(filters)\n    }\n\n    get sorts(){ return this.__sorts }\n    set sorts(sorts){\n        if( !this.__sorts ){\n            this.__sorts = new Sorts()\n            this.sorts.key = this.key\n            this.sorts.list = this\n            this.dataSource.sorts = this.sorts\n            this.sorts.on('change', this.onSortChange.bind(this))\n        }\n        \n        this.sorts.use(sorts)\n    }\n\n    get layout(){ return this.layouts&&this.layouts.active}\n    set layout(val){ if(this.layouts) this.layouts.active = val}\n    get layouts(){\n        if( !this.__layouts && this.listOptions && this.listOptions.layouts){\n            this.__layouts = new Layouts(this.listOptions.layouts)\n            this.layouts.key = this.key\n            this.layouts.list = this\n            this.setAttribute('layout', this.layout)\n            this.layouts.on('change', layout=>{\n                this.setAttribute('layout', this.layout)\n                this.update()\n                this.reload()\n            })\n        }\n\n        return this.__layouts\n    }\n\n    get dataSource(){\n        if( !this.__dataSource ){\n            this.__dataSource = new DataSource(this.listOptions)\n            this.__dataSource.on('change:count', count=>{\n                this.toolbar.count = count\n            })\n        }\n        return this.__dataSource\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-rows: auto auto 1fr auto;\n            overflow: hidden;\n            flex: 1;\n            position: relative;\n            z-index: 10;\n        }\n\n        slot[name=\"header\"],\n        slot[name=\"footer\"] {\n            display: block;\n            overflow-x: auto;\n        }\n\n        slot[name=\"header\"]::-webkit-scrollbar,\n        slot[name=\"footer\"]::-webkit-scrollbar {\n            display: none;\n            width: 0 !important;\n            height: 0 !important;\n        }\n\n        b-spinner-overlay {\n            --spinnerSize: 6em;\n        }\n\n        b-list-toolbar {\n            box-shadow: var(--list-toolbar-shadow, rgba(0,0,0,.2) 0 0 6px);\n            padding: .25em .5em;\n            z-index: 10;\n        }\n\n        b-list-toolbar b-btn {\n            color: var(--toolbarTextColor);\n        }\n\n        b-infinite-list {\n            display: block;\n            flex: 1;\n            overflow: auto;\n            position: relative;\n            -webkit-overflow-scrolling: touch;\n        }\n\n        b-infinite-list[selection-on] {\n            user-select: none;\n        }\n\n        b-infinite-list > [isselected] {\n            position: relative;\n            z-index: 0;\n        }\n\n        b-infinite-list > [isselected]:before {\n            position: absolute;\n            content: '';\n            background: var(--theme, #2196F3);\n            opacity: .1;\n            /* border: solid 1.4em #E3F2FD;\n            border-left-width: 2em; */\n            top: 0;\n            left: 0;\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            z-index: -1;\n        }\n\n        contract-draft-row { /* FIXME: remove? */\n            padding: 2em;\n        }\n\n        contract-draft-row:not(:last-child) {\n            border-bottom: solid 1px rgba(0,0,0,.1);\n        }\n        \n        [part=\"empty-view\"] {\n            grid-column: 1/-1;\n            grid-row: 1/-1;\n        }\n\n        [part=\"divider\"] {\n            grid-column: 1/-1;\n        }\n\n        /* .queuing-overlay {\n            display: none;\n            background: rgba(255,255,255,.8);\n            color: #888;\n            z-index: 1000;\n        }\n\n        :host([queuing]) .queuing-overlay {\n            display: flex;\n        } */\n    `}\n\n    get spinner(){\n        return this.__spinner = this.__spinner \n                            || this.querySelector('[slot=\"spinner\"]')\n                            || this.shadowRoot.querySelector('b-spinner-overlay')\n    }\n\n    render(){return html`\n\n        <style>${this.customStyles||''}</style>\n        \n        <slot name=\"spinner\">\n            <b-spinner-overlay></b-spinner-overlay>\n        </slot>\n        \n        <b-list-toolbar .filters=${this.filters} .sorts=${this.sorts} .layouts=${this.layouts}\n            @filter-term-changed=${this.onFilterTermChange} part=\"toolbar\">\n            <slot name=\"toolbar:before\" slot=\"before\"></slot>\n            <slot name=\"toolbar:after\" slot=\"after\"></slot>\n            <slot name=\"toolbar:refresh\" slot=\"refresh-btn\">\n                <b-btn text pill icon=\"arrows-ccw\" @click=${this.refresh}></b-btn>\n            </slot>\n            <!-- <b-label slot=\"after\" class=\"queuing-label\">Queuing filters, release to apply</b-label> -->\n            <b-list-selection-bar part=\"selectionbar\">\n                <slot name=\"actions:left\" slot=\"left\"></slot>\n                <slot name=\"actions:right\" slot=\"right\"></slot>\n            </b-list-selection-bar>\n        </b-list-toolbar>\n\n        <slot name=\"header\"></slot>\n        <b-infinite-list\n            part=\"list\"\n            .empty=\"${this.createEmptyElement}\"\n            .row=\"${this.createRow}\"\n            .divider=${this.createDivider}\n            .dataSource=${this.dataSource}\n            fetch-on-load=${(this.listOptions&&this.listOptions.fetchOnLoad)}\n            layout=\"${this.layout}\"\n        ></b-infinite-list>\n        <slot name=\"footer\"></slot>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        window.addEventListener('keydown', this.onKeydown, true)\n        window.addEventListener('keyup', this.onKeyup, true)\n\n        let host = this.getRootNode().host\n\n\t\tif( host ){\n            this.host = host\n            host.list = host.list || this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n\n        window.removeEventListener('keydown', this.onKeydown, true)\n        window.removeEventListener('keyup', this.onKeyup, true)\n\n        if( this.host && this.host.list == this )\n            delete this.host\n    }\n\n    onKeydown(e){\n        if( e.target !== document.body ) return\n        if( !e.metaKey && !e.ctrlKey ) return\n        this.queuing = true\n    }\n\n    onKeyup(e){\n        if( this.queuing && !this.filters.queuedChanges )\n            this.queuing =  false\n    }\n\n    get queuing(){ return this.filters && this.filters.queuing }\n    set queuing(doQueue){\n        if( !this.filters ) return\n\n        this.filters.queuing = doQueue\n\n        doQueue ? this.setAttribute('queuing', '') : this.removeAttribute('queuing')\n    }\n\n    get rowElement(){ return this.getAttribute('row') || ''}\n    get emptyElement(){ return this.getAttribute('empty') || 'b-empty-state'}\n\n    get toolbar(){\n        return this.shadowRoot.querySelector('b-list-toolbar')\n    }\n\n    get list(){\n        return this.shadowRoot.querySelector('b-infinite-list')\n    }\n\n    createRow(model){\n\n        let row = customElements.get(this.rowElement)\n\n        if( row ){\n            row = new row()\n            row.model = model\n            row.list = this\n            row.part = 'row'\n            return row\n        }\n    }\n\n    createEmptyElement(){\n        this.emptyView = this.emptyView || document.createElement(this.emptyElement)\n        this.emptyView.part = 'empty-view'\n        this.emptyView.list = this\n        this.emptyView.dataSource = this.dataSource\n        \n        // this.emptyView.innerHTML = '<slot name=\"empty\"></slot>'\n        \n        let term = this.dataSource.filters&&this.dataSource.filters.term\n        this.emptyView.value = term ? `No results for ${term}` : (this.getAttribute('placeholder') || 'No results')\n        this.emptyView.requestUpdate()\n        return this.emptyView\n    }\n\n    createDivider(prevModel, model){\n\n        let divider = this.getAttribute('divider')\n        \n        divider = divider && customElements.get(divider)\n\n        if( divider && divider.shouldDisplay && divider.shouldDisplay(prevModel, model, this) ){\n            divider = new divider(prevModel, model, this)\n            divider.part = 'divider'\n            divider.list = this\n            divider.model = model\n            divider.prevModel = prevModel\n            return divider\n        }\n\n        return null\n    }\n\n    async firstUpdated(){\n\n        // defer to end of callstack to let infinite list view render and begin fetching\n        setTimeout(async ()=>{\n            this.spinner.show = true\n            try{\n                this.toolbar.count = await this.dataSource.length()\n            }catch(err){}\n\n            this.spinner.show = false\n            \n        })\n\n        this.header = this.$$('[name=\"header\"]').assignedNodes()[0]\n        this.footer = this.$$('[name=\"footer\"]').assignedNodes()[0]\n\n        if( this.header || this.footer )\n        this.list.addEventListener('scroll', e=>{\n            \n            if( this.header )\n                this.header.scrollLeft = e.currentTarget.scrollLeft\n\n            if( this.footer )\n                this.footer.scrollLeft = e.currentTarget.scrollLeft\n            \n            if( e.currentTarget.scrollLeft == 0 )\n                this.removeAttribute('scrolled-x')\n            else\n                this.setAttribute('scrolled-x', '')\n        })\n\n        // TODO: unbind on disconnect?\n        this.selection = new Selection(this.list, this.rowElement, Object.assign({\n            toolbar: this.shadowRoot.querySelector('b-list-selection-bar'),\n        }, (this.selectionOptions||{})))\n\n        this.selection.on('begin', ()=>{\n            this.setAttribute('selection-on', '')\n        })\n\n        this.selection.on('end', ()=>{\n            this.removeAttribute('selection-on')\n        })\n        \n        this.addEventListener('selection:begin', e=>{\n            e.stopPropagation()\n            this.selection.begin(e)\n        })\n    }\n\n    async refresh(){\n        this.spinner.show = true\n        try{\n            this.selection.end()\n            this.dataSource.reset()\n            this.list.reset()\n            this.toolbar.count = await this.dataSource.length()\n        }catch(err){}\n        this.spinner.show = false\n    }\n\n    async reload(){\n        this.selection.end()\n        this.dataSource.refilter()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    get shouldFetchData(){\n        return this.dataSource.hasFetched || this.listOptions&&this.listOptions.fetchOnLoad\n    }\n\n    async onFilterTermChange(changes){\n\n        // TODO: probably need an opt in feature\n        if( this.listOptions && this.listOptions.fetch == 'more' ){\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    async onFilterChange(changes){\n        \n        if( this.filters.needsDatabaseFetch(changes) ){\n            this.spinner.show = true\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    async onSortChange(){\n\n        if( this.sorts.sortOnDB === true ){\n            this.spinner.show = true\n            this.dataSource.reset()\n        }else{\n            this.dataSource.sort()\n        }\n        \n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n})\n\nexport default customElements.get('b-list')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-cal-day', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-rows: auto 1fr;\n            overflow: hidden;\n            padding: .25em;\n        }\n\n        header {\n            text-align: right;\n        }\n\n        main {\n            overflow: auto;\n        }\n\n        .date {\n            height: 1.8em;\n            min-width: 1.8em;\n            box-sizing: border-box;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 1em;\n        }\n\n        :host([overflow]) .date {\n            color: var(--theme-text-accent, #999);\n            padding: 0 .35em;\n        }\n\n        :host([today]) .date {\n            color: #fff;\n            background: var(--theme, var(--blue, #2196F3));\n        }\n    `}\n\n    get isOverflow(){\n        return this.caldate.month() != this.date.month()\n    }\n\n    get isWeekend(){\n        return [0, 6].includes(this.date.day())\n    }\n\n    get isToday(){\n        return this.date.isSame(new Date(), 'day')\n    }\n\n    render(){return html`\n\n        <header>\n            <div class=\"date\">\n                ${this.date.date()==1?this.date.format('MMM'):''}\n                ${this.date.get('date')}\n            </div>\n        </header>\n        <main>\n            <slot></slot>\n        </main>\n    `}\n\n    set date(date){\n        this.__date = date\n\n        this.toggleAttribute('weekend', this.isWeekend)\n        this.toggleAttribute('overflow', this.isOverflow)\n        this.toggleAttribute('today', this.isToday)\n\n        this.requestUpdate()\n    }\n\n    get date(){\n        return this.__date\n    }\n\n    // firstUpdated(){\n    //     let slot = this.shadowRoot.querySelector('slot');\n    //     this.main = this.shadowRoot.querySelector('main');\n    //     slot.addEventListener('slotchange', this.onSlotChange.bind(this));\n    // }\n\n    // onSlotChange(e){\n    //     let nodes = e.target.assignedNodes();\n\n    //     if( nodes[0] && nodes[0].nodeName == '#text' )\n    //         return\n\n    //     let doesOverflow = this.main.offsetHeight < this.main.scrollHeight\n\n    //     console.log(doesOverflow);\n    // }\n\n})\n\nexport default customElements.get('b-cal-day')","import { LitElement, html, css } from 'lit-element'\nimport '../../elements/btn-group'\nimport '../../helpers/lit-element/events'\nimport '../../helpers/day-js'\nimport dayjs from 'dayjs'\nimport './day'\n\ncustomElements.define('b-cal', class extends LitElement{\n\n    constructor(){\n        super()\n\n        this.weekdays = dayjs.weekdaysMin()\n\n        this.days = new Array(7*6).fill('')\n        this.date = this._date || this.getAttribute('date') || dayjs()\n    }\n\n    static get styles(){return css`\n        :host {\n            /* height: 100%; */\n            display: grid;\n            position:relative;\n            display: grid;\n            grid-template-rows: auto 1fr;\n            --grid-cols: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n        }\n\n        :host([collapse-weekend]) {\n            --grid-cols: 2.5em 1fr 1fr 1fr 1fr 1fr 2.5em;\n        }\n\n        header {\n            position: sticky;\n            top: 0;\n            z-index: 10;\n            background: var(--b-cal-header-bgd, var(--theme-bgd, #fff));\n            border-bottom: solid 1px rgba(var(--theme-text-rgb, 0,0,0), .1);\n            display: grid;\n            grid-template-columns: max-content max-content;\n            justify-content: space-between;\n            align-items: center;\n            padding: .75em 1em 0;\n        }\n\n        header .title,\n        header .nav {\n            display: flex;\n            align-items: center;\n        }\n\n        h1, h2, h3 {\n            margin: 0;\n        }\n\n        .weekdays {\n            margin: .75em -1em 0;\n            grid-column: 1/-1;\n            display: grid;\n            grid-template-columns: var(--grid-cols);\n            text-align: right;\n        }\n\n        .weekdays > div {\n            padding-right: .75em;\n            padding-bottom: .5em;\n        }\n\n        main {\n            /* height: 100%; */\n            display: grid;\n            position:relative;\n            display: grid;\n            grid-template-columns: var(--grid-cols);\n            grid-template-rows: repeat(6, 1fr);\n            gap: 1px;\n            /* min-height: 0; */\n        }\n\n        b-cal-day {\n            border-right: solid 1px rgba(var(--theme-text-rgb, 0,0,0), .1);\n            border-bottom: solid 1px rgba(var(--theme-text-rgb, 0,0,0), .1);\n            flex-shrink: 0;\n            min-width: 0;\n        }\n\n        b-cal-day[weekend] {\n            background: var(--theme-bgd-accent, #f5f5f5);\n        }\n    `}\n\n    get date(){ return this._date }\n\n    set date(val){\n        \n        let oldDate = this._date && this._date.clone()\n\n        if( val instanceof dayjs ){\n            this._date = val\n\t\t\tthis._dateSelected = this._date.clone()\n\n        }else if( typeof val == 'string' ){\n\n            this._date = dayjs(val)\n\t\t\tthis._dateSelected = this._date.clone()\n\n\t\t}else if( val && typeof val == 'object' ){\n\t\t\tthis._dateSelected.set(val)\n\t\t\tthis._date.set(val)\n        }\n\n\t\tthis._date.set({date: 1})\n\n        if( oldDate && this._date.isSame(oldDate) )\n            return\n\n        this._loadDays()\n\n        this.emitEvent('date-changed', this.range)\n\t}\n\n    firstUpdated(){\n        this.emitEvent('date-changed', this.range)\n    }\n\n    _loadDays(){\n        let start = this._date.day()\n\t\tlet numDays = this._date.daysInMonth()\n\n        this.days = this.days.map((_, i)=>{\n            return this._date.clone().add(i-start, 'day')\n        })\n    }\n\n    get range(){\n        return [this.days[0], this.days[this.days.length-1]]\n    }\n\n    nextMonth(){\n\t\tthis.date = this._date.clone().add(1, 'month')\n        this.update()\n\t}\n\n\tprevMonth(){\n\t\tthis.date = this._date.clone().add(-1, 'month')\n        this.update()\n\t}\n\n    goToToday(){\n        this.date = dayjs()\n        this.update()\n    }\n\n    render(){return html`\n        <header>\n            <div class=\"title\">\n                <h1>${this.date.format('MMMM YYYY')}</h1>\n                <slot name=\"after-title\"></slot>\n            </div>\n            <div class=\"nav\">\n                <slot name=\"before-nav\"></slot>\n                <div>\n                    <b-btn text icon=\"left-open-big\" @click=${this.prevMonth}></b-btn>\n                    <b-btn text @click=${this.goToToday}>Today</b-btn>\n                    <b-btn text icon=\"right-open-big\" @click=${this.nextMonth}></b-btn>\n                </div>\n                <slot name=\"after-nav\"></slot>\n            </div>\n\n            <div class=\"weekdays\">${this.weekdays.map((str,i)=>html`\n                ${i==0||i==6?html`\n                    <div @click=${this.toggleCollapseWeekend}>${str}</div>\n                `:html`\n                    <div>${str}</div>\n                `}\n            `)}</div>\n\n        </header>\n        <main>\n        ${this.days.map(date=>html`\n            <b-cal-day .caldate=${this._date} .date=${date}>\n                <slot name=\"${date.format('YYYY-MM-DD')}\"></slot>\n            </b-cal-day>\n        `)}\n        </main>\n    `}\n\n    toggleCollapseWeekend(){\n        this.toggleAttribute('collapse-weekend', !this.hasAttribute('collapse-weekend'))\n    }\n\n})\n\nexport default customElements.get('b-cal')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-of-colors', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            --grids: 1fr 1fr 1fr 1fr;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        [group=\"default\"] {\n            grid-column: 1/5;\n        }\n\n        [group=\"default\"] .colors {\n            display: grid;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        .color {\n            border: 1px solid rgba(0,0,0,.12);\n            padding: .5em;\n            /* display: flex;\n            justify-content: space-between;\n            align-items: center; */\n        }\n\n        [num=\"900\"] + [num] {\n            margin-top: .5em;\n        }\n\n        @media (max-width: 550px) {\n            :host {\n                --grids: 1fr 1fr;\n            }\n\n            [group=\"default\"] {\n                grid-column: 1/3\n            }\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        this.colors = []\n\n        for( let sheet of document.styleSheets ){\n\n            let rules = null\n\n            try{ rules = sheet.cssRules }catch(e){}\n\n            if( rules )\n            for( let rule of rules ){\n\n                if( rule.cssText.match(/:root { --color/) ){\n                    \n                    let matches = rule.cssText.match(/--.[^:)]+: (.[^;]+);/g)\n                    let colors = {}\n                    \n                    matches.map(v=>{\n\n                        let [str, name, num, color] = v.match(/--(.[^\\d(A\\d)]+)(?:-(.+))?: (.[^;]+);/)\n                        let key = name + (num?'-'+num:'')\n                        \n                        if( num ){\n                            colors[name] = colors[name] || {name: name, colors: []}\n                            colors[name].colors.push({ key, name, num, color })\n                        }else{\n                            colors['default'] = colors['default'] || {name: 'default', colors: []}\n                            colors['default'].colors.push({ key, name, num, color})\n                        }\n                            \n                    })\n\n                    this.colors = Object.values(colors)\n                }\n            }\n        }\n    }\n\n    render(){return html`\n        ${this.colors.map(g=>html`\n            <div group=\"${g.name}\">\n                <h3>${g.name}</h3>\n                <div class=\"colors\">\n                ${g.colors.map(c=>html`\n                    <div num=${c.num} key=\"${c.key}\" class=\"color\" style=\"background-color: var(--${c.key});\">\n                        <div>${c.key}</div>\n                        <!-- <b-sub>${c.num?c.color:''}</b-sub> -->\n                    </div>\n                `)}\n                </div>\n            </div>\n        `)}\n    `}\n\n})","\nimport Icon from '../icon'\n\nIcon.register(\n    ['address', require('./address.svg.html')],\n\t['alert', require('./alert.svg.html')],\n\t['amazon', require('./amazon.svg.html')],\n\t['android', require('./android.svg.html')],\n\t['appstore', require('./appstore.svg.html')],\n\t['archive', require('./archive.svg.html')],\n\t['arrows-ccw', require('./arrows-ccw.svg.html')],\n\t['article-alt', require('./article-alt.svg.html')],\n\t['at', require('./at.svg.html')],\n\t['attention-1', require('./attention-1.svg.html')],\n\t['attention-circle', require('./attention-circle.svg.html')],\n\t['award', require('./award.svg.html')],\n\t['back-in-time', require('./back-in-time.svg.html')],\n\t['bank', require('./bank.svg.html')],\n\t['barcode', require('./barcode.svg.html')],\n\t['basket', require('./basket.svg.html')],\n\t['bell-alt', require('./bell-alt.svg.html')],\n\t['bell-off', require('./bell-off.svg.html')],\n\t['bell', require('./bell.svg.html')],\n\t['blackstone', require('./blackstone.svg.html')],\n\t['block', require('./block.svg.html')],\n\t['bold', require('./bold.svg.html')],\n\t['book-1', require('./book-1.svg.html')],\n\t['book-open', require('./book-open.svg.html')],\n\t['book', require('./book.svg.html')],\n\t['bookmark', require('./bookmark.svg.html')],\n\t['bookmarks', require('./bookmarks.svg.html')],\n\t['books', require('./books.svg.html')],\n\t['border_outer', require('./border_outer.svg.html')],\n\t['border_top', require('./border_top.svg.html')],\n\t['box-1', require('./box-1.svg.html')],\n\t['box', require('./box.svg.html')],\n\t['braille', require('./braille.svg.html')],\n\t['briefcase', require('./briefcase.svg.html')],\n\t['bucket', require('./bucket.svg.html')],\n\t['bug', require('./bug.svg.html')],\n\t['bus', require('./bus.svg.html')],\n\t['calc', require('./calc.svg.html')],\n\t['calendar-1', require('./calendar-1.svg.html')],\n\t['calendar-2', require('./calendar-2.svg.html')],\n\t['calendar-3', require('./calendar-3.svg.html')],\n\t['calendar', require('./calendar.svg.html')],\n\t['camera', require('./camera.svg.html')],\n\t['campsite', require('./campsite.svg.html')],\n\t['cancel-1', require('./cancel-1.svg.html')],\n\t['cancel-alt-filled', require('./cancel-alt-filled.svg.html')],\n\t['cancel-circled', require('./cancel-circled.svg.html')],\n\t['cancel', require('./cancel.svg.html')],\n\t['cassette', require('./cassette.svg.html')],\n\t['category', require('./category.svg.html')],\n\t['cc-nc-eu', require('./cc-nc-eu.svg.html')],\n\t['cc-nc', require('./cc-nc.svg.html')],\n\t['ccw', require('./ccw.svg.html')],\n\t['cd', require('./cd.svg.html')],\n\t['certificate', require('./certificate.svg.html')],\n\t['chart-1', require('./chart-1.svg.html')],\n\t['chart-bar', require('./chart-bar.svg.html')],\n\t['chart-line', require('./chart-line.svg.html')],\n\t['chart-pie', require('./chart-pie.svg.html')],\n\t['chart', require('./chart.svg.html')],\n\t['chat-1', require('./chat-1.svg.html')],\n\t['chat-empty', require('./chat-empty.svg.html')],\n\t['chat', require('./chat.svg.html')],\n\t['check-empty', require('./check-empty.svg.html')],\n\t['check', require('./check.svg.html')],\n\t['circle-empty', require('./circle-empty.svg.html')],\n\t['circle', require('./circle.svg.html')],\n\t['clearclose', require('./clearclose.svg.html')],\n\t['clock', require('./clock.svg.html')],\n\t['code', require('./code.svg.html')],\n\t['cog-alt', require('./cog-alt.svg.html')],\n\t['cog', require('./cog.svg.html')],\n\t['collections-photos', require('./collections-photos.svg.html')],\n\t['collections-text', require('./collections-text.svg.html')],\n\t['color-lens', require('./color-lens.svg.html')],\n\t['columns', require('./columns.svg.html')],\n\t['comment-2', require('./comment-2.svg.html')],\n\t['comment', require('./comment.svg.html')],\n\t['compass-1', require('./compass-1.svg.html')],\n\t['compass', require('./compass.svg.html')],\n\t['credit-card', require('./credit-card.svg.html')],\n\t['cube', require('./cube.svg.html')],\n\t['cubes', require('./cubes.svg.html')],\n\t['cw', require('./cw.svg.html')],\n\t['database', require('./database.svg.html')],\n\t['desktop', require('./desktop.svg.html')],\n\t['direction', require('./direction.svg.html')],\n\t['doc-1', require('./doc-1.svg.html')],\n\t['doc-2', require('./doc-2.svg.html')],\n\t['doc-inv', require('./doc-inv.svg.html')],\n\t['doc-text-inv', require('./doc-text-inv.svg.html')],\n\t['doc-text', require('./doc-text.svg.html')],\n\t['doc', require('./doc.svg.html')],\n\t['docs', require('./docs.svg.html')],\n\t['dollar-1', require('./dollar-1.svg.html')],\n\t['dollar', require('./dollar.svg.html')],\n\t['dot-2', require('./dot-2.svg.html')],\n\t['dot-3', require('./dot-3.svg.html')],\n\t['dot', require('./dot.svg.html')],\n\t['down-1', require('./down-1.svg.html')],\n\t['down-circled', require('./down-circled.svg.html')],\n\t['down-open', require('./down-open.svg.html')],\n\t['down', require('./down.svg.html')],\n\t['download-cloud-1', require('./download-cloud-1.svg.html')],\n\t['download-cloud', require('./download-cloud.svg.html')],\n\t['download', require('./download.svg.html')],\n\t['dropbox', require('./dropbox.svg.html')],\n\t['droplet', require('./droplet.svg.html')],\n\t['edit', require('./edit.svg.html')],\n\t['equalizer', require('./equalizer.svg.html')],\n\t['erase', require('./erase.svg.html')],\n\t['export', require('./export.svg.html')],\n\t['eye-1', require('./eye-1.svg.html')],\n\t['eye-off', require('./eye-off.svg.html')],\n\t['facebook', require('./facebook.svg.html')],\n\t['fast-bw', require('./fast-bw.svg.html')],\n\t['fast-fw', require('./fast-fw.svg.html')],\n\t['file-archive', require('./file-archive.svg.html')],\n\t['file-audio', require('./file-audio.svg.html')],\n\t['file-code', require('./file-code.svg.html')],\n\t['file-excel', require('./file-excel.svg.html')],\n\t['file-image', require('./file-image.svg.html')],\n\t['file-pdf', require('./file-pdf.svg.html')],\n\t['file-powerpoint', require('./file-powerpoint.svg.html')],\n\t['file-word', require('./file-word.svg.html')],\n\t['filter', require('./filter.svg.html')],\n\t['flag', require('./flag.svg.html')],\n\t['folder-open-empty', require('./folder-open-empty.svg.html')],\n\t['folder', require('./folder.svg.html')],\n\t['font-size', require('./font-size.svg.html')],\n\t['fork', require('./fork.svg.html')],\n\t['format-color-fill', require('./format-color-fill.svg.html')],\n\t['gauge-1', require('./gauge-1.svg.html')],\n\t['gauge', require('./gauge.svg.html')],\n\t['github', require('./github.svg.html')],\n\t['gitlab', require('./gitlab.svg.html')],\n\t['globe', require('./globe.svg.html')],\n\t['google', require('./google.svg.html')],\n\t['group-circled', require('./group-circled.svg.html')],\n\t['group', require('./group.svg.html')],\n\t['hdd', require('./hdd.svg.html')],\n\t['headphones', require('./headphones.svg.html')],\n\t['heart', require('./heart.svg.html')],\n\t['height', require('./height.svg.html')],\n\t['home-1', require('./home-1.svg.html')],\n\t['home', require('./home.svg.html')],\n\t['info-1', require('./info-1.svg.html')],\n\t['info-circled', require('./info-circled.svg.html')],\n\t['info', require('./info.svg.html')],\n\t['instagram', require('./instagram.svg.html')],\n\t['invert-colors-on', require('./invert-colors-on.svg.html')],\n\t['italic', require('./italic.svg.html')],\n\t['key-inv', require('./key-inv.svg.html')],\n\t['key', require('./key.svg.html')],\n\t['keyboard', require('./keyboard.svg.html')],\n\t['layers', require('./layers.svg.html')],\n\t['leaf', require('./leaf.svg.html')],\n\t['left-1', require('./left-1.svg.html')],\n\t['left-circled-1', require('./left-circled-1.svg.html')],\n\t['left-circled', require('./left-circled.svg.html')],\n\t['left-open-big', require('./left-open-big.svg.html')],\n\t['left-open', require('./left-open.svg.html')],\n\t['left', require('./left.svg.html')],\n\t['lightbulb', require('./lightbulb.svg.html')],\n\t['link-ext', require('./link-ext.svg.html')],\n\t['link', require('./link.svg.html')],\n\t['list-add', require('./list-add.svg.html')],\n\t['list-numbered', require('./list-numbered.svg.html')],\n\t['list2', require('./list2.svg.html')],\n\t['location', require('./location.svg.html')],\n\t['lock-open-alt', require('./lock-open-alt.svg.html')],\n\t['lock', require('./lock.svg.html')],\n\t['logout', require('./logout.svg.html')],\n\t['mail-1', require('./mail-1.svg.html')],\n\t['mail', require('./mail.svg.html')],\n\t['megaphone', require('./megaphone.svg.html')],\n\t['menu', require('./menu.svg.html')],\n\t['mic', require('./mic.svg.html')],\n\t['minus-circled', require('./minus-circled.svg.html')],\n\t['minus-squared-alt', require('./minus-squared-alt.svg.html')],\n\t['minus-squared', require('./minus-squared.svg.html')],\n\t['minus', require('./minus.svg.html')],\n\t['mobile', require('./mobile.svg.html')],\n\t['move', require('./move.svg.html')],\n\t['music', require('./music.svg.html')],\n\t['na', require('./na.svg.html')],\n\t['net', require('./net.svg.html')],\n\t['note', require('./note.svg.html')],\n\t['ok-circled', require('./ok-circled.svg.html')],\n\t['ok-circled2', require('./ok-circled2.svg.html')],\n\t['ok', require('./ok.svg.html')],\n\t['paragraph-center', require('./paragraph-center.svg.html')],\n\t['paste', require('./paste.svg.html')],\n\t['pause', require('./pause.svg.html')],\n\t['pencil', require('./pencil.svg.html')],\n\t['phone', require('./phone.svg.html')],\n\t['photo_size_select_small', require('./photo_size_select_small.svg.html')],\n\t['picture', require('./picture.svg.html')],\n\t['pin', require('./pin.svg.html')],\n\t['play', require('./play.svg.html')],\n\t['plus-1', require('./plus-1.svg.html')],\n\t['plus-circled', require('./plus-circled.svg.html')],\n\t['plus-squared', require('./plus-squared.svg.html')],\n\t['plus', require('./plus.svg.html')],\n\t['print', require('./print.svg.html')],\n\t['qrcode', require('./qrcode.svg.html')],\n\t['quote-right', require('./quote-right.svg.html')],\n\t['rain-inv', require('./rain-inv.svg.html')],\n\t['rain', require('./rain.svg.html')],\n\t['recycle', require('./recycle.svg.html')],\n\t['reply-all', require('./reply-all.svg.html')],\n\t['reply', require('./reply.svg.html')],\n\t['resize-full', require('./resize-full.svg.html')],\n\t['resize-small', require('./resize-small.svg.html')],\n\t['retweet', require('./retweet.svg.html')],\n\t['right-1', require('./right-1.svg.html')],\n\t['right-circled-1', require('./right-circled-1.svg.html')],\n\t['right-circled', require('./right-circled.svg.html')],\n\t['right-open-big', require('./right-open-big.svg.html')],\n\t['right-open', require('./right-open.svg.html')],\n\t['right', require('./right.svg.html')],\n\t['scissors', require('./scissors.svg.html')],\n\t['scissors1', require('./scissors1.svg.html')],\n\t['search', require('./search.svg.html')],\n\t['settings', require('./settings.svg.html')],\n\t['shield', require('./shield.svg.html')],\n\t['shop', require('./shop.svg.html')],\n\t['shuffle', require('./shuffle.svg.html')],\n\t['signal', require('./signal.svg.html')],\n\t['sort-alt-down', require('./sort-alt-down.svg.html')],\n\t['sort-alt-up', require('./sort-alt-up.svg.html')],\n\t['sort-down', require('./sort-down.svg.html')],\n\t['sort-name-down', require('./sort-name-down.svg.html')],\n\t['sort-name-up', require('./sort-name-up.svg.html')],\n\t['sort-number-down', require('./sort-number-down.svg.html')],\n\t['sort-number-up', require('./sort-number-up.svg.html')],\n\t['sort-up', require('./sort-up.svg.html')],\n\t['sort', require('./sort.svg.html')],\n\t['stackoverflow', require('./stackoverflow.svg.html')],\n\t['stamp', require('./stamp.svg.html')],\n\t['star-empty', require('./star-empty.svg.html')],\n\t['star', require('./star.svg.html')],\n\t['stop', require('./stop.svg.html')],\n\t['strikethrough', require('./strikethrough.svg.html')],\n\t['suitcase', require('./suitcase.svg.html')],\n\t['tag-1', require('./tag-1.svg.html')],\n\t['tag', require('./tag.svg.html')],\n\t['tags', require('./tags.svg.html')],\n\t['tasks', require('./tasks.svg.html')],\n\t['terminal', require('./terminal.svg.html')],\n\t['th-list-1', require('./th-list-1.svg.html')],\n\t['th-list', require('./th-list.svg.html')],\n\t['th-thumb', require('./th-thumb.svg.html')],\n\t['thumbs-down', require('./thumbs-down.svg.html')],\n\t['thumbs-up', require('./thumbs-up.svg.html')],\n\t['ticket', require('./ticket.svg.html')],\n\t['top-list', require('./top-list.svg.html')],\n\t['trash', require('./trash.svg.html')],\n\t['truck', require('./truck.svg.html')],\n\t['twitter', require('./twitter.svg.html')],\n\t['underline', require('./underline.svg.html')],\n\t['up-1', require('./up-1.svg.html')],\n\t['up-circled', require('./up-circled.svg.html')],\n\t['up-open', require('./up-open.svg.html')],\n\t['up', require('./up.svg.html')],\n\t['upload-cloud', require('./upload-cloud.svg.html')],\n\t['user-add', require('./user-add.svg.html')],\n\t['user', require('./user.svg.html')],\n\t['users', require('./users.svg.html')],\n\t['vcard', require('./vcard.svg.html')],\n\t['video', require('./video.svg.html')],\n\t['videocam', require('./videocam.svg.html')],\n\t['view-mode', require('./view-mode.svg.html')],\n\t['volume-high', require('./volume-high.svg.html')],\n\t['volume-low', require('./volume-low.svg.html')],\n\t['volume-medium', require('./volume-medium.svg.html')],\n\t['volume-mute', require('./volume-mute.svg.html')],\n\t['window', require('./window.svg.html')],\n\t['wrench-1', require('./wrench-1.svg.html')],\n\t['wrench', require('./wrench.svg.html')],\n\t['youtube', require('./youtube.svg.html')]\n)\n","\nimport { LitElement, html, css } from 'lit-element'\n\nexport const fileIconColors = {\n\n    pdf: css`:host([ext=\"pdf\"]){ --bgd: #b40808; }`,\n    js: css` :host([ext=\"js\"]){ --bgd: #f8dc3d; --color: #333;}`,\n    json: css`:host([ext=\"json\"]){ --bgd: #f8dc3d; --color: #333;}`,\n    video: css`:host([ext=\"mp4\"]){ --bgd: var(--red);}`,\n    html: css`:host([ext=\"html\"]){ --bgd: #e54c21}`,\n    xml: css`:host([ext=\"xml\"]){ --bgd: #f26524}`,\n    onix: css`:host([ext=\"onix\"]){ --bgd: #626a7f;}`,\n    zip: css`:host([ext=\"zip\"]){ --bgd: var(--gray-600);}`,\n\n    jpg: css`:host([ext=\"jpg\"]){ --bgd: var(--blue); }`,\n    jpeg: css`:host([ext=\"jpeg\"]){ --bgd: var(--blue); }`,\n    png: css`:host([ext=\"png\"]){ --bgd: var(--blue); }`,\n    gif: css`:host([ext=\"gif\"]){ --bgd: var(--blue); }`,\n\n    wav: css`:host([ext=\"wav\"]){ --bgd: var(--deep-purple); }`,\n    mp3: css`:host([ext=\"mp3\"]){ --bgd: var(--deep-purple); }`,\n    flac: css`:host([ext=\"flac\"]){ --bgd: var(--deep-purple); }`,\n    m4a: css`:host([ext=\"m4a\"]){ --bgd: var(--deep-purple); }`,\n\n    // Microsoft\n    word: css`\n        :host([ext=\"doc\"]),\n        :host([ext=\"docx\"]) {\n            --bgd: #0f52b7;\n        }\n    `,\n    excel: css`\n        :host([ext=\"xls\"]),\n        :host([ext=\"xlsx\"]),\n        :host([ext=\"xlsm\"]) {\n            --bgd: #0a8144;\n        }\n    `,\n\n    // Adobe\n    psd: css`\n        :host([ext=\"psd\"]) {\n            --bgd: #011c24;\n            --color: #00c8ff;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    indd: css`\n        :host([ext=\"indd\"]),\n        :host([ext=\"idml\"]) {\n            --bgd: #2a020b;\n            --color: #ff3c95;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    icml: css`\n        :host([ext=\"icml\"]) {\n            --bgd: #2a0c2a;\n            --color: #eb72eb;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    ai: css`\n        :host([ext=\"ai\"]),\n        :host([ext=\"ait\"]) {\n            --bgd: #251300;\n            --color: #fe7c00;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    pdf: css`\n        :host([ext=\"pdf\"]) {\n            --bgd: #2f1208;\n            --color: #fff;\n            --dog-ear-bgd: #fd3406;\n            --border-color: #fd3406;\n        }\n    `\n\n\n}\n\nexport const fileIconLabels = {\n    'json': html`<span>{ }</span>`,\n    'mp4': html`<b-icon name=\"videocam\"></b-icon>`,\n    \n    'mp3': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n    'wav': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n    'flac': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n\n    'html': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    'xml': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    'onix': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    \n    'dpl': html`<b-icon name=\"cd\"></b-icon>`,\n    'iso': html`<b-icon name=\"cd\"></b-icon>`,\n\n    'zip': html`<b-icon name=\"file-archive\"></b-icon>`,\n    'epub': ext=>html`<b-icon name=\"book-open\"></b-icon><sub>${ext}</sub>`,\n}\n\n\nexport default function(customColors={}, customLabels={}){\n\nObject.assign(fileIconColors, customColors)\nObject.assign(fileIconLabels, customLabels)\n\ncustomElements.define('b-file-icon', class extends LitElement{\n\n    static get properties(){ return {\n        ext: {type: String, reflect: true}\n    }}\n\n    static get styles(){\n        return [css`\n        :host {\n            display: inline-block;\n            position:relative;\n            --color: var(--b-file-icon-color-default, #fff);\n            --bgd: var(--b-file-icon-bgd-default, #aaa);\n            --size: var(--b-file-icon-size, 2em);\n            --radius: var(--b-file-icon-radius, 0px);\n            --border-color: transparent;\n\n            width: calc(.8 * var(--size));\n            height: var(--size);\n            text-transform: uppercase;\n        }\n\n        main {\n            padding: 20%;\n            padding-top: 30%; /* appears more center */\n            box-sizing: border-box;\n            position: relative;\n            width: 100%;\n            height: 100%;\n            background: var(--bgd);\n            border-radius: var(--radius);\n            border-bottom: calc(var(--size) * .02) solid rgba(0, 0, 0, 0.4);\n            -webkit-clip-path: polygon(0 0, 66% 0, 100% 26.4%, 100% 100%, 0 100%);\n            clip-path: polygon(0 0, 66% 0, 100% 26.4%, 100% 100%, 0 100%);\n\n            text-align: center;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color: var(--color);\n            box-shadow: 0 0 0 calc(.05 * var(--size)) var(--border-color) inset;\n        }\n\n        .dogear {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: var(--dog-ear-bgd, rgba(0,0,0,.4));\n            border-radius: 0 0 0 var(--radius);\n\n            height: calc(.8 * var(--size) * .34);\n            width: calc(.8 * var(--size) * .34);\n            -webkit-clip-path: polygon(0 0, 0% 100%, 100% 100%);\n            clip-path: polygon(0 0, 0% 100%, 100% 100%);\n        }\n\n        label,\n        ::slotted(*) {\n            font-size: calc(var(--size) * .25);\n            line-height: .5em;\n        }\n\n        label > span,\n        label > b-icon {\n            font-size: 1.4em;\n        }\n\n        label sub {\n            font-size: .6em;\n            vertical-align: baseline;\n            line-height: 0em;\n        }\n\n        ::slotted(b-icon) {\n            /* font-size: 1em; */\n        }\n    `].concat(Object.values(fileIconColors)) }\n\n    render(){return html`\n        <main>\n            <div class=\"dogear\"></div>\n            <slot name=\"label\">\n                <label>${this.label}</label>\n            </slot>\n        </main>\n        <slot></slot>\n    `}\n\n    get label(){\n        let label = fileIconLabels[this.ext]\n\n        if( label )\n            return typeof label == 'function' ? label(this.ext) : label\n\n        return this.ext\n    }\n\n})\n\n}","import '../elements/icon'\nimport '../elements/btn'\nimport '../elements/btn-group'\nimport '../elements/spinner'\nimport '../elements/spinner-overlay'\nimport '../elements/uploader'\nimport '../elements/paper'\nimport '../elements/text'\nimport '../elements/grid'\nimport '../elements/carousel'\nimport '../elements/timer'\nimport '../elements/empty-state'\nimport '../elements/label'\nimport '../elements/ribbon'\nimport '../elements/hr'\nimport '../elements/sub'\nimport '../elements/ts'\nimport '../elements/avatar'\nimport '../elements/code'\nimport '../elements/embed'\nimport '../elements/audio'\nimport '../presenters/tabs'\nimport '../presenters/form'\nimport '../presenters/list'\nimport '../presenters/cal'\nimport '../helpers/colors-list'\nimport '../styles/colors.less';\n\nimport '../elements/icons/_all'\nimport defineFileIcon from '../elements/file-icon'\ndefineFileIcon()\n\nimport Dialog from '../presenters/dialog'\nwindow.Dialog = Dialog\n\nimport Menu from '../presenters/menu'\nwindow.Menu = Menu\n\nimport Notif from '../presenters/notif'\nwindow.Notif = Notif\n\n\nfunction convertComments(){\n    var tw = document.createTreeWalker(document, NodeFilter.SHOW_COMMENT, null, null)\n    var comment\n    var comments = []\n\n    while( comment = tw.nextNode() ){\n        comments.push(comment)\n    }\n\n    comments.forEach(com=>{\n        let div = document.createElement('div')\n        div.classList.add('demo-block')\n\n        let str = com.textContent\n        let strs = str.split(\"\\n\")\n        let type = strs.shift()\n        str = strs.join(\"\\n\")\n        div.innerHTML = str;\n\n        if( type )\n            div.setAttribute('type', type)\n\n        let script = div.querySelector('script')\n        if( script )\n            eval(script.innerText)\n\n        com.replaceWith(div)\n    })\n}\n\nconvertComments()\n\n// popstate\nhistory.pushState = ( f => function pushState(){\n    var ret = f.apply(this, arguments);\n    convertComments()\n    return ret;\n})(history.pushState);\n\nhistory.replaceState = ( f => function replaceState(){\n    var ret = f.apply(this, arguments);\n    convertComments()\n    return ret;\n})(history.replaceState);\n\nwindow.addEventListener('popstate', function(){\n    convertComments()\n})\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","module.exports = function loadHTMLBundle(bundle) {\n  return fetch(bundle).then(function (res) {\n    return res.text();\n  });\n};\n"]}