{"version":3,"sources":["../src/lib/directive.ts","../src/lib/dom.ts","../src/lib/part.ts","../src/lib/template.ts","../src/lib/template-instance.ts","../src/lib/template-result.ts","../src/lib/parts.ts","../src/lib/default-template-processor.ts","../src/lib/template-factory.ts","../src/lib/render.ts","src/lit-html.ts","../src/lib/modify-template.ts","../src/lib/shady-render.ts","../src/lib/updating-element.ts","../src/lib/decorators.ts","../src/lib/css-tag.ts","src/lit-element.ts","../elements/icon.js","../elements/spinner.js","../elements/btn.js","../elements/btn-group.js","../elements/spinner-overlay.js","../util/ajax.js","../util/file.ext.js","../elements/uploader.js","../elements/paper.js","../elements/text.js","../elements/grid.js","../elements/carousel.js","../node_modules/moment/moment.js","../elements/timer.js","../elements/empty-state.js","../elements/label.js","../elements/ribbon.js","../elements/hr.js","../elements/sub.js","../elements/ts.js","../elements/avatar.js","../elements/code.js","../elements/embed.js","../presenters/form-control/controls/range-slider.js","../util/store.js","../elements/audio.js","../src/directives/unsafe-html.ts","../../src/utils/isBrowser.js","../../src/utils/debounce.js","../../src/utils/isFunction.js","../../src/utils/getStyleComputedProperty.js","../../src/utils/getParentNode.js","../../src/utils/getScrollParent.js","../../src/utils/isIE.js","../../src/utils/getOffsetParent.js","../../src/utils/isOffsetContainer.js","../../src/utils/getRoot.js","../../src/utils/findCommonOffsetParent.js","../../src/utils/getScroll.js","../../src/utils/includeScroll.js","../../src/utils/getBordersSize.js","../../src/utils/getWindowSizes.js","../../src/utils/getClientRect.js","../../src/utils/getBoundingClientRect.js","../../src/utils/getOffsetRectRelativeToArbitraryNode.js","../../src/utils/getViewportOffsetRectRelativeToArtbitraryNode.js","../../src/utils/isFixed.js","../../src/utils/getFixedPositionOffsetParent.js","../../src/utils/getBoundaries.js","../../src/utils/computeAutoPlacement.js","../../src/utils/getReferenceOffsets.js","../../src/utils/getOuterSizes.js","../../src/utils/getOppositePlacement.js","../../src/utils/getPopperOffsets.js","../../src/utils/find.js","../../src/utils/findIndex.js","../../src/utils/runModifiers.js","../../src/methods/update.js","../../src/utils/isModifierEnabled.js","../../src/utils/getSupportedPropertyName.js","../../src/methods/destroy.js","../../src/utils/getWindow.js","../../src/utils/setupEventListeners.js","../../src/methods/enableEventListeners.js","../../src/utils/removeEventListeners.js","../../src/methods/disableEventListeners.js","../../src/utils/isNumeric.js","../../src/utils/setStyles.js","../../src/utils/setAttributes.js","../../src/modifiers/applyStyle.js","../../src/utils/getRoundedOffsets.js","../../src/modifiers/computeStyle.js","../../src/utils/isModifierRequired.js","../../src/modifiers/arrow.js","../../src/utils/getOppositeVariation.js","../../src/methods/placements.js","../../src/utils/clockwise.js","../../src/modifiers/flip.js","../../src/modifiers/keepTogether.js","../../src/modifiers/offset.js","../../src/modifiers/preventOverflow.js","../../src/modifiers/shift.js","../../src/modifiers/hide.js","../../src/modifiers/inner.js","../../src/modifiers/index.js","../../src/methods/defaults.js","../../src/index.js","../util/colorize-favicon.js","../util/device.js","../presenters/popover/index.js","../node_modules/url-pattern/lib/url-pattern.js","../router/config.js","../router/route.js","../router/history-state.js","../router/history-states.js","../router/index.js","../presenters/panel/controller.js","../presenters/panel/toolbar.js","../presenters/panel/index.js","../presenters/dialog/make-btn.js","../presenters/dialog/dialog.js","../presenters/dialog/index.js","../node_modules/fuse.js/dist/fuse.js","../presenters/form-control/controls/touch-ripple.js","../presenters/form-control/controls/check-box.js","../presenters/form-control/controls/select-field.js","../presenters/menu/index.js","../presenters/tabs/view.js","../presenters/tabs/views.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../presenters/tabs/index.js","../presenters/form-control/form-handler.js","../presenters/form-control/form-control.css.js","../presenters/form-control/util/setValueAttrs.js","../presenters/form-control/util/validatePattern.js","../presenters/form-control/util/stopMaxLength.js","../presenters/form-control/util/nativeInputHelper.js","../presenters/form-control/form-control.js","../presenters/form-control/controls/date-picker.js","../util/htmlCleaner.js","../util/normalizeText.js","../util/csvToArray.js","../util/plural.js","../util/readFile.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/toString.js","../node_modules/lodash/_baseSlice.js","../node_modules/lodash/_castSlice.js","../node_modules/lodash/_hasUnicode.js","../node_modules/lodash/_asciiToArray.js","../node_modules/lodash/_unicodeToArray.js","../node_modules/lodash/_stringToArray.js","../node_modules/lodash/_createCaseFirst.js","../node_modules/lodash/upperFirst.js","../node_modules/lodash/capitalize.js","../util/titleize.js","../util/toCSV.js","../util/wait.js","../util/index.js","../presenters/form-control/controls/text-field.js","../presenters/form-control/controls/rich-text-field/style.js","webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3c334e19bc1efdeb80ab","webpack:///src/registry.ts","webpack:///src/attributor/attributor.ts","webpack:///src/blot/abstract/container.ts","webpack:///src/blot/abstract/format.ts","webpack:///src/blot/abstract/leaf.ts","webpack:///src/blot/abstract/shadow.ts","webpack:///src/attributor/store.ts","webpack:///src/attributor/class.ts","webpack:///src/attributor/style.ts","webpack:///src/parchment.ts","webpack:///src/collection/linked-list.ts","webpack:///src/blot/scroll.ts","webpack:///src/blot/inline.ts","webpack:///src/blot/block.ts","webpack:///src/blot/embed.ts","webpack:///src/blot/text.ts","../node_modules/quill/core/polyfill.js","../node_modules/fast-diff/diff.js","../node_modules/object-keys/isArguments.js","../node_modules/object-keys/implementation.js","../node_modules/object-keys/index.js","../node_modules/is-arguments/index.js","../node_modules/define-properties/index.js","../node_modules/function-bind/implementation.js","../node_modules/function-bind/index.js","../node_modules/has-symbols/shams.js","../node_modules/has-symbols/index.js","../node_modules/es-abstract/GetIntrinsic.js","../node_modules/es-abstract/helpers/callBind.js","../node_modules/object-is/implementation.js","../node_modules/object-is/polyfill.js","../node_modules/object-is/shim.js","../node_modules/object-is/index.js","../node_modules/has/src/index.js","../node_modules/is-regex/index.js","../node_modules/regexp.prototype.flags/implementation.js","../node_modules/regexp.prototype.flags/polyfill.js","../node_modules/regexp.prototype.flags/shim.js","../node_modules/regexp.prototype.flags/index.js","../node_modules/is-date-object/index.js","../node_modules/deep-equal/index.js","../node_modules/extend/index.js","../node_modules/quill-delta/lib/op.js","../node_modules/quill-delta/lib/delta.js","../node_modules/quill/blots/break.js","../node_modules/quill/blots/text.js","../node_modules/quill/blots/inline.js","../node_modules/quill/blots/block.js","../node_modules/quill/formats/code.js","../node_modules/quill/blots/cursor.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/isarray/index.js","../node_modules/buffer/index.js","../node_modules/clone/clone.js","../node_modules/quill/core/editor.js","../node_modules/eventemitter3/index.js","../node_modules/quill/core/logger.js","../node_modules/quill/core/shadow-selection-polyfill.js","../node_modules/quill/core/emitter.js","../node_modules/quill/core/module.js","../node_modules/quill/core/selection.js","../node_modules/quill/core/theme.js","../node_modules/quill/core/quill.js","../node_modules/quill/blots/container.js","../node_modules/quill/blots/embed.js","../node_modules/quill/blots/scroll.js","../node_modules/quill/formats/align.js","../node_modules/quill/formats/color.js","../node_modules/quill/formats/background.js","../node_modules/quill/formats/direction.js","../node_modules/quill/formats/font.js","../node_modules/quill/formats/size.js","../node_modules/quill/modules/clipboard.js","../node_modules/quill/modules/history.js","../node_modules/quill/modules/keyboard.js","../node_modules/quill/core.js","../node_modules/quill/modules/toolbar.js","../node_modules/quill/formats/bold.js","../node_modules/quill/formats/italic.js","../node_modules/quill/formats/list.js","../presenters/form-control/controls/rich-text-field/clipboard.js","../presenters/form-control/controls/rich-text-field/divider.js","../presenters/form-control/controls/rich-text-field/break.js","../presenters/form-control/controls/rich-text-field/quill.js","../presenters/form-control/controls/rich-text-field/index.js","../presenters/form-control/controls/radio-btn.js","../presenters/form-control/controls/radio-group.js","../presenters/form-control/index.js","../node_modules/component-emitter/index.js","../presenters/list/data/source.js","../presenters/list/toolbar/filter-view-date.js","../presenters/list/toolbar/filter-view-input.js","../presenters/list/toolbar/filter-view-slider.js","../presenters/list/data/filters.js","../presenters/list/data/sorts.js","../presenters/list/data/layouts.js","../presenters/list/toolbar/sort-btn.js","../presenters/list/toolbar/sort-dir-btn.js","../presenters/list/toolbar/filter-btn.js","../presenters/list/toolbar/filters-view.js","../presenters/list/toolbar/layout-btn.js","../presenters/list/toolbar/search.js","../presenters/list/toolbar/index.js","../presenters/list/toolbar/selection-bar.js","../presenters/list/infinite-list.js","../helpers/lit-element/selectors.js","../presenters/selection/index.js","../presenters/list/index.js","../helpers/lit-element/events.js","../presenters/cal/day.js","../presenters/cal/index.js","../helpers/colors-list.js","../elements/file-icon.js","../presenters/notif/controller.js","../presenters/notif/style.js","../presenters/notif/types.js","../presenters/notif/snackbar.js","../presenters/notif/index.js","docs.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../node_modules/parcel-bundler/src/builtins/loaders/browser/html-loader.js"],"names":["svgDef","require","SvgIcons","prefix","svgDefElement","__svgDefElement","div","document","createElement","innerHTML","firstChild","querySelectorAll","forEach","el","remove","names","Array","from","map","id","replace","sort","get","name","symbol","querySelector","svg","attributes","attr","setAttribute","value","svgIcons","IconElement","HTMLElement","styles","constructor","attachShadow","mode","temp","shadowRoot","appendChild","content","cloneNode","_setSVG","_svg","removeAttribute","observedAttributes","attributeChangedCallback","oldValue","newValue","getAttribute","val","spin","toggleAttribute","Boolean","hasAttribute","customElements","define","IconList","LitElement","properties","cols","type","Number","reflect","render","SpinnerElement","shadow","BtnElement","href","String","icon","attribute","firstUpdated","addEventListener","window","location","SpinnerOverlayElement","show","label","connectedCallback","parentNode","host","spinner","parentElement","disconnectedCallback","AJAX","method","url","xhr","XMLHttpRequest","on","_onDone","_onAbort","_onError","eventName","cb","bind","upload","send","open","arguments","Promise","resolve","reject","e","resp","responseText","status","err","Error","statusText","errorCode","JSON","parse","Object","defineProperty","File","prototype","split","pop","shift","UploaderElement","disabled","accept","multiple","placeholder","files","dragging","uploading","_numUploading","_numUploaded","_fileProgress","fn","progress","length","autoUpload","stopPropagation","_inputChange","parent","getRootNode","dragenter","dragleave","dragover","drop","removeEventListener","_acceptFile","file","doAccept","find","patt","trim","RegExp","test","chooseFile","click","selectFile","_drop","preventDefault","_selectFiles","dataTransfer","target","slice","valid","invalid","push","dispatchEvent","CustomEvent","bubbles","composed","detail","_dragover","_dragenter","types","includes","_dragleave","fileKey","formData","i","_formData","FormData","append","parseInt","key","requestUpdate","req","Math","round","loaded","total","uploadResp","console","log","error","Files","getFiles","items","webkitGetAsEntry","item","isFile","getDirItems","entries","dirEntries","all","entry","entryFile","dir","createReader","readEntries","PaperElement","color","empty","title","innerText","views","active","v","navTo","__active","hidden","update","currentTarget","slot","assignedElements","TimerElement","time","ms","short","running","__time","oldVal","dur","moment","duration","delta","add","hours","minutes","seconds","milliseconds","_lastTS","run","clearInterval","_progressInterval","Date","getTime","setInterval","_progress","start","stop","ts","elapsedTime","padStart","format","str","join","EmptyState","Label","pos","_updateInterval","date","__date","displayTime","fromNow","InvalidImages","BgdColors","DefaultBgd","AvatarElement","bgd","initials","img","style","display","classList","src","gravatar","getAttr","newVal","defaultVal","toLowerCase","num","char","charCodeAt","setProperty","size","width","height","guid","isConnected","offsetHeight","Embed","formattedURL","match","isYoutube","min","max","step","range","mouseUp","mouseMove","valMin","valMax","_polishVal","parseFloat","toFixed","oldMin","oldMax","s","isArray","dmin","abs","dmax","_active","_mouseDown","_didChange","mouseDown","_len","_minLeft","_maxLeft","_trackLength","atMin","atMax","reset","which","pageX","_lastMousePos","offset","x","offsetLeft","y","offsetTop","offsetParent","mouseX","screenX","percent","clientWidth","store","undefined","data","getItem","removeItem","stringify","setItem","localStore","localStorage","sessionStore","sessionStorage","forceStorageEventsLocally","call","formatTime","sec","ACTIVE_PLAYER","autoplay","playing","onHover","onHoverLeave","audioLoaded","audioTimeChange","pause","audioLoadError","playPause","progressSliderChanging","progressSliderChangingDone","viewSettings","audio","elapsed","remaining","loadAudio","paused","play","_loaded","clip","skipBack","skip","skipForward","amt","currentTime","setProgress","isNaN","playLastClip","playEndClips","seeking","setTimeout","playClip","splice","background","Infinity","wasPlaying","blur","progressHover","progressHoverLeave","setClipLength","clipLength","playFirstClip","onKeyPress","shiftKey","_","metaKey","_onKeyPress","longerTimeoutBrowsers","timeoutDuration","isBrowser","navigator","userAgent","indexOf","microtaskDebounce","called","then","taskDebounce","scheduled","supportsMicroTasks","isFunction","functionToCheck","getType","toString","getStyleComputedProperty","element","property","nodeType","ownerDocument","defaultView","css","getComputedStyle","getParentNode","nodeName","getScrollParent","body","overflow","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","documentElement","noOffsetParent","nextElementSibling","isOffsetContainer","firstElementChild","getRoot","node","findCommonOffsetParent","element1","element2","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","end","createRange","setStart","setEnd","commonAncestorContainer","contains","element1root","getScroll","side","upperSide","html","scrollingElement","includeScroll","rect","subtract","scrollTop","scrollLeft","modifier","top","bottom","left","right","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","getClientRect","offsets","getBoundingClientRect","result","sizes","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","getOffsetRectRelativeToArbitraryNode","children","fixedPosition","runIsIE","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","innerHeight","isFixed","getFixedPositionOffsetParent","getBoundaries","popper","reference","padding","boundariesElement","boundaries","boundariesNode","isPaddingNumber","getArea","computeAutoPlacement","placement","refRect","rects","sortedAreas","keys","a","b","area","filteredAreas","filter","computedPlacement","variation","getReferenceOffsets","state","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","hash","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","findIndex","prop","cur","obj","runModifiers","modifiers","ends","modifiersToRun","warn","enabled","isDestroyed","options","positionFixed","flip","originalPlacement","position","isCreated","onCreate","onUpdate","isModifierEnabled","modifierName","some","getSupportedPropertyName","prefixes","upperProp","charAt","toUpperCase","toCheck","destroy","willChange","disableEventListeners","removeOnDestroy","removeChild","getWindow","attachToScrollParents","event","callback","scrollParents","isBody","passive","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","removeEventListeners","isNumeric","n","isFinite","setStyles","unit","setAttributes","applyStyle","instance","arrowElement","arrowStyles","applyStyleOnLoad","modifierOptions","getRoundedOffsets","shouldRound","floor","noRound","referenceWidth","popperWidth","isVertical","isVariation","sameWidthParity","bothOddWidth","horizontalToInteger","verticalToInteger","isFirefox","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","devicePixelRatio","prefixedProperty","invertTop","invertLeft","arrow","isModifierRequired","requestingName","requestedName","requesting","isRequired","requested","len","sideCapitalized","altSide","opSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","getOppositeVariation","validPlacements","placements","clockwise","counter","index","concat","reverse","BEHAVIORS","flipped","placementOpposite","flipOrder","behavior","FLIP","CLOCKWISE","COUNTERCLOCKWISE","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","keepTogether","toValue","parseOffset","basePlacement","useHeight","fragments","frag","divider","search","splitRegex","ops","op","mergeWithPrevious","reduce","index2","preventOverflow","transformProp","popperStyles","transform","priority","escapeWithReference","shiftvariation","shiftOffsets","hide","bound","inner","subtractLength","Popper","requestAnimationFrame","debounce","Defaults","jquery","onLoad","Utils","global","PopperUtils","favicon","onImageLoaded","canvas","naturalHeight","radius","context","getContext","drawImage","globalCompositeOperation","fillStyle","arc","PI","fill","toDataURL","UA","device","is_ios","isiOS","is_android","isAndroid","is_mobile","isMobile","isWindows","isMac","isLinux","minScreenSize","outerWidth","outerHeight","standalone","isiPad","isTouch","isiOSChrome","isElectron","electronVersion","matches","isChromeInstalledApp","isInstalled","matchMedia","isStandalone","colorScheme","isDarkMode","isLightMode","isUnset","isSupported","onChange","_watchers","Map","addListener","_dispatchChange","set","apply","colorizeFaviconComposition","setTheme","setAccent","theme","accent","metaThemeColor","head","getPropertyValue","removeProperty","DefaultOpts","align","className","clickToggles","closeOnHide","maxHeight","maxHeightThreshold","overflowBoundry","onClose","onKeydown","OpenPopovers","WatchingClicks","WatchingKeyboard","WatchClicks","found","close","path","popover","view","opts","_close","dd","WatchKeyboard","_onKeydown","Popover","assign","_view","Backbone","View","MouseEvent","createInvisiblePlaceholderTarget","_onPositionCreate","_onPositionUpdate","mutationObserver","MutationObserver","viewMutated","observe","childList","subtree","clientX","clientY","targetParent","parentPopover","isNested","mutationsList","observer","_updatePosition","disconnect","indx","arrowH","m","h","maxWidth","root","factory","amd","exports","module","UrlPattern","P","astNodeContainsSegmentsForProvidedParams","astNodeToNames","astNodeToRegexString","baseAstNodeToRegexString","concatMap","defaultOptions","escapeForRegex","getParam","keysAndValuesToObject","newParser","regexGroupCount","stringConcatMap","string","array","f","results","regex","exec","values","object","Result","rest","Tagged","tag","parser","input","tagged","sequence","parsers","pick","indexes","lazy","cached","baseMany","stringResult","atLeastOneResultRequired","endResult","parserResult","many1","concatMany1Till","firstChoice","U","wildcard","wildcardChar","optional","optionalSegmentStartChar","pattern","optionalSegmentEndChar","segmentNameCharset","named","segmentNameStartChar","escapedChar","escapeChar","token","segmentValueCharset","astNode","params","nextIndexes","sideEffects","maxIndex","arg1","arg2","groupCount","parsed","withoutWhitespace","isRegex","ast","TypeError","groups","config","APP_TITLE","PATH_ROOT","pathname","PATH_PREFIX","clearInvalidPath","normalizePath","cleansePath","Route","rootPath","isCurrent","makePath","props","matchedState","_change","oldState","newState","HistoryState","query","queryData","URLSearchParams","k","history","isBefore","isBack","isAfter","isForward","pushState","save","replaceState","toJSON","HistoryStates","storedData","states","_current","current","create","oldNum","oldStates","ROUTES","Router","currentState","requireState","_changeRoute","goTo","didMatch","route","routes","rootRoutes","PanelControllers","PanelController","for","rootPanelController","panels","overflowScrollAt","topPanel","panelOnTop","disableOverscrollClose","panel","delete","_updatePanels","onTop","panelOnTopWithRoute","updateRoutes","zIndex","hostEl","_updateRoute","app","sv","sheets","setHash","router","controller","p","quickJump","menu","description","quickJumpOpened","text","unshift","selected","Menu","PanelToolbar","look","panelController","PanelDefaults","closeBtn","anchor","animation","closeOnEsc","disableBackdropClick","RegisteredPanels","register","_initiate","_routeChange","registered","Panel","Modal","ActionSheet","animationTime","defaultOpts","__route","isOpen","didEnter","opened","didExit","closed","animate","effect","main","bounce","shake","__html","toolbar","__view","_linkToolbar","lastElementChild","onBackdropClick","__panelController","_val","Controller","willOpen","onOpen","__title","immediate","btnPresets","cancelBtns","makeBtn","Dialog","msg","w","btns","iconName","iconClass","btn","TemplateResult","prepend","onClick","promise","_resolve","tagName","btnInfo","resolveBtn","code","activeElement","onResolve","presenter","$","$$","adjustForMobile","modal","mobileOpts","actionsheet","notif","autoClose","clickRemoves","onAutoClose","msgs","default","waiting","confirm","confirmDelete","alert","success","prompt","suffix","required","helpText","multiline","dialog","control","isInvalid","textValue","onSubmit","focus","t","Fuse","r","o","l","c","d","enumerable","Symbol","toStringTag","__esModule","hasOwnProperty","iterator","configurable","writable","distance","threshold","maxPatternLength","u","caseSensitive","tokenSeparator","g","findAllMatches","minMatchCharLength","S","M","shouldSort","L","getFn","A","C","sortFn","I","score","O","tokenize","j","matchAllTokens","F","T","includeMatches","z","E","includeScore","K","verbose","J","isCaseSensitive","setCollection","list","limit","_log","_prepareSearchers","tokenSearchers","fullSearcher","_search","weights","_computeScore","_sort","_format","_analyze","record","resultMap","weight","arrayIndex","isMatch","output","matchedIndices","nScore","indices","patternAlphabet","errors","currentLocation","expectedLocation","lastIndexOf","TouchRippleElement","cssText","ripple","enter","CheckBoxElement","_onClick","relatedTarget","checked","SelectFieldElement","_input","_value","_selected","assignedNodes","attrs","onKeypress","toggleMenu","isEmpty","showEmpty","_isInvalid","_opts","__options","_oldSelected","labels","isFocused","focused","openMenu","menuOpts","minW","jumpNav","onSelect","popoverOpts","autoSelectFirst","typeDelay","hasMenuIcon","SearchDefaults","row","cn","minWidth","maxW","__menu","searchUrl","__origMenu","__fuse","displayMenu","__filteredMenu","searchIsOn","searchShouldShowAll","hideUnselected","keyVals","__selected","matchedIndex","mergeData","selection","toggleSelected","focusSearch","showAll","searchParse","searchIcon","searchPlaceholder","searchSpinner","__searchSpinner","fetchResults","term","_fetchingTerm","fetch","json","appendTo","appendElement","showJumpNav","renderItem","checkbox","clearsAll","menuIcon","selections","selectOptionsChanged","extras","elName","dataTitle","didClickCheckbox","_itemMenu","isSelected","menuSelected","onLetterPress","activeItem","setActiveItem","scrollIntoViewIfNeeded","__lastFilterVal","clearTimeout","__searchTermDelay","_lastLetterPressTS","_lastLetterPress","li","scrollToSelected","modalOpts","TabView","_viewName","_viewClass","tabOptions","__icon","__id","tabView","canDisplay","isActive","didChange","didBecomeActive","didBecomeInactive","TabViews","tabBar","first","fallbackView","at","last","layout","singlemenu","_resizeHandler","shouldBeSingleMenu","childNodes","textContent","_views","menuItems","__views","renderTabBar","__customTabBar","TabBar","model","onMenuClick","menuClick","popoverMenu","oldTabView","onModelChange","_propagateModel","FormHandler","editorsByKey","onModelSync","onModelEdited","onEditorChange","noGridArea","autoSave","patchSave","formHandler","bindControls","editors","gridArea","_updateEditors","_model","off","_editedAttrs","vals","storedValue","has","_isAMomentObject","_datePicker","trigger","isEdited","editedAttrs","changed","changes","validateChange","_key","_el","formatted","patch","editAttr","__disabled","ed","validate","okKeys","ctrlKey","okPress","onInput","onFocus","onBlur","onKeyDown","autocomplete","testPattern","_originalVal","FormControlElement","mutations","attributeName","_onChange","_setClassNames","dbValue","labelNodes","changeEvent","details","DatePickerElement","htmlDaysHeader","weekdaysMin","startYear","endYear","years","months","monthsShort","_yearEl","_dateEl","_monthEl","_monthDays","_setDate","_dateSelected","clone","isValid","_renderMonth","_date","weekday","numDays","daysInMonth","days","day","_lookingAtSelectedMonth","elSelected","_lookingAtToday","_today","nextMonth","prevMonth","pickYear","pickMonth","activeYear","scrollIntoView","year","month","_refresh","yearEl","monthEl","DOMParser","dom","parseFromString","stripHTML","clean","cleanNode","isItalic","fontStyle","isBold","fontWeight","child","simplifyTextNode","strData","strDelimiter","hasHeader","objPattern","arrData","arrMatches","strMatchedDelimiter","strMatchedValue","header","line","strings","oldPlural","valAfter","wholematch","firstmatch","valBefore","globalThis","numberFormat","reader","FileReader","onload","readAsText","word","rawData","delimiter","newline","toCSV","rows","csvContent","infoArray","dataString","TextFieldElement","isMultiline","_editor","htmlCleaner","isPlain","_onPaste","_onKeypress","_onBlur","contentEditable","dataset","doc","nodeValue","_oldVal","select","execCommand","removeAllRanges","currentValue","emptyVal","pickDate","picker","_changeValue","clipboardData","getData","editorEl","getSelection","selectNodeContents","addRange","charLen","lastChar","sel","getRangeAt","endOffset","Event","delay","_changeDelay","toStr","isArguments","isArgs","callee","keysShim","isEnumerable","propertyIsEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","ctor","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","equalsConstructorPrototypeIfNotBuggy","isObject","isString","theKeys","skipProto","skipConstructor","origKeys","originalKeys","shim","shimObjectKeys","keysWorksWithArguments","args","hasToStringTag","isStandardArguments","isLegacyArguments","supportsStandardArguments","hasSymbols","origDefineProperty","arePropertyDescriptorsSupported","supportsDescriptors","predicate","defineProperties","predicates","getOwnPropertySymbols","sym","symObj","symVal","getOwnPropertyNames","syms","getOwnPropertyDescriptor","descriptor","origSymbol","hasSymbolSham","hasNativeSymbols","$TypeError","$gOPD","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","getProto","getPrototypeOf","__proto__","generator","generatorFunction","asyncFn","asyncFunction","asyncGen","asyncGenFunction","asyncGenIterator","TypedArray","Uint8Array","INTRINSICS","ArrayBuffer","asyncIterator","Atomics","DataView","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","valueOf","Proxy","RangeError","ReferenceError","Reflect","Set","SharedArrayBuffer","SyntaxError","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet","$replace","rePropName","reEscapeChar","stringToPath","number","quote","subString","getBaseIntrinsic","allowMissing","GetIntrinsic","parts","desc","$Function","$apply","$call","callBind","applyBind","numberIsNaN","is","implementation","getPolyfill","shimObjectIs","polyfill","testObjectIs","regexExec","gOPD","tryRegexExecCall","tryRegexExec","lastIndex","regexClass","hasLastIndexDataProperty","$Object","flags","ignoreCase","dotAll","unicode","sticky","TypeErr","shimFlags","proto","flagsBound","getDay","tryDateObject","tryDateGetDayCall","dateClass","isDateObject","equal","extend","lib","compose","keepNull","copy","diff","Iterator","retain","insert","hasNext","peekLength","next","nextOp","opLength","retOp","substr","peek","peekType","NULL_CHARACTER","fromCharCode","Delta","newOp","lastOp","chop","partition","passed","failed","initial","changeLength","elem","iter","other","thisIter","otherIter","firstOther","firstLeft","thisOp","otherOp","prep","diffResult","component","INSERT","DELETE","EQUAL","eachLine","transformPosition","nextType","Break","Parchment","insertInto","ref","blotName","TextBlot","Text","Inline","compare","self","selfIndex","otherIndex","formatAt","statics","Scope","BLOT","blot","isolate","wrap","optimize","moveChildren","allowedChildren","NEWLINE_LENGTH","BlockEmbed","attach","Attributor","Store","domNode","formats","BLOCK_ATTRIBUTE","insertAt","def","endsWith","block","Block","insertBefore","scope","BLOCK_BLOT","cache","descendants","Leaf","leaf","bubbleFormats","deleteAt","BLOCK","lines","tail","force","defaultChild","Code","CodeBlock","descendant","nextNewline","newlineIndex","prevNewline","isolateLength","searchIndex","prev","unwrap","TAB","Cursor","textNode","createTextNode","CONTENTS","_length","detach","restore","composing","getNativeRange","restoreText","lastChild","startNode","startOffset","endNode","mutation","_instanceof","nativeMap","nativeSet","nativePromise","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","__isArray","__isRegExp","source","__getRegExpFlags","__isDate","isBuffer","allocUnsafe","keyChild","valueChild","entryChild","symbols","allPropertyNames","propertyName","clonePrototype","__objToStr","re","ASCII","Editor","scroll","getDelta","applyDelta","consumeNextNewline","scrollLength","batchStart","normalizeDelta","DeltaOp","batchEnd","deleteText","formatLine","whitelist","lengthRemaining","lineLength","codeIndex","codeLength","formatText","getContents","getFormat","leaves","formatsArr","blots","combineFormats","getText","insertEmbed","embed","insertText","isBlank","removeFormat","suffixLength","contents","change","cursorIndex","oldDelta","textBlot","CursorBlot","oldText","newText","diffDelta","combined","merged","image","bullet","levels","level","debug","namespace","ns","logger","newLevel","SHADOW_SELECTIONCHANGE","hasShadow","Element","hasSelection","hasShady","ShadyDOM","inUse","isSafari","MSStream","useDocument","validNodeTypes","ELEMENT_NODE","TEXT_NODE","DOCUMENT_FRAGMENT_NODE","isValidNode","findNode","isLeft","nodes","childNode","containsNode","addInternalListener","withinInternals","handlers","ev","wasCaret","resolveTask","containsNextElement","walkForward","walkFromNode","getSelectionDirection","leftNode","rightNode","measure","initialSize","collapseToEnd","updatedSize","modify","previousSibling","nextSibling","initialSpace","ignoredTrailingSpace","trailingSpaceCount","cachedRange","getRange","rangeCount","thisFrame","internalGetShadowSelection","fakeSelectionNode","includesBeforeRoot","includesAfterRoot","isNaturalDirection","offsetRight","validRightLength","EVENTS","EMITTERS","supportsRootNode","em","handleDOM","Emitter","EventEmitter","listeners","emit","composedPath","handler","listenDOM","events","EDITOR_CHANGE","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SCROLL_UPDATE","SELECTION_CHANGE","TEXT_CHANGE","sources","API","SILENT","USER","Module","quill","DEFAULTS","Range","Selection","emitter","rootDocument","cursor","lastRange","savedRange","handleComposition","handleDragging","hasFocus","native","once","setNativeRange","ignored","setRange","nativeRange","collapsed","after","getBounds","normalizeNative","info","normalized","normalizedToRange","positions","Container","startContainer","endContainer","rangeToNative","scrollingContainer","bounds","scrollBounds","oldRange","Theme","modules","init","addModule","moduleClass","import","themes","Quill","__quill","imports","overwrite","attrName","startsWith","container","expandConfig","addContainer","editor","keyboard","clipboard","toggle","convert","setContents","clear","readOnly","disable","refNode","overload","enable","setSelection","containerBounds","getLength","getIndex","getLeaf","getLine","getLines","MAX_VALUE","getModule","isEnabled","pasteHTML","dangerouslyPasteHTML","deleted","applied","ret","setText","updateContents","strict","QUILL_VERSION","userConfig","themeConfig","moduleNames","moduleConfig","shiftRange","GUARD_TEXT","contentNode","leftGuard","rightGuard","prevLength","isLine","Scroll","batch","INLINE_BLOT","wrapper","lengthLeft","forEachAt","takeRecords","AlignAttribute","Attribute","AlignClass","Class","AlignStyle","Style","ColorAttributor","ColorClass","INLINE","ColorStyle","BackgroundClass","BackgroundStyle","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","FontStyle","SizeClass","SizeStyle","DOM_KEY","CLIPBOARD_CONFIG","matchText","matchNewline","matchBreak","matchBlot","matchSpacing","matchAttributor","matchStyles","matchIndent","matchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","memo","keyName","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","elementMatchers","textMatchers","prepareMatching","traverse","deltaEndsWith","paste","defaultPrevented","pair","applyFormat","endText","childrenDelta","classes","ATTRIBUTE","indent","nodeHeight","italic","bold","textIndent","whiteSpace","replacer","collapse","History","lastRecorded","ignoreChange","userOnly","addBinding","shortKey","undo","redo","platform","dest","stack","getLastChangeIndex","cutoff","changeDelta","undoDelta","timestamp","now","maxStack","endsWithNewlineChange","deleteLength","changeIndex","SHORTKEY","Keyboard","evt","binding","normalize","keyCode","bindings","ENTER","handleEnter","altKey","BACKSPACE","handleBackspace","handleDelete","handleDeleteRange","listen","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","prevented","every","ESCAPE","LEFT","UP","RIGHT","DOWN","makeFormatHandler","makeCodeBlockHandler","makeEmbedArrowHandler","where","curFormats","prevFormats","nextLength","nextFormats","firstFormats","lastFormats","lineFormats","scrollIndex","Toolbar","addControls","controls","addHandler","selectedIndex","option","addButton","group","addSelect","direction","link","Bold","replaceWith","Italic","ListItem","List","listEventHandler","BUIClipboard","copyType","dirtyHtml","insertHTML","DividerBlot","SmartBreak","lineBreakMatcher","newDelta","keyboardLinebreak","currentLeaf","nextLeaf","RichTextField","__firstUpdated","ShadowRoot","setStateAttributes","normalizeText","__value","__settingValue","insertDivider","insertSpecial","toggleSource","selectAll","eventContext","linebreak","_onFocus","updateToolbar","characterCount","_blurDelay","_origVal","_cleaningFromBlur","RadioBtnElement","RadioGroupElement","outline","nav","onChildrenChange","radios","radio","DataSource","perPage","fetchOnLoad","_pageFetched","lastFiltered","_rawData","_filteredData","coll","hasFetched","__coll","refilter","models","applyFilters","_fetching","flatMap","_fetchFromServer","pageAt","fetchSync","filters","sorts","_filtering","_sorting","finally","lastChanged","filterByTerm","clearDates","onEnter","usePreset","d1","d2","startOf","m1","m2","thisYear","sameYear","isSame","diffDays","endOf","month1","month2","preset","clearValue","clearVal","CustomViews","FilterViewDate","FilterViewInput","FilterViewSlider","unsetValues","defaultSearch","defaultFilterby","Filters","_storeKey","queuing","resetData","valueLabel","changeFrom","changeTo","isCustomView","customView","queuedChanges","__queue","__queuedChanges","use","__lastFilters","searchOptions","Filter","__searchOptions","showSearch","searchMatches","_fuseSearch","newKey","fuse","filterData","needsDatabaseFetch","isDB","filterBy","db","isMulti","multi","matchedVal","noDisplay","toolbarLabel","showMenu","showCustomView","viewName","_customView","viewOpts","Sorts","unset","sortOnDB","defaults","defaultVals","__lastSorts","Sort","isDesc","sortCompare","sortBy","v1","v2","Layouts","layouts","__layout","sortMenu","count","onFilterQueuing","onFilterChange","applyQueuedFilters","resetFilters","Btn","setIcon","textField","openOver","_keydownTimeout","__selection","createRenderRoot","loadContent","onScroll","andLoadContent","prevModel","getContent","addContent","scrollHeight","down","_scrollDelta","dataSource","emptyView","checkNotEnoughContent","$all","$$all","ResultMap","elements","DISABLE_EVENTS","itemTagName","selectedAttr","endWhenNoResults","endOnEsc","autoScrollThreshold","autoScrollAcceleration","onBegin","onEnd","DRAG","SELECTED","onEventDown","onEventUp","onEventDrag","isOn","__on","begin","bindEvents","_dragging","_startItem","itemInEvent","unbindEvents","getItems","_deselect","oldStart","oldEnd","startIndex","endIndex","startItem","_toggleSelect","shouldSelect","_item","_select","stopImmediatePropagation","_autoScroll","_scrolling","button","isClickEvent","autoScroll","_lastTouchItem","changedTouches","listRect","acceleration","pow","elementFromPoint","speed","_autoScrollSpeed","onKeyup","createRow","createEmptyElement","createDivider","shouldFetchData","refresh","reload","__key","__filters","__sorts","onSortChange","__layouts","listOptions","__dataSource","__spinner","customStyles","onFilterTermChange","doQueue","rowElement","emptyElement","shouldDisplay","emitEvent","isOverflow","caldate","isWeekend","isToday","weekdays","oldDate","_loadDays","goToToday","toggleCollapseWeekend","colors","sheet","styleSheets","rules","cssRules","rule","fileIconColors","pdf","js","video","xml","onix","zip","jpg","jpeg","png","gif","wav","mp3","flac","m4a","excel","psd","indd","icml","ai","fileIconLabels","ext","customColors","customLabels","NotifControllers","warning","renderIcon","onBtnClick","renderBtn","btnData","NOTIFS","nid","onWindowFocus","onWindowBlur","random","animationForReplace","closeOnClick","TYPES","onMouseOver","onMouseOut","existingNotif","TouchEvent","_autoCloseTimeout","onSnackbarClick","notifClass","Notif","convertComments","tw","createTreeWalker","NodeFilter","SHOW_COMMENT","comment","comments","nextNode","com","strs","script","bundleURL","getBundleURLCached","getBundleURL","getBaseURL","loadBundlesLazy","bundles","LazyPromise","loadBundles","loadBundle","bundleLoaders","registerBundleLoader","loader","load","bundle","substring","bundleLoader","resolved","catch","executor","onSuccess","onError","loadHTMLBundle","res"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC1/IA;;AACA;;;;AAEO,MAAM0M,YAAN,SAA2BrK,sBAA3B,CAAsC;AAEzC,aAAWC,UAAX,GAAwB;AAAE,WAAO;AAC7BqK,MAAAA,IAAI,EAAE;AAACnK,QAAAA,IAAI,EAAEC;AAAP,OADuB;AAEnCmK,MAAAA,EAAE,EAAE;AAACpK,QAAAA,IAAI,EAAER;AAAP,OAF+B;AAGnC6K,MAAAA,KAAK,EAAE;AAACrK,QAAAA,I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CAACmH,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAK9F,OAAL,CAAa,CAAC4M,CAAD,EAAIjC,GAAJ,KAAU7E,IAAI,CAAC2D,IAAL,CAAUhC,EAAE,CAACmF,CAAD,EAAIjC,GAAJ,CAAZ,CAAvB;AACA,WAAO7E,IAAP;AACH;;AA5DqC;;;;ACF1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/BA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/LA;;AACA;;AACA;;AACA;;AACA;;;;AAEAlD,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErD,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B2H,MAAAA,GAAG,EAAE;AAACzH,QAAAA,IAAI,EAAEQ,MAAP;AAAeN,QAAAA,OAAO,EAAE;AAAxB,OADsB;AAE3B6qC,MAAAA,MAAM,EAAE;AAAC/qC,QAAAA,IAAI,EAAEQ,MAAP;AAAeN,QAAAA,OAAO,EAAE;AAAxB,OAFmB;AAG3B8qC,MAAAA,UAAU,EAAE;AAAChrC,QAAAA,IAAI,EAAER,OAAP;AAAgBU,QAAAA,OAAO,EAAE;AAAzB;AAHe,KAAP;AAItB;;AAEF7B,EAAAA,WAAW,GAAE;AACT;AACA,SAAK2sC,UAAL,GAAkB,KAAlB;AACA,SAAKvjC,GAAL,GAAW,EAAX;AACA,SAAKsjC,MAAL,GAAc,KAAd;AAEA,SAAKE,cAAL,GAAsB,uBAAS,MAAI;AAC/B,WAAKD,UAAL,GAAkB,KAAKE,kBAAvB;AACH,KAFqB,EAEnB,GAFmB,CAAtB;AAGH;;AAEDhqC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN,GADe,CAGf;;AAEA,QAAI,CAAC,KAAKsI,KAAV,EAAiB;AAEb,UAAIA,KAAK,GAAG,EAAZ;AACA,WAAK2hC,UAAL,CAAgBruC,OAAhB,CAAwB+a,IAAI,IAAE;AAE1B,YAAIA,IAAI,CAACnB,QAAL,IAAiB,OAArB,EAA8B;AAC1B,cAAI1K,GAAG,GAAG6L,IAAI,CAACuzB,WAAL,CAAiB3lC,IAAjB,EAAV;AACA,cAAI,CAACuG,GAAL,EAAW;;AACX,cAAIq/B,MAAM,GAAGr/B,GAAG,CAACvI,KAAJ,CAAU,IAAV,EAAgBrG,GAAhB,CAAoBiS,CAAC,IAAEA,CAAC,CAAC5J,IAAF,EAAvB,CAAb;;AACA4lC,UAAAA,MAAM,GAAGA,MAAM,CAACpuB,MAAP,CAAcvT,CAAC,IAAEA,CAAjB,CAAT,CAJ0B,CAIG;;AAC7BF,UAAAA,KAAK,CAACjD,IAAN,CAAW,GAAG8kC,MAAd;AACAxzB,UAAAA,IAAI,CAACuzB,WAAL,GAAmB,EAAnB;AAEH,SARD,MAQM,IAAIvzB,IAAI,CAAC7N,IAAL,IAAa,CAAC,UAAD,EAAa,QAAb,EAAuB,OAAvB,EAAgChD,QAAhC,CAAyC6Q,IAAI,CAACnB,QAA9C,CAAjB,EAA0E,CAC5E;AAEH,SAHK,MAGA,IAAImB,IAAI,CAACvO,KAAT,EAAgB;AAClBE,UAAAA,KAAK,CAACjD,IAAN,CAAWsR,IAAX;AACH,SAFK,MAED;AACDA,UAAAA,IAAI,CAAChO,MAAL,GAAc,IAAd;AACA5B,UAAAA,OAAO,CAACE,KAAR,CAAc,iBAAe0P,IAAI,CAAColB,OAApB,GAA4B,8BAA1C;AACH;AACJ,OAnBD;AAqBA,WAAKzzB,KAAL,GAAaA,KAAb;AACH;AACJ;;AAEDjI,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN,GADkB,CAElB;AACH,GAvDoD,CAyDrD;;;AACA,MAAI2pC,kBAAJ,GAAwB;AACpB,QAAI,KAAKzwB,WAAL,IAAoB,CAAxB,EAA4B,OAAO,KAAP;AAC5B,QAAI6wB,SAAS,GAAG,KAAK7sC,UAAL,CAAgB5B,gBAAhB,CAAiC,eAAjC,CAAhB;AACA,QAAIiuC,IAAI,GAAGQ,SAAS,CAACA,SAAS,CAAC7mC,MAAV,GAAiB,CAAlB,CAApB;AACA,QAAI,CAACqmC,IAAL,EAAY,OAAO,KAAP;AACZ,WAAOA,IAAI,CAACp6B,UAAL,GAAgBo6B,IAAI,CAACrwB,WAArB,IAAoC,KAAKA,WAAzC,IAAwDqwB,IAAI,CAACl6B,SAAL,GAAek6B,IAAI,CAAC38B,YAApB,IAAoC,KAAKA,YAAxG;AACH;;AAED,MAAI3E,KAAJ,GAAW;AAAE,WAAO,KAAK+hC,OAAZ;AAAqB;;AAClC,MAAI/hC,KAAJ,CAAUA,KAAV,EAAgB;AACZ,SAAK+hC,OAAL,GAAe,KAAKA,OAAL,IAAgB,IAAId,eAAJ,EAA/B;AACA,SAAKc,OAAL,CAAa9jC,GAAb,GAAmB,KAAKA,GAAxB;AAEA+B,IAAAA,KAAK,CAAC1M,OAAN,CAAc4M,CAAC,IAAE;AACbA,MAAAA,CAAC,GAAG,IAAImgC,aAAJ,CAAYngC,CAAZ,CAAJ;;AACA,WAAK6hC,OAAL,CAAa9f,GAAb,CAAiB/hB,CAAC,CAACrM,EAAnB,EAAuBqM,CAAvB;AACH,KAHD;AAKA,SAAKD,MAAL,GAAc,KAAKrK,YAAL,CAAkB,QAAlB,KAA+B,KAAKoK,KAAL,CAAWC,MAA1C,IAAoD,KAAKD,KAAL,CAAWmhC,KAA7E;AACH;;AAED,aAAWvsC,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA+MlB;;AAEFotC,EAAAA,YAAY,GAAE;AAEV,QAAI,CAAC,MAAD,EAAS,OAAT,EAAkBxkC,QAAlB,CAA2B,KAAK5H,YAAL,CAAkB,SAAlB,CAA3B,CAAJ,EACI,OAAO,qBAAK,aAAZ;;AAEJ,QAAI,KAAKA,YAAL,CAAkB,SAAlB,CAAJ,EAAkC;AAE9B,UAAI,CAAC,KAAKqsC,cAAV,EAA0B;AAEtB,YAAIC,MAAM,GAAGhsC,cAAc,CAAClC,GAAf,CAAmB,KAAK4B,YAAL,CAAkB,SAAlB,CAAnB,CAAb;AACA,YAAI,CAACssC,MAAL,EAAc,OAAOzjC,OAAO,CAACE,KAAR,CAAe,SAAQ,KAAK/I,YAAL,CAAkB,SAAlB,CAA6B,iBAApD,CAAP;AAEd,aAAKqsC,cAAL,GAAsB,IAAIC,MAAJ,EAAtB;AACA,aAAKD,cAAL,CAAoBrqC,IAApB,GAA2B,IAA3B;AACA,aAAKqqC,cAAL,CAAoBE,KAApB,GAA4B,KAAKA,KAAjC;AACA,aAAKF,cAAL,CAAoBjiC,KAApB,GAA4B,KAAKA,KAAjC;AACA,aAAKiiC,cAAL,CAAoBG,WAApB,GAAkC,KAAKC,SAAL,CAAe1pC,IAAf,CAAoB,IAApB,CAAlC;;AACA,aAAKspC,cAAL,CAAoBt+B,SAApB,CAA8BtC,GAA9B,CAAkC,SAAlC;AACH,OAXD,MAWK;AACD,aAAK4gC,cAAL,CAAoB3hC,MAApB;AACH;;AAED,aAAO,KAAK2hC,cAAZ;AAEH,KAnBD,MAmBK;AAED,aAAO,qBAAK;;;sEAG8C,KAAKK,WAAY;;sBAEjE,KAAKtiC,KAAL,CAAWC,MAAX,CAAkBH,KAAM;;kBAE5B,KAAKE,KAAL,CAAWpM,GAAX,CAAesM,CAAC,IAAEA,CAAC,CAACvJ,MAAF,CAAS,KAAK0rC,SAAd,CAAlB,CAA4C;;sBAPlD;AAUH;AACJ;;AAED1rC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;UACf,KAAKqrC,YAAL,EAAoB;;KADjB;AAGP;;AAEF,QAAMM,WAAN,CAAkBnpC,CAAlB,EAAoB;AAEhB,QAAI02B,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,KAAK9vB,KAAL,CAAWpM,GAAX,CAAesM,CAAC,IAAE;AAC5C,aAAO;AAACzI,QAAAA,KAAK,EAAEyI,CAAC,CAACJ,KAAV;AAAiBjK,QAAAA,GAAG,EAAEqK;AAAtB,OAAP;AACH,KAF6B,CAAT,EAEjB2jB,OAFiB,CAET1qB,CAAC,CAACwD,MAFO,CAArB;AAIA,QAAIkzB,QAAJ,EACI,KAAK5vB,MAAL,GAAc4vB,QAAQ,CAACh6B,GAAvB;AACP;;AAEDwsC,EAAAA,SAAS,CAAClpC,CAAD,EAAG;AACR,QAAI6H,MAAM,GAAG,KAAKf,MAAlB;;AAEA,QAAI,CAAC9G,CAAC,CAACoH,aAAF,CAAgBogC,OAArB,EAA8B;AAC1B,aAAOliC,OAAO,CAACE,KAAR,CAAe,6CAAf,CAAP;AACH;;AAED,SAAK3B,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,cAAhB,EAA+B;AAC9CG,MAAAA,MAAM,EAAE;AACJujC,QAAAA,OAAO,EAAExnC,CAAC,CAACoH,aAAF,CAAgBogC,OADrB;AAEJ4B,QAAAA,UAAU,EAAE,KAAKviC,KAAL,CAAWhM,GAAX,CAAegN,MAAf;AAFR,OADsC;AAK9C9D,MAAAA,OAAO,EAAE,KALqC;AAM9CC,MAAAA,QAAQ,EAAE;AANoC,KAA/B,CAAnB;AASA,SAAK8C,MAAL,GAAc9G,CAAC,CAACoH,aAAF,CAAgBogC,OAA9B;AAEA,QAAI,KAAK1gC,MAAL,IAAee,MAAnB,EACA,KAAKhE,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,gBAAhB,EAAiC;AAChDG,MAAAA,MAAM,EAAE;AAACujC,QAAAA,OAAO,EAAE,KAAK3gC,KAAL,CAAWC;AAArB,OADwC;AAEhD/C,MAAAA,OAAO,EAAE,KAFuC;AAGhDC,MAAAA,QAAQ,EAAE;AAHsC,KAAjC,CAAnB;AAKH;;AAEDqlC,EAAAA,aAAa,GAAE;AAEX;AACA;AACA,SAAKC,eAAL,GAAuB,IAAvB;AAEA,QAAI,KAAKziC,KAAT,EACI,KAAKA,KAAL,CAAWC,MAAX,CAAkB6jB,IAAlB,CAAuBqe,KAAvB,GAA+B,KAAKA,KAApC;AACP;;AAED,MAAIliC,MAAJ,GAAY;AACR,WAAO,KAAKD,KAAL,IAAc,KAAKA,KAAL,CAAWC,MAAzB,IAAmC,KAAKD,KAAL,CAAWC,MAAX,CAAkBpM,EAA5D;AACH;;AAED,MAAIoM,MAAJ,CAAWpK,GAAX,EAAe;AACX,SAAKmK,KAAL,CAAWC,MAAX,GAAoBpK,GAApB;AACA,SAAKyK,MAAL;AAEA,QAAIwjB,IAAI,GAAG,KAAK9jB,KAAL,CAAWC,MAAX,CAAkB6jB,IAA7B;AAEA,SAAKvvB,YAAL,CAAkB,QAAlB,EAA4B,KAAKyL,KAAL,CAAWC,MAAX,CAAkBpM,EAA9C;AAEA,QAAI,KAAK4uC,eAAT,EACI3e,IAAI,CAACqe,KAAL,GAAa,KAAKA,KAAlB;AAEJ,QAAIre,IAAI,CAAChsB,aAAL,IAAsB,IAA1B,EACI,KAAK5C,WAAL,CAAkB4uB,IAAlB;AACP;;AA3YoD,CAAzD;;eA+Ye5tB,cAAc,CAAClC,GAAf,CAAmB,QAAnB;;;;;;;;;;;ACrZf;;;;AAEA,MAAM0uC,WAAN,SAA0B/tC,WAA1B,CAAsC;AAErCE,EAAAA,WAAW,GAAE;AACZ;AAEA,SAAK8tC,YAAL,GAAoB,EAApB,CAHY,CAKZ;;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBjqC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK6pC,aAAL,GAAqB,KAAKA,aAAL,CAAmB7pC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKkqC,aAAL,GAAqB,KAAKA,aAAL,CAAmBlqC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKmqC,cAAL,GAAsB,KAAKA,cAAL,CAAoBnqC,IAApB,CAAyB,IAAzB,CAAtB;AACA;;AAED,MAAIoqC,UAAJ,GAAgB;AAAE,WAAO,KAAK9sC,YAAL,CAAkB,cAAlB,CAAP;AAA0C;;AAE5D,MAAI+sC,QAAJ,GAAc;AAAE,WAAO,KAAK/sC,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAI+sC,QAAJ,CAAantC,GAAb,EAAiB;AAAEA,IAAAA,GAAG,GAAG,KAAKtB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKgB,eAAL,CAAqB,UAArB,CAA1C;AAA4E;;AAE/F,MAAI0tC,SAAJ,GAAe;AAAE,WAAO,KAAKhtC,YAAL,CAAkB,WAAlB,CAAP;AAAuC;;AACxD,MAAIgtC,SAAJ,CAAcptC,GAAd,EAAkB;AAAEA,IAAAA,GAAG,GAAG,KAAKtB,YAAL,CAAkB,WAAlB,EAA+B,EAA/B,CAAH,GAAwC,KAAKgB,eAAL,CAAqB,WAArB,CAA3C;AAA8E;;AAElGmC,EAAAA,iBAAiB,GAAE;AAElB,QAAIE,IAAI,GAAG,KAAK0D,WAAL,GAAmB1D,IAA9B;AACA,QAAIA,IAAI,IAAI,CAACA,IAAI,CAACsrC,WAAlB,EACCtrC,IAAI,CAACsrC,WAAL,GAAmB,IAAnB,CAJiB,CAMlB;;AACA14B,IAAAA,UAAU,CAAC,MAAI;AACd,WAAK24B,YAAL;AACA,KAFS,EAER,CAFQ,CAAV;AAGA;;AAEDA,EAAAA,YAAY,GAAE;AACb;AACA,SAAKC,OAAL,GAAe1vC,KAAK,CAACC,IAAN,CAAW,KAAKN,gBAAL,CAAsB,yFAAtB,CAAX,CAAf;AAEA,SAAK+vC,OAAL,CAAa9vC,OAAb,CAAqBC,EAAE,IAAE;AACxB,UAAI0K,GAAG,GAAG1K,EAAE,CAACqC,YAAH,CAAgB,KAAhB,CAAV;;AACA,UAAIqI,GAAJ,EAAS;AACR,aAAK0kC,YAAL,CAAkB1kC,GAAlB,IAAyB1K,EAAzB;AAEA,YAAI,CAAC,KAAKwvC,UAAV,EACCxvC,EAAE,CAACkQ,KAAH,CAAS4/B,QAAT,GAAoBplC,GAApB;AACD;AACD,KARD;AAUA,QAAI,KAAK5D,QAAL,IAAiB,KAAKpE,YAAL,CAAkB,UAAlB,CAArB,EACC,KAAKoE,QAAL,GAAgB,IAAhB;AAED,SAAKjD,gBAAL,CAAsB,QAAtB,EAAgC,KAAK0rC,cAArC,EAAqD,IAArD;;AAEA,SAAKQ,cAAL;AACA;;AAED,aAAW9tC,kBAAX,GAA+B;AAAE,WAAO,CAAC,UAAD,CAAP;AAAqB;;AAEtDC,EAAAA,wBAAwB,CAACxB,IAAD,EAAOyB,QAAP,EAAiBC,QAAjB,EAA2B;AAClD,QAAI1B,IAAI,IAAI,UAAZ,EACC,KAAKoG,QAAL,GAAgB1E,QAAQ,KAAK,IAA7B;AACD;;AAEDoC,EAAAA,oBAAoB,GAAE;AACrB,SAAKqrC,OAAL,GAAe,EAAf;AACA,SAAKT,YAAL,GAAoB,EAApB;AACA,SAAKR,KAAL,GAAa,IAAb;AAEA,SAAKxmC,mBAAL,CAAyB,QAAzB,EAAmC,KAAKmnC,cAAxC;AACA;;AAED,MAAIX,KAAJ,GAAW;AAAE,WAAO,KAAKoB,MAAZ;AAAoB;;AACjC,MAAIpB,KAAJ,CAAUA,KAAV,EAAgB;AAEf,QAAIA,KAAK,IAAI,KAAKA,KAAlB,EAA0B;;AAE1B,QAAI,KAAKA,KAAT,EAAgB;AACf,WAAKA,KAAL,CAAWqB,GAAX,CAAe,MAAf,EAAuB,IAAvB,EAA6B,IAA7B;AACA,WAAKrB,KAAL,CAAWqB,GAAX,CAAe,QAAf,EAAyB,IAAzB,EAA+B,IAA/B;AACA,WAAKrB,KAAL,CAAWqB,GAAX,CAAe,QAAf,EAAyB,IAAzB,EAA+B,IAA/B;AACA,aAAO,KAAKD,MAAZ;AACA;;AAED,QAAI,CAACpB,KAAL,EAAa;AAEb,SAAKoB,MAAL,GAAcpB,KAAd;AACA,SAAKA,KAAL,CAAWsB,YAAX,GAA0B,KAAKtB,KAAL,CAAWsB,YAAX,IAA2B,EAArD;AAEA,SAAKtB,KAAL,CAAW9pC,EAAX,CAAc,MAAd,EAAsB,KAAKuqC,WAA3B,EAAwC,IAAxC;AACA,SAAKT,KAAL,CAAW9pC,EAAX,CAAc,QAAd,EAAwB,KAAKmqC,aAA7B,EAA4C,IAA5C;AACA,SAAKL,KAAL,CAAW9pC,EAAX,CAAc,QAAd,EAAwB,KAAKwqC,aAA7B,EAA4C,IAA5C;;AAEA,SAAKS,cAAL;AACA;;AAED57B,EAAAA,KAAK,CAACg8B,IAAD,EAAM;AACV,QAAIzlC,GAAG,GAAG,KAAKrI,YAAL,CAAkB,OAAlB,CAAV;AACA,QAAI,CAACqI,GAAL,EAAW,OAAO0J,SAAP;AAEX,QAAIC,IAAI,GAAG,oBAAM3J,GAAN,KAAc,EAAzB;AAEA,QAAIylC,IAAI,KAAK/7B,SAAb,EACC,OAAOC,IAAP;AAEDA,IAAAA,IAAI,GAAG/N,MAAM,CAACwqB,MAAP,CAAczc,IAAd,EAAoB87B,IAApB,CAAP;AAEA,wBAAMzlC,GAAN,EAAW2J,IAAX;AACA;;AAED+7B,EAAAA,WAAW,CAAC1lC,GAAD,EAAM+F,UAAU,GAAC,IAAjB,EAAsB;AAChC,QAAI,KAAKm+B,KAAT,EACC,OAAO,KAAKA,KAAL,CAAWyB,GAAX,CAAe3lC,GAAf,IAAsB,KAAKkkC,KAAL,CAAWnuC,GAAX,CAAeiK,GAAf,CAAtB,GAA2C+F,UAAlD;AAED,QAAI4D,IAAI,GAAG,KAAKF,KAAL,EAAX;AACA,WAAOE,IAAI,GAAGA,IAAI,CAAC3J,GAAD,CAAP,GAAe+F,UAA1B;AACA;;AAEDs/B,EAAAA,cAAc,GAAE;AACf,QAAI,KAAKF,OAAL,KAAiB,KAAKjB,KAAL,IAAc,KAAKlsC,YAAL,CAAkB,OAAlB,CAA/B,CAAJ,EACA,KAAKmtC,OAAL,CAAa9vC,OAAb,CAAqBC,EAAE,IAAE;AACxB;AACA,UAAI0K,GAAG,GAAG1K,EAAE,CAACqC,YAAH,CAAgB,KAAhB,CAAV;AACA,UAAIC,GAAG,GAAG,KAAK8tC,WAAL,CAAiB1lC,GAAjB,CAAV;AAEA,UAAIpI,GAAG,IAAIA,GAAG,CAACguC,gBAAf,EACChuC,GAAG,GAAGA,GAAG,CAAC0M,MAAJ,CAAWhP,EAAE,CAACgiC,OAAH,CAAWuO,WAAX,GAAuBvwC,EAAE,CAACgiC,OAAH,CAAWuO,WAAX,CAAuBvhC,MAA9C,GAAqD,YAAhE,CAAN;AAED,UAAI1M,GAAG,KAAK8R,SAAZ,EACCpU,EAAE,CAACiB,KAAH,GAAWqB,GAAX;AACD,KAVD;AAWA;;AAED+sC,EAAAA,WAAW,CAAC9c,CAAD,EAAIsV,KAAJ,EAAWrX,IAAX,EAAgB;AAC1B,QAAIggB,OAAO,GAAG,KAAd,CAD0B,CAG1B;;AACA,SAAK,IAAI9lC,GAAT,IAAgBm9B,KAAhB,EAAuB;AACtB,UAAItV,CAAC,CAAC2d,YAAF,IAAkB3d,CAAC,CAAC2d,YAAF,CAAexlC,GAAf,MAAwB0J,SAA9C,EAAyD;AACxDo8B,QAAAA,OAAO,GAAG,IAAV;AACA,eAAOje,CAAC,CAAC2d,YAAF,CAAexlC,GAAf,CAAP;AACA;AACD,KATyB,CAW1B;;;AACA,QAAI8lC,OAAJ,EACC,KAAK5B,KAAL,CAAW4B,OAAX,CAAmB,QAAnB,EAA6B,KAAK5B,KAAL,CAAW6B,QAAX,EAA7B,EAAoD,KAAK7B,KAAL,CAAW8B,WAAX,EAApD;AACD;;AAEDpB,EAAAA,aAAa,CAACmB,QAAD,EAAWC,WAAX,EAAuB;AACnC,SAAKb,OAAL,CAAa9vC,OAAb,CAAqBC,EAAE,IAAE;AACxB,UAAI0wC,WAAW,CAAC1wC,EAAE,CAAC0K,GAAJ,CAAX,IAAuB0J,SAAvB,IAAoC,CAAC,KAAKq7B,QAA9C,EACCzvC,EAAE,CAACgB,YAAH,CAAgB,SAAhB,EAA2B,EAA3B,EADD,KAGChB,EAAE,CAACgC,eAAH,CAAmB,SAAnB;AACD,KALD;AAMA;;AAEDitC,EAAAA,aAAa,CAAC1c,CAAD,EAAI/B,IAAI,GAAC,EAAT,EAAY;AAExB,SAAK,IAAI9lB,GAAT,IAAgB6nB,CAAC,CAACoe,OAAlB,EAA2B;AAE1B;AACA,UAAIpe,CAAC,CAAC2d,YAAF,IAAkB3d,CAAC,CAAC2d,YAAF,CAAexlC,GAAf,CAAlB,IAAyC6nB,CAAC,CAAC2d,YAAF,CAAexlC,GAAf,KAAuB6nB,CAAC,CAACoe,OAAF,CAAUjmC,GAAV,CAApE,EAAmF;AAClF,eAAO6nB,CAAC,CAAC2d,YAAF,CAAexlC,GAAf,CAAP;AACA,OALyB,CAO1B;;;AACA,UAAI,KAAK0kC,YAAL,CAAkB1kC,GAAlB,CAAJ,EAA4B;AAC3B,aAAK0kC,YAAL,CAAkB1kC,GAAlB,EAAuBzJ,KAAvB,GAA+BsxB,CAAC,CAACoe,OAAF,CAAUjmC,GAAV,CAA/B;AACA,aAAK0kC,YAAL,CAAkB1kC,GAAlB,EAAuB1I,eAAvB,CAAuC,SAAvC,EAF2B,CAI3B;AACA;AACA;AACA;AACD;AACD;;AAED,QAAMutC,cAAN,CAAqB3pC,CAArB,EAAuB;AAEtB,QAAI,CAACA,CAAC,CAACiE,MAAP,EAAgB;AAEhB,QAAI0oB,CAAC,GAAG,KAAKqc,KAAb;AACA,QAAI5uC,EAAE,GAAG4F,CAAC,CAACwD,MAAX;AACA,QAAIsB,GAAG,GAAG1K,EAAE,CAACqC,YAAH,CAAgB,KAAhB,CAAV;AACA,QAAIC,GAAG,GAAGsD,CAAC,CAACiE,MAAF,CAAS5I,KAAnB;AAEA,QAAI,CAACyJ,GAAL,EAAW;AAEX,QAAIkmC,OAAO,GAAG,EAAd;AACAA,IAAAA,OAAO,CAAClmC,GAAD,CAAP,GAAepI,GAAf;;AAEA,QAAI,KAAKuuC,cAAL,IAAuB,OAAM,KAAKA,cAAL,CAAoBte,CAApB,EAAuBqe,OAAvB,EAAgClmC,GAAhC,EAAqCpI,GAArC,CAAN,MAAoD,KAA/E,EAAsF;AACrFtC,MAAAA,EAAE,CAACiB,KAAH,GAAW2vC,OAAO,CAAClmC,GAAD,CAAP,KAAiB0J,SAAjB,GAA6Bw8B,OAAO,CAAClmC,GAAD,CAApC,GAA4C1K,EAAE,CAACiB,KAA1D;AACA;AACA,KAjBqB,CAmBtB;AACA;AACA;AACA;AACA;;;AACA,QAAI,KAAK4vC,cAAT,EACA,KAAK,IAAIC,IAAT,IAAiBF,OAAjB,EAA0B;AACzB,UAAIE,IAAI,IAAIpmC,GAAZ,EAAiB;AAChB,YAAIqmC,GAAG,GAAG,KAAKtwC,GAAL,CAASqwC,IAAT,CAAV;;AACA,YAAIC,GAAJ,EAAUA,GAAG,CAAC9vC,KAAJ,GAAY2vC,OAAO,CAACE,IAAD,CAAnB;AACV;AACD,KA9BqB,CAgCtB;;AACA,QAAI9wC,EAAE,CAACgiC,OAAH,IAAchiC,EAAE,CAACgiC,OAAH,CAAW/+B,IAAX,IAAiB,MAA/B,IAAyCX,GAA7C,EAAkD;AACjDsuC,MAAAA,OAAO,CAAClmC,GAAD,CAAP,GAAe1K,EAAE,CAACgiC,OAAH,CAAWuO,WAAX,CAAuBS,SAAvB,CAAiC,YAAjC,CAAf;AACA;;AAED,SAAK78B,KAAL,CAAWy8B,OAAX;;AAEA,QAAI,KAAKhC,KAAT,EAAgB;AACf,UAAI,KAAKa,QAAL,KAAkB,IAAtB,EAA4B;AAC3B,aAAKb,KAAL,CAAW1V,IAAX,CAAgB0X,OAAhB,EAAyB;AAACK,UAAAA,KAAK,EAAC,KAAKvB,SAAL,IAAgB;AAAvB,SAAzB;AACA,aAAKd,KAAL,CAAW4B,OAAX,CAAmB,QAAnB,EAA6B,KAA7B,EAAoCI,OAApC;AACA,OAHD,MAGK;AACJ,aAAKhC,KAAL,CAAWsC,QAAX,CAAoBN,OAApB;AACA;AACD;;AAED,SAAKviB,QAAL,IAAe,KAAKA,QAAL,CAAcuiB,OAAd,CAAf;AACA;;AAED,MAAI9pC,QAAJ,GAAc;AAAE,WAAO,KAAKqqC,UAAL,IAAmB,KAA1B;AAAiC;;AACjD,MAAIrqC,QAAJ,CAAaA,QAAQ,GAAC,KAAtB,EAA4B;AAC3B,SAAKqqC,UAAL,GAAkBrqC,QAAQ,KAAK,IAA/B;AACA,SAAK+oC,OAAL,IAAc,KAAKA,OAAL,CAAa9vC,OAAb,CAAqBC,EAAE,IAAEA,EAAE,CAAC8G,QAAH,GAAY,KAAKqqC,UAA1C,CAAd;AACA;;AAED,MAAIlP,SAAJ,GAAe;AACd,WAAO,CAAC,CAAC,KAAK4N,OAAL,CAAarnC,IAAb,CAAkBxI,EAAE,IAAEA,EAAE,CAACiiC,SAAzB,CAAT;AACA;;AAEDG,EAAAA,KAAK,CAACta,KAAK,GAAC,CAAP,EAAS;AACb,SAAK+nB,OAAL,CAAa/nB,KAAb,KAAqB,KAAK+nB,OAAL,CAAa/nB,KAAb,EAAoBsa,KAApB,EAArB;AACA;;AAED3hC,EAAAA,GAAG,CAACiK,GAAD,EAAK;AACP,QAAI,OAAOA,GAAP,IAAc,QAAlB,EACC,OAAO,KAAKmlC,OAAL,CAAanlC,GAAb,CAAP;AAED,WAAOvK,KAAK,CAACC,IAAN,CAAW,KAAKyvC,OAAhB,EAAyBrnC,IAAzB,CAA8B4oC,EAAE,IAAEA,EAAE,CAAC1mC,GAAH,IAAQA,GAA1C,CAAP;AACA;;AAxPoC;;AA2PtC/H,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsCusC,WAAtC;;eAEexsC,cAAc,CAAClC,GAAf,CAAmB,cAAnB;;;;;;;;;;;AC/Pf;;eAEe,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCFJ,CAACT,EAAD,EAAKsC,GAAL,KAAW;AAEtB,MAAI,CAACA,GAAD,IAAQA,GAAG,KAAK,GAApB,EACItC,EAAE,CAACgB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB,EADJ,KAGIhB,EAAE,CAACgC,eAAH,CAAmB,OAAnB;AAEA,MAAI,CAACM,GAAL,EACAtC,EAAE,CAACgB,YAAH,CAAgB,UAAhB,EAA4B,EAA5B,EADA,KAGAhB,EAAE,CAACgC,eAAH,CAAmB,UAAnB;AAEJ,MAAI,CAACM,GAAD,IAAQ,CAACtC,EAAE,CAACqC,YAAH,CAAgB,aAAhB,CAAb,EACIrC,EAAE,CAACgB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB,EADJ,KAGIhB,EAAE,CAACgC,eAAH,CAAmB,OAAnB;AACP;;;;;;;;;;;eChBc,CAAChC,EAAD,EAAKsC,GAAL,KAAa;AAExB,MAAIs/B,QAAQ,GAAG5hC,EAAE,CAAC0C,YAAH,CAAgB,UAAhB,CAAf,CAFwB,CAIxB;;AACA,MAAIqzB,OAAO,GAAG/1B,EAAE,CAACqC,YAAH,CAAgB,SAAhB,KAA8BrC,EAAE,CAACqC,YAAH,CAAgB,UAAhB,CAA5C;AAEA,MAAI,CAAC0zB,OAAD,IAAY/1B,EAAE,CAACqxC,QAAnB,EACI,OAAOrxC,EAAE,CAACqxC,QAAH,CAAY/uC,GAAZ,EAAiBtC,EAAjB,MAAyB,KAAhC;AAEJ,MAAI,CAAC+1B,OAAL,EAAe,OAAO6L,QAAQ,GAAG,CAAC,CAACt/B,GAAL,GAAW,IAA1B;;AAEf,UAAOyzB,OAAP;AACI,SAAK,KAAL;AACIA,MAAAA,OAAO,GAAG,QAAV;AAAoB;;AACxB,SAAK,OAAL;AACA,SAAK,SAAL;AACIA,MAAAA,OAAO,GAAG,4BAAV;AAAwC;;AAC5C,SAAK,OAAL;AACIA,MAAAA,OAAO,GAAG,oBAAV;AAAgC;AAPxC;;AAUA,SAAO,CAAC6L,QAAD,IAAa,CAACt/B,GAAd,GAAoB,IAApB,GAA4B,IAAIqG,MAAJ,CAAWotB,OAAX,CAAD,CAAsBntB,IAAtB,CAA2BtG,GAA3B,CAAlC;AAEH;;;;;;;;;;;eCxBc,CAACsD,CAAD,EAAI5F,EAAJ,EAAQsC,GAAR,KAAgB;AAE3B,MAAIgvC,MAAM,GAAG,CAAC,WAAD,EAAc,YAAd,EAA4B,SAA5B,EAAuC,WAAvC,EAAoD,WAApD,EAAiE,QAAjE,EAA2E,KAA3E,CAAb;AACA,MAAIt5B,OAAO,GAAIpS,CAAC,CAACoS,OAAF,IAAapS,CAAC,CAAC2rC,OAA9B;AACA,MAAIC,OAAO,GAAGF,MAAM,CAACrnC,QAAP,CAAgBrE,CAAC,CAAC8E,GAAlB,KAA0BsN,OAAxC;AAEA,MAAItG,GAAG,GAAG1R,EAAE,CAACqC,YAAH,CAAgB,WAAhB,KAAgCrC,EAAE,CAACqC,YAAH,CAAgB,KAAhB,CAA1C;AAEA,MAAIqP,GAAG,IAAIpP,GAAG,CAACoF,MAAJ,IAAcgK,GAArB,IAA4B,CAAC8/B,OAAjC,EACI,OAAO,IAAP;AAEJ,SAAO,KAAP;AACH;;;;;;;;;;;ACZD;;AACA;;AACA;;;;AAEe,kBAAS9c,KAAT,EAAe;AAE1Bzd,EAAAA,UAAU,CAAC,MAAI;AACX,gCAAcyd,KAAd,EAAqBA,KAAK,CAACzzB,KAA3B;AACH,GAFS,CAAV;AAIAyzB,EAAAA,KAAK,CAAC7wB,gBAAN,CAAuB,cAAvB,EAAuCwqB,QAAvC;AACAqG,EAAAA,KAAK,CAAC7wB,gBAAN,CAAuB,OAAvB,EAAgC4tC,OAAhC;AACA/c,EAAAA,KAAK,CAAC7wB,gBAAN,CAAuB,OAAvB,EAAgC6tC,OAAhC;AACAhd,EAAAA,KAAK,CAAC7wB,gBAAN,CAAuB,MAAvB,EAA+B8tC,MAA/B;AACAjd,EAAAA,KAAK,CAAC7wB,gBAAN,CAAuB,SAAvB,EAAkC+tC,SAAlC,EAV0B,CAY1B;AACA;;AAEA,MAAIld,KAAK,CAACzxB,IAAN,IAAc,OAAlB,EAA2B;AACvB,QAAI,CAACyxB,KAAK,CAACqB,OAAX,EAAqBrB,KAAK,CAACqB,OAAN,GAAgB,OAAhB;AACrB,QAAI,CAACrB,KAAK,CAACmd,YAAX,EAA0Bnd,KAAK,CAACmd,YAAN,GAAqB,OAArB;AAC7B;;AAED,MAAInd,KAAK,CAACzxB,IAAN,IAAc,KAAlB,EAAyB;AACrB,QAAI,CAACyxB,KAAK,CAACmd,YAAX,EAA0Bnd,KAAK,CAACmd,YAAN,GAAqB,OAArB;AAC7B;AACJ;;AAGD,MAAMC,WAAW,GAAGpd,KAAK,IAAI;AAEzB,MAAI,8BAAgBA,KAAhB,EAAuBA,KAAK,CAACzzB,KAA7B,CAAJ,EAAyC;AACrC,WAAOyzB,KAAK,CAACuN,SAAb;AACAvN,IAAAA,KAAK,CAAC1yB,eAAN,CAAsB,SAAtB;AAEH,GAJD,MAIM,IAAG0yB,KAAK,CAAChyB,YAAN,CAAmB,eAAnB,CAAH,EAAuC;AACzCgyB,IAAAA,KAAK,CAACzzB,KAAN,GAAcyzB,KAAK,CAACqd,YAAN,IAAsB,EAApC;AACA,WAAOrd,KAAK,CAACuN,SAAb;AACAvN,IAAAA,KAAK,CAAC1yB,eAAN,CAAsB,SAAtB;AAEH,GALK,MAKD;AACD0yB,IAAAA,KAAK,CAACuN,SAAN,GAAkB,IAAlB;AACAvN,IAAAA,KAAK,CAAC1zB,YAAN,CAAmB,SAAnB,EAA8B,EAA9B;AACH;AACJ,CAfD;;AAiBA,MAAMqtB,QAAQ,GAAGzoB,CAAC,IAAG;AACjB,8BAAcA,CAAC,CAACwD,MAAhB,EAAwBxD,CAAC,CAACwD,MAAF,CAASnI,KAAjC;AACH,CAFD;;AAIA,MAAMywC,OAAO,GAAG9rC,CAAC,IAAG;AAChBA,EAAAA,CAAC,CAACwD,MAAF,CAAS2oC,YAAT,GAAwBnsC,CAAC,CAACwD,MAAF,CAASnI,KAAjC;AACH,CAFD;;AAIA,MAAM0wC,MAAM,GAAG/rC,CAAC,IAAG;AACfksC,EAAAA,WAAW,CAAClsC,CAAC,CAACwD,MAAH,CAAX;AACA,8BAAcxD,CAAC,CAACwD,MAAhB,EAAwBxD,CAAC,CAACwD,MAAF,CAASnI,KAAjC;AACA,SAAO2E,CAAC,CAACwD,MAAF,CAAS2oC,YAAhB;AACH,CAJD;;AAMA,MAAMN,OAAO,GAAG7rC,CAAC,IAAG;AAChB,8BAAcA,CAAC,CAACwD,MAAhB,EAAwBxD,CAAC,CAACwD,MAAF,CAASnI,KAAjC;AACH,CAFD;;AAIA,MAAM2wC,SAAS,GAAGhsC,CAAC,IAAG;AAElB,MAAIA,CAAC,CAACwD,MAAF,CAAS1G,YAAT,CAAsB,SAAtB,CAAJ,EACIkD,CAAC,CAACwD,MAAF,CAASpH,eAAT,CAAyB,SAAzB;;AAEJ,MAAI4D,CAAC,CAAC8E,GAAF,IAAS,QAAb,EAAuB;AACnB9E,IAAAA,CAAC,CAACwD,MAAF,CAASnI,KAAT,GAAiB2E,CAAC,CAACwD,MAAF,CAAS2oC,YAAT,IAAyB,EAA1C;AACAnsC,IAAAA,CAAC,CAACwD,MAAF,CAASmO,IAAT;AACH,GARiB,CAUlB;;;AACA,MAAI,4BAAc3R,CAAd,EAAiBA,CAAC,CAACwD,MAAnB,EAA2BxD,CAAC,CAACwD,MAAF,CAASnI,KAApC,CAAJ,EACI2E,CAAC,CAACqD,cAAF;AACP,CAbD;;;;;;;;;AC7DA;;AACA;;;;AALA;;;AAOA,MAAM+oC,kBAAN,SAAiC5wC,WAAjC,CAA6C;AAE5CE,EAAAA,WAAW,GAAG;AACP;AAEA,QAAIgC,MAAM,GAAG,KAAK/B,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB,CAAb;AACA,QAAIC,IAAI,GAAG/B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AAEN,QAAIuE,KAAK,GAAG,KAAK7B,YAAL,CAAkB,OAAlB,KAA8B,4BAA1C;AACA,QAAI/C,MAAM,GAAG,KAAK+C,YAAL,CAAkB,QAAlB,KAA+B,6BAA5C;AACA,QAAIs/B,MAAM,GAAG,KAAKt/B,YAAL,CAAkB,QAAlB,KAA+B,6BAA5C,CARa,CAUb;AACA;;AACA/C,IAAAA,MAAM,GAAGA,MAAM,CAACiB,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAjB,IAAAA,MAAM,GAAGA,MAAM,CAACiB,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAohC,IAAAA,MAAM,GAAGA,MAAM,CAACphC,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AACAohC,IAAAA,MAAM,GAAGA,MAAM,CAACphC,OAAP,CAAe,MAAf,EAAuB,QAAvB,CAAT;AAEMkB,IAAAA,IAAI,CAAC7B,SAAL,GAAkB;YACdyB,wBAAO4lC,OAAQ;;;;;0BAKD3nC,MAAO;yBACR4E,KAAM;0BACLy9B,MAAO;;;;;;;;;;;;4BARzB;AAsBA,SAAKjgC,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEN,QAAIZ,KAAK,GAAG,KAAKw/B,CAAL,CAAO,QAAP,CAAZ;AACA,SAAK5B,IAAL,GAAY59B,KAAK,CAAC2mC,aAAN,GAAsBvnC,GAAtB,CAA0BL,EAAE,IAAEA,EAAE,CAACquC,WAAH,CAAe3lC,IAAf,EAA9B,EAAqDwG,IAArD,CAA0D,GAA1D,CAAZ;AACA,SAAK2vB,IAAL,GAAY,KAAKA,IAAL,CAAUt+B,OAAV,CAAkB,UAAlB,EAA8B,EAA9B,EAAkCmI,IAAlC,EAAZ;AAEA,SAAKs5B,OAAL,GAAe,KAAKphC,aAAL,CAAmB,+FAAnB,CAAf;;AAEA,QAAI,KAAKohC,OAAT,EAAkB;AAEjB,WAAKA,OAAL,CAAa/0B,IAAb,GAAoB,SAApB;AAEA,WAAKqkB,gBAAL,GAAwB,IAAIC,gBAAJ,CAAqB0gB,SAAS,IAAE;AACvDA,QAAAA,SAAS,CAAClyC,OAAV,CAAkBwyB,CAAC,IAAE;AAEpB;AACA,cAAI,CAAC,SAAD,EAAY,OAAZ,EAAqB,UAArB,EAAiC,OAAjC,EAA0C,SAA1C,EAAqDtoB,QAArD,CAA8DsoB,CAAC,CAAC2f,aAAhE,CAAJ,EAAoF;AACnF,gBAAI,KAAKlQ,OAAL,CAAat/B,YAAb,CAA0B6vB,CAAC,CAAC2f,aAA5B,CAAJ,EACC,KAAKlxC,YAAL,CAAkBuxB,CAAC,CAAC2f,aAApB,EAAmC,IAAnC,EADD,KAGC,KAAKlwC,eAAL,CAAqBuwB,CAAC,CAAC2f,aAAvB;AACD;AACD,SATD;AAUA,OAXuB,CAAxB;AAYA,WAAK5gB,gBAAL,CAAsBG,OAAtB,CAA8B,KAAKuQ,OAAnC,EAA4C;AAAElhC,QAAAA,UAAU,EAAE,IAAd;AAAoB4wB,QAAAA,SAAS,EAAE,KAA/B;AAAsCC,QAAAA,OAAO,EAAE;AAA/C,OAA5C,EAhBiB,CAkBjB;;AACA,UAAI,KAAKqQ,OAAL,CAAa9B,OAAb,IAAwB,OAA5B,EACC,gCAAkB,KAAK8B,OAAvB;AACD;;AAED,SAAKn+B,gBAAL,CAAsB,OAAtB,EAA+B,KAAKwjC,QAAL,CAAcjiC,IAAd,CAAmB,IAAnB,CAA/B,EAAyD,IAAzD;AAEA,SAAKvB,gBAAL,CAAsB,QAAtB,EAAgC,KAAKsuC,SAArC;AACG;;AAEJA,EAAAA,SAAS,CAACvsC,CAAD,EAAG;AAEX,QAAIA,CAAC,CAACwD,MAAF,IAAY,IAAhB,EAAuB;AAEvB,QAAIxD,CAAC,CAACwD,MAAF,CAAS82B,OAAT,IAAoB,cAAxB,EAAwC;AAExCt6B,IAAAA,CAAC,CAACgC,eAAF;AAEA,QAAIgc,KAAK,GAAG,IAAIla,WAAJ,CAAgB,QAAhB,EAA0B;AACrCC,MAAAA,OAAO,EAAE,IAD4B;AAErCC,MAAAA,QAAQ,EAAE,IAF2B;AAGrCC,MAAAA,MAAM,EAAE;AACP5I,QAAAA,KAAK,EAAE,KAAKA,KADL;AAEPyJ,QAAAA,GAAG,EAAE,KAAKA;AAFH;AAH6B,KAA1B,CAAZ;AASA,SAAKjB,aAAL,CAAmBma,KAAnB;AACA;;AAED6c,EAAAA,CAAC,CAACxxB,GAAD,EAAK;AAAE,WAAO,KAAKvN,UAAL,CAAgBd,aAAhB,CAA8BqO,GAA9B,CAAP;AAA0C;;AAClDyxB,EAAAA,EAAE,CAACzxB,GAAD,EAAK;AAAE,WAAO,KAAKvN,UAAL,CAAgB5B,gBAAhB,CAAiCmP,GAAjC,CAAP;AAA6C;;AAEtD9K,EAAAA,iBAAiB,GAAE;AAClB,SAAKiuC,cAAL,GADkB,CAGlB;;;AACA,SAAK1R,EAAL,CAAQ,MAAR,EAAgB3gC,OAAhB,CAAwBkN,IAAI,IAAE;AAC7B,UAAIA,IAAI,CAAC26B,aAAL,GAAqBlgC,MAArB,IAA+B,CAAnC,EACCuF,IAAI,CAACjM,YAAL,CAAkB,QAAlB,EAA4B,EAA5B,EADD,KAGCiM,IAAI,CAACjL,eAAL,CAAqB,QAArB;AACD,KALD,EAJkB,CAWlB;;AACAiV,IAAAA,UAAU,CAAC,MAAI;AACd,UAAI,KAAK/G,KAAL,CAAWm5B,QAAX,IAAuB,EAA3B,EACC,KAAKn5B,KAAL,CAAWm5B,QAAX,GAAsB,KAAK5I,CAAL,CAAO,QAAP,EAAiB/iB,WAAvC;AAED,UAAI,KAAKskB,OAAT,EACC,KAAKA,OAAL,CAAal7B,QAAb,GAAwB,KAAKA,QAA7B;AACD,KANS,EAMR,CANQ,CAAV;AAQA;;AAEDtC,EAAAA,oBAAoB,GAAE,CAAE;;AAExB,aAAWvC,kBAAX,GAAgC;AAAE,WAAO,CAAC,UAAD,CAAP;AAAsB;;AAExDC,EAAAA,wBAAwB,CAACxB,IAAD,EAAOyB,QAAP,EAAiBC,QAAjB,EAA0B;AAEjD,QAAI1B,IAAI,KAAK,UAAT,IAAuB,KAAKshC,OAA5B,IAAuC,KAAKA,OAAL,CAAal7B,QAAb,KAA0BsN,SAArE,EACC,KAAK4tB,OAAL,CAAal7B,QAAb,GAAwB,KAAKA,QAA7B;AACD;;AAED,MAAIA,QAAJ,GAAc;AAAE,WAAO,KAAKpE,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAIoE,QAAJ,CAAaxE,GAAG,GAAC,IAAjB,EAAsB;AAAEA,IAAAA,GAAG,GAAG,KAAKtB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKgB,eAAL,CAAqB,UAArB,CAA1C;AAA4E;;AAEpG,MAAI0I,GAAJ,GAAS;AAAE,WAAO,KAAKrI,YAAL,CAAkB,KAAlB,CAAP;AAAgC;;AAE3C,MAAIpB,KAAJ,GAAW;AACV,WAAO,KAAK+gC,OAAL,IAAgB,KAAKA,OAAL,CAAa/gC,KAApC;AACA;;AAED,MAAIA,KAAJ,CAAUqB,GAAV,EAAc;AACb,QAAI,KAAK0/B,OAAT,EACC,KAAKA,OAAL,CAAa/gC,KAAb,GAAqBqB,GAArB;AAED,QAAI,KAAK0/B,OAAL,IAAgB,KAAKA,OAAL,CAAa9B,OAAb,IAAwB,OAA5C,EACC,KAAK8B,OAAL,CAAav4B,aAAb,CAA2B,IAAIC,WAAJ,CAAgB,cAAhB,CAA3B;AACD;;AAED,MAAI2oC,OAAJ,GAAa;AACZ,QAAIrQ,OAAO,GAAG,KAAKA,OAAnB;AACA,QAAI,CAACA,OAAL,EAAe,OAAO5tB,SAAP;AACf,QAAI9R,GAAG,GAAG0/B,OAAO,CAACqQ,OAAlB;AACA,WAAO/vC,GAAG,KAAK8R,SAAR,GAAoB9R,GAApB,GAA0B0/B,OAAO,CAAC/gC,KAAzC;AACA;;AAED,MAAImhB,OAAJ,GAAa;AAAE,WAAO,KAAK4f,OAAL,IAAgB,KAAKA,OAAL,CAAa5f,OAApC;AAA4C;;AAE3D,MAAIA,OAAJ,CAAY9f,GAAZ,EAAgB;AACf,QAAI,KAAK0/B,OAAT,EACC,KAAKA,OAAL,CAAa5f,OAAb,GAAuB9f,GAAvB;AACD;;AAED,MAAI2/B,SAAJ,GAAe;AACd,WAAO,KAAKD,OAAL,IAAc,KAAKA,OAAL,CAAaC,SAAlC;AACA;;AAED,MAAI/9B,KAAJ,GAAW;AAAE,WAAO,KAAKu8B,CAAL,CAAO,QAAP,EAAiBj0B,SAAxB;AAAmC;;AAChD,MAAItI,KAAJ,CAAU+K,GAAV,EAAc;AACb,SAAKwxB,CAAL,CAAO,QAAP,EAAiB7gC,SAAjB,GAA6BqP,GAA7B;;AACA,QAAIA,GAAJ,EAAS;AACR,WAAKjO,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AACA,KAFD,MAEK;AACJ,WAAKgB,eAAL,CAAqB,SAArB;AACA;AACD;;AAEDowC,EAAAA,cAAc,GAAE;AAEf,QAAIE,UAAU,GAAG,KAAK7R,CAAL,CAAO,QAAP,EAAiB2N,UAAlC;AAEA,QAAIkE,UAAU,CAAC5qC,MAAX,IAAqB,CAArB,IAA2B4qC,UAAU,CAAC,CAAD,CAAV,CAAcpS,OAAd,IAAyB,MAAzB,IAAmCoS,UAAU,CAAC,CAAD,CAAV,CAAc1K,aAAd,GAA8BlgC,MAA9B,IAAwC,CAA1G,EACC,KAAK1G,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AACD;;AAEDqmC,EAAAA,QAAQ,CAACzhC,CAAD,EAAG;AACV;AACA,QAAIA,CAAC,CAACwD,MAAF,IAAY,IAAhB,EACC,KAAKg5B,KAAL,GAHS,CAIV;AACA;AACA;;AAEDA,EAAAA,KAAK,GAAE;AACN,SAAKJ,OAAL,IAAgB,KAAKA,OAAL,CAAaI,KAAb,EAAhB;AACA;;AAnM2C;;AAuM7Cz/B,cAAc,CAACC,MAAf,CAAsB,cAAtB,EAAsCovC,kBAAtC;;eAEervC,cAAc,CAAClC,GAAf,CAAmB,cAAnB;;;;;;;;;;;AChNf;;AACA;;;;AAEA,MAAMY,MAAM,GAAG,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAnB;;AAoLA,MAAMkxC,WAAW,GAAG,UAASvyC,EAAT,EAAawyC,OAAO,GAAC,EAArB,EAAwB;AACxC,MAAI5uB,KAAK,GAAG,IAAIla,WAAJ,CAAgB,QAAhB,EAA0B;AAClCC,IAAAA,OAAO,EAAE,IADyB;AAElCC,IAAAA,QAAQ,EAAE,IAFwB;AAGlCC,IAAAA,MAAM,EAAEvD,MAAM,CAACwqB,MAAP,CAAc,EAAd,EAAkB0hB,OAAlB,EAA2B;AAC/BvxC,MAAAA,KAAK,EAAEjB,EAAE,CAACiB;AADqB,KAA3B;AAH0B,GAA1B,CAAZ;AAQAjB,EAAAA,EAAE,CAACyJ,aAAH,CAAiBma,KAAjB;AACH,CAVD;;AAYA,MAAM6uB,iBAAN,SAAgCrxC,WAAhC,CAA4C;AAE3CE,EAAAA,WAAW,GAAE;AACZ;;AAEA,QAAIoxC,cAAc,GAAG/kC,gBAAOglC,WAAP,GAAqBtyC,GAArB,CAAyB4O,GAAG,IAAG,QAAOA,GAAI,QAA1C,EAAmDC,IAAnD,CAAwD,IAAxD,CAArB;;AAEA,QAAI0jC,SAAS,GAAGnoC,QAAQ,CAAC,KAAKpI,YAAL,CAAkB,YAAlB,KAAmC,MAApC,CAAxB;AACA,QAAIwwC,OAAO,GAAGpoC,QAAQ,CAAC,KAAKpI,YAAL,CAAkB,UAAlB,KAAiC,MAAlC,CAAtB;AACA,QAAIywC,KAAK,GAAG,EAAZ;;AACA,WAAMF,SAAS,IAAIC,OAAnB,EAA2B;AAC1BC,MAAAA,KAAK,IAAK,gBAAeF,SAAU,KAAIA,SAAS,EAAG,SAAnD;AACM;;AAED,QAAIG,MAAM,GAAGplC,gBAAOqlC,WAAP,GAAqB3yC,GAArB,CAAyB,CAACkyB,CAAD,EAAGloB,CAAH,KAAQ,iBAAgBA,CAAE,KAAIkoB,CAAE,UAAzD,EAAoErjB,IAApE,CAAyE,IAAzE,CAAb;;AAEN,SAAK3N,YAAL,CAAkB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAlB;AACM,QAAIC,IAAI,GAAG/B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AACA8B,IAAAA,IAAI,CAAC7B,SAAL,GAAkB;YACdyB,MAAM,CAAC4lC,OAAQ;;;;;;;;;;;;;;;;;;;eAmBZyL,cAAe;;6BAEDI,KAAM;8BACLC,MAAO;;WAvB7B;AA2BN,SAAKrxC,UAAL,CAAgBC,WAAhB,CAA4BF,IAAI,CAACG,OAAL,CAAaC,SAAb,CAAuB,IAAvB,CAA5B;AAEA,SAAKoxC,OAAL,GAAe,KAAKxS,CAAL,CAAO,gBAAP,CAAf;AACA,SAAKyS,OAAL,GAAe,KAAKzS,CAAL,CAAO,gBAAP,CAAf;AACA,SAAK0S,QAAL,GAAgB,KAAK1S,CAAL,CAAO,gBAAP,CAAhB;AACA,SAAK2S,UAAL,GAAkB,KAAK3S,CAAL,CAAO,YAAP,CAAlB;AAEA,SAAK/+B,UAAL,CAAgBd,aAAhB,CAA8B,MAA9B,EAAsCiD,gBAAtC,CAAuD,OAAvD,EAAgE,KAAKwjC,QAAL,CAAcjiC,IAAd,CAAmB,IAAnB,CAAhE;AACA;;AAEDjB,EAAAA,iBAAiB,GAAE;AAClB,SAAKkvC,QAAL,CAAc,KAAKpyC,KAAnB;AACG;;AAED,MAAIA,KAAJ,GAAW;AAAE,WAAO,KAAKoB,YAAL,CAAkB,OAAlB,CAAP;AAAmC;;AACnD,MAAIpB,KAAJ,CAAUqB,GAAV,EAAc;AAAE,SAAK+wC,QAAL,CAAc/wC,GAAd;AAAoB;;AAEpC,MAAI0M,MAAJ,GAAY;AAAE,WAAO,KAAK3M,YAAL,CAAkB,QAAlB,KAA+B,YAAtC;AAAmD;;AACjE,MAAI2M,MAAJ,CAAW1M,GAAX,EAAe;AAAE,SAAKtB,YAAL,CAAkB,QAAlB,EAA4BsB,GAA5B;AAAkC;;AAEnD,MAAIiN,IAAJ,GAAU;AAAE,WAAO,KAAK+jC,aAAL,CAAmBC,KAAnB,EAAP;AAAmC;;AAC/C,MAAIC,OAAJ,GAAa;AAAE,WAAO,KAAKF,aAAL,CAAmBE,OAAnB,EAAP;AAAqC;;AAEpDxC,EAAAA,SAAS,CAAChiC,MAAD,EAAQ;AAChB,QAAIA,MAAM,KAAKoF,SAAf,EACCpF,MAAM,GAAG,KAAKA,MAAd;AAED,WAAO,KAAKskC,aAAL,CAAmBtkC,MAAnB,CAA0BA,MAA1B,CAAP;AACA;;AAEDykC,EAAAA,YAAY,GAAE;AAEb,QAAI9kC,KAAK,GAAG,KAAK+kC,KAAL,CAAWC,OAAX,EAAZ;;AACA,QAAIC,OAAO,GAAG,KAAKF,KAAL,CAAWG,WAAX,EAAd;;AACA,QAAIC,IAAI,GAAG,IAAI3zC,KAAJ,CAAU,IAAE,CAAZ,EAAeksB,IAAf,CAAoB,EAApB,CAAX;AACA,QAAIhiB,CAAC,GAAG,CAAR;;AAEA,WAAMA,CAAC,GAACupC,OAAR,EAAgB;AAAEE,MAAAA,IAAI,CAACzpC,CAAC,GAACsE,KAAH,CAAJ,GAAgB,EAAEtE,CAAlB;AAAqB;;AAEvC,SAAK+oC,UAAL,CAAgBxzC,SAAhB,GAA4Bk0C,IAAI,CAACzzC,GAAL,CAAS0zC,GAAG,IAAG,eAAcA,GAAI,KAAIA,GAAI,QAAzC,EAAkD7kC,IAAlD,CAAuD,IAAvD,CAA5B;AACM,SAAKikC,QAAL,CAAcvzC,SAAd,GAA0B,KAAK8zC,KAAL,CAAW1kC,MAAX,CAAkB,WAAlB,CAA1B;;AAEA,QAAI,KAAKglC,uBAAT,EAAkC;AAE9B,UAAIC,UAAU,GAAG,KAAKxT,CAAL,CAAQ,cAAa,KAAK6S,aAAL,CAAmB/jC,IAAnB,EAA0B,IAA/C,CAAjB;AACT,UAAI0kC,UAAJ,EACCA,UAAU,CAACjzC,YAAX,CAAwB,QAAxB,EAAkC,EAAlC;AACK;;AAED,QAAI,KAAKkzC,eAAT,EAA0B;AACtB,UAAIl0C,EAAE,GAAG,KAAKygC,CAAL,CAAQ,cAAa,KAAK0T,MAAL,CAAY5kC,IAAZ,EAAmB,IAAxC,CAAT;AACT,UAAIvP,EAAJ,EACCA,EAAE,CAACgB,YAAH,CAAgB,OAAhB,EAAyB,EAAzB;AACK;AACP;;AAEDozC,EAAAA,SAAS,GAAE;AACV,SAAKV,KAAL,CAAW5lC,GAAX,CAAe,OAAf,EAAwB,CAAxB;;AACA,SAAK2lC,YAAL;AACA;;AAEDY,EAAAA,SAAS,GAAE;AACV,SAAKX,KAAL,CAAW5lC,GAAX,CAAe,OAAf,EAAwB,CAAC,CAAzB;;AACA,SAAK2lC,YAAL;AACA;;AAEDa,EAAAA,QAAQ,CAACrwC,IAAI,GAAC,IAAN,EAAW;AAEZ,SAAKswC,SAAL,CAAe,KAAf;;AAEN,QAAItwC,IAAJ,EAAU;AACT,WAAKw8B,CAAL,CAAO,MAAP,EAAerwB,SAAf,CAAyBtC,GAAzB,CAA6B,WAA7B;AAEA,UAAI0mC,UAAU,GAAG,KAAK/T,CAAL,CAAO,cAAP,CAAjB;AACA,UAAI+T,UAAJ,EACCA,UAAU,CAACC,cAAX;AAED,KAPD,MAQC,KAAKhU,CAAL,CAAO,MAAP,EAAerwB,SAAf,CAAyBnQ,MAAzB,CAAgC,WAAhC;AACE;;AAEDs0C,EAAAA,SAAS,CAACtwC,IAAI,GAAC,IAAN,EAAW;AACtB,QAAIA,IAAJ,EAAU;AACT,WAAKw8B,CAAL,CAAO,MAAP,EAAerwB,SAAf,CAAyBtC,GAAzB,CAA6B,YAA7B;AACA,KAFD,MAGC,KAAK2yB,CAAL,CAAO,MAAP,EAAerwB,SAAf,CAAyBnQ,MAAzB,CAAgC,YAAhC;AACD;;AAEDwgC,EAAAA,CAAC,CAACxxB,GAAD,EAAK;AAAE,WAAO,KAAKvN,UAAL,CAAgBd,aAAhB,CAA8BqO,GAA9B,CAAP;AAA0C;;AAClDyxB,EAAAA,EAAE,CAACzxB,GAAD,EAAK;AAAE,WAAO,KAAKvN,UAAL,CAAgB5B,gBAAhB,CAAiCmP,GAAjC,CAAP;AAA6C;;AAEtDo4B,EAAAA,QAAQ,CAACzhC,CAAD,EAAG;AAEV,QAAIA,CAAC,CAACwD,MAAF,CAAS82B,OAAT,IAAoB,KAAxB,EAA+B;AAC9B,UAAI59B,GAAG,GAAGsD,CAAC,CAACwD,MAAF,CAAS/G,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK+wC,QAAL,CAAc;AACbqB,UAAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWgB,IAAX,EADO;AAEbC,UAAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWiB,KAAX,EAFM;AAGbplC,UAAAA,IAAI,EAAEjN;AAHO,SAAd;AAKA;;AACD;AACA;;AAED,QAAIsD,CAAC,CAACwD,MAAF,CAAS82B,OAAT,IAAoB,MAAxB,EAAgC;AAC/B,UAAI59B,GAAG,GAAGsD,CAAC,CAACwD,MAAF,CAAS/G,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK+wC,QAAL,CAAc;AACbqB,UAAAA,IAAI,EAAEpyC;AADO,SAAd;;AAGY,aAAKgyC,QAAL,CAAc,KAAd;AACZ;;AACD;AACM;;AAED,QAAI1uC,CAAC,CAACwD,MAAF,CAAS82B,OAAT,IAAoB,OAAxB,EAAiC;AACtC,UAAI59B,GAAG,GAAGsD,CAAC,CAACwD,MAAF,CAAS/G,YAAT,CAAsB,OAAtB,CAAV;;AACA,UAAIC,GAAJ,EAAS;AACR,aAAK+wC,QAAL,CAAc;AACE9jC,UAAAA,IAAI,EAAE,CADR;AAEbolC,UAAAA,KAAK,EAAEryC;AAFM,SAAd;;AAIY,aAAKiyC,SAAL,CAAe,KAAf;AACZ;;AACD;AACA;;AAED,QAAI3uC,CAAC,CAACwD,MAAF,CAASgH,SAAT,CAAmBuL,QAAnB,CAA4B,eAA5B,CAAJ,EACC,OAAO,KAAK24B,QAAL,EAAP;AAED,QAAI1uC,CAAC,CAACwD,MAAF,CAASgH,SAAT,CAAmBuL,QAAnB,CAA4B,eAA5B,CAAJ,EACC,OAAO,KAAK24B,QAAL,CAAc,KAAd,CAAP;;AAED,QAAI1uC,CAAC,CAACwD,MAAF,CAASgH,SAAT,CAAmBuL,QAAnB,CAA4B,OAA5B,CAAJ,EAA0C;AAChC,WAAK44B,SAAL,CAAe,KAAf;AACA,WAAKD,QAAL,CAAc,KAAd;AACA,aAAO,KAAKjB,QAAL,EAAP;AACH;;AAED,QAAIztC,CAAC,CAACwD,MAAF,CAASgH,SAAT,CAAmBuL,QAAnB,CAA4B,eAA5B,CAAJ,EACI,OAAO,KAAK44B,SAAL,EAAP;;AAEV,QAAI3uC,CAAC,CAACwD,MAAF,CAAS82B,OAAT,IAAoB,KAAxB,EAA+B;AAC9Bt6B,MAAAA,CAAC,CAACwD,MAAF,CAASgH,SAAT,CAAmBuL,QAAnB,CAA4B,MAA5B,IAAsC,KAAK04B,SAAL,EAAtC,GAAyD,KAAKD,SAAL,EAAzD;AACA;AACA;AACE;;AAED,MAAIF,eAAJ,GAAqB;AACjB,SAAKC,MAAL,GAAc,KAAKA,MAAL,IAAe,sBAA7B;AACA,WAAO,KAAKT,KAAL,CAAWgB,IAAX,MAAqB,KAAKP,MAAL,CAAYO,IAAZ,EAArB,IAA2C,KAAKhB,KAAL,CAAWiB,KAAX,MAAsB,KAAKR,MAAL,CAAYQ,KAAZ,EAAxE;AACH;;AAED,MAAIX,uBAAJ,GAA6B;AACzB,SAAKG,MAAL,GAAc,KAAKA,MAAL,IAAe,sBAA7B;AACA,WAAO,KAAKT,KAAL,CAAWgB,IAAX,MAAqB,KAAKpB,aAAL,CAAmBoB,IAAnB,EAArB,IAAkD,KAAKhB,KAAL,CAAWiB,KAAX,MAAsB,KAAKrB,aAAL,CAAmBqB,KAAnB,EAA/E;AACH;;AAEJtB,EAAAA,QAAQ,CAAC/wC,GAAD,EAAK;AAEZ,QAAIA,GAAG,IAAI,OAAOA,GAAP,IAAc,QAAzB,EAAmC;AAClC,WAAKgxC,aAAL,CAAmB5kB,GAAnB,CAAuBpsB,GAAvB;;AACA,WAAKoxC,KAAL,CAAWhlB,GAAX,CAAepsB,GAAf;;AAEAiwC,MAAAA,WAAW,CAAC,IAAD,EAAOjwC,GAAP,CAAX;AACA,KALD,MAKK;AACJ,WAAKoxC,KAAL,GAAapxC,GAAG,GAAG,qBAAOA,GAAP,EAAY,KAAK0M,MAAjB,CAAH,GAA8B,sBAA9C;AACA,WAAKskC,aAAL,GAAqB,KAAKI,KAAL,CAAWH,KAAX,EAArB;AACA;;AAED,SAAKG,KAAL,CAAWhlB,GAAX,CAAe;AAACnf,MAAAA,IAAI,EAAE;AAAP,KAAf;;AAEA,SAAKkkC,YAAL;;AACA,SAAKmB,QAAL;AACA;;AAEDA,EAAAA,QAAQ,GAAE;AAET,QAAI,KAAKtB,aAAL,CAAmBE,OAAnB,EAAJ,EACC,KAAKxxC,eAAL,CAAqB,SAArB,EADD,KAGC,KAAKhB,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AAED,SAAKA,YAAL,CAAkB,OAAlB,EAA2B,KAAKgwC,SAAL,EAA3B;AAEM,SAAKtQ,EAAL,CAAQ,UAAR,EAAoB3gC,OAApB,CAA4BC,EAAE,IAAEA,EAAE,CAACgC,eAAH,CAAmB,QAAnB,CAAhC;;AAEN,QAAI,CAAC,KAAKsxC,aAAL,CAAmBE,OAAnB,EAAL,EAAmC;AAClC,WAAKP,OAAL,CAAarzC,SAAb,GAAyB,GAAzB;AACA,WAAKszC,OAAL,CAAatzC,SAAb,GAAyB,SAAzB;AACA;AACA;;AAED,QAAI,KAAKo0C,uBAAT,EAAkC;AACjC,UAAIh0C,EAAE,GAAG,KAAKygC,CAAL,CAAQ,cAAa,KAAK6S,aAAL,CAAmB/jC,IAAnB,EAA0B,IAA/C,CAAT;AACA,UAAIvP,EAAJ,EACCA,EAAE,CAACgB,YAAH,CAAgB,QAAhB,EAA0B,EAA1B;AACD;;AAED,QAAI6zC,MAAM,GAAG,KAAKpU,CAAL,CAAQ,eAAc,KAAK6S,aAAL,CAAmBoB,IAAnB,EAA0B,IAAhD,CAAb;;AACA,QAAIG,MAAJ,EAAY;AACXA,MAAAA,MAAM,CAAC7zC,YAAP,CAAoB,QAApB,EAA8B,EAA9B;AACM;;AAED,QAAI8zC,OAAO,GAAG,KAAKrU,CAAL,CAAQ,gBAAe,KAAK6S,aAAL,CAAmBqB,KAAnB,EAA2B,IAAlD,CAAd;;AACN,QAAIG,OAAJ,EAAa;AACZA,MAAAA,OAAO,CAAC9zC,YAAR,CAAqB,QAArB,EAA+B,EAA/B;AACA;;AAED,SAAKiyC,OAAL,CAAarzC,SAAb,GAAyB,KAAK0zC,aAAL,CAAmBoB,IAAnB,EAAzB;AACA,SAAKxB,OAAL,CAAatzC,SAAb,GAAyB,KAAKoxC,SAAL,CAAe,YAAf,CAAzB;AACG;;AAjQuC;;AAqQ5CruC,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC6vC,iBAArC;;eAEe9vC,cAAc,CAAClC,GAAf,CAAmB,aAAnB;;;;AC1cf;;;;;;;;;;;;;;;;;;;AAoBA,SAASg0B,MAAT,CAAgBxlB,GAAhB,EAAoB;AAChB,MAAI,OAAO8lC,SAAP,KAAqB,WAAzB,EACI,MAAM9uC,KAAK,CAAC,0BAAD,CAAX;AAEJ,MAAI+uC,GAAG,GAAG,IAAID,SAAJ,GAAgBE,eAAhB,CAAgChmC,GAAhC,EAAqC,WAArC,CAAV;AACA,SAAO,CAAC,OAAOvP,QAAP,KAAoB,WAApB,GAAkCA,QAAlC,GAA6Cs1C,GAA9C,EAAmDA,GAAG,CAACn7B,IAAJ,IAAUm7B,GAA7D,CAAP;AACH;;AAED,SAASE,SAAT,CAAmBjmC,GAAnB,EAAuB;AACnB,MAAI,CAACvP,QAAD,EAAWma,IAAX,IAAmB,KAAK4a,MAAL,CAAYxlB,GAAZ,CAAvB;AACA,MAAIm/B,UAAU,GAAGjuC,KAAK,CAACC,IAAN,CAAWyZ,IAAI,CAACu0B,UAAhB,CAAjB;AACA,SAAOA,UAAU,CAAC/tC,GAAX,CAAeya,IAAI,IAAEA,IAAI,CAACuzB,WAA1B,EAAuCn/B,IAAvC,CAA4C,GAA5C,CAAP;AACH;;AAED,SAASimC,KAAT,CAAelmC,GAAf,EAAmB;AAEf,MAAI,CAACvP,QAAD,EAAWma,IAAX,IAAmB,KAAK4a,MAAL,CAAYxlB,GAAZ,CAAvB;AACA,MAAIjP,EAAE,GAAGN,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAT;AACA,MAAIo8B,CAAC,GAAG,IAAR;AAEA,MAAIqS,UAAU,GAAGjuC,KAAK,CAACC,IAAN,CAAWyZ,IAAI,CAACu0B,UAAhB,CAAjB,CANe,CAQf;AACA;AACA;AACA;;AACA,MAAIA,UAAU,CAAC1mC,MAAX,IAAqB,CAArB,IAA0B0mC,UAAU,CAAC,CAAD,CAAV,CAAclO,OAAd,IAAyB,GAAvD,EACIkO,UAAU,GAAGjuC,KAAK,CAACC,IAAN,CAAWguC,UAAU,CAAC,CAAD,CAAV,CAAcA,UAAzB,CAAb;AAEJA,EAAAA,UAAU,CAACruC,OAAX,CAAmB+a,IAAI,IAAE;AAErB;AACA,QAAIA,IAAI,CAACnB,QAAL,IAAiB,IAArB,EACI,OAAOoiB,CAAC,GAAG,IAAX,CAJiB,CAMrB;;AACA,QAAIjhB,IAAI,CAACnB,QAAL,IAAiB,GAArB,EAA0B;AACtBoiB,MAAAA,CAAC,GAAGjhB,IAAJ,CADsB,CAGtB;;AACAs6B,MAAAA,SAAS,CAAC,IAAD,EAAOrZ,CAAP,CAAT,CAJsB,CAMtB;;AACA,UAAIA,CAAC,CAACvvB,SAAF,KAAgB,EAApB,EACIxM,EAAE,CAAC2B,WAAH,CAAeo6B,CAAf;AAEJ,aAVsB,CAY1B;AACC,KAbD,MAaK;AAED;AACA,UAAI,CAACA,CAAL,EAAQ;AACJA,QAAAA,CAAC,GAAGr8B,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAJ;AACAK,QAAAA,EAAE,CAAC2B,WAAH,CAAeo6B,CAAf;AACH,OANA,CAQD;;;AACAqZ,MAAAA,SAAS,CAACrZ,CAAD,EAAIjhB,IAAJ,CAAT;AACH;AACJ,GA/BD;AAiCA,MAAIkB,IAAI,GAAGhc,EAAE,CAACJ,SAAH,GAAeI,EAAE,CAACJ,SAAlB,GAA8BO,KAAK,CAACC,IAAN,CAAWJ,EAAE,CAACouC,UAAd,EAA0B/tC,GAA1B,CAA8Bya,IAAI,IAAEA,IAAI,CAAC7B,QAAL,EAApC,EAAqD/J,IAArD,CAA0D,EAA1D,CAAzC,CAhDe,CAkDf;;AACA8M,EAAAA,IAAI,GAAGA,IAAI,CAACzb,OAAL,CAAa,SAAb,EAAwB,GAAxB,CAAP;AAEA,SAAOyb,IAAP;AACH;;AAED,SAASo5B,SAAT,CAAmBttC,MAAnB,EAA2BgT,IAA3B,EAAgC;AAE5B;AACA,MAAIA,IAAI,CAAC9Y,eAAT,EAA0B;AAEtB,QAAIqzC,QAAQ,GAAGv6B,IAAI,CAAC5K,KAAL,IAAc4K,IAAI,CAAC5K,KAAL,CAAWolC,SAAX,IAAwB,QAArD;AACA,QAAIC,MAAM,GAAGz6B,IAAI,CAAC5K,KAAL,IAAc4K,IAAI,CAAC5K,KAAL,CAAWslC,UAAX,IAAyB,MAApD;AAEA16B,IAAAA,IAAI,CAAC9Y,eAAL,CAAqB,IAArB;AACA8Y,IAAAA,IAAI,CAAC9Y,eAAL,CAAqB,OAArB;AACA8Y,IAAAA,IAAI,CAAC9Y,eAAL,CAAqB,OAArB,EAPsB,CAStB;;AACA,QAAIqzC,QAAQ,IAAI,CAAC,CAAC,GAAD,EAAM,IAAN,EAAYprC,QAAZ,CAAqB6Q,IAAI,CAACnB,QAA1B,CAAjB,EACImB,IAAI,CAAC5K,KAAL,CAAWolC,SAAX,GAAuB,QAAvB;AACJ,QAAIC,MAAM,IAAK,CAAC,CAAC,GAAD,EAAM,QAAN,EAAgBtrC,QAAhB,CAAyB6Q,IAAI,CAACnB,QAA9B,CAAhB,EACImB,IAAI,CAAC5K,KAAL,CAAWslC,UAAX,GAAwB,MAAxB;AACP,GAjB2B,CAmB5B;;;AACA,MAAI16B,IAAI,CAACnB,QAAL,IAAiB,UAAjB,IAA+BmB,IAAI,CAACnB,QAAL,CAAcpI,KAAd,CAAoB,GAApB,CAAnC,EACI,OAAOuJ,IAAI,CAAC7a,MAAL,EAAP,CADJ,CAGA;AAHA,OAIK,IAAI6a,IAAI,CAACnB,QAAL,IAAiB,OAArB,EAA8B;AAE/B;AACA;AAEA;AACAmB,MAAAA,IAAI,CAACuzB,WAAL,GAAmBvzB,IAAI,CAACuzB,WAAL,CAAiB9tC,OAAjB,CAAyB,SAAzB,EAAoC,GAApC,CAAnB,CAN+B,CAQ/B;AACA;AACA;AACH,KAnC2B,CAqC5B;;AACA,MAAI6tC,UAAU,GAAGtzB,IAAI,CAACszB,UAAL,GAAkBjuC,KAAK,CAACC,IAAN,CAAW0a,IAAI,CAACszB,UAAhB,CAAlB,GAAgD,EAAjE;AACAA,EAAAA,UAAU,CAACruC,OAAX,CAAmB0kB,CAAC,IAAE2wB,SAAS,CAACt6B,IAAD,EAAO2J,CAAP,CAA/B,EAvC4B,CAyC5B;;AACA,MAAI3J,IAAI,CAACnB,QAAL,IAAiB,IAAjB,IAAyBmB,IAAI,CAACtO,SAAL,IAAkB,EAA/C,EACI,OAAOsO,IAAI,CAAC7a,MAAL,EAAP,CA3CwB,CA6C5B;;AACA,MAAI6H,MAAJ,EAAY;AAER;AACA,QAAIgT,IAAI,CAACnB,QAAL,IAAiB,MAAjB,IAA2BmB,IAAI,CAACpY,YAAL,CAAkB,OAAlB,CAA/B,EAA2D;AACvDoF,MAAAA,MAAM,CAACnG,WAAP,CAAmBmZ,IAAnB,EADuD,CAG3D;AACA;AACC,KALD,MAKM,IAAI,CAAC,OAAD,EAAU,GAAV,EAAe,IAAf,EAAqB,GAArB,EAA0B,QAA1B,EAAoC,IAApC,EAA0C,GAA1C,EAA+C,IAA/C,EAAqD,IAArD,EAA2D,IAA3D,EAAiE7Q,QAAjE,CAA0E6Q,IAAI,CAACnB,QAAL,CAAcjJ,WAAd,EAA1E,CAAJ,EAA4G;AAC9G;AACA,UAAI,CAAC,GAAD,EAAM,GAAN,EAAW,QAAX,EAAqB,IAArB,EAA2BzG,QAA3B,CAAoC6Q,IAAI,CAACnB,QAAL,CAAcjJ,WAAd,EAApC,CAAJ,EAAsE;AAClE,YAAIoK,IAAI,CAACszB,UAAL,CAAgB,CAAhB,KAAsBtzB,IAAI,CAACszB,UAAL,CAAgB,CAAhB,EAAmBz0B,QAAnB,IAA+B,IAAzD,EACImB,IAAI,CAACszB,UAAL,CAAgB,CAAhB,EAAmBnuC,MAAnB;AACP,OAL6G,CAM9G;;;AACA6H,MAAAA,MAAM,CAACnG,WAAP,CAAmBmZ,IAAnB,EAP8G,CASlH;AACA;AACC,KAXK,MAWD;AAED,UAAIA,IAAI,CAAC7a,MAAT,EACI6a,IAAI,CAAC7a,MAAL,GADJ,KAGI6a,IAAI,CAAC1W,UAAL,CAAgBqf,WAAhB,CAA4B3I,IAA5B,EALH,CAKqC;;AAEtCszB,MAAAA,UAAU,GAAGjuC,KAAK,CAACC,IAAN,CAAW0a,IAAI,CAACszB,UAAhB,CAAb;AACAA,MAAAA,UAAU,CAACruC,OAAX,CAAmB01C,KAAK,IAAE;AACtB3tC,QAAAA,MAAM,CAACnG,WAAP,CAAmB8zC,KAAnB;AACH,OAFD;AAGH;AACJ;;AAED,SAAO36B,IAAP;AACH;;AAGD,SAAS46B,gBAAT,CAA0B56B,IAA1B,EAA+B;AAC3B;AACAA,EAAAA,IAAI,CAACuzB,WAAL,GAAmBvzB,IAAI,CAACuzB,WAAL,CAAiB9tC,OAAjB,CAAyB,OAAzB,EAAkC,GAAlC,CAAnB;AACAua,EAAAA,IAAI,CAACuzB,WAAL,GAAmBvzB,IAAI,CAACuzB,WAAL,CAAiB9tC,OAAjB,CAAyB,OAAzB,EAAkC,GAAlC,CAAnB,CAH2B,CAK3B;;AACAua,EAAAA,IAAI,CAACuzB,WAAL,GAAmBvzB,IAAI,CAACuzB,WAAL,CAAiB9tC,OAAjB,CAAyB,OAAzB,EAAkC,GAAlC,CAAnB,CAN2B,CAQ3B;;AACAua,EAAAA,IAAI,CAACuzB,WAAL,GAAmBvzB,IAAI,CAACuzB,WAAL,CAAiB9tC,OAAjB,CAAyB,IAAzB,EAA+B,KAA/B,CAAnB;AACH;;AAGDuyB,MAAM,CAACD,OAAP,GAAiB;AACbsiB,EAAAA,KAAK,EAAEA,KADM;AAEbD,EAAAA,SAAS,EAAEA,SAFE;AAGbzgB,EAAAA,MAAM,EAAEA;AAHK,CAAjB;;;;;;;;;eCzLe,CAACxlB,GAAG,GAAC,EAAL,KAAY;AACvB,SAAOA,GAAG,CAAC1O,OAAJ,CAAY,QAAZ,EAAsB,QAAtB,EAAqD;AAArD,GACEA,OADF,CACU,gBADV,EAC4B,QAD5B,EAC6C;AAD7C,GAEEA,OAFF,CAEU,4BAFV,EAEwC,UAFxC,EAEqD;AAFrD,GAGEA,OAHF,CAGU,gBAHV,EAG4B,QAH5B,EAG6C;AAH7C,GAIEA,OAJF,CAIU,4BAJV,EAIwC,UAJxC,EAIqD;AAJrD,GAKEA,OALF,CAKU,SALV,EAKsB,QALtB,EAK+C;AAL/C,GAMEA,OANF,CAMU,KANV,EAMkB,QANlB,CAAP,CADuB,CAO4B;AACtD;;;;ACTD;AACA;AACA;AACA;AACAuyB,MAAM,CAACD,OAAP,GAAiB,CAAC8iB,OAAD,EAAU;AAACC,EAAAA,YAAY,GAAC,GAAd;AAAmBC,EAAAA,SAAS,GAAC;AAA7B,IAAmC,EAA7C,KAAkD;AAE/D;AACA,MAAIC,UAAU,GAAG,IAAIntC,MAAJ,EAET;AACA,UAAQitC,YAAR,GAAuB,iBAAvB,GAEA;AACA,mCAHA,GAKA;AACA,WANA,GAMYA,YANZ,GAM2B,YATlB,EAWT,IAXS,CAAjB,CAH+D,CAiB/D;AACA;;AACA,MAAIG,OAAO,GAAG,CAAC,EAAD,CAAd,CAnB+D,CAqB/D;AACA;;AACA,MAAIC,UAAU,GAAG,IAAjB;AAEAL,EAAAA,OAAO,GAAGA,OAAO,CAACjtC,IAAR,EAAV,CAzB+D,CA2B/D;AACA;;AACA,SAAOstC,UAAU,GAAGF,UAAU,CAAC5hB,IAAX,CAAiByhB,OAAjB,CAApB,EAA+C;AAE3C;AACA,QAAIM,mBAAmB,GAAGD,UAAU,CAAE,CAAF,CAApC,CAH2C,CAK3C;AACA;AACA;AACA;;AACA,QACIC,mBAAmB,CAACvuC,MAApB,IACAuuC,mBAAmB,KAAKL,YAF5B,EAGC;AACG;AACA;AACAG,MAAAA,OAAO,CAACvsC,IAAR,CAAc,EAAd;AACH;;AAED,QAAI0sC,eAAJ,CAlB2C,CAoB3C;AACA;AACA;;AACA,QAAIF,UAAU,CAAE,CAAF,CAAd,EAAoB;AAEhB;AACA;AACAE,MAAAA,eAAe,GAAGF,UAAU,CAAE,CAAF,CAAV,CAAgBz1C,OAAhB,CAClB,IAAIoI,MAAJ,CAAY,MAAZ,EAAoB,GAApB,CADkB,EAEd,IAFc,CAAlB;AAKH,KATD,MASO;AAEH;AACAutC,MAAAA,eAAe,GAAGF,UAAU,CAAE,CAAF,CAA5B;AAEH,KArC0C,CAuC3C;AACA;;;AACAD,IAAAA,OAAO,CAAEA,OAAO,CAACruC,MAAR,GAAiB,CAAnB,CAAP,CAA8B8B,IAA9B,CAAoC0sC,eAApC;AACH;;AAED,MAAIL,SAAJ,EAAe;AACX,QAAIM,MAAM,GAAGJ,OAAO,CAACnvC,KAAR,EAAb;AAEAmvC,IAAAA,OAAO,GAAGA,OAAO,CAAC11C,GAAR,CAAY+1C,IAAI,IAAE;AACxB,UAAIx0B,GAAG,GAAG,EAAV;AACAu0B,MAAAA,MAAM,CAACp2C,OAAP,CAAe,CAAC2K,GAAD,EAAML,CAAN,KAAYuX,GAAG,CAAClX,GAAD,CAAH,GAAW0rC,IAAI,CAAC/rC,CAAD,CAA1C;AACA,aAAOuX,GAAP;AACH,KAJS,CAAV;AAKH,GAjF8D,CAmF/D;;;AACA,SAAQm0B,OAAR;AACH,CArFD;;ACJA;;;;;;;;;;;;;;;;;;;;AAqBAjjB,MAAM,CAACD,OAAP,GAAiB,UAASwjB,OAAT,EAAkB,GAAGx2B,IAArB,EAA0B;AAE1C,MAAI,OAAOw2B,OAAP,IAAkB,QAAtB,EACC,OAAOC,SAAS,CAACD,OAAD,EAAUx2B,IAAI,CAAC,CAAD,CAAd,CAAhB;AAED,MAAI5Q,GAAG,GAAG,EAAV;AACAonC,EAAAA,OAAO,CAACt2C,OAAR,CAAgB,CAACuS,CAAD,EAAGjI,CAAH,KAAO;AAEtB,QAAIksC,QAAQ,GAAG12B,IAAI,CAACxV,CAAD,CAAJ,IAAS,EAAxB;;AACA,QAAIksC,QAAQ,IAAI,OAAOA,QAAP,IAAmB,QAAnC,EAA6C;AAC5C,UAAIlkB,IAAI,GAAGkkB,QAAQ,IAAI,CAAZ,GAAgB,CAAhB,GAAoB,CAA/B;AACAjkC,MAAAA,CAAC,GAAGA,CAAC,CAAC/R,OAAF,CAAU,cAAV,EAA0B,UAASi2C,UAAT,EAAoBC,UAApB,EAA+B;AAC5D,YAAItiB,MAAM,GAAGsiB,UAAU,CAAC/vC,KAAX,CAAiB,GAAjB,CAAb;AACA,eAAOytB,MAAM,CAAC9B,IAAD,CAAN,IAAgB,EAAvB;AACA,OAHG,CAAJ;AAIA;;AAED,QAAIqkB,SAAS,GAAG72B,IAAI,CAACxV,CAAC,GAAC,CAAH,CAAJ,IAAW,EAA3B;;AAEA,QAAIqsC,SAAS,IAAI,OAAOA,SAAP,IAAoB,QAArC,EAA+C;AAC9C,UAAIrkB,IAAI,GAAGqkB,SAAS,IAAI,CAAb,GAAiB,CAAjB,GAAqB,CAAhC;AACApkC,MAAAA,CAAC,GAAGA,CAAC,CAAC/R,OAAF,CAAU,gBAAV,EAA4B,UAASi2C,UAAT,EAAoBC,UAApB,EAA+B;AAC9D,YAAItiB,MAAM,GAAGsiB,UAAU,CAAC/vC,KAAX,CAAiB,GAAjB,CAAb;AACA,eAAOytB,MAAM,CAAC9B,IAAD,CAAN,IAAgB,EAAvB;AACA,OAHG,CAAJ;AAKA;;AAEDpjB,IAAAA,GAAG,IAAIynC,SAAS,GAAGpkC,CAAnB;AACA,GAvBD;AAwBA,SAAOrD,GAAP;AACA,CA/BD,EAiCA;;;AACA,SAASqnC,SAAT,CAAmBrnC,GAAnB,EAAwB0B,GAAxB,EAA4B;AAE3B,MAAIA,GAAG,YAAYxQ,KAAnB,EACCwQ,GAAG,GAAGA,GAAG,CAACjJ,MAAV;AACD,MAAIiJ,GAAG,YAAYrK,MAAnB,EACCqK,GAAG,GAAGrK,MAAM,CAACuZ,IAAP,CAAYlP,GAAZ,EAAiBjJ,MAAvB;AAED,MAAI2qB,IAAI,GAAG1hB,GAAG,IAAI,CAAP,GAAW,CAAX,GAAe,CAA1B;;AAEA,MAAI,OAAOA,GAAP,IAAc,QAAlB,EAA4B;AAC3B,QAAIgmC,UAAU,CAAC5+B,CAAX,KAAiB3D,SAArB,EACC,OAAOlJ,OAAO,CAAC+W,IAAR,CAAa,0BAAb,CAAP;AAED,QAAI,CAAClK,CAAC,CAAC6+B,YAAP,EACC,OAAO1rC,OAAO,CAAC+W,IAAR,CAAa,iCAAb,CAAP;AAEDtR,IAAAA,GAAG,GAAGuB,UAAU,CAACvB,GAAD,CAAhB;AACAA,IAAAA,GAAG,GAAGoH,CAAC,CAAC6+B,YAAF,CAAe1kC,UAAU,CAACvB,GAAD,CAAzB,EAAkCA,GAAG,GAAG,CAAP,GAAU,CAAV,GAAY,CAAZ,GAAc,CAA/C,CAAN;AACA;;AAED1B,EAAAA,GAAG,GAAGA,GAAG,CAAC1O,OAAJ,CAAY,SAAZ,EAAuBoQ,GAAvB,CAAN;AAEA1B,EAAAA,GAAG,GAAGA,GAAG,CAAC1O,OAAJ,CAAY,aAAZ,EAA2B,UAASi2C,UAAT,EAAoBC,UAApB,EAA+B;AAE/D,QAAItiB,MAAM,GAAGsiB,UAAU,CAAC/vC,KAAX,CAAiB,GAAjB,CAAb;AAEA,WAAOytB,MAAM,CAAC9B,IAAD,CAAN,IAAgB,EAAvB;AACA,GALK,CAAN;AAOA,SAAOpjB,GAAP;AACA;;;;;;;;;eCpFe3G,IAAD,IAAQ;AAEnB,SAAO,IAAI7C,OAAJ,CAAYC,OAAO,IAAE;AAExB,QAAImxC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AAEAD,IAAAA,MAAM,CAACE,MAAP,GAAgBnxC,CAAC,IAAE;AACf,UAAIw2B,IAAI,GAAGya,MAAM,CAACv5B,MAAlB;AACA5X,MAAAA,OAAO,CAAC02B,IAAD,CAAP;AACH,KAHD;;AAKAya,IAAAA,MAAM,CAACG,UAAP,CAAkB1uC,IAAlB;AAEH,GAXM,CAAP;AAaH;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;;ACnJA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClQA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1CA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3JA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA,CAAC;AACD;;;;;;;;ACrEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;;ACvDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpCA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACrIA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChLA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACluBA;;AAEA,IAAIo5C,KAAK,GAAGvzC,MAAM,CAACG,SAAP,CAAiBwS,QAA7B;;AAEA6Z,MAAM,CAACD,OAAP,GAAiB,SAASinB,WAAT,CAAqB74C,KAArB,EAA4B;AAC5C,MAAIgO,GAAG,GAAG4qC,KAAK,CAAC9kC,IAAN,CAAW9T,KAAX,CAAV;AACA,MAAI84C,MAAM,GAAG9qC,GAAG,KAAK,oBAArB;;AACA,MAAI,CAAC8qC,MAAL,EAAa;AACZA,IAAAA,MAAM,GAAG9qC,GAAG,KAAK,gBAAR,IACRhO,KAAK,KAAK,IADF,IAER,OAAOA,KAAP,KAAiB,QAFT,IAGR,OAAOA,KAAK,CAACyG,MAAb,KAAwB,QAHhB,IAIRzG,KAAK,CAACyG,MAAN,IAAgB,CAJR,IAKRmyC,KAAK,CAAC9kC,IAAN,CAAW9T,KAAK,CAAC+4C,MAAjB,MAA6B,mBAL9B;AAMA;;AACD,SAAOD,MAAP;AACA,CAZD;;ACJA;;AAEA,IAAIE,QAAJ;;AACA,IAAI,CAAC3zC,MAAM,CAACuZ,IAAZ,EAAkB;AACjB;AACA,MAAIwwB,GAAG,GAAG/pC,MAAM,CAACG,SAAP,CAAiBu8B,cAA3B;AACA,MAAI6W,KAAK,GAAGvzC,MAAM,CAACG,SAAP,CAAiBwS,QAA7B;;AACA,MAAI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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrHA,IAAIE,KAAK,GAAG/kD,OAAO,CAAC,YAAD,CAAnB;;AACA,IAAIgl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pD,MAAM,CAACxD,QAAP,GAAkB,QAAlB;AACAwD,MAAM,CAACx7B,SAAP,GAAmB,WAAnB;AACAw7B,MAAM,CAAC7qB,OAAP,GAAiB,MAAjB;AACA6qB,MAAM,CAACG,QAAP,GAAkB,QAAlB,EAA8B;;eAGfH;;;ACnHf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7vDA,IAAIxX,KAAK,GAAI,YAAW;AACxB;;AAEA,WAASuY,WAAT,CAAqBlqC,GAArB,EAA0B3e,IAA1B,EAAgC;AAC9B,WAAOA,IAAI,IAAI,IAAR,IAAgB2e,GAAG,YAAY3e,IAAtC;AACD;;AAED,MAAI8oD,SAAJ;;AACA,MAAI;AACFA,IAAAA,SAAS,GAAGx9B,GAAZ;AACD,GAFD,CAEE,OAAMxW,CAAN,EAAS;AACT;AACA;AACAg0C,IAAAA,SAAS,GAAG,YAAW,CAAE,CAAzB;AACD;;AAED,MAAIC,SAAJ;;AACA,MAAI;AACFA,IAAAA,SAAS,GAAGpL,GAAZ;AACD,GAFD,CAEE,OAAM7oC,CAAN,EAAS;AACTi0C,IAAAA,SAAS,GAAG,YAAW,CAAE,CAAzB;AACD;;AAED,MAAIC,aAAJ;;AACA,MAAI;AACFA,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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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,QAAJ,GAAc;AAAE,WAAO,KAAKpE,YAAL,CAAkB,UAAlB,CAAP;AAAsC;;AACtD,MAAIoE,QAAJ,CAAaxE,GAAG,GAAC,IAAjB,EAAsB;AACrBA,IAAAA,GAAG,GAAG,KAAKtB,YAAL,CAAkB,UAAlB,EAA8B,EAA9B,CAAH,GAAuC,KAAKgB,eAAL,CAAqB,UAArB,CAA1C;AACA,SAAKglE,MAAL,CAAYjnE,OAAZ,CAAoBC,EAAE,IAAEA,EAAE,CAAC8G,QAAH,GAAYxE,GAApC;AACA;;AA9F0C;;AAkG5CK,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqCgkE,iBAArC;;eAEejkE,cAAc,CAAClC,GAAf,CAAmB,aAAnB;;;;;;AClGf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/KA;;;;AAEe,MAAMymE,UAAN,CAAiB;AAE5B5lE,EAAAA,WAAW,CAACkvB,IAAI,GAAC,EAAN,EAAS;AAChB,SAAKnd,KAAL;AAEA,SAAKmd,IAAL,GAAYlqB,MAAM,CAACwqB,MAAP,CAAc;AACtBq2C,MAAAA,OAAO,EAAE,EADa;AAEtBn8B,MAAAA,KAAK,EAAE,IAFe;AAGtBo8B,MAAAA,WAAW,EAAE;AAHS,KAAd,EAIT52C,IAJS,CAAZ;AAKH;;AAEDnd,EAAAA,KAAK,GAAE;AACH,SAAKg0D,YAAL,GAAoB,IAApB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,EAAhB,CAHG,CAGqB;;AACxB,SAAKC,aAAL,GAAqB,EAArB,CAJG,CAIqB;;AACxB,SAAKnzD,IAAL,GAAY,EAAZ,CALG,CAKqB;AAC3B;;AAED,MAAIozD,IAAJ,CAASA,IAAT,EAAc;AACV,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,MAAL,GAAcF,IAAd;AACH;;AACD,MAAIA,IAAJ,GAAU;AAAE,WAAO,KAAKE,MAAZ;AAAmB;;AAE/B,QAAMC,QAAN,GAAgB;AACZ,SAAKN,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,KAAKE,IAAL,CAAUI,MAAV,IAAoB,KAAKJ,IAAzC;AACA,SAAKD,aAAL,GAAqB,KAAKD,QAA1B;AACA,SAAKlzD,IAAL,GAAY,KAAKkzD,QAAjB;AAEA,UAAM,KAAKO,YAAL,EAAN;AACH;;AAED,MAAIX,OAAJ,GAAa;AAAE,WAAO,KAAK32C,IAAL,CAAU22C,OAAjB;AAA0B;;AAEzC,QAAMz/D,MAAN,GAAc;AAEV,QAAI,KAAKqgE,SAAT,EACI,MAAM,KAAKA,SAAX;AAEJ,WAAO,KAAK1zD,IAAL,CAAU3M,MAAjB;AACH;;AAEDomC,EAAAA,EAAE,CAACzjC,CAAD,EAAG;AAAE,WAAO,KAAKgK,IAAL,CAAUhK,CAAV,CAAP;AAAqB;;AAC5BujC,EAAAA,KAAK,CAACvjC,CAAD,EAAG;AAAE,WAAO,KAAKgK,IAAL,CAAU,CAAV,CAAP;AAAqB;;AAC/B05B,EAAAA,IAAI,GAAE;AAAE,WAAO,KAAK15B,IAAL,CAAU,KAAKA,IAAL,CAAU3M,MAAV,GAAiB,CAA3B,CAAP;AAAqC;;AAE7C3H,EAAAA,OAAO,CAACyH,EAAD,EAAI;AAAE,WAAO,KAAK6M,IAAL,CAAUtU,OAAV,CAAkByH,EAAlB,CAAP;AAA8B;;AAC3CnH,EAAAA,GAAG,CAACmH,EAAD,EAAI;AAAE,WAAO,KAAK6M,IAAL,CAAUhU,GAAV,CAAcmH,EAAd,CAAP;AAA0B;;AACnCwgE,EAAAA,OAAO,CAACxgE,EAAD,EAAI;AAAE,WAAO,KAAK6M,IAAL,CAAU2zD,OAAV,CAAkBxgE,EAAlB,CAAP;AAA8B;;AAC3C0Y,EAAAA,MAAM,CAAC1Y,EAAD,EAAI;AAAE,WAAO,KAAK6M,IAAL,CAAU6L,MAAV,CAAiB1Y,EAAjB,CAAP;AAA6B;;AACzC0iB,EAAAA,MAAM,CAAC1iB,EAAD,EAAKmH,KAAK,GAAC,CAAX,EAAa;AAAE,WAAO,KAAK0F,IAAL,CAAU6V,MAAV,CAAiB1iB,EAAjB,EAAqBmH,KAArB,CAAP;AAAoC;;AAEzD,QAAMs5D,gBAAN,CAAuBC,MAAvB,EAA8B;AAE1B;AACA,QAAI,KAAKT,IAAL,IAAa,KAAKA,IAAL,CAAUU,SAA3B,EAAsC;AAElC,UAAI9zD,IAAI,GAAG;AAACy2B,QAAAA,IAAI,EAAC,KAAKs9B,OAAL,CAAat9B,IAAb,IAAmB;AAAzB,OAAX;;AAEA,UAAI,KAAKta,IAAL,CAAUwa,KAAV,IAAmB,MAAvB,EAA+B;AAC3B32B,QAAAA,IAAI,CAAC6zD,MAAL,GAAcA,MAAd;AACA7zD,QAAAA,IAAI,CAAC8yD,OAAL,GAAe,KAAKA,OAApB;AACH;;AAED,UAAI,KAAKiB,OAAT,EACI/zD,IAAI,CAAC+zD,OAAL,GAAe,KAAKA,OAAL,CAAannE,KAAb,EAAf;AAEJ,UAAI,KAAKonE,KAAT,EACIh0D,IAAI,CAACg0D,KAAL,GAAa,KAAKA,KAAL,CAAWpnE,KAAxB;AAEJ,YAAM,KAAKwmE,IAAL,CAAUU,SAAV,CAAoB;AAAC9zD,QAAAA,IAAI,EAACA;AAAN,OAApB,CAAN;AACH;AACJ;;AAED22B,EAAAA,KAAK,CAACk9B,MAAD,EAAQ;AACT,WAAO,KAAKH,SAAL,GAAiB,IAAItiE,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAE/C,UAAKwiE,MAAM,IAAI,CAAV,IAAe,KAAKX,QAAL,CAAc7/D,MAAd,IAAwB,CAAxC,IACA,KAAK2/D,YAAL,IAAqBa,MAArB,IAA+B,KAAKX,QAAL,CAAc7/D,MAAd,IAAwBwgE,MAAvD,IAAiE,KAAK13C,IAAL,CAAUwa,KAAV,IAAmB,MADxF,EACkG;AAE9F,aAAKq8B,YAAL,GAAoBa,MAApB;AAEA,YAAI,KAAK13C,IAAL,CAAUwa,KAAd,EACI,MAAM,KAAKi9B,gBAAL,CAAsBC,MAAtB,CAAN;AAEJ,cAAM,KAAKN,QAAL,EAAN;AACH;;AAED,UAAI,KAAKL,QAAL,CAAc7/D,MAAd,GAAuBwgE,MAA3B,EACI,KAAKvT,IAAL,CAAU,cAAV,EAA0B,KAAK4S,QAAL,CAAc7/D,MAAxC;AAEJ,UAAI,KAAK4gE,UAAT,EACI,MAAM,KAAKA,UAAX;AAEJ,UAAI,KAAKC,QAAT,EACI,MAAM,KAAKA,QAAX;AAEJ,WAAKb,UAAL,GAAkB,IAAlB;AAEAhiE,MAAAA,OAAO,CAAC,KAAK2O,IAAL,CAAUhL,KAAV,CAAgB6+D,MAAhB,EAAwBA,MAAM,GAAC,KAAK13C,IAAL,CAAU22C,OAAzC,CAAD,CAAP;AACH,KAzBuB,EAyBrBqB,OAzBqB,CAyBbzwD,CAAC,IAAE,OAAO,KAAKgwD,SAzBF,CAAxB;AA0BH;;AAEDD,EAAAA,YAAY,GAAE;AACV,WAAO,KAAKQ,UAAL,GAAkB,IAAI7iE,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAEhD,UAAI,CAAC,KAAK0iE,OAAV,EAAoB,OAAO1iE,OAAO,CAAC,KAAK2O,IAAN,CAAd;;AAEpB,UAAI,KAAKizD,YAAL,GAAoB,KAAKc,OAAL,CAAaK,WAArC,EAAkD;AAC9C,aAAKp0D,IAAL,GAAY,MAAM,KAAK+zD,OAAL,CAAaloD,MAAb,CAAoB,KAAKqnD,QAAzB,CAAlB;AACA,cAAM,KAAK/mE,IAAL,EAAN;AACA,aAAKgnE,aAAL,GAAqB,KAAKnzD,IAA1B;AACH;;AAED,WAAKA,IAAL,GAAY,MAAM,KAAK+zD,OAAL,CAAaM,YAAb,CAA0B,KAAKlB,aAA/B,CAAlB;AAEA9hE,MAAAA,OAAO,CAAC,KAAK2O,IAAN,CAAP;AAEA,WAAKizD,YAAL,GAAoB,IAAI/4D,IAAJ,GAAWC,OAAX,EAApB;AAEH,KAhBwB,EAgBtBg6D,OAhBsB,CAgBdzwD,CAAC,IAAE,OAAO,KAAKuwD,UAhBD,CAAzB;AAiBH;;AAED9nE,EAAAA,IAAI,GAAE;AACF,WAAO,KAAK+nE,QAAL,GAAgB,IAAI9iE,OAAJ,CAAY,MAAMC,OAAN,IAAe;AAE9C,UAAI,CAAC,KAAK2iE,KAAV,EAAkB,OAAO3iE,OAAO,CAAC,KAAK2O,IAAN,CAAd;AAElB,WAAKA,IAAL,GAAY,MAAM,KAAKg0D,KAAL,CAAW7nE,IAAX,CAAgB,KAAK6T,IAArB,CAAlB;AAEA3O,MAAAA,OAAO,CAAC,KAAK2O,IAAN,CAAP;AAEH,KARsB,EAQpBm0D,OARoB,CAQZzwD,CAAC,IAAE,OAAO,KAAKwwD,QARH,CAAvB;AASH;;AAxI2B;;;AA2IhC,+BAAQrB,UAAU,CAACzgE,SAAnB;;;;;;;;;AC7IA;;AACA;;;;AAEA9D,cAAc,CAACC,MAAf,CAAsB,yBAAtB,EAAiD,cAAcE,sBAAd,CAAwB;AAErE,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA2DlB;;AAEFuC,EAAAA,YAAY,GAAE;AACV,SAAKisC,OAAL,GAAe,KAAKnuC,UAAL,CAAgB5B,gBAAhB,CAAiC,cAAjC,CAAf;AAEA,QAAImB,KAAK,GAAG,KAAKif,MAAL,CAAYjf,KAAxB;AAEA,QAAIA,KAAJ,EACI,KAAK4uC,OAAL,CAAa9vC,OAAb,CAAqB,CAACC,EAAD,EAAIqK,CAAJ,KAAQrK,EAAE,CAACiB,KAAH,GAASA,KAAK,CAACoJ,CAAD,CAA3C;AACP;;AAEDjH,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;gCAEO,KAAKulE,UAAW;;;;;2FAK2C,KAAKC,OAAQ;;;;;;2FAMb,KAAKA,OAAQ;;;;;;oCAMpE,KAAKC,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;oCACf,KAAKA,SAAU;;KAvBtC;AAyBP;;AAEF,MAAI5nE,KAAJ,GAAW;AACP,QAAIA,KAAK,GAAG,EAAZ,CADO,CAGP;;AACA,QAAI,CAAC,KAAK4uC,OAAV,EACI,OAAO,KAAK3vB,MAAL,CAAYjf,KAAnB;AAEJ,SAAK4uC,OAAL,CAAa9vC,OAAb,CAAqBC,EAAE,IAAE;AACrB,UAAI2M,CAAC,GAAG3M,EAAE,CAACqyC,OAAX;AACA,UAAI1lC,CAAJ,EACI1L,KAAK,CAACuI,IAAN,CAAWmD,CAAX;AACP,KAJD;AAMA,QAAI1L,KAAK,CAACyG,MAAN,IAAgB,CAApB,EACI,OAAO,IAAP;AAEJ,QAAIzG,KAAK,CAACyG,MAAN,IAAgB,CAApB,EACIzG,KAAK,GAAG,CAACA,KAAK,CAAC,CAAD,CAAN,EAAWA,KAAK,CAAC,CAAD,CAAhB,CAAR;AAEJA,IAAAA,KAAK,CAACT,IAAN;AAEA,WAAOS,KAAP;AACH;;AAED,MAAIA,KAAJ,CAAUqB,GAAV,EAAc;AAEV,QAAI,CAACA,GAAD,IAAQA,GAAG,CAACoF,MAAJ,IAAc,CAA1B,EACIpF,GAAG,GAAG,CAAC,IAAD,EAAO,IAAP,CAAN;AAEJ,QAAI,OAAOA,GAAP,IAAc,QAAlB,EACIA,GAAG,GAAG,CAACA,GAAD,EAAMA,GAAN,CAAN;AAEJ,QAAIA,GAAG,CAACoF,MAAJ,IAAc,CAAlB,EACIpF,GAAG,GAAG,CAACA,GAAG,CAAC,CAAD,CAAJ,EAASA,GAAG,CAAC,CAAD,CAAZ,CAAN;AAEJ,SAAKutC,OAAL,CAAa9vC,OAAb,CAAqB,CAACC,EAAD,EAAIqK,CAAJ,KAAQ;AACzBrK,MAAAA,EAAE,CAACiB,KAAH,GAAWqB,GAAG,CAAC+H,CAAD,CAAH,IAAQ,IAAnB;AACH,KAFD;AAGH;AAED;;;;;;AAIA,MAAInG,KAAJ,GAAW;AAEP,QAAI5B,GAAG,GAAG,KAAKrB,KAAf;AAEA,QAAI,CAACqB,GAAL,EACI,OAAO,GAAP;AAEJ,QAAI,CAACwmE,EAAD,EAAKC,EAAL,IAAWzmE,GAAf;AACA,QAAIiwB,CAAC,GAAG,uBAASy2C,OAAT,CAAiB,KAAjB,CAAR;AACA,QAAIC,EAAE,GAAG,qBAAOH,EAAP,CAAT;AACA,QAAII,EAAE,GAAG,qBAAOH,EAAP,CAAT;AACA,QAAII,QAAQ,GAAGF,EAAE,CAACv0B,IAAH,MAAaniB,CAAC,CAACmiB,IAAF,EAAb,IAAyBw0B,EAAE,CAACx0B,IAAH,MAAaw0B,EAAE,CAACx0B,IAAH,EAArD;AACA,QAAI00B,QAAQ,GAAGH,EAAE,CAACv0B,IAAH,MAAaw0B,EAAE,CAACx0B,IAAH,EAA5B,CAZO,CAcP;;AACA,QAAIo0B,EAAE,IAAIC,EAAV,EAAc;AACV,UAAIE,EAAE,GAAG,qBAAOH,EAAP,CAAT;AAEA,UAAIv2C,CAAC,CAAC82C,MAAF,CAASJ,EAAT,CAAJ,EACI,OAAO,OAAP;AAEJ,UAAIK,QAAQ,GAAG/2C,CAAC,CAACkyB,IAAF,CAAOwkB,EAAP,EAAW,MAAX,CAAf;AAEA,UAAIK,QAAQ,IAAI,CAAhB,EACI,OAAO,WAAP;AAEJ,UAAIA,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,IAAI,EAAhC,EACI,OAAOA,QAAQ,GAAC,WAAhB,CAZM,CAcV;;AACA,UAAIH,QAAJ,EACI,OAAOF,EAAE,CAACj6D,MAAH,CAAU,OAAV,CAAP;AAEJ,aAAOi6D,EAAE,CAACj6D,MAAH,CAAU,QAAV,CAAP;AACH,KAlCM,CAoCP;;;AACA,QAAIi6D,EAAE,CAAC15D,IAAH,MAAa,CAAb,IAAkB25D,EAAE,CAAC35D,IAAH,MAAa25D,EAAE,CAAC31B,KAAH,GAAWg2B,KAAX,CAAiB,OAAjB,EAA0Bh6D,IAA1B,EAAnC,EAAqE;AAEjE,UAAIi6D,MAAM,GAAGP,EAAE,CAACj6D,MAAH,CAAU,KAAV,CAAb;AACA,UAAIy6D,MAAM,GAAGP,EAAE,CAACl6D,MAAH,CAAU,KAAV,CAAb;;AAEA,UAAIw6D,MAAM,IAAIC,MAAV,IAAoBL,QAAxB,EAAkC;AAE9B,YAAII,MAAM,IAAIj3C,CAAC,CAACvjB,MAAF,CAAS,KAAT,CAAV,IAA6Bm6D,QAAjC,EACI,OAAO,YAAP;AAEJ,YAAIA,QAAJ,EACI,OAAOK,MAAP;AAEJ,eAAOA,MAAM,GAAC,IAAP,GAAYP,EAAE,CAACj6D,MAAH,CAAU,IAAV,CAAnB;AACH;;AAED,UAAIm6D,QAAQ,IAAIC,QAAZ,IAAwBH,EAAE,CAACt0B,KAAH,MAAc,CAAtC,IAA2Cu0B,EAAE,CAACv0B,KAAH,MAAc,EAA7D,EACI,OAAO,WAAP,CADJ,KAEK,IAAIw0B,QAAQ,IAAIC,QAAhB,EACD,OAAOI,MAAM,GAAC,KAAP,GAAaC,MAApB,CADC,KAEA,IAAIL,QAAJ,EACD,OAAOI,MAAM,GAAC,KAAP,GAAaC,MAAb,GAAoB,GAApB,GAAwBP,EAAE,CAACl6D,MAAH,CAAU,MAAV,CAA/B,CADC,KAGD,OAAOw6D,MAAM,GAAC,IAAP,GAAYP,EAAE,CAACj6D,MAAH,CAAU,IAAV,CAAZ,GAA4B,KAA5B,GAAkCy6D,MAAlC,GAAyC,IAAzC,GAA8CP,EAAE,CAACl6D,MAAH,CAAU,IAAV,CAArD;AACP,KA7DM,CA+DP;;;AACA,QAAIm6D,QAAJ,EACI,OAAOF,EAAE,CAACj6D,MAAH,CAAU,OAAV,IAAmB,KAAnB,GAAyBk6D,EAAE,CAACl6D,MAAH,CAAU,OAAV,CAAhC;AAEJ,WAAOi6D,EAAE,CAACj6D,MAAH,CAAU,QAAV,IAAoB,KAApB,GAA0Bk6D,EAAE,CAACl6D,MAAH,CAAU,QAAV,CAAjC;AACH;;AAED45D,EAAAA,OAAO,GAAE;AACL,SAAKx4C,KAAL;AACH;;AAEDu4C,EAAAA,UAAU,GAAE;AACR,SAAK1nE,KAAL,GAAa,IAAb;AACA,SAAKmvB,KAAL;AACH;;AAEDy4C,EAAAA,SAAS,CAACjjE,CAAD,EAAG;AACR,QAAI8jE,MAAM,GAAG9jE,CAAC,CAACwD,MAAF,CAASoD,SAAtB;AACA,QAAI2nB,MAAM,GAAG,EAAb;AACA,QAAI5kB,IAAI,GAAG,sBAAX;AACA,QAAIP,MAAM,GAAG,YAAb;;AAEA,YAAO06D,MAAP;AACI,WAAK,OAAL;AACIv1C,QAAAA,MAAM,GAAG,CAAC5kB,IAAI,CAACP,MAAL,CAAYA,MAAZ,CAAD,CAAT;AACA;;AAEJ,WAAK,WAAL;AACIO,QAAAA,IAAI,CAAC6M,QAAL,CAAc,GAAd,EAAmB,KAAnB;AACA+X,QAAAA,MAAM,GAAG,CAAC5kB,IAAI,CAACP,MAAL,CAAYA,MAAZ,CAAD,CAAT;AACA;;AAEJ,WAAK,SAAL;AACImlB,QAAAA,MAAM,GAAG,CAAC5kB,IAAI,CAACgkC,KAAL,GAAan3B,QAAb,CAAsB,IAAtB,EAA4B,KAA5B,EAAmCpN,MAAnC,CAA0CA,MAA1C,CAAD,EAAoDO,IAAI,CAACP,MAAL,CAAYA,MAAZ,CAApD,CAAT;AACA;;AAEJ,WAAK,YAAL;AACImlB,QAAAA,MAAM,GAAG,CAAC5kB,IAAI,CAACy5D,OAAL,CAAa,OAAb,EAAsBh6D,MAAtB,CAA6BA,MAA7B,CAAD,EAAuCO,IAAI,CAACg6D,KAAL,CAAW,OAAX,EAAoBv6D,MAApB,CAA2BA,MAA3B,CAAvC,CAAT;AACA;;AAEJ,WAAK,WAAL;AACImlB,QAAAA,MAAM,GAAG,CAAC5kB,IAAI,CAACy5D,OAAL,CAAa,MAAb,EAAqBh6D,MAArB,CAA4BA,MAA5B,CAAD,EAAsCO,IAAI,CAACg6D,KAAL,CAAW,MAAX,EAAmBv6D,MAAnB,CAA0BA,MAA1B,CAAtC,CAAT;AACA;AApBR;;AAuBA,SAAK/N,KAAL,GAAakzB,MAAb;AACA,SAAK/D,KAAL;AACH;;AA7PoE,CAAzE;;eAiQeztB,cAAc,CAAClC,GAAf,CAAmB,yBAAnB;;;;;;;;;;;ACpQf;;AACA;;;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,0BAAtB,EAAkD,cAAcE,sBAAd,CAAwB;AAEtE,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;KAAX;AAoBlB;;AAEFuC,EAAAA,YAAY,GAAE;AAEV,SAAK8wB,KAAL,GAAa,KAAKhzB,UAAL,CAAgBd,aAAhB,CAA8B,cAA9B,CAAb;AAEA,QAAIK,KAAK,GAAG,KAAKif,MAAL,CAAYjf,KAAxB;AAEA,QAAIA,KAAJ,EACI,KAAKyzB,KAAL,CAAWzzB,KAAX,GAAmBA,KAAnB;AACP;;AAEDmC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;uDAAD,CAC+B,KAAK3C,GAAL,CAAS,OAAT,GAAmB,OADlD,CAC0D;qDAC7B,KAAKA,GAAL,CAAS,aAAT,CAAwB,eAAc,KAAKmoE,OAAQ;gCACxE,KAAKnoE,GAAL,CAAS,UAAT,CAAqB;oFAC+B,KAAKkpE,UAAW;;KAJvF;AAMP;;AAEFlpE,EAAAA,GAAG,CAACiK,GAAD,EAAM+F,UAAU,GAAC,EAAjB,EAAoB;AACnB,QAAInO,GAAG,GAAG,KAAK4d,MAAL,CAAY2nB,KAAZ,CAAkBn9B,GAAlB,CAAV;AACA,WAAOpI,GAAG,IAAI8R,SAAP,GAAmB9R,GAAnB,GAAyBmO,UAAhC;AACH;;AAED,MAAIxP,KAAJ,GAAW;AACP,QAAIA,KAAK,GAAG,EAAZ,CADO,CAGP;;AACA,QAAI,CAAC,KAAKyzB,KAAV,EACI,OAAO,KAAKxU,MAAL,CAAYjf,KAAnB;AAEJ,WAAO,KAAKyzB,KAAL,CAAWzzB,KAAlB;AACH;;AAED,MAAIA,KAAJ,CAAUqB,GAAV,EAAc;AACV,QAAI,KAAKoyB,KAAT,EACI,KAAKA,KAAL,CAAWzzB,KAAX,GAAmBqB,GAAnB;AACP;AAED;;;;;;AAIA,MAAI4B,KAAJ,GAAW;AACP,WAAO,KAAKjD,KAAL,IAAc,KAAKR,GAAL,CAAS,cAAT,EAAyB,OAAzB,CAArB;AACH;;AAEDmoE,EAAAA,OAAO,GAAE;AACL,SAAKx4C,KAAL;AACH;;AAEDu5C,EAAAA,UAAU,GAAE;AACR,SAAK1oE,KAAL,GAAa,IAAb;AACA,SAAKmvB,KAAL;AACH;;AA7EqE,CAA1E;;eAiFeztB,cAAc,CAAClC,GAAf,CAAmB,0BAAnB;;;;;;;;;;;ACpFf;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,2BAAtB,EAAmD,cAAcE,sBAAd,CAAwB;AAEvE,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;KAAX;AAWlB;;AAEFC,EAAAA,WAAW,CAACkvB,IAAI,GAAC,EAAN,EAAS;AAChB;AAEA,SAAKA,IAAL,GAAYlqB,MAAM,CAACwqB,MAAP,CAAc;AACtBlf,MAAAA,KAAK,EAAE,KADe;AAEtBH,MAAAA,GAAG,EAAE,CAFiB;AAGtBC,MAAAA,GAAG,EAAE,GAHiB;AAItBC,MAAAA,IAAI,EAAE,CAJgB;AAKtBzN,MAAAA,KAAK,EAAE,MALe;AAMtB8M,MAAAA,KAAK,EAAE,OANe;AAOtB1R,MAAAA,MAAM,EAAE,EAPc;AAQtBqiC,MAAAA,MAAM,EAAE;AARc,KAAd,EASTnR,IATS,CAAZ;AAUH;;AAEDptB,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;6BAEI,KAAKwmE,QAAS;;;;;2BAKhB,KAAKp5C,IAAL,CAAUxf,KAAM;sBACrB,KAAKqd,QAAS;qBACf,KAAKmC,IAAL,CAAU5e,KAAM;kBACnB,KAAK4e,IAAL,CAAU/e,GAAI;kBACd,KAAK+e,IAAL,CAAU9e,GAAI;mBACb,KAAK8e,IAAL,CAAU7e,IAAK;oBACd,KAAK6e,IAAL,CAAUtsB,KAAM;qBACf,KAAKjD,KAAM;;KAdnB;AAgBP;;AAEF2oE,EAAAA,QAAQ,GAAE;AACN,SAAK3oE,KAAL,GAAa,IAAb;AAEA,SAAKS,UAAL,CAAgBd,aAAhB,CAA8B,cAA9B,EAA8CyS,KAA9C;AACA,SAAK+c,KAAL;AACH;;AAED/B,EAAAA,QAAQ,CAACzoB,CAAD,EAAG;AACP,SAAK3E,KAAL,GAAa2E,CAAC,CAACwD,MAAF,CAASnI,KAAtB,CADO,CAEP;AACH;;AAED,MAAIA,KAAJ,GAAW;AAEP,QAAI,KAAK4kE,OAAL,KAAiBzxD,SAArB,EACI,KAAKyxD,OAAL,GAAe,KAAK3lD,MAAL,CAAYjf,KAAZ,IAAqB,IAApC;AAEJ,WAAO,KAAK4kE,OAAZ;AACH;;AAED,MAAI5kE,KAAJ,CAAUqB,GAAV,EAAc;AACV;AACA,SAAKujE,OAAL,GAAevjE,GAAf,CAFU,CAGV;AACH;;AAED,MAAI4B,KAAJ,GAAW;AACP,QAAI5B,GAAG,GAAG,KAAKrB,KAAf;AAEA,QAAIqB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,EAA5B,EAAiC,OAAO,GAAP;AAEjC,QAAI2M,GAAG,GAAG9O,KAAK,CAACoS,OAAN,CAAcjQ,GAAd,IAAsBA,GAAG,CAAC,CAAD,CAAH,IAAUA,GAAG,CAAC,CAAD,CAAb,GAAmBA,GAAG,CAAC,CAAD,CAAtB,GAA4BA,GAAG,CAAC4M,IAAJ,CAAS,GAAT,CAAlD,GAAmE5M,GAA7E;AAEA,WAAO,KAAKkuB,IAAL,CAAUlxB,MAAV,GAAiB2P,GAAjB,GAAqB,KAAKuhB,IAAL,CAAUmR,MAAtC;AACH;;AAlFsE,CAA3E;;eAsFeh/B,cAAc,CAAClC,GAAf,CAAmB,2BAAnB;;;;;;;;;;;ACxFf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMopE,WAAW,GAAG;AAChB,UAAQC,uBADQ;AAEhB,WAASC,wBAFO;AAGhB,YAAUC;AAHM,CAApB,EAMA;;AACA,MAAMC,WAAW,GAAG,CAAC71D,SAAD,EAAY,IAAZ,EAAkB,EAAlB,CAApB;;AAEA,MAAM81D,aAAa,GAAGt7B,KAAK,IAAI;AAC3B,MAAIv6B,IAAI,GAAG,EAAX;AACA,GAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,OAAxB,EAAiC,MAAjC,EAAyC,KAAzC,EAAgDtU,OAAhD,CAAwD2K,GAAG,IAAE;AACzD,QAAIkkC,KAAK,CAACyB,GAAN,KAAcj8B,SAAlB,EAA6B;AACzB,UAAIw6B,KAAK,CAACyB,GAAN,CAAU3lC,GAAV,CAAJ,EACI2J,IAAI,CAAC3J,GAAD,CAAJ,GAAYkkC,KAAK,CAACnuC,GAAN,CAAUiK,GAAV,CAAZ;AACP,KAHD,MAGM,IAAIkkC,KAAK,CAAClkC,GAAD,CAAL,KAAe0J,SAAnB,EACFC,IAAI,CAAC3J,GAAD,CAAJ,GAAYkkC,KAAK,CAAClkC,GAAD,CAAjB;AACP,GAND;AAOA,SAAO2J,IAAP;AACH,CAVD;;AAYA,MAAM81D,eAAe,GAAG,CAACv7B,KAAD,EAAQtsC,GAAR,EAAaoI,GAAb,KAAqB;AACzC,MAAIvK,KAAK,CAACoS,OAAN,CAAcjQ,GAAd,CAAJ,EACI,OAAOA,GAAG,CAAC2H,QAAJ,CAAa2kC,KAAK,CAACnuC,GAAN,CAAUiK,GAAV,CAAb,CAAP,CADJ,KAGI,OAAOpI,GAAG,IAAIssC,KAAK,CAACnuC,GAAN,CAAUiK,GAAV,CAAd;AACP,CALD;;AAOe,MAAM0/D,OAAN,SAAsB77C,GAAtB,CAA0B;AAErC,MAAI87C,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK3/D,GAAf,GAAmB,UAA1B;AAAsC;;AAEvD2I,EAAAA,KAAK,GAAE;AACH,SAAKi3D,OAAL,GAAe,KAAf;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,SAAKlqE,GAAL,CAAS6f,MAAM,IAAE;AACbqqD,MAAAA,SAAS,CAACrqD,MAAM,CAACxV,GAAR,CAAT,GAAwBwV,MAAM,CAACzP,UAA/B;AACH,KAFD;AAGA,SAAKxP,KAAL,CAAWspE,SAAX;AACH;;AAEDtxD,EAAAA,QAAQ,GAAE;AACN,QAAIvM,MAAM,GAAG,EAAb;AACA,SAAK3M,OAAL,CAAamgB,MAAM,IAAE;AACjB,UAAIA,MAAM,CAACotB,QAAX,EACI5gC,MAAM,CAAClD,IAAP,CAAa,GAAE0W,MAAM,CAAChc,KAAM,KAAIgc,MAAM,CAACsqD,UAAW,EAAlD;AACP,KAHD;AAKA,WAAO99D,MAAM,CAACwC,IAAP,CAAY,KAAZ,CAAP;AACH;;AAEDjO,EAAAA,KAAK,CAACyJ,GAAD,EAAMpI,GAAN,EAAU;AACX;AACA,QAAI,KAAKujE,OAAL,KAAiBzxD,SAArB,EAAgC;AAC5B,WAAKyxD,OAAL,GAAe,KAAKn7D,GAAL,IAAYtE,IAAI,CAACC,KAAL,CAAWsO,YAAY,CAACL,OAAb,CAAqB,KAAK+1D,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACH,KAJU,CAMX;;;AACA,QAAI/nE,GAAG,KAAK8R,SAAR,IAAqB,OAAO1J,GAAP,IAAc,QAAvC,EAAiD;AAE7C,WAAK+9D,WAAL,GAAmB,IAAIl6D,IAAJ,GAAWC,OAAX,EAAnB,CAF6C,CAI7C;;AACA,UAAIoiC,OAAO,GAAG,OAAOlmC,GAAP,IAAc,QAAd,GAAyBA,GAAzB,GAA+B;AAAC,SAACA,GAAD,GAAMpI;AAAP,OAA7C;AACA,UAAIirC,SAAS,GAAG,EAAhB;;AAEA,WAAK,IAAI5U,CAAT,IAAciY,OAAd,EAAsB;AAElB,YAAI65B,UAAU,GAAG,KAAK5E,OAAL,CAAaltC,CAAb,CAAjB;AACA,YAAI+xC,QAAQ,GAAG95B,OAAO,CAACjY,CAAD,CAAtB,CAHkB,CAKlB;;AACA,YAAI,CAAC,IAAD,EAAOvkB,SAAP,EAAkBnK,QAAlB,CAA2BygE,QAA3B,KACAvqE,KAAK,CAACoS,OAAN,CAAcm4D,QAAd,KAA2B,CAAC,IAAD,EAAOt2D,SAAP,EAAkBnK,QAAlB,CAA2BygE,QAAQ,CAAC,CAAD,CAAnC,CAD/B,EAEI,OAAO,KAAK7E,OAAL,CAAaltC,CAAb,CAAP,CAFJ,KAII,KAAKktC,OAAL,CAAaltC,CAAb,IAAkB+xC,QAAlB,CAVc,CAYlB;;AACA,YAAItkE,IAAI,CAACoO,SAAL,CAAe,KAAKqxD,OAAL,CAAaltC,CAAb,CAAf,KAAmCvyB,IAAI,CAACoO,SAAL,CAAei2D,UAAf,CAAvC,EAAmE;AAC/Dl9B,UAAAA,SAAS,CAAC/jC,IAAV,CAAemvB,CAAf;AACH,SAFD,MAEK;AACD,iBAAOiY,OAAO,CAACjY,CAAD,CAAd;AACH;AACJ;;AAED,UAAI,KAAKjuB,GAAT,EACIiK,YAAY,CAACF,OAAb,CAAqB,KAAK41D,SAA1B,EAAqCjkE,IAAI,CAACoO,SAAL,CAAe,KAAKqxD,OAApB,CAArC;;AAEJ,UAAIt4B,SAAS,CAAC7lC,MAAV,GAAmB,CAAvB,EAA0B;AACtB;AACA6lC,QAAAA,SAAS,CAACxtC,OAAV,CAAkB44B,CAAC,IAAE;AACjB,cAAIzY,MAAM,GAAG,KAAKzf,GAAL,CAASk4B,CAAT,CAAb;AACA,cAAIzY,MAAM,CAACyqD,YAAX,EACIzqD,MAAM,CAAC0qD,UAAP,CAAkB3pE,KAAlB,GAA0BqB,GAA1B;AACJ4d,UAAAA,MAAM,CAACy0C,IAAP,CAAY,QAAZ,EAAsBryD,GAAtB;AACH,SALD;AAOA,YAAI,KAAKgoE,OAAT,EACI,KAAKO,aAAL,GAAqBj6B,OAArB,CADJ,KAGI,KAAK+jB,IAAL,CAAU,QAAV,EAAoB/jB,OAApB;AACP,OA5C4C,CA8CjD;;AACC,KA/CD,MA+CK;AACD,aAAOlmC,GAAG,GAAG,KAAKm7D,OAAL,CAAan7D,GAAb,CAAH,GAAuB,KAAKm7D,OAAtC;AACH;AACJ;;AAED,MAAIyE,OAAJ,GAAa;AAAC,WAAO,KAAKQ,OAAL,IAAgB,KAAvB;AAA8B;;AAC5C,MAAIR,OAAJ,CAAYhoE,GAAZ,EAAgB;AACZ,SAAKwoE,OAAL,GAAeroE,OAAO,CAACH,GAAD,CAAtB;;AAEA,QAAI,CAAC,KAAKgoE,OAAN,IAAiB,KAAKO,aAA1B,EAAyC;AACrC,WAAKlW,IAAL,CAAU,QAAV,EAAoB,KAAKkW,aAAzB;AACA,WAAKA,aAAL,GAAqB,IAArB;AACH;AACJ;;AAED,MAAIA,aAAJ,GAAmB;AAAE,WAAO,KAAKE,eAAZ;AAA6B;;AAClD,MAAIF,aAAJ,CAAkBj6B,OAAlB,EAA0B;AACtB,QAAI,CAACA,OAAL,EAAc;AACV,aAAO,KAAKm6B,eAAZ;AACA,WAAKpW,IAAL,CAAU,SAAV,EAAqB,KAArB;AACA;AACH;;AAED,SAAKoW,eAAL,GAAuBzkE,MAAM,CAACwqB,MAAP,CAAe,KAAKi6C,eAAL,IAAwB,EAAvC,EAA4Cn6B,OAA5C,CAAvB;AAEA,SAAK+jB,IAAL,CAAU,SAAV,EAAqBruD,MAAM,CAACuZ,IAAP,CAAY,KAAKkrD,eAAjB,EAAkCrjE,MAAvD;AACH;;AAEDsjE,EAAAA,GAAG,CAAC5C,OAAD,EAAS;AAER,QAAIA,OAAO,IAAI,KAAK6C,aAApB,EACI;AAEJ,SAAKA,aAAL,GAAqB7C,OAArB;AAEA,SAAKroE,OAAL,CAAamgB,MAAM,IAAE,OAAOA,MAAM,CAACpY,MAAnC;AACA,SAAKqxD,KAAL;;AAEA,SAAK,IAAIzuD,GAAT,IAAgB09D,OAAhB,EAAyB;AAErB,UAAI,CAACA,OAAO,CAAC19D,GAAD,CAAZ,EACI;;AAEJ,UAAIA,GAAG,IAAI,QAAX,EAAqB;AACjB,aAAKwgE,aAAL,GAAqB9C,OAAO,CAAC19D,GAAD,CAA5B;AACA;AACH;;AAED,UAAIwV,MAAM,GAAG,IAAIirD,MAAJ,CAAWzgE,GAAX,EAAgB09D,OAAO,CAAC19D,GAAD,CAAvB,CAAb;AACAwV,MAAAA,MAAM,CAACpY,MAAP,GAAgB,IAAhB;AACA,WAAK4mB,GAAL,CAAShkB,GAAT,EAAcwV,MAAd;AACH;;AAED,SAAKuoD,WAAL,GAAmB,IAAIl6D,IAAJ,GAAWC,OAAX,EAAnB;AACH;;AAEDnO,EAAAA,GAAG,CAACmH,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAK9F,OAAL,CAAa,CAAC4M,CAAD,EAAIjC,GAAJ,KAAU7E,IAAI,CAAC2D,IAAL,CAAUhC,EAAE,CAACmF,CAAD,EAAIjC,GAAJ,CAAZ,CAAvB;AACA,WAAO7E,IAAP;AACH;;AAED,MAAIqlE,aAAJ,CAAkB16C,IAAlB,EAAuB;AACnB,QAAIA,IAAI,KAAK,KAAb,EACI,KAAK46C,eAAL,GAAuB;AAAC/2D,MAAAA,IAAI,EAAC;AAAN,KAAvB,CAFe,CAEqB;;AAExC,QAAI,OAAOmc,IAAP,IAAe,QAAnB,EACI,KAAK46C,eAAL,GAAuB56C,IAAvB;AACP;;AAED,MAAI06C,aAAJ,GAAmB;AACf,WAAO5kE,MAAM,CAACwqB,MAAP,CAAc;AACjBzc,MAAAA,IAAI,EAAE61D,aADW;AAEjBrlC,MAAAA,cAAc,EAAE,IAFC;AAGjBjB,MAAAA,kBAAkB,EAAE,CAHH;AAIjBP,MAAAA,SAAS,EAAE,GAJM;AAKjBt/B,MAAAA,QAAQ,EAAE,CALO;AAMjBq/B,MAAAA,QAAQ,EAAE,GANO;AAOjBn8B,MAAAA,WAAW,EAAE,QAPI;AAQjB0yC,MAAAA,KAAK,EAAE;AARU,KAAd,EASJ,KAAKyxB,eAAL,IAAsB,EATlB,CAAP;AAUH;;AAED,MAAIC,UAAJ,GAAgB;AACZ,WAAO,OAAO,KAAKH,aAAL,CAAmB72D,IAA1B,IAAkC,UAAzC;AACH;;AAEDq0D,EAAAA,YAAY,CAACr0D,IAAD,EAAM;AACd,WAAO,IAAI5O,OAAJ,CAAYC,OAAO,IAAE;AAExB,UAAIwlE,aAAa,GAAG5kE,MAAM,CAACwqB,MAAP,CAAc,EAAd,EAAkB,KAAKo6C,aAAvB,CAApB;AACA,UAAIrrD,IAAI,GAAGqrD,aAAa,CAACrrD,IAAzB;AAEAxL,MAAAA,IAAI,CAACtU,OAAL,CAAawyB,CAAC,IAAE;AACZA,QAAAA,CAAC,CAAC+4C,aAAF,GAAkB,EAAlB;AACH,OAFD;AAIA,UAAI,CAAC,KAAKxgC,IAAN,IACD,CAACogC,aAAa,CAAC72D,IADd,IAED,KAAKy2B,IAAL,CAAUpjC,MAAV,GAAmBwjE,aAAa,CAACtnC,kBAFpC,EAGI,OAAOl+B,OAAO,CAAC2O,IAAD,CAAd;AAEJA,MAAAA,IAAI,CAACtU,OAAL,CAAawyB,CAAC,IAAE;AACZA,QAAAA,CAAC,CAACg5C,WAAF,GAAcL,aAAa,CAAC72D,IAAd,CAAmBke,CAAnB,CAAd,CADY,CAGZ;;AACA,YAAI,CAAC1S,IAAL,EACIA,IAAI,GAAGvZ,MAAM,CAACuZ,IAAP,CAAY0S,CAAC,CAACg5C,WAAd,CAAP;AACP,OAND,EAdwB,CAsBxB;AACA;;AACA,UAAI1rD,IAAJ,EACAqrD,aAAa,CAACrrD,IAAd,GAAqBA,IAAI,CAACxf,GAAL,CAASqK,GAAG,IAAE;AAC/B,YAAI,OAAOA,GAAP,IAAc,QAAlB,EACI,OAAO,iBAAeA,GAAtB;AAEJ,YAAI8gE,MAAM,GAAGllE,MAAM,CAACwqB,MAAP,CAAc,EAAd,EAAkBpmB,GAAlB,CAAb;AACA8gE,QAAAA,MAAM,CAAC9qE,IAAP,GAAc,iBAAe8qE,MAAM,CAAC9qE,IAApC;AACA,eAAO8qE,MAAP;AACH,OAPoB,CAArB;AASA,UAAIC,IAAI,GAAG,IAAInpC,aAAJ,CAASjuB,IAAT,EAAe62D,aAAf,CAAX;AACA72D,MAAAA,IAAI,GAAGo3D,IAAI,CAAC5hD,MAAL,CAAY,KAAKihB,IAAjB,CAAP,CAnCwB,CAqCxB;;AACA,UAAIogC,aAAa,CAACrmC,cAAlB,EACIxwB,IAAI,GAAGA,IAAI,CAAChU,GAAL,CAASsiC,CAAC,IAAE;AACfA,QAAAA,CAAC,CAACl3B,IAAF,CAAO6/D,aAAP,GAAuB,EAAvB;AACA3oC,QAAAA,CAAC,CAAChV,OAAF,CAAU5tB,OAAV,CAAkBwyB,CAAC,IAAE;AACjBoQ,UAAAA,CAAC,CAACl3B,IAAF,CAAO6/D,aAAP,CAAqB/4C,CAAC,CAAC7nB,GAAF,CAAMnK,OAAN,CAAc,cAAd,EAA8B,EAA9B,CAArB,IAA0DgyB,CAAC,CAACtxB,KAA5D;AACH,SAFD;AAGA,eAAO0hC,CAAC,CAACl3B,IAAT;AACH,OANM,CAAP;AAQJ/F,MAAAA,OAAO,CAAC2O,IAAD,CAAP;AACH,KAhDM,CAAP;AAiDH;;AAED,QAAM6L,MAAN,CAAa7L,IAAb,EAAkB;AACd,QAAI+zD,OAAO,GAAG,KAAK/nE,GAAL,CAAS6f,MAAM,IAAEA,MAAjB,CAAd,CADc,CAGd;;AACA,WAAOkoD,OAAO,CAACl+C,MAAR,CAAe,CAAC8V,OAAD,EAAU9f,MAAV,KAAqB;AACvC,aAAO8f,OAAO,CAACtnB,IAAR,CAAarE,IAAI,IAAE6L,MAAM,CAACwrD,UAAP,CAAkBr3D,IAAlB,CAAnB,CAAP;AACH,KAFM,EAEJ5O,OAAO,CAACC,OAAR,CAAgB2O,IAAhB,CAFI,CAAP;AAIH;;AAEDs3D,EAAAA,kBAAkB,CAAC/6B,OAAD,EAAS;AACvB,SAAK,IAAIlmC,GAAT,IAAgBkmC,OAAhB,EAAyB;AACrB,UAAI,KAAKnwC,GAAL,CAASiK,GAAT,EAAckhE,IAAlB,EACI,OAAO,IAAP;AACP;;AACD,WAAO,KAAP;AACH;;AAxOoC;AA4OzC;;;;;;;AAGO,MAAMT,MAAN,CAAa;AAEhB7pE,EAAAA,WAAW,CAACoJ,GAAD,EAAMm9B,KAAN,EAAY;AACnB,SAAKn9B,GAAL,GAAWA,GAAX;AACA,SAAKm9B,KAAL,GAAaA,KAAb;AACH;;AAED,MAAI1T,MAAJ,GAAY;AACR;AACA,QAAIA,MAAM,GAAG,KAAK0T,KAAL,CAAW1T,MAAxB;AACAA,IAAAA,MAAM,GAAG,OAAOA,MAAP,IAAiB,UAAjB,GAA8BA,MAAM,CAACpf,IAAP,CAAY,KAAKjN,MAAL,CAAYw9B,IAAxB,CAA9B,GAA8DnR,MAAvE;AAEAA,IAAAA,MAAM,GAAGA,MAAM,CAAC9zB,GAAP,CAAWsM,CAAC,IAAE;AACnB,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwB,CAAC,CAAC,SAAD,EAAY1C,QAAZ,CAAqB0C,CAArB,CAA7B,EACIA,CAAC,GAAG;AAACzI,QAAAA,KAAK,EAAEyI,CAAR;AAAWrK,QAAAA,GAAG,EAAEqK;AAAhB,OAAJ,CAFe,CAInB;;AACA,UAAI,OAAOA,CAAP,IAAY,QAAZ,IAAwBs9D,WAAW,CAAChgE,QAAZ,CAAqB0C,CAAC,CAACrK,GAAvB,CAA5B,EAAyD;AACrDqK,QAAAA,CAAC,CAACrK,GAAF,GAAQ,IAAR;AACAqK,QAAAA,CAAC,CAAC4+B,SAAF,GAAc,IAAd;AACH;;AAED,aAAO5+B,CAAP;AACH,KAXQ,CAAT;AAaA,WAAOwnB,MAAP;AACH;;AAED,MAAIjwB,KAAJ,GAAW;AACP,WAAO,KAAK2jC,KAAL,CAAW3jC,KAAX,IAAoB,uBAAS,KAAKwG,GAAd,CAA3B;AACH;;AAED,MAAIhH,IAAJ,GAAU;AACN,WAAO,KAAKmkC,KAAL,CAAWnkC,IAAX,IAAmB,IAA1B;AACH;;AAED,MAAImoE,QAAJ,GAAc;AACV,QAAI,CAAC,KAAKhkC,KAAL,CAAWgkC,QAAZ,IAAwB,KAAKlB,YAA7B,IAA6C,KAAKC,UAAL,CAAgBiB,QAAjE,EACI,OAAO,KAAKjB,UAAL,CAAgBiB,QAAvB;AAEJ,WAAO,KAAKhkC,KAAL,CAAWgkC,QAAX,IAAuB1B,eAA9B;AACH,GAzCe,CA2ChB;;;AACA,MAAIyB,IAAJ,GAAU;AACN,WAAO,KAAK/jC,KAAL,CAAWikC,EAAX,KAAkB,IAAzB;AACH;;AAED,MAAInB,YAAJ,GAAkB;AACd,WAAO,CAAC,CAAC,KAAK9iC,KAAL,CAAWtX,IAApB;AACH;;AAED,MAAI+c,QAAJ,GAAc;AACV,QAAIhrC,GAAG,GAAG,KAAKypE,OAAL,GAAe,KAAK9qE,KAAL,IAAY,KAAKA,KAAL,CAAW,CAAX,CAA3B,GAA2C,KAAKA,KAA1D;AACA,WAAO,CAACgpE,WAAW,CAAChgE,QAAZ,CAAqB3H,GAArB,CAAR;AACH;;AAED,MAAIypE,OAAJ,GAAa;AACT,WAAO,KAAKlkC,KAAL,CAAWmkC,KAAX,KAAqB,IAA5B;AACH;;AAED,MAAI/qE,KAAJ,GAAW;AACP,WAAO,KAAK6G,MAAL,CAAY7G,KAAZ,CAAkB,KAAKyJ,GAAvB,CAAP;AACH;;AAED,MAAIzJ,KAAJ,CAAUqB,GAAV,EAAc;AACV,SAAKwF,MAAL,CAAY7G,KAAZ,CAAkB,KAAKyJ,GAAvB,EAA4BpI,GAA5B;AACH;;AAED,MAAImO,UAAJ,GAAgB;AACZ,QAAI,KAAKo3B,KAAL,CAAWp3B,UAAf,EAA4B,OAAO,KAAKo3B,KAAL,CAAWp3B,UAAlB;AAE5B,QAAI,KAAKk6D,YAAT,EACI,OAAO,KAAKC,UAAL,CAAgBn6D,UAAhB,GAA6B,KAAKm6D,UAAL,CAAgBn6D,UAA7C,GAA0D,IAAjE;AAEJ,QAAIm9B,KAAK,GAAG,KAAKzZ,MAAL,CAAY,CAAZ,CAAZ;AACA,WAAOyZ,KAAK,GAAGA,KAAK,CAACtrC,GAAT,GAAe,IAA3B;AACH;;AAED,MAAIkoE,UAAJ,GAAgB;AACZ,QAAIloE,GAAG,GAAG,KAAKrB,KAAf;AAEA,QAAId,KAAK,CAACoS,OAAN,CAAcjQ,GAAd,CAAJ,EACIA,GAAG,GAAGA,GAAG,CAACjC,GAAJ,CAAQsM,CAAC,IAAEA,CAAC,CAACrK,GAAF,IAAOqK,CAAlB,CAAN,CADJ,KAGIrK,GAAG,GAAGA,GAAG,KAAGA,GAAG,CAACA,GAAJ,IAASA,GAAZ,CAAT;;AAEJ,QAAI,KAAKqoE,YAAT,EAAuB;AACnB,UAAIp6C,IAAI,GAAG,KAAKq6C,UAAhB;AACA,aAAOr6C,IAAI,GAAGA,IAAI,CAACrsB,KAAR,GAAgB,aAA3B;AACH;;AAED,QAAI+nE,UAAU,GAAG,KAAK93C,MAAL,CAAYjU,MAAZ,CAAmB,CAACvT,CAAD,EAAGtC,CAAH,KAAO;AACvC,UAAI,OAAOsC,CAAP,IAAY,QAAZ,IAAwBA,CAAC,CAACid,OAA1B,IAAqCjd,CAAC,CAACyvB,IAAvC,IAA+CzvB,CAAC,CAACu/D,SAArD,EAAiE,OAAO,KAAP,CAD1B,CAEvC;;AAEA,UAAI,CAAC/rE,KAAK,CAACoS,OAAN,CAAcjQ,GAAd,CAAL,EAAyB;AACrB,YAAIqK,CAAC,CAACrK,GAAF,IAAOA,GAAX,EAAgB;AACZgE,UAAAA,MAAM,CAACwqB,MAAP,CAAcnkB,CAAd,EAAiB,KAAK1L,KAAtB;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH;;AAED,UAAIipC,YAAY,GAAG5nC,GAAG,CAACiW,OAAJ,CAAY5L,CAAC,CAACrK,GAAd,CAAnB;;AAEA,UAAI4nC,YAAY,GAAG,CAAC,CAApB,EAAuB;AAEnB,YAAIC,SAAS,GAAG,KAAKlpC,KAAL,CAAWipC,YAAX,CAAhB;;AAEA,YAAIC,SAAS,IAAI,OAAOA,SAAP,IAAoB,QAArC,EAA+C;AAC3C7jC,UAAAA,MAAM,CAACwqB,MAAP,CAAcnkB,CAAd,EAAiBw9B,SAAjB;AACH;;AAED,eAAO,IAAP;AACH;;AAED,aAAO,KAAP;AACH,KA1BgB,CAAjB;AA4BA,WAAO8hC,UAAU,GACfA,UAAU,CAAC5rE,GAAX,CAAe0zB,CAAC,IAAE;AAChB,aAAO,CAACA,CAAC,CAACqW,SAAH,EAAcrW,CAAC,CAACo4C,YAAF,IAAgBp4C,CAAC,CAAC7vB,KAAhC,EAAuCgc,MAAvC,CAA8C5N,CAAC,IAAEA,CAAjD,EAAoDpD,IAApD,CAAyD,GAAzD,CAAP;AACH,KAFC,EAECA,IAFD,CAEM,IAFN,CADe,GAIf5M,GAJF;AAKH;;AAED,QAAM8pE,QAAN,CAAepsE,EAAf,EAAkB;AAEd,QAAI,KAAK2qE,YAAT,EACI,OAAO,KAAK0B,cAAL,CAAoBrsE,EAApB,CAAP;AAEJ,QAAIs8B,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAAS,KAAKpI,MAAd,EAAsB;AACvCmI,MAAAA,QAAQ,EAAE,KAAKr7B,KADwB;AAEvC+F,MAAAA,QAAQ,EAAE,KAAK+kE,OAFwB;AAGvC/6D,MAAAA,KAAK,EAAE,KAAK62B,KAAL,CAAW72B,KAAX,IAAkB;AAHc,KAAtB,EAIlBsf,OAJkB,CAIVtwB,EAJU,EAIN;AACX4vB,MAAAA,eAAe,EAAE,KAAKiY,KAAL,CAAWjY,eAAX,IAA8B,cADpC;AAEXF,MAAAA,SAAS,EAAE,KAAKmY,KAAL,CAAWnY,SAAX,IAAwB,MAFxB;AAGXiR,MAAAA,eAAe,EAAE;AAHN,KAJM,CAArB;AAUA,QAAIlzB,MAAM,GAAG,KAAKxM,KAAlB;AAEA,QAAIq7B,QAAQ,KAAK,KAAb,IAAsBA,QAAQ,CAAC50B,MAAT,IAAmB,CAA7C,EAAkD,OAAlD,CACI;AADJ,SAEK,IAAIvH,KAAK,CAACoS,OAAN,CAAc+pB,QAAd,CAAJ,EACD,KAAKr7B,KAAL,GAAaq7B,QAAQ,CAACj8B,GAAT,CAAaiS,CAAC,IAAE;AACzB,eAAOA,CAAC,CAAC83B,SAAF,GAAc;AAAC9nC,UAAAA,GAAG,EAAEgQ,CAAC,CAAChQ,GAAR;AAAa8nC,UAAAA,SAAS,EAAE93B,CAAC,CAAC83B;AAA1B,SAAd,GAAqD93B,CAAC,CAAChQ,GAA9D;AACH,OAFY,CAAb,CADC,KAKD,KAAKrB,KAAL,GAAaq7B,QAAQ,CAAC8N,SAAT,GAAqB;AAAC9nC,QAAAA,GAAG,EAAEg6B,QAAQ,CAACh6B,GAAf;AAAoB8nC,QAAAA,SAAS,EAAE9N,QAAQ,CAAC8N;AAAxC,OAArB,GAA0E9N,QAAQ,CAACh6B,GAAhG;AACP;;AAED,MAAIsoE,UAAJ,GAAgB;AACZ,QAAI0B,QAAQ,GAAG,KAAKzkC,KAAL,CAAWtX,IAA1B;AACA,QAAIU,IAAI,GAAG,IAAX;;AAEA,QAAI,CAAC,KAAKs7C,WAAV,EAAuB;AAEnB,UAAI1C,WAAW,CAACyC,QAAD,CAAf,EAA2B;AACvBr7C,QAAAA,IAAI,GAAG44C,WAAW,CAACyC,QAAD,CAAlB;AACH,OAFD,MAEM,IAAI,OAAOA,QAAP,IAAmB,QAAvB,EAAkC;AACpCr7C,QAAAA,IAAI,GAAGtuB,cAAc,CAAClC,GAAf,CAAmB6rE,QAAnB,CAAP;AACH,OAFK,MAEA,IAAI,OAAOA,QAAP,IAAmBlrE,WAAvB,EAAoC;AACtC6vB,QAAAA,IAAI,GAAGq7C,QAAP;AACH;;AAED,UAAIr7C,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACxqB,SAAL,CAAe2pB,KAAf,GAAuB,YAAU;AAC7B,eAAKE,OAAL,CAAaG,MAAb,GAD6B,CACP;;AACzB,SAFD;;AAGA,aAAK87C,WAAL,GAAmB,IAAIt7C,IAAJ,CAAU,KAAK4W,KAAL,CAAW2kC,QAAX,IAAqB,EAA/B,CAAnB;AACA,aAAKD,WAAL,CAAiBrsD,MAAjB,GAA0B,IAA1B;AACH;AACJ;;AAED,WAAO,KAAKqsD,WAAZ;AACH;;AAED,QAAMF,cAAN,CAAqBrsE,EAArB,EAAwB;AAEpB,QAAI,CAAC,KAAK4qE,UAAV,EACI,OAAOtrC,gBAAOrd,IAAP,CAAY;AAACsd,MAAAA,GAAG,EAAE,GAAE,KAAK70B,GAAI;AAAjB,KAAZ,EAAmD4lB,OAAnD,CAA2DtwB,EAA3D,CAAP;;AAEJ,QAAI6vB,OAAO,GAAG9X,CAAC,IAAE;AACb;AACA;AACAd,MAAAA,UAAU,CAAC,MAAI;AACX,aAAKhW,KAAL,GAAa,KAAK2pE,UAAL,CAAgB3pE,KAA7B;AACH,OAFS,CAAV;AAGH,KAND,CALoB,CAapB;;;AACA,QAAI4vB,gBAAJ,CAAY7wB,EAAZ,EAAgB,KAAK4qE,UAArB,EAAiC;AAC7B/6C,MAAAA,OAAO,EAAEA;AADoB,KAAjC;AAGH;;AAED67C,EAAAA,UAAU,CAACr3D,IAAD,EAAM;AACZ,WAAO,IAAI5O,OAAJ,CAAYC,OAAO,IAAE;AAExB;AACA,UAAI,CAAC,KAAK4nC,QAAV,EAAqB,OAAO5nC,OAAO,CAAC2O,IAAD,CAAd;AACrB,UAAI,CAAC,KAAKw3D,QAAV,EAAqB,OAAOnmE,OAAO,CAAC2O,IAAD,CAAd;AACrB,UAAI,KAAKu3D,IAAT,EAAgB,OAAOlmE,OAAO,CAAC2O,IAAD,CAAd;AAEhB,UAAI/R,GAAG,GAAG,KAAKrB,KAAf;AACAoT,MAAAA,IAAI,GAAGA,IAAI,CAAC6L,MAAL,CAAYqS,CAAC,IAAE,KAAKs5C,QAAL,CAAc92D,IAAd,CAAmB,KAAKjN,MAAL,CAAYw9B,IAA/B,EAAqC/S,CAArC,EAAwCjwB,GAAxC,EAA6C,KAAKoI,GAAlD,CAAf,CAAP;AACAhF,MAAAA,OAAO,CAAC2O,IAAD,CAAP;AACH,KAVM,CAAP;AAWH;;AAnNe;;;AAuNpB,+BAAQ+1D,OAAO,CAAC3jE,SAAhB;AACA,+BAAQ0kE,MAAM,CAAC1kE,SAAf;;;;;;;;;AC7eA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMgmE,KAAN,SAAoBl+C,GAApB,CAAwB;AAEnC,MAAI87C,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK3/D,GAAf,GAAmB,OAA1B;AAAkC;;AAEnD,MAAIzJ,KAAJ,GAAW;AACP;AACH,QAAI,KAAK4kE,OAAL,KAAiBzxD,SAArB,EAAgC;AAClC,WAAKyxD,OAAL,GAAe,KAAKn7D,GAAL,IAAYtE,IAAI,CAACC,KAAL,CAAWsO,YAAY,CAACL,OAAb,CAAqB,KAAK+1D,SAA1B,CAAX,CAAZ,IAAgE,EAA/E;AACM;;AAED,WAAO,KAAKxE,OAAZ;AACH;;AAED,MAAI5kE,KAAJ,CAAUqB,GAAV,EAAc;AAEV,QAAIirC,SAAS,GAAGnnC,IAAI,CAACoO,SAAL,CAAe,KAAKqxD,OAApB,KAAgCz/D,IAAI,CAACoO,SAAL,CAAelS,GAAf,CAAhD;AAEA,SAAKujE,OAAL,GAAevjE,GAAf;;AAEA,QAAI,KAAKoI,GAAT,EAAc;AACV,UAAIpI,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAI8R,SAA1B,EACIO,YAAY,CAACJ,UAAb,CAAwB,KAAK81D,SAA7B,EADJ,KAGI11D,YAAY,CAACF,OAAb,CAAqB,KAAK41D,SAA1B,EAAqCjkE,IAAI,CAACoO,SAAL,CAAelS,GAAf,CAArC;AACP;;AAED,SAAKvC,OAAL,CAAaS,IAAI,IAAEA,IAAI,CAAC87B,QAAL,GAAc,KAAKr7B,KAAL,CAAWT,IAAI,CAACkK,GAAhB,CAAjC;AAEA,QAAI6iC,SAAJ,EACI,KAAKonB,IAAL,CAAU,QAAV,EAAoBryD,GAApB;AACP;;AAED,MAAIoqE,KAAJ,GAAW;AACP,WAAOpmE,MAAM,CAACuZ,IAAP,CAAY,KAAK5e,KAAjB,EAAwByG,MAAxB,IAAkC,CAAzC;AACH;;AAEDsjE,EAAAA,GAAG,CAAC3C,KAAD,EAAO;AAEN,QAAIA,KAAK,CAACyD,EAAV,EAAc;AACV,WAAKa,QAAL,GAAgB,IAAhB;AACA,aAAOtE,KAAK,CAACyD,EAAb;AACH;;AAED,QAAIzD,KAAK,CAACuE,QAAV,EAAoB;AAChB,UAAIC,WAAW,GAAG,EAAlB;AAEAxE,MAAAA,KAAK,CAACuE,QAAN,CAAevsE,GAAf,CAAmBqK,GAAG,IAAE;AAEpB,YAAI,CAAC29D,KAAK,CAAC39D,GAAD,CAAV,EAAkB;AAElBmiE,QAAAA,WAAW,CAACniE,GAAD,CAAX,GAAmB;AACfs3C,UAAAA,IAAI,EAAEqmB,KAAK,CAAC39D,GAAD,CAAL,CAAWs3C,IAAX,IAAmB;AADV,SAAnB;AAGH,OAPD;;AASA,UAAI,KAAK0qB,KAAT,EAAgB;AACZ,aAAK7G,OAAL,GAAegH,WAAf;AACAl4D,QAAAA,YAAY,CAACF,OAAb,CAAqB,KAAK41D,SAA1B,EAAqCjkE,IAAI,CAACoO,SAAL,CAAeq4D,WAAf,CAArC;AACH;;AAED,aAAOxE,KAAK,CAACuE,QAAb;AACH;;AAED,QAAIvE,KAAK,IAAI,KAAKyE,WAAlB,EACI;AAEJ,SAAKA,WAAL,GAAmBzE,KAAnB;AAEA,SAAKlP,KAAL;;AAEA,SAAK,IAAIzuD,GAAT,IAAgB29D,KAAhB,EAAuB;AACnB,UAAI7nE,IAAI,GAAG,IAAIusE,IAAJ,CAASriE,GAAT,EAAc29D,KAAK,CAAC39D,GAAD,CAAnB,CAAX;AACAlK,MAAAA,IAAI,CAAC87B,QAAL,GAAgB,KAAKr7B,KAAL,CAAWyJ,GAAX,CAAhB;AACA,WAAKgkB,GAAL,CAAShkB,GAAT,EAAclK,IAAd;AACH;AACJ;;AAEDH,EAAAA,GAAG,CAACmH,EAAD,EAAI;AACH,QAAI3B,IAAI,GAAG,EAAX;AACA,SAAK9F,OAAL,CAAa,CAAC4M,CAAD,EAAIjC,GAAJ,KAAU7E,IAAI,CAAC2D,IAAL,CAAUhC,EAAE,CAACmF,CAAD,EAAIjC,GAAJ,CAAZ,CAAvB;AACA,WAAO7E,IAAP;AACH;;AAEJ,MAAI3B,KAAJ,GAAW;AACJ,QAAIwI,MAAM,GAAG,KAAKA,MAAlB;AACA,WAAOA,MAAM,CAAChF,MAAP,IAAiB,CAAjB,GAAqB,MAArB,GAA8BgF,MAAM,CAACrM,GAAP,CAAWG,IAAI,IAAEA,IAAI,CAAC0D,KAAtB,EAA6BgL,IAA7B,CAAkC,IAAlC,CAArC;AACN;;AAED,MAAIxC,MAAJ,GAAY;AACL,QAAIA,MAAM,GAAG,EAAb;AACApG,IAAAA,MAAM,CAACuZ,IAAP,CAAY,KAAK5e,KAAjB,EAAwBlB,OAAxB,CAAgC2K,GAAG,IAAE;AACjC,UAAI,KAAKjK,GAAL,CAASiK,GAAT,CAAJ,EACIgC,MAAM,CAAClD,IAAP,CAAa,KAAK/I,GAAL,CAASiK,GAAT,CAAb;AACP,KAHD;AAIA,WAAOgC,MAAP;AACN;;AAEE,QAAM0/D,QAAN,CAAepsE,EAAf,EAAkB;AAEd,QAAIyN,MAAM,GAAG,KAAKxM,KAAlB;AAEA,QAAIg7B,IAAI,GAAG,KAAK57B,GAAL,CAASG,IAAI,IAAE;AACtB,aAAO;AACH0D,QAAAA,KAAK,EAAE1D,IAAI,CAAC0D,KADT;AAEH5B,QAAAA,GAAG,EAAE9B,IAAI,CAACkK,GAFP;AAGHwxB,QAAAA,WAAW,EAAE17B,IAAI,CAAC07B,WAHf;AAIH8lB,QAAAA,IAAI,EAAExhD,IAAI,CAACwsE,MAJR;AAKHrhC,QAAAA,MAAM,EAAE,CAAC,qBAAD;AALL,OAAP;AAOH,KARU,CAAX;AAUA1P,IAAAA,IAAI,CAACzyB,IAAL,CAAU;AAAC4yB,MAAAA,IAAI,EAAE,qBAAK;AAAZ,KAAV;AAEA,QAAIE,QAAQ,GAAG,MAAM,IAAIC,aAAJ,CAASN,IAAT,EAAe;AAChC1M,MAAAA,SAAS,EAAE,kBADqB;AAEhCvoB,MAAAA,QAAQ,EAAE,IAFsB;AAGzCs1B,MAAAA,QAAQ,EAAEh2B,MAAM,CAACuZ,IAAP,CAAYpS,MAAZ;AAH+B,KAAf,EAIlB6iB,OAJkB,CAIVtwB,EAJU,EAIN;AAAC2gC,MAAAA,eAAe,EAAC;AAAjB,KAJM,CAArB;AAMA,QAAIrE,QAAQ,KAAK,KAAjB,EAAyB,OAtBX,CAwBd;;AACA,QAAIh6B,GAAG,GAAG,EAAV;AACAg6B,IAAAA,QAAQ,CAACv8B,OAAT,CAAiBuS,CAAC,IAAEhQ,GAAG,CAACgQ,CAAC,CAAChQ,GAAH,CAAH,GAAW;AAAC0/C,MAAAA,IAAI,EAAC1vC,CAAC,CAAC0vC;AAAR,KAA/B;AACN,SAAK/gD,KAAL,GAAaqB,GAAb;AACG;;AAEJ9B,EAAAA,IAAI,CAAC6T,IAAD,EAAM;AACH;AACN,QAAIg0D,KAAK,GAAG,KAAK37D,MAAjB;AAEA,WAAO,IAAIjH,OAAJ,CAAYC,OAAO,IAAE;AAE3B,UAAI2iE,KAAK,CAAC3gE,MAAN,IAAgB,CAApB,EAAwB,OAAOhC,OAAO,CAAC2O,IAAD,CAAd;AAEfA,MAAAA,IAAI,CAAC7T,IAAL,CAAU,UAAUyoE,EAAV,EAAcC,EAAd,EAAkB;AAExB,aAAK,IAAI1oE,IAAT,IAAiB6nE,KAAjB,EAAwB;AAEpB,cAAI/lE,GAAG,GAAG9B,IAAI,CAACysE,WAAL,CAAiBhE,EAAjB,EAAqBC,EAArB,CAAV,CAFoB,CAIpB;;AACA,cAAI5mE,GAAG,KAAK,KAAZ,EACI,OAAOA,GAAP;AACP;AAEJ,OAXD;AAaToD,MAAAA,OAAO,CAAC2O,IAAD,CAAP;AACA,KAlBM,CAAP;AAmBA;;AAtJqC;;;AA2JvC,+BAAQo4D,KAAK,CAAChmE,SAAd;;AAGA,MAAMsmE,IAAN,CAAW;AAEPzrE,EAAAA,WAAW,CAACoJ,GAAD,EAAMm9B,KAAN,EAAY;AACnB,SAAKn9B,GAAL,GAAWA,GAAX;AAEA,QAAI,OAAOm9B,KAAP,IAAgB,UAApB,EACIA,KAAK,GAAG;AAACqlC,MAAAA,MAAM,EAAErlC;AAAT,KAAR;AAEJ,SAAKA,KAAL,GAAaA,KAAb;AACH;;AAED,MAAIqlC,MAAJ,GAAY;AACR,WAAO,KAAKrlC,KAAL,CAAWqlC,MAAX,KAAsB36C,CAAC,IAAEA,CAAC,CAAC9xB,GAAF,CAAM,KAAKiK,GAAX,CAAzB,CAAP;AACH;;AAED,MAAIxG,KAAJ,GAAW;AACP,WAAO,KAAK2jC,KAAL,CAAW3jC,KAAX,IAAoB,uBAAS,KAAKwG,GAAd,CAA3B;AACH;;AAED,MAAIwxB,WAAJ,GAAiB;AACb,WAAO,KAAK2L,KAAL,CAAW3L,WAAX,IAA0B,IAAjC;AACH;;AAED,MAAI8wC,MAAJ,GAAY;AACR,WAAO,KAAK1wC,QAAL,GAAgB,KAAKA,QAAL,CAAc0lB,IAA9B,GAAsC,KAAKna,KAAL,CAAWma,IAAX,IAAmB,KAAhE;AACH;;AAEDirB,EAAAA,WAAW,CAAChE,EAAD,EAAKC,EAAL,EAAQ;AACf,QAAIiE,EAAE,GAAG,KAAKD,MAAL,CAAYjE,EAAZ,CAAT;AACA,QAAImE,EAAE,GAAG,KAAKF,MAAL,CAAYhE,EAAZ,CAAT;AAEA,QAAIiE,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAC,CAAf,GAAmB,CAA1B;AACd,QAAIG,EAAE,GAAGC,EAAT,EAAc,OAAO,KAAKJ,MAAL,GAAc,CAAd,GAAkB,CAAC,CAA1B;AAEd,WAAO,KAAP;AACH;;AAnCM;;;;;;;;;ACpKX;;;;AAEe,MAAMK,OAAN,SAAsB9+C,GAAtB,CAA0B;AAErC,MAAI87C,SAAJ,GAAe;AAAE,WAAO,YAAU,KAAK3/D,GAAf,GAAmB,SAA1B;AAAoC;;AAErDpJ,EAAAA,WAAW,CAACgsE,OAAD,EAAS;AAChB,QAAI,CAACntE,KAAK,CAACoS,OAAN,CAAc+6D,OAAd,CAAL,EACIA,OAAO,GAAGhnE,MAAM,CAACsF,OAAP,CAAe0hE,OAAf,CAAV;AAEJ,UAAMA,OAAN;AACH;;AAEDx/B,EAAAA,EAAE,CAAChmB,KAAD,EAAO;AACL,WAAO3nB,KAAK,CAACC,IAAN,CAAW,KAAKyf,IAAL,EAAX,EAAwBiI,KAAxB,CAAP;AACH;;AAEDi9B,EAAAA,IAAI,GAAE;AACF,QAAIllC,IAAI,GAAG1f,KAAK,CAACC,IAAN,CAAW,KAAKyf,IAAL,EAAX,CAAX;AACA,QAAIiI,KAAK,GAAGjI,IAAI,CAACtH,OAAL,CAAa,KAAK7L,MAAlB,CAAZ;AACAob,IAAAA,KAAK;AAEL,QAAIA,KAAK,IAAIjI,IAAI,CAACnY,MAAlB,EACIogB,KAAK,GAAG,CAAR;AAEJ,SAAKpb,MAAL,GAAc,KAAKohC,EAAL,CAAQhmB,KAAR,CAAd;AACH;;AAED,MAAIpb,MAAJ,GAAY;AACR,WAAO,KAAK6gE,QAAL,IAAiB54D,YAAY,CAACL,OAAb,CAAqB,KAAK+1D,SAA1B,CAAjB,IAAyD,KAAKv8B,EAAL,CAAQ,CAAR,CAAhE;AACH;;AAED,MAAIphC,MAAJ,CAAWpK,GAAX,EAAe;AACX,QAAImL,MAAM,GAAG,KAAKf,MAAlB;AAEA,QAAI,CAAC,KAAK2jC,GAAL,CAAS/tC,GAAT,CAAL,EACIA,GAAG,GAAG,KAAKwrC,EAAL,CAAQ,CAAR,CAAN;AAEJ,SAAKy/B,QAAL,GAAgBjrE,GAAhB;AAEA,QAAI,KAAKoI,GAAL,IAAYpI,GAAhB,EACIqS,YAAY,CAACF,OAAb,CAAqB,KAAK41D,SAA1B,EAAqC,KAAKkD,QAA1C,EADJ,KAGK,IAAI,KAAK7iE,GAAL,IAAY,CAACpI,GAAjB,EACDqS,YAAY,CAACJ,UAAb,CAAwB,KAAK81D,SAA7B;AAEJ,QAAI/nE,GAAG,IAAImL,MAAX,EACI,KAAKknD,IAAL,CAAU,QAAV,EAAoBryD,GAApB;AACP;;AA9CoC;;;AAkDzC,+BAAQ+qE,OAAO,CAAC5mE,SAAhB;;;;;;;;;ACpDA;;AAEA9D,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAwB;AAE7D,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAqDlB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;2CACkB,KAAKoqE,QAAS;;;;;sBAKnC,KAAKnF,KAAL,CAAW37D,MAAX,CAAkBrM,GAAlB,CAAsBG,IAAI,IAAE,qBAAK;mDACJA,IAAK;4CACZA,IAAI,CAACwsE,MAAL,GAAY,eAAZ,GAA4B,aAAc,eAAcxsE,IAAI,CAAC0D,KAAM;;qBAFzF,CAIC;;;;+CAIwB,KAAKmkE,KAAL,CAAW37D,MAAX,CAAkBhF,MAAlB,GAAyB,CAAE;2BAC/C,KAAK2gE,KAAL,CAAW37D,MAAX,CAAkBhF,MAAlB,GAAyB,CAAE;;;;;KAfzC;AAoBP;;AAEFvD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAK4I,MAAL,GAAc,KAAKA,MAAL,CAAY3H,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKijE,KAAL,CAAWvjE,EAAX,CAAc,QAAd,EAAwB,KAAKiI,MAA7B;AACH;;AAEDvI,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK6jE,KAAL,CAAWp4B,GAAX,CAAe,QAAf,EAAyB,KAAKljC,MAA9B;AACH,GAxF4D,CA0F7D;AACA;AACA;AACA;;;AAEAygE,EAAAA,QAAQ,CAAC5nE,CAAD,EAAG;AACP,SAAKyiE,KAAL,CAAW+D,QAAX,CAAoBxmE,CAAC,CAACoH,aAAtB;AACH;;AAjG4D,CAAjE;;eAqGerK,cAAc,CAAClC,GAAf,CAAmB,iBAAnB;;;;;;ACvGf;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,qBAAtB,EAA6C,cAAcE,sBAAd,CAAwB;AAEjE,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;KAAX;AAelB;;AAEFuC,EAAAA,YAAY,GAAE;AACV,SAAKwM,SAAL,CAAetC,GAAf,CAAmB,aAAnB;AACH;;AAED1K,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;6BACI,KAAKqI,IAAL,CAAUu2C,IAAV,GAAe,eAAf,GAA+B,aAAc,YAAW,KAAKjiB,OAAQ;KADrF;AAEP;;AAEFA,EAAAA,OAAO,CAACn6B,CAAD,EAAG;AACNA,IAAAA,CAAC,CAACgC,eAAF;AACA,SAAK6D,IAAL,CAAUu2C,IAAV,GAAiB,CAAC,KAAKv2C,IAAL,CAAUu2C,IAA5B;AACA,SAAKj1C,MAAL;AACH;;AA/BgE,CAArE;;;;;;;;;ACFA;;AAEApK,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAmClB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;8BACK,KAAK8c,MAAL,CAAYotB,QAAS,WAAU,KAAK8+B,QAAS;;8BAE7C,KAAKlsD,MAAL,CAAYhc,KAAM;;sBAE1B,KAAKgc,MAAL,CAAYxc,IAAZ,GAAiB,qBAAK,iBAAgB,KAAKwc,MAAL,CAAYxc,IAAK,aAAvD,GAAoE,EAAG;sBACvE,KAAKwc,MAAL,CAAYsqD,UAAW;;;;KANhC;AAUP;;AAEFrmE,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAK4I,MAAL,GAAc,KAAKA,MAAL,CAAY3H,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAK8a,MAAL,CAAYpb,EAAZ,CAAe,QAAf,EAAyB,KAAKiI,MAA9B,EAHe,CAIf;AACH;;AAEDvI,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK0b,MAAL,CAAY+vB,GAAZ,CAAgB,QAAhB,EAA0B,KAAKljC,MAA/B,EAFkB,CAGlB;AACH;;AAEDq/D,EAAAA,QAAQ,CAACxmE,CAAD,EAAG;AACP,SAAKsa,MAAL,CAAYksD,QAAZ,CAAqBxmE,CAAC,CAACoH,aAAvB;AACH;;AAlE8D,CAAnE;;eAsEerK,cAAc,CAAClC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACxEf;;AACA;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC,cAAcE,sBAAd,CAAwB;AAE5D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B0qE,MAAAA,KAAK,EAAE;AAACxqE,QAAAA,IAAI,EAAEC;AAAP,OADoB;AAE3BonE,MAAAA,OAAO,EAAE;AAACrnE,QAAAA,IAAI,EAAEC;AAAP;AAFkB,KAAP;AAGtB;;AAEF5B,EAAAA,WAAW,GAAE;AACT;AACA,SAAKosE,eAAL,GAAuB,KAAKA,eAAL,CAAqBtoE,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKuoE,cAAL,GAAsB,KAAKA,cAAL,CAAoBvoE,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAED,aAAW/D,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAuBlB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;uCACc,CAAC,KAAKknE,OAAQ;qBAChC,KAAKsD,kBAAmB,IAAG,KAAKtD,OAAQ;;UAEnD,KAAKlC,OAAL,CAAa/nE,GAAb,CAAiB6f,MAAM,IAAE,qBAAK;yCACCA,MAAM,CAACotB,QAAS,YAAWptB,MAAO;SADjE,CAEC;;kFAEuE,KAAK2tD,YAAa;KARvF;AASP;;AAEFD,EAAAA,kBAAkB,GAAE;AAChB,SAAKxF,OAAL,CAAakC,OAAb,GAAuB,KAAvB;AACH;;AAEDuD,EAAAA,YAAY,GAAE;AACV,SAAKzF,OAAL,CAAa/0D,KAAb;AACH;;AAEDlP,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;;AAEA,QAAI,KAAKikE,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAatjE,EAAb,CAAgB,SAAhB,EAA2B,KAAK4oE,eAAhC;AACA,WAAKtF,OAAL,CAAatjE,EAAb,CAAgB,QAAhB,EAA0B,KAAK6oE,cAA/B;AACH;AAEJ;;AAEDnpE,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;;AAEA,QAAI,KAAK4jE,OAAT,EAAkB;AACd,WAAKA,OAAL,CAAan4B,GAAb,CAAiB,SAAjB,EAA4B,KAAKy9B,eAAjC;AACA,WAAKtF,OAAL,CAAan4B,GAAb,CAAiB,QAAjB,EAA2B,KAAK09B,cAAhC;AACH;AACJ;;AAEDD,EAAAA,eAAe,CAAChmE,MAAD,EAAQ;AACnB,SAAK4iE,OAAL,GAAe5iE,MAAf;AACH;;AAEDimE,EAAAA,cAAc,GAAE;AACZ,SAAK5gE,MAAL;AACH;;AAlF2D,CAAhE;;eAsFepK,cAAc,CAAClC,GAAf,CAAmB,gBAAnB;;;;;;;;;;;ACzFf;;;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAckrE,YAAd,CAAiB;AAExDlqE,EAAAA,YAAY,GAAE;AACV,SAAKmqE,OAAL;AACA,SAAKlqE,gBAAL,CAAsB,OAAtB,EAA+B+B,CAAC,IAAE;AAC9B,WAAK0nE,OAAL,CAAavoB,IAAb;AACH,KAFD;AAGH;;AAEDgpB,EAAAA,OAAO,GAAE;AACL,SAAKrqE,IAAL,GAAY,KAAK4pE,OAAL,CAAa7sE,GAAb,CAAiB,KAAK6sE,OAAL,CAAa5gE,MAA9B,CAAZ;AACH;;AAEDvI,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAK4pE,OAAL,GAAe,KAAKA,OAAL,CAAa3oE,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKkoE,OAAL,CAAaxoE,EAAb,CAAgB,QAAhB,EAA0B,KAAKipE,OAA/B;AACH;;AAEDvpE,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK8oE,OAAL,CAAar9B,GAAb,CAAiB,QAAjB,EAA2B,KAAK89B,OAAhC;AACH;;AAtBuD,CAA5D;;eA0BeprE,cAAc,CAAClC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;AC5Bf;;AACA;;AACA;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C,cAAcE,sBAAd,CAAwB;AAE/D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3BkE,MAAAA,WAAW,EAAE;AAAChE,QAAAA,IAAI,EAAEQ;AAAP;AADc,KAAP;AAEtB;;AAEFnC,EAAAA,WAAW,GAAE;AACT;AACA,SAAK2F,WAAL,GAAmB,QAAnB;AACH;;AAED,aAAW5F,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAsClB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;uCAEc,KAAK6D,WAAY;6BAC3B,KAAKm7B,KAAM;;KAH3B;AAKP;;AAEFA,EAAAA,KAAK,GAAE;AACH,SAAK1gC,UAAL,CAAgBd,aAAhB,CAA8B,cAA9B,EAA8CwhC,KAA9C;AACH;;AAED,MAAInhC,KAAJ,GAAW;AACP,SAAK+sE,SAAL,GAAiB,KAAKA,SAAL,IAAkB,KAAKtsE,UAAL,CAAgBd,aAAhB,CAA8B,YAA9B,CAAnC;AACA,WAAO,KAAKotE,SAAL,CAAet1B,YAAtB;AACH;;AAjE8D,CAAnE;;eAqEe/1C,cAAc,CAAClC,GAAf,CAAmB,mBAAnB;;;;;;;;;;;ACzEf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC,cAAcE,sBAAd,CAAwB;AAE5D,aAAWC,UAAX,GAAuB;AAAC,WAAO;AAC3B0qE,MAAAA,KAAK,EAAE;AAACxqE,QAAAA,IAAI,EAAEC;AAAP;AADoB,KAAP;AAEtB;;AAEF5B,EAAAA,WAAW,GAAE;AACT;AACA,SAAKmsE,KAAL,GAAa,CAAb;AACH;;AAED,aAAWpsE,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA8DlB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;;6BAGI,KAAKqqE,KAAM;;;;cAI1B,CAAC,KAAKpF,KAAN,GAAY,EAAZ,GAAe,qBAAK;0CACQ,KAAKA,KAAM;aACvC;;cAEA,CAAC,KAAKD,OAAN,GAAc,EAAd,GAAiB,qBAAK;2CACO,KAAKA,OAAQ;aAC1C;;;;;;cAMA,CAAC,KAAKA,OAAN,IAAe,CAAC,KAAKA,OAAL,CAAaiD,UAA7B,GAAwC,EAAxC,GAA2C,qBAAK;0CACpB,KAAKz5B,SAAU,gBAAe,KAAKw2B,OAAL,CAAa8C,aAAb,CAA2BjkE,WAAY;aACjG;;cAEA,CAAC,KAAKqmE,OAAN,GAAc,EAAd,GAAiB,qBAAK;8CACU,KAAKA,OAAQ;aAC7C;;;;;;;;KAzBD;AAiCP,GA5G0D,CA8G5D;;;AACAW,EAAAA,QAAQ,CAACjuE,EAAD,EAAKwwB,IAAL,EAAU;AACd,QAAIK,gBAAJ,CAAY7wB,EAAZ,EAAgB,IAAhB,EAAsBwwB,IAAtB;AACH;;AAEDohB,EAAAA,SAAS,CAAChsC,CAAD,EAAG;AACR,QAAIwD,MAAM,GAAGxD,CAAC,CAACwD,MAAf;AACA,QAAIyF,EAAE,GAAG,KAAKu5D,OAAL,CAAa8C,aAAb,CAA2BvxB,KAApC;AAEApN,IAAAA,YAAY,CAAC,KAAK2hC,eAAN,CAAZ;AACA,SAAKA,eAAL,GAAuBj3D,UAAU,CAACc,CAAC,IAAE;AAEjC,UAAI+yB,IAAI,GAAG1hC,MAAM,CAACnI,KAAlB;AAEA,UAAI6pC,IAAI,IAAI,KAAKs9B,OAAL,CAAat9B,IAAzB,EAAgC;AAEhC,WAAKs9B,OAAL,CAAat9B,IAAb,GAAoBA,IAApB;AAEA,WAAKrhC,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,qBAAhB,EAAuC;AACtDC,QAAAA,OAAO,EAAE,IAD6C;AAEtDC,QAAAA,QAAQ,EAAE,IAF4C;AAGtDC,QAAAA,MAAM,EAAE;AACJihC,UAAAA,IAAI,EAAEA;AADF;AAH8C,OAAvC,CAAnB;AAQH,KAhBgC,EAgB9Bj8B,EAhB8B,CAAjC;AAiBH;;AAzI2D,CAAhE;;eA6IelM,cAAc,CAAClC,GAAf,CAAmB,gBAAnB;;;;;;ACrJf;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,sBAAtB,EAA8C,cAAcE,sBAAd,CAAwB;AAElE,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAkClB;;AAEF,MAAI+oC,SAAJ,CAAcA,SAAd,EAAwB;AACpB,SAAK+jC,WAAL,GAAmB/jC,SAAnB,CADoB,CAGpB;;AACAA,IAAAA,SAAS,CAACtlC,EAAV,CAAa,OAAb,EAAsBc,CAAC,IAAE;AACrB,WAAKwK,SAAL,CAAetC,GAAf,CAAmB,MAAnB;AACA,WAAKf,MAAL;AACH,KAHD;AAKAq9B,IAAAA,SAAS,CAACtlC,EAAV,CAAa,KAAb,EAAoBc,CAAC,IAAE;AACnB,WAAKwK,SAAL,CAAenQ,MAAf,CAAsB,MAAtB;AACH,KAFD;AAIAmqC,IAAAA,SAAS,CAACtlC,EAAV,CAAa,QAAb,EAAuBwY,MAAM,IAAE;AAC3B,WAAKvQ,MAAL;AACH,KAFD;AAGH;;AAED,MAAIq9B,SAAJ,GAAe;AAAE,WAAO,KAAK+jC,WAAZ;AAAyB;;AAE1C/qE,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;UACf,KAAKgnC,SAAL,GAAe,qBAAK;;;mEAGqC,KAAK9uB,GAAI;;;kBAG1D,KAAK8uB,SAAL,CAAe9sB,MAAf,CAAsBvM,IAAK;;;;;;;;;SANnC,GAeA,EAAG;KAhBA;AAiBP;;AAEFuK,EAAAA,GAAG,GAAE;AACD,SAAK8uB,SAAL,CAAe9uB,GAAf;AACH;;AA/EiE,CAAtE;;;;;;;;;ACFA;;AACA;;AAEA3Y,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC,cAAcE,sBAAd,CAAyB;AAE9DsrE,EAAAA,gBAAgB,GAAE;AAAE,WAAO,IAAP;AAAa,GAF6B,CAI9D;AACA;AACA;AACA;AACA;;;AAEA9sE,EAAAA,WAAW,GAAE;AACT;AACA,SAAK4mE,MAAL,GAAc,CAAd;AACA,SAAK7kC,SAAL,GAAiB,GAAjB;AACH;;AAEDz/B,EAAAA,YAAY,GAAE;AACV;AACA,QAAIyqE,WAAW,GAAG,KAAKhsE,YAAL,CAAkB,eAAlB,MAAuC,OAAzD;AACA,SAAKgR,KAAL,CAAWg7D,WAAX;AACH;;AAEDlqE,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,SAAKN,gBAAL,CAAsB,QAAtB,EAAgC,KAAKyqE,QAArC,EAA+C,IAA/C;AACH;;AAED9pE,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,SAAK4D,mBAAL,CAAyB,QAAzB,EAAmC,KAAKkmE,QAAxC,EAAkD,IAAlD;AACH;;AAED,QAAMj7D,KAAN,CAAYk7D,cAAc,GAAC,IAA3B,EAAgC;AAC5B,SAAKrG,MAAL,GAAc,CAAd;AACA,SAAK7rD,SAAL,GAAiB,CAAjB;AACA,SAAKmyD,SAAL,GAAiB,IAAjB;AAEA,QAAID,cAAJ,EACI,MAAM,KAAKE,UAAL,CAAgB;AAACtV,MAAAA,KAAK,EAAC;AAAP,KAAhB,CAAN,CADJ,KAGI,KAAKuV,UAAL,CAAgB,EAAhB,EAAoB;AAACvV,MAAAA,KAAK,EAAC;AAAP,KAApB;AACP;;AAEDmV,EAAAA,QAAQ,GAAE;AAEN,QAAIzgE,KAAK,GAAG,KAAK8gE,YAAL,GAAoB,KAAKtyD,SAAzB,GAAqC,KAAKjL,YAAtD;AACA,QAAIw9D,IAAI,GAAG,CAAC,KAAKC,YAAN,IAAsBhhE,KAAK,GAAG,KAAKghE,YAA9C;AAEA,SAAKA,YAAL,GAAoBhhE,KAApB;AAEA,QAAI,CAAC+gE,IAAD,IAAS/gE,KAAK,IAAI,CAAtB,EAA0B;AAE1B,QAAIA,KAAK,IAAI,KAAKw1B,SAAlB,EACI,KAAKorC,UAAL;AACP;;AAED,QAAMA,UAAN,CAAiB;AAACtV,IAAAA,KAAK,GAAC;AAAP,MAAc,EAA/B,EAAkC;AAE9B,QAAI,CAAC,KAAK2V,UAAV,EAAuB;AAEvB,QAAI,KAAK/G,SAAT,EAAqB;AAErB,QAAIG,MAAM,GAAG,KAAKA,MAAlB;AAEA,SAAKH,SAAL,GAAiB,IAAjB;AACA,QAAIF,MAAM,GAAG,MAAM,KAAKiH,UAAL,CAAgB9jC,KAAhB,CAAsBk9B,MAAtB,CAAnB;AACA,SAAKwG,UAAL,CAAgB7G,MAAhB,EAAwB;AAAC1O,MAAAA,KAAK,EAACA;AAAP,KAAxB;AACA,SAAK4O,SAAL,GAAiB,IAAjB;;AAEA,QAAIG,MAAM,IAAI,CAAd,EAAiB;AACb,WAAKz+D,aAAL,CAAmB,IAAIC,WAAJ,CAAgB,iBAAhB,EAAkC;AACjDG,QAAAA,MAAM,EAAE;AAACwK,UAAAA,IAAI,EAAE,KAAKy6D;AAAZ,SADyC;AAEjDnlE,QAAAA,OAAO,EAAE,IAFwC;AAGjDC,QAAAA,QAAQ,EAAE;AAHuC,OAAlC,CAAnB;AAKH;AACJ,GA5E6D,CA8E9D;;;AAEA8kE,EAAAA,UAAU,CAAC7G,MAAD,EAAS;AAAC1O,IAAAA,KAAK,GAAC;AAAP,MAAc,EAAvB,EAA0B;AAEhC,SAAK+O,MAAL,IAAeL,MAAM,CAACngE,MAAtB;AAEA,QAAIyxD,KAAJ,EACI,KAAKv5D,SAAL,GAAiB,EAAjB;;AAEJ,QAAI,KAAKsoE,MAAL,IAAe,CAAnB,EAAsB;AAClB,UAAI6G,SAAS,GAAG,KAAKziE,KAAL,IAAc,KAAKA,KAAL,EAA9B;AACA,UAAIyiE,SAAJ,EACI,KAAKptE,WAAL,CAAiBotE,SAAjB;AACJ;AACH;;AAEDlH,IAAAA,MAAM,CAAC9nE,OAAP,CAAe6uC,KAAK,IAAE;AAElB,UAAIhlB,OAAO,GAAG,KAAKA,OAAL,IAAgB,KAAKA,OAAL,CAAa,KAAK4kD,SAAlB,EAA6B5/B,KAA7B,CAA9B;;AACA,UAAIhlB,OAAJ,EAAa;AACT,aAAKjoB,WAAL,CAAiBioB,OAAjB;AACH;;AAED,UAAIuf,GAAG,GAAG,KAAKA,GAAL,IAAY,KAAKA,GAAL,CAASyF,KAAT,CAAtB;;AACA,UAAIzF,GAAJ,EAAS;AACL,aAAKxnC,WAAL,CAAiBwnC,GAAjB;AACH;;AAED,WAAKqlC,SAAL,GAAiB5/B,KAAjB;AACH,KAbD;AAeA33B,IAAAA,UAAU,CAAC,KAAK+3D,qBAAL,CAA2B5pE,IAA3B,CAAgC,IAAhC,CAAD,CAAV;AACH;;AAED4pE,EAAAA,qBAAqB,GAAE;AACnB,QAAI,KAAKL,YAAL,IAAqB,KAAKv9D,YAA9B,EAA4C;AACxC,WAAKq9D,UAAL;AACH;AACJ;;AApH6D,CAAlE;;eAwHe9rE,cAAc,CAAClC,GAAf,CAAmB,iBAAnB;;;;;;ACxHf;;AAHA;;;AAKAqC,uBAAW2D,SAAX,CAAqBg6B,CAArB,GAAyB,UAASjI,KAAT,EAAe;AACpC,SAAO,KAAK53B,aAAL,CAAmB43B,KAAnB,CAAP;AACH,CAFD;;AAIA11B,uBAAW2D,SAAX,CAAqBwoE,IAArB,GAA4B,UAASz2C,KAAT,EAAe;AACvC,SAAO,KAAK14B,gBAAL,CAAsB04B,KAAtB,CAAP;AACH,CAFD;;AAIA11B,uBAAW2D,SAAX,CAAqBi6B,EAArB,GAA0B,UAASlI,KAAT,EAAe;AACrC,SAAO,KAAK92B,UAAL,GAAkB,KAAKA,UAAL,CAAgBd,aAAhB,CAA8B43B,KAA9B,CAAlB,GAAyD,KAAK53B,aAAL,CAAmB43B,KAAnB,CAAhE;AACH,CAFD;;AAIA11B,uBAAW2D,SAAX,CAAqByoE,KAArB,GAA6B,UAAS12C,KAAT,EAAe;AACxC,SAAO,KAAK92B,UAAL,GAAkB,KAAKA,UAAL,CAAgB5B,gBAAhB,CAAiC04B,KAAjC,CAAlB,GAA4D,KAAK14B,gBAAL,CAAsB04B,KAAtB,CAAnE;AACH,CAFD;;;;;;;;;ACjBA;;;;AAEA,MAAMjL,OAAO,IAAG,kBAAkBzpB,MAArB,CAAb;;AAEA,MAAMqrE,SAAN,SAAwB5gD,GAAxB,CAA4B;AAExB,MAAIs5C,MAAJ,GAAY;AACR,WAAO1nE,KAAK,CAACC,IAAN,CAAW,KAAK+zB,MAAL,EAAX,CAAP;AACH;;AAED,MAAIi7C,QAAJ,GAAc;AACV,WAAOjvE,KAAK,CAACC,IAAN,CAAW,KAAKyf,IAAL,EAAX,CAAP;AACH;;AAED,MAAInY,MAAJ,GAAY;AAAE,WAAO,KAAKqJ,IAAZ;AAAkB;;AAVR;;AAa5B,MAAMs+D,cAAc,GAAE,CAClB,WADkB,EAElB,aAFkB,EAGlB,WAHkB,EAIlB,YAJkB,EAKlB,WALkB,EAMlB,OANkB,CAAtB;;AASe,MAAMvZ,SAAN,CAAgB;AAE3Bx0D,EAAAA,WAAW,CAACgkC,IAAD,EAAOgqC,WAAP,EAAoB9+C,IAAI,GAAC,EAAzB,EAA4B;AAEnC,SAAKA,IAAL,GAAYlqB,MAAM,CAACwqB,MAAP,CAAc;AACtByN,MAAAA,OAAO,EAAE,IADa;AAEtBgxC,MAAAA,YAAY,EAAE,YAFQ;AAGtBC,MAAAA,gBAAgB,EAAE,IAHI;AAItBC,MAAAA,QAAQ,EAAE,IAJY;AAKtBC,MAAAA,mBAAmB,EAAE,EALC;AAMtBC,MAAAA,sBAAsB,EAAE,CANF;AAOtBC,MAAAA,OAAO,EAAE,MAAI,CAAE,CAPO;AAQtBC,MAAAA,KAAK,EAAE,MAAI,CAAE,CARS;AAStBxhD,MAAAA,QAAQ,EAAE/Q,MAAM,IAAE,CAAE;AATE,KAAd,EAUTkT,IAVS,CAAZ;AAYA,SAAK2jC,MAAL,GAAc;AACV4O,MAAAA,IAAI,EAAEx1C,OAAO,GAAG,YAAH,GAAkB,WADrB;AAEVs1C,MAAAA,EAAE,EAAEt1C,OAAO,GAAG,UAAH,GAAgB,SAFjB;AAGVuiD,MAAAA,IAAI,EAAEviD,OAAO,GAAG,WAAH,GAAiB;AAHpB,KAAd;AAMA,QAAI,KAAKiD,IAAL,CAAU+N,OAAd,EACI,KAAK/N,IAAL,CAAU+N,OAAV,CAAkB6L,SAAlB,GAA8B,IAA9B;AAEJ,SAAK9sB,MAAL,GAAc,IAAI6xD,SAAJ,EAAd;AAEA,SAAK7pC,IAAL,GAAYA,IAAZ;AACA,SAAKgqC,WAAL,GAAmBA,WAAW,CAACnsD,WAAZ,EAAnB;AAEA,SAAK4sD,QAAL,GAAgB,KAAKv/C,IAAL,CAAU++C,YAA1B,CA5BmC,CA8BnC;;AACA,SAAK3nE,eAAL,GAAuB,KAAKA,eAAL,CAAqBxC,IAArB,CAA0B,IAA1B,CAAvB,CA/BmC,CAgCnC;;AACA,SAAKkpE,QAAL,GAAgB,KAAKA,QAAL,CAAclpE,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAK0qB,SAAL,GAAiB,KAAKA,SAAL,CAAe1qB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAK4qE,WAAL,GAAmB,KAAKA,WAAL,CAAiB5qE,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK6qE,SAAL,GAAiB,KAAKA,SAAL,CAAe7qE,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAK8qE,WAAL,GAAmB,KAAKA,WAAL,CAAiB9qE,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAED,MAAI+qE,IAAJ,GAAU;AAAE,WAAO,KAAKC,IAAL,KAAc,IAArB;AAA2B;;AAEvCC,EAAAA,KAAK,CAACzqE,CAAD,EAAG;AAEJ,QAAI,KAAKuqE,IAAT,EAAgB;AAEhB,SAAKC,IAAL,GAAY,IAAZ;AAEA,SAAKE,UAAL,CAAgB1qE,CAAhB,EANI,CAQJ;;AACA,QAAIA,CAAJ,EAAO;AACH,WAAK2qE,SAAL,GAAiB,IAAjB;AACA,WAAKC,UAAL,GAAkB,KAAKC,WAAL,CAAiB7qE,CAAjB,CAAlB;AACA,WAAK2yC,MAAL,CAAY,KAAKi4B,UAAjB;AACH;;AAED,SAAKhgD,IAAL,CAAUo/C,OAAV;AACA,SAAKjb,IAAL,CAAU,OAAV;AACH;;AAEDr5C,EAAAA,GAAG,GAAE;AACD,SAAK80D,IAAL,GAAY,KAAZ;AACA,SAAKM,YAAL;AACA,QAAI;AAACnlE,MAAAA;AAAD,QAAU,KAAKolE,QAAL,EAAd;AACAplE,IAAAA,KAAK,CAACxL,OAAN,CAAc0L,IAAI,IAAE;AAChB,WAAKmlE,SAAL,CAAenlE,IAAf;AACH,KAFD;AAIA,SAAK+kB,IAAL,CAAUq/C,KAAV;AACA,SAAKlb,IAAL,CAAU,KAAV;AACH;;AAED2b,EAAAA,UAAU,CAAC1qE,CAAD,EAAG;AACT;AACA;AACAypE,IAAAA,cAAc,CAACtvE,OAAf,CAAuBshE,GAAG,IAAE;AACxB,WAAK/7B,IAAL,CAAUzhC,gBAAV,CAA2Bw9D,GAA3B,EAAgC,KAAKz5D,eAArC,EAAsD,IAAtD;AACH,KAFD;AAIA9D,IAAAA,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKisB,SAAxC;AACA,SAAKwV,IAAL,CAAUzhC,gBAAV,CAA2B,QAA3B,EAAqC,KAAKyqE,QAA1C,EAAoD,IAApD;AACA,SAAKhpC,IAAL,CAAUzhC,gBAAV,CAA2B,KAAKswD,MAAL,CAAY4O,IAAvC,EAA6C,KAAKiN,WAAlD,EAA+D,IAA/D;AACA,SAAK1qC,IAAL,CAAUzhC,gBAAV,CAA2B,KAAKswD,MAAL,CAAY0O,EAAvC,EAA2C,KAAKoN,SAAhD,EAA2D,IAA3D;AAEA,QAAIrqE,CAAC,IAAIA,CAAC,CAACiE,MAAP,IAAiBjE,CAAC,CAACiE,MAAF,CAAS1C,QAA9B,EACI,KAAKm+B,IAAL,CAAUzhC,gBAAV,CAA2B,KAAKswD,MAAL,CAAY2b,IAAvC,EAA6C,KAAKI,WAAlD,EAA+D,IAA/D;AACP;;AAEDQ,EAAAA,YAAY,GAAE;AACVrB,IAAAA,cAAc,CAACtvE,OAAf,CAAuBshE,GAAG,IAAE;AACxB,WAAK/7B,IAAL,CAAUl9B,mBAAV,CAA8Bi5D,GAA9B,EAAmC,KAAKz5D,eAAxC,EAAyD,IAAzD;AACH,KAFD;AAIA9D,IAAAA,MAAM,CAACsE,mBAAP,CAA2B,SAA3B,EAAsC,KAAK0nB,SAA3C;AACA,SAAKwV,IAAL,CAAUl9B,mBAAV,CAA8B,QAA9B,EAAwC,KAAKkmE,QAA7C,EAAuD,IAAvD;AACA,SAAKhpC,IAAL,CAAUl9B,mBAAV,CAA8B,KAAK+rD,MAAL,CAAY2b,IAA1C,EAAgD,KAAKI,WAArD,EAAkE,IAAlE;AACA,SAAK5qC,IAAL,CAAUl9B,mBAAV,CAA8B,KAAK+rD,MAAL,CAAY4O,IAA1C,EAAgD,KAAKiN,WAArD,EAAkE,IAAlE;AACA,SAAK1qC,IAAL,CAAUl9B,mBAAV,CAA8B,KAAK+rD,MAAL,CAAY0O,EAA1C,EAA8C,KAAKoN,SAAnD,EAA8D,IAA9D;AACH;;AAEDU,EAAAA,QAAQ,CAAChiE,KAAD,EAAQ2M,GAAR,EAAY;AAChB,QAAI/P,KAAK,GAAGpL,KAAK,CAACC,IAAN,CAAW,KAAKklC,IAAL,CAAUxlC,gBAAV,CAA2B,KAAKwvE,WAAhC,CAAX,CAAZ;AAEA,QAAI,OAAO3gE,KAAP,KAAiB,QAArB,EACIA,KAAK,GAAGpD,KAAK,CAACoD,KAAD,CAAb;AAEJ,QAAI,OAAO2M,GAAP,KAAe,QAAnB,EACIA,GAAG,GAAG/P,KAAK,CAAC+P,GAAD,CAAX;AAEJ,QAAIu1D,QAAQ,GAAG,KAAKN,SAAL,IAAgB,KAAKA,SAAL,CAAe5hE,KAA9C;AACA,QAAImiE,MAAM,GAAG,KAAKP,SAAL,IAAgB,KAAKA,SAAL,CAAej1D,GAA5C;;AAEA,QAAI3M,KAAK,IAAI2M,GAAb,EAAkB;AACd,UAAIy1D,UAAU,GAAGxlE,KAAK,CAACgN,OAAN,CAAc5J,KAAd,CAAjB;AACA,UAAIqiE,QAAQ,GAAGzlE,KAAK,CAACgN,OAAN,CAAc+C,GAAd,CAAf;;AAEA,UAAIy1D,UAAU,IAAI,CAAC,CAAf,IAAoBC,QAAQ,IAAI,CAAC,CAArC,EAAwC;AACpCriE,QAAAA,KAAK,GAAG,IAAR;AACA2M,QAAAA,GAAG,GAAG,IAAN;AACH,OAHD,MAGK;AACD3M,QAAAA,KAAK,GAAGoiE,UAAU,GAAGC,QAAb,GAAwBD,UAAxB,GAAqCC,QAA7C;AACA11D,QAAAA,GAAG,GAAGy1D,UAAU,GAAGC,QAAb,GAAwBA,QAAxB,GAAmCD,UAAzC;AACH;;AAED,WAAKR,SAAL,GAAiB;AAAChlE,QAAAA,KAAD;AAAQoD,QAAAA,KAAR;AAAe2M,QAAAA;AAAf,OAAjB;AACH;;AAED,WAAO;AAAC/P,MAAAA,KAAD;AAAQoD,MAAAA,KAAR;AAAe2M,MAAAA,GAAf;AAAoBu1D,MAAAA,QAApB;AAA8BC,MAAAA;AAA9B,KAAP;AACH;;AAEDv4B,EAAAA,MAAM,CAAC9sC,IAAD,EAAOwlE,SAAP,EAAiB;AAEnB,QAAIxlE,IAAI,YAAYiuC,KAApB,EACIjuC,IAAI,GAAG,KAAKglE,WAAL,CAAiBhlE,IAAjB,CAAP;AAEJ,QAAI,CAACA,IAAL,EAAY;;AAEZ,QAAI,CAACwlE,SAAL,EAAgB;AACZ,WAAKC,aAAL,CAAmBzlE,IAAnB;;AAEA,WAAK+kB,IAAL,CAAUnC,QAAV,CAAmB,KAAK/Q,MAAxB;AACA,WAAKq3C,IAAL,CAAU,QAAV,EAAoB,KAAKr3C,MAAzB;AAEA,UAAI,KAAKkT,IAAL,CAAUg/C,gBAAV,IAA8B,KAAKlyD,MAAL,CAAYvM,IAAZ,IAAoB,CAAtD,EACIkG,UAAU,CAAC,MAAI,KAAKqE,GAAL,EAAL,CAAV,CAPQ,CAOmB;;AAE/B;AACH;;AAED,QAAI;AAAC/P,MAAAA,KAAD;AAAQoD,MAAAA,KAAR;AAAe2M,MAAAA,GAAf;AAAoBu1D,MAAAA,QAApB;AAA8BC,MAAAA;AAA9B,QAAwC,KAAKH,QAAL,CAAcM,SAAd,EAAyBxlE,IAAzB,CAA5C;AACA,QAAI0lE,YAAY,GAAGF,SAAS,CAACvuE,YAAV,CAAuB,KAAKqtE,QAA5B,CAAnB;AAEAxkE,IAAAA,KAAK,CAACxL,OAAN,CAAc,CAACqxE,KAAD,EAAO/mE,CAAP,KAAW;AACrB,UAAIA,CAAC,IAAIsE,KAAL,IAActE,CAAC,IAAIiR,GAAvB,EACG61D,YAAY,GAAG,KAAKE,OAAL,CAAaD,KAAb,CAAH,GAAyB,KAAKR,SAAL,CAAeQ,KAAf,CAArC,CADH,KAGK,IAAIP,QAAQ,KAAK,KAAb,IAAsBC,MAAM,KAAK,KAAjC,IAA0CzmE,CAAC,IAAIwmE,QAA/C,IAA2DxmE,CAAC,IAAIymE,MAApE,EACD,KAAKF,SAAL,CAAeQ,KAAf;AACP,KAND;AAQA,SAAKzc,IAAL,CAAU,QAAV,EAAoB,KAAKr3C,MAAzB;AAEA,QAAI,KAAKkT,IAAL,CAAUg/C,gBAAV,IAA8B,KAAKlyD,MAAL,CAAYvM,IAAZ,IAAoB,CAAtD,EACIkG,UAAU,CAAC,MAAI,KAAKqE,GAAL,EAAL,CAAV,CAjCe,CAiCY;AAClC;;AAED41D,EAAAA,aAAa,CAACzlE,IAAD,EAAM;AACf,QAAIA,IAAI,CAAC/I,YAAL,CAAkB,KAAKqtE,QAAvB,CAAJ,EACI,KAAKa,SAAL,CAAenlE,IAAf,EADJ,KAGI,KAAK4lE,OAAL,CAAa5lE,IAAb;AACP;;AAED4lE,EAAAA,OAAO,CAAC5lE,IAAD,EAAM;AACTA,IAAAA,IAAI,CAACzK,YAAL,CAAkB,KAAK+uE,QAAvB,EAAiC,EAAjC;AACA,SAAKzyD,MAAL,CAAYoR,GAAZ,CAAgBjjB,IAAhB,EAAsBA,IAAI,CAACmjC,KAAL,IAAYnjC,IAAlC;AACH;;AAEDmlE,EAAAA,SAAS,CAACnlE,IAAD,EAAM;AACXA,IAAAA,IAAI,CAACzJ,eAAL,CAAqB,KAAK+tE,QAA1B;AACA,SAAKzyD,MAAL,CAAY2d,MAAZ,CAAmBxvB,IAAnB;AACH;;AAED7D,EAAAA,eAAe,CAAChC,CAAD,EAAG;AACdA,IAAAA,CAAC,CAACqD,cAAF;AACArD,IAAAA,CAAC,CAAC0rE,wBAAF;AACA1rE,IAAAA,CAAC,CAACgC,eAAF;AACH;;AAED0mE,EAAAA,QAAQ,GAAE;AACN,QAAI/gD,OAAO,IAAI,CAAC,KAAKgkD,WAAjB,IAAgC,CAAC,KAAKhB,SAA1C,EAAqD;AACjD,WAAKiB,UAAL,GAAkB,IAAIjjE,IAAJ,GAAWC,OAAX,EAAlB;AACH;AACJ;;AAEDshB,EAAAA,SAAS,CAAClqB,CAAD,EAAG;AACR,QAAI,KAAK4qB,IAAL,CAAUi/C,QAAV,IAAsB7pE,CAAC,CAAC8E,GAAF,IAAS,QAAnC,EACI,KAAK4Q,GAAL;AACP;;AAED00D,EAAAA,WAAW,CAACpqE,CAAD,EAAG;AAEV;AACA,QAAIA,CAAC,CAAC6rE,MAAF,KAAar9D,SAAb,IAA0BxO,CAAC,CAAC6rE,MAAF,KAAa,CAA3C,EAA+C;AAE/C7rE,IAAAA,CAAC,CAACgC,eAAF,GALU,CAOV;;AACA,SAAK09B,IAAL,CAAUzhC,gBAAV,CAA2B,KAAKswD,MAAL,CAAY2b,IAAvC,EAA6C,KAAKI,WAAlD,EAA+D,IAA/D;AAEA,QAAIzkE,IAAI,GAAG,KAAKglE,WAAL,CAAiB7qE,CAAjB,CAAX;AAEA,QAAI6F,IAAJ,EACA,KAAKimE,YAAL,GAAoBz6D,UAAU,CAAC,MAAI;AAE/B,UAAIpI,EAAE,GAAG,IAAIN,IAAJ,GAAWC,OAAX,EAAT,CAF+B,CAI/B;;AACA,aAAO,KAAKkjE,YAAZ;AAEA,UAAI,KAAKF,UAAL,IAAmB3iE,EAAE,GAAC,KAAK2iE,UAAR,IAAoB,EAA3C,EAAgD;AAEhD,aAAO,KAAKA,UAAZ;AAEA,WAAKjB,SAAL,GAAiB,IAAjB;AACA,WAAKC,UAAL,GAAkB/kE,IAAlB;;AACA,WAAK4lE,OAAL,CAAa5lE,IAAb;AAEH,KAf6B,EAe3B,GAf2B,CAA9B;AAgBH;;AAEDwkE,EAAAA,SAAS,CAACrqE,CAAD,EAAG;AAER,SAAKgC,eAAL,CAAqBhC,CAArB;AACA,SAAK2qE,SAAL,GAAiB,KAAjB;AACA,SAAKoB,UAAL,CAAgB,KAAhB;AACAplC,IAAAA,YAAY,CAAC,KAAKmlC,YAAN,CAAZ;AAEA,QAAI7iE,EAAE,GAAG,IAAIN,IAAJ,GAAWC,OAAX,EAAT;;AAEA,QAAI,KAAKkjE,YAAL,KAAsB,CAAC,KAAKF,UAAN,IAAoB3iE,EAAE,GAAC,KAAK2iE,UAAR,GAAmB,EAA7D,CAAJ,EAAsE;AAElE,aAAO,KAAKE,YAAZ;AACA,UAAIjmE,IAAI,GAAG,KAAKglE,WAAL,CAAiB7qE,CAAjB,CAAX;AACA,WAAK2yC,MAAL,CAAY9sC,IAAZ,EAAkB7F,CAAC,CAACkS,QAAF,GAAW,KAAK04D,UAAhB,GAA2B,IAA7C;AAEA,UAAI,CAAC5qE,CAAC,CAACkS,QAAP,EACI,KAAK04D,UAAL,GAAkB/kE,IAAlB;AAEP,KATD,MASK;AACD,aAAO,KAAK+kE,UAAZ;AACA,aAAO,KAAKoB,cAAZ;AACH;;AAED,WAAO,KAAKJ,UAAZ;AACA,SAAKlsC,IAAL,CAAUl9B,mBAAV,CAA8B,KAAK+rD,MAAL,CAAY2b,IAA1C,EAAgD,KAAKI,WAArD,EAAkE,IAAlE;AACH;;AAEDA,EAAAA,WAAW,CAACtqE,CAAD,EAAG;AAEV,QAAI,KAAK2qE,SAAT,EACI,KAAK3oE,eAAL,CAAqBhC,CAArB;AAEJ,QAAI,KAAK8rE,YAAL,IAAsB,KAAKF,UAAL,IAAmB,CAAC,KAAKD,WAAnD,EAAkE,OALxD,CAOV;;AACA,QAAI3rE,CAAC,CAACisE,cAAN,EAAsB;AAElB,UAAI;AAACjgD,QAAAA,OAAD;AAAUC,QAAAA;AAAV,UAAqBjsB,CAAC,CAACisE,cAAF,CAAiB,CAAjB,CAAzB;;AAEA,UAAI,KAAKrhD,IAAL,CAAUk/C,mBAAV,KAAkC,KAAtC,EAA4C;AAExC,YAAIoC,QAAQ,GAAG,KAAKxsC,IAAL,CAAUjoB,qBAAV,EAAf;AAEA,YAAIb,GAAG,GAAGs1D,QAAQ,CAACl+D,CAAT,GAAa,KAAK4c,IAAL,CAAUk/C,mBAAjC;AACA,YAAIjzD,MAAM,GAAGq1D,QAAQ,CAACl+D,CAAT,GAAak+D,QAAQ,CAAC7gE,MAAtB,GAA+B,KAAKuf,IAAL,CAAUk/C,mBAAtD;AAEA,YAAIqC,YAAY,GAAG,CAAC,KAAKvhD,IAAL,CAAUm/C,sBAAV,IAAkC,CAAnC,IAAwC,EAA3D,CAPwC,CASxC;;AACA,YAAI99C,OAAO,GAAGrV,GAAd,EACI,KAAKm1D,UAAL,CAAgB,CAAC,CAAD,GAAK9mE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACmnE,GAAL,CAASx1D,GAAG,GAACqV,OAAb,EAAsBkgD,YAAtB,CAAX,CAArB,EADJ,CAGA;AAHA,aAIK,IAAIlgD,OAAO,GAAGpV,MAAd,EACD,KAAKk1D,UAAL,CAAgB,IAAI9mE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACmnE,GAAL,CAASngD,OAAO,GAACpV,MAAjB,EAAyBs1D,YAAzB,CAAX,CAApB,EADC,CAGL;AAHK,eAKD,KAAKJ,UAAL,CAAgB,KAAhB;AAEP;;AAED,UAAIlmE,IAAI,GAAG,KAAK65B,IAAL,CAAUv9B,WAAV,GAAwBkqE,gBAAxB,CAAyCrgD,OAAzC,EAAkDC,OAAlD,CAAX;;AAEA,UAAIpmB,IAAI,IAAIA,IAAI,CAACy0B,OAAL,IAAgB,KAAKovC,WAA7B,IACD7jE,IAAI,IAAI,KAAKmmE,cADhB,EACgC;AAC5B,aAAKA,cAAL,GAAsBnmE,IAAtB;AACA,aAAK8sC,MAAL,CAAY9sC,IAAZ,EAAkB,KAAK+kE,UAAvB;AACH,OAjCiB,CAmCtB;;AACC,KApCD,MAoCK;AACD,UAAI/kE,IAAI,GAAG7F,CAAC,CAAC0hC,aAAF,IAAmB1hC,CAAC,CAAC0hC,aAAF,CAAgBpH,OAAhB,IAA2B,KAAKovC,WAAnD,GAAiE1pE,CAAC,CAAC0hC,aAAnE,GAAmF1hC,CAA9F;AACA,WAAK2yC,MAAL,CAAY9sC,IAAZ,EAAkB,KAAK+kE,UAAvB;AACH;AACJ;;AAEDC,EAAAA,WAAW,CAAC7qE,CAAD,EAAG;AACV,QAAIyqB,IAAI,GAAGzqB,CAAC,CAACgvD,YAAF,EAAX;AACA,WAAOvkC,IAAI,CAAC7nB,IAAL,CAAUuoC,GAAG,IAAEA,GAAG,CAAC7Q,OAAJ,IAAa,KAAKovC,WAAjC,CAAP;AACH;;AAEDqC,EAAAA,UAAU,CAACO,KAAK,GAAC,CAAP,EAAS;AAEf,QAAIA,KAAK,IAAI,KAAT,IAAkB,KAAKC,gBAAL,IAAyBD,KAA/C,EAAsD;AAClD7jE,MAAAA,aAAa,CAAC,KAAKkjE,WAAN,CAAb;;AAEA,UAAIW,KAAK,IAAI,KAAb,EAAoB;AAChB,eAAO,KAAKX,WAAZ;AACA,eAAO,KAAKY,gBAAZ;AACH;AACJ;;AAED,QAAID,KAAK,KAAK,KAAV,IAAmB,KAAKC,gBAAL,IAAyBD,KAAhD,EAAuD;AACnD,WAAKC,gBAAL,GAAwBD,KAAxB;AAEA,WAAK5sC,IAAL,CAAUjpB,SAAV,GAAsB,KAAKipB,IAAL,CAAUjpB,SAAV,GAAoB,KAAK81D,gBAA/C;AAEA,WAAKZ,WAAL,GAAmB9iE,WAAW,CAAC,MAAI;AAC/B,aAAK62B,IAAL,CAAUjpB,SAAV,GAAsB,KAAKipB,IAAL,CAAUjpB,SAAV,GAAoB,KAAK81D,gBAA/C;AACH,OAF6B,EAE5B,EAF4B,CAA9B;AAGH;AACJ;;AAhV0B;;;AAoV/B,+BAAQrc,SAAS,CAACrvD,SAAlB;;;;;;;;;AC9WA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA9D,cAAc,CAACC,MAAf,CAAsB,QAAtB,EAAgC,cAAcE,sBAAd,CAAyB;AAErDxB,EAAAA,WAAW,GAAE;AACT;AAEA,SAAKwuB,SAAL,GAAiB,KAAKA,SAAL,CAAe1qB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKgtE,OAAL,GAAe,KAAKA,OAAL,CAAahtE,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKitE,SAAL,GAAiB,KAAKA,SAAL,CAAejtE,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKktE,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBltE,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKmtE,aAAL,GAAqB,KAAKA,aAAL,CAAmBntE,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAED,MAAIqiE,IAAJ,GAAU;AAAE,WAAO,KAAKE,MAAZ;AAAoB;;AAChC,MAAIF,IAAJ,CAASA,IAAT,EAAc;AACV,QAAIl6B,SAAS,GAAG,CAAC,CAAC,KAAKo6B,MAAP,IAAiB,KAAKA,MAAL,IAAeF,IAAhD;AACA,SAAKE,MAAL,GAAcF,IAAd;AACA,SAAKqH,UAAL,CAAgBrH,IAAhB,GAAuBA,IAAvB,CAHU,CAKV;;AACA,QAAIl6B,SAAJ,EACI,KAAKilC,eAAL,GAAuB,KAAKC,OAAL,EAAvB,GAAwC,KAAKC,MAAL,EAAxC;AACP;;AAED,MAAIhoE,GAAJ,CAAQA,GAAR,EAAY;AAAE,SAAKioE,KAAL,GAAajoE,GAAb;AAAkB;;AAChC,MAAIA,GAAJ,GAAS;AACL,WAAO,KAAKioE,KAAL,IAAc,KAAKtwE,YAAL,CAAkB,KAAlB,CAArB;AACH;;AAED,MAAI+lE,OAAJ,GAAa;AACT,QAAI,CAAC,KAAKwK,SAAV,EACI,KAAKxK,OAAL,GAAe,EAAf;AAEJ,WAAO,KAAKwK,SAAZ;AACH;;AACD,MAAIxK,OAAJ,CAAYA,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKwK,SAAV,EAAqB;AACjB,WAAKA,SAAL,GAAiB,IAAIxI,gBAAJ,EAAjB;AACA,WAAKhC,OAAL,CAAa19D,GAAb,GAAmB,KAAKA,GAAxB;AACA,WAAK09D,OAAL,CAAa9iC,IAAb,GAAoB,IAApB;AACA,WAAKwpC,UAAL,CAAgB1G,OAAhB,GAA0B,KAAKA,OAA/B;AACA,WAAKA,OAAL,CAAatjE,EAAb,CAAgB,QAAhB,EAA0B,KAAK6oE,cAAL,CAAoBvoE,IAApB,CAAyB,IAAzB,CAA1B;AACH;;AAED,SAAKgjE,OAAL,CAAa4C,GAAb,CAAiB5C,OAAjB;AACH;;AAED,MAAIC,KAAJ,GAAW;AAAE,WAAO,KAAKwK,OAAZ;AAAqB;;AAClC,MAAIxK,KAAJ,CAAUA,KAAV,EAAgB;AACZ,QAAI,CAAC,KAAKwK,OAAV,EAAmB;AACf,WAAKA,OAAL,GAAe,IAAIpG,cAAJ,EAAf;AACA,WAAKpE,KAAL,CAAW39D,GAAX,GAAiB,KAAKA,GAAtB;AACA,WAAK29D,KAAL,CAAW/iC,IAAX,GAAkB,IAAlB;AACA,WAAKwpC,UAAL,CAAgBzG,KAAhB,GAAwB,KAAKA,KAA7B;AACA,WAAKA,KAAL,CAAWvjE,EAAX,CAAc,QAAd,EAAwB,KAAKguE,YAAL,CAAkB1tE,IAAlB,CAAuB,IAAvB,CAAxB;AACH;;AAED,SAAKijE,KAAL,CAAW2C,GAAX,CAAe3C,KAAf;AACH;;AAED,MAAIr6B,MAAJ,GAAY;AAAE,WAAO,KAAKs/B,OAAL,IAAc,KAAKA,OAAL,CAAa5gE,MAAlC;AAAyC;;AACvD,MAAIshC,MAAJ,CAAW1rC,GAAX,EAAe;AAAE,QAAG,KAAKgrE,OAAR,EAAiB,KAAKA,OAAL,CAAa5gE,MAAb,GAAsBpK,GAAtB;AAA0B;;AAC5D,MAAIgrE,OAAJ,GAAa;AACT,QAAI,CAAC,KAAKyF,SAAN,IAAmB,KAAKC,WAAxB,IAAuC,KAAKA,WAAL,CAAiB1F,OAA5D,EAAoE;AAChE,WAAKyF,SAAL,GAAiB,IAAI1F,gBAAJ,CAAY,KAAK2F,WAAL,CAAiB1F,OAA7B,CAAjB;AACA,WAAKA,OAAL,CAAa5iE,GAAb,GAAmB,KAAKA,GAAxB;AACA,WAAK4iE,OAAL,CAAahoC,IAAb,GAAoB,IAApB;AACA,WAAKtkC,YAAL,CAAkB,QAAlB,EAA4B,KAAKgtC,MAAjC;AACA,WAAKs/B,OAAL,CAAaxoE,EAAb,CAAgB,QAAhB,EAA0BkpC,MAAM,IAAE;AAC9B,aAAKhtC,YAAL,CAAkB,QAAlB,EAA4B,KAAKgtC,MAAjC;AACA,aAAKjhC,MAAL;AACA,aAAK2lE,MAAL;AACH,OAJD;AAKH;;AAED,WAAO,KAAKK,SAAZ;AACH;;AAED,MAAIjE,UAAJ,GAAgB;AACZ,QAAI,CAAC,KAAKmE,YAAV,EAAwB;AACpB,WAAKA,YAAL,GAAoB,IAAI/L,eAAJ,CAAe,KAAK8L,WAApB,CAApB;;AACA,WAAKC,YAAL,CAAkBnuE,EAAlB,CAAqB,cAArB,EAAqC2oE,KAAK,IAAE;AACxC,aAAKlvC,OAAL,CAAakvC,KAAb,GAAqBA,KAArB;AACH,OAFD;AAGH;;AACD,WAAO,KAAKwF,YAAZ;AACH;;AAED,aAAW5xE,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA0ElB;;AAEF,MAAIiD,OAAJ,GAAa;AACT,WAAO,KAAK4uE,SAAL,GAAiB,KAAKA,SAAL,IACD,KAAKtyE,aAAL,CAAmB,kBAAnB,CADC,IAED,KAAKc,UAAL,CAAgBd,aAAhB,CAA8B,mBAA9B,CAFvB;AAGH;;AAEDwC,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;iBAER,KAAK+vE,YAAL,IAAmB,EAAG;;;;;;mCAMJ,KAAK/K,OAAQ,WAAU,KAAKC,KAAM,aAAY,KAAKiF,OAAQ;mCAC3D,KAAK8F,kBAAmB;;;;4DAIC,KAAKX,OAAQ;;;;;;;;;;;sBAWnD,KAAKH,kBAAmB;oBAC1B,KAAKD,SAAU;uBACZ,KAAKE,aAAc;0BAChB,KAAKzD,UAAW;4BACb,KAAKkE,WAAL,IAAkB,KAAKA,WAAL,CAAiB5L,WAAa;sBACvD,KAAKp5B,MAAO;;KA7BrB;AA+BP;;AAEF7pC,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEAL,IAAAA,MAAM,CAACD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKisB,SAAxC,EAAmD,IAAnD;AACAhsB,IAAAA,MAAM,CAACD,gBAAP,CAAwB,OAAxB,EAAiC,KAAKuuE,OAAtC,EAA+C,IAA/C;AAEA,QAAI/tE,IAAI,GAAG,KAAK0D,WAAL,GAAmB1D,IAA9B;;AAEN,QAAIA,IAAJ,EAAU;AACA,WAAKA,IAAL,GAAYA,IAAZ;AACAA,MAAAA,IAAI,CAACihC,IAAL,GAAYjhC,IAAI,CAACihC,IAAL,IAAa,IAAzB;AACH;AACJ;;AAED9gC,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AAEAV,IAAAA,MAAM,CAACsE,mBAAP,CAA2B,SAA3B,EAAsC,KAAK0nB,SAA3C,EAAsD,IAAtD;AACAhsB,IAAAA,MAAM,CAACsE,mBAAP,CAA2B,OAA3B,EAAoC,KAAKgqE,OAAzC,EAAkD,IAAlD;AAEA,QAAI,KAAK/tE,IAAL,IAAa,KAAKA,IAAL,CAAUihC,IAAV,IAAkB,IAAnC,EACI,OAAO,KAAKjhC,IAAZ;AACP;;AAEDyrB,EAAAA,SAAS,CAAClqB,CAAD,EAAG;AACR,QAAIA,CAAC,CAACwD,MAAF,KAAa1J,QAAQ,CAACma,IAA1B,EAAiC;AACjC,QAAI,CAACjU,CAAC,CAACoS,OAAH,IAAc,CAACpS,CAAC,CAAC2rC,OAArB,EAA+B;AAC/B,SAAK+4B,OAAL,GAAe,IAAf;AACH;;AAED8H,EAAAA,OAAO,CAACxsE,CAAD,EAAG;AACN,QAAI,KAAK0kE,OAAL,IAAgB,CAAC,KAAKlC,OAAL,CAAayC,aAAlC,EACI,KAAKP,OAAL,GAAgB,KAAhB;AACP;;AAED,MAAIA,OAAJ,GAAa;AAAE,WAAO,KAAKlC,OAAL,IAAgB,KAAKA,OAAL,CAAakC,OAApC;AAA6C;;AAC5D,MAAIA,OAAJ,CAAY+I,OAAZ,EAAoB;AAChB,QAAI,CAAC,KAAKjL,OAAV,EAAoB;AAEpB,SAAKA,OAAL,CAAakC,OAAb,GAAuB+I,OAAvB;AAEAA,IAAAA,OAAO,GAAG,KAAKryE,YAAL,CAAkB,SAAlB,EAA6B,EAA7B,CAAH,GAAsC,KAAKgB,eAAL,CAAqB,SAArB,CAA7C;AACH;;AAED,MAAIsxE,UAAJ,GAAgB;AAAE,WAAO,KAAKjxE,YAAL,CAAkB,KAAlB,KAA4B,EAAnC;AAAsC;;AACxD,MAAIkxE,YAAJ,GAAkB;AAAE,WAAO,KAAKlxE,YAAL,CAAkB,OAAlB,KAA8B,eAArC;AAAqD;;AAEzE,MAAIk8B,OAAJ,GAAa;AACT,WAAO,KAAK78B,UAAL,CAAgBd,aAAhB,CAA8B,gBAA9B,CAAP;AACH;;AAED,MAAI0kC,IAAJ,GAAU;AACN,WAAO,KAAK5jC,UAAL,CAAgBd,aAAhB,CAA8B,iBAA9B,CAAP;AACH;;AAEDyxE,EAAAA,SAAS,CAACzjC,KAAD,EAAO;AAEZ,QAAIzF,GAAG,GAAGxmC,cAAc,CAAClC,GAAf,CAAmB,KAAK6yE,UAAxB,CAAV;;AAEA,QAAInqC,GAAJ,EAAS;AACLA,MAAAA,GAAG,GAAG,IAAIA,GAAJ,EAAN;AACAA,MAAAA,GAAG,CAACyF,KAAJ,GAAYA,KAAZ;AACAzF,MAAAA,GAAG,CAAC7D,IAAJ,GAAW,IAAX;AACA,aAAO6D,GAAP;AACH;AACJ;;AAEDmpC,EAAAA,kBAAkB,GAAE;AAChB,SAAKvD,SAAL,GAAiB,KAAKA,SAAL,IAAkBrvE,QAAQ,CAACC,aAAT,CAAuB,KAAK4zE,YAA5B,CAAnC;AACA,SAAKxE,SAAL,CAAezpC,IAAf,GAAsB,IAAtB;AACA,SAAKypC,SAAL,CAAeD,UAAf,GAA4B,KAAKA,UAAjC;AAEA,QAAIhkC,IAAI,GAAG,KAAKgkC,UAAL,CAAgB1G,OAAhB,IAAyB,KAAK0G,UAAL,CAAgB1G,OAAhB,CAAwBt9B,IAA5D;AACA,SAAKikC,SAAL,CAAe9tE,KAAf,GAAuB6pC,IAAI,GAAI,mBAAkBA,IAAK,GAA3B,GAAiC,KAAKzoC,YAAL,CAAkB,aAAlB,KAAoC,YAAhG;AACA,SAAK0sE,SAAL,CAAepkE,aAAf;AACA,WAAO,KAAKokE,SAAZ;AACH;;AAEDwD,EAAAA,aAAa,CAAC/D,SAAD,EAAY5/B,KAAZ,EAAkB;AAE3B,QAAIhlB,OAAO,GAAG,KAAKvnB,YAAL,CAAkB,SAAlB,CAAd;AAEAunB,IAAAA,OAAO,GAAGA,OAAO,IAAIjnB,cAAc,CAAClC,GAAf,CAAmBmpB,OAAnB,CAArB;;AAEA,QAAIA,OAAO,IAAIA,OAAO,CAAC4pD,aAAnB,IAAoC5pD,OAAO,CAAC4pD,aAAR,CAAsBhF,SAAtB,EAAiC5/B,KAAjC,EAAwC,IAAxC,CAAxC,EAAuF;AACnFhlB,MAAAA,OAAO,GAAG,IAAIA,OAAJ,CAAY4kD,SAAZ,EAAuB5/B,KAAvB,EAA8B,IAA9B,CAAV;AACAhlB,MAAAA,OAAO,CAAC0b,IAAR,GAAe,IAAf;AACA1b,MAAAA,OAAO,CAACglB,KAAR,GAAgBA,KAAhB;AACAhlB,MAAAA,OAAO,CAAC4kD,SAAR,GAAoBA,SAApB;AACA,aAAO5kD,OAAP;AACH;;AAED,WAAO,IAAP;AACH;;AAED,QAAMhmB,YAAN,GAAoB;AAEhB;AACAqT,IAAAA,UAAU,CAAC,YAAU;AACjB,WAAK3S,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAKs6B,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACA,WAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH,KAJS,CAAV;AAMA,SAAKkyC,MAAL,GAAc,KAAKzV,EAAL,CAAQ,iBAAR,EAA2BkH,aAA3B,GAA2C,CAA3C,CAAd;AAEA,QAAI,KAAKuO,MAAT,EACA,KAAK7Q,IAAL,CAAUzhC,gBAAV,CAA2B,QAA3B,EAAqC+B,CAAC,IAAE;AACpC,WAAKuwC,MAAL,CAAY75B,UAAZ,GAAyB1W,CAAC,CAACoH,aAAF,CAAgBsP,UAAzC;AAEA,UAAI1W,CAAC,CAACoH,aAAF,CAAgBsP,UAAhB,IAA8B,CAAlC,EACI,KAAKta,eAAL,CAAqB,YAArB,EADJ,KAGI,KAAKhB,YAAL,CAAkB,YAAlB,EAAgC,EAAhC;AACP,KAPD,EAZgB,CAqBhB;;AACA,SAAKopC,SAAL,GAAiB,IAAI0rB,kBAAJ,CAAc,KAAKxwB,IAAnB,EAAyB,KAAKguC,UAA9B,EAA0C;AACvD/0C,MAAAA,OAAO,EAAE,KAAK78B,UAAL,CAAgBd,aAAhB,CAA8B,sBAA9B;AAD8C,KAA1C,CAAjB;AAIA,SAAKiD,gBAAL,CAAsB,iBAAtB,EAAyC+B,CAAC,IAAE;AACxCA,MAAAA,CAAC,CAACgC,eAAF;AACA,WAAKwiC,SAAL,CAAeimC,KAAf,CAAqBzqE,CAArB;AACH,KAHD;AAIH;;AAED,QAAM6sE,OAAN,GAAe;AACX,SAAKnuE,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,SAAK6qE,UAAL,CAAgBz7D,KAAhB;AACA,SAAKiyB,IAAL,CAAUjyB,KAAV;AACA,SAAKkrB,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACA,SAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAMyuE,MAAN,GAAc;AACV,SAAK5D,UAAL,CAAgBlH,QAAhB;AACA,SAAKtiC,IAAL,CAAUjyB,KAAV,CAAgB,KAAKm/D,eAArB;AACA,SAAKj0C,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACH;;AAED,MAAI8qE,eAAJ,GAAqB;AACjB,WAAO,KAAK1D,UAAL,CAAgBpH,UAAhB,IAA8B,KAAKsL,WAAL,IAAkB,KAAKA,WAAL,CAAiB5L,WAAxE;AACH;;AAED,QAAMgM,kBAAN,CAAyBxiC,OAAzB,EAAiC;AAE7B;AACA,QAAI,KAAKoiC,WAAL,IAAoB,KAAKA,WAAL,CAAiBhoC,KAAjB,IAA0B,MAAlD,EAA0D;AACtD,WAAK8jC,UAAL,CAAgBz7D,KAAhB;AACH;;AAED,SAAKy7D,UAAL,CAAgBhH,YAAhB;AACA,SAAKxiC,IAAL,CAAUjyB,KAAV,CAAgB,KAAKm/D,eAArB;AACA,SAAKj0C,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACH;;AAED,QAAMimE,cAAN,CAAqB/8B,OAArB,EAA6B;AAEzB,QAAI,KAAKw3B,OAAL,CAAauD,kBAAb,CAAgC/6B,OAAhC,CAAJ,EAA8C;AAC1C,WAAKtsC,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAK6qE,UAAL,CAAgBz7D,KAAhB;AACH;;AAED,SAAKy7D,UAAL,CAAgBhH,YAAhB;AACA,SAAKxiC,IAAL,CAAUjyB,KAAV,CAAgB,KAAKm/D,eAArB;AACA,SAAKj0C,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACA,SAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAED,QAAM6uE,YAAN,GAAoB;AAEhB,QAAI,KAAKzK,KAAL,CAAWsE,QAAX,KAAwB,IAA5B,EAAkC;AAC9B,WAAKroE,OAAL,CAAaL,IAAb,GAAoB,IAApB;AACA,WAAK6qE,UAAL,CAAgBz7D,KAAhB;AACH,KAHD,MAGK;AACD,WAAKy7D,UAAL,CAAgBtuE,IAAhB;AACH;;AAED,SAAK8kC,IAAL,CAAUjyB,KAAV,CAAgB,KAAKm/D,eAArB;AACA,SAAKj0C,OAAL,CAAakvC,KAAb,GAAqB,MAAM,KAAKqB,UAAL,CAAgBpnE,MAAhB,EAA3B;AACA,SAAKpD,OAAL,CAAaL,IAAb,GAAoB,KAApB;AACH;;AAhYoD,CAAzD;;eAoYetB,cAAc,CAAClC,GAAf,CAAmB,QAAnB;;;;;;AChZf;;AAEAqC,uBAAW2D,SAAX,CAAqBgtE,SAArB,GAAiC,UAASvuE,SAAT,EAAoB2E,MAAM,GAAC,IAA3B,EAAgC;AAE7D,MAAI+Z,KAAK,GAAG,IAAIla,WAAJ,CAAgBxE,SAAhB,EAA2B;AACnCyE,IAAAA,OAAO,EAAE,IAD0B;AAEnCC,IAAAA,QAAQ,EAAE,IAFyB;AAGnCC,IAAAA,MAAM,EAAEA;AAH2B,GAA3B,CAAZ;AAMA,OAAKJ,aAAL,CAAmBma,KAAnB;AACH,CATD;;;;;;;;;ACFA;;AAEAjhB,cAAc,CAACC,MAAf,CAAsB,WAAtB,EAAmC,cAAcE,sBAAd,CAAwB;AAEvD,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAmClB;;AAEF,MAAIqyE,UAAJ,GAAgB;AACZ,WAAO,KAAKC,OAAL,CAAah/B,KAAb,MAAwB,KAAKplC,IAAL,CAAUolC,KAAV,EAA/B;AACH;;AAED,MAAIi/B,SAAJ,GAAe;AACX,WAAO,CAAC,CAAD,EAAI,CAAJ,EAAO3pE,QAAP,CAAgB,KAAKsF,IAAL,CAAUokC,OAAV,EAAhB,CAAP;AACH;;AAED,MAAIkgC,OAAJ,GAAa;AACT,WAAO,KAAKtkE,IAAL,CAAU85D,MAAV,CAAiB,IAAI96D,IAAJ,EAAjB,EAA6B,KAA7B,CAAP;AACH;;AAEDnL,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;;;kBAIP,KAAKmM,IAAL,CAAUA,IAAV,MAAkB,CAAlB,GAAoB,KAAKA,IAAL,CAAUP,MAAV,CAAiB,KAAjB,CAApB,GAA4C,EAAG;kBAC/C,KAAKO,IAAL,CAAU9O,GAAV,CAAc,MAAd,CAAsB;;;;;;KAL3B;AAWP;;AAEF,MAAI8O,IAAJ,CAASA,IAAT,EAAc;AACV,SAAKC,MAAL,GAAcD,IAAd;AAEA,SAAK/M,eAAL,CAAqB,SAArB,EAAgC,KAAKoxE,SAArC;AACA,SAAKpxE,eAAL,CAAqB,UAArB,EAAiC,KAAKkxE,UAAtC;AACA,SAAKlxE,eAAL,CAAqB,OAArB,EAA8B,KAAKqxE,OAAnC;AAEA,SAAKlpE,aAAL;AACH;;AAED,MAAI4E,IAAJ,GAAU;AACN,WAAO,KAAKC,MAAZ;AACH,GA5EsD,CA8EvD;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;;;AA7FuD,CAA3D;;eAiGe7M,cAAc,CAAClC,GAAf,CAAmB,WAAnB;;;;;;;;;;;ACnGf;;AACA;;AACA;;AACA;;AACA;;;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,OAAtB,EAA+B,cAAcE,sBAAd,CAAwB;AAEnDxB,EAAAA,WAAW,GAAE;AACT;AAEA,SAAKwyE,QAAL,GAAgBnmE,gBAAOglC,WAAP,EAAhB;AAEA,SAAKmB,IAAL,GAAY,IAAI3zC,KAAJ,CAAU,IAAE,CAAZ,EAAeksB,IAAf,CAAoB,EAApB,CAAZ;AACA,SAAK9c,IAAL,GAAY,KAAKmkC,KAAL,IAAc,KAAKrxC,YAAL,CAAkB,MAAlB,CAAd,IAA2C,sBAAvD;AACH;;AAED,aAAWhB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAuElB;;AAEF,MAAIkO,IAAJ,GAAU;AAAE,WAAO,KAAKmkC,KAAZ;AAAmB;;AAE/B,MAAInkC,IAAJ,CAASjN,GAAT,EAAa;AAET,QAAIyxE,OAAO,GAAG,KAAKrgC,KAAL,IAAc,KAAKA,KAAL,CAAWH,KAAX,EAA5B;;AAEA,QAAIjxC,GAAG,YAAYqL,eAAnB,EAA2B;AACvB,WAAK+lC,KAAL,GAAapxC,GAAb;AACT,WAAKgxC,aAAL,GAAqB,KAAKI,KAAL,CAAWH,KAAX,EAArB;AAEM,KAJD,MAIM,IAAI,OAAOjxC,GAAP,IAAc,QAAlB,EAA4B;AAE9B,WAAKoxC,KAAL,GAAa,qBAAOpxC,GAAP,CAAb;AACT,WAAKgxC,aAAL,GAAqB,KAAKI,KAAL,CAAWH,KAAX,EAArB;AAEA,KALW,MAKN,IAAIjxC,GAAG,IAAI,OAAOA,GAAP,IAAc,QAAzB,EAAmC;AACxC,WAAKgxC,aAAL,CAAmB5kB,GAAnB,CAAuBpsB,GAAvB;;AACA,WAAKoxC,KAAL,CAAWhlB,GAAX,CAAepsB,GAAf;AACM;;AAEP,SAAKoxC,KAAL,CAAWhlB,GAAX,CAAe;AAACnf,MAAAA,IAAI,EAAE;AAAP,KAAf;;AAEM,QAAIwkE,OAAO,IAAI,KAAKrgC,KAAL,CAAW21B,MAAX,CAAkB0K,OAAlB,CAAf,EACI;;AAEJ,SAAKC,SAAL;;AAEA,SAAKP,SAAL,CAAe,cAAf,EAA+B,KAAK7hE,KAApC;AACN;;AAEEhO,EAAAA,YAAY,GAAE;AACV,SAAK6vE,SAAL,CAAe,cAAf,EAA+B,KAAK7hE,KAApC;AACH;;AAEDoiE,EAAAA,SAAS,GAAE;AACP,QAAIrlE,KAAK,GAAG,KAAK+kC,KAAL,CAAWC,OAAX,EAAZ;;AACN,QAAIC,OAAO,GAAG,KAAKF,KAAL,CAAWG,WAAX,EAAd;;AAEM,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUzzC,GAAV,CAAc,CAAC0X,CAAD,EAAI1N,CAAJ,KAAQ;AAC9B,aAAO,KAAKqpC,KAAL,CAAWH,KAAX,GAAmBzlC,GAAnB,CAAuBzD,CAAC,GAACsE,KAAzB,EAAgC,KAAhC,CAAP;AACH,KAFW,CAAZ;AAGH;;AAED,MAAIiD,KAAJ,GAAW;AACP,WAAO,CAAC,KAAKkiC,IAAL,CAAU,CAAV,CAAD,EAAe,KAAKA,IAAL,CAAU,KAAKA,IAAL,CAAUpsC,MAAV,GAAiB,CAA3B,CAAf,CAAP;AACH;;AAED0sC,EAAAA,SAAS,GAAE;AACb,SAAK7kC,IAAL,GAAY,KAAKmkC,KAAL,CAAWH,KAAX,GAAmBzlC,GAAnB,CAAuB,OAAvB,EAAgC,CAAhC,CAAZ;AACM,SAAKf,MAAL;AACN;;AAEDsnC,EAAAA,SAAS,GAAE;AACV,SAAK9kC,IAAL,GAAY,KAAKmkC,KAAL,CAAWH,KAAX,GAAmBzlC,GAAnB,CAAuB,OAAvB,EAAgC,CAAC,CAAjC,CAAZ;AACM,SAAKf,MAAL;AACN;;AAEEknE,EAAAA,SAAS,GAAE;AACP,SAAK1kE,IAAL,GAAY,sBAAZ;AACA,SAAKxC,MAAL;AACH;;AAED3J,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;;sBAGH,KAAKmM,IAAL,CAAUP,MAAV,CAAiB,WAAjB,CAA8B;;;;;;8DAMU,KAAKqlC,SAAU;yCACpC,KAAK4/B,SAAU;+DACO,KAAK7/B,SAAU;;;;;oCAK1C,KAAK0/B,QAAL,CAAczzE,GAAd,CAAkB,CAAC4O,GAAD,EAAK5E,CAAL,KAAS,qBAAK;kBAClDA,CAAC,IAAE,CAAH,IAAMA,CAAC,IAAE,CAAT,GAAW,qBAAK;kCACA,KAAK6pE,qBAAsB,IAAGjlE,GAAI;iBADlD,GAEA,qBAAK;2BACIA,GAAI;iBACb;aALkB,CAMrB;;;;UAIL,KAAK6kC,IAAL,CAAUzzC,GAAV,CAAckP,IAAI,IAAE,qBAAK;kCACD,KAAKmkC,KAAM,UAASnkC,IAAK;8BAC7BA,IAAI,CAACP,MAAL,CAAY,YAAZ,CAA0B;;SAF9C,CAIC;;KA9BE;AAgCP;;AAEFklE,EAAAA,qBAAqB,GAAE;AACnB,SAAK1xE,eAAL,CAAqB,kBAArB,EAAyC,CAAC,KAAKE,YAAL,CAAkB,kBAAlB,CAA1C;AACH;;AAtLkD,CAAvD;;eA0LeC,cAAc,CAAClC,GAAf,CAAmB,OAAnB;;;;;;AChMf;;AAEAkC,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0C,cAAcE,sBAAd,CAAwB;AAE9D,aAAWzB,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAuClB;;AAEF8C,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEA,SAAKgwE,MAAL,GAAc,EAAd;;AAEA,SAAK,IAAIC,KAAT,IAAkB10E,QAAQ,CAAC20E,WAA3B,EAAwC;AAEpC,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAG;AAAEA,QAAAA,KAAK,GAAGF,KAAK,CAACG,QAAd;AAAwB,OAA7B,CAA6B,OAAM3uE,CAAN,EAAQ,CAAE;;AAEvC,UAAI0uE,KAAJ,EACA,KAAK,IAAIE,IAAT,IAAiBF,KAAjB,EAAwB;AAEpB,YAAIE,IAAI,CAACvtC,OAAL,CAAa11B,KAAb,CAAmB,iBAAnB,CAAJ,EAA2C;AAEvC,cAAIoc,OAAO,GAAG6mD,IAAI,CAACvtC,OAAL,CAAa11B,KAAb,CAAmB,uBAAnB,CAAd;AACA,cAAI4iE,MAAM,GAAG,EAAb;AAEAxmD,UAAAA,OAAO,CAACttB,GAAR,CAAYsM,CAAC,IAAE;AAEX,gBAAI,CAACsC,GAAD,EAAMvO,IAAN,EAAYiQ,GAAZ,EAAiBtE,KAAjB,IAA0BM,CAAC,CAAC4E,KAAF,CAAQ,uCAAR,CAA9B;AACA,gBAAI7G,GAAG,GAAGhK,IAAI,IAAIiQ,GAAG,GAAC,MAAIA,GAAL,GAAS,EAAhB,CAAd;;AAEA,gBAAIA,GAAJ,EAAS;AACLwjE,cAAAA,MAAM,CAACzzE,IAAD,CAAN,GAAeyzE,MAAM,CAACzzE,IAAD,CAAN,IAAgB;AAACA,gBAAAA,IAAI,EAAEA,IAAP;AAAayzE,gBAAAA,MAAM,EAAE;AAArB,eAA/B;AACAA,cAAAA,MAAM,CAACzzE,IAAD,CAAN,CAAayzE,MAAb,CAAoB3qE,IAApB,CAAyB;AAAEkB,gBAAAA,GAAF;AAAOhK,gBAAAA,IAAP;AAAaiQ,gBAAAA,GAAb;AAAkBtE,gBAAAA;AAAlB,eAAzB;AACH,aAHD,MAGK;AACD8nE,cAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBA,MAAM,CAAC,SAAD,CAAN,IAAqB;AAACzzE,gBAAAA,IAAI,EAAE,SAAP;AAAkByzE,gBAAAA,MAAM,EAAE;AAA1B,eAAzC;AACAA,cAAAA,MAAM,CAAC,SAAD,CAAN,CAAkBA,MAAlB,CAAyB3qE,IAAzB,CAA8B;AAAEkB,gBAAAA,GAAF;AAAOhK,gBAAAA,IAAP;AAAaiQ,gBAAAA,GAAb;AAAkBtE,gBAAAA;AAAlB,eAA9B;AACH;AAEJ,WAbD;AAeA,eAAK8nE,MAAL,GAAc7tE,MAAM,CAAC6tB,MAAP,CAAcggD,MAAd,CAAd;AACH;AACJ;AACJ;AACJ;;AAED/wE,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;UACf,KAAK+wE,MAAL,CAAY9zE,GAAZ,CAAgBqjC,CAAC,IAAE,qBAAK;0BACRA,CAAC,CAAChjC,IAAK;sBACXgjC,CAAC,CAAChjC,IAAK;;kBAEXgjC,CAAC,CAACywC,MAAF,CAAS9zE,GAAT,CAAaqiC,CAAC,IAAE,qBAAK;+BACRA,CAAC,CAAC/xB,GAAI,SAAQ+xB,CAAC,CAACh4B,GAAI,kDAAiDg4B,CAAC,CAACh4B,GAAI;+BAC3Eg4B,CAAC,CAACh4B,GAAI;sCACCg4B,CAAC,CAAC/xB,GAAF,GAAM+xB,CAAC,CAACr2B,KAAR,GAAc,EAAG;;iBAHrC,CAKC;;;SATT,CAYC;KAbE;AAcP;;AAjG4D,CAAlE;;;;;;;;;;ACDA;;AAEO,MAAMooE,cAAc,GAAG;AAE1BC,EAAAA,GAAG,EAAE,oBAAI,uCAFiB;AAG1BC,EAAAA,EAAE,EAAE,oBAAI,qDAHkB;AAI1B1pC,EAAAA,IAAI,EAAE,oBAAI,sDAJgB;AAK1B2pC,EAAAA,KAAK,EAAE,oBAAI,yCALe;AAM1B54D,EAAAA,IAAI,EAAE,oBAAI,sCANgB;AAO1B64D,EAAAA,GAAG,EAAE,oBAAI,qCAPiB;AAQ1BC,EAAAA,IAAI,EAAE,oBAAI,uCARgB;AAS1BC,EAAAA,GAAG,EAAE,oBAAI,8CATiB;AAW1BC,EAAAA,GAAG,EAAE,oBAAI,2CAXiB;AAY1BC,EAAAA,IAAI,EAAE,oBAAI,4CAZgB;AAa1BC,EAAAA,GAAG,EAAE,oBAAI,2CAbiB;AAc1BC,EAAAA,GAAG,EAAE,oBAAI,2CAdiB;AAgB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAhBiB;AAiB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAjBiB;AAkB1BC,EAAAA,IAAI,EAAE,oBAAI,mDAlBgB;AAmB1BC,EAAAA,GAAG,EAAE,oBAAI,kDAnBiB;AAqB1B;AACAt+B,EAAAA,IAAI,EAAE,oBAAI;;;;;KAtBgB;AA4B1Bu+B,EAAAA,KAAK,EAAE,oBAAI;;;;;;KA5Be;AAoC1B;AACAC,EAAAA,GAAG,EAAE,oBAAI;;;;;;;KArCiB;AA6C1BC,EAAAA,IAAI,EAAE,oBAAI;;;;;;;;KA7CgB;AAsD1BC,EAAAA,IAAI,EAAE,oBAAI;;;;;;;KAtDgB;AA8D1BC,EAAAA,EAAE,EAAE,oBAAI;;;;;;;;KA9DkB;AAuE1BlB,EAAAA,GAAG,EAAE,oBAAI;;;;;;;;AAvEiB,CAAvB;;AAmFA,MAAMmB,cAAc,GAAG;AAC1B,UAAQ,qBAAK,kBADa;AAE1B,SAAO,qBAAK,mCAFc;AAI1B,SAAOC,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QAJhC;AAK1B,SAAOA,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QALhC;AAM1B,UAAQA,GAAG,IAAE,qBAAK,sCAAqCA,GAAI,QANjC;AAQ1B,UAAQA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QARhC;AAS1B,SAAOA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QAT/B;AAU1B,UAAQA,GAAG,IAAE,qBAAK,qCAAoCA,GAAI,QAVhC;AAY1B,SAAO,qBAAK,6BAZc;AAa1B,SAAO,qBAAK,6BAbc;AAe1B,SAAO,qBAAK,uCAfc;AAgB1B,UAAQA,GAAG,IAAE,qBAAK,0CAAyCA,GAAI;AAhBrC,CAAvB;;;AAoBQ,kBAASC,YAAY,GAAC,EAAtB,EAA0BC,YAAY,GAAC,EAAvC,EAA0C;AAEzD1vE,EAAAA,MAAM,CAACwqB,MAAP,CAAc2jD,cAAd,EAA8BsB,YAA9B;AACAzvE,EAAAA,MAAM,CAACwqB,MAAP,CAAc+kD,cAAd,EAA8BG,YAA9B;AAEArzE,EAAAA,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC,cAAcE,sBAAd,CAAwB;AAEzD,eAAWC,UAAX,GAAuB;AAAE,aAAO;AAC5B+yE,QAAAA,GAAG,EAAE;AAAC7yE,UAAAA,IAAI,EAAEQ,MAAP;AAAeN,UAAAA,OAAO,EAAE;AAAxB;AADuB,OAAP;AAEvB;;AAEF,eAAW9B,MAAX,GAAmB;AACf,aAAO,CAAC,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAL,EAqER0mB,MArEQ,CAqEDzhB,MAAM,CAAC6tB,MAAP,CAAcsgD,cAAd,CArEC,CAAP;AAqEsC;;AAE1CrxE,IAAAA,MAAM,GAAE;AAAC,aAAO,qBAAK;;;;yBAIA,KAAKc,KAAM;;;;KAJvB;AAQP;;AAEF,QAAIA,KAAJ,GAAW;AACP,UAAIA,KAAK,GAAG2xE,cAAc,CAAC,KAAKC,GAAN,CAA1B;AAEA,UAAI5xE,KAAJ,EACI,OAAO,OAAOA,KAAP,IAAgB,UAAhB,GAA6BA,KAAK,CAAC,KAAK4xE,GAAN,CAAlC,GAA+C5xE,KAAtD;AAEJ,aAAO,KAAK4xE,GAAZ;AACH;;AA/FwD,GAA7D;AAmGC;;;;;;;;;AClND;;AAEA,MAAMG,gBAAgB,GAAG,EAAzB;AAEAtzE,cAAc,CAACC,MAAf,CAAsB,UAAtB,EAAkC,cAAcE,sBAAd,CAAwB;AAEtD;AAEA,SAAOrC,GAAP,CAAWC,IAAI,GAAC,MAAhB,EAAuB;AAEnB,QAAIA,IAAI,IAAI,MAAR,IAAkB,CAACu1E,gBAAgB,CAACv1E,IAAD,CAAvC,EAA+C;AAC3C,UAAIo7B,UAAU,GAAGp8B,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACAm8B,MAAAA,UAAU,CAAC96B,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;AACAtB,MAAAA,QAAQ,CAACma,IAAT,CAAclY,WAAd,CAA0Bm6B,UAA1B;AACAm6C,MAAAA,gBAAgB,CAACv1E,IAAD,CAAhB,GAAyBo7B,UAAzB;AACH;;AAED,WAAOm6C,gBAAgB,CAACv1E,IAAD,CAAvB;AACH;;AAED,MAAIA,IAAJ,GAAU;AACN,WAAO,KAAKgC,YAAL,CAAkB,MAAlB,IAA4B,KAAKL,YAAL,CAAkB,MAAlB,CAA5B,GAAwD+R,SAA/D;AACH;;AAED9S,EAAAA,WAAW,GAAE;AACT;;AAEA,QAAI,KAAKZ,IAAT,EAAe;AACX,UAAIu1E,gBAAgB,CAAC,KAAKv1E,IAAN,CAApB,EACIwK,OAAO,CAAC+W,IAAR,CAAa,wDAAb,EAAuE,KAAKvhB,IAA5E,EADJ,KAGIu1E,gBAAgB,CAAC,KAAKv1E,IAAN,CAAhB,GAA8B,IAA9B;AACP;AACJ;;AAED8D,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACA,QAAI,KAAK9D,IAAT,EACI,OAAOu1E,gBAAgB,CAAC,KAAKv1E,IAAN,CAAvB;AACP;;AAEDyD,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AACA,QAAI,KAAKzD,IAAL,IAAa,CAACu1E,gBAAgB,CAAC,KAAKv1E,IAAN,CAAlC,EACIu1E,gBAAgB,CAAC,KAAKv1E,IAAN,CAAhB,GAA8B,IAA9B;AACP;;AAED,aAAWW,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AA+FlB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;;;;;;;;;;;;KAAZ;AAaP;;AAzJoD,CAA1D;;eA6JeT,cAAc,CAAClC,GAAf,CAAmB,UAAnB;;;;;;;;;;;ACjKf;;eAEe,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCFJ;AACX+gC,EAAAA,KAAK,EAAE,EADI;AAGXp2B,EAAAA,KAAK,EAAE;AACH1H,IAAAA,IAAI,EAAE,kBADH;AAEH2I,IAAAA,KAAK,EAAE,KAFJ;AAGHywB,IAAAA,SAAS,EAAE;AAHR,GAHI;AAQXgpB,EAAAA,MAAM,EAAE;AACJpiD,IAAAA,IAAI,EAAE,gBADF;AAEJ2I,IAAAA,KAAK,EAAE;AAFH,GARG;AAYXo1B,EAAAA,OAAO,EAAE;AACL/9B,IAAAA,IAAI,EAAE,YADD;AAEL2I,IAAAA,KAAK,EAAE;AAFF,GAZE;AAgBX4qD,EAAAA,IAAI,EAAE;AACFvzD,IAAAA,IAAI,EAAE,cADJ;AAEF2I,IAAAA,KAAK,EAAE;AAFL,GAhBK;AAoBX6pE,EAAAA,OAAO,EAAE;AACLxyE,IAAAA,IAAI,EAAE,aADD;AAEL2I,IAAAA,KAAK,EAAE;AAFF;AApBE;;;;;;;;;;ACAf;;AACA;;AACA;;AACA;;;;;;AAEA1J,cAAc,CAACC,MAAf,CAAsB,YAAtB,EAAoC,cAAcE,sBAAd,CAAwB;AAExD,aAAWC,UAAX,GAAuB;AAAE,WAAO;AAC5Bw8B,MAAAA,GAAG,EAAE;AAACt8B,QAAAA,IAAI,EAAEQ;AAAP,OADuB;AAE5Bg8B,MAAAA,IAAI,EAAE;AAACx8B,QAAAA,IAAI,EAAE9C;AAAP,OAFsB;AAG5BuD,MAAAA,IAAI,EAAE;AAACT,QAAAA,IAAI,EAAEQ;AAAP;AAHsB,KAAP;AAIvB;;AAEF,aAAWpC,MAAX,GAAmB;AAAC,WAAO,oBAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAX;AAkDlB;;AAEF+B,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;4BACG,KAAK+yE,UAAL,EAAkB;2BACnB,KAAK52C,GAAI;mCACD,KAAK62C,UAAW;cACrC,KAAK32C,IAAL,CAAUp/B,GAAV,CAAcu/B,GAAG,IAAE,KAAKy2C,SAAL,CAAez2C,GAAf,CAAnB,CAAwC;;KAJzC;AAMP;;AAEFu2C,EAAAA,UAAU,GAAE;AACR,QAAI,CAAC,KAAKzyE,IAAV,EAAiB,OAAO,EAAP;AAEjB,QAAI,OAAO,KAAKA,IAAZ,IAAoB,QAAxB,EACI,OAAO,qBAAK,iBAAgB,KAAKA,IAAK,aAAtC,CADJ,KAII,OAAO,KAAKA,IAAZ;AACP;;AAED2yE,EAAAA,SAAS,CAACz2C,GAAD,EAAK;AACV,WAAO,qBAAK,GAAE,4BAAW,sBAAQA,GAAR,CAAX,CAAyB,EAAvC;AACH;;AAEDw2C,EAAAA,UAAU,CAACxwE,CAAD,EAAG;AAETA,IAAAA,CAAC,CAACgC,eAAF;AACA,QAAIkgB,KAAK,GAAG3nB,KAAK,CAACC,IAAN,CAAWwF,CAAC,CAACoH,aAAF,CAAgB6Q,QAA3B,EAAqCtF,OAArC,CAA6C3S,CAAC,CAACwD,MAA/C,CAAZ;AACA,QAAIktE,OAAO,GAAGxuD,KAAK,GAAG,CAAC,CAAT,GAAa,KAAK2X,IAAL,CAAU3X,KAAV,CAAb,GAAgCliB,CAAC,CAACwD,MAAhD;AAEA,QAAIg2B,oBAAWn1B,QAAX,CAAoBqsE,OAApB,CAAJ,EACIA,OAAO,GAAGliE,SAAV;AAEJ,SAAKq/D,SAAL,CAAe,OAAf,EAAwB6C,OAAxB;AACH;;AA5FuD,CAA5D;;eAgGe3zE,cAAc,CAAClC,GAAf,CAAmB,YAAnB;;;;;;;;;;;ACrGf;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA,MAAM81E,MAAM,GAAG,IAAIhoD,GAAJ,EAAf;AAEAzqB,MAAM,CAACyyE,MAAP,GAAgBA,MAAhB;AAEA5zE,cAAc,CAACC,MAAf,CAAsB,SAAtB,EAAiC,cAAcE,sBAAd,CAAwB;AAErD,aAAWzB,MAAX,GAAmB;AAAC,WAAO6O,cAAP;AAAa;;AAEjC,aAAWnN,UAAX,GAAuB;AAAE,WAAO;AAC5ByzE,MAAAA,GAAG,EAAE;AAACvzE,QAAAA,IAAI,EAAEQ,MAAP;AAAeN,QAAAA,OAAO,EAAE;AAAxB,OADuB;AAE5Bo8B,MAAAA,GAAG,EAAE;AAACt8B,QAAAA,IAAI,EAAEQ;AAAP,OAFuB;AAG5Bg8B,MAAAA,IAAI,EAAE;AAACx8B,QAAAA,IAAI,EAAE9C;AAAP,OAHsB;AAI5BuD,MAAAA,IAAI,EAAE;AAACT,QAAAA,IAAI,EAAEQ;AAAP,OAJsB;AAK5B4I,MAAAA,KAAK,EAAE;AAACpJ,QAAAA,IAAI,EAAEQ,MAAP;AAAeN,QAAAA,OAAO,EAAE;AAAxB,OALqB;AAM5B6N,MAAAA,KAAK,EAAE;AAAC/N,QAAAA,IAAI,EAAEQ;AAAP,OANqB;AAO5Bq5B,MAAAA,SAAS,EAAE;AAAC75B,QAAAA,IAAI,EAAEQ,MAAP;AAAeN,QAAAA,OAAO,EAAE;AAAxB;AAPiB,KAAP;AAQvB;;AAEF7B,EAAAA,WAAW,CAACkvB,IAAI,GAAC,EAAN,EAAS;AAChB;AAEA,SAAKimD,aAAL,GAAqB,KAAKA,aAAL,CAAmBrxE,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKsxE,YAAL,GAAoB,KAAKA,YAAL,CAAkBtxE,IAAlB,CAAuB,IAAvB,CAApB;;AAEA,QAAI02B,UAAU,GAAGgD,oBAAWr+B,GAAX,CAAe+vB,IAAI,CAACsL,UAAL,IAAmB,MAAlC,CAAjB;;AAEA,SAAKtL,IAAL,GAAYlqB,MAAM,CAACwqB,MAAP,CAAc;AACtB0lD,MAAAA,GAAG,EAAE/yE,MAAM,CAACoH,IAAI,CAACC,KAAL,CAAWD,IAAI,CAAC8rE,MAAL,KAAgB,KAA3B,CAAD,CADW;AAEtBp3C,MAAAA,GAAG,EAAE,EAFiB;AAGtB77B,MAAAA,IAAI,EAAE,EAHgB;AAItB+7B,MAAAA,IAAI,EAAE,EAJgB;AAMtB3C,MAAAA,SAAS,EAAEtQ,gBAAOU,aAAP,IAAwB,GAAxB,GAA8B,MAA9B,GAAuC,OAN5B;AAOtB0pD,MAAAA,mBAAmB,EAAE,MAPC;AAStB51C,MAAAA,SAAS,EAAE,IATW;AAUtB61C,MAAAA,YAAY,EAAE,IAVQ;AAYtBh6C,MAAAA,MAAM,EAAE,cAZc;;AAYE;AAExBhN,MAAAA,OAAO,GAAE,CAAE,CAdW;;AAetBkQ,MAAAA,OAAO,GAAE,CAAE;;AAfW,KAAd,EAgBR+2C,eAAMtmD,IAAI,CAACvtB,IAAX,KAAkB,EAhBV,EAgBgB64B,UAAU,CAAC8wC,QAAX,IAAqB,EAhBrC,EAgB0Cp8C,IAhB1C,CAAZ;AAkBA,QAAI0H,KAAK,GAAG,KAAK52B,WAAL,CAAiByB,UAA7B;;AAEA,SAAK,IAAI2H,GAAT,IAAgB,KAAK8lB,IAArB,EAA2B;AACvB,UAAI0H,KAAK,CAACxtB,GAAD,CAAL,IAAc0J,SAAlB,EACI,KAAK1J,GAAL,IAAY,KAAK8lB,IAAL,CAAU9lB,GAAV,CAAZ;AACP;;AAED,SAAKuC,IAAL,GAAY,KAAKujB,IAAL,CAAUqM,MAAtB;AAEA,SAAKh5B,gBAAL,CAAsB,OAAtB,EAA+B,KAAKk8B,OAApC,EAA6C,KAA7C;AACA,SAAKl8B,gBAAL,CAAsB2oB,gBAAOM,QAAP,GAAgB,WAAhB,GAA4B,WAAlD,EAA+D,KAAKiqD,WAApE;AACA,SAAKlzE,gBAAL,CAAsB2oB,gBAAOM,QAAP,GAAgB,UAAhB,GAA2B,UAAjD,EAA6D,KAAKkqD,UAAlE;;AAEA,QAAI,KAAKxmD,IAAL,CAAUD,IAAd,EAAoB;AAChB,WAAK5uB,WAAL,CAAiB,KAAK6uB,IAAL,CAAUD,IAA3B;AACA,WAAKC,IAAL,CAAUD,IAAV,CAAewQ,KAAf,GAAuB,IAAvB;AACH;;AAED,QAAIk2C,aAAa,GAAGV,MAAM,CAAC91E,GAAP,CAAW,KAAK+1E,GAAhB,CAApB;AAEAD,IAAAA,MAAM,CAAC7nD,GAAP,CAAW,KAAK8nD,GAAhB,EAAqB,IAArB;;AAEA,QAAIS,aAAJ,EAAmB;AACfA,MAAAA,aAAa,CAACzS,WAAd,CAA0B,IAA1B;AACA;AACH;;AAED,QAAI1oC,UAAJ,EACIA,UAAU,CAACn6B,WAAX,CAAuB,IAAvB;AACP;;AAEDyuB,EAAAA,KAAK,CAACwP,GAAD,EAAK;AACN,WAAO,IAAIn6B,OAAJ,CAAYC,OAAO,IAAE;AAExB,WAAKwK,KAAL,CAAWe,MAAX,GAAqB,KAAKoM,qBAAL,GAA6BpM,MAA9B,GAAsC,IAA1D;AACA,WAAKb,SAAL,CAAenQ,MAAf,CAAsB,SAAtB;AAEAgX,MAAAA,UAAU,CAAC,MAAI;AACX,aAAK7G,SAAL,CAAetC,GAAf,CAAmB,MAAnB;AACH,OAFS,EAER,GAFQ,CAAV;AAIAmJ,MAAAA,UAAU,CAAC,MAAI;AACX,aAAKhX,MAAL;AACAs2E,QAAAA,MAAM,CAACt7C,MAAP,CAAc,KAAKu7C,GAAnB;AACA,aAAKhmD,IAAL,CAAUX,OAAV,CAAkB,IAAlB;AAEA,YAAI,KAAKW,IAAL,CAAUD,IAAd,EACI,OAAO,KAAKC,IAAL,CAAUD,IAAV,CAAewQ,KAAtB;AAEJr7B,QAAAA,OAAO,CAACk6B,GAAD,CAAP;AACH,OATS,EASR,GATQ,CAAV;AAWH,KApBM,CAAP;AAqBH;;AAED4kC,EAAAA,WAAW,CAACxkE,EAAD,EAAI;AACX,QAAI88B,SAAS,GAAG98B,EAAE,CAAC88B,SAAnB,CADW,CAGX;;AACA,QAAIA,SAAS,IAAI,OAAjB,EAA0B;AACtB,WAAKA,SAAL,GAAiB,KAAKtM,IAAL,CAAUomD,mBAA3B;AACA52E,MAAAA,EAAE,CAAC88B,SAAH,GAAe,KAAKtM,IAAL,CAAUomD,mBAAzB;AACH;;AAED,SAAKxmE,SAAL,CAAenQ,MAAf,CAAsB,SAAtB,EATW,CAWX;;AACI,UAAMukE,WAAN,CAAkBxkE,EAAlB;AAEA,SAAKwwB,IAAL,CAAUX,OAAV,CAAkB,IAAlB;AAEA,QAAI,KAAKW,IAAL,CAAUD,IAAd,EACI,OAAO,KAAKC,IAAL,CAAUD,IAAV,CAAewQ,KAAtB;AAEJ9pB,IAAAA,UAAU,CAAC,MAAI;AACXjX,MAAAA,EAAE,CAAC88B,SAAH,GAAeA,SAAf;AACH,KAFS,EAER,GAFQ,CAAV,CAnBO,CAuBX;AACH;;AAEDiD,EAAAA,OAAO,CAACH,GAAD,EAAK;AAER,QAAIA,GAAG,YAAY1O,UAAf,IAA8BptB,MAAM,CAACozE,UAAP,IAAqBt3C,GAAG,YAAYs3C,UAAtE,EACIt3C,GAAG,GAAGxrB,SAAN;AAEJ,QAAI,KAAKoc,IAAL,CAAUuP,OAAV,CAAkB,IAAlB,EAAwBH,GAAxB,MAAiC,KAAjC,IAA0C,KAAKpP,IAAL,CAAUqmD,YAAxD,EACI,KAAKzmD,KAAL,CAAWwP,GAAX;AACP;;AAED62C,EAAAA,aAAa,GAAE;AACX,SAAKz1C,SAAL,CAAe,IAAf;AACH;;AAED01C,EAAAA,YAAY,GAAE,CACV;AACH;;AAEDK,EAAAA,WAAW,CAACnxE,CAAD,EAAG;AACVA,IAAAA,CAAC,CAACgC,eAAF;AACA,SAAKo5B,SAAL,CAAe,KAAf;AACH;;AAEDg2C,EAAAA,UAAU,CAACpxE,CAAD,EAAG;AACTA,IAAAA,CAAC,CAACgC,eAAF;AACA,SAAKo5B,SAAL,CAAe,IAAf;AACH;;AAED78B,EAAAA,iBAAiB,GAAE;AACf,UAAMA,iBAAN;AAEAL,IAAAA,MAAM,CAACD,gBAAP,CAAwB,MAAxB,EAAgC,KAAK6yE,YAArC;AACA5yE,IAAAA,MAAM,CAACD,gBAAP,CAAwB,OAAxB,EAAiC,KAAK4yE,aAAtC;AAEA,QAAI,KAAKjmD,IAAL,CAAUxf,KAAd,EACI,KAAKd,KAAL,CAAWc,KAAX,GAAmB,KAAKwf,IAAL,CAAUxf,KAA7B;AAEJiG,IAAAA,UAAU,CAAC,MAAI;AACX,WAAK7G,SAAL,CAAetC,GAAf,CAAmB,SAAnB;AACH,KAFS,EAER,GAFQ,CAAV;AAIA,SAAKkzB,SAAL;AACH;;AAEDx8B,EAAAA,oBAAoB,GAAE;AAClB,UAAMA,oBAAN;AACAV,IAAAA,MAAM,CAACsE,mBAAP,CAA2B,MAA3B,EAAmC,KAAKsuE,YAAxC;AACA5yE,IAAAA,MAAM,CAACsE,mBAAP,CAA2B,OAA3B,EAAoC,KAAKquE,aAAzC;AACH;;AAEDz1C,EAAAA,SAAS,CAACryB,KAAK,GAAC,IAAP,EAAY;AAEjB49B,IAAAA,YAAY,CAAC,KAAK4qC,iBAAN,CAAZ;AAEA,QAAI,CAACz3E,QAAQ,CAAC42D,QAAT,EAAL,EAA2B,OAJV,CAMjB;;AACA,QAAI3c,KAAK,GAAGhrC,KAAK,KAAG,IAAR,IAAc,CAAC,KAAKwoE,iBAApB,GAAsC,KAAK3mD,IAAL,CAAUwQ,SAAhD,GAA0DryB,KAAtE,CAPiB,CASjB;;AACA,QAAI,CAACA,KAAD,IAAU,CAAC,KAAK6hB,IAAL,CAAUwQ,SAAzB,EAAqC;AAErC,SAAKm2C,iBAAL,GAAyBlgE,UAAU,CAAC,MAAI;AACpC,WAAKmZ,KAAL;AACH,KAFkC,EAEhCupB,KAFgC,CAAnC;AAGH;;AAEDv2C,EAAAA,MAAM,GAAE;AAAC,WAAO,qBAAK;;;;wBAID,KAAKM,IAAK;uBACX,KAAK67B,GAAI;wBACR,KAAKE,IAAK;yBACT,CAAC,CAAC,KAAKpzB,KAAM;yBACb,KAAK+qE,eAAgB;;;KARjC;AAWP;;AAEFA,EAAAA,eAAe,CAACxxE,CAAD,EAAG;AACdA,IAAAA,CAAC,CAACgC,eAAF;AACA,QAAIyM,IAAI,GAAGzO,CAAC,CAACtE,WAAF,CAAcZ,IAAd,IAAsB,aAAtB,GAAsCkF,CAAC,CAACiE,MAAxC,GAAiDuK,SAA5D;AACA,SAAK2rB,OAAL,CAAa1rB,IAAb;AACH;;AA5MoD,CAAzD;;eAiNe1R,cAAc,CAAClC,GAAf,CAAmB,SAAnB;;;AAEf,IAAI42E,UAAU,GAAG10E,cAAc,CAAClC,GAAf,CAAmB,SAAnB,CAAjB;;AAEA,KAAK,IAAIiK,GAAT,IAAgBosE,cAAhB,EAAuB;AACnB,MAAI,CAACO,UAAU,CAAC3sE,GAAD,CAAf,EACI2sE,UAAU,CAAC3sE,GAAD,CAAV,GAAkB,CAAC60B,GAAD,EAAM/O,IAAI,GAAC,EAAX,KAAgB;AAC9B,QAAI,OAAO+O,GAAP,IAAc,QAAlB,EAA4B;AACxB/O,MAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;AACAA,MAAAA,IAAI,CAAC+O,GAAL,GAAWA,GAAX;AACH;;AAED,QAAI+3C,KAAK,GAAG30E,cAAc,CAAClC,GAAf,CAAmB,SAAnB,CAAZ;AACA,WAAO,IAAI62E,KAAJ,CAAUhxE,MAAM,CAACwqB,MAAP,CAAc,EAAd,EAAkBgmD,eAAMpsE,GAAN,CAAlB,EAA8B8lB,IAA9B,CAAV,CAAP;AACH,GARD;AASP;;;;AC5OD;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAGA;;AAGA;;AAGA;;;;AARA;AAGA1sB,MAAM,CAACw7B,MAAP,GAAgBA,eAAhB;AAGAx7B,MAAM,CAACy4B,IAAP,GAAcA,aAAd;AAGAz4B,MAAM,CAACwzE,KAAP,GAAeA,cAAf;;AAGA,SAASC,eAAT,GAA0B;AACtB,MAAIC,EAAE,GAAG93E,QAAQ,CAAC+3E,gBAAT,CAA0B/3E,QAA1B,EAAoCg4E,UAAU,CAACC,YAA/C,EAA6D,IAA7D,EAAmE,IAAnE,CAAT;AACA,MAAIC,OAAJ;AACA,MAAIC,QAAQ,GAAG,EAAf;;AAEA,SAAOD,OAAO,GAAGJ,EAAE,CAACM,QAAH,EAAjB,EAAgC;AAC5BD,IAAAA,QAAQ,CAACruE,IAAT,CAAcouE,OAAd;AACH;;AAEDC,EAAAA,QAAQ,CAAC93E,OAAT,CAAiBg4E,GAAG,IAAE;AAClB,QAAIt4E,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACAF,IAAAA,GAAG,CAAC2Q,SAAJ,CAActC,GAAd,CAAkB,YAAlB;AAEA,QAAImB,GAAG,GAAG8oE,GAAG,CAAC1pC,WAAd;AACA,QAAI2pC,IAAI,GAAG/oE,GAAG,CAACvI,KAAJ,CAAU,IAAV,CAAX;AACA,QAAIzD,IAAI,GAAG+0E,IAAI,CAACpxE,KAAL,EAAX;AACAqI,IAAAA,GAAG,GAAG+oE,IAAI,CAAC9oE,IAAL,CAAU,IAAV,CAAN;AACAzP,IAAAA,GAAG,CAACG,SAAJ,GAAgBqP,GAAhB;AAEA,QAAIhM,IAAJ,EACIxD,GAAG,CAACuB,YAAJ,CAAiB,MAAjB,EAAyBiC,IAAzB;AAEJ,QAAIg1E,MAAM,GAAGx4E,GAAG,CAACmB,aAAJ,CAAkB,QAAlB,CAAb;AACA,QAAIq3E,MAAJ,EACIl4B,IAAI,CAACk4B,MAAM,CAACzrE,SAAR,CAAJ;AAEJurE,IAAAA,GAAG,CAACvT,WAAJ,CAAgB/kE,GAAhB;AACH,GAlBD;AAmBH;;AAED83E,eAAe,IAEf;;AACA3+C,OAAO,CAACK,SAAR,GAAoB,CAAElF,CAAC,IAAI,SAASkF,SAAT,GAAoB;AAC3C,MAAIshC,GAAG,GAAGxmC,CAAC,CAACpF,KAAF,CAAQ,IAAR,EAAcnpB,SAAd,CAAV;AACA+xE,EAAAA,eAAe;AACf,SAAOhd,GAAP;AACH,CAJmB,EAIjB3hC,OAAO,CAACK,SAJS,CAApB;;AAMAL,OAAO,CAACO,YAAR,GAAuB,CAAEpF,CAAC,IAAI,SAASoF,YAAT,GAAuB;AACjD,MAAIohC,GAAG,GAAGxmC,CAAC,CAACpF,KAAF,CAAQ,IAAR,EAAcnpB,SAAd,CAAV;AACA+xE,EAAAA,eAAe;AACf,SAAOhd,GAAP;AACH,CAJsB,EAIpB3hC,OAAO,CAACO,YAJY,CAAvB;;AAMAr1B,MAAM,CAACD,gBAAP,CAAwB,UAAxB,EAAoC,YAAU;AAC1C0zE,EAAAA,eAAe;AAClB,CAFD;;ACtFA,IAAIW,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAInyE,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOD,GAAP,EAAY;AACZ,QAAI2nB,OAAO,GAAG,CAAC,KAAK3nB,GAAG,CAACw6D,KAAV,EAAiBjvD,KAAjB,CAAuB,+DAAvB,CAAd;;AACA,QAAIoc,OAAJ,EAAa;AACX,aAAO0qD,UAAU,CAAC1qD,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAAS0qD,UAAT,CAAoB1zE,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAWpE,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD;;AAEDsyB,OAAO,CAACulD,YAAR,GAAuBD,kBAAvB;AACAtlD,OAAO,CAACwlD,UAAR,GAAqBA,UAArB;;AC5BA,IAAID,YAAY,GAAGh5E,OAAO,CAAC,cAAD,CAAP,CAAwBg5E,YAA3C;;AAEA,SAASE,eAAT,CAAyBC,OAAzB,EAAkC;AAChC,MAAI,CAACp4E,KAAK,CAACoS,OAAN,CAAcgmE,OAAd,CAAL,EAA6B;AAC3BA,IAAAA,OAAO,GAAG,CAACA,OAAD,CAAV;AACD;;AAED,MAAIj4E,EAAE,GAAGi4E,OAAO,CAACA,OAAO,CAAC7wE,MAAR,GAAiB,CAAlB,CAAhB;;AAEA,MAAI;AACF,WAAOjC,OAAO,CAACC,OAAR,CAAgBtG,OAAO,CAACkB,EAAD,CAAvB,CAAP;AACD,GAFD,CAEE,OAAO0F,GAAP,EAAY;AACZ,QAAIA,GAAG,CAACq6B,IAAJ,KAAa,kBAAjB,EAAqC;AACnC,aAAO,IAAIm4C,WAAJ,CAAgB,UAAU9yE,OAAV,EAAmBC,MAAnB,EAA2B;AAChD8yE,QAAAA,WAAW,CAACF,OAAO,CAAClvE,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAD,CAAX,CACGqP,IADH,CACQ,YAAY;AAChB,iBAAOtZ,OAAO,CAACkB,EAAD,CAAd;AACD,SAHH,EAIGoY,IAJH,CAIQhT,OAJR,EAIiBC,MAJjB;AAKD,OANM,CAAP;AAOD;;AAED,UAAMK,GAAN;AACD;AACF;;AAED,SAASyyE,WAAT,CAAqBF,OAArB,EAA8B;AAC5B,SAAO9yE,OAAO,CAACqG,GAAR,CAAYysE,OAAO,CAACl4E,GAAR,CAAYq4E,UAAZ,CAAZ,CAAP;AACD;;AAED,IAAIC,aAAa,GAAG,EAApB;;AACA,SAASC,oBAAT,CAA8B31E,IAA9B,EAAoC41E,MAApC,EAA4C;AAC1CF,EAAAA,aAAa,CAAC11E,IAAD,CAAb,GAAsB41E,MAAtB;AACD;;AAED/lD,MAAM,CAACD,OAAP,GAAiBA,OAAO,GAAGylD,eAA3B;AACAzlD,OAAO,CAACimD,IAAR,GAAeL,WAAf;AACA5lD,OAAO,CAACqK,QAAR,GAAmB07C,oBAAnB;AAEA,IAAIL,OAAO,GAAG,EAAd;;AACA,SAASG,UAAT,CAAoBK,MAApB,EAA4B;AAC1B,MAAIz4E,EAAJ;;AACA,MAAIH,KAAK,CAACoS,OAAN,CAAcwmE,MAAd,CAAJ,EAA2B;AACzBz4E,IAAAA,EAAE,GAAGy4E,MAAM,CAAC,CAAD,CAAX;AACAA,IAAAA,MAAM,GAAGA,MAAM,CAAC,CAAD,CAAf;AACD;;AAED,MAAIR,OAAO,CAACQ,MAAD,CAAX,EAAqB;AACnB,WAAOR,OAAO,CAACQ,MAAD,CAAd;AACD;;AAED,MAAI91E,IAAI,GAAG,CAAC81E,MAAM,CAACC,SAAP,CAAiBD,MAAM,CAAChyC,WAAP,CAAmB,GAAnB,IAA0B,CAA3C,EAA8CgyC,MAAM,CAACrxE,MAArD,KAAgEqxE,MAAjE,EAAyEroE,WAAzE,EAAX;AACA,MAAIuoE,YAAY,GAAGN,aAAa,CAAC11E,IAAD,CAAhC;;AACA,MAAIg2E,YAAJ,EAAkB;AAChB,WAAOV,OAAO,CAACQ,MAAD,CAAP,GAAkBE,YAAY,CAACb,YAAY,KAAKW,MAAlB,CAAZ,CACtBrgE,IADsB,CACjB,UAAUwgE,QAAV,EAAoB;AACxB,UAAIA,QAAJ,EAAc;AACZpmD,QAAAA,MAAM,CAACimD,MAAP,CAAc77C,QAAd,CAAuB58B,EAAvB,EAA2B44E,QAA3B;AACD;;AAED,aAAOA,QAAP;AACD,KAPsB,EAOpBC,KAPoB,CAOd,UAASvzE,CAAT,EAAY;AACnB,aAAO2yE,OAAO,CAACQ,MAAD,CAAd;AAEA,YAAMnzE,CAAN;AACD,KAXsB,CAAzB;AAYD;AACF;;AAED,SAAS4yE,WAAT,CAAqBY,QAArB,EAA+B;AAC7B,OAAKA,QAAL,GAAgBA,QAAhB;AACA,OAAKp5C,OAAL,GAAe,IAAf;AACD;;AAEDw4C,WAAW,CAAC/xE,SAAZ,CAAsBiS,IAAtB,GAA6B,UAAU2gE,SAAV,EAAqBC,OAArB,EAA8B;AACzD,MAAI,KAAKt5C,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAIv6B,OAAJ,CAAY,KAAK2zE,QAAjB,CAAf;AAC3B,SAAO,KAAKp5C,OAAL,CAAatnB,IAAb,CAAkB2gE,SAAlB,EAA6BC,OAA7B,CAAP;AACD,CAHD;;AAKAd,WAAW,CAAC/xE,SAAZ,CAAsB0yE,KAAtB,GAA8B,UAAUG,OAAV,EAAmB;AAC/C,MAAI,KAAKt5C,OAAL,KAAiB,IAArB,EAA2B,KAAKA,OAAL,GAAe,IAAIv6B,OAAJ,CAAY,KAAK2zE,QAAjB,CAAf;AAC3B,SAAO,KAAKp5C,OAAL,CAAam5C,KAAb,CAAmBG,OAAnB,CAAP;AACD,CAHD;;AC/EAxmD,MAAM,CAACD,OAAP,GAAiB,SAAS0mD,cAAT,CAAwBR,MAAxB,EAAgC;AAC/C,SAAO/tC,KAAK,CAAC+tC,MAAD,CAAL,CAAcrgE,IAAd,CAAmB,UAAU8gE,GAAV,EAAe;AACvC,WAAOA,GAAG,CAACp9C,IAAJ,EAAP;AACD,GAFM,CAAP;AAGD,CAJD","file":"bui.js","sourceRoot":"../demo","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// tslint:disable-next-line:no-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  readonly polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.insertBefore(start!, before);\n        start = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes =\n    (container: Node, start: Node|null, end: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.removeChild(start!);\n        start = n;\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  readonly value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, causing it to actually be written to the\n   * DOM.\n   *\n   * Directives are run at the start of `commit`, so that if they call\n   * `part.setValue(...)` synchronously that value will be used in the current\n   * commit, and there's no need to call `part.commit()` within the directive.\n   * If directives set a part value asynchronously, then they must call\n   * `part.commit()` manually.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  readonly parts: TemplatePart[] = [];\n  readonly element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n\n    const nodesToRemove: Node[] = [];\n    const stack: Node[] = [];\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        element.content,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    // Keeps track of the last index associated with a part. We try to delete\n    // unnecessary nodes, but we never want to associate two different parts\n    // to the same index. They must have a constant node between.\n    let lastPartIndex = 0;\n    let index = -1;\n    let partIndex = 0;\n    const {strings, values: {length}} = result;\n    while (partIndex < length) {\n      const node = walker.nextNode() as Element | Comment | Text | null;\n      if (node === null) {\n        // We've exhausted the content inside a nested template element.\n        // Because we still have parts (the outer for-loop), we know:\n        // - There is a template in the stack\n        // - The walker will find a nextNode outside the template\n        walker.currentNode = stack.pop()!;\n        continue;\n      }\n      index++;\n\n      if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n        if ((node as Element).hasAttributes()) {\n          const attributes = (node as Element).attributes;\n          const {length} = attributes;\n          // Per\n          // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n          // attributes are not guaranteed to be returned in document order.\n          // In particular, Edge/IE can return them out of order, so we cannot\n          // assume a correspondence between part index and attribute index.\n          let count = 0;\n          for (let i = 0; i < length; i++) {\n            if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n              count++;\n            }\n          }\n          while (count-- > 0) {\n            // Get the template literal section leading up to the first\n            // expression in this attribute\n            const stringForPart = strings[partIndex];\n            // Find the attribute name\n            const name = lastAttributeNameRegex.exec(stringForPart)![2];\n            // Find the corresponding attribute\n            // All bound attributes have had a suffix added in\n            // TemplateResult#getHTML to opt out of special attribute\n            // handling. To look up the attribute value we also need to add\n            // the suffix.\n            const attributeLookupName =\n                name.toLowerCase() + boundAttributeSuffix;\n            const attributeValue =\n                (node as Element).getAttribute(attributeLookupName)!;\n            (node as Element).removeAttribute(attributeLookupName);\n            const statics = attributeValue.split(markerRegex);\n            this.parts.push({type: 'attribute', index, name, strings: statics});\n            partIndex += statics.length - 1;\n          }\n        }\n        if ((node as Element).tagName === 'TEMPLATE') {\n          stack.push(node);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n      } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n        const data = (node as Text).data;\n        if (data.indexOf(marker) >= 0) {\n          const parent = node.parentNode!;\n          const strings = data.split(markerRegex);\n          const lastIndex = strings.length - 1;\n          // Generate a new text node for each literal section\n          // These nodes are also used as the markers for node parts\n          for (let i = 0; i < lastIndex; i++) {\n            let insert: Node;\n            let s = strings[i];\n            if (s === '') {\n              insert = createMarker();\n            } else {\n              const match = lastAttributeNameRegex.exec(s);\n              if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                s = s.slice(0, match.index) + match[1] +\n                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n              }\n              insert = document.createTextNode(s);\n            }\n            parent.insertBefore(insert, node);\n            this.parts.push({type: 'node', index: ++index});\n          }\n          // If there's no text, we must insert a comment to mark our place.\n          // Else, we can trust it will stick around after cloning.\n          if (strings[lastIndex] === '') {\n            parent.insertBefore(createMarker(), node);\n            nodesToRemove.push(node);\n          } else {\n            (node as Text).data = strings[lastIndex];\n          }\n          // We have a part for each match found\n          partIndex += lastIndex;\n        }\n      } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n        if ((node as Comment).data === marker) {\n          const parent = node.parentNode!;\n          // Add a new marker node to be the startNode of the Part if any of\n          // the following are true:\n          //  * We don't have a previousSibling\n          //  * The previousSibling is already the start of a previous part\n          if (node.previousSibling === null || index === lastPartIndex) {\n            index++;\n            parent.insertBefore(createMarker(), node);\n          }\n          lastPartIndex = index;\n          this.parts.push({type: 'node', index});\n          // If we don't have a nextSibling, keep this node so we have an end.\n          // Else, we can remove it to save future costs.\n          if (node.nextSibling === null) {\n            (node as Comment).data = '';\n          } else {\n            nodesToRemove.push(node);\n            index--;\n          }\n          partIndex++;\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            // TODO (justinfagnani): consider whether it's even worth it to\n            // make bindings in comments work\n            this.parts.push({type: 'node', index: -1});\n            partIndex++;\n          }\n        }\n      }\n    }\n\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\nconst endsWith = (str: string, suffix: string): boolean => {\n  const index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  readonly type: 'node',\n  index: number\n}|{readonly type: 'attribute', index: number, readonly name: string, readonly strings: ReadonlyArray<string>};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  private readonly __parts: Array<Part|undefined> = [];\n  readonly processor: TemplateProcessor;\n  readonly options: RenderOptions;\n  readonly template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: ReadonlyArray<unknown>) {\n    let i = 0;\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // There are a number of steps in the lifecycle of a template instance's\n    // DOM fragment:\n    //  1. Clone - create the instance fragment\n    //  2. Adopt - adopt into the main document\n    //  3. Process - find part markers and create parts\n    //  4. Upgrade - upgrade custom elements\n    //  5. Update - set node, attribute, property, etc., values\n    //  6. Connect - connect to the document. Optional and outside of this\n    //     method.\n    //\n    // We have a few constraints on the ordering of these steps:\n    //  * We need to upgrade before updating, so that property values will pass\n    //    through any property setters.\n    //  * We would like to process before upgrading so that we're sure that the\n    //    cloned fragment is inert and not disturbed by self-modifying DOM.\n    //  * We want custom elements to upgrade even in disconnected fragments.\n    //\n    // Given these constraints, with full custom elements support we would\n    // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n    //\n    // But Safari dooes not implement CustomElementRegistry#upgrade, so we\n    // can not implement that order and still have upgrade-before-update and\n    // upgrade disconnected fragments. So we instead sacrifice the\n    // process-before-upgrade constraint, since in Custom Elements v1 elements\n    // must not modify their light DOM in the constructor. We still have issues\n    // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n    // that don't strictly adhere to the no-modification rule because shadow\n    // DOM, which may be created in the constructor, is emulated by being placed\n    // in the light DOM.\n    //\n    // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n    // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n    // in one step.\n    //\n    // The Custom Elements v1 polyfill supports upgrade(), so the order when\n    // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n    // Connect.\n\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const stack: Node[] = [];\n    const parts = this.template.parts;\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        fragment,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    let partIndex = 0;\n    let nodeIndex = 0;\n    let part: TemplatePart;\n    let node = walker.nextNode();\n    // Loop through all the nodes and parts of a template\n    while (partIndex < parts.length) {\n      part = parts[partIndex];\n      if (!isTemplatePartActive(part)) {\n        this.__parts.push(undefined);\n        partIndex++;\n        continue;\n      }\n\n      // Progress the tree walker until we find our next part's node.\n      // Note that multiple parts may share the same node (attribute parts\n      // on a single element), so this loop may not run at all.\n      while (nodeIndex < part.index) {\n        nodeIndex++;\n        if (node!.nodeName === 'TEMPLATE') {\n          stack.push(node!);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n        if ((node = walker.nextNode()) === null) {\n          // We've exhausted the content inside a nested template element.\n          // Because we still have parts (the outer for-loop), we know:\n          // - There is a template in the stack\n          // - The walker will find a nextNode outside the template\n          walker.currentNode = stack.pop()!;\n          node = walker.nextNode();\n        }\n      }\n\n      // We've arrived at our part's node.\n      if (part.type === 'node') {\n        const part = this.processor.handleTextExpression(this.options);\n        part.insertAfterNode(node!.previousSibling!);\n        this.__parts.push(part);\n      } else {\n        this.__parts.push(...this.processor.handleAttributeExpressions(\n            node as Element, part.name, part.strings, this.options));\n      }\n      partIndex++;\n    }\n\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\nconst commentMarker = ` ${marker} `;\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  readonly strings: TemplateStringsArray;\n  readonly values: ReadonlyArray<unknown>;\n  readonly type: string;\n  readonly processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: ReadonlyArray<unknown>,\n      type: string, processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const l = this.strings.length - 1;\n    let html = '';\n    let isCommentBinding = false;\n\n    for (let i = 0; i < l; i++) {\n      const s = this.strings[i];\n      // For each binding we want to determine the kind of marker to insert\n      // into the template source before it's parsed by the browser's HTML\n      // parser. The marker type is based on whether the expression is in an\n      // attribute, text, or comment poisition.\n      //   * For node-position bindings we insert a comment with the marker\n      //     sentinel as its text content, like <!--{{lit-guid}}-->.\n      //   * For attribute bindings we insert just the marker sentinel for the\n      //     first binding, so that we support unquoted attribute bindings.\n      //     Subsequent bindings can use a comment marker because multi-binding\n      //     attributes must be quoted.\n      //   * For comment bindings we insert just the marker sentinel so we don't\n      //     close the comment.\n      //\n      // The following code scans the template source, but is *not* an HTML\n      // parser. We don't need to track the tree structure of the HTML, only\n      // whether a binding is inside a comment, and if not, if it appears to be\n      // the first binding in an attribute.\n      const commentOpen = s.lastIndexOf('<!--');\n      // We're in comment position if we have a comment open with no following\n      // comment close. Because <-- can appear in an attribute value there can\n      // be false positives.\n      isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n          s.indexOf('-->', commentOpen + 1) === -1;\n      // Check to see if we have an attribute-like sequence preceeding the\n      // expression. This can match \"name=value\" like structures in text,\n      // comments, and attribute values, so there can be false-positives.\n      const attributeMatch = lastAttributeNameRegex.exec(s);\n      if (attributeMatch === null) {\n        // We're only in this branch if we don't have a attribute-like\n        // preceeding sequence. For comments, this guards against unusual\n        // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n        // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n        // below.\n        html += s + (isCommentBinding ? commentMarker : nodeMarker);\n      } else {\n        // For attributes we use just a marker sentinel, and also append a\n        // $lit$ suffix to the name to opt-out of attribute-specific parsing\n        // that IE and Edge do for style and certain SVG attributes.\n        html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n            attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n            marker;\n      }\n    }\n    html += this.strings[l];\n    return html;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|Symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return Array.isArray(value) ||\n      // tslint:disable-next-line:no-any\n      !!(value && (value as any)[Symbol.iterator]);\n};\n\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attibute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  readonly parts: ReadonlyArray<AttributePart>;\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      (this.parts as AttributePart[])[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (isPrimitive(v) || !isIterable(v)) {\n          text += typeof v === 'string' ? v : String(v);\n        } else {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart implements Part {\n  readonly committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(committer: AttributeCommitter) {\n    this.committer = committer;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart implements Part {\n  readonly options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n   * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n   * such as those that appear in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part.__insert(this.startNode = createMarker());\n    part.__insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref.__insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    const value = this.__pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this.__commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this.__commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this.__commitNode(value);\n    } else if (isIterable(value)) {\n      this.__commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this.__commitText(value);\n    }\n  }\n\n  private __insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private __commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this.__insert(value);\n    this.value = value;\n  }\n\n  private __commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    // If `value` isn't already a string, we explicitly convert it here in case\n    // it can't be implicitly converted - i.e. it's a symbol.\n    const valueAsString: string =\n        typeof value === 'string' ? value : String(value);\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = valueAsString;\n    } else {\n      this.__commitNode(document.createTextNode(valueAsString));\n    }\n    this.value = value;\n  }\n\n  private __commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this.__commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private __commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n    const value = !!this.__pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n      this.value = value;\n    }\n    this.__pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  readonly single: boolean;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  protected _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // tslint:disable-next-line:no-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  // tslint:disable-next-line:no-any\n  window.addEventListener('test', options as any, options);\n  // tslint:disable-next-line:no-any\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  readonly element: Element;\n  readonly eventName: string;\n  readonly eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  private __options?: AddEventListenerOptions;\n  private __pendingValue: undefined|EventHandlerWithOptions = undefined;\n  private readonly __boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this.__boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this.__pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    if (shouldAddListener) {\n      this.__options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    this.value = newListener;\n    this.__pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): ReadonlyArray<Part> {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const committer = new PropertyCommitter(element, name.slice(1), strings);\n      return committer.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const committer = new AttributeCommitter(element, name, strings);\n    return committer.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  readonly stringsArray: WeakMap<TemplateStringsArray, Template>; //\n  readonly keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.2');\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module shady-render\n */\n\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(\n    template: Template, nodesToRemove: Set<Node>) {\n  const {element: {content}, parts} = template;\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let part = parts[partIndex];\n  let nodeIndex = -1;\n  let removeCount = 0;\n  const nodesToRemoveInTemplate = [];\n  let currentRemovingNode: Node|null = null;\n  while (walker.nextNode()) {\n    nodeIndex++;\n    const node = walker.currentNode as Element;\n    // End removal if stepped past the removing node\n    if (node.previousSibling === currentRemovingNode) {\n      currentRemovingNode = null;\n    }\n    // A node to remove was found in the template\n    if (nodesToRemove.has(node)) {\n      nodesToRemoveInTemplate.push(node);\n      // Track node we're removing\n      if (currentRemovingNode === null) {\n        currentRemovingNode = node;\n      }\n    }\n    // When removing, increment count by which to adjust subsequent part indices\n    if (currentRemovingNode !== null) {\n      removeCount++;\n    }\n    while (part !== undefined && part.index === nodeIndex) {\n      // If part is in a removed node deactivate it by setting index to -1 or\n      // adjust the index as needed.\n      part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n      // go to the next active part.\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n      part = parts[partIndex];\n    }\n  }\n  nodesToRemoveInTemplate.forEach((n) => n.parentNode!.removeChild(n));\n}\n\nconst countNodes = (node: Node) => {\n  let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n  const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n  while (walker.nextNode()) {\n    count++;\n  }\n  return count;\n};\n\nconst nextActiveIndexInTemplateParts =\n    (parts: TemplatePart[], startIndex: number = -1) => {\n      for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(\n    template: Template, node: Node, refNode: Node|null = null) {\n  const {element: {content}, parts} = template;\n  // If there's no refNode, then put node at end of template.\n  // No part indices need to be shifted in this case.\n  if (refNode === null || refNode === undefined) {\n    content.appendChild(node);\n    return;\n  }\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let insertCount = 0;\n  let walkerIndex = -1;\n  while (walker.nextNode()) {\n    walkerIndex++;\n    const walkerNode = walker.currentNode as Element;\n    if (walkerNode === refNode) {\n      insertCount = countNodes(node);\n      refNode.parentNode!.insertBefore(node, refNode);\n    }\n    while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n      // If we've inserted the node, simply adjust all subsequent parts\n      if (insertCount > 0) {\n        while (partIndex !== -1) {\n          parts[partIndex].index += insertCount;\n          partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n        return;\n      }\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @module shady-render\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {removeNodes} from './dom.js';\nimport {insertNodeIntoTemplate, removeNodesFromTemplate} from './modify-template.js';\nimport {RenderOptions} from './render-options.js';\nimport {parts, render as litRender} from './render.js';\nimport {templateCaches} from './template-factory.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\nexport {html, svg, TemplateResult} from '../lit-html.js';\n\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type: string, scopeName: string) =>\n    `${type}--${scopeName}`;\n\nlet compatibleShadyCSSVersion = true;\n\nif (typeof window.ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n  console.warn(\n      `Incompatible ShadyCSS version detected. ` +\n      `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n      `@webcomponents/shadycss@1.3.1.`);\n  compatibleShadyCSSVersion = false;\n}\n\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nconst shadyTemplateFactory = (scopeName: string) =>\n    (result: TemplateResult) => {\n      const cacheKey = getTemplateCacheKey(result.type, scopeName);\n      let templateCache = templateCaches.get(cacheKey);\n      if (templateCache === undefined) {\n        templateCache = {\n          stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n          keyString: new Map<string, Template>()\n        };\n        templateCaches.set(cacheKey, templateCache);\n      }\n\n      let template = templateCache.stringsArray.get(result.strings);\n      if (template !== undefined) {\n        return template;\n      }\n\n      const key = result.strings.join(marker);\n      template = templateCache.keyString.get(key);\n      if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n          window.ShadyCSS!.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n      }\n      templateCache.stringsArray.set(result.strings, template);\n      return template;\n    };\n\nconst TEMPLATE_TYPES = ['html', 'svg'];\n\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName: string) => {\n  TEMPLATE_TYPES.forEach((type) => {\n    const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n    if (templates !== undefined) {\n      templates.keyString.forEach((template) => {\n        const {element: {content}} = template;\n        // IE 11 doesn't support the iterable param Set constructor\n        const styles = new Set<Element>();\n        Array.from(content.querySelectorAll('style')).forEach((s: Element) => {\n          styles.add(s);\n        });\n        removeNodesFromTemplate(template, styles);\n      });\n    }\n  });\n};\n\nconst shadyRenderSet = new Set<string>();\n\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles =\n    (scopeName: string, renderedDOM: DocumentFragment, template?: Template) => {\n      shadyRenderSet.add(scopeName);\n      // If `renderedDOM` is stamped from a Template, then we need to edit that\n      // Template's underlying template element. Otherwise, we create one here\n      // to give to ShadyCSS, which still requires one while scoping.\n      const templateElement =\n          !!template ? template.element : document.createElement('template');\n      // Move styles out of rendered DOM and store.\n      const styles = renderedDOM.querySelectorAll('style');\n      const {length} = styles;\n      // If there are no styles, skip unnecessary work\n      if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n        return;\n      }\n      const condensedStyle = document.createElement('style');\n      // Collect styles into a single style. This helps us make sure ShadyCSS\n      // manipulations will not prevent us from being able to fix up template\n      // part indices.\n      // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n      // currently does this anyway. When it does not, this should be changed.\n      for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode!.removeChild(style);\n        condensedStyle.textContent! += style.textContent;\n      }\n      // Remove styles from nested templates in this scope.\n      removeStylesFromLitTemplates(scopeName);\n      // And then put the condensed style into the \"root\" template passed in as\n      // `template`.\n      const content = templateElement.content;\n      if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n      } else {\n        content.insertBefore(condensedStyle, content.firstChild);\n      }\n      // Note, it's important that ShadyCSS gets the template that `lit-html`\n      // will actually render so that it can update the style inside when\n      // needed (e.g. @apply native Shadow DOM case).\n      window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n      const style = content.querySelector('style');\n      if (window.ShadyCSS!.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n      } else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set<Node>();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n      }\n    };\n\nexport interface ShadyRenderOptions extends Partial<RenderOptions> {\n  scopeName: string;\n}\n\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment|ShadowRoot,\n     options: ShadyRenderOptions) => {\n      if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n      }\n      const scopeName = options.scopeName;\n      const hasRendered = parts.has(container);\n      const needsScoping = compatibleShadyCSSVersion &&\n          container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n          !!(container as ShadowRoot).host;\n      // Handle first render to a scope specially...\n      const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n      // On first scope render, render into a fragment; this cannot be a single\n      // fragment that is reused since nested renders can occur synchronously.\n      const renderContainer =\n          firstScopeRender ? document.createDocumentFragment() : container;\n      litRender(\n          result,\n          renderContainer,\n          {templateFactory: shadyTemplateFactory(scopeName), ...options} as\n              RenderOptions);\n      // When performing first scope render,\n      // (1) We've rendered into a fragment so that there's a chance to\n      // `prepareTemplateStyles` before sub-elements hit the DOM\n      // (which might cause them to render based on a common pattern of\n      // rendering in a custom element's `connectedCallback`);\n      // (2) Scope the template with ShadyCSS one time only for this scope.\n      // (3) Render the fragment into the container and make sure the\n      // container knows its `part` is the one we just rendered. This ensures\n      // DOM will be re-used on subsequent renders.\n      if (firstScopeRender) {\n        const part = parts.get(renderContainer)!;\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(\n            scopeName, renderContainer as DocumentFragment, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n      }\n      // After elements have hit the DOM, update styling if this is the\n      // initial render to this container.\n      // This is needed whenever dynamic changes are made so it would be\n      // safest to do every render; however, this would regress performance\n      // so we leave it up to the user to call `ShadyCSS.styleElement`\n      // for dynamic changes.\n      if (!hasRendered && needsScoping) {\n        window.ShadyCSS!.styleElement((container as ShadowRoot).host);\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    <P extends PropertyKey>(prop: P, _obj: unknown): P => prop;\n\ndeclare global {\n  var JSCompiler_renameProperty: <P extends PropertyKey>(\n      prop: P, _obj: unknown) => P;\n\n  interface Window {\n    JSCompiler_renameProperty: typeof JSCompiler_renameProperty;\n  }\n}\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Function called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string|null, type?: TypeHint): Type;\n\n  /**\n   * Function called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n    ComplexAttributeConverter<Type>|((value: string, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean|string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\nexport type PropertyValues = Map<PropertyKey, unknown>;\n\nexport const defaultConverter: ComplexAttributeConverter = {\n\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        return value ? '' : null;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        return value == null ? value : JSON.stringify(value);\n    }\n    return value;\n  },\n\n  fromAttribute(value: string|null, type?: unknown) {\n    switch (type) {\n      case Boolean:\n        return value !== null;\n      case Number:\n        return value === null ? null : Number(value);\n      case Object:\n      case Array:\n        return JSON.parse(value!);\n    }\n    return value;\n  }\n\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean => {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual\n};\n\nconst microtaskPromise = Promise.resolve(true);\n\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\nconst STATE_HAS_CONNECTED = 1 << 5;\ntype UpdateState = typeof STATE_HAS_UPDATED|typeof STATE_UPDATE_REQUESTED|\n    typeof STATE_IS_REFLECTING_TO_ATTRIBUTE|\n    typeof STATE_IS_REFLECTING_TO_PROPERTY|typeof STATE_HAS_CONNECTED;\n\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n */\nexport abstract class UpdatingElement extends HTMLElement {\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   */\n  private static _attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having finished creating properties.\n   */\n  protected static[finalized] = true;\n\n  /**\n   * Memoized list of all class properties, including any superclass properties.\n   * Created lazily on user subclasses when finalizing the class.\n   */\n  private static _classProperties?: PropertyDeclarationMap;\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring the property.\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   */\n  static get observedAttributes() {\n    // note: piggy backing on this to ensure we're finalized.\n    this.finalize();\n    const attributes: string[] = [];\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    this._classProperties!.forEach((v, p) => {\n      const attr = this._attributeNameForProperty(p, v);\n      if (attr !== undefined) {\n        this._attributeToPropertyMap.set(attr, p);\n        attributes.push(attr);\n      }\n    });\n    return attributes;\n  }\n\n  /**\n   * Ensures the private `_classProperties` property metadata is created.\n   * In addition to `finalize` this is also called in `createProperty` to\n   * ensure the `@property` decorator can add property metadata.\n   */\n  /** @nocollapse */\n  private static _ensureClassProperties() {\n    // ensure private storage for property declarations.\n    if (!this.hasOwnProperty(\n            JSCompiler_renameProperty('_classProperties', this))) {\n      this._classProperties = new Map();\n      // NOTE: Workaround IE11 not supporting Map constructor argument.\n      const superProperties: PropertyDeclarationMap =\n          Object.getPrototypeOf(this)._classProperties;\n      if (superProperties !== undefined) {\n        superProperties.forEach(\n            (v: PropertyDeclaration, k: PropertyKey) =>\n                this._classProperties!.set(k, v));\n      }\n    }\n  }\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist.\n   * The property setter calls the property's `hasChanged` property option\n   * or uses a strict identity check to determine whether or not to request\n   * an update.\n   * @nocollapse\n   */\n  static createProperty(\n      name: PropertyKey,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    // Note, since this can be called by the `@property` decorator which\n    // is called before `finalize`, we ensure storage exists for property\n    // metadata.\n    this._ensureClassProperties();\n    this._classProperties!.set(name, options);\n    // Do not generate an accessor if the prototype already has one, since\n    // it would be lost otherwise and that would never be the user's intention;\n    // Instead, we expect users to call `requestUpdate` themselves from\n    // user-defined accessors. Note that if the super has an accessor we will\n    // still overwrite it\n    if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n      return;\n    }\n    const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n    Object.defineProperty(this.prototype, name, {\n      // tslint:disable-next-line:no-any no symbol in index\n      get(): any {\n        return (this as {[key: string]: unknown})[key as string];\n      },\n      set(this: UpdatingElement, value: unknown) {\n        const oldValue =\n            (this as {} as {[key: string]: unknown})[name as string];\n        (this as {} as {[key: string]: unknown})[key as string] = value;\n        (this as unknown as UpdatingElement)._requestUpdate(name, oldValue);\n      },\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  /**\n   * Creates property accessors for registered properties and ensures\n   * any superclasses are also finalized.\n   * @nocollapse\n   */\n  protected static finalize() {\n    // finalize any superclasses\n    const superCtor = Object.getPrototypeOf(this);\n    if (!superCtor.hasOwnProperty(finalized)) {\n      superCtor.finalize();\n    }\n    this[finalized] = true;\n    this._ensureClassProperties();\n    // initialize Map populated in observedAttributes\n    this._attributeToPropertyMap = new Map();\n    // make any properties\n    // Note, only process \"own\" properties since this element will inherit\n    // any properties defined on the superClass, and finalization ensures\n    // the entire prototype chain is finalized.\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      // support symbols in properties (IE11 does not support this)\n      const propKeys = [\n        ...Object.getOwnPropertyNames(props),\n        ...(typeof Object.getOwnPropertySymbols === 'function') ?\n            Object.getOwnPropertySymbols(props) :\n            []\n      ];\n      // This for/of is ok because propKeys is an array\n      for (const p of propKeys) {\n        // note, use of `any` is due to TypeSript lack of support for symbol in\n        // index types\n        // tslint:disable-next-line:no-any no symbol in index\n        this.createProperty(p, (props as any)[p]);\n      }\n    }\n  }\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static _attributeNameForProperty(\n      name: PropertyKey, options: PropertyDeclaration) {\n    const attribute = options.attribute;\n    return attribute === false ?\n        undefined :\n        (typeof attribute === 'string' ?\n             attribute :\n             (typeof name === 'string' ? name.toLowerCase() : undefined));\n  }\n\n  /**\n   * Returns true if a property should request an update.\n   * Called when a property value is set and uses the `hasChanged`\n   * option for the property if present or a strict identity check.\n   * @nocollapse\n   */\n  private static _valueHasChanged(\n      value: unknown, old: unknown, hasChanged: HasChanged = notEqual) {\n    return hasChanged(value, old);\n  }\n\n  /**\n   * Returns the property value for the given attribute value.\n   * Called via the `attributeChangedCallback` and uses the property's\n   * `converter` or `converter.fromAttribute` property option.\n   * @nocollapse\n   */\n  private static _propertyValueFromAttribute(\n      value: string|null, options: PropertyDeclaration) {\n    const type = options.type;\n    const converter = options.converter || defaultConverter;\n    const fromAttribute =\n        (typeof converter === 'function' ? converter : converter.fromAttribute);\n    return fromAttribute ? fromAttribute(value, type) : value;\n  }\n\n  /**\n   * Returns the attribute value for the given property value. If this\n   * returns undefined, the property will *not* be reflected to an attribute.\n   * If this returns null, the attribute will be removed, otherwise the\n   * attribute will be set to the value.\n   * This uses the property's `reflect` and `type.toAttribute` property options.\n   * @nocollapse\n   */\n  private static _propertyValueToAttribute(\n      value: unknown, options: PropertyDeclaration) {\n    if (options.reflect === undefined) {\n      return;\n    }\n    const type = options.type;\n    const converter = options.converter;\n    const toAttribute =\n        converter && (converter as ComplexAttributeConverter).toAttribute ||\n        defaultConverter.toAttribute;\n    return toAttribute!(value, type);\n  }\n\n  private _updateState: UpdateState = 0;\n  private _instanceProperties: PropertyValues|undefined = undefined;\n  private _updatePromise: Promise<unknown> = microtaskPromise;\n  private _hasConnectedResolver: (() => void)|undefined = undefined;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   */\n  private _changedProperties: PropertyValues = new Map();\n\n  /**\n   * Map with keys of properties that should be reflected when updated.\n   */\n  private _reflectingProperties: Map<PropertyKey, PropertyDeclaration>|\n      undefined = undefined;\n\n  constructor() {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Performs element initialization. By default captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    this._saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this._requestUpdate();\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private _saveInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    (this.constructor as typeof UpdatingElement)\n        ._classProperties!.forEach((_v, p) => {\n          if (this.hasOwnProperty(p)) {\n            const value = this[p as keyof this];\n            delete this[p as keyof this];\n            if (!this._instanceProperties) {\n              this._instanceProperties = new Map();\n            }\n            this._instanceProperties.set(p, value);\n          }\n        });\n  }\n\n  /**\n   * Applies previously saved instance properties.\n   */\n  private _applyInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    // tslint:disable-next-line:no-any\n    this._instanceProperties!.forEach((v, p) => (this as any)[p] = v);\n    this._instanceProperties = undefined;\n  }\n\n  connectedCallback() {\n    this._updateState = this._updateState | STATE_HAS_CONNECTED;\n    // Ensure first connection completes an update. Updates cannot complete\n    // before connection and if one is pending connection the\n    // `_hasConnectionResolver` will exist. If so, resolve it to complete the\n    // update, otherwise requestUpdate.\n    if (this._hasConnectedResolver) {\n      this._hasConnectedResolver();\n      this._hasConnectedResolver = undefined;\n    }\n  }\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   */\n  disconnectedCallback() {\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   */\n  attributeChangedCallback(name: string, old: string|null, value: string|null) {\n    if (old !== value) {\n      this._attributeToProperty(name, value);\n    }\n  }\n\n  private _propertyToAttribute(\n      name: PropertyKey, value: unknown,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const attr = ctor._attributeNameForProperty(name, options);\n    if (attr !== undefined) {\n      const attrValue = ctor._propertyValueToAttribute(value, options);\n      // an undefined value does not change the attribute.\n      if (attrValue === undefined) {\n        return;\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n    }\n  }\n\n  private _attributeToProperty(name: string, value: string|null) {\n    // Use tracking info to avoid deserializing attribute value if it was\n    // just set from a property setter.\n    if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n      return;\n    }\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const propName = ctor._attributeToPropertyMap.get(name);\n    if (propName !== undefined) {\n      const options =\n          ctor._classProperties!.get(propName) || defaultPropertyDeclaration;\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n      this[propName as keyof this] =\n          // tslint:disable-next-line:no-any\n          ctor._propertyValueFromAttribute(value, options) as any;\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n    }\n  }\n\n  /**\n   * This private version of `requestUpdate` does not access or return the\n   * `updateComplete` promise. This promise can be overridden and is therefore\n   * not free to access.\n   */\n  private _requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    let shouldRequestUpdate = true;\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      const ctor = this.constructor as typeof UpdatingElement;\n      const options =\n          ctor._classProperties!.get(name) || defaultPropertyDeclaration;\n      if (ctor._valueHasChanged(\n              this[name as keyof this], oldValue, options.hasChanged)) {\n        if (!this._changedProperties.has(name)) {\n          this._changedProperties.set(name, oldValue);\n        }\n        // Add to reflecting properties set.\n        // Note, it's important that every change has a chance to add the\n        // property to `_reflectingProperties`. This ensures setting\n        // attribute + property reflects correctly.\n        if (options.reflect === true &&\n            !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n          if (this._reflectingProperties === undefined) {\n            this._reflectingProperties = new Map();\n          }\n          this._reflectingProperties.set(name, options);\n        }\n      } else {\n        // Abort the request if the property should not be considered changed.\n        shouldRequestUpdate = false;\n      }\n    }\n    if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n      this._enqueueUpdate();\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should\n   * be called when an element should update based on some state not triggered\n   * by setting a property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored. Returns the `updateComplete` Promise which is resolved\n   * when the update completes.\n   *\n   * @param name {PropertyKey} (optional) name of requesting property\n   * @param oldValue {any} (optional) old value of requesting property\n   * @returns {Promise} A Promise that is resolved when the update completes.\n   */\n  requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    this._requestUpdate(name, oldValue);\n    return this.updateComplete;\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async _enqueueUpdate() {\n    // Mark state updating...\n    this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n    let resolve!: (r: boolean) => void;\n    let reject!: (e: Error) => void;\n    const previousUpdatePromise = this._updatePromise;\n    this._updatePromise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await previousUpdatePromise;\n    } catch (e) {\n      // Ignore any previous errors. We only care that the previous cycle is\n      // done. Any error should have been handled in the previous update.\n    }\n    // Make sure the element has connected before updating.\n    if (!this._hasConnected) {\n      await new Promise((res) => this._hasConnectedResolver = res);\n    }\n    try {\n      const result = this.performUpdate();\n      // If `performUpdate` returns a Promise, we await it. This is done to\n      // enable coordinating updates with a scheduler. Note, the result is\n      // checked to avoid delaying an additional microtask unless we need to.\n      if (result != null) {\n        await result;\n      }\n    } catch (e) {\n      reject(e);\n    }\n    resolve(!this._hasRequestedUpdate);\n  }\n\n  private get _hasConnected() {\n    return (this._updateState & STATE_HAS_CONNECTED);\n  }\n\n  private get _hasRequestedUpdate() {\n    return (this._updateState & STATE_UPDATE_REQUESTED);\n  }\n\n  protected get hasUpdated() {\n    return (this._updateState & STATE_HAS_UPDATED);\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * You can override this method to change the timing of updates. If this\n   * method is overridden, `super.performUpdate()` must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```\n   * protected async performUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.performUpdate();\n   * }\n   * ```\n   */\n  protected performUpdate(): void|Promise<unknown> {\n    // Mixin instance properties once, if they exist.\n    if (this._instanceProperties) {\n      this._applyInstanceProperties();\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.update(changedProperties);\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      throw e;\n    } finally {\n      // Ensure element can accept additional updates after an exception.\n      this._markUpdated();\n    }\n    if (shouldUpdate) {\n      if (!(this._updateState & STATE_HAS_UPDATED)) {\n        this._updateState = this._updateState | STATE_HAS_UPDATED;\n        this.firstUpdated(changedProperties);\n      }\n      this.updated(changedProperties);\n    }\n  }\n\n  private _markUpdated() {\n    this._changedProperties = new Map();\n    this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `_getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super._getUpdateComplete()`, then any subsequent state.\n   *\n   * @returns {Promise} The Promise returns a boolean that indicates if the\n   * update resolved without triggering another update.\n   */\n  get updateComplete() {\n    return this._getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   *   class MyElement extends LitElement {\n   *     async _getUpdateComplete() {\n   *       await super._getUpdateComplete();\n   *       await this._myChild.updateComplete;\n   *     }\n   *   }\n   */\n  protected _getUpdateComplete() {\n    return this._updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(_changedProperties: PropertyValues) {\n    if (this._reflectingProperties !== undefined &&\n        this._reflectingProperties.size > 0) {\n      // Use forEach so this works even if for/of loops are compiled to for\n      // loops expecting arrays\n      this._reflectingProperties.forEach(\n          (v, k) => this._propertyToAttribute(k, this[k as keyof this], v));\n      this._reflectingProperties = undefined;\n    }\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected updated(_changedProperties: PropertyValues) {\n  }\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {LitElement} from '../lit-element.js';\n\nimport {PropertyDeclaration, UpdatingElement} from './updating-element.js';\n\nexport type Constructor<T> = {\n  new (...args: unknown[]): T\n};\n\n// From the TC39 Decorators proposal\ninterface ClassDescriptor {\n  kind: 'class';\n  elements: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n}\n\n// From the TC39 Decorators proposal\ninterface ClassElement {\n  kind: 'field'|'method';\n  key: PropertyKey;\n  placement: 'static'|'prototype'|'own';\n  initializer?: Function;\n  extras?: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n  descriptor?: PropertyDescriptor;\n}\n\nconst legacyCustomElement =\n    (tagName: string, clazz: Constructor<HTMLElement>) => {\n      window.customElements.define(tagName, clazz);\n      // Cast as any because TS doesn't recognize the return type as being a\n      // subtype of the decorated class when clazz is typed as\n      // `Constructor<HTMLElement>` for some reason.\n      // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n      // applied to elements however.\n      // tslint:disable-next-line:no-any\n      return clazz as any;\n    };\n\nconst standardCustomElement =\n    (tagName: string, descriptor: ClassDescriptor) => {\n      const {kind, elements} = descriptor;\n      return {\n        kind,\n        elements,\n        // This callback is called once the class is otherwise fully defined\n        finisher(clazz: Constructor<HTMLElement>) {\n          window.customElements.define(tagName, clazz);\n        }\n      };\n    };\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * @param tagName the name of the custom element to define\n */\nexport const customElement = (tagName: string) =>\n    (classOrDescriptor: Constructor<HTMLElement>|ClassDescriptor) =>\n        (typeof classOrDescriptor === 'function') ?\n    legacyCustomElement(tagName, classOrDescriptor) :\n    standardCustomElement(tagName, classOrDescriptor);\n\nconst standardProperty =\n    (options: PropertyDeclaration, element: ClassElement) => {\n      // When decorating an accessor, pass it through and add property metadata.\n      // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n      // stomp over the user's accessor.\n      if (element.kind === 'method' && element.descriptor &&\n          !('value' in element.descriptor)) {\n        return {\n          ...element,\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      } else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n          kind: 'field',\n          key: Symbol(),\n          placement: 'own',\n          descriptor: {},\n          // When @babel/plugin-proposal-decorators implements initializers,\n          // do this instead of the initializer below. See:\n          // https://github.com/babel/babel/issues/9260 extras: [\n          //   {\n          //     kind: 'initializer',\n          //     placement: 'own',\n          //     initializer: descriptor.initializer,\n          //   }\n          // ],\n          initializer(this: {[key: string]: unknown}) {\n            if (typeof element.initializer === 'function') {\n              this[element.key as string] = element.initializer.call(this);\n            }\n          },\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      }\n    };\n\nconst legacyProperty =\n    (options: PropertyDeclaration, proto: Object, name: PropertyKey) => {\n      (proto.constructor as typeof UpdatingElement)\n          .createProperty(name, options);\n    };\n\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A `PropertyDeclaration` may optionally be\n * supplied to configure property features.\n *\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration) {\n  // tslint:disable-next-line:no-any decorator\n  return (protoOrDescriptor: Object|ClassElement, name?: PropertyKey): any =>\n             (name !== undefined) ?\n      legacyProperty(options!, protoOrDescriptor as Object, name) :\n      standardProperty(options!, protoOrDescriptor as ClassElement);\n}\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function query(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelector(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function queryAll(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelectorAll(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\nconst legacyQuery =\n    (descriptor: PropertyDescriptor, proto: Object, name: PropertyKey) => {\n      Object.defineProperty(proto, name, descriptor);\n    };\n\nconst standardQuery = (descriptor: PropertyDescriptor, element: ClassElement) =>\n    ({\n      kind: 'method',\n      placement: 'prototype',\n      key: element.key,\n      descriptor,\n    });\n\nconst standardEventOptions =\n    (options: AddEventListenerOptions, element: ClassElement) => {\n      return {\n        ...element,\n        finisher(clazz: typeof UpdatingElement) {\n          Object.assign(\n              clazz.prototype[element.key as keyof UpdatingElement], options);\n        }\n      };\n    };\n\nconst legacyEventOptions =\n    // tslint:disable-next-line:no-any legacy decorator\n    (options: AddEventListenerOptions, proto: any, name: PropertyKey) => {\n      Object.assign(proto[name], options);\n    };\n\n/**\n * Adds event listener options to a method used as an event listener in a\n * lit-html template.\n *\n * @param options An object that specifis event listener options as accepted by\n * `EventTarget#addEventListener` and `EventTarget#removeEventListener`.\n *\n * Current browsers support the `capture`, `passive`, and `once` options. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters\n *\n * @example\n *\n *     class MyElement {\n *\n *       clicked = false;\n *\n *       render() {\n *         return html`<div @click=${this._onClick}`><button></button></div>`;\n *       }\n *\n *       @eventOptions({capture: true})\n *       _onClick(e) {\n *         this.clicked = true;\n *       }\n *     }\n */\nexport const eventOptions = (options: AddEventListenerOptions) =>\n    // Return value typed as any to prevent TypeScript from complaining that\n    // standard decorator function signature does not match TypeScript decorator\n    // signature\n    // TODO(kschaaf): unclear why it was only failing on this decorator and not\n    // the others\n    ((protoOrDescriptor: Object|ClassElement, name?: string) =>\n         (name !== undefined) ?\n         legacyEventOptions(options, protoOrDescriptor as Object, name) :\n         standardEventOptions(options, protoOrDescriptor as ClassElement)) as\n        // tslint:disable-next-line:no-any decorator\n        any;\n","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\nexport const supportsAdoptingStyleSheets =\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\nconst constructionToken = Symbol();\n\nexport class CSSResult {\n  _styleSheet?: CSSStyleSheet|null;\n\n  readonly cssText: string;\n\n  constructor(cssText: string, safeToken: symbol) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n          'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n    }\n    this.cssText = cssText;\n  }\n\n  // Note, this is a getter so that it's lazy. In practice, this means\n  // stylesheets are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet|null {\n    if (this._styleSheet === undefined) {\n      // Note, if `adoptedStyleSheets` is supported then we assume CSSStyleSheet\n      // is constructable.\n      if (supportsAdoptingStyleSheets) {\n        this._styleSheet = new CSSStyleSheet();\n        this._styleSheet.replaceSync(this.cssText);\n      } else {\n        this._styleSheet = null;\n      }\n    }\n    return this._styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\n/**\n * Wrap a value for interpolation in a css tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) => {\n  return new CSSResult(String(value), constructionToken);\n};\n\nconst textFromCSSResult = (value: CSSResult|number) => {\n  if (value instanceof CSSResult) {\n    return value.cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n        `Value passed to 'css' function must be a 'css' function result: ${\n            value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n  }\n};\n\n/**\n * Template tag which which can be used with LitElement's `style` property to\n * set element styles. For security reasons, only literal string values may be\n * used. To incorporate non-literal values `unsafeCSS` may be used inside a\n * template string part.\n */\nexport const css =\n    (strings: TemplateStringsArray, ...values: (CSSResult|number)[]) => {\n      const cssText = values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]);\n      return new CSSResult(cssText, constructionToken);\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport {TemplateResult} from 'lit-html';\nimport {render} from 'lit-html/lib/shady-render.js';\n\nimport {PropertyValues, UpdatingElement} from './lib/updating-element.js';\n\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport {html, svg, TemplateResult, SVGTemplateResult} from 'lit-html/lit-html.js';\nimport {supportsAdoptingStyleSheets, CSSResult} from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n\ndeclare global {\n  interface Window {\n    litElementVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.2.1');\n\nexport interface CSSResultArray extends Array<CSSResult|CSSResultArray> {}\n\n/**\n * Minimal implementation of Array.prototype.flat\n * @param arr the array to flatten\n * @param result the accumlated result\n */\nfunction arrayFlat(\n    styles: CSSResultArray, result: CSSResult[] = []): CSSResult[] {\n  for (let i = 0, length = styles.length; i < length; i++) {\n    const value = styles[i];\n    if (Array.isArray(value)) {\n      arrayFlat(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/** Deeply flattens styles array. Uses native flat if available. */\nconst flattenStyles = (styles: CSSResultArray): CSSResult[] =>\n    styles.flat ? styles.flat(Infinity) : arrayFlat(styles);\n\nexport class LitElement extends UpdatingElement {\n\n  /**\n   * Ensure this class is marked as `finalized` as an optimization ensuring\n   * it will not needlessly try to `finalize`.\n   *\n   * Note this property name is a string to prevent breaking Closure JS Compiler\n   * optimizations. See updating-element.ts for more information.\n   */\n  protected static['finalized'] = true;\n  /**\n   * Render method used to render the lit-html TemplateResult to the element's\n   * DOM.\n   * @param {TemplateResult} Template to render.\n   * @param {Element|DocumentFragment} Node into which to render.\n   * @param {String} Element name.\n   * @nocollapse\n   */\n  static render = render;\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the `css` tag function.\n   */\n  static styles?: CSSResult|CSSResultArray;\n\n  private static _styles: CSSResult[]|undefined;\n\n  /** @nocollapse */\n  protected static finalize() {\n    // The Closure JS Compiler does not always preserve the correct \"this\"\n    // when calling static super methods (b/137460243), so explicitly bind.\n    super.finalize.call(this);\n    // Prepare styling that is stamped at first render time. Styling\n    // is built from user provided `styles` or is inherited from the superclass.\n    this._styles =\n        this.hasOwnProperty(JSCompiler_renameProperty('styles', this)) ?\n        this._getUniqueStyles() :\n        this._styles || [];\n  }\n\n  /** @nocollapse */\n  private static _getUniqueStyles(): CSSResult[] {\n    // Take care not to call `this.styles` multiple times since this generates\n    // new CSSResults each time.\n    // TODO(sorvell): Since we do not cache CSSResults by input, any\n    // shared styles will generate new stylesheet objects, which is wasteful.\n    // This should be addressed when a browser ships constructable\n    // stylesheets.\n    const userStyles = this.styles;\n    const styles: CSSResult[] = [];\n    if (Array.isArray(userStyles)) {\n      const flatStyles = flattenStyles(userStyles);\n      // As a performance optimization to avoid duplicated styling that can\n      // occur especially when composing via subclassing, de-duplicate styles\n      // preserving the last item in the list. The last item is kept to\n      // try to preserve cascade order with the assumption that it's most\n      // important that last added styles override previous styles.\n      const styleSet = flatStyles.reduceRight((set, s) => {\n        set.add(s);\n        // on IE set.add does not return the set.\n        return set;\n      }, new Set<CSSResult>());\n      // Array.from does not work on Set in IE\n      styleSet.forEach((v) => styles.unshift(v));\n    } else if (userStyles) {\n      styles.push(userStyles);\n    }\n    return styles;\n  }\n\n  private _needsShimAdoptedStyleSheets?: boolean;\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   */\n  readonly renderRoot!: Element|DocumentFragment;\n\n  /**\n   * Performs element initialization. By default this calls `createRenderRoot`\n   * to create the element `renderRoot` node and captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    super.initialize();\n    (this as {renderRoot: Element | DocumentFragment}).renderRoot =\n        this.createRenderRoot();\n    // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n    // element's getRootNode(). While this could be done, we're choosing not to\n    // support this now since it would require different logic around de-duping.\n    if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n      this.adoptStyles();\n    }\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   * @returns {Element|DocumentFragment} Returns a node into which to render.\n   */\n  protected createRenderRoot(): Element|ShadowRoot {\n    return this.attachShadow({mode: 'open'});\n  }\n\n  /**\n   * Applies styling to the element shadowRoot using the `static get styles`\n   * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n   * available and will fallback otherwise. When Shadow DOM is polyfilled,\n   * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n   * is available but `adoptedStyleSheets` is not, styles are appended to the\n   * end of the `shadowRoot` to [mimic spec\n   * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n   */\n  protected adoptStyles() {\n    const styles = (this.constructor as typeof LitElement)._styles!;\n    if (styles.length === 0) {\n      return;\n    }\n    // There are three separate cases here based on Shadow DOM support.\n    // (1) shadowRoot polyfilled: use ShadyCSS\n    // (2) shadowRoot.adoptedStyleSheets available: use it.\n    // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n    // rendering\n    if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n      window.ShadyCSS.ScopingShim!.prepareAdoptedCssText(\n          styles.map((s) => s.cssText), this.localName);\n    } else if (supportsAdoptingStyleSheets) {\n      (this.renderRoot as ShadowRoot).adoptedStyleSheets =\n          styles.map((s) => s.styleSheet!);\n    } else {\n      // This must be done after rendering so the actual style insertion is done\n      // in `update`.\n      this._needsShimAdoptedStyleSheets = true;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // Note, first update/render handles styleElement so we only call this if\n    // connected after first update.\n    if (this.hasUpdated && window.ShadyCSS !== undefined) {\n      window.ShadyCSS.styleElement(this);\n    }\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(changedProperties: PropertyValues) {\n    super.update(changedProperties);\n    const templateResult = this.render() as unknown;\n    if (templateResult instanceof TemplateResult) {\n      (this.constructor as typeof LitElement)\n          .render(\n              templateResult,\n              this.renderRoot,\n              {scopeName: this.localName, eventContext: this});\n    }\n    // When native Shadow DOM is used but adoptedStyles are not supported,\n    // insert styling after rendering to ensure adoptedStyles have highest\n    // priority.\n    if (this._needsShimAdoptedStyleSheets) {\n      this._needsShimAdoptedStyleSheets = false;\n      (this.constructor as typeof LitElement)._styles!.forEach((s) => {\n        const style = document.createElement('style');\n        style.textContent = s.cssText;\n        this.renderRoot.appendChild(style);\n      });\n    }\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method must return\n   * a lit-html TemplateResult. Setting properties inside this method will *not*\n   * trigger the element to update.\n   */\n  protected render(): TemplateResult|void {\n  }\n}\n","/*\n\thttps://icomoon.io/app\n*/\nimport { LitElement, html, css } from 'lit-element';\n\nconst svgDef = require('./icons.svg.html');\n\nclass SvgIcons {\n\n\tget prefix(){ return 'icon-'}\n\n\tget svgDefElement() {\n\n\t\tif( !this.__svgDefElement ){\n\t\t\tlet div = document.createElement('div')\n\t\t\tdiv.innerHTML = svgDef\n\t\t\tthis.__svgDefElement = div.firstChild\n\t\t\t// remove all the <title> tags so they dont show as \"tooltips\" when hovering\n\t\t\tthis.__svgDefElement.querySelectorAll('title').forEach(el=>el.remove())\n\t\t\tdiv = null\n\t\t}\n\n\t\treturn this.__svgDefElement\n\t}\n\n\tget names(){\n\t\treturn Array.from(this.svgDefElement.querySelectorAll('symbol')).map(el=>el.id.replace(this.prefix, '')).sort()\n\t}\n\n\tget(name){\n\n\t\tlet symbol = this.svgDefElement.querySelector(`#${this.prefix}${name}`)\n\t\tlet svg = null\n\n\t\tif( symbol ){\n\n\t\t\tlet div = document.createElement('div')\n\t\t\tdiv.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\">${symbol.innerHTML}</svg>`\n\t\t\tsvg = div.firstChild\n\n\t\t\t// copy attributes\n\t\t\tArray.from(symbol.attributes).forEach(attr=>{\n\t\t\t\tsvg.setAttribute(attr.name, attr.value)\n\t\t\t})\n\t\t}\n\t\t\n\t\treturn svg\n\t}\n}\n\nexport const svgIcons = new SvgIcons()\n\nexport class IconElement extends HTMLElement {\n\n\t// not ideal...\n\tget styles(){\n\t\treturn `\n\t\t:host {\n\t\t\tdisplay: inline-flex;\n\t\t\tvertical-align: middle;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tcolor: inherit;\n\t\t\t--size: 1em;\n\t\t\theight: var(--size);\n\t\t}\n\n\t\t:host([hidden]) {\n\t\t\tdisplay: none !important;\n\t\t}\n\n\t\t:host([square]) {\n\t\t\twidth: var(--size);\n\t\t}\n\n\t\t:host([invalid]) {\n\t\t\tbackground: #f44336;\n\t\t}\n\n\t\tsvg {\n\t\t\theight: 100%;\n\t\t\t/* width: 100%; */\n\t\t\tdisplay: inline-block;\n\t\t\tfill: currentColor;\n\t\t\tcolor: currentColor;\n\t\t}\n\n\t\t@keyframes rotate360 {\n\t\t\tto { transform: rotate(360deg); }\n\t\t}\n\n\t\t@keyframes rotate360CCW {\n\t\t\tto { transform: rotate(-360deg); }\n\t\t}\n\n\t\t:host([spin]) svg {\n\t\t\tanimation: 1600ms rotate360 infinite linear;\n\t\t}\n\n\t\t:host([name=\"arrows-ccw\"][spin]) svg {\n\t\t\tanimation: 1600ms rotate360CCW infinite linear;\n\t\t}\n\t\t`\n\t}\n\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\ttemp.innerHTML = `<style>\n\t\t${this.styles}\n\t\t</style>\n\t\t<slot></slot>\n\t\t`\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\t_setSVG(){\n\n\t\tif( this._svg )\n\t\t\tthis._svg.remove()\n\n\t\tthis._svg = svgIcons.get(this.name)\n\t\t\n\t\tif( this._svg ){\n\t\t\tthis.removeAttribute('invalid')\n\t\t\tthis.shadowRoot.appendChild(this._svg)\n\t\t}else{\n\t\t\tthis.setAttribute('invalid', '')\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['name']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'name' )\n\t\t\tthis._setSVG()\n\t}\n\t\n\tget name(){ return this.getAttribute('name')}\n\tset name(val){ return this.setAttribute('name', val)}\n\n\tset spin(val){\n\t\tthis.toggleAttribute('spin', Boolean(val))\n\t}\n\tget spin(){\n\t\treturn this.hasAttribute('spin')\n\t}\n\n}\n\t\ncustomElements.define('b-icon', IconElement)\n\nexport class IconList extends LitElement {\n\n\tstatic get properties(){return {\n\t\tcols: {type: Number, reflect: true}\n\t}}\n\n\tconstructor(){\n\t\tsuper()\n\t\tthis.cols = 6\n\t}\n\n\tstatic get styles(){return css`\n\t\t:host {\n\t\t\tdisplay: block;\n\t\t\tcolumn-count: 6;\n\t\t\tgap: 1em;\n\t\t\twidth: 100%;\n\t\t\tfont-size:1.2em;\n\t\t\tpadding: 1em;\n\t\t\toverflow: auto;\n\t\t}\n\n\t\t:host([cols=\"1\"]) { column-count: 1}\n\t\t:host([cols=\"2\"]) { column-count: 2}\n\t\t:host([cols=\"3\"]) { column-count: 3}\n\t\t:host([cols=\"4\"]) { column-count: 4}\n\t\t:host([cols=\"5\"]) { column-count: 5}\n\t\t:host([cols=\"6\"]) { column-count: 6}\n\n\t\t:host > div {\n\t\t\tmargin: .75em;\n\t\t}\n\n\t\t:host > div:first-child {\n\t\t\tmargin-top: 0;\n\t\t}\n\n\t\tb-icon {\n\t\t\twidth: 1.6em;\n\t\t}\n\n\t\tsmall {\n\t\t\tcolor: rgba(0,0,0,.5);\n\t\t}\n\n\t\t@media (max-width: 550px) {\n            :host {\n                column-count: 1 !important;\n            }\n        }\n\t`}\n\n\trender(){return html`\n\t\t${svgIcons.names.map(name=>html`\n\t\t\t<div>\n\t\t\t\t<b-icon name=${name}></b-icon> <small>${name}</small>\n\t\t\t</div>\n\t\t`)}\n\t`}\n}\ncustomElements.define('b-icon-list', IconList)","/*\n\tSVG and idea taken from https://ant.design/components/button/\n\t\n\tExamples: \n\t<circle-spinner/>\n\t<circle-spinner style=\"--size:.8em; color: white\"/>\n*/\n\nclass SpinnerElement extends HTMLElement {\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        \n        temp.innerHTML = `<style>\n\t\t\t:host {\n\t\t\t\t--size: .8em;\n\t\t\t\theight: var(--size);\n\t\t\t    width: var(--size);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\t\t\t}\n\t\t\t\n\t\t\t:host(.overlay) {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tz-index: 10000;\n\t\t\t}\n\t\t\t\n\t\t\t@keyframes spin {\n\t\t\t\t100% {\n\t\t\t\t    transform: rotate(360deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsvg {\n\t\t\t\tanimation: spin 1s infinite linear;\n\t\t\t\ttransform-origin: center center;\n\t\t\t}\n\t\t\t</style>\n\t\t\t<svg viewBox=\"0 0 1024 1024\" class=\"spin\" data-icon=\"loading\" width=\"100%\" height=\"100%\" fill=\"currentColor\" aria-hidden=\"true\">\n\t\t\t\t<path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path>\n\t\t\t</svg>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n    }\n}\n\ncustomElements.define('b-spinner', SpinnerElement)\n","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\nimport './icon'\n\nexport default class BtnElement extends LitElement {\n\n    static get properties() { return {\n        href: {type: String, reflect: true},\n        value: {type: String, reflect: true},\n        icon: { type: String },\n        spin: {type: Boolean, reflect: true, attribute: 'spin'}\n    }}\n\n    static get styles(){ return css`\n    \n        :host{\n            --red: var(--red-700);\n            /* --black: #333;\n            --orange: #F57C00;\n            --blue: #2196F3;\n            --red: #d32f2f;\n            --gray: #444444;\n            --green: #27ae60;\n            --yellow: #f2d57e;\n            --teal: #009688;\n            --purple: #7E57C2;\n            --brown: #795548;\n            --pink: #E91E63; */\n\n            --radius: 3px;\n            --color: var(--b-btn-bgd, var(--black)) ;\n            --bgdColor: var(--color);\n            --hoverBgdColor: rgba(255,255,255,.1);\n            --textColor: var(--b-btn-color, #fff);\n            --borderColor: var(--color);\n            --borderStyle: solid;\n            --borderWidth: 1px;\n            --padding: .4em .6em;\n\n            display: inline-grid;\n            position: relative;\n            box-sizing: border-box;\n            background: var(--bgdColor);\n            color: var(--textColor);\n            border-radius: var(--radius);\n            cursor: pointer;\n            transition: \n                color 160ms,\n                background-color 160ms,\n                border 160ms;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            text-rendering: optimizeLegibility;\n            font-size: .9rem;\n            line-height: 1rem;\n            font-weight: bold;\n            font-family: var(--bui-btn-font);\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        /* hide by default */\n        @media print {\n            :host {\n                display: none;\n            }\n        }\n\n        :host([hidden]) {\n            display: none !important;\n        }\n\n        main {\n            border-radius: var(--radius);\n            position: relative;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            padding: var(--padding);\n            box-sizing: border-box;\n            /*padding-bottom: .3em;*/ /* remove descender line to make it look more centered*/\n            text-overflow: ellipsis;\n            border: var(--borderStyle) var(--borderWidth) var(--borderColor);\n            /* transition: 120ms; */\n        }\n\n        main > span {\n            display: inline-flex;\n            justify-content: center;\n        }\n\n        slot {\n            display: block;\n            margin-bottom: -.1em; /* remove descender line to make it look more centered*/\n        }\n\n        slot::slotted(*) {\n            display: inline-block;\n            margin-top: 0;\n            margin-bottom: 0;\n        }\n\n        .hover {\n            position: absolute;\n            display: block;\n            width: 100%;\n            height: 100%;\n            left: 0;\n            top: 0;\n            background: var(--hoverBgdColor);\n            visibility: hidden;\n            opacity: 0;\n            /* mix-blend-mode: saturation; */\n            border-radius: var(--radius);\n            /* transition: 120ms; */\n        }\n\n        @media (hover) {\n            :host(:hover) .hover {\n                opacity: 1;\n                visibility: visible;\n            }\n        }\n\n        /* b-icon,\n        ::slotted(b-icon) {\n            vertical-align: bottom;\n        } */\n\n        b-spinner {\n            opacity: 0;\n            visibility: hidden;\n            --size: 1em;\n            margin-left: -1.35em;\n            margin-right: .35em;\n            transition: 120ms;\n        }\n\n        :host([spin]) b-spinner {\n            opacity: 1;\n            visibility: visible;\n            margin-left: 0;\n        }\n\n        :host([spin]) b-icon {\n            display: none;\n        }\n\n        main b-icon {\n            margin-right: .35em;\n            margin-left: -.15em;\n        }\n\n        :host([stacked]) {\n            --padding: .3em .5em .1em .5em;\n        }\n\n        :host([stacked]) main {\n            display: inline-grid;\n            align-content: center;\n        }\n\n        :host([stacked]) b-icon {\n            font-size: 1.2em;\n            margin: 0;\n        }\n\n        :host([stacked]) slot {\n            font-size: .6em;\n        }\n\n        :host([stacked]) slot::slotted(*) {\n            opacity: var(--b-btn-stacked-label-opacity, .5);\n        }\n\n        :host([stacked]) slot[name=\"icon\"] {\n            font-size: 1em;\n            display: contents;\n        }\n\n        :host([stacked]) slot[name=\"icon\"]::slotted(*),\n        :host([stacked]) slot[name=\"icon\"] b-icon{\n            opacity: var(--b-btn-stacked-icon-opacity, 1);\n        }\n\n        :host([stacked]) b-spinner {\n            font-size: 1.2em;\n            margin-right: 0;\n            margin-left: -1em;\n        }\n        :host([stacked][spin]) b-spinner {\n            margin-left: 0;\n        }\n\n        :host([block]) {\n            display: block;\n            text-align: center\n        }\n\n        :host([block]) main {\n            display: flex;\n            justify-content: center\n        }\n\n        :host(:empty) main {\n            --padding: .4em .5em;\n        }\n\n        :host(:empty) main b-icon {\n            margin-left: 0;\n            margin-right: 0;\n        }\n\n        /* offset play icon to make it appear more centered */\n        :host(:empty) main b-icon[name=\"play\"] {\n\t\t\tmargin: 0 -.1em 0 .1em;\n        }\n\n        :host([color^=\"primary\"])  { --color: var(--color-primary); }\n        :host([color^=\"black\"])  { --color: var(--black); }\n        :host([color^=\"white\"])  { --color: var(--white); --textColor: var(--black); }\n        :host([color^=\"orange\"]) { --color: var(--orange); }\n        :host([color^=\"blue\"])   { --color: var(--blue); }\n        :host([color^=\"red\"])    { --color: var(--red); }\n        :host([color^=\"gray\"])   { --color: var(--gray); }\n        :host([color^=\"green\"])  { --color: var(--green); }\n        :host([color^=\"yellow\"]) { --color: var(--yellow); }\n        :host([color^=\"teal\"])   { --color: var(--teal); }\n        :host([color^=\"purple\"]) { --color: var(--purple); }\n        :host([color^=\"brown\"])  { --color: var(--brown); }\n        :host([color^=\"pink\"])   { --color: var(--pink); }\n\n        @media (hover){\n        :host([color*=\"hover-black\"]:hover)  { --color: var(--black); }\n        :host([color*=\"hover-orange\"]:hover) { --color: var(--orange); }\n        :host([color*=\"hover-blue\"]:hover)   { --color: var(--blue); }\n        :host([color*=\"hover-red\"]:hover)    { --color: var(--red); }\n        :host([color*=\"hover-gray\"]:hover)   { --color: var(--gray); }\n        :host([color*=\"hover-green\"]:hover)  { --color: var(--green); }\n        :host([color*=\"hover-yellow\"]:hover) { --color: var(--yellow); }\n        :host([color*=\"hover-teal\"]:hover)   { --color: var(--teal); }\n        :host([color*=\"hover-purple\"]:hover) { --color: var(--purple); }\n        :host([color*=\"hover-brown\"]:hover)  { --color: var(--brown); }\n        :host([color*=\"hover-pink\"]:hover)   { --color: var(--pink); }\n        }\n\n        :host([pill]) {\n            --radius: 1em;\n        }\n\n        /* @media (hover) { */\n        :host([outline]:not(:hover)) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n        }\n        /* } */\n\n        /* :host([outline]:hover){\n            --bgdColor: var(--color);\n            --textColor: inherit;\n        } */\n\n        :host([text]),\n        :host([clear]) {\n            --bgdColor: transparent;\n            --textColor: var(--color);\n            --borderColor: transparent;\n        }\n\n        /* :host([text]) .hover,\n        :host([clear]) .hover {\n            display: none;\n        } */\n\n        :host([text]) {\n            font-size: 1em;\n            font-weight: normal;\n        }\n\n        @media (hover){\n        :host([text]:hover),\n        :host([clear]:hover) {\n            --bgdColor: rgba(0,0,0,.05);\n        }}\n\n        :host([text].popover-open),\n        :host([clear].popover-open) {\n            --bgdColor: rgba(0,0,0,.05);\n        }\n\n        :host([xs]) { font-size: .6rem; }\n        :host([sm]) { font-size: .8rem; }\n        :host([lg]) { font-size: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; }\n\n        /* floating action btn */\n        :host([fab]) {\n            position: absolute;\n            z-index: 100;\n            box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),\n                        0px 6px 10px 0px rgba(0,0,0,0.14),\n                        0px 1px 18px 0px rgba(0,0,0,0.12);\n            bottom: 1rem;\n            right: 1rem;\n            font-size: 1.4em;\n            width: 2em;\n            height: 2em;\n            --radius: 2em;\n            overflow: hidden;\n        }\n\n        :host([fab]) b-spinner {\n            margin-right: 0;\n            margin-left: -1em;\n        }\n\n        :host([fab][spin]) b-spinner {\n            margin-left: 0;\n        }\n    `}\n\n    render(){ return html`\n        <div class=\"hover\"></div>\n        <main>\n            <span>\n                <b-spinner></b-spinner>\n                <slot name=\"icon\">\n                    ${this.icon?html`<b-icon name=\"${this.icon}\"></b-icon>`:''}\n                </slot>\n            </span>\n            <slot></slot>\n        </main>\n    `}\n\n\tconstructor(){\n\t\tsuper()\n        this.icon = ''\n        this.spin = false\n\t}\n\n    firstUpdated(){\n        this.addEventListener('click', ()=>{\n            if( this.href )\n                window.location = this.href\n        }, true)\n    }\n\n}\n\ncustomElements.define('b-btn', BtnElement)\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-btn-group', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-flex;\n        }\n\n        ::slotted(b-btn:first-of-type:not(:last-of-type)){\n            border-radius: var(--radius) 0 0 var(--radius);\n        }\n\n        ::slotted(b-btn:not(:first-of-type):not(:last-of-type)){\n            border-radius: 0;\n            border-left: solid 1px rgba(0,0,0,.2);\n        }\n\n        ::slotted(b-btn:last-of-type:not(:first-of-type)){\n            border-radius: 0 var(--radius) var(--radius) 0;\n            border-left: solid 1px rgba(0,0,0,.2);\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-btn-group')","import { LitElement, html, css } from 'lit-element';\nimport './spinner'\n\nexport class SpinnerOverlayElement extends LitElement {\n\n    static get properties() { return {\n        show: {type: Boolean, reflect: true},\n\t\tlabel: {type:String, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.show = false\n\t\tthis.label = ''\n\t}\n\n\tconnectedCallback(){\n\t\tsuper.connectedCallback()\n\n\t\tif( this.parentNode && this.parentNode.host && !this.parentNode.host.spinner ){\n\t\t\tthis.host = this.parentNode.host\n\t\t\tthis.host.spinner = this\n\t\t}else if( this.parentElement && !this.parentElement.spinner ){\n\t\t\tthis.host = this.parentElement\n\t\t\tthis.host.spinner = this\n\t\t}\n\t}\n\n\tdisconnectedCallback(){\n\t\tsuper.disconnectedCallback()\n\t\t\n\t\tif( this.host )\n\t\t\tdelete this.host.spinner\n\t}\n\n    static get styles(){ return css`\n\t\t:host {\n\t\t\t--spinnerBgd: var(--b-spinner-overlay-bgd, rgba(255,255,255 ,.6));\n            --spinnerColor: inherit;\n            --spinnerSize: 1.6em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n            z-index: 1200;\n            background: var(--spinnerBgd);\n            color: var(--spinnerColor);\n\t\t\tborder-radius: var(--radius);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            opacity: 1;\n            transition: 140ms opacity;\n        }\n\n\t\t:host([dark]) {\n\t\t\t--spinnerBgd: rgba(0,0,0,.6);\n\t\t\t--spinnerColor: #fff;\n\t\t}\n\n\t\tmain {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t}\n\n\t\tlabel:not(:empty) {\n\t\t\tmargin-left: 1em;\n\t\t}\n\n\t\t:host([lg]) {\n\t\t\t--spinnerSize: 6em;\n\t\t}\n\n\t\t:host([lg]) main {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t:host([lg]) label:not(:empty) {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 2em;\n\t\t\tfont-weight: bold;\n\t\t\tmargin: 1em 0 0 0;\n\t\t\tbackground: rgba(0,0,0,.7);\n\t\t\tcolor: #fff;\n\t\t\tpadding: .25em .5em;\n\t\t\tborder-radius: 2em;\n\t\t}\n\n\t\t:host(:not([show])) {\n            visibility: hidden;\n            opacity: 0;\n        }\n\n\t\tb-spinner {\n\t\t\tfont-size: var(--spinnerSize);\n\t\t}\n    `}\n\n    render(){ return html`\n\t\t<main>\n\t\t\t<b-spinner></b-spinner>\n\t\t\t<label>${this.label}</label>\n\t\t</main>\n    `}\n\n}\n\ncustomElements.define('b-spinner-overlay', SpinnerOverlayElement)\n","export default class AJAX {\n\n    constructor(method, url){\n        \n        this.method = method\n        this.url = url\n\n        this.xhr = new XMLHttpRequest()\n        \n        this.on('load', this._onDone, false);\n        this.on('abort', this._onAbort, false);\n        this.on('error', this._onError, false);\n    }\n\n    on(eventName, cb){\n        cb = cb.bind(this)\n        this.xhr.addEventListener(eventName, cb, false)\n\n        // upload progress must be set on .upload\n        if( eventName == 'progress' )\n            this.xhr.upload.addEventListener(eventName, cb, false)\n\n        return this\n    }\n\n    send(){\n        this.xhr.open(this.method, this.url);\n        this.xhr.send(...arguments)\n\n        return new Promise((resolve, reject)=>{\n            this.resolve = resolve\n            this.reject = reject\n        })\n    }\n\n    _onDone(e){\n        let resp = this.xhr.responseText\n\n        if( this.xhr.status != 200 ){\n            let err = new Error(this.xhr.statusText||'Unknown error')\n            err.errorCode = this.xhr.status\n            return this.reject&&this.reject(err)\n        }\n\n        // parse JSON if it looks like it\n        if( resp && (resp[0] == '{' || resp[0] == '[') ){\n            try{\n                resp = JSON.parse(resp)\n            }catch(err){\n                return this.reject&&this.reject(err)\n            }\n        }\n\n        this.resolve&&this.resolve(resp)\n    }\n\n    _onAbort(e){\n        // should error be thrown instead?\n        this.resolve&&this.resolve()\n    }\n\n    _onError(e){\n        this.reject&&this.reject()\n    }\n}","Object.defineProperty(File.prototype, 'ext', {\n    get: function(){\n        return this.name.split('.').pop()\n    }\n})\n\nObject.defineProperty(File.prototype, 'nameWithoutExt', {\n    get: function(){\n        return this.name.split('.').shift()\n    }\n})","import { LitElement, html, css } from 'lit-element';\nimport AJAX from '../util/ajax.js';\nimport '../util/file.ext.js'\n\nexport class UploaderElement extends LitElement {\n\n    static get properties() { return {\n        url: {type: String},\n        disabled: {type: Boolean},\n        accept: {type: String},\n        multiple: {type: Boolean},\n        placeholder: {type: String},\n        files: {type: Array},\n        dragging: {type: Boolean, reflect: true },\n        uploading: {type: Boolean, reflect: true }\n    }}\n\n    static get styles(){ return css`\n        :host {\n            --hoverBgd: rgba(255,236,179 ,.7);\n            --uploadingBgd: rgba(238,238,238 ,.8);\n            --progressBgd: var(--hoverBgd);\n            --hoverColor: currentColor;\n            --uploadingColor: currentColor;\n            background: var(--hoverBgd);\n            width: 100%;\n            height: 100%;\n            display: block;\n            position: absolute;\n            z-index: 10000;\n            left: 0;\n            top: 0;\n            visibility: hidden;\n            /* pointer-events: none; */\n        }\n\n        :host([dragging]),\n        :host([uploading]) {\n            visibility: visible;\n        }\n\n        .placeholder {\n            color: var(--hoverColor)\n        }\n\n        .progress {\n            color: var(--uploadingColor)\n        }\n\n        .placeholder,\n        .progress {\n            position: absolute;\n            height: 100%;\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n        \n        :host([uploading]) {\n            background: var(--uploadingBgd);\n        }\n\n        :host(:not([dragging])) .placeholder,\n        :host(:not([uploading])) .progress {\n            display: none;\n        }\n\n        .progress > div {\n            position: relative\n        }\n\n        .progress .bar {\n            position: absolute;\n            height: 100%;\n            left: 0;\n            background: var(--progressBgd);\n        }\n\n        .choose {\n            display: none;\n        }\n    `}\n\n\tconstructor(){\n\t\tsuper()\n\n        this.url = '';\n        this.disabled = false\n        this.accept = '';\n        this.multiple = false\n        this.placeholder = 'Drop to upload';\n        this.files = []\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.dragging = false;\n        this.uploading = false;\n\n        ['dragenter', 'dragleave', 'dragover', 'drop'].forEach(fn=>{\n            this[fn] = this['_'+fn].bind(this)\n        })\n\t}\n\n    get progress(){\n        let progress = this.files.length > 0 ? this._numUploaded * 100 : 0\n        progress += this._fileProgress\n        return progress > 0 ? (progress / (this.files.length * 100) * 100) : 0\n    }\n\n    get autoUpload(){ return this.hasAttribute('auto-upload') }\n\n    render(){ return html`\n        <input class=\"choose\" type=\"file\" @click=${e=>e.stopPropagation()} @change=${this._inputChange} accept=${this.accept} ?multiple=${this.multiple}>\n        <div class=\"placeholder\">${this.placeholder}</div>\n        <div class=\"progress\">\n            <div class=\"bar\" style=\"width:${this.progress}%\"></div>\n            <div>\n                <b-spinner></b-spinner>\n                Uploading ${this._numUploading} of ${this.files.length}\n            </div>\n        </div>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback();\n        if( this.parent ) return\n        this.parent = this.parentElement || this.getRootNode().host\n        this.parent.addEventListener('dragenter', this.dragenter, true)\n        this.addEventListener('dragleave', this.dragleave, true)\n        this.addEventListener('dragover', this.dragover, true)\n        this.addEventListener('drop', this.drop, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.parent.removeEventListener('dragenter', this.dragenter)\n        this.removeEventListener('dragleave', this.dragleave)\n        this.removeEventListener('dragover', this.dragover)\n        this.removeEventListener('drop', this.drop)\n        this.parent = null;\n    }\n\n    _acceptFile(file){\n        let doAccept = true\n        let accept = this.accept\n        if( !accept ) return true\n        return accept.split(',').find(patt=>{\n            patt = patt.trim()\n            if( patt[0] == '.' )\n                return new RegExp(patt+'$').test(file.name)\n            else\n                return new RegExp(patt).test(file.type)\n        })\n    }\n\n    chooseFile(){\n        if( this.disabled ) return\n        this.shadowRoot.querySelector('.choose').click()\n    }\n\n    // alias\n    selectFile(){\n        this.chooseFile()\n    }\n\n    _drop(e){\n        e.preventDefault()\n        this.dragging = false\n        // let files = new Files(e.dataTransfer)\n        this._selectFiles(e.dataTransfer.files)\n    }\n\n    _inputChange(e){\n        this._selectFiles(e.target.files)\n    }\n\n    _selectFiles(files){\n\n        if( this.uploading ) return\n\n        files = Array.from(files)\n        \n        if( !this.multiple )\n            files = files.slice(0,1)\n\n        let valid = []\n        let invalid = []\n\n        files.forEach(file=>{\n            if( this._acceptFile(file) )\n                valid.push(file)\n            else\n                invalid.push(file)\n        })\n\n        this.files = valid\n\n        this.dispatchEvent(new CustomEvent('change', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                invalid: invalid.length > 0 ? invalid : false\n            }\n        }))\n\n        if( this.autoUpload && this.url ){\n            this.upload()\n        }\n\n    }\n\n    _dragover(e){\n        e.preventDefault() // needed to allow `drop` event to trigger\n    }\n\n    _dragenter(e){\n        if( this.disabled || !e.dataTransfer.types.includes('Files') ) return\n        this.dragging = true\n    }\n\n    _dragleave(e){\n        this.dragging = false\n    }\n\n    async upload({ url='', method='POST', fileKey='file', formData={} }={}){\n\n        if( this.uploading )\n            throw new Error(\"Already uploading\")\n\n        url = url || this.url\n        \n        if( !url )\n            throw new Error(\"Missing URL\")\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.uploading = true\n\n        let resp = []\n\n        for( let i in this.files ){\n\n            let file = this.files[i]\n            let _formData = new FormData();\n\n            _formData.append(fileKey, file)\n            _formData.append('totalFiles', this.files.length)\n            _formData.append('fileNum', parseInt(i)+1)\n\n            for( let key in formData ){\n                if( typeof formData[key] === 'function' )\n                    _formData.append(key, formData[key](file))\n                else\n                    _formData.append(key, formData[key])\n            }\n\n            this._numUploading++\n            this.requestUpdate()\n\n            try{\n\n                let req = new AJAX(method, url)\n                \n                req.on('progress', e=>{\n                    this._fileProgress = Math.round(e.loaded / e.total * 100)\n                    this.requestUpdate()\n                })\n\n                let uploadResp = await req.send(_formData)\n\n                this._numUploaded++\n                this.requestUpdate()\n\n                resp.push(uploadResp)\n\n            }catch(e){\n                console.log(e);\n                resp.push({error: e, file: file})\n            }\n        }\n\n        this._numUploading = 0\n        this._numUploaded = 0\n        this._fileProgress = 0\n        this.files = []\n        this.uploading = false\n\n        this.dispatchEvent(new CustomEvent('upload-done', {\n            bubbles: true,\n            composed: true,\n            detail: resp\n        }))\n\n        return this.multiple ? resp : resp[0]\n    }\n\n}\n    \ncustomElements.define('b-uploader', UploaderElement)\n\n// WIP for uploading directories\nclass Files {\n\n    constructor(dataTransfer){\n        this.getFiles(dataTransfer)\n    }\n\n    async getFiles(dataTransfer){\n        if( dataTransfer.items[0].webkitGetAsEntry ){\n\n            Array.from(dataTransfer.items).forEach(async item=>{\n\n                item = item.webkitGetAsEntry()\n\n                if( item.isFile ){\n                    console.log('file', item);\n                }else{\n                    console.log('dir', item);\n\n                    let items = await Files.getDirItems(item)\n                    console.log(items);\n                }\n            })\n\n\n        }\n    }\n\n    static async getDirItems(item){\n\n        let entries = await dirEntries(item)\n        \n        let items = await Promise.all(entries.map(async entry=>{\n            if( entry.isFile )\n                return await entryFile(entry)\n            else\n                return await Files.getDirItems(entry)\n        }))\n\n        return {\n            name: item.name,\n            items: items\n        }\n    }\n}\n\n\nconst entryFile = entry=>{\n    return new Promise(resolve=>{\n        entry.file(file=>{\n            resolve(file)\n        })\n    })\n}\n\nconst dirEntries = dir=>{\n    return new Promise(resolve=>{\n        dir.createReader().readEntries(entries=>{\n            resolve(entries)\n        });\n    })\n}","import { LitElement, html, css } from 'lit-element';\n\nexport class PaperElement extends LitElement {\n\n    static get properties() { return {\n        color: {type: String, reflect: true},\n        empty: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.color = ''\n        this.empty = false\n\t}\n\n    static get styles(){ return css`\n        :host {\n            box-sizing: border-box;\n            display: block;\n            background: var(--bgd);\n            box-shadow: var(--b-paper-shadow, rgba(0,0,0,.1) 0 1px 5px);\n            border: solid 1px transparent;\n            --radius: var(--b-paper-radius, 3px);\n            border-radius: var(--radius);\n            --padding: 1em;\n            padding: var(--padding);\n            position: relative;\n            --bgd: var(--b-paper-bgd, #fff);\n            --bgdAccent: var(--bgd);\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([overshadow]) {\n            box-shadow: var(--b-paper-overshadow, rgba(0, 0, 0, 0.1) 0px 0px 20px);\n        }\n\n        :host([inline]) {\n            display: inline-block;\n        }\n\n        :host([empty]) {\n            background: none;\n            box-shadow: none;\n            border: 1px dashed rgba(0,0,0,.3);\n        }\n\n        :host([centered]) {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        :host([border]) {\n            border-left: solid 5px var(--bgdAccent);\n        }\n\n        :host([outline]) {\n            box-shadow: none;\n            border-color: rgba(0, 0, 0, 0.1);\n        }\n\n        :host([noshadow]) {\n            box-shadow: none;\n        }\n\n        :host([dense]) {\n            --padding: .5em;\n        }\n\n        :host([compact]) {\n            --padding: 0;\n        }\n\n        ::slotted(header:first-child) {\n            border-radius: 3px 3px 0 0;\n            margin: calc(var(--padding) * -1);\n            margin-bottom: var(--padding);\n            padding: var(--padding);\n            display: flex; \n            align-content: center;\n            justify-content: space-between;\n        }\n\n        ::slotted(b-icon:first-of-type) {\n            /* color: var(--bgdAccent); */\n            color: #000;\n            opacity: .5;\n            margin-right: .15em;\n        }\n\n        :host([color=\"gray\"]) {\n            --bgd: #EEEEEE;\n            --bgdAccent: #BDBDBD;\n            color: #212121;\n        }\n\n        :host([color=\"blue\"]) {\n            --bgd: #2196F3;\n            --bgdAccent: #1565C0;\n            color: #fff;\n        }\n\n        :host([color=\"green\"]) {\n            --bgd: #27ae60;\n            --bgdAccent: #00695C;\n            color: #fff;\n        }\n\n        :host([color=\"red\"]) {\n            --bgd: #f44336;\n            --bgdAccent: #c62828;\n            color: #fff;\n        }\n\n        :host([color=\"orange\"]) {\n            --bgd: #FF9800;\n            --bgdAccent: #EF6C00;\n            color: #fff;\n        }\n\n        :host([color=\"yellow\"]) {\n            --bgd: #FFC107;\n            --bgdAccent: #F9A825;\n            color: #fff;\n        }\n\n        :host([color=\"purple\"]) {\n            --bgd: #673AB7;\n            --bgdAccent: #4527A0;\n            color: #fff;\n        }\n\n        :host([color=\"postit\"]) {\n            color: var(--b-paper-postit-color, inherit);\n            --bgd: var(--b-paper-postit-bgd, #FFF8E1);\n            --bgdAccent: var(--b-paper-postit-bgd-accent, var(--orange));\n        }\n\n        :host([color=\"info\"]) {\n            color: var(--b-paper-info-color, inherit);\n            --bgd: var(--b-paper-info-bgd, var(--blue-50));\n            --bgdAccent: var(--b-paper-info-bgd-accent, var(--blue));\n        }\n    `}\n\n    render(){ return html`\n        <slot></slot>\n    `}\n\n}\n    \ncustomElements.define('b-paper', PaperElement)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-text', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n        }\n\n        :host([block]) {\n            display: block;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([clip]) {\n            max-width: 100%;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            vertical-align: text-bottom;\n        }\n\n        :host([bold]) { font-weight: bold; }\n        :host([italic]) { font-style: italic; }\n\n        :host([capitalize]) { text-transform: capitalize; }\n        :host([ucase]) { text-transform: uppercase; }\n        :host([lcase]) { text-transform: lowercase }\n\n        :host([align=\"left\"]) { text-align: left; }\n        :host([align=\"right\"]) { text-align: right; }\n        :host([align=\"center\"]) { text-align: center; }\n        :host([align=\"justify\"]) { text-align: justify; }\n\n        :host([xs]) { font-size: .65em; line-height: 1.1em; }\n        :host([sm]) { font-size: .8em; line-height: 1.1em; }\n        :host([md]) { font-size: 1.2em; line-height: 1.1em; }\n        :host([lg]) { font-size: 1.4em; line-height: 1.1em; }\n        :host([xl]) { font-size: 1.7em; line-height: 1.1em; }\n        :host([xxl]) { font-size: 2em; line-height: 1.1em; }\n\n        :host([tone=\"muted\"]), :host([muted]) { color: rgba(var(--theme-rgb, 0,0,0),.4); }\n        :host([tone=\"critical\"]) { color: var(--b-text-tone-critical, var(--red-A400, red)); }\n        :host([tone=\"warning\"]) { color: var(--b-text-tone-warning, var(--orange, orange)); }\n        :host([tone=\"info\"]) { color: var(--b-text-tone-info, var(--blue, blue)); }\n\n        @media (hover){\n            :host([link]:hover),\n            :host([href]:hover) {\n                color: var(--b-text-link-color, var(--theme, var(--blue, blue)));\n            }\n        }\n\n        :host([sup]) {\n            vertical-align: super;\n            margin-top: -1em;\n        }\n\n        :host([sub]) {\n            vertical-align: sub;\n            margin-bottom: -1em;\n        }\n    `}\n\n    firstUpdated(){\n        if( this.hasAttribute('clip') && !this.hasAttribute('title') )\n            this.title = this.innerText\n    }\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-text')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-grid', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 1em;\n            min-width: 0;\n        }\n\n        ::slotted(*) {\n            min-width: 0;\n            min-height: 0;\n        }\n\n        /* standard/simple colums */\n        :host([cols=\"1\"]) { grid-template-columns: 1fr; }\n        :host([cols=\"2\"]) { grid-template-columns: repeat(2, 1fr); }\n        :host([cols=\"3\"]) { grid-template-columns: repeat(3, 1fr); }\n        :host([cols=\"4\"]) { grid-template-columns: repeat(4, 1fr); }\n        :host([cols=\"5\"]) { grid-template-columns: repeat(5, 1fr); }\n        :host([cols=\"6\"]) { grid-template-columns: repeat(6, 1fr); }\n        :host([cols=\"7\"]) { grid-template-columns: repeat(7, 1fr); }\n        :host([cols=\"8\"]) { grid-template-columns: repeat(8, 1fr); }\n\n        /* two-thirds, one-third */\n        :host([cols=\"2,1\"]) { grid-template-columns: 2fr 1fr; }\n        :host([cols=\"1,2\"]) { grid-template-columns: 1fr 2fr; }\n\n        /* half, quarter, quarter */\n        :host([cols=\"2,1,1\"]) { grid-template-columns: 2fr 1fr 1fr; }\n        :host([cols=\"1,1,2\"]) { grid-template-columns: 1fr 1fr 2fr; }\n\n        @media (max-width:699px){\n            :host([cols-mobile=\"1\"]) { grid-template-columns: 1fr; }\n            :host([cols-mobile=\"2\"]) { grid-template-columns: repeat(2, 1fr); }\n            :host([cols-mobile=\"3\"]) { grid-template-columns: repeat(3, 1fr); }\n            :host([cols-mobile=\"2,1\"]) { grid-template-columns: 2fr 1fr; }\n            :host([cols-mobile=\"1,2\"]) { grid-template-columns: 1fr 2fr; }\n        }\n\n        :host([gap=\"0\"]), :host([gap=\"none\"]) { gap: 0; }\n        :host([gap=\".5\"]) { gap: .5em; }\n        :host([gap=\"1\"]) { gap: 1em; }\n        :host([gap=\"2\"]) { gap: 2em; }\n\n        :host([align=\"start\"]) { justify-items: flex-start; }\n        :host([align=\"center\"]) { justify-items: center; }\n        :host([align=\"end\"]) { justify-items: flex-end; }\n\n        ::slotted([colspan]) { grid-column: 1/-1; }\n        ::slotted([colspan=\"2\"]) { grid-column: span 2; }\n        ::slotted([colspan=\"3\"]) { grid-column: span 3; }\n        ::slotted([colspan=\"4\"]) { grid-column: span 4; }\n        ::slotted([colspan=\"5\"]) { grid-column: span 5; }\n        ::slotted([colspan=\"6\"]) { grid-column: span 6; }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-grid')","/*\n    TODO:\n    - add sliding animation?\n*/\nimport { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-carousel', class extends LitElement{\n\n    static get properties(){return {\n        views: {type: Array}\n    }}\n\n    constructor(){\n        super()\n        this.views = []\n        this.active = 0\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            --dotSize: 14px;\n            --dotPadding: 4px;\n            --dotMargin: 5px;\n            --dotExpand: scale(1.4);\n        }\n\n        [hidden] {\n            display: none;\n        }\n\n        nav {\n            display: flex;\n            margin: 1em 0;\n            justify-content: center;\n            align-items: center;\n        }\n\n        nav > div {\n            width: var(--dotSize);\n            height: var(--dotSize);\n            margin: var(--dotMargin);\n            padding: var(--dotPadding);\n            cursor: pointer;\n        }\n\n        nav > div > div {\n            height: 100%;\n            width: 100%;\n            border-radius: 20px;\n            background: #ccc;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n        }\n\n        nav > div:hover > div {\n            transform: var(--dotExpand);\n        }\n\n        nav > div[active] > div {\n            background: #2196F3;\n        }\n        \n        @media print {\n            nav {\n                display: none;\n            }\n\n            ::slotted(*) {\n                display: block !important\n            }\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n        <nav ?hidden=${this.views.length<=1}>${this.views.map((v,i)=>html`\n            <div i=${i} ?active=${i==this.active} @click=${this.navTo}>\n                <div></div>\n            </div>\n        `)}</nav>\n    `}\n\n    get active(){ return this.__active }\n    set active(val){\n        this.__active = val\n        this.views.forEach(v=>v.hidden=true)\n\n        if( !this.views[val] ) return \n\n        this.views[val].hidden = false\n        this.update()\n    }\n\n    navTo(e){\n        let i = e.currentTarget.getAttribute('i')\n        this.active = i\n    }\n\n    firstUpdated(){\n\n        let slot = this.shadowRoot.querySelector('slot');\n\n        slot.addEventListener('slotchange', e=>{\n            this.views = slot.assignedElements();\n            this.active = 0\n        });\n    }\n\n})\n\nexport default customElements.get('b-carousel')","//! moment.js\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return input != null && Object.prototype.toString.call(input) === '[object Object]';\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return (Object.getOwnPropertyNames(obj).length === 0);\n        } else {\n            var k;\n            for (k in obj) {\n                if (obj.hasOwnProperty(k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false,\n            parsedDateParts : [],\n            meridiem        : null,\n            rfc2822         : false,\n            weekdayMismatch : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this);\n            var len = t.length >>> 0;\n\n            for (var i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            var parsedParts = some.call(flags.parsedDateParts, function (i) {\n                return i != null;\n            });\n            var isNowValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.weekdayMismatch &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated &&\n                (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid = isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            }\n            else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid (flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i = 0; i < momentProperties.length; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function warn(msg) {\n        if (hooks.suppressDeprecationWarnings === false &&\n                (typeof console !==  'undefined') && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [];\n                var arg;\n                for (var i = 0; i < arguments.length; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (var key in arguments[0]) {\n                            arg += key + ': ' + arguments[0][key] + ', ';\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n    }\n\n    function set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' + (/\\d{1,2}/).source);\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig), prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (hasOwnProp(parentConfig, prop) &&\n                    !hasOwnProp(childConfig, prop) &&\n                    isObject(parentConfig[prop])) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i, res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function calendar (key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        ss : '%d seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (isFunction(output)) ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [];\n        for (var u in unitsObj) {\n            units.push({unit: u, priority: priorities[u]});\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '', i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\n    var match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n    var matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    var matchWord = /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i;\n\n    var regexes = {};\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }));\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n    var WEEK = 7;\n    var WEEKDAY = 8;\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? '' + y : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get (mom, unit) {\n        return mom.isValid() ?\n            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n    }\n\n    function set$1 (mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));\n            }\n            else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet (units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n\n    function stringSet (units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units);\n            for (var i = 0; i < prioritized.length; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m, format) {\n        if (!m) {\n            return isArray(this._months) ? this._months :\n                this._months['standalone'];\n        }\n        return isArray(this._months) ? this._months[m.month()] :\n            this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m, format) {\n        if (!m) {\n            return isArray(this._monthsShort) ? this._monthsShort :\n                this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i, ii, mom, llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    var defaultMonthsShortRegex = matchWord;\n    function monthsShortRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict ?\n                this._monthsShortStrictRegex : this._monthsShortRegex;\n        }\n    }\n\n    var defaultMonthsRegex = matchWord;\n    function monthsRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict ?\n                this._monthsStrictRegex : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    }\n\n    function createDate (y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date;\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            date = new Date(y + 400, m, d, h, M, s, ms);\n            if (isFinite(date.getFullYear())) {\n                date.setFullYear(y);\n            }\n        } else {\n            date = new Date(y, m, d, h, M, s, ms);\n        }\n\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date;\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            var args = Array.prototype.slice.call(arguments);\n            // preserve leap years using a full 400 year cycle, then reset\n            args[0] = y + 400;\n            date = new Date(Date.UTC.apply(null, args));\n            if (isFinite(date.getUTCFullYear())) {\n                date.setUTCFullYear(y);\n            }\n        } else {\n            date = new Date(Date.UTC.apply(null, arguments));\n        }\n\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear, resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek, resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd',   function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd',   function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n    function shiftWeekdays (ws, n) {\n        return ws.slice(n, 7).concat(ws.slice(0, n));\n    }\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m, format) {\n        var weekdays = isArray(this._weekdays) ? this._weekdays :\n            this._weekdays[(m && m !== true && this._weekdays.isFormat.test(format)) ? 'format' : 'standalone'];\n        return (m === true) ? shiftWeekdays(weekdays, this._week.dow)\n            : (m) ? weekdays[m.day()] : weekdays;\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return (m === true) ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n            : (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return (m === true) ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n            : (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse (weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$', 'i');\n            }\n            if (!this._weekdaysParse[i]) {\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    var defaultWeekdaysRegex = matchWord;\n    function weekdaysRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict ?\n                this._weekdaysStrictRegex : this._weekdaysRegex;\n        }\n    }\n\n    var defaultWeekdaysShortRegex = matchWord;\n    function weekdaysShortRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict ?\n                this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n        }\n    }\n\n    var defaultWeekdaysMinRegex = matchWord;\n    function weekdaysMinRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict ?\n                this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n        }\n    }\n\n\n    function computeWeekdaysParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom, minp, shortp, longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = this.weekdaysMin(mom, '');\n            shortp = this.weekdaysShort(mom, '');\n            longp = this.weekdays(mom, '');\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 7; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('k',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour they want. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse\n    };\n\n    // internal storage for locale config files\n    var locales = {};\n    var localeFamilies = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && (typeof module !== 'undefined') &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                var aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {}\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n            else {\n                if ((typeof console !==  'undefined') && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn('Locale ' + key +  ' not found. Did you forget to load it?');\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, config) {\n        if (config !== null) {\n            var locale, parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple('defineLocaleOverride',\n                        'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale, tmpLocale, parentConfig = baseConfig;\n            // MERGE\n            tmpLocale = loadLocale(name);\n            if (tmpLocale != null) {\n                parentConfig = tmpLocale._config;\n            }\n            config = mergeConfigs(parentConfig, config);\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, expectedWeekday, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            var curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n    var basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\n    var tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        // YYYYMM is NOT allowed by the standard\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime, dateFormat, timeFormat, tzFormat;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimes.length; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/;\n\n    function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10)\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s.replace(/\\([^)]*\\)|[\\n\\t]/g, ' ').replace(/(\\s\\s+)/g, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var obsOffsets = {\n        UT: 0,\n        GMT: 0,\n        EDT: -4 * 60,\n        EST: -5 * 60,\n        CDT: -5 * 60,\n        CST: -6 * 60,\n        MDT: -6 * 60,\n        MST: -7 * 60,\n        PDT: -7 * 60,\n        PST: -8 * 60\n    };\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10);\n            var m = hm % 100, h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i));\n        if (match) {\n            var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        // Final attempt, use Input Fallback\n        hooks.createFromInputFallback(config);\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n        'discouraged and will be removed in an upcoming major release. Please refer to ' +\n        'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            // console.log('token', token, 'parsedInput', parsedInput,\n            //         'regex', getParseRegexForToken(token, config));\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n            return obj && parseInt(obj, 10);\n        });\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        }  else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if ((isObject(input) && isObjectEmpty(input)) ||\n                (isArray(input) && input.length === 0)) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other < this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +(new Date());\n    };\n\n    var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\n    function isDurationValid(m) {\n        for (var key in m) {\n            if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n                return false;\n            }\n        }\n\n        var unitHasDecimal = false;\n        for (var i = 0; i < ordering.length; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound (number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // FORMATTING\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher);\n\n        if (matches === null) {\n            return null;\n        }\n\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ?\n          0 :\n          parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            }\n            else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset () {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc () {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    var isoRegex = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (isNumber(input)) {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])                         * sign,\n                h  : toInt(match[HOUR])                         * sign,\n                m  : toInt(match[MINUTE])                       * sign,\n                s  : toInt(match[SECOND])                       * sign,\n                ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n            };\n        } else if (!!(match = isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                w : parseIso(match[4], sign),\n                d : parseIso(match[5], sign),\n                h : parseIso(match[6], sign),\n                m : parseIso(match[7], sign),\n                s : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return {milliseconds: 0, months: 0};\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n                'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add      = createAdder(1, 'add');\n    var subtract = createAdder(-1, 'subtract');\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n    }\n\n    function calendar$1 (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n        return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween (from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));\n    }\n\n    function isSame (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n        }\n    }\n\n    function isSameOrAfter (input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore (input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff (input, units, asFloat) {\n        var that,\n            zoneDelta,\n            output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year': output = monthDiff(this, that) / 12; break;\n            case 'month': output = monthDiff(this, that); break;\n            case 'quarter': output = monthDiff(this, that) / 3; break;\n            case 'second': output = (this - that) / 1e3; break; // 1000\n            case 'minute': output = (this - that) / 6e4; break; // 1000 * 60\n            case 'hour': output = (this - that) / 36e5; break; // 1000 * 60 * 60\n            case 'day': output = (this - that - zoneDelta) / 864e5; break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week': output = (this - that - zoneDelta) / 6048e5; break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default: output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true;\n        var m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect () {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment';\n        var zone = '';\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        var prefix = '[' + func + '(\"]';\n        var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n        var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        var suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format (inputString) {\n        if (!inputString) {\n            inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    var MS_PER_SECOND = 1000;\n    var MS_PER_MINUTE = 60 * MS_PER_SECOND;\n    var MS_PER_HOUR = 60 * MS_PER_MINUTE;\n    var MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n    // actual modulo - handles negative numbers (for dates before 1970):\n    function mod$1(dividend, divisor) {\n        return (dividend % divisor + divisor) % divisor;\n    }\n\n    function localStartOfDate(y, m, d) {\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return new Date(y, m, d).valueOf();\n        }\n    }\n\n    function utcStartOfDate(y, m, d) {\n        // Date.UTC remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return Date.UTC(y, m, d);\n        }\n    }\n\n    function startOf (units) {\n        var time;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year(), 0, 1);\n                break;\n            case 'quarter':\n                time = startOfDate(this.year(), this.month() - this.month() % 3, 1);\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month(), 1);\n                break;\n            case 'week':\n                time = startOfDate(this.year(), this.month(), this.date() - this.weekday());\n                break;\n            case 'isoWeek':\n                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date());\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time -= mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR);\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_MINUTE);\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_SECOND);\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function endOf (units) {\n        var time;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year() + 1, 0, 1) - 1;\n                break;\n            case 'quarter':\n                time = startOfDate(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n                break;\n            case 'week':\n                time = startOfDate(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;\n                break;\n            case 'isoWeek':\n                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time += MS_PER_HOUR - mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR) - 1;\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function valueOf () {\n        return this._d.valueOf() - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate () {\n        return new Date(this.valueOf());\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function toJSON () {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2 () {\n        return isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict\n        };\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input,\n                this.week(),\n                this.weekday(),\n                this.localeData()._week.dow,\n                this.localeData()._week.doy);\n    }\n\n    function getSetISOWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input, this.isoWeek(), this.isoWeekday(), 1, 4);\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict ?\n          (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n          locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add               = add;\n    proto.calendar          = calendar$1;\n    proto.clone             = clone;\n    proto.diff              = diff;\n    proto.endOf             = endOf;\n    proto.format            = format;\n    proto.from              = from;\n    proto.fromNow           = fromNow;\n    proto.to                = to;\n    proto.toNow             = toNow;\n    proto.get               = stringGet;\n    proto.invalidAt         = invalidAt;\n    proto.isAfter           = isAfter;\n    proto.isBefore          = isBefore;\n    proto.isBetween         = isBetween;\n    proto.isSame            = isSame;\n    proto.isSameOrAfter     = isSameOrAfter;\n    proto.isSameOrBefore    = isSameOrBefore;\n    proto.isValid           = isValid$2;\n    proto.lang              = lang;\n    proto.locale            = locale;\n    proto.localeData        = localeData;\n    proto.max               = prototypeMax;\n    proto.min               = prototypeMin;\n    proto.parsingFlags      = parsingFlags;\n    proto.set               = stringSet;\n    proto.startOf           = startOf;\n    proto.subtract          = subtract;\n    proto.toArray           = toArray;\n    proto.toObject          = toObject;\n    proto.toDate            = toDate;\n    proto.toISOString       = toISOString;\n    proto.inspect           = inspect;\n    proto.toJSON            = toJSON;\n    proto.toString          = toString;\n    proto.unix              = unix;\n    proto.valueOf           = valueOf;\n    proto.creationData      = creationData;\n    proto.year       = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear    = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month       = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week           = proto.weeks        = getSetWeek;\n    proto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\n    proto.weeksInYear    = getWeeksInYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.date       = getSetDayOfMonth;\n    proto.day        = proto.days             = getSetDayOfWeek;\n    proto.weekday    = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear  = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset            = getSetOffset;\n    proto.utc                  = setOffsetToUTC;\n    proto.local                = setOffsetToLocal;\n    proto.parseZone            = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST                = isDaylightSavingTime;\n    proto.isLocal              = isLocal;\n    proto.isUtcOffset          = isUtcOffset;\n    proto.isUtc                = isUtc;\n    proto.isUTC                = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\n    proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\n    function createUnix (input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone () {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar        = calendar;\n    proto$1.longDateFormat  = longDateFormat;\n    proto$1.invalidDate     = invalidDate;\n    proto$1.ordinal         = ordinal;\n    proto$1.preparse        = preParsePostFormat;\n    proto$1.postformat      = preParsePostFormat;\n    proto$1.relativeTime    = relativeTime;\n    proto$1.pastFuture      = pastFuture;\n    proto$1.set             = set;\n\n    proto$1.months            =        localeMonths;\n    proto$1.monthsShort       =        localeMonthsShort;\n    proto$1.monthsParse       =        localeMonthsParse;\n    proto$1.monthsRegex       = monthsRegex;\n    proto$1.monthsShortRegex  = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays       =        localeWeekdays;\n    proto$1.weekdaysMin    =        localeWeekdaysMin;\n    proto$1.weekdaysShort  =        localeWeekdaysShort;\n    proto$1.weekdaysParse  =        localeWeekdaysParse;\n\n    proto$1.weekdaysRegex       =        weekdaysRegex;\n    proto$1.weekdaysShortRegex  =        weekdaysShortRegex;\n    proto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1 (format, index, field, setter) {\n        var locale = getLocale();\n        var utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl (format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl (localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0;\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths (format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort (format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\n    hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\n    var mathAbs = Math.abs;\n\n    function abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1 (duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1 (input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1 (input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'quarter' || units === 'year') {\n            days = this._days + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            switch (units) {\n                case 'month':   return months;\n                case 'quarter': return months / 3;\n                case 'year':    return months / 12;\n            }\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1 () {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asQuarters     = makeAs('Q');\n    var asYears        = makeAs('y');\n\n    function clone$1 () {\n        return createDuration(this);\n    }\n\n    function get$2 (units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        ss: 44,         // a few seconds to seconds\n        s : 45,         // seconds to minute\n        m : 45,         // minutes to hour\n        h : 22,         // hours to day\n        d : 26,         // days to month\n        M : 11          // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n        var duration = createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds <= thresholds.ss && ['s', seconds]  ||\n                seconds < thresholds.s   && ['ss', seconds] ||\n                minutes <= 1             && ['m']           ||\n                minutes < thresholds.m   && ['mm', minutes] ||\n                hours   <= 1             && ['h']           ||\n                hours   < thresholds.h   && ['hh', hours]   ||\n                days    <= 1             && ['d']           ||\n                days    < thresholds.d   && ['dd', days]    ||\n                months  <= 1             && ['M']           ||\n                months  < thresholds.M   && ['MM', months]  ||\n                years   <= 1             && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding (roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof(roundingFunction) === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var locale = this.localeData();\n        var output = relativeTime$1(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return ((x > 0) - (x < 0)) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000;\n        var days         = abs$1(this._days);\n        var months       = abs$1(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        var totalSign = total < 0 ? '-' : '';\n        var ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        var daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return totalSign + 'P' +\n            (Y ? ymSign + Y + 'Y' : '') +\n            (M ? ymSign + M + 'M' : '') +\n            (D ? daysSign + D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? hmsSign + h + 'H' : '') +\n            (m ? hmsSign + m + 'M' : '') +\n            (s ? hmsSign + s + 'S' : '');\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid        = isValid$1;\n    proto$2.abs            = abs;\n    proto$2.add            = add$1;\n    proto$2.subtract       = subtract$1;\n    proto$2.as             = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds      = asSeconds;\n    proto$2.asMinutes      = asMinutes;\n    proto$2.asHours        = asHours;\n    proto$2.asDays         = asDays;\n    proto$2.asWeeks        = asWeeks;\n    proto$2.asMonths       = asMonths;\n    proto$2.asQuarters     = asQuarters;\n    proto$2.asYears        = asYears;\n    proto$2.valueOf        = valueOf$1;\n    proto$2._bubble        = bubble;\n    proto$2.clone          = clone$1;\n    proto$2.get            = get$2;\n    proto$2.milliseconds   = milliseconds;\n    proto$2.seconds        = seconds;\n    proto$2.minutes        = minutes;\n    proto$2.hours          = hours;\n    proto$2.days           = days;\n    proto$2.weeks          = weeks;\n    proto$2.months         = months;\n    proto$2.years          = years;\n    proto$2.humanize       = humanize;\n    proto$2.toISOString    = toISOString$1;\n    proto$2.toString       = toISOString$1;\n    proto$2.toJSON         = toISOString$1;\n    proto$2.locale         = locale;\n    proto$2.localeData     = localeData;\n\n    proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\n    proto$2.lang = lang;\n\n    // Side effect imports\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    hooks.version = '2.24.0';\n\n    setHookCallback(createLocal);\n\n    hooks.fn                    = proto;\n    hooks.min                   = min;\n    hooks.max                   = max;\n    hooks.now                   = now;\n    hooks.utc                   = createUTC;\n    hooks.unix                  = createUnix;\n    hooks.months                = listMonths;\n    hooks.isDate                = isDate;\n    hooks.locale                = getSetGlobalLocale;\n    hooks.invalid               = createInvalid;\n    hooks.duration              = createDuration;\n    hooks.isMoment              = isMoment;\n    hooks.weekdays              = listWeekdays;\n    hooks.parseZone             = createInZone;\n    hooks.localeData            = getLocale;\n    hooks.isDuration            = isDuration;\n    hooks.monthsShort           = listMonthsShort;\n    hooks.weekdaysMin           = listWeekdaysMin;\n    hooks.defineLocale          = defineLocale;\n    hooks.updateLocale          = updateLocale;\n    hooks.locales               = listLocales;\n    hooks.weekdaysShort         = listWeekdaysShort;\n    hooks.normalizeUnits        = normalizeUnits;\n    hooks.relativeTimeRounding  = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat        = getCalendarFormat;\n    hooks.prototype             = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',             // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',  // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',   // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD',                             // <input type=\"date\" />\n        TIME: 'HH:mm',                                  // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss',                       // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS',                        // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW',                             // <input type=\"week\" />\n        MONTH: 'YYYY-MM'                                // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","import { LitElement, html, css } from 'lit-element'\nimport moment from 'moment'\n\nexport class TimerElement extends LitElement {\n\n    static get properties() { return {\n        time: {type: Number},\n\t\tms: {type: Boolean},\n\t\tshort: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n\t\tsuper()\n        this.time = 0\n\t\tthis.ms = false\n\t\tthis.short = false\n\t\tthis.running = this.hasAttribute('running') ? true : false\n\t}\n\n\tget time(){ return this.__time }\n\n\tset time(val){\n\n\t\tconst oldVal = this.__time\n\t\t\n\t\tif( !this.dur )\n\t\t\tthis.dur = moment.duration(val)\n\t\telse{\n\t\t\tlet delta = val - oldVal\n\t\t\tthis.dur.add(delta)\n\t\t}\n\n\t\tif( val == 0 )\n\t\t\tthis.setAttribute('zero', '')\n\t\telse\n\t\t\tthis.removeAttribute('zero')\n\n\t\tthis.__time = val\n\t\tthis.requestUpdate('time', oldVal);\n\t}\n\n    static get styles(){ return css`\n        :host {\n            display: inline-flex;\n\t\t\t--zeroColor: rgba(0,0,0,.5);\n        }\n\n\t\t.hours[value=\"0\"],\n\t\t.hours[value=\"00\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.hours[value=\"0\"] + span,\n\t\t.hours[value=\"00\"] + span {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"0\"],\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"00\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"0\"] + span,\n\t\t:host([short]) .hours[value=\"00\"] ~ .minutes[value=\"00\"] + span {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t/* span, */\n\t\t/* unit[value=\"00\"] {\n\t\t\tcolor: var(--zeroColor);\n\t\t} */\n    `}\n\n    render(){ return html`\n\t\t<unit class=\"hours\" value=\"${this.hours}\">${this.hours}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"minutes\" value=\"${this.minutes}\">${this.minutes}</unit>\n\t\t<span>:</span>\n\t\t<unit class=\"seconds\" value=\"${this.seconds}\">${this.seconds}</unit>\n\t\t${this.ms?html`<unit class=\"ms\">.${this.milliseconds}</unit>`:''}\n    `}\n\n\tget running(){\n\t\treturn this._lastTS != null\n\t}\n\n\tset running(run){\n\t\tif( !run ){\n\t\t\tthis.removeAttribute('running')\n\t\t\tthis._lastTS = null\n\t\t\tclearInterval(this._progressInterval)\n\t\t}else if( !this.running ){\n\t\t\tthis._lastTS = new Date().getTime()\n\t\t\tthis._progressInterval = setInterval(this._progress.bind(this), 100)\n\t\t\tthis.setAttribute('running', '')\n\t\t}\n\t}\n\n\tstart(){ this.running = true }\n\tstop(){ this.running = false }\n\n\t_progress(){\n\t\tlet ts = new Date().getTime()\n\t\tlet elapsedTime = ts - this._lastTS\n\t\tthis._lastTS = ts\n\t\tthis.time += elapsedTime\n\t}\n\n\tget hours(){\n\t\treturn String(this.dur.hours()).padStart(2, '0')\n\t}\n\n\tget minutes(){\n\t\treturn String(this.dur.minutes()).padStart(2, '0')\n\t}\n\n\tget seconds(){\n\t\treturn String(this.dur.seconds()).padStart(2, '0')\n\t}\n\n\tget milliseconds(){\n\t\treturn Math.round(this.dur.milliseconds() / 100)\n\t}\n\n\tget format(){\n\n\t\tlet str = [\n\t\t\tthis.hours,\n\t\t\tthis.minutes,\n\t\t\tthis.seconds\n\t\t].join(':')\n\n\t\tif( this.ms )\n\t\t\tstr += '.'+this.milliseconds\n\n\t\treturn str\n\t}\n}\n    \ncustomElements.define('b-timer', TimerElement)       \n","/*\n    https://undraw.co/illustrations\n*/\nimport { LitElement, html, css } from \"lit-element\";\n\nexport default class EmptyState extends LitElement {\n\n    static get properties(){return {\n        value: {type: String}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            color: var(--b-empty-state-color, rgba(55,71,79,.2));\n            font-size: 2em;\n            text-align: center;\n            padding: 1em;\n            box-sizing: border-box;\n            line-height: 1.2em;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n        }\n\n        :host([ondark]) {\n            color: rgba(255,255,255,.1);\n        }\n\n        :host([static]) {\n            position: static;\n            height: auto;\n            min-height: 1em;\n        }\n\n        :host([hidden]) {\n            display: none;\n        }\n\n        :host([xs]) { font-size: .8em; }\n        :host([sm]) { font-size: 1em; }\n        :host([md]) { font-size: 1.4em; }\n        :host([lg]) { font-size: 3em; }\n\n        :host([must-be=\"first\"]:not(:first-child)) {\n            display: none;\n        }\n\n        :host([must-be=\"last\"]:not(:last-child)) {\n            display: none;\n        }\n    `}\n\n    render(){return html`\n        <slot>${this.value}</slot>\n    `}\n}\n\ncustomElements.define('b-empty-state', EmptyState)","import { LitElement, html, css } from \"lit-element\";\n\nexport default class Label extends LitElement {\n\n    static get properties(){return {\n        'filled': {type: String, reflect: true},\n        'badge': {type: String, reflect: true},\n        'outline': {type: String, reflect: true}\n    }}\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            z-index: 1;\n            display: inline-block;\n            text-transform: uppercase;\n            color: var(--b-label-color, rgba(0,0,0,.33));\n            font-weight: bold;\n            font-size: 1rem;\n            line-height: 1rem;\n            --dividerThickness: 1px;\n            vertical-align: middle;\n            border-radius: var(--radius, 0);\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        :host([text]) {\n            font-weight: normal;\n            text-transform: none;\n        }\n\n        :host([hidden]) {\n            display: none !important;\n        }\n\n        :host([filled]),\n        :host([badge]),\n        :host([outline]) {\n            --bgd: #aaa;\n            --color: #fff;\n            padding: 0.15em 0.3em 0.1em;\n            --radius: 3px;\n            font-size: .8rem;\n            text-transform: none;\n            background: var(--bgd);\n            color: var(--color);\n        }\n\n        :host([xs]) { font-size: .6rem; line-height: .6rem; }\n        :host([sm]) { font-size: .8rem; line-height: .8rem; }\n        :host([lg]) { font-size: 1.2rem; line-height: 1.2rem; }\n        :host([xl]) { font-size: 1.4rem; line-height: 1.4rem; }\n\n        :host([outline]) {\n            background: none;\n            border: solid 1px;\n            border-color: var(--bgd);\n            --color: var(--bgd);\n        }\n\n        :host([badge]) {\n            --radius: 30px;\n            /* padding-left: .6em;\n            padding-right: .6em; */\n            padding-right: .45em;\n            padding-left: .45em;\n            min-width: .3em;\n            text-align: center;\n            min-height: 1em;\n        }\n\n        :host([dot]) {\n            height: 6px;\n            width: 6px;\n            min-width: 0;\n            min-height: 0;\n            padding: 0;\n        }\n\n        :host([filled=\"black\"]), :host([badge=\"black\"]) { --bgd: #333; }\n        :host([filled=\"white\"]), :host([badge=\"white\"]) { --bgd: #fff; --color: #333; }\n        :host([filled=\"gray\"]), :host([badge=\"gray\"]) { --bgd: #ddd; --color: #777; }\n        :host([filled=\"blue\"]), :host([badge=\"blue\"]) { --bgd: var(--blue); }\n        :host([filled=\"red\"]), :host([badge=\"red\"]) { --bgd: var(--red); }\n        :host([filled=\"orange\"]), :host([badge=\"orange\"]) { --bgd: var(--orange); }\n        :host([filled=\"green\"]), :host([badge=\"green\"]) { --bgd: var(--green); }\n        :host([filled=\"pink\"]), :host([badge=\"pink\"]) { --bgd: var(--pink); }\n        \n\n        :host([outline=\"black\"]) { --bgd: #333; }\n        :host([outline=\"gray\"]) { --bgd: #ddd; }\n        :host([outline=\"blue\"]) { --bgd: var(--blue); }\n        :host([outline=\"red\"]) { --bgd: var(--red); }\n        :host([outline=\"orange\"]) { --bgd: var(--orange); }\n        :host([outline=\"green\"]) { --bgd: var(--green); }\n        :host([outline=\"pink\"]) { --bgd: var(--pink); }\n\n        .bgd {\n            display: none;\n            background: var(--bgd);\n            opacity: .2;\n            position: absolute;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            border-radius: var(--radius);\n        }\n\n        :host([muted]) {\n            background: none;\n            --color: var(--bgd);\n        }\n\n        :host([muted]) .bgd {\n            display: block;\n        }\n\n        /* causes unwanted wrap on chrome */\n        /* slot {\n            display: flex;\n        } */\n\n        b-hr {\n            display: none;\n            grid-column: initial; /* remove default 100% width */\n            margin: 0;\n            width: auto;\n            height: var(--dividerThickness);\n        }\n\n        b-hr:first-child {\n            margin-right: 1em;\n        }\n\n        b-hr:last-child {\n            margin-left: 1em;\n        }\n\n        :host([divider]) {\n            display: grid;\n            align-items: center;\n            grid-template-columns: 0 auto 1fr;\n        }\n\n        :host([divider]) b-hr {\n            display: block;\n        }\n\n        :host([divider=\"center\"]) {\n            grid-template-columns: 1fr auto 1fr;\n        }\n\n        :host([divider=\"right\"]) {\n            grid-template-columns: 1fr auto 0;\n        }\n    `}\n\n    render(){return html`\n        <div class=\"bgd\"></div>\n        <b-hr></b-hr>\n        <slot></slot>\n        <b-hr></b-hr>\n    `}\n}\n\ncustomElements.define('b-label', Label)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-ribbon', class extends LitElement{\n\n    static get properties(){ return {\n        pos: {type: String, reflect: true},\n        value: {type: String, reflect: true},\n        shadow: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.pos = 'left'\n        this.value = ''\n        this.shadow = true;\n    }\n\n    static get styles(){return css`\n        :host {\n            --width: 4em;\n            --height: 1em;\n            --padding: .25em;\n            --color: var(--blue);\n            --shadow: none;\n            --offset: -2px;\n\n            line-height: 1em;\n            overflow: hidden;\n            position: absolute;\n            left: var(--offset);\n            top: var(--offset);\n            padding: 0 calc(var(--width) / 2) calc(var(--width) / 2) 0;\n            pointer-events: none;\n\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none; /* Safari */\n            -khtml-user-select: none; /* Konqueror HTML */\n            -moz-user-select: none; /* Firefox */\n            -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; \n        }\n\n        :host([hidden]){ display: none; }\n        \n        :host([shadow]) {\n            --shadow: rgba(0,0,0,.5) 0 10px 5px -10px;\n        }\n\n        :host([pos=\"right\"]) {\n            left: auto;\n            right: var(--offset);\n            padding: 0 0 calc(var(--width) / 2) calc(var(--width) / 2);\n        }\n\n        .wrap {\n            /* background: yellow; */\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: var(--width);\n            height: var(--width);\n        }\n\n        .inner {\n            width: var(--width);\n            max-height: var(--height);\n            overflow: hidden;\n        }\n\n        .ribbon {\n            pointer-events:all;\n            transform-origin: center center;\n            position: relative;\n            padding: var(--padding) calc(var(--width) / 1.5);\n            width: var(--width);\n            height: var(--height);\n            background: var(--color);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            box-shadow: var(--shadow);\n            text-align: center;\n            transform: rotateZ(-45deg);\n            backface-visibility: hidden;\n            z-index: 10;\n            font-weight: bold;\n        }\n\n        :host([pos=\"right\"]) .ribbon {\n            transform: rotateZ(45deg);\n        }\n\n    `}\n\n    render(){return html`\n        <div class=\"wrap\">\n            <div class=\"ribbon\">\n                <div class=\"inner\">\n                    <slot>${this.value}</slot>\n                </div>\n            </div>\n        </div>\n    `}\n\n})\n\nexport default customElements.get('b-ribbon')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-hr', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            --bgd: var(--b-hr-bgd, rgba(0,0,0,.1));\n\n            display: block;\n            margin: 1em auto;\n            height: 1px;\n            width: 100%;\n            background: var(--bgd);\n            \n            /* full width */\n            grid-column: 1/-1;\n        }\n\n        :host([short]) {\n            width: 180px;\n            max-width: 100%;\n        }\n\n        :host([vert]) {\n            display: inline-block;\n            vertical-align: middle;\n            min-height: 1em;\n            height: auto;\n            width: 1px;\n            margin: 0 .5em;\n            align-self: stretch;\n        }\n    `}\n\n    // dont support slotted content yet\n    render(){return html``}\n\n})\n\nexport default customElements.get('b-hr')","/*\n    DEPRECATED\n*/\nimport { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-sub', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline;\n            position:relative;\n            color: var(--b-sub-color, rgba(0,0,0,.4));\n            font-size: .8em;\n            font-weight: normal;\n        }\n\n        :host([ondark]) {\n            color: rgba(255,255,255,.4);\n        }\n    `}\n\n    render(){return html`\n        <slot></slot>\n    `}\n\n})\n\nexport default customElements.get('b-sub')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-ts', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n            white-space: nowrap;\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this._updateInterval = setInterval(this.update.bind(this), 60*1000)\n    }\n    \n    disconnectedCallback(){\n        super.disconnectedCallback()\n        clearInterval(this._updateInterval)\n    }\n\n    get date(){ return this.__date}\n    set date(date){\n        this.__date = date\n\n        if( date )\n            this.title = this.date.format('LT l')\n        \n        this.requestUpdate()\n    }\n\n    get displayTime(){\n        if( !this.date ) return ''\n        // TODO: support different formats?\n        // TODO: this is a moment.js format...what if moment not used?\n        return this.date.fromNow()\n    }\n\n    render(){return html`\n        ${this.displayTime}\n    `}\n\n})\n\nexport default customElements.get('b-ts')","\nconst InvalidImages = []\nexport const BgdColors = ['#2196F3', '#f44336', '#673AB7', '#00BCD4', '#009688', '#4CAF50', '#FFC107', '#FF5722', '#795548', '#607D8B']\nexport const DefaultBgd = '#aaa';\n\nclass AvatarElement extends HTMLElement {\n\t\n\tstatic get observedAttributes(){\n\t\treturn ['initials', 'bgd', 'color', 'size', 'url', 'gravatar']\t\n\t}\n\t\n    constructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        \n        temp.innerHTML = `<style>\n\t\t\t:host {\n\t\t\t\t--bgd: ${this.bgd};\n\t\t\t\t--bgdDefault: transparent;\n\t\t\t\t--color: ${this.color};\n\t\t\t\theight: var(--size, 1em);\n\t\t\t    width: var(--size, 1em);\n\t\t\t    display: inline-block;\n\t\t\t    vertical-align: middle;\n\n\t\t\t\t-webkit-touch-callout: none; /* iOS Safari */\n\t\t\t\t-webkit-user-select: none; /* Safari */\n\t\t\t\t-khtml-user-select: none; /* Konqueror HTML */\n\t\t\t\t-moz-user-select: none; /* Firefox */\n\t\t\t\t-ms-user-select: none; /* Internet Explorer/Edge */\n\t\t\t\tuser-select: none; \n\t\t\t}\n\n\t\t\t:host([shadow]) svg {\n\t\t\t\tbox-shadow: rgba(0,0,0,.1) 0 1px 3px;\n\t\t\t}\n\n\t\t\tsvg {\n\t\t\t\tborder-radius: var(--b-avatar-radius, 50%);\n\t\t\t}\n\t\t\t\n\t\t\tsvg rect {\n\t\t\t\tfill: var(--bgd);\n\t\t\t}\n\t\t\t\n\t\t\tsvg text {\n\t\t\t\tfill: var(--color);\n\t\t\t}\n\t\t\t\n\t\t\t:host([nobgd]) svg.imgloaded rect {\n\t\t\t\tfill: transparent;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloaded text {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\t\t\t\n\t\t\t:host([imgicon]) svg image {\n\t\t\t\twidth: 70%;\n\t\t\t\theight: 70%;\n\t\t\t\tx: 15%;\n\t\t\t\ty: 15%;\n\t\t\t}\n\t\t\t\n\t\t\tsvg.imgloading rect {\n\t\t\t\tfill: #eee;\n\t\t\t}\n\n\t\t\tsvg.imgloaded rect {\n\t\t\t\tfill: var(--bgdDefault);\n\t\t\t}\n\t\t\t</style>\n\t\t\t\n\t\t<svg class=\"imgloading\" viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" rx=\"0\" ry=\"0\"></rect>\n            <text x=\"50%\" y=\"50%\" font-size=\"65\" dominant-baseline=\"central\" text-anchor=\"middle\">${this.initials}</text>\n\t\t\t<image xlink:href=\"\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" onload=\"this.parentElement.classList.add('imgloaded')\">\n        </svg>`\n\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.img = this.shadowRoot.querySelector('image')\n\t\tthis.img.addEventListener('error', e=>{\n\t\t\tthis.img.style.display='none'\n\t\t\tthis.img.parentElement.classList.remove('imgloading')\n\t\t\tlet src = this.img.getAttribute('xlink:href')\n\t\t\tif( src )\n\t\t\t\tInvalidImages.push(src)\n\t\t})\n    }\n\t\n\tconnectedCallback(){\n\t\t// NOTE: https://stackoverflow.com/a/43837330/484780\n\t\t// this.style.display = 'inline-block'\n\t\t// this.style.verticalAlign = 'middle'\n\t\t// this.style.lineHeight = '0'\n\t\t\n\t\tif( this.hasAttribute('gravatar') )\n\t\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tattributeChangedCallback(name, oldVal, newVal){\n\t\tthis[name] = newVal\n\t}\n\t\n\tgetAttr(name, defaultVal){\n\t\treturn this.hasAttribute(name) ? (this.getAttribute(name)||defaultVal) : defaultVal\n\t}\n\t\n\tget initials(){\n\t\treturn this.getAttr('initials', '-')\n\t}\n\t\n\tset initials(str){\n\t\tthis.shadowRoot.querySelector('text').innerHTML = str || '-'\n\t\tthis.bgd = this.bgd // update bgd to match initial change (wont change if user specified the bgd attr)\n\t}\n\t\n\tget bgd(){\n\t\tlet color = this.getAttr('bgd')\n\t\tif( !color ){\n\t\t\t\n\t\t\tlet initials = this.getAttr('initials', '').toLowerCase()\n\t\t\t\n\t\t\tif( !initials ){\n\t\t\t\tcolor = DefaultBgd\n\t\t\t}else{\n\t\t\t\tlet num = 0\n\n\t\t\t\tfor( let char of initials ){\n\t\t\t\t\tnum += char.charCodeAt(0) - 97\n\t\t\t\t}\n\n\t\t\t\tcolor = BgdColors[ num % BgdColors.length ]\n\t\t\t}\n\t\t}\n\t\treturn color\n\t}\n\t\n\tset bgd(color){\n\t\t// if( this.style.getPropertyValue('--bgd') ) return\n\t\tthis.style.setProperty('--bgd', color)\n\t\t// this.shadowRoot.querySelector('rect').setAttribute('fill', color||this.bgd)\n\t}\n\t\n\tget color(){\n\t\treturn this.getAttr('color' ,'#fff')\n\t}\n\t\n\tset color(color){\n\t\tthis.style.setProperty('--color', color)\n\t\t// this.shadowRoot.querySelector('text').setAttribute('fill', color||this.color)\n\t}\n\t\n\tget size(){\n\t\treturn this.getAttr('size', 24)\n\t}\n\t\n\tset size(size){\n\t\tthis.style.width = size+'px'\n\t\tthis.style.height = size+'px'\n\t\t// reload the gravatar to get the correct size\n\t\tthis.gravatar = this.getAttr('gravatar')\n\t}\n\t\n\tset url(url){\n\t\t\n\t\tthis.img.parentElement.classList.remove('imgloaded')\n\t\tthis.img.style.display = ''\n\n\t\t// dont try to load an image we already know fails\n\t\tif( !url || InvalidImages.includes(url) ){\n\t\t\tthis.img.style.display = 'none'\n\t\t\tthis.img.setAttribute('xlink:href', '')\n\t\t\treturn\n\t\t}\n\n\t\tif( url ){\n\t\t\tthis.img.parentElement.classList.add('imgloading')\n\t\t\tthis.img.setAttribute('xlink:href', url)\n\t\t}\n\t\t\t\n\t}\n\t\n\tset gravatar(guid){\n\t\t// wait until el is connected so we can determine the height of the avatar\n\t\tif( !this.isConnected || !guid ) return\n\t\t// FIXME: accessing offsetHeight is a perf hit...as it requires a reflow\n\t\t// https://www.sitepoint.com/10-ways-minimize-reflows-improve-performance/\n\t\tlet size = this.offsetHeight * 2\n\t\tif( size < 80 ) size = 80\n\t\tthis.url = guid ? `//gravatar.com/avatar/${guid}?d=404&s=${size}` : ''\n\t}\n}\n\ncustomElements.define('b-avatar', AvatarElement)\nexport default customElements.get('b-avatar')\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-code', class extends LitElement{\n\n    static get styles(){return css`\n\n        :host {\n            background: var(--theme-bgd-accent, #ccc);\n            border-radius: 3px;\n            color: initial;\n            padding: 0 .3em;\n        }\n\n        code {\n            color: var(--theme-color, inherit);\n        }\n\n        :host([block]) {\n            display: block;\n            font-family: monospace;\n            padding: 1em;\n            overflow-x: auto;\n        }\n\n        :host([block]) code {\n            white-space: pre-wrap;\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.innerText = this.innerText.trim()\n    }\n\n    render(){return html`\n        <code><slot></slot></code>\n    `}\n\n})\n\nexport default customElements.get('b-code')","import { LitElement, html, css } from 'lit-element'\n\n// https://embedresponsively.com/ \ncustomElements.define('b-embed', class Embed extends LitElement {\n\n    static get properties(){return {\n        url: {type: String, reflect: true}\n    }}\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n        }\n\n        main {\n            position: relative;\n            padding-bottom: 56.25%;\n            height: 0;\n            overflow: hidden;\n            max-width: 100%;\n        }\n\n        iframe {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n    `}\n\n    render(){return html`\n        <main>\n            <iframe src='${this.formattedURL}' \n                    frameborder='0' \n                    allowfullscreen>\n            </iframe>\n        </main>\n    `}\n\n    get formattedURL(){\n\n        if( !this.url ) return ''\n\n        let match = Embed.isYoutube(this.url)\n\n        if( match ){\n            return 'https://www.youtube.com/embed/'+match[1]\n        }\n\n        return this.url\n    }\n\n    static isYoutube(url){\n        return url.match(/(?:youtu\\.be|youtube\\.com)\\/(?:watch\\?v\\=)?(?:embed\\/)?(.+)/)\n    }\n\n})\n\nexport default customElements.get('b-embed')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('range-slider', class extends LitElement{\n\n    static get properties(){return {\n        min: {type: Number},\n        max: {type: Number},\n        step: {type: Number},\n        range: {type: Boolean, reflect: true},\n        value: {type: Object},\n        label: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.mouseUp = this.mouseUp.bind(this)\n        this.mouseMove = this.mouseMove.bind(this)\n\n        this.label = 'auto'\n        this.range = false\n        this.min = 0\n        this.max = 100\n        this.step = 1\n\n        this.valMin = 0\n        this.valMax = 0\n        this.value = [0,0]\n    }\n\n    static get styles(){return css`\n        :host {\n            --size: 2px;\n            --thumbSize: 14px;\n            --color: var(--fc-theme);\n            --thumbColor: var(--color);\n            --bgd: rgba(0,0,0,.4);\n            --padding: 10px;\n\n            display: inline-block;\n            vertical-align: middle;\n            position:relative;\n            width: 140px;\n            height: var(--size);\n            margin: 0 auto;\n            padding: var(--padding) 0;\n            cursor: pointer;\n            font-size: .9em;\n            user-select: none;\n        }\n\n        rail, track {\n            display: block;\n            height: var(--size);\n            width: 100%;\n            background: var(--color);\n            border-radius: 6px;\n            position: absolute;\n            top: var(--padding);\n            left: 0;\n        }\n\n        rail {\n            background: var(--bgd);\n        }\n\n        thumb {\n            height: var(--thumbSize);\n            width: var(--thumbSize);\n            transform: translate(-50%, -50%);\n            position: absolute;\n            left: 0;\n            top: calc(var(--padding) + (var(--size) / 2));\n            background: var(--thumbColor);\n            border-radius: var(--thumbSize);\n        }\n\n        thumb:before {\n            content: '';\n            position: absolute;\n            height: 250%;\n            width: 250%;\n            left: -75%;\n            top: -75%;\n            background: var(--thumbColor);\n            opacity: .2;\n            border-radius: 30px;\n            z-index: -1;\n            transform: scale(.3);\n            transform-origin: center center;\n            opacity: 0;\n            transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        thumb:hover:before {\n            transform: scale(.9);\n            opacity: .2;\n        }\n\n        thumb[active]:before {\n            transform: scale(1);\n            opacity: .2;\n        }\n\n        thumb[active] {\n            background: var(--color);\n        }\n\n        thumb > div {\n            position: absolute;\n            font-size: .9em;\n            background: var(--color);\n            color: #fff;\n            height: 2.2em;\n            width: 2.2em;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            bottom: 100%;\n            left: 50%;\n            position: absolute;\n            transform-origin: bottom left;\n            transform: translate(0%,-9px) rotate(-45deg) scale(0);\n            border-radius: 50% 50% 50% 0;\n            transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n            \n        }\n\n        thumb > div > span {\n            transform: rotate(45deg)\n        }\n\n        :host([label=\"show\"]) thumb > div,\n        thumb:hover > div,\n        thumb[active] > div {\n            transform: translate(0%,-9px) rotate(-45deg) scale(1);\n        }\n\n        :host([label=\"none\"]) thumb > div {\n            display: none !important;\n        }\n\n        :host(:not([range])) thumb[min] {\n            display: none;\n        }\n\n        .labels {\n            display: flex;\n            justify-content: space-between;\n            margin-top: .75em;\n        }\n    `}\n\n    _polishVal(val){\n\n        val = parseFloat((Math.round(val / this.step) * this.step).toFixed(2))\n\n        if( val < this.min )\n            val = this.min\n        \n        if( val > this.max )\n            val = this.max\n        \n        return val\n    }\n\n    set value(val){\n\n        let oldVal = this.value\n        let oldMin = this.valMin\n        let oldMax = this.valMax\n        \n        if( typeof val == 'string' )\n            val = val.split(',').map(s=>parseFloat(s))\n\n        // setting both min and max\n        if( Array.isArray(val) ){\n            if( typeof val[0] !== 'number' || typeof val[1] !== 'number' ) return\n\n            val.sort()\n\n            if( this.range )\n                this.valMin = this._polishVal(val[0])\n\n            this.valMax = this._polishVal(val[1])\n            \n            this.requestUpdate('value', oldVal)\n            return\n        }\n\n        if( typeof val !== 'number' ) return\n\n        val = this._polishVal(val)\n        // console.log(val);\n\n        let dmin = Math.abs(this.valMin - val);\n        let dmax = Math.abs(this.valMax - val)\n\n        if( this._active == 'max' && val == this.valMin ){\n            this.valMax = val\n            if( this.range )\n                this._active = 'min'\n        \n        }else if( this._active == 'min' && val == this.valMax ){\n            this.valMin = val\n            this._active = 'max'\n        }\n        else if( !this.range || (dmin == dmax && this.valMax > this.valMin && this._active == 'max') || dmax < dmin || val > this.valMax ){\n            this.valMax = val\n            this._active = 'max'\n        }else{\n            this.valMin = val\n            if( this.range )\n                this._active = 'min'\n        }\n\n        // this.setAttribute('value', this.value.join(','))\n        if( !this._mouseDown )\n            this._active = null\n\n        // nothing changed\n        if( oldMin == this.valMin && oldMax == this.valMax ) return\n    \n        this._didChange = true\n        this.requestUpdate('value', oldVal)\n    }\n\n    get value(){\n        return this.range ? [this.valMin, this.valMax] : this.valMax;\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.addEventListener('mousedown', this.mouseDown, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.removeEventListener('mousedown', this.mouseDown, true)\n    }\n\n    get _len(){ return this.max - this.min }\n    get _minLeft(){ return this.valMin / this._len * 100 }\n    get _maxLeft(){ return this.valMax / this._len * 100 }\n    get _trackLength(){ return this._maxLeft - this._minLeft }\n\n    get atMin(){ return (this.range ? this.valMin : this.valMax ) == this.min }\n    get atMax(){ return this.valMax == this.max }\n\n    reset(){\n        this.valMin = this.min\n        this.valMax = this.min\n        // this.valMax = this.range ? this.max : this.min\n        this.value = [this.valMin, this.valMax]\n        this.update()\n    }\n\n    render(){return html`\n        <rail></rail>\n        <track style=\"left:${this._minLeft}%; width:${this._trackLength}%\"></track>\n        <thumb min ?active=${this._active=='min'} style=\"left:${this._minLeft}%\">\n            <div><span>${this.valMin}</span></div>\n        </thumb>\n        <thumb max ?active=${this._active=='max'} style=\"left:${this._maxLeft}%\">\n            <div><span>${this.valMax}</span></div>\n        </thumb>\n        <div class=\"labels\">\n            <!-- <b-label xs>0 hrs</b-label>\n            <b-label xs>30 hrs</b-label> -->\n        </div>\n    `}\n\n    mouseDown(e){\n        if( e.which !== 1) return // normal click\n        window.addEventListener('mouseup', this.mouseUp, true)\n        window.addEventListener('mousemove', this.mouseMove, true)\n        this._mouseDown = true\n        this.mouseMove(e)\n    }\n\n    mouseUp(){\n        this._active = null\n        this._mouseDown = false\n        window.removeEventListener('mouseup', this.mouseUp, true)\n        window.removeEventListener('mousemove', this.mouseMove, true)\n        this.update()\n\n        if( this._didChange ){\n            this._didChange = false\n            \n            this.dispatchEvent(new CustomEvent('change', {\n                bubbles: true,\n                composed: true,\n                detail: {value: this.value}\n            }))\n        }\n    }\n\n    mouseMove(e){\n        \n        // already at the min/max, stop tracking mouse move until within range again\n        if( this._active == 'min' && e.pageX < this._lastMousePos && this.atMin ) return\n        if( this._active == 'max' && e.pageX > this._lastMousePos && this.atMax ) return\n        \n        this._lastMousePos = e.pageX\n\n        let offset = {x: this.offsetLeft, y: this.offsetTop}\n        let parent = this.offsetParent\n        while(parent){\n            offset.x += parent.offsetLeft\n            offset.y += parent.offsetTop\n            parent = parent.offsetParent\n        }\n\n        // let mouseX = offset.x < e.pageX ? (e.offsetX + e.srcElement.offsetLeft) : e.pagex\n        let mouseX = e.screenX - window.screenX\n        let x = mouseX - offset.x\n        let percent = x / this.clientWidth * 100;\n\n        let val = (percent / 100) * this._len\n\n        this.value = val\n\n        this.dispatchEvent(new CustomEvent('changing', {\n            bubbles: true,\n            composed: true,\n            detail: {value: val}\n        }))\n    }\n\n})\n\nexport default customElements.get('range-slider')","// TODO: support prefixing?\n\nconst store = (store, key, val)=>{\n\t\n\tif( val === undefined ){\n\t\tlet data = store.getItem(key)\n\t\t\n\t\tif( data === null || data === undefined )\n\t\t\treturn undefined\n\t\t\n\t\tvar val = ''\n\t\ttry { val = JSON.parse(data) }\n\t\tcatch(e) { val = data }\n\t\t\n\t\treturn val\n\t}\n\t\t\n\tif( val === null ){\n\t\treturn store.removeItem(key)\n\t}\n\t\t\n\tval = JSON.stringify(val)\n\t\n\treturn store.setItem(key, val)\n}\n\nexport const localStore = (key, val)=>{\n\treturn store(window.localStorage, key, val)\n}\n\nexport const sessionStore = (key, val)=>{\n\treturn store(window.sessionStorage, key, val)\n}\n\nexport default localStore\n\nexport function forceStorageEventsLocally(){\n\n\tlet setItem = window.localStorage.setItem\n\tlet removeItem = window.localStorage.removeItem\n\n\twindow.localStorage.setItem = function(key, val){\n\t\tsetItem.call(window.localStorage, key, val)\n\t\twindow.dispatchEvent(new CustomEvent('storage', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tkey: key,\n\t\t\t\toldVal: null,\n\t\t\t\tnewVal: val\n\t\t\t}\n\t\t}))\n\t}\n\n\twindow.localStorage.removeItem = function(key){\n\t\tremoveItem.call(window.localStorage, key)\n\t\twindow.dispatchEvent(new CustomEvent('storage', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tkey: key,\n\t\t\t\toldVal: null,\n\t\t\t\tnewVal: null\n\t\t\t}\n\t\t}))\n\t}\n\n}","import { LitElement, html, css } from 'lit-element'\n// import Menu from '../presenters/menu'\nimport './icon'\nimport '../presenters/form-control/controls/range-slider'\nimport moment from 'moment'\nimport store from '../util/store'\n\n// TODO: hook up settings menu\n\nconst formatTime = sec=>{\n    var dur = moment.duration(sec * 1000)\n    var hours = dur.hours()\n    var min = hours > 0 ? String(dur.minutes()).padStart(2,'0') : dur.minutes()\n    return (hours?hours+':':'') + min + ':' + String(dur.seconds()).padStart(2,'0')\n}\n\nlet ACTIVE_PLAYER = null\n\ncustomElements.define('b-audio', class extends LitElement {\n\n    static get properties(){return {\n        src: {type: String, reflect: true},\n        autoplay: {type: Boolean, reflect: true},\n        playing: {type: Boolean, reflect: true},\n        // currentTime: {type: Number},\n    }}\n\n    constructor(src='', {\n        autoplay = false\n    }={}){\n        super()\n        this.src = src\n        this.autoplay = autoplay\n        this.playing = false\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:relative;\n            /* padding: 1em; */\n            border: solid 1px rgba(0,0,0,.1);\n            background: #fff;\n            border-radius: var(--radius);\n            --radius: 4px;\n        }\n\n        main {\n            display: grid;\n            grid-template-columns: 2em 45px 1fr 45px;\n            align-items: center;\n            justify-content: space-between;\n            gap: .25em;\n            padding-right: .5em;\n        }\n\n        .time {\n            font-weight: bold;\n        }\n\n        .time.elapsed {\n            text-align: right;\n        }\n\n        .btn-play {\n            cursor: pointer;\n            height: 1.5em;\n            width: 1.5em;\n            margin: .25em;\n            padding: .25em;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            flex-shrink: 0;\n            border-radius: 20px;\n            /* margin-right: .5em; */\n            background: #eee;\n            /* color: #fff; */\n            /* border: solid 2px; */\n            transition: color .15s ease-in-out, border-color .15s ease-in-out;\n        }\n\n        :host([status=\"error\"]) {\n            background: var(--red-50) !important;\n        }\n\n        :host([status=\"error\"]) .btn-play {\n            color: var(--red);\n            background: var(--red-100);\n        }\n\n\n        .btn-play:hover {\n            color: var(--blue);\n        }\n\n        input[type=range] {\n            -webkit-appearance: none;\n            min-width: 100px;\n            height: 10px;\n            border-radius: 5px;\n            background: var(--black);\n            outline: none;\n            padding: 0;\n            margin: 0 .5em;\n            border: none;\n            box-shadow: none;\n        }\n\n        input[type=range]::-webkit-slider-runnable-track {\n            border: none;\n            height: 100%;\n        }\n\n        input[type=range]::-webkit-slider-thumb {\n            display: none;\n            -webkit-appearance: none;\n            appearance: none;\n            width: 18px;\n            height: 18px;\n            border-radius: 50%;\n            border: solid 2px #fff;\n            background: var(--black);\n            cursor: pointer;\n            box-shadow: none;\n            margin-top: -4px;\n        }\n\n        input[type=range]::-webkit-slider-thumb:hover {\n            background: var(--blue);\n        }\n\n        input[type=range]:active::-webkit-slider-thumb {\n            background: var(--blue);\n        }\n\n        input[type=range]:hover::-webkit-slider-thumb {\n            display: block;\n        }\n\n        .settings {\n            transform: rotate(90deg);\n        }\n    `}\n\n    render(){ return html`\n        <main @mouseenter=${this.onHover} @mouseleave=${this.onHoverLeave}>\n            <audio\n                @loadedmetadata=${this.audioLoaded}\n                @timeupdate=${this.audioTimeChange}\n                @ended=${this.pause}\n                @error=${this.audioLoadError}\n            ></audio>\n            <span class=\"btn-play icon-play\" @click=${this.playPause}>\n                <b-icon name=${this.playing?'pause':'play'}></b-icon>\n            </span>\n            <span class=\"elapsed time\">00:00</span>\n            <input type=\"range\" value=\"0\" disabled\n                @input=${this.progressSliderChanging}\n                @change=${this.progressSliderChangingDone}\n                class=\"progress\"/>\n            <span class=\"remaining time\">00:00</span>\n            <!-- <b-btn clear icon=\"dot-3\" class=\"settings\" @click=${this.viewSettings}></b-btn> -->\n        </main>\n    `}\n\n    // events: {\n    //     'mouseenter': 'onHover',\n    //     'mouseleave': 'onHoverLeave',\n    //     'mouseenter .progress': 'progressHover',\n    //     'mouseleave .progress': 'progressHoverLeave',\n    //     'input .progress': 'progressSliderChanging',\n    //     'change .progress': 'progressSliderChangingDone',\n    //     'click .btn-settings': 'viewSettings',\n    //     'click .btn-play': 'playPause'\n    // },\n\n    firstUpdated(){\n\n        this.audio = this.shadowRoot.querySelector('audio')\n        this.progress = this.shadowRoot.querySelector('.progress')\n        this.elapsed = this.shadowRoot.querySelector('.elapsed')\n        this.remaining = this.shadowRoot.querySelector('.remaining')\n\n        this.loadAudio(this.src)\n    }\n    \n    get status(){ return this.getAttribute('status') }\n    set status(val){\n        this.setAttribute('status', val)\n    }\n\n    playPause(){\n        this.audio.paused ? this.play() : this.pause()\n    }\n\n    play(src){\n\n        // if another audio player is playing, pause it\n        if( ACTIVE_PLAYER && ACTIVE_PLAYER != this )\n            ACTIVE_PLAYER.pause()\n\n        // if audio src has not loaded yet or we have been given a new src, load it now\n        if( !this._loaded || src ){\n            this.loadAudio(src || this.src )\n            return\n        }\n\n        if( this.status == 'error' )\n            return;\n\n        ACTIVE_PLAYER = this;\n        this.audio.play()\n        this.playing = true\n    }\n\n    pause(){\n        ACTIVE_PLAYER = null;\n        this.clip = null; // clear any clips\n        this.audio.pause()\n        this.playing = false\n    }\n    \n    skipBack(val){ this.skip(-val||-10) }\n    skipForward(val){ this.skip(val||10) }\n    skip(amt){\n        var time = this.audio.currentTime + amt;\n        if( time < 0 ) time = 0;\n        if( time > this.audio.duration ) time = this.audio.duration;\n        this.audio.currentTime = time;\n    }\n    \n    loadAudio(src){\n        this.status = 'loading'\n        this.audio.src = src\n    }\n\n// Events ==================================================================\n\n    audioLoadError(){\n        this._loaded = true;\n        this.status = 'error'\n        this.progress.disabled = true\n    }\n\n    audioLoaded(){\n        this.status = 'loaded'\n        this._loaded = true;\n        this.progress.disabled = false\n        this.progress.max = this.audio.duration\n        this.setProgress()\n\n        // clips were set before fully loaded, so set them again if needed\n        if( this.clip && this.clip.length == 2 && isNaN(this.clip[1]) )\n            this.playLastClip()\n        else if( this.clip && this.clip.length > 2 && isNaN(this.clip[2]) )\n            this.playEndClips()\n        else if( this.autoplay )\n            this.play()\n    }\n\n/*\n    Playing <audio> time has changed\n*/\n    audioTimeChange(){\n        \n        // update the progress slider unless currently seeking\n        if( !this.seeking )\n            this.progress.value = this.audio.currentTime\n            \n        this.setProgress();\n\n        // reached end of clip, stop\n        if( this.clip && this.audio.currentTime >= this.clip[1] ){\n\n            // more than one clip is given, remove the just finished clip and begin playing the next one\n            if( this.clip.length > 2 ){\n                this.audio.pause();\n                setTimeout(function(){ // play next clip after 700ms pause\n                    this.playClip(this.clip.splice(2))\n                }.bind(this), 700)\n            }else{\n                this.pause();\n            }\n        }\n    }\n\n/*\n    Set Progress: uses current poisition to adjust background of proress slider on and updates elapsed/remaining times\n*/\n    setProgress(){\n\n        var percent = this.progress.value / this.audio.duration * 100;\n        var time = this.progress.value\n        var color = '#2c3033' // this.classList.contains('progress-hover') ? '#3498db' : '#2c3033';\n        \n        this.progress.style.background = \"linear-gradient(to right, \"+color+\" \"+percent+\"%, #bbb \"+percent+\"%)\"\n        this.elapsed.innerHTML = formatTime(time)\n        this.remaining.innerHTML = this.audio.duration == Infinity ? '' : formatTime(this.audio.duration - time)\n    }\n\n    progressSliderChanging(){\n        this.seeking = true\n        this.wasPlaying = this.wasPlaying || !this.audio.paused\n        this.audio.pause();\n        this.setProgress()\n    }\n\n    progressSliderChangingDone(){\n        this.audio.currentTime = this.progress.value\n        this.wasPlaying && this.play()\n        this.wasPlaying = null;\n        this.seeking = false;\n        this.progress.blur() // so slider doesn't hijack the keyboard events\n    }\n\n    progressHover(){\n        this.classList.add('progress-hover')\n        this.setProgress();\n    }\n\n    progressHoverLeave(){\n        this.classList.remove('progress-hover')\n        this.setProgress();\n    }\n    \n// Clips ====================================================================\n\n    setClipLength(item){\n        store('audioplayer:clip-length', item.val)\n    }\n\n    clipLength(){\n        return store('audioplayer:clip-length') || 15\n    }\n\n    playFirstClip(){\n        if( this.audio.duration < this.clipLength() ) return; // TODO: improve\n        this.playClip([0, this.clipLength()])\n    }\n\n    playLastClip(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playEndClips(){\n        if( this.audio.duration < this.clipLength() ) return;\n        this.playClip([0, this.clipLength(), this.audio.duration - this.clipLength(), this.audio.duration])\n    }\n\n    playClip(clip){\n        this.clip = clip\n        if( !isNaN(this.clip[0]) )\n            this.audio.currentTime = this.clip[0]\n        this.play()\n    }\n    \n// Keyboard Shortcuts =======================================================\n\n    onKeyPress(e){\n\n        if( this.status == 'error' )\n            return;\n\n        e.preventDefault()\n        e.stopPropagation()\n\n        switch(e.which){\n            case 32: this.playPause(); break; // space\n            case 27: this.pause(); break; // esc\n            case 70: this.playFirstClip(); break; // f\n            case 76: this.playLastClip(); break; // l\n            case 69: this.playEndClips(); break; // e\n            case 37: // left\n                if( e.shiftKey )\n                    this.audio.currentTime = 0;\n                else\n                    this.skipBack(_.metaKey()?30:10)\n                break;\n            case 39: // right\n                if( e.shiftKey )\n                    this.audio.currentTime = this.audio.duration\n                else\n                    this.skipForward(_.metaKey()?30:10)\n                break;\n        }\n    }\n\n    onHover(){\n        this._onKeyPress = this._onKeyPress || this.onKeyPress.bind(this)\n        window.addEventListener('keydown', this._onKeyPress)\n    }\n\n    onHoverLeave(){\n        window.removeEventListener('keydown', this._onKeyPress)\n    }\n\n})\n\nexport default customElements.get('b-audio')","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, NodePart, Part} from '../lit-html.js';\n\ninterface PreviousValue {\n  readonly value: unknown;\n  readonly fragment: DocumentFragment;\n}\n\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap<NodePart, PreviousValue>();\n\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value: unknown) => (part: Part): void => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) &&\n      value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value as string;  // innerHTML casts to string internally\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {value, fragment});\n});\n","export default typeof window !== 'undefined' && typeof document !== 'undefined';\n","import isBrowser from './isBrowser';\n\nconst longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nlet timeoutDuration = 0;\nfor (let i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nexport function microtaskDebounce(fn) {\n  let called = false\n  return () => {\n    if (called) {\n      return\n    }\n    called = true\n    window.Promise.resolve().then(() => {\n      called = false\n      fn()\n    })\n  }\n}\n\nexport function taskDebounce(fn) {\n  let scheduled = false;\n  return () => {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nconst supportsMicroTasks = isBrowser && window.Promise\n\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nexport default (supportsMicroTasks\n  ? microtaskDebounce\n  : taskDebounce);\n","/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nexport default function isFunction(functionToCheck) {\n  const getType = {};\n  return (\n    functionToCheck &&\n    getType.toString.call(functionToCheck) === '[object Function]'\n  );\n}\n","/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nexport default function getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  const window = element.ownerDocument.defaultView;\n  const css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n","/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nexport default function getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nexport default function getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n","import isBrowser from './isBrowser';\n\nconst isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nconst isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nexport default function isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nexport default function getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  const noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  let offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  const nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\n  ) {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n","import getOffsetParent from './getOffsetParent';\n\nexport default function isOffsetContainer(element) {\n  const { nodeName } = element;\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return (\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\n  );\n}\n","/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nexport default function getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n","import isOffsetContainer from './isOffsetContainer';\nimport getRoot from './getRoot';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nexport default function findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const { commonAncestorContainer } = range;\n\n  // Both nodes are inside #document\n  if (\n    (element1 !== commonAncestorContainer &&\n      element2 !== commonAncestorContainer) ||\n    start.contains(end)\n  ) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n","/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nexport default function getScroll(element, side = 'top') {\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  const nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    const html = element.ownerDocument.documentElement;\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n","import getScroll from './getScroll';\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nexport default function includeScroll(rect, element, subtract = false) {\n  const scrollTop = getScroll(element, 'top');\n  const scrollLeft = getScroll(element, 'left');\n  const modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n","/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nexport default function getBordersSize(styles, axis) {\n  const sideA = axis === 'x' ? 'Left' : 'Top';\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return (\n    parseFloat(styles[`border${sideA}Width`], 10) +\n    parseFloat(styles[`border${sideB}Width`], 10)\n  );\n}\n","import isIE from './isIE';\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(\n    body[`offset${axis}`],\n    body[`scroll${axis}`],\n    html[`client${axis}`],\n    html[`offset${axis}`],\n    html[`scroll${axis}`],\n    isIE(10)\n      ? (parseInt(html[`offset${axis}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Top' : 'Left'}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Bottom' : 'Right'}`]))\n    : 0 \n  );\n}\n\nexport default function getWindowSizes(document) {\n  const body = document.body;\n  const html = document.documentElement;\n  const computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle),\n  };\n}\n","/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nexport default function getClientRect(offsets) {\n  return {\n    ...offsets,\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height,\n  };\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getBordersSize from './getBordersSize';\nimport getWindowSizes from './getWindowSizes';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\nimport isIE from './isIE';\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nexport default function getBoundingClientRect(element) {\n  let rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      const scrollTop = getScroll(element, 'top');\n      const scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    }\n    else {\n      rect = element.getBoundingClientRect();\n    }\n  }\n  catch(e){}\n\n  const result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top,\n  };\n\n  // subtract scrollbar size from sizes\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  const width =\n    sizes.width || element.clientWidth || result.right - result.left;\n  const height =\n    sizes.height || element.clientHeight || result.bottom - result.top;\n\n  let horizScrollbar = element.offsetWidth - width;\n  let vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    const styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport includeScroll from './includeScroll';\nimport getScrollParent from './getScrollParent';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport runIsIE from './isIE';\nimport getClientRect from './getClientRect';\n\nexport default function getOffsetRectRelativeToArbitraryNode(children, parent, fixedPosition = false) {\n  const isIE10 = runIsIE(10);\n  const isHTML = parent.nodeName === 'HTML';\n  const childrenRect = getBoundingClientRect(children);\n  const parentRect = getBoundingClientRect(parent);\n  const scrollParent = getScrollParent(children);\n\n  const styles = getStyleComputedProperty(parent);\n  const borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if(fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  let offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height,\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    const marginTop = parseFloat(styles.marginTop, 10);\n    const marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (\n    isIE10 && !fixedPosition\n      ? parent.contains(scrollParent)\n      : parent === scrollParent && scrollParent.nodeName !== 'BODY'\n  ) {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n","import getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\n\nexport default function getViewportOffsetRectRelativeToArtbitraryNode(element, excludeScroll = false) {\n  const html = element.ownerDocument.documentElement;\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  const offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width,\n    height,\n  };\n\n  return getClientRect(offset);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nexport default function isFixed(element) {\n  const nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  const parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nexport default function getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n   if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  let el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n\n}\n","import getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getViewportOffsetRectRelativeToArtbitraryNode from './getViewportOffsetRectRelativeToArtbitraryNode';\nimport getWindowSizes from './getWindowSizes';\nimport isFixed from './isFixed';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nexport default function getBoundaries(\n  popper,\n  reference,\n  padding,\n  boundariesElement,\n  fixedPosition = false\n) {\n  // NOTE: 1 DOM access here\n\n  let boundaries = { top: 0, left: 0 };\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport' ) {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  }\n\n  else {\n    // Handle other cases based on DOM element used as boundaries\n    let boundariesNode;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    const offsets = getOffsetRectRelativeToArbitraryNode(\n      boundariesNode,\n      offsetParent,\n      fixedPosition\n    );\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      const { height, width } = getWindowSizes(popper.ownerDocument);\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  const isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0; \n  boundaries.top += isPaddingNumber ? padding : padding.top || 0; \n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0; \n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0; \n\n  return boundaries;\n}\n","import getBoundaries from '../utils/getBoundaries';\n\nfunction getArea({ width, height }) {\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeAutoPlacement(\n  placement,\n  refRect,\n  popper,\n  reference,\n  boundariesElement,\n  padding = 0\n) {\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  const boundaries = getBoundaries(\n    popper,\n    reference,\n    padding,\n    boundariesElement\n  );\n\n  const rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top,\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height,\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom,\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height,\n    },\n  };\n\n  const sortedAreas = Object.keys(rects)\n    .map(key => ({\n      key,\n      ...rects[key],\n      area: getArea(rects[key]),\n    }))\n    .sort((a, b) => b.area - a.area);\n\n  const filteredAreas = sortedAreas.filter(\n    ({ width, height }) =>\n      width >= popper.clientWidth && height >= popper.clientHeight\n  );\n\n  const computedPlacement = filteredAreas.length > 0\n    ? filteredAreas[0].key\n    : sortedAreas[0].key;\n\n  const variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? `-${variation}` : '');\n}\n","import findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nexport default function getReferenceOffsets(state, popper, reference, fixedPosition = null) {\n  const commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n","/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nexport default function getOuterSizes(element) {\n  const window = element.ownerDocument.defaultView;\n  const styles = window.getComputedStyle(element);\n  const x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  const y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  const result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x,\n  };\n  return result;\n}\n","/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nexport default function getOppositePlacement(placement) {\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched]);\n}\n","import getOuterSizes from './getOuterSizes';\nimport getOppositePlacement from './getOppositePlacement';\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nexport default function getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  const popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  const popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height,\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  const mainSide = isHoriz ? 'top' : 'left';\n  const secondarySide = isHoriz ? 'left' : 'top';\n  const measurement = isHoriz ? 'height' : 'width';\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] =\n    referenceOffsets[mainSide] +\n    referenceOffsets[measurement] / 2 -\n    popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] =\n      referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] =\n      referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n","/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n","import find from './find';\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(cur => cur[prop] === value);\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  const match = find(arr, obj => obj[prop] === value);\n  return arr.indexOf(match);\n}\n","import isFunction from './isFunction';\nimport findIndex from './findIndex';\nimport getClientRect from '../utils/getClientRect';\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nexport default function runModifiers(modifiers, data, ends) {\n  const modifiersToRun = ends === undefined\n    ? modifiers\n    : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(modifier => {\n    if (modifier['function']) { // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    const fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n","import computeAutoPlacement from '../utils/computeAutoPlacement';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nexport default function update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  let data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {},\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(\n    this.state,\n    this.popper,\n    this.reference,\n    this.options.positionFixed\n  );\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(\n    this.options.placement,\n    data.offsets.reference,\n    this.popper,\n    this.reference,\n    this.options.modifiers.flip.boundariesElement,\n    this.options.modifiers.flip.padding\n  );\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(\n    this.popper,\n    data.offsets.reference,\n    data.placement\n  );\n\n  data.offsets.popper.position = this.options.positionFixed\n    ? 'fixed'\n    : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n","/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nexport default function isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(\n    ({ name, enabled }) => enabled && name === modifierName\n  );\n}\n","/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nexport default function getSupportedPropertyName(property) {\n  const prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  const upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefix = prefixes[i];\n    const toCheck = prefix ? `${prefix}${upperProp}` : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n","import isModifierEnabled from '../utils/isModifierEnabled';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nexport default function destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n","/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nexport default function getWindow(element) {\n  const ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","import getScrollParent from './getScrollParent';\nimport getWindow from './getWindow';\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(\n      getScrollParent(target.parentNode),\n      event,\n      callback,\n      scrollParents\n    );\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function setupEventListeners(\n  reference,\n  options,\n  state,\n  updateBound\n) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  const scrollElement = getScrollParent(reference);\n  attachToScrollParents(\n    scrollElement,\n    'scroll',\n    state.updateBound,\n    state.scrollParents\n  );\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n","import setupEventListeners from '../utils/setupEventListeners';\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nexport default function enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(\n      this.reference,\n      this.options,\n      this.state,\n      this.scheduleUpdate\n    );\n  }\n}\n","import getWindow from './getWindow';\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(target => {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n","import removeEventListeners from '../utils/removeEventListeners';\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nexport default function disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n","/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nexport default function isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n","import isNumeric from './isNumeric';\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setStyles(element, styles) {\n  Object.keys(styles).forEach(prop => {\n    let unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (\n      ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !==\n        -1 &&\n      isNumeric(styles[prop])\n    ) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n","/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function(prop) {\n    const value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n","import setStyles from '../utils/setStyles';\nimport setAttributes from '../utils/setAttributes';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport computeAutoPlacement from '../utils/computeAutoPlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nexport default function applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nexport function applyStyleOnLoad(\n  reference,\n  popper,\n  options,\n  modifierOptions,\n  state\n) {\n  // compute reference element offsets\n  const referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  const placement = computeAutoPlacement(\n    options.placement,\n    referenceOffsets,\n    popper,\n    reference,\n    options.modifiers.flip.boundariesElement,\n    options.modifiers.flip.padding\n  );\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n","/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nexport default function getRoundedOffsets(data, shouldRound) {\n  const { popper, reference } = data.offsets;\n  const { round, floor } = Math;\n  const noRound = v => v;\n  \n  const referenceWidth = round(reference.width);\n  const popperWidth = round(popper.width);\n  \n  const isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  const isVariation = data.placement.indexOf('-') !== -1;\n  const sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  const bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  const horizontalToInteger = !shouldRound\n    ? noRound\n    : isVertical || isVariation || sameWidthParity\n    ? round\n    : floor;\n  const verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(\n      bothOddWidth && !isVariation && shouldRound\n        ? popper.left - 1\n        : popper.left\n    ),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right),\n  };\n}\n","import getSupportedPropertyName from '../utils/getSupportedPropertyName';\nimport find from '../utils/find';\nimport getOffsetParent from '../utils/getOffsetParent';\nimport getBoundingClientRect from '../utils/getBoundingClientRect';\nimport getRoundedOffsets from '../utils/getRoundedOffsets';\nimport isBrowser from '../utils/isBrowser';\n\nconst isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeStyle(data, options) {\n  const { x, y } = options;\n  const { popper } = data.offsets;\n\n  // Remove this legacy support in Popper.js v2\n  const legacyGpuAccelerationOption = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'applyStyle'\n  ).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn(\n      'WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'\n    );\n  }\n  const gpuAcceleration =\n    legacyGpuAccelerationOption !== undefined\n      ? legacyGpuAccelerationOption\n      : options.gpuAcceleration;\n\n  const offsetParent = getOffsetParent(data.instance.popper);\n  const offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  const styles = {\n    position: popper.position,\n  };\n\n  const offsets = getRoundedOffsets(\n    data,\n    window.devicePixelRatio < 2 || !isFirefox\n  );\n\n  const sideA = x === 'bottom' ? 'top' : 'bottom';\n  const sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  const prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  let left, top;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = `translate3d(${left}px, ${top}px, 0)`;\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    const invertTop = sideA === 'bottom' ? -1 : 1;\n    const invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = `${sideA}, ${sideB}`;\n  }\n\n  // Attributes\n  const attributes = {\n    'x-placement': data.placement,\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = { ...attributes, ...data.attributes };\n  data.styles = { ...styles, ...data.styles };\n  data.arrowStyles = { ...data.offsets.arrow, ...data.arrowStyles };\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nexport default function isModifierRequired(\n  modifiers,\n  requestingName,\n  requestedName\n) {\n  const requesting = find(modifiers, ({ name }) => name === requestingName);\n\n  const isRequired =\n    !!requesting &&\n    modifiers.some(modifier => {\n      return (\n        modifier.name === requestedName &&\n        modifier.enabled &&\n        modifier.order < requesting.order\n      );\n    });\n\n  if (!isRequired) {\n    const requesting = `\\`${requestingName}\\``;\n    const requested = `\\`${requestedName}\\``;\n    console.warn(\n      `${requested} modifier is required by ${requesting} modifier in order to work, be sure to include it before ${requesting}!`\n    );\n  }\n  return isRequired;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOuterSizes from '../utils/getOuterSizes';\nimport isModifierRequired from '../utils/isModifierRequired';\nimport getStyleComputedProperty from '../utils/getStyleComputedProperty';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  let arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn(\n        'WARNING: `arrow.element` must be child of its popper element!'\n      );\n      return data;\n    }\n  }\n\n  const placement = data.placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  const len = isVertical ? 'height' : 'width';\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\n  const side = sideCapitalized.toLowerCase();\n  const altSide = isVertical ? 'left' : 'top';\n  const opSide = isVertical ? 'bottom' : 'right';\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -=\n      popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] +=\n      reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  const center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  const css = getStyleComputedProperty(data.instance.popper);\n  const popperMarginSide = parseFloat(css[`margin${sideCapitalized}`], 10);\n  const popperBorderSide = parseFloat(css[`border${sideCapitalized}Width`], 10);\n  let sideValue =\n    center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {\n    [side]: Math.round(sideValue),\n    [altSide]: '', // make sure to unset any eventual altSide value from the DOM node\n  };\n\n  return data;\n}\n","/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nexport default function getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n","/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nexport default [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n","import placements from '../methods/placements';\n\n// Get rid of `auto` `auto-start` and `auto-end`\nconst validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nexport default function clockwise(placement, counter = false) {\n  const index = validPlacements.indexOf(placement);\n  const arr = validPlacements\n    .slice(index + 1)\n    .concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n","import getOppositePlacement from '../utils/getOppositePlacement';\nimport getOppositeVariation from '../utils/getOppositeVariation';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\nimport getBoundaries from '../utils/getBoundaries';\nimport isModifierEnabled from '../utils/isModifierEnabled';\nimport clockwise from '../utils/clockwise';\n\nconst BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise',\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    options.boundariesElement,\n    data.positionFixed\n  );\n\n  let placement = data.placement.split('-')[0];\n  let placementOpposite = getOppositePlacement(placement);\n  let variation = data.placement.split('-')[1] || '';\n\n  let flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach((step, index) => {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    const popperOffsets = data.offsets.popper;\n    const refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    const floor = Math.floor;\n    const overlapsRef =\n      (placement === 'left' &&\n        floor(popperOffsets.right) > floor(refOffsets.left)) ||\n      (placement === 'right' &&\n        floor(popperOffsets.left) < floor(refOffsets.right)) ||\n      (placement === 'top' &&\n        floor(popperOffsets.bottom) > floor(refOffsets.top)) ||\n      (placement === 'bottom' &&\n        floor(popperOffsets.top) < floor(refOffsets.bottom));\n\n    const overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    const overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    const overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    const overflowsBottom =\n      floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    const overflowsBoundaries =\n      (placement === 'left' && overflowsLeft) ||\n      (placement === 'right' && overflowsRight) ||\n      (placement === 'top' && overflowsTop) ||\n      (placement === 'bottom' && overflowsBottom);\n\n    // flip the variation if required\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    const flippedVariationByRef =\n      !!options.flipVariations &&\n      ((isVertical && variation === 'start' && overflowsLeft) ||\n        (isVertical && variation === 'end' && overflowsRight) ||\n        (!isVertical && variation === 'start' && overflowsTop) ||\n        (!isVertical && variation === 'end' && overflowsBottom));\n\n    // flips variation if popper content overflows boundaries\n    const flippedVariationByContent =\n      !!options.flipVariationsByContent &&\n      ((isVertical && variation === 'start' && overflowsRight) ||\n        (isVertical && variation === 'end' && overflowsLeft) ||\n        (!isVertical && variation === 'start' && overflowsBottom) ||\n        (!isVertical && variation === 'end' && overflowsTop));\n\n    const flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = {\n        ...data.offsets.popper,\n        ...getPopperOffsets(\n          data.instance.popper,\n          data.offsets.reference,\n          data.placement\n        ),\n      };\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function keepTogether(data) {\n  const { popper, reference } = data.offsets;\n  const placement = data.placement.split('-')[0];\n  const floor = Math.floor;\n  const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  const side = isVertical ? 'right' : 'bottom';\n  const opSide = isVertical ? 'left' : 'top';\n  const measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] =\n      floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n","import isNumeric from '../utils/isNumeric';\nimport getClientRect from '../utils/getClientRect';\nimport find from '../utils/find';\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nexport function toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  const split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  const value = +split[1];\n  const unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    let element;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    const rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    let size;\n    if (unit === 'vh') {\n      size = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      );\n    } else {\n      size = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      );\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nexport function parseOffset(\n  offset,\n  popperOffsets,\n  referenceOffsets,\n  basePlacement\n) {\n  const offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  const useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  const fragments = offset.split(/(\\+|\\-)/).map(frag => frag.trim());\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  const divider = fragments.indexOf(\n    find(fragments, frag => frag.search(/,|\\s/) !== -1)\n  );\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn(\n      'Offsets separated by white space(s) are deprecated, use a comma (,) instead.'\n    );\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  const splitRegex = /\\s*,\\s*|\\s+/;\n  let ops = divider !== -1\n    ? [\n        fragments\n          .slice(0, divider)\n          .concat([fragments[divider].split(splitRegex)[0]]),\n        [fragments[divider].split(splitRegex)[1]].concat(\n          fragments.slice(divider + 1)\n        ),\n      ]\n    : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map((op, index) => {\n    // Most of the units rely on the orientation of the popper\n    const measurement = (index === 1 ? !useHeight : useHeight)\n      ? 'height'\n      : 'width';\n    let mergeWithPrevious = false;\n    return (\n      op\n        // This aggregates any `+` or `-` sign that aren't considered operators\n        // e.g.: 10 + +5 => [10, +, +5]\n        .reduce((a, b) => {\n          if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n            a[a.length - 1] = b;\n            mergeWithPrevious = true;\n            return a;\n          } else if (mergeWithPrevious) {\n            a[a.length - 1] += b;\n            mergeWithPrevious = false;\n            return a;\n          } else {\n            return a.concat(b);\n          }\n        }, [])\n        // Here we convert the string values into number values (in px)\n        .map(str => toValue(str, measurement, popperOffsets, referenceOffsets))\n    );\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach((op, index) => {\n    op.forEach((frag, index2) => {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nexport default function offset(data, { offset }) {\n  const { placement, offsets: { popper, reference } } = data;\n  const basePlacement = placement.split('-')[0];\n\n  let offsets;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n","import getOffsetParent from '../utils/getOffsetParent';\nimport getBoundaries from '../utils/getBoundaries';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function preventOverflow(data, options) {\n  let boundariesElement =\n    options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  const transformProp = getSupportedPropertyName('transform');\n  const popperStyles = data.instance.popper.style; // assignment to help minification\n  const { top, left, [transformProp]: transform } = popperStyles;\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    boundariesElement,\n    data.positionFixed\n  );\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  const order = options.priority;\n  let popper = data.offsets.popper;\n\n  const check = {\n    primary(placement) {\n      let value = popper[placement];\n      if (\n        popper[placement] < boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return { [placement]: value };\n    },\n    secondary(placement) {\n      const mainSide = placement === 'right' ? 'left' : 'top';\n      let value = popper[mainSide];\n      if (\n        popper[placement] > boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.min(\n          popper[mainSide],\n          boundaries[placement] -\n            (placement === 'right' ? popper.width : popper.height)\n        );\n      }\n      return { [mainSide]: value };\n    },\n  };\n\n  order.forEach(placement => {\n    const side =\n      ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = { ...popper, ...check[side](placement) };\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function shift(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    const { reference, popper } = data.offsets;\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    const side = isVertical ? 'left' : 'top';\n    const measurement = isVertical ? 'width' : 'height';\n\n    const shiftOffsets = {\n      start: { [side]: reference[side] },\n      end: {\n        [side]: reference[side] + reference[measurement] - popper[measurement],\n      },\n    };\n\n    data.offsets.popper = { ...popper, ...shiftOffsets[shiftvariation] };\n  }\n\n  return data;\n}\n","import isModifierRequired from '../utils/isModifierRequired';\nimport find from '../utils/find';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  const refRect = data.offsets.reference;\n  const bound = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'preventOverflow'\n  ).boundaries;\n\n  if (\n    refRect.bottom < bound.top ||\n    refRect.left > bound.right ||\n    refRect.top > bound.bottom ||\n    refRect.right < bound.left\n  ) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOppositePlacement from '../utils/getOppositePlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function inner(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  const subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] =\n    reference[basePlacement] -\n    (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n","import applyStyle, { applyStyleOnLoad } from './applyStyle';\nimport computeStyle from './computeStyle';\nimport arrow from './arrow';\nimport flip from './flip';\nimport keepTogether from './keepTogether';\nimport offset from './offset';\nimport preventOverflow from './preventOverflow';\nimport shift from './shift';\nimport hide from './hide';\nimport inner from './inner';\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nexport default {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift,\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0,\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent',\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether,\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]',\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false,\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner,\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide,\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right',\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined,\n  },\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n","import modifiers from '../modifiers/index';\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nexport default {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: () => {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: () => {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers,\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n","// Utils\nimport debounce from './utils/debounce';\nimport isFunction from './utils/isFunction';\n\n// Methods\nimport update from './methods/update';\nimport destroy from './methods/destroy';\nimport enableEventListeners from './methods/enableEventListeners';\nimport disableEventListeners from './methods/disableEventListeners';\nimport Defaults from './methods/defaults';\nimport placements from './methods/placements';\n\nexport default class Popper {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  constructor(reference, popper, options = {}) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = { ...Popper.Defaults, ...options };\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: [],\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys({\n      ...Popper.Defaults.modifiers,\n      ...options.modifiers,\n    }).forEach(name => {\n      this.options.modifiers[name] = {\n        // If it's a built-in modifier, use it as base\n        ...(Popper.Defaults.modifiers[name] || {}),\n        // If there are custom options, override and merge with default ones\n        ...(options.modifiers ? options.modifiers[name] : {}),\n      };\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers)\n      .map(name => ({\n        name,\n        ...this.options.modifiers[name],\n      }))\n      // sort the modifiers by order\n      .sort((a, b) => a.order - b.order);\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(modifierOptions => {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(\n          this.reference,\n          this.popper,\n          this.options,\n          modifierOptions,\n          this.state\n        );\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    const eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n  update() {\n    return update.call(this);\n  }\n  destroy() {\n    return destroy.call(this);\n  }\n  enableEventListeners() {\n    return enableEventListeners.call(this);\n  }\n  disableEventListeners() {\n    return disableEventListeners.call(this);\n  }\n\n  /**\n   * Schedules an update. It will run on the next UI update available.\n   * @method scheduleUpdate\n   * @memberof Popper\n   */\n  scheduleUpdate = () => requestAnimationFrame(this.update);\n\n  /**\n   * Collection of utilities useful when writing custom modifiers.\n   * Starting from version 1.7, this method is available only if you\n   * include `popper-utils.js` before `popper.js`.\n   *\n   * **DEPRECATION**: This way to access PopperUtils is deprecated\n   * and will be removed in v2! Use the PopperUtils module directly instead.\n   * Due to the high instability of the methods contained in Utils, we can't\n   * guarantee them to follow semver. Use them at your own risk!\n   * @static\n   * @private\n   * @type {Object}\n   * @deprecated since version 1.8\n   * @member Utils\n   * @memberof Popper\n   */\n  static Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\n\n  static placements = placements;\n\n  static Defaults = Defaults;\n}\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n","// https://blog.roomanna.com/09-24-2011/dynamically-coloring-a-favicon\n\nlet favicon\n\nexport default (color=false, method=\"lighten\")=>{\n\n    let icon = document.querySelector(\"link[rel='icon']\")\n\n    if( !favicon ){;\n        favicon = icon.cloneNode()\n    }\n\n    if( !color ){\n        icon.type = favicon.type\n        icon.href = favicon.href\n        return\n    }\n\n    function onImageLoaded() {\n        let canvas = document.createElement(\"canvas\");\n        let size = img.naturalHeight\n        let radius = size / 2\n\n        canvas.width = size;\n        canvas.height = size;\n        \n        let context = canvas.getContext(\"2d\");\n        \n        context.drawImage(img, 0, 0);\n        context.globalCompositeOperation = method;\n        context.fillStyle = color;\n        context.arc(radius, radius, radius, 0, 2 * Math.PI, false);\n        context.fill();\n\n        icon.type = \"image/x-icon\";\n        icon.href = canvas.toDataURL();\n    };\n\n    var img = document.createElement(\"img\");\n    img.addEventListener(\"load\", onImageLoaded);\n    img.src = favicon.href;\n}","import colorizeFavicon from './colorize-favicon'\n\nconst UA = navigator.userAgent\n\nconst device = {\n\n    get is_ios(){ return device.isiOS}, // DEPRECATED\n    get is_android(){ return device.isAndroid }, // DEPRECATED\n    get is_mobile(){ return device.isMobile }, // DEPRECATED\n\n    get isWindows(){ return /Win/.test(UA) },\n    get isMac(){ return /Mac/.test(UA) },\n    get isLinux(){ return /Linux/.test(UA) },\n\n    get minScreenSize(){\n        return window.outerWidth < window.outerHeight ? window.outerWidth : window.outerHeight;\n    },\n\n    get isiOS(){\n        return /iPad|iPhone|iPod/.test(UA)\n        || (device.isMac && navigator.standalone !== undefined ) // iPadOS 13+\n    },\n\n    get isiPad(){\n        return /iPad/.test(UA) || (!device.isiOS && device.isMac && navigator.standalone !== undefined )\n    },\n\n    get isAndroid(){\n        return /android/i.test(UA)\n    },\n\n    get isTouch(){\n        return 'ontouchstart' in window\n    },\n    \n    get isMobile(){\n        return device.isiOS || device.isAndroid\n    },\n\n    // https://developer.chrome.com/multidevice/user-agent\n    get isiOSChrome(){\n        return /CriOS/.test(UA)\n    },\n\n    get isElectron(){\n        return /Electron/.test(UA)\n    },\n\n    get electronVersion(){\n        let matches = UA.match(/Electron\\/([\\d\\.]+) /)\n        return matches ? matches[1] : 0\n    },\n\n    get isChromeInstalledApp(){\n        return this.isInstalled && /Chrome/.test(UA)\n    },\n\n    get isInstalled(){\n        return navigator.standalone || window.matchMedia('(display-mode: standalone)').matches\n    },\n\n    // alias\n    get isStandalone(){ return device.isInstalled }\n    \n}\n\nexport default device\n\n// https://medium.com/@jonas_duri/enable-dark-mode-with-css-variables-and-javascript-today-66cedd3d7845\nexport const colorScheme = {\n\n    get isDarkMode(){ return window.matchMedia(\"(prefers-color-scheme: dark)\").matches },\n    get isLightMode(){ return window.matchMedia(\"(prefers-color-scheme: light)\").matches },\n    get isUnset(){ return window.matchMedia(\"(prefers-color-scheme: no-preference)\").matches },\n\n    get isSupported(){ return this.isDarkMode || this.isLightMode || this.isUnset },\n    \n    onChange(cb){\n        // first time, setup watchers\n        if( !this._watchers ){\n            this._watchers = new Map()\n\n            window.matchMedia(\"(prefers-color-scheme: dark)\").addListener(e => e.matches && this._dispatchChange('dark'))\n            window.matchMedia(\"(prefers-color-scheme: light)\").addListener(e => e.matches && this._dispatchChange('light'))\n        }\n\n        this._watchers.set(cb, cb)\n    },\n    \n    _dispatchChange(mode){\n        this._watchers.forEach(cb=>{\n            cb(mode)\n        })\n    },\n\n    apply({colorizeFaviconComposition='light'}={}){\n        localStorage.setItem('theme-colorize-icon', colorizeFaviconComposition)\n        this.onChange(this.setTheme)\n        this.setTheme()\n        this.setAccent()\n    },\n\n    get theme(){ return localStorage.getItem('theme') },\n    get accent(){ return localStorage.getItem('theme-accent') },\n\n    setTheme(theme){\n\n        const html = document.documentElement\n        let metaThemeColor = document.head.querySelector('meta[name=\"theme-color\"]')\n\n        // create the meta theme color if not found\n        // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/theme-color\n        if( !metaThemeColor ){\n            metaThemeColor = document.createElement('meta')\n            metaThemeColor.setAttribute('name', 'theme-color')\n            document.head.appendChild(metaThemeColor)\n        }\n\n        html.removeAttribute('light')\n        html.removeAttribute('dark')\n\n        if( theme === undefined )\n            theme = localStorage.getItem('theme') || 'system'\n        \n        localStorage.setItem('theme', theme)\n\n        if( theme == 'system' )\n            theme = this.isDarkMode ? 'dark' : 'light'\n\n        html.setAttribute(theme, '')\n        metaThemeColor.content = getComputedStyle(document.body).getPropertyValue('--theme-bgd')\n    },\n\n    setAccent(accent){\n\n        const html = document.documentElement\n        let colorizeFaviconComposition = localStorage.getItem('theme-colorize-icon')\n\n        if( accent === undefined ){\n            accent = localStorage.getItem('theme-accent')\n        }else{\n            localStorage.setItem('theme-accent', accent)\n        }\n\n        if( accent ){\n            html.style.setProperty('--theme', `var(--${accent}, #${accent})`);\n            html.style.setProperty('--theme-chosen', `var(--${accent}, #${accent})`);\n\n            if( colorizeFaviconComposition )\n                colorizeFavicon(getComputedStyle(document.body).getPropertyValue('--theme'), colorizeFaviconComposition)\n\n        }else{\n            html.style.removeProperty('--theme');\n            html.style.removeProperty('--theme-chosen');\n\n            colorizeFavicon(false)\n        }\n\n    }\n    \n}\n\n","/*\n\tPopover\n*/\nimport Popper from 'popper.js'\nimport device from '../../util/device'\n\nconst styles = require('./style.less')\n\nexport const DefaultOpts = {\n\talign: 'bottom',\n\tclassName: '',\n\tclickToggles: true,\n\tcloseOnHide: true,\n\tmaxHeight: 'auto',\n\tmaxHeightThreshold: 400,\n\tflip: true,\n\toverflowBoundry: 'scrollParent',\n\tonClose: ()=>{},\n\tonKeydown: e=>{}\n}\n\nconst OpenPopovers = []\nlet WatchingClicks = false\nlet WatchingKeyboard = false\n\nconst WatchClicks = function(e){\n\t\t\n\tlet found = false\n\tlet close = []\n\tlet target = e.path ? e.path.find(el=>el.popover) : e.target\n\n\t// the clicked target already has a popover and has the \"toggle\" setting, so close the current popover\n\tif( target && target.popover && target.popover.view != target && target.popover.opts.clickToggles ){\n\t\ttarget.popover._close()\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\treturn false\n\t}\n\t\n\t// close all popovers not part (nested) within the clicked target\n\tOpenPopovers.slice(0).reverse().forEach(dd=>{\n\t\tif( !found && !dd.contains(target) ){\n\t\t\tclose.push(dd)\n\t\t\t\n\t\t// as soon as one of the popovers is nested, all others that follow will be nested, no reason to continue testing\n\t\t}else{\n\t\t\tfound = true\n\t\t}\n\t})\n\t\n\tclose.forEach(dd=>dd._close())\n}\n\nconst WatchKeyboard = function(e){\n\tlet popover = OpenPopovers.slice(0).pop()\n\tpopover._onKeydown(e)\n}\n\nexport default class Popover {\n\t\n\tconstructor(target, view, opts={}){\n\t\t\n\t\topts = Object.assign({}, DefaultOpts, opts)\n\t\t\n\t\tif( !WatchingClicks ){\n\t\t\tWatchingClicks = true\n\t\t\twindow.addEventListener(device.isMobile?'touchend':'click', WatchClicks, !device.isMobile)\n\t\t}\n\t\t\n\t\tif( !WatchingKeyboard ){\n\t\t\tWatchingKeyboard = true\n\t\t\twindow.addEventListener('keydown', WatchKeyboard, !device.isMobile)\n\t\t}\n\t\t\n\t\tif( typeof view == 'string' ){\n\n\t\t\tif( customElements.get(view) ){\n\t\t\t\tview = document.createElement(view)\n\t\t\t}else{\n\t\t\t\tlet _view = document.createElement('div')\n\t\t\t\t_view.classList.add('tooltip')\n\t\t\t\t_view.innerHTML = view\n\t\t\t\tview = _view\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( window.Backbone && view instanceof window.Backbone.View )\n\t\t\tview = view.el\n\n\t\tif( target instanceof MouseEvent ){\n\t\t\ttarget = this.createInvisiblePlaceholderTarget(target)\n\t\t}\n\n\t\tthis.opts = opts\n\t\tthis.target = target\n\t\tthis.view = view\n\t\t\n\t\tthis.target.classList.add('popover-open')\n\t\tthis.view.classList.add('__view')\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('popover')\n\t\tthis.el.innerHTML = '<span class=\"__arrow\" x-arrow><span class=\"__arrow\" x-arrow></span></span>'\n\t\tthis.el.appendChild(view)\n\t\tdocument.body.append(this.el)\n\t\t\n\t\tif( this.opts.className ){\n\t\t\tthis.opts.className.split(' ').forEach(className=>this.el.classList.add(className));\n\t\t}\n\t\t\n\t\tthis.target.popover = this\n\t\tthis.el.popover = this\n\t\tthis.view.popover = this\n\t\t\n\t\t// set position of the popover using Popper\n\t\tthis.popper = new Popper(target, this.el, {\n\t\t\tplacement: opts.align,\n\t\t\tremoveOnDestroy: true,\n\t\t\tonCreate: this._onPositionCreate.bind(this),\n\t\t\tonUpdate: this._onPositionUpdate.bind(this),\n\t\t\tmodifiers: {\n\t\t\t\tinner: {\n\t\t\t\t\tenabled: opts.inner || false\n\t\t\t\t},\n\t\t\t\toffset: {\n\t\t\t\t\tenabled: opts.offset?true:false,\n\t\t\t\t\toffset: opts.offset\n\t\t\t\t},\n\t\t\t\tflip: {\n\t\t\t\t\tenabled: opts.flip\n\t\t\t\t},\n\t\t\t\tpreventOverflow: {\n\t\t\t\t\tenabled: opts.preventDefault !== undefined ? opts.preventDefault : true, // FIXME: confusing naming and not sure it works\n\t\t\t\t\tboundariesElement: opts.overflowBoundry || 'scrollParent',\n\t\t\t\t\t// priority: []\n\t\t\t\t\tpriority: ['top', 'bottom'].includes(opts.align) ? ['left', 'right'] : ['top', 'bottom']\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\t// watch for the view to add elements so we can adjust position\n\t\tthis.mutationObserver = new MutationObserver(this.viewMutated.bind(this));\n\t\tthis.mutationObserver.observe(this.view, { attributes: true, childList: true, subtree: false });\n\t\t\n\t\t// keep track of open popovers so we can remove them later\n\t\tOpenPopovers.push(this)\n\t}\n\n\tcreateInvisiblePlaceholderTarget(e){\n\t\tlet target = document.createElement('div')\n\t\ttarget.classList.add('popover-invisible-placeholder')\n\t\ttarget.style.position = 'absolute'\n\t\ttarget.style.left = e.clientX+'px'\n\t\ttarget.style.top = e.clientY+'px'\n\t\tdocument.body.appendChild(target)\n\t\treturn target\n\t}\n\t\n\tcontains(target){\n\t\tif( !target ) return false\n\t\tif( this.el.contains(target) )\n\t\t\treturn true\n\t\t\n\t\t// let parentPopover = this.parentPopover\n\t\t// if( parentPopover && parentPopover.contains(target) )\n\t\t// \treturn true\n\t\t\n\t\tlet targetParent = target.parentElement && target.parentElement.popover\n\t\tif( targetParent && this.el.contains(targetParent.target) )\n\t\t\treturn true\n\t\t\t\n\t\treturn false\n\t}\n\t\n\tget parentPopover(){\n\t\tlet parentPopover = false\n\t\tlet parent = this.target\n\t\twhile(parent && !parentPopover){\n\t\t\tparent = parent.parentElement\n\t\t\tif( parent && parent.popover )\n\t\t\t\tparentPopover = parent\n\t\t}\n\t\treturn parentPopover\n\t}\n\t\n\tget isNested(){\n\t\treturn !!this.parentPopover\n\t}\n\t\n\tviewMutated(mutationsList, observer){\n\t\tthis._updatePosition()\n\t}\n\t\n\tclose(){\n\t\t\n\t\tif( !this.target.popover ) return;\n\t\t\n\t\tthis.target.popover = null\n\t\tthis.el.popover = null\n\t\tthis.view.popover = null\n\t\t\n\t\tthis.mutationObserver.disconnect()\n\t\tthis.popper.destroy()\n\t\tthis.target.classList.remove('popover-open')\n\n\t\tif( this.target.classList.contains('popover-invisible-placeholder') )\n\t\t\tthis.target.remove()\n\t\t\n\t\t// remove this from the list of open popovers as well as all popovers after it\n\t\tvar indx = OpenPopovers.indexOf(this)\n\t    if( indx > -1){\n\t        OpenPopovers.splice(indx).forEach((dd,i)=>{\n\t\t\t\tif( i > 0 ) dd._close() // close all popovers nested inside of this one\n\t\t\t})\n\t\t}\n\t\t\n\t\t// no more popovers, remove event listners\n\t\tif( OpenPopovers.length == 0 ){\n\t\t\tWatchingClicks = false\n\t\t\twindow.removeEventListener(device.isMobile?'touchend':'click', WatchClicks, true)\n\t\t\t\n\t\t\tWatchingKeyboard = false\n\t\t\twindow.removeEventListener('keydown', WatchKeyboard, !device.isMobile)\n\t\t}\n\t}\n\t\n\t// internal close method that also triggers the onClose callback\n\t_close(){\n\t\tthis.close()\n\t\tthis.opts.onClose&&this.opts.onClose()\n\t}\n\t\n\t_updatePosition(){\n\t\tthis.popper.update()\n\t}\n\t\n\t_onPositionCreate(data){\n\t\t\n\t\tlet arrowH = data.arrowElement.offsetHeight\n\t\tlet top = data.offsets.reference.top\n\t\tlet bottom = data.offsets.reference.bottom\n\n\t\tdata.instance.modifiers.forEach(m=>{\n\t\t\tif( m.name == 'preventOverflow' && m.boundaries ){\n\n\t\t\t\t// TODO: needs improvement when alignmen is not bottom-*\n\t\t\t\tlet h = (m.boundaries.height || window.innerHeight) - bottom - (arrowH*2)\n\n\t\t\t\tif( bottom > m.boundaries.height/2 )\n\t\t\t\t\th = top - (arrowH*2)\t\n\n\t\t\t\tthis.maxHeight = h\n\t\t\t\tthis.view.style.maxWidth = this.opts.maxWidth||''\n\t\t\t}\n\t\t})\n\t}\n\t\n\t_onPositionUpdate(data){\n\t\tif( data.hide && this.opts.closeOnHide )\n\t\t\tthis._close()\n\t}\n\t\n\t_onKeydown(e){\n\t\tif( this.opts.onKeydown )\n\t\t\tthis.opts.onKeydown(e)\n\t}\n\t\n\tset maxHeight(val){\n\t\tif( this.opts.maxHeight != 'auto' )\n\t\t\tthis.view.style.maxHeight = this.opts.maxHeight\n\t\telse if( this.opts.maxHeight !== false /*&& this.view.offsetHeight > this.opts.maxHeightThreshold*/ )\n\t\t\tthis.view.style.maxHeight = val\n\t}\n\t\n}","// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n","\nconst config = {\n    APP_TITLE: document.title,\n    PATH_ROOT: location.pathname,\n    PATH_PREFIX: '',\n    clearInvalidPath: true\n}\n\nexport default config\n\n// normalize path (always begin with prefix and path root)\nexport const normalizePath = path =>{\n    return path ? config.PATH_ROOT+config.PATH_PREFIX+cleansePath(path) : path\n}\n\nexport const cleansePath = path =>{\n    return path.replace(new RegExp(`^(${config.PATH_ROOT})?(${config.PATH_PREFIX})?`), '')\n}\n\n","import UrlPattern from 'url-pattern' // https://github.com/snd/url-pattern \nimport {normalizePath} from './config'\n\nexport default class Route {\n    \n    constructor(path, onChange){\n        \n        path = normalizePath(path)\n        this.path = path\n        this.patt = new UrlPattern(path)\n\n        this.onChange = onChange\n    }\n\n    get params(){\n        return this.state ? this.state.params : {}\n    }\n\n    get rootPath(){\n        return this.patt.ast[0].value\n    }\n\n    get isCurrent(){\n        return this.state&&this.state.isCurrent\n    }\n\n    makePath(params){\n        return this.patt.stringify(params)\n    }\n\n    update(props){\n        this.state&&this.state.isCurrent&&this.state.update(props)\n    }\n\n    matches(state){\n\n        // array of states, get the last matched state in the list\n        if( Array.isArray(state) ){\n            let matchedState = null\n            for(let i in state){\n                if( this.matches(state[i]) )\n                    matchedState = state[i]\n            }\n            return matchedState\n        }\n\n        let params = state ? this.patt.match(state.path?state.path:state) : false\n        if( params ){\n            this.state = state\n            state.params = params\n            return state\n        }\n        return null\n    }\n\n    _change(oldState, newState, dir){\n\n        oldState = this.matches(oldState)\n        newState = this.matches(newState)\n\n        // TODO: change signature to pass newState first\n        if( oldState || newState )\n            this.onChange(oldState, newState, dir)\n\n        return !!newState\n    }\n}","import config, {normalizePath, cleansePath} from './config'\n\nexport default class HistoryState {\n\n    constructor(parent, props){\n\n        this.parent = parent\n\n        if( !props.path )\n            props.path = ''\n\n        let [path, query] = props.path.split('?')\n\n        let queryData = {}\n        this.query = new URLSearchParams(query||props.query||'')\n\n        if( query ){\n            this.query.forEach((v, k)=>{\n                queryData[k] = v\n            })\n        }\n        \n        // removing leading slash and #\n        props.path = cleansePath(path)\n\n        this.props = Object.assign({\n            query: queryData,\n            title: config.APP_TITLE\n        }, props)\n    }\n\n    get num(){ return this.props.num }\n\n    get isCurrent() {\n        return !history.state || history.state.num == this.num\n    }\n\n    get isBefore(){\n        return history.state && history.state.num > this.num\n    }\n\n    get isBack(){\n        return this.isBefore()\n    }\n\n    get isAfter(){\n        return !history.state || history.state.num < this.num\n    }\n\n    get isForward(){\n        return this.isAfter()\n    }\n\n    get title(){\n        return this.props.title\n    }\n\n    set title(title){\n        this.update({title:title})\n    }\n\n    set path(path){\n        path = cleansePath(path)\n        this.update({path:path})\n    }\n\n    get path(){\n        return normalizePath(this.props.path)\n    }\n\n    get normalizePath(){\n        let path = this.props.path ? this.path : config.PATH_ROOT+config.PATH_PREFIX\n        // return path\n        let query = this.query.toString()\n        return path+(query?'?'+query:'')\n    }\n\n    push(props={}){\n        this.props = Object.assign(this.props, props)\n        history.pushState(this.props, null, this.normalizePath)\n        this.parent.save()\n\n        if( this.props.title && this.isCurrent )\n            document.title = this.props.title\n    }\n\n    update(props={}){\n\n        // do not let num be updated, this is set when newly created\n        delete props.num\n        \n        this.props = Object.assign(this.props, props)\n        this.parent.save()\n\n        if( !this.isCurrent ) return\n\n        history.replaceState(this.props, null, this.normalizePath)\n            \n        if( this.props.title )\n            document.title = this.props.title\n    }\n\n    toJSON(){\n        return JSON.stringify(this.props)\n    }\n}","\nimport HistoryState from './history-state'\n\nexport default class HistoryStates {\n    constructor(){\n        let storedData = sessionStorage.getItem('history-states')\n        this.states = JSON.parse(storedData||'[]').map(props=>new HistoryState(this, JSON.parse(props)))\n\n        this._current = history.state && history.state.num || -1\n\n        // set initial state data\n        this.add({\n            path: location.pathname+location.hash+location.search\n        })\n    }\n\n    get length(){ return this.states.length }\n\n    get current(){\n        return this.get(this._current)\n    }\n\n    save(){\n        sessionStorage.setItem('history-states', JSON.stringify(this.states))\n    }\n\n    get(num, create=false, props={}){\n        if( !this.states[num] && create ){\n            props.num = num\n            this.states[num] = new HistoryState(this, props)\n        }\n\n        return this.states[num]\n    }\n\n    add(props={}, push=false){\n        \n        let oldNum = this._current\n        let num = history.state && history.state.num\n\n        if( num == undefined || push ){\n            num = ++this._current\n            \n            // remove trailing states as they are no longer valid\n            this.states.splice(num+1).forEach(state=>{\n                state.parent = null\n            })\n        }\n        // else if( push )\n        //     num++\n\n        let state = this.get(num, true, props) // or create\n        \n        if( push )\n            state.push(props)\n        else\n            state.update(props)\n\n        this._current = state.num\n\n        let step = oldNum > this._current ? -1 : 1;\n        \n        let oldStates = []\n        // console.log(oldNum, this._current);\n        while(oldNum != this._current){\n            let oldState = this.get(oldNum)\n            if( oldState )\n                oldStates.push(oldState)\n            oldNum += step\n        }\n\n        // console.log(oldStates);\n\n        return [state, oldStates]\n    }\n}","import Route from './route'\nimport HistoryStates from './history-states'\nimport config, {normalizePath} from './config'\n\nconst ROUTES = []\n\nexport class Router {\n\n    // NOTE: this must be setup before anything uses router.add()\n    config(opts){\n        if( opts.root != undefined ){\n            config.PATH_ROOT = opts.root\n            delete opts.root\n        }\n\n        if( opts.prefix != undefined ){\n            config.PATH_PREFIX = opts.prefix\n            delete opts.prefix\n        }\n\n        if( opts.title != undefined ){\n            config.APP_TITLE = opts.title\n            delete opts.title\n        }\n        \n        for( let key in opts ){\n            config[key] = opts[key]\n        }\n    }\n\n    start(opts={}){\n\n        opts = Object.assign({\n            currentState: null,\n            requireState: false\n        }, opts)\n\n        this.states = new HistoryStates()\n\n        // listen for state changes and change routes accordingly\n        window.addEventListener('popstate', e=>{\n            \n            if( opts.requireState && !e.state ) return // probably a sheetview change, ignore\n\n            let [newState, oldStates] = this.states.add()\n\n            window.dispatchEvent(new CustomEvent('router:popstate', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    path: newState.path,\n                    state: newState,\n                    oldStates: oldStates\n                }\n            }))\n\n            this._changeRoute(oldStates, newState)\n        })\n\n        // trigger initial route\n        this._changeRoute([], this.states.current)\n\n        // update current state if no path\n        if( !this.states.current.path && opts.currentState ){\n            this.states.current.update(opts.currentState)\n        }\n    }\n\n    // pushes new path/state onto stack (does not trigger route change)\n    push(path, props={}){\n\n        if( path instanceof Route )\n            path = path.state ? path.state.props.path : path.rootPath\n\n        props.path = path\n\n        let [newState, oldStates] = this.states.add(props, true)\n        \n        window.dispatchEvent(new CustomEvent('router:push', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                path: newState.path,\n                state: newState,\n                oldStates: oldStates\n            }\n        }))\n\n        return [newState, oldStates]\n    }\n\n    // pushes new path/state and triggers route change\n    goTo(path, props){\n        let [newState, oldStates] = this.push(path, props)\n        this._changeRoute(oldStates, newState)\n    }\n\n    _changeRoute(oldStates, newState){\n\n        let dir = oldStates.length == 0 || oldStates[0].num < newState.num ? 'forward' : 'back'\n\n        let didMatch = false\n        ROUTES.forEach(route=>{\n            if( route._change(oldStates, newState, dir) )\n                didMatch = true\n        })\n\n        // if none of the routes matched, change current state path back to the root\n        if( !didMatch && config.clearInvalidPath )\n            this.states.current.path = config.PATH_ROOT\n    }\n\n    add(path, onChange){\n        let route = new Route(path, onChange)\n        ROUTES.push(route)\n        return route\n    }\n\n    get routes(){\n        return ROUTES.map(route=>route.path)\n    }\n\n    get rootRoutes(){\n        return ROUTES.map(route=>route.rootPath)\n    }\n\n}\n\n// singleton\nexport default new Router()","import {LitElement, html, css} from 'lit-element'\nimport Menu from '../menu'\nimport router from '../../router'\nimport device from '../../util/device'\n\nconst PanelControllers = {}\n\nclass PanelController extends LitElement {\n\n    static for(name){\n\n        // create a root panel controller if there isn't one\n        if( name == 'root' && !PanelControllers[name] ){\n            let rootPanelController = document.createElement('b-panels')\n            rootPanelController.setAttribute('name', 'root')\n            document.body.appendChild(rootPanelController)\n            PanelControllers[name] = rootPanelController\n        }\n\n        return PanelControllers[name]\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            /* z-index: 10; */\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            pointer-events: none;\n        }\n    `}\n\n    get name(){\n        return this.hasAttribute('name') ? this.getAttribute('name') : undefined\n    }\n\n    constructor(){\n        super()\n        this.panels = new Map()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        \n        if( this.name ){\n            if( PanelControllers[this.name] )\n                console.warn('A panel-controller already exists with the name: ', this.name)\n            else\n                PanelControllers[this.name] = this\n        }\n\n        // TODO: support his in Android? make feature opt in?\n        if( this.name == 'root' && device.isiOS ){\n            let overflowScrollAt = 0\n            let topPanel = null\n\n            window.addEventListener('touchend', e=>{\n                if( overflowScrollAt < -40 ){\n                    topPanel&&topPanel.close()\n                    setTimeout(()=>{\n                        if( topPanel ) topPanel.style.top = 0\n                        topPanel = null\n                    },300)\n                }else{\n                    topPanel = null\n                }\n            })\n\n            window.addEventListener('scroll', e=>{\n\n                if( this.panels.size > 0 && !topPanel )\n                    topPanel = this.panelOnTop\n                \n                if( !topPanel || topPanel.opts.disableOverscrollClose === true ) return\n\n                overflowScrollAt = document.scrollingElement.scrollTop\n                \n                if( overflowScrollAt < 0 && topPanel ){\n                    topPanel.style.top = (Math.abs(overflowScrollAt) * 1) + 'px'\n                }\n            })\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.hasAttribute('name') && PanelControllers[this.name] == this )\n            delete PanelControllers[this.name]\n    }\n            \n    render(){return html`        \n        <slot></slot>\n    `}\n\n    remove(panel){\n        this.panels.delete(panel)\n        this._updatePanels()\n    }\n\n    add(panel){\n\n        // let SheetView and Panel work together\n        document.body.setAttribute('ontop', 'panel')\n\n        this.panels.delete(panel)\n        this.panels.set(panel, panel)\n\n        if( !this.contains(panel) )\n            this.append(panel)\n\n        this._updatePanels()\n    }\n\n    get panelOnTop(){\n        let onTop = null\n        this.panels.forEach(panel=>{\n            if( !onTop && panel.hasAttribute('ontop') )\n                onTop = panel\n        })\n        return onTop\n    }\n\n    get panelOnTopWithRoute(){\n        let onTop = null\n        this.panels.forEach(panel=>{\n            if( panel.route )\n                onTop = panel\n        })\n        return onTop\n    }\n\n    _updatePanels(updateRoutes=false){\n        let i = 0\n\n        // if( this.length == 0 && updateRoutes )\n        //     router.push('')\n        // else\n        this.panels.forEach((panel)=>{\n            \n            if( panel.type != 'modal')\n                panel.style.zIndex = i++\n            \n            if( i == this.length ){\n                panel.setAttribute('ontop', '')\n\n                // if( updateRoutes && panel.route && !panel.route.isCurrent ){\n                //     console.log(panel.route);\n                //     // router.push(panel.route.path)\n                // }\n\n            }else{\n                panel.removeAttribute('ontop')\n            }\n        })\n\n        let hostEl = this.getRootNode()\n        hostEl = hostEl.host || hostEl.body || hostEl\n\n        if( hostEl ){\n            if( this.length == 0 ){\n                hostEl.classList.remove('b-panel-open')\n                hostEl.style.overflow = ''\n            }else{\n                hostEl.classList.add('b-panel-open')\n                hostEl.style.overflow = 'hidden'\n            }\n        }\n    }\n\n    _updateRoute(){\n        let i = 0\n\n        if( this.length == 0 ){\n            \n            // TEMP - improve interoperability with Groundwork\n            if( window.app && app.sv('sheets').sheets.length > 0 )\n                app.sv('sheets').setHash()\n            else\n                router.push('')\n\n            this.dispatchEvent(new CustomEvent('panels-closed', {\n                bubbles: true,\n                composed: true,\n                detail: {controller: this}\n            }))\n        \n        }else\n        this.panels.forEach((panel)=>{\n\n            if( panel.onTop && panel.route && !panel.route.isCurrent ){\n                // console.log(panel.route, panel.route.state.path);\n                router.push(panel.route)\n            }\n        })\n    }\n\n    get length(){\n        return this.panels.size\n    }\n\n    map(fn){\n        let resp = []\n        this.panels.forEach(p=>resp.push(fn(p)))\n        return resp.reverse() // most recent first\n    }\n\n    async quickJump(el){\n        \n        let menu = this.map(panel=>{\n            return {\n                label: panel.title,\n                icon: panel.icon||'window',\n                description: panel.path,\n                panel: panel\n            }\n        })\n\n        menu.shift() // remove first menu as its the open view\n\n        let ts = new Date().getTime()\n\n        // quick jump is already open\n        if( el.popover ){\n\n            // if quick jump triggered within a second, auto switch to the last opened view\n            if( el.quickJumpOpened && ts - el.quickJumpOpened <= 1000 && menu.length > 0){\n                el.popover.close()\n                menu[0].panel.open()\n            }\n            \n            return\n        }\n\n        el.quickJumpOpened = ts\n\n        if( menu.length == 0 )\n            menu.push({text: 'No other views open'})\n\n        menu.unshift({divider: 'Quick Jump Menu'}, 'divider')\n\n        let selected = await new Menu(menu).popover(el, {align: 'bottom-start'})\n\n        if( selected )\n            selected.panel.open()\n    }\n}\n\ncustomElements.define('b-panels', PanelController)\n\nexport default customElements.get('b-panels')","import {LitElement, html, css} from 'lit-element'\n\nclass PanelToolbar extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        look: {type: String, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.title = ''\n        this.look = ''\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr max-content 1fr;\n            /* background: linear-gradient(to bottom, #fff, #f5f5f5); */\n            padding: .5em;\n            padding: .4em .5em .3em;\n            box-sizing: border-box;\n            justify-content: space-between;\n            align-items: center;\n            border-radius: 4px 4px 0 0;\n            min-height: 40px;\n            grid-column: 1/-1; /* full width */\n        }\n\n        /* @media (max-width: 699px) {\n            .middle {\n                display: none;\n            }\n\n            :host {\n                grid-template-columns: auto auto;\n            }\n        } */\n\n        :host([overlay]) {\n            background: none;\n            box-shadow: none;\n            position: absolute;\n            z-index: 100;\n            pointer-events: none;\n            top: 0;\n            left: 0;\n            width: 100%;\n        }\n\n        :host([overlay]) > div * {\n            pointer-events: initial;\n        }\n\n        :host([shadow]) {\n            box-shadow: rgba(0,0,0,.2) 0 0 6px;\n        }\n\n        :host([look=\"white\"]) {\n            background: #fff;\n        }\n\n        :host([look=\"silver\"]) {\n            background: linear-gradient(to bottom,#eee,#ddd);\n            border-bottom: solid 1px #bbb;\n        }\n\n        :host([look=\"clear\"]) {\n            background: transparent;\n        }\n\n        :host([look=\"dark\"]) {\n            /* background: #2c3033; */\n            background: linear-gradient(to bottom,#303538,#2c3033);\n            color: #fff;\n        }\n\n        :host([look=\"dark\"]) b-btn[outline] {\n            --color: #ddd\n        }\n\n        slot[name=\"title\"] {\n            font-weight: bold;\n            font-size: 1.1em;\n        }\n\n        :host([notitle]) slot[name=\"title\"] {\n            display: none;\n        }\n\n        .right {\n            text-align: right;\n        }\n\n        @media print {\n            b-btn {\n                display: none; /* assume we dont want buttons to display on print */\n            }\n        }\n\n    `}\n\n    render(){return html`\n        <div class=\"left\">\n            <slot name=\"close-btn\">\n                <b-btn outline icon=\"cancel-1\" title=\"Right+click for quick jump menu\"\n                    @click=${this.close} @contextmenu=${this.quickJump}></b-btn>\n            </slot>\n            <slot name=\"left\"></slot>\n        </div>\n        <div class=\"middle\">\n            <slot name=\"title\">${this.title}</slot>\n            <slot name=\"middle\"></slot>\n        </div>\n        <div class=\"right\">\n            <slot name=\"right\"></slot>\n        </div>\n    `}\n\n    close(){\n        this.panel&&this.panel.close()\n    }\n\n    quickJump(e){\n\n        if( !this.panel || this.panel.opts.quickJump !== true )\n            return\n\n        e.preventDefault();\n        this.panel&&this.panel.panelController&&this.panel.panelController.quickJump(e.target)\n    }\n}\n\ncustomElements.define('b-panel-toolbar', PanelToolbar)\n\nexport default  customElements.get('b-panel-toolbar')","import {LitElement, html, css, unsafeCSS} from 'lit-element'\nimport Controller from './controller'\nimport router from '../../router'\nimport Route from '../../router/route'\nimport device from '../../util/device'\nimport './controller'\nimport './toolbar'\nimport '../../elements/btn'\n\nexport const PanelDefaults = {\n    type: '',\n    closeBtn: false,\n    title: '',\n    width: '100%',\n    height: '100%',\n    anchor: 'right',\n    animation: '',\n    quickJump: true,\n    closeOnEsc: false,\n    controller: null, // root controller will be created and used\n    disableBackdropClick: false,\n    disableOverscrollClose: false\n}\n\nclass RegisteredPanels {\n\n    constructor(){\n        this.register = new Map()\n    }\n\n    set(key, data){\n        return this.register.set(key, data)\n    }\n\n    get(path){\n        return this.register.get(path)\n    }\n\n    add(path, view, opts={}){\n        if( this.get(path) ){\n            return console.warn(`A panel is already registered for ${path}`)\n        }\n\n        this.set(path, {view, opts})\n\n        if( opts.route !== false )\n        this.get(path).route = router.add(path, (oldState, newState, dir)=>{\n            if( this._initiate(path) )\n                this.get(path).panel._routeChange(oldState, newState, dir)\n        })\n    }\n\n    _initiate(path){\n        let registered = this.get(path)\n\n        if( !registered ){\n            console.error(`Panel for ${path} not found`)\n            return false\n        }\n\n        // first time this panel is being requested\n        if( !registered.panel ){\n\n            if( typeof registered.view == 'function' ){\n                registered.panel = new Panel()\n                registered.panel.html = registered.view\n            }\n            else\n                registered.panel = new Panel(registered.view, (registered.opts||{}))\n\n            if( registered.route )\n                registered.panel.route = registered.route\n\n            // copy properties to panel\n            if( registered.opts ){\n                for(let key in registered.opts ){\n                    if( key != 'route' )\n                        registered.panel[key] = registered.opts[key]\n                }\n            }\n        }\n\n        return true\n    }\n\n    open(path){\n        if( !this._initiate(path) ) return\n\n        let registered = this.get(path)\n        \n        if( registered.route )\n            router.goTo(registered.route)\n        else\n            registered.panel.open()\n    }\n    \n}\n\nexport const register = new RegisteredPanels()\n\nexport const Modal = function(view, opts={}){\n    opts = Object.assign({\n        type: 'modal',\n    }, opts)\n\n    if( opts.closeBtn && opts.closeOnEsc === undefined )\n        opts.closeOnEsc = true\n\n    return new Panel(view, opts).open()\n}\n\nexport const ActionSheet = function(view, opts={}){\n    opts = Object.assign({\n        type: 'actionsheet',\n    }, opts)\n\n    if( opts.closeOnEsc === undefined )\n        opts.closeOnEsc = true\n\n    return new Panel(view, opts).open()\n}\n\nexport class Panel extends LitElement {\n\n    static get properties(){return {\n        title: {type: String},\n        width: {type: String},\n        height: {type: String},\n        anchor: {type: String, reflect: true},\n        type: {type: String, reflect: true},\n        animation: {type: String, reflect: true}\n    }}\n\n    static register(path, view, opts){\n        // move register to end of call stack\n        setTimeout(()=>{\n            register.add(path, view, opts)\n        })\n    }\n\n    static open(path){\n        register.open(path)\n    }\n\n    static get animationTime(){ return 300 }\n    \n    constructor(view, opts={}){\n        super()\n\n        let defaultOpts = Object.assign({}, PanelDefaults)\n\n        if( opts.type == 'modal' ){\n            defaultOpts.width = ''\n            defaultOpts.height = ''\n            defaultOpts.anchor = 'center'\n            defaultOpts.animation = 'scale'\n        }\n\n        if( opts.type == 'actionsheet' ){\n            defaultOpts.width = '100%'\n            defaultOpts.height = ''\n            defaultOpts.anchor = 'bottom'\n        }\n\n        opts = Object.assign(defaultOpts, opts)\n\n        this.animation = opts.animation\n        this.type = opts.type\n        this.closeBtn = opts.closeBtn\n        this.title = opts.title\n        this.width = opts.width\n        this.height = opts.height\n        this.anchor = opts.anchor\n        this.panelController = opts.controller\n\n        this.opts = opts\n\n        if( typeof view == 'function' ){\n            this.html = view\n\n        }else if( typeof view == 'string' ){\n            this.view = document.createElement(view)\n\n        }else if( view instanceof HTMLElement ){\n            this.view = view\n        }\n    }\n\n    onKeydown(e){\n        if( !this.onTop ) return\n\n        if( this.opts.closeOnEsc && e.key == 'Escape' )\n            this.close()\n\n        this.opts.onKeydown&&this.opts.onKeydown(e)\n    }\n\n    // DEPRECATED: hash changed to path\n    get hash(){ \n        console.warn('Panel: `.hash` is deprecated; use `.path`');\n        this.path\n    }\n\n    get path(){\n        return this.route&&this.route.state.props.path\n    }\n\n    get route(){ return this.__route}\n    set route(route){\n\n        if( this.route ){\n            return console.warn('Panel routes can only be set once')\n        }\n\n        this.__route = route instanceof Route ? route : router.add(route, this._routeChange.bind(this))\n    }\n\n    _routeChange(oldState, newState, dir){\n\n        // console.log(this.title, dir, oldState, newState);\n\n        let detail = {\n            oldState: oldState,\n            newState: newState\n        }\n\n        if( newState ){\n\n            newState.update({title: this.title})\n\n            if( !this.isOpen && dir == 'forward' )\n                newState.update({didEnter: true})\n            \n            this.open()\n            detail.opened = true\n        }\n\n        if( oldState && !newState ){\n\n            if( (oldState.isAfter && oldState.props.didEnter)\n            || (oldState.isBefore && oldState.props.didExit) ){\n                this._close(device.isiOS)\n                detail.closed = true\n            }\n\n            // if( (oldState.isBefore && oldState.props.didEnter)\n            // || (oldState.isAfter && oldState.props.didExit) )\n            //     this.open()\n\n        }\n\n        if( oldState && newState ){\n            \n            // console.log('same view, but new state', newState.params);\n\n            // if( this.view && this.view.onOpen ){\n            //     this.view.onOpen(this.route.state)\n            // }\n        }\n\n        this.dispatchEvent(new CustomEvent('route-changed', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: detail\n\t\t}))\n    }\n\n    render(){return html`\n        <div class=\"backdrop\"></div>\n        <main style=\"${this.width?`width:${this.width};`:''}${this.height?`height:${this.height};`:''}\">\n            <b-btn icon=\"cancel-1\" pill class=\"modal-close-btn\" @click=${this.close} ?hidden=${this.closeBtn!==true}></b-btn>\n            <slot></slot>\n            ${this.html}\n        </main>\n    `}\n\n    animate(effect){\n        if( !effect ) return\n        let main = this.shadowRoot.querySelector('main')\n        main.classList.add(effect)\n        setTimeout(function(){\n            main.classList.remove(effect)\n        },1000)\n    }\n\n    bounce(){\n        this.animate('bounce')\n    }\n\n    shake(){\n        this.animate('shake')\n    }\n\n    set html(fn){ this.__html = fn}\n    get html(){ return this.__html ? this.__html.call(this) : ''}\n\n    set view(view){\n        if( this.view ){\n            this.view.panel = null\n            this.view.remove()\n        }\n\n        if( this.toolbar ){\n            this.toolbar.panel = null\n            this.toolbar = null\n        }\n            \n        this.__view = view;\n        \n        if( this.view ){\n            this.view.panel = this\n            this.appendChild(this.view)\n            this._linkToolbar()\n        }\n    }\n    get view(){ return this.__view}\n\n    get isOpen(){ return this.hasAttribute('open')}\n    get onTop(){ return this.hasAttribute('ontop') || (this.type == 'modal' && this.parentElement.lastElementChild == this) }\n\n    firstUpdated(){\n        this._linkToolbar()\n        \n        this.shadowRoot.querySelector('.backdrop').addEventListener('click', e=>{\n            \n            if( this.opts.onBackdropClick && this.opts.onBackdropClick() === false )\n                return\n\n            if( this.opts.disableBackdropClick !== true )\n                this.close()\n        })\n    }\n\n    _linkToolbar(){\n        setTimeout(()=>{\n            \n            if( this.view && this.view.shadowRoot )\n                this.toolbar = this.view.shadowRoot.querySelector('b-panel-toolbar')\n            else\n                this.toolbar = this.shadowRoot.querySelector('b-panel-toolbar') || this.querySelector('b-panel-toolbar')\n            \n            if( this.toolbar ){\n                this.toolbar.panel = this\n                this.toolbar.title = this.title\n            }\n            \n        },0)\n    }\n\n    get panelController(){return this.__panelController}\n    set controller(val){ this.panelController = val }\n    set panelController(val){\n        \n        if( typeof val === 'string' ){\n            let _val = val\n            val = Controller.for(val)\n            if( !val )\n                console.warn('Panel controller `'+_val+'` does not exist, root will be used')\n        }\n\n        this.__panelController = val\n    }\n\n    async open(){\n        \n        if( this.route && this.route.state.props.controller )\n            this.controller = this.route.state.props.controller\n\n        // if no controller set, use the root controller\n        if( !this.panelController ){\n            this.panelController = Controller.for('root')\n        }\n\n        if( this.view && this.view.willOpen ){\n            if( await this.view.willOpen(this.route.state) === false )\n                return false;\n        }\n\n        this._onKeydown = this._onKeydown || this.onKeydown.bind(this)\n        window.removeEventListener('keydown', this._onKeydown, true)\n        window.addEventListener('keydown', this._onKeydown, true)\n\n        this.panelController.add(this)\n\n        setTimeout(()=>{\n            this.setAttribute('open', '')\n\n            if( this.view && this.view.onOpen ){\n                this.view.onOpen(this.route.state)\n            }\n\n        },100)\n\n        return this\n    }\n\n    set title(str){\n        this.__title = str\n        this.route&&this.route.update({title: str})\n        if(this.toolbar) this.toolbar.title = str\n    }\n    get title(){ return this.__title }\n\n    get params(){\n        return this.route ? this.route.state.params : {}\n    }\n\n    async close(){\n\n        if( this.opts.onClose && await this.opts.onClose() === false )\n            return\n        \n        if( this.view && this.view.onClose && await this.view.onClose() === false )\n            return\n\n        this.route&&this.route.update({didExit: true})\n        this._close()\n\n        if( this.route)\n            this.panelController._updateRoute()\n\n        return this\n    }\n\n    _close(immediate=false){\n        window.removeEventListener('keydown', this._onKeydown, true)\n        this.panelController.remove(this)\n        this.removeAttribute('open')\n        \n        if( immediate )\n            this.remove()\n        else\n        setTimeout(()=>{\n            this.remove()\n        }, Panel.animationTime)\n    }\n\n    static get styles(){return css`\n        :host {\n            pointer-events: initial;\n            display: flex;\n            position: absolute;\n            overflow: visible;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: var(--b-panel-overlay, rgba(0,0,0,.4)); /* overlay */\n            opacity: 0;\n            transition: opacity ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1),\n                        background-color ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n            --radius: var(--b-panel-radius, 5px);\n            --radius-top: var(--radius);\n            --radius-bottom: 0;\n        }\n\n        :host([type=\"modal\"]) {\n            z-index: 1000; /* always on top */\n        }\n\n        :host > main {\n            position: absolute;\n            right: 0;\n            min-width: 300px;\n            min-height: 1em;\n            max-width: var(--max-width, 100%);\n            max-height: var(--max-height, 100%);\n            overflow: visible;\n            display: flex;\n            flex-direction: column;\n            background: var(--b-panel-bgd, #fff);\n            box-shadow: var(--b-panel-shadow, rgba(0,0,0,.2) 0 3px 10px);\n            border-radius: var(--radius-top) var(--radius-top) var(--radius-bottom) var(--radius-bottom);\n            transition: ${Panel.animationTime}ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        :host([type=\"modal\"]) > main {\n            max-height: var(--max-height, 96%);\n            max-width: var(--max-width, 96%);\n        }\n\n        :host([type=\"actionsheet\"]) main {\n            max-width: var(--b-panel-actionsheet-max-w, 500px);\n            margin-bottom: 0;\n            max-height: var(--b-panel-actionsheet-max-h, 70vh);\n            /* --radius: 12px; */\n        }\n\n        :host([type=\"actionsheet\"]) > main {\n            transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        /* :host([type=\"actionsheet\"][anchor=\"top\"]) > main {\n            padding-top: env(safe-area-inset-top);\n        } */\n\n        :host([type=\"actionsheet\"][anchor=\"bottom\"]) > main {\n            padding-bottom: env(safe-area-inset-bottom);\n        }\n\n        :host([open]) {\n            opacity: 1;\n        }\n\n        :host([open]) > main {\n            opacity: 1;\n            transform: none !important;\n        }\n\n        :host([anchor=\"right\"]) > main {\n            transform: translateX(100px);\n            height: 100%;\n        }\n\n        :host([anchor=\"left\"]) > main {\n            right: auto;\n            left: 0;\n            transform: translateX(-100px);\n            height: 100%;\n        }\n\n        :host([anchor=\"center\"]) > main,\n        :host([anchor=\"top\"]) > main,\n        :host([anchor=\"bottom\"]) > main {\n            position: relative;\n            margin: auto auto;\n            transform: translateY(100px);\n        }\n\n        :host([anchor=\"center\"]) > main {\n            border-radius: var(--radius);\n        }\n\n        :host([anchor=\"center\"][animation=\"scale\"]) > main {\n            transform: scale(.5);\n        }\n\n        :host([anchor=\"center\"][animation=\"fade\"]) > main {\n            transform: none;\n        }\n\n        :host([anchor=\"top\"]) > main {\n            margin-top: 0;\n            transform: translateY(-100px);\n            border-radius: 0 0 var(--radius) var(--radius);\n        }\n\n        :host([anchor=\"bottom\"]) > main {\n            margin-bottom: 0;\n        }\n\n        .backdrop {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n        }\n\n        .modal-close-btn {\n            position: absolute;\n            top: 0;\n            right: 0;\n            z-index: 10000;\n            transform: translate(50%, -50%);\n        }\n\n        main > slot::slotted(*) {\n            width: 100%;\n            /* display: grid;\n            grid-template-rows: auto 1fr; */\n        }\n\n        main > slot::slotted(.dialog) {\n            font-size: 1.1em;\n        }\n\n        main > slot::slotted(b-embed) {\n            border-radius: var(--radius);\n            overflow: hidden;\n        }\n\n        main {\n            display: grid;\n        }\n\n        main > section {\n            padding: 1em;\n        }\n\n        @media print {\n            :host {\n                background: none;\n                position: static;\n            }\n\n            :host(:not([ontop])) {\n                display: none !important;\n            }\n\n            :host > main {\n                width: 100% !important;\n                border-radius: 0;\n                box-shadow: none;\n            }\n        }\n\n        @keyframes bounce {\n            from,\n            20%,\n            53%,\n            80%,\n            to {\n                -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            40%,\n            43% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -30px, 0);\n                transform: translate3d(0, -30px, 0);\n            }\n\n            70% {\n                -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n                -webkit-transform: translate3d(0, -15px, 0);\n                transform: translate3d(0, -15px, 0);\n            }\n\n            90% {\n                -webkit-transform: translate3d(0, -4px, 0);\n                transform: translate3d(0, -4px, 0);\n            }\n        }\n\n        @keyframes shake {\n            from,\n            to {\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n            }\n\n            15%,\n            45%,\n            75% {\n                -webkit-transform: translate3d(-10px, 0, 0);\n                transform: translate3d(-10px, 0, 0);\n            }\n\n            30%,\n            60%,\n            90% {\n                -webkit-transform: translate3d(10px, 0, 0);\n                transform: translate3d(10px, 0, 0);\n            }\n        }\n\n        .bounce {\n            animation-name: bounce;\n            transform-origin: center bottom;\n            animation-duration: 1s;\n            animation-fill-mode: both;\n        }\n\n        .shake {\n            animation-name: shake;\n            animation-duration: 700ms;\n            animation-fill-mode: both;\n        }\n    `}\n}\n\ncustomElements.define('b-panel', Panel)\n\nexport default customElements.get('b-panel')","\nconst btnPresets = {\n\t'dismiss': {label: 'Dismiss'},\n\t'cancel': {label: 'Cancel'},\n\t'no': {label: 'No'},\n\t'done': {label: 'Done'},\n\t'ok': {label: 'Okay', color: 'primary'},\n\t'yes': {label: 'Yes', color: 'primary'},\n\t'save': {label: 'Save', color: 'primary'},\n\t'create': {label: 'Create', color: 'primary'},\n\t'delete': {label: 'Delete', color: 'red'}\n}\n\nexport const cancelBtns = ['dismiss', 'cancel', 'no']\n\nexport default function makeBtn(opts={}, i){\n\t\n\tif( typeof opts == 'string' ){\n\t\tif( !btnPresets[opts] )\n\t\t\treturn console.warn('Button preset `'+opts+'` does not exist')\n\t\t\n\t\topts = btnPresets[opts]\n\t}\n\t\n\tlet {\n\t\tlabel='',\n\t\tclassName='',//'text-btn fw-bold',\n\t\tcolor='',\n\t\ticon='',\n\t\ttext=true\n\t} = opts;\n\t\n\t// icon = icon ? 'icon-'+icon : ''\n\t\n\treturn `<b-btn ${text&&'text'} icon=\"${icon}\" color=\"${color}\" class=\"${className}\">${label}</b-btn>`\n\n\t// return `<span class=\"btn ${className} ${color} ${icon}\">${label}</span>`\n}","import {render, TemplateResult} from 'lit-html';\nimport device from '../../util/device';\nimport Panel from '../panel'\nimport Popover from '../popover'\nimport makeBtn, {cancelBtns} from './make-btn'\n\n// FIXME: this module needs to be refactored using lit-element to better apply styles\nconst styles = require('./style.less')\n\nexport default class Dialog {\n\tconstructor(opts={}){\n\t\t\n\t\tthis.opts = opts = Object.assign({\n\t\t\ticon:'',\n\t\t\ttitle:'',\n\t\t\tmsg:'',\n\t\t\tview: null,\n\t\t\tw: null,\n\t\t\tbtns:['dismiss'],\n\t\t\tclassName: '',\n\t\t}, opts)\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\t\n\t\topts.className += ' nopadding dialog'\n\n\t\tif( this.opts.icon )\n\t\t\topts.className += ' sideicon'\n\n\t\topts.className.split(' ').forEach(className=>className&&this.el.classList.add(className));\n\n\t\tlet [iconName, iconClass] = (opts.icon||'').split(' ')\n\t\t\n\t\tlet icon = opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''}\"></b-icon>` : ''\n\t\tlet btns = opts.btns ? opts.btns.map(btn=>btn&&makeBtn(btn)).join(\"\\n\") : ''\n\n\t\tif( opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\telse if( opts.icon && opts.icon[0] == '<' )\n\t\t\ticon = opts.icon\n\t\telse if( customElements.get(opts.icon) )\n\t\t\ticon = `<${opts.icon}></${opts.icon}>`\n\n\t\tthis.el.innerHTML = `${typeof styles === 'string'?`<style>${styles}</style>`:''}\n\t\t\t\t\t\t\t<div class=\"d-icon\">${icon}</div>\n\t\t\t\t\t\t\t<h2 class=\"d-title\">${opts.title}</h2>\n\t\t\t\t\t\t\t<div class=\"d-msg\">${opts.msg}</div>\n\t\t\t\t\t\t\t<div class=\"d-btns\">${btns}</div>`;\n\t\tif(opts.msg instanceof TemplateResult){\n\t\t\trender(opts.msg, this.el.querySelector('.d-msg'));\n\t\t}\n\t\t\n\t\tif( this.opts.w )\n\t\t\tthis.el.style.width = (typeof this.opts.w == 'number') ? this.opts.w+'px' : this.opts.w;\n\t\t\n\t\tif( this.opts.view ){\n\t\t\tif( !this.opts.icon && !this.opts.title && !this.opts.msg ){\n\n\t\t\t\tif( this.opts.view instanceof HTMLElement ){\n\t\t\t\t\tthis.el.innerHTML = `<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t\tthis.el.prepend(this.opts.view)\n\t\t\t\t}else{\n\t\t\t\t\tthis.el.innerHTML = `${this.opts.view}<div class=\"d-btns\">${btns}</div>`\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.el.querySelector('.d-msg').classList.add('custom-view')\n\t\t\t\tthis.el.querySelector('.d-msg').appendChild(this.opts.view)\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this), true)\n\t\t\n\t\tthis.promise = new Promise(resolve=>{ this._resolve = resolve })\n\t}\n\n\tset title(str){\n\t\tthis.opts.title = str\n\t\tlet el = this.el.querySelector('.d-title')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset msg(str){\n\t\tthis.opts.msg = str\n\t\tlet el = this.el.querySelector('.d-msg')\n\t\tif( el )\n\t\t\tel.innerHTML = str\n\t}\n\n\tset btns(btns){\n\t\tthis.opts.btns = btns\n\t\tbtns = btns ? btns.map(btn=>makeBtn(btn)).join(\"\\n\") : ''\n\t\tlet el = this.el.querySelector('.d-btns')\n\t\tif( el )\n\t\t\tel.innerHTML = btns\n\t}\n\n\tset icon(icon){\n\t\tthis.opts.icon = icon\n\t\tlet [iconName, iconClass] = (icon||'').split(' ')\n\t\ticon = this.opts.icon ? `<b-icon name=\"${iconName}\" class=\"${iconClass||''} animated speed-2 flipInY\"></b-icon>` : ''\n\n\t\tif( this.opts.icon === 'spinner' )\n\t\t\ticon = `<b-spinner></b-spinner>`\n\t\t\n\t\tlet el = this.el.querySelector('.d-icon')\n\t\tif( el )\n\t\t\tel.innerHTML = icon\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet el = e.target\n\t\t\n\t\tif( el.tagName == 'B-BTN' ){\n\t\t\t\n\t\t\tlet index = Array.from(el.parentElement.children).indexOf(el)\n\t\t\tlet btnInfo = this.opts.btns[index]\n\t\t\tthis.resolveBtn(btnInfo)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\t\t\n\t\tlet btnInfo = undefined\n\t\n\t\tif( e.code == 'Escape' ){\n\t\t\tbtnInfo = this.opts.btns.find(btn=>cancelBtns.includes(btn))\n\t\t\n\t\t}else if( e.code == 'Enter' ){\n\t\t\tbtnInfo = this.opts.btns.reverse().find(btn=>!cancelBtns.includes(btn))\n\t\t}\n\t\t\n\t\tif( btnInfo != undefined ){\n\n\t\t\t// let other views finish with keydown before we process (ex: Dialog.prompt)\n\t\t\tsetTimeout(()=>{\n\t\t\t\tif( document.activeElement == document.body )\n\t\t\t\t\tthis.resolveBtn(btnInfo)\n\t\t\t}, 0);\n\t\t}\n\t}\n\t\n\tresolveBtn(btnInfo){\n\t\tif( cancelBtns.includes(btnInfo) )\n\t\t\tbtnInfo = false\n\t\t\n\t\tif( this.resolve(btnInfo) === true )\n\t\t\tthis.close()\n\t}\n\t\n\tresolve(resp){\n\t\tif( this.opts.onResolve ){\n\t\t\t\n\t\t\ttry{\n\t\t\t\tresp = this.opts.onResolve(resp, this)\n\t\t\t}catch(err){\n\t\t\t\tconsole.log('failed to resolve');\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( this._resolve )\n\t\t\tthis._resolve(resp)\n\t\t\t\n\t\treturn true\n\t}\n\t\n\tclose(){\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\t$(str){\n\t\treturn this.el.querySelector(str)\n\t}\n\t\n\t$$(str){\n\t\treturn this.el.querySelectorAll(str)\n\t}\n\t\n\t/*\n\t\tPresenters\n\t*/\n\tpopover(target, opts={}){\n\n\t\tif( opts.adjustForMobile && device.is_mobile )\n\t\t\treturn this.modal((typeof opts.adjustForMobile == 'object' ? opts.adjustForMobile : {}))\n\t\t\n\t\tif( target.currentTarget )\n\t\t\ttarget = target.currentTarget\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\n\t\t// layout timing issue on Safari (mac and iOS)... this will fix it for now\n\t\tsetTimeout(()=>{\n\t\t\tthis.presenter._updatePosition()\n\t\t})\n\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}, mobileOpts){\n\t\tif( mobileOpts && device.isMobile )\n\t\t\treturn this.panel(mobileOpts)\n\t\telse\n\t\t\treturn this.panel(opts)\n\t}\n\n\tactionsheet(opts={}){\n\t\treturn this.panel(Object.assign({\n\t\t\ttype: 'actionsheet'\n\t\t}, opts))\n\t}\n\n\tpanel(opts={}){\n\n\t\topts = Object.assign({\n\t\t\ttype: 'modal',\n\t\t\tanimation: 'scale',\n\t\t\tdisableBackdropClick: true\n\t\t}, opts)\n\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\tthis.resolve(false)\n\t\t}\n\n\t\tthis.presenter = new Panel(this.el, opts)\n\t\tthis.presenter.open()\n\t\treturn this.promise\n\t}\n\t\n\tnotif(opts){\n\t\topts = Object.assign({\n\t\t\tautoClose: this.opts.btns ? false : 3000,\n\t\t\tclickRemoves: !this.opts.btns,\n\t\t\tonAutoClose: ()=>{ this.resolve(false) }\n\t\t}, opts)\n\t\t\n\t\tthis.presenter = app.msgs.add(this.el, opts)\n\t\treturn this.promise\n\t}\n}","\nconst Dialog = require('./dialog').default;\n\nmodule.exports = Dialog\n\nDialog.waiting = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'spinner',\n\t\ttitle: 'Processing...',\n\t\tmsg: '',\n\t\tbtns: false\n  \t}, opts))\n}\n\nDialog.confirm = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\t// icon: 'trash text-red',\n\t\ttitle: 'Continue?',\n\t\tmsg: 'Are you sure?',\n\t\tbtns: ['cancel', 'ok']\n  \t}, opts))\n}\n\nDialog.confirmDelete = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: opts.title||opts.msg?'trash red':'',\n\t\tbtns: ['cancel', 'delete']\n  \t}, opts))\n}\n\nDialog.alert = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'info-circled',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.error = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'alert red',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.warn = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'attention-1 orange',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.success = function(opts={}){\n\treturn new Dialog(Object.assign({\n\t\ticon: 'ok-circled green',\n\t\ttitle: 'Success',\n\t\tbtns: ['dismiss']\n  \t}, opts))\n}\n\nDialog.prompt = function(opts={}){\n\t\n\topts = Object.assign({\n\t\tval: '',\n\t\tmsg: '',\n\t\tprefix: '',\n\t\tsuffix: '',\n\t\tpattern: '',\n\t\thtml: false,\n\t\trequired: false,\n\t\tlabel: '',\n\t\tplaceholder: '',\n\t\thelpText: '',\n\t\tw: 300,\n\t\ttype: '',\n\t\tmultiline: false,\n\t\tmultiple: false,\n\t\tbtns: ['cancel', 'save']\n\t}, opts)\n\t\n\tif( opts.msg )\n\t\topts.msg = `<div>${opts.msg}</div>`\n\t\t\n\topts.onResolve = function(resp, dialog){\n\t\t\n\t\tlet control = dialog.$('form-control')\n\t\t\n\t\tif( !resp ) return opts.btns.length > 2 ? [resp] : resp\n\t\t\n\t\tif( control.isInvalid )\n\t\t\tthrow Error('Invalid data')\n\t\t\n\t\tlet val = opts.html ? control.value : (control.control.textValue || control.value)\n\t\t\n\t\treturn opts.btns.length > 2 ? [resp, val] : val\n\t}\n\t\n\tlet prefix = ''\n\tlet suffix = ''\n\t\n\tif( opts.prefix.match(/^icon/) ){\n\t\tprefix = `<span slot=\"prefix\" class=\"${opts.prefix}\"></span>`\n\t\topts.prefix = ''\n\t}\n\t\n\tif( opts.suffix.match(/^icon/) ){\n\t\tsuffix = `<span slot=\"suffix\" class=\"${opts.suffix}\"></span>`\n\t\topts.suffix = ''\n\t}\n\t\n\tlet control = `<text-field\n\t\tpattern=\"${opts.pattern}\"\n\t\tplaceholder=\"${opts.placeholder}\"\n\t\t${opts.html?'html':''}\n\t\t${opts.multiline?'multiline':''}\n\t\t${opts.required?'required':''}>${opts.val}</text-field>`\n\t\n\tif( opts.type )\n\t\tcontrol = `<input\n\t\t\t\t\tslot=\"control\"\n\t\t\t\t\ttype=${opts.type} \n\t\t\t\t\tpattern=\"${opts.pattern}\" \n\t\t\t\t\tplaceholder=\"${opts.placeholder}\"\n\t\t\t\t\tvalue=\"${opts.val}\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t${opts.required?'required':''}>`\n\n\tif( opts.options )\n\t\tcontrol = `<select-field\n\t\t\t\t\tplaceholder=\"${opts.placeholder}\"\n\t\t\t\t\t${opts.multiple?'multiple':''}\n\t\t\t\t\t></select-field>`\n\t\n\topts.msg += `\n\t\t\t<form-control material=\"filled\" \n\t\t\t${opts.label?`label=\"${opts.label}\"`:''} \n\t\t\tshow=\"suffix prefix\"\n\t\t\tprefix=\"${opts.prefix}\"\n\t\t\tsuffix=\"${opts.suffix}\">\n\t\t\t\t${control}\n\t\t\t\t<div slot=\"help\">${opts.helpText}</div>\n\t\t\t\t${prefix}\n\t\t\t\t${suffix}\n\t\t\t</form-control>\n\t\t\t`\n\t\n\tlet dialog = new Dialog(opts)\n\t\n\tcontrol = dialog.$('form-control')\n\n\tlet onSubmit = (e)=>{\n\t\tif( ['TEXT-FIELD', 'INPUT'].includes(e.target.tagName) ){\n\t\t\tcontrol.control.blur()\n\t\t\tcontrol.removeEventListener('change', onSubmit)\n\t\t}\n\t}\n\n\tcontrol.addEventListener('change', onSubmit)\n\t\n\tif( opts.options )\n\t\tcontrol.options = opts.options\n\t\n\tsetTimeout(function(){\t\n\t\tcontrol.focus()\n\t},500)\n\t\n\treturn dialog\n}\n","/*!\n * Fuse.js v3.4.5 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"Fuse\",[],t):\"object\"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),a=n(8),s=n(0),c=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.caseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m,S=n.id,x=void 0===S?null:S,b=n.keys,M=void 0===b?[]:b,_=n.shouldSort,L=void 0===_||_,w=n.getFn,A=void 0===w?a:w,C=n.sortFn,I=void 0===C?function(e,t){return e.score-t.score}:C,O=n.tokenize,j=void 0!==O&&O,P=n.matchAllTokens,F=void 0!==P&&P,T=n.includeMatches,z=void 0!==T&&T,E=n.includeScore,K=void 0!==E&&E,$=n.verbose,J=void 0!==$&&$;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k,id:x,keys:M,includeMatches:z,includeScore:K,shouldSort:L,getFn:A,sortFn:I,verbose:J,tokenize:j,matchAllTokens:F},this.setCollection(t)}var t,n,c;return t=e,(n=[{key:\"setCollection\",value:function(e){return this.list=e,e}},{key:\"search\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\\nSearch pattern: \"'.concat(e,'\"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,o=n.fullSearcher,i=this._search(r,o),a=i.weights,s=i.results;return this._computeScore(a,s),this.options.shouldSort&&this._sort(s),t.limit&&\"number\"==typeof t.limit&&(s=s.slice(0,t.limit)),this._format(s)}},{key:\"_prepareSearchers\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:\"_search\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},o=[];if(\"string\"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:\"\",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},c=0,h=n.length;c<h;c+=1)for(var l=n[c],u=0,f=this.options.keys.length;u<f;u+=1){var d=this.options.keys[u];if(\"string\"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error(\"Key weight has to be > 0 and <= 1\");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:c},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:\"_analyze\",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,i=e.value,a=e.record,c=e.index,h=t.tokenSearchers,l=void 0===h?[]:h,u=t.fullSearcher,f=void 0===u?[]:u,d=t.resultMap,v=void 0===d?{}:d,p=t.results,g=void 0===p?[]:p;if(null!=i){var y=!1,m=-1,k=0;if(\"string\"==typeof i){this._log(\"\\nKey: \".concat(\"\"===n?\"-\":n));var S=f.search(i);if(this._log('Full text: \"'.concat(i,'\", score: ').concat(S.score)),this.options.tokenize){for(var x=i.split(this.options.tokenSeparator),b=[],M=0;M<l.length;M+=1){var _=l[M];this._log('\\nPattern: \"'.concat(_.pattern,'\"'));for(var L=!1,w=0;w<x.length;w+=1){var A=x[w],C=_.search(A),I={};C.isMatch?(I[A]=C.score,y=!0,L=!0,b.push(C.score)):(I[A]=1,this.options.matchAllTokens||b.push(1)),this._log('Token: \"'.concat(A,'\", score: ').concat(I[A]))}L&&(k+=1)}m=b[0];for(var O=b.length,j=1;j<O;j+=1)m+=b[j];m/=O,this._log(\"Token score average:\",m)}var P=S.score;m>-1&&(P=(P+m)/2),this._log(\"Score average:\",P);var F=!this.options.tokenize||!this.options.matchAllTokens||k>=l.length;if(this._log(\"\\nCheck Matches: \".concat(F)),(y||S.isMatch)&&F){var T=v[c];T?T.output.push({key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}):(v[c]={item:a,output:[{key:n,arrayIndex:o,value:i,score:P,matchedIndices:S.matchedIndices}]},g.push(v[c]))}}else if(s(i))for(var z=0,E=i.length;z<E;z+=1)this._analyze({key:n,arrayIndex:z,value:i[z],record:a,index:c},{resultMap:v,results:g,tokenSearchers:l,fullSearcher:f})}}},{key:\"_computeScore\",value:function(e,t){this._log(\"\\n\\nComputing score:\\n\");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,i=o.length,a=1,s=1,c=0;c<i;c+=1){var h=e?e[o[c].key].weight:1,l=(1===h?o[c].score:o[c].score||.001)*h;1!==h?s=Math.min(s,l):(o[c].nScore=l,a*=l)}t[n].score=1===s?a:s,this._log(t[n])}}},{key:\"_sort\",value:function(e){this._log(\"\\n\\nSorting....\"),e.sort(this.options.sortFn)}},{key:\"_format\",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log(\"\\n\\nOutput:\\n\\n\",JSON.stringify(e,function(e,t){if(\"object\"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t})),n=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty(\"arrayIndex\")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var i=0,a=e.length;i<a;i+=1){var s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},h=0,l=o.length;h<l;h+=1)o[h](s,c);t.push(c)}else t.push(s.item)}return t}},{key:\"_log\",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,n),c&&o(t,c),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(3),i=n(4),a=n(7),s=function(){function e(t,n){var r=n.location,o=void 0===r?0:r,i=n.distance,s=void 0===i?100:i,c=n.threshold,h=void 0===c?.6:c,l=n.maxPatternLength,u=void 0===l?32:l,f=n.isCaseSensitive,d=void 0!==f&&f,v=n.tokenSeparator,p=void 0===v?/ +/g:v,g=n.findAllMatches,y=void 0!==g&&g,m=n.minMatchCharLength,k=void 0===m?1:m;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:p,findAllMatches:y,minMatchCharLength:k},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,n,s;return t=e,(n=[{key:\"search\",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return o(e,this.pattern,r);var a=this.options,s=a.location,c=a.distance,h=a.threshold,l=a.findAllMatches,u=a.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:u})}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t){var n=/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(n,\"\\\\$&\").replace(r,\"|\")),i=e.match(o),a=!!i,s=[];if(a)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];s.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(5),o=n(6);e.exports=function(e,t,n,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,f=i.findAllMatches,d=void 0!==f&&f,v=i.minMatchCharLength,p=void 0===v?1:v,g=s,y=e.length,m=u,k=e.indexOf(t,g),S=t.length,x=[],b=0;b<y;b+=1)x[b]=0;if(-1!==k){var M=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});if(m=Math.min(M,m),-1!==(k=e.lastIndexOf(t,g+S))){var _=r(t,{errors:0,currentLocation:k,expectedLocation:g,distance:h});m=Math.min(_,m)}}k=-1;for(var L=[],w=1,A=S+y,C=1<<S-1,I=0;I<S;I+=1){for(var O=0,j=A;O<j;){r(t,{errors:I,currentLocation:g+j,expectedLocation:g,distance:h})<=m?O=j:A=j,j=Math.floor((A-O)/2+O)}A=j;var P=Math.max(1,g-j+1),F=d?y:Math.min(g+j,y)+S,T=Array(F+2);T[F+1]=(1<<I)-1;for(var z=F;z>=P;z-=1){var E=z-1,K=n[e.charAt(E)];if(K&&(x[E]=1),T[z]=(T[z+1]<<1|1)&K,0!==I&&(T[z]|=(L[z+1]|L[z])<<1|1|L[z+1]),T[z]&C&&(w=r(t,{errors:I,currentLocation:E,expectedLocation:g,distance:h}))<=m){if(m=w,(k=E)<=g)break;P=Math.max(1,2*g-k)}}if(r(t,{errors:I+1,currentLocation:g,expectedLocation:g,distance:h})>m)break;L=T}return{isMatch:k>=0,score:0===w?.001:w,matchedIndices:o(x,p)}}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=r/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===r?r=i:s||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){var r=n(0);e.exports=function(e,t){return function e(t,n,o){if(n){var i=n.indexOf(\".\"),a=n,s=null;-1!==i&&(a=n.slice(0,i),s=n.slice(i+1));var c=t[a];if(null!=c)if(s||\"string\"!=typeof c&&\"number\"!=typeof c)if(r(c))for(var h=0,l=c.length;h<l;h+=1)e(c[h],s,o);else s&&e(c,s,o);else o.push(c.toString())}else o.push(t);return o}(e,t,[])}}])});","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\topacity: 0;\n\tposition: absolute;\n\t/* left: -7px;\n\ttop: -7px;\n\twidth: 48px;\n\theight: 48px; */\n\twidth: 120%;\n\theight: 120%;\n\tleft: -10%;\n\ttop: -10%;\n\tdisplay: block;\n\tz-index: 100;\n\tbackground: currentColor;\n\tborder-radius: 50px;\n}\n\n:host(.enter) {\n\topacity: 0.3;\n\t/* transform: scale(.5); */\n\tanimation: ripple-enter 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-enter;\n}\n\n:host(.exit) {\n\topacity: 0;\n\t/* transform: scale(1); */\n\tanimation: ripple-exit 550ms cubic-bezier(0.4, 0, 0.2, 1);\n\tanimation-name: ripple-exit;\n}\n\n\n@-webkit-keyframes ripple-enter {\n  0% {\n    opacity: 0.1;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n}\n@-webkit-keyframes ripple-exit {\n  0% {\n    opacity: .3;\n\ttransform: scale(.7);\n  }\n  100% {\n    opacity: 0;\n\ttransform: scale(1.2);\n  }\n}\n@-webkit-keyframes ripple-pulsate {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.92);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n`\n\nclass TouchRippleElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t}\n\n\tripple(){\n\t\tthis.animate('exit')\n\t}\n\t\n\tenter(){\n\t\tthis.classList.add('enter')\n\t}\n\t\n\thide(){\n\t\tthis.classList.remove('exit')\n\t\tthis.classList.remove('enter')\n\t}\n\t\n\tanimate(str){\n\t\tthis.hide()\n\t\tthis.classList.add(str)\n\t\tsetTimeout(()=>this.classList.remove(str), 550)\n\t}\n\t\n}\n\ncustomElements.define('touch-ripple', TouchRippleElement)\n\nexport default customElements.get('touch-ripple')\n","import {css} from 'lit-element'\nimport './touch-ripple'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: var(--fc-theme);\n\t--colorDisabled: var(--fc-disabled-color, rgba(0, 0, 0, 0.26));\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tflex-grow: 0 !important;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tcursor: pointer;\n\toutline: none;\n}\n\n:host([checked]) svg.uncheck,\n:host(:not([checked])) svg.check {\n\tdisplay: none\n}\n\nmain {\n\tposition: relative;\n\tdisplay: inherit;\n}\n\n:host([placement=\"top\"]) { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) { flex-direction: column; }\n:host([placement=\"left\"]) { flex-direction: row-reverse; }\n:host([placement=\"right\"]) { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\n.switch {\n\tdisplay: none\n}\n\n:host([type=\"switch\"]) svg { display: none; }\n\n:host([type=\"switch\"]) .switch {\n\tdisplay: inline-block;\n}\n\n:host([checked]) {\n\tcolor: var(--color)\n}\n\n:host([disabled]) {\n\tcursor: default;\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled)\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nmain label {\n\tcursor: pointer;\n}\n\n.indeterminate {\n\tdisplay: none;\n}\n\n.switch {\n\tposition: relative;\n\talign-items: center;\n\tmargin: .5em;\n}\n\n.switch:before, .switch:after {\n\tcontent: \"\";\n\tmargin: 0;\n\toutline: 0;\n\ttransition: all 0.3s ease;\n}\n\n.switch:before {\n\tdisplay: block;\n\twidth: 2em;\n\theight: 1em;\n\tbackground-color: #9E9E9E;\n\tborder-radius: 1em;\n}\n\n.switch:after {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 50%;\n\ttransform: translate(0, -50%);\n\twidth: 1.3em;\n\theight: 1.3em;\n\tbackground-color: #FAFAFA;\n\tborder-radius: 50%;\n\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.14), 0 2px 2px 0 rgba(0, 0, 0, 0.098), 0 1px 5px 0 rgba(0, 0, 0, 0.084);\n}\n\n\n:host([checked]) .switch:before {\n\tbackground-color: var(--color);\n\topacity: .5\n}\n\n:host([checked]) .switch:after {\n\tbackground-color: var(--color);\n\ttransform: translate(80%, -50%);\n}\n`\n\nclass CheckBoxElement extends HTMLElement {\n\n\tget key(){ return this.getAttribute('key')}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `\n\t\t\t<style>\n\t\t\t${styles.cssText}\n\t\t\t</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"uncheck\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"></path></svg>\n\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t<div class=\"switch\"></div>\n\t\t\t\t<touch-ripple></touch-ripple>\n\t\t\t</main>\n\t\t\t<label>${label}</label>\n\t\t\t`\n\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis.ripple = this.shadowRoot.querySelector('touch-ripple')\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['Space', 'Enter'].includes(e.code) )\n\t\t\t\tthis._onClick()\n\t\t})\n\t\t\n\t\tthis.addEventListener('focus', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.enter()\n\t\t})\n\t\t\n\t\tthis.addEventListener('blur', e=>{\n\t\t\tif( e.relatedTarget && e.relatedTarget != this)\n\t\t\t\tthis.ripple.hide()\n\t\t})\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.ripple.ripple()\n\t\t\n\t\tthis.checked = !this.checked\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.checked\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t\t\n\t\t// this.blur()\n\t}\n\t\n\tset checked(val){\n\t\tif( val === '0' || val === '' ) val = false\n\t\tval ? this.setAttribute('checked', '') : this.removeAttribute('checked')\n\t}\n\t\n\tget checked(){ return this.hasAttribute('checked') }\n\tget value(){ return this.checked }\n\tset value(val){ this.checked = val }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('check-box', CheckBoxElement)\n\nexport default customElements.get('check-box')\n","/*\n\tSelect Field\n*/\nimport {css} from 'lit-element'\nimport Menu from '../../menu'\nimport device from '../../../util/device';\n\nconst styles = css`\n\n:host(:not([disabled])) {\n\tcursor: pointer;\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 1em;\n\tposition: relative;\n}\n\nmain > svg {\n\theight: 1em;\n\twidth: 1em;\n\tflex-shrink: 0;\n\tfill: var(--theme-color-accent, #333);\n}\n\nslot#options {\n\tdisplay: none;\n}\n\nmain input {\n\tposition: absolute;\n\tz-index: -1;\n\topacity: 0;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n}\n\n\n#value {\n\tflex-grow: 1;\n\tmin-width: 1em;\n}\n\n#value:empty:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n}\n\n#value > span {\n\tdisplay: inline-block;\n\tpadding: 0;\n    min-width: 1em;\n\tvertical-align: bottom;\n}\n\n:host(:not([chip])) #value > span:not(:last-child):after {\n\tcontent: ', ';\n\tmargin-right: .5em;\n}\n\n:host([chip]) #value {\n\tmargin-top: -.15em;\n\tmargin-bottom: -.15em;\n}\n\n:host([chip]) #value > span {\n\tbackground: rgba(0,0,0,.1);\n    margin: .1em;\n    padding: .15em .5em;\n    border-radius: 20px;\n\tline-height: 1em;\n\tdisplay: inline-flex;\n\tjustify-content: center;\n\talign-items: center;\n}`\n\nclass SelectFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\tlet arrow = this.hasAttribute('no-arrow') ? '' : '<svg focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M7 10l5 5 5-5z\"></path></svg>'\n\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<input type=\"input\" readonly=\"true\"/>\n\t\t\t\t<div id=\"value\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t${arrow}\n\t\t\t</main>\n\t\t\t<slot id=\"options\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._input = this.$('input')\n\t\tthis._value = this.$('#value')\n\t\tthis._selected = []\n\t\t\n\t\tlet options = this.$('#options')\n\t\tthis.options = []\n\t\t\n\t\toptions.assignedNodes&&options.assignedNodes().map(el=>{\n\n\t\t\tif( !el.tagName ) return // skip comments and empty text blocks\n\t\t\t\n\t\t\tif( el.tagName == 'HR' )\n\t\t\t\treturn this.options.push('divider')\n\t\t\t\n\t\t\tif( el.tagName == 'OPTGROUP' )\n\t\t\t\treturn this.options.push({'divider': el.innerHTML})\n\t\t\t\n\t\t\tif( el.tagName != 'OPTION'){\n\t\t\t\treturn this.options.push({'text': el.innerHTML})\n\t\t\t}\n\t\t\t\n\t\t\tif( el.hasAttribute('selected') )\n\t\t\t\tthis._selected.push(el.value)\n\t\t\t\n\t\t\tlet attrs = {}\n\t\t\t\n\t\t\tArray.from(el.attributes).forEach(attr=>{\n\t\t\t\tif( !['value', 'selected'].includes(attr.name) )\n\t\t\t\t\tattrs[attr.name] = attr.value\n\t\t\t})\n\t\t\t\n\t\t\tthis.options.push(Object.assign(attrs, {\n\t\t\t\tlabel: el.innerHTML,\n\t\t\t\tval: el.value||null\n\t\t\t}))\n\t\t})\n\t\t\n\t\tthis.addEventListener('click', this.focus.bind(this))\n\t\tthis.addEventListener('keypress', this.onKeypress.bind(this))\n    }\n\t\n\tonKeypress(e){\n\t\tif( e.code == 'Space' ){\n\t\t\tthis.toggleMenu()\n\t\t}\n\t}\n\n\tstatic get observedAttributes() { return ['disabled']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\tif( name === 'disabled' )\n\t\t\tthis._input.disabled = this.disabled\n\t}\n\t\n\tsetAttributes(){\n\t\t\n\t\tif( this.isEmpty && !this.showEmpty && !this.getAttribute('placeholder') )\n\t\t\tthis.setAttribute('empty', true)\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis.selected = this._selected\n\t}\n\tdisconnectedCallback(){}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n\tget multiple(){ return this.hasAttribute('multiple') }\n\tget showEmpty(){ return this.hasAttribute('show-empty') }\n\t\n\tget value(){\n\t\tif( this.multiple )\n\t\t\treturn this.selected && this.selected.map(m=>m.val)\n\t\telse\n\t\t\treturn this.selected && this.selected.val\n\t}\n\t\n\tset value(val){\n\t\tthis.selected = val\n\t}\n\t\n\tget isEmpty(){\n\t\tlet val = this.value\n\t\treturn this.multiple ? val.length <= 1 && !val[0] : !val\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\n\tset options(opts){\n\n\t\tif( opts instanceof Promise ){\n\t\t\topts.then(result=>{\n\t\t\t\tthis.options = result\n\t\t\t\treturn result\n\t\t\t})\n\t\t\topts = [] // clear options until promise resolves\n\t\t}\n\n\t\tif( Array.isArray(opts) )\n\t\t\topts = opts.map(o=>{\n\t\t\t\tif( typeof o != 'object' )\n\t\t\t\t\treturn {label: o, val: o}\n\t\t\t\treturn o\n\t\t\t})\n\t\telse if( typeof opts == 'object' ){\n\t\t\tlet _opts = []\n\t\t\tfor( let k in opts ){\n\t\t\t\t_opts.push({label: opts[k], val: k})\n\t\t\t}\n\t\t\topts = _opts\n\t\t}\n\n\t\tthis.__options = opts\n\t\tthis.selected = this._selected\n\t}\n\tget options(){ return this.__options}\n\t\n\tset selected(val){\n\t\t\n\t\tthis._oldSelected = this._selected.slice(0)\n\t\t\n\t\tif( val === undefined || val === null ) val = []\n\t\telse if( !Array.isArray(val) ) val = [String(val)]\n\t\t\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn val.includes(m.val) || (val.length == 0 && !m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn val.indexOf(a.val) - val.indexOf(b.val)\n\t\t})\n\t\t\n\t\tthis._selected = []\n\n\t\t// if no options, keep the selected value\n\t\t// FIXME: could be improved with the `labels`\n\t\tif( this.options.length == 0 )\n\t\t\tthis._selected = val\n\t\t\n\t\tlet labels = ''\n\t\t\n\t\tselected.forEach(m=>{\n\t\t\t\n\t\t\tthis._selected.push(m.val)\n\t\t\t\n\t\t\tif(m.val || this.showEmpty)\n\t\t\t\tlabels += `<span value=\"${m.val}\">${m.label}</span>`\n\t\t\t\t\n\t\t})\n\t\t\n\t\tthis._value.innerHTML = labels\n\n\t\tthis.setAttribute('value', val.join(','))\n\t\t\n\t\tthis.setAttributes()\n\t}\n\t\n\tget selected(){\n\t\tlet selected = this.options.filter(m=>{\n\t\t\treturn this._selected.includes(m.val)\n\t\t})\n\n\t\t// keep selected values in the order that they were selected\n\t\tselected = selected.sort((a,b)=>{\n\t\t\treturn this._selected.indexOf(a.val) - this._selected.indexOf(b.val)\n\t\t})\n\t\t\n\t\treturn this.multiple ? selected : selected[0]\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._input || this.hasAttribute('focused')\n\t}\n\t\n\tfocus(){\n\t\tthis.toggleMenu()\n\t}\n\t\n\tset focused(focused){\n\t\tif( focused ){\n\t\t\tthis._input.focus()\n\t\t\tthis.setAttribute('focused', '')\n\t\t}else{\n\t\t\tthis._input.blur()\n\t\t\tthis.removeAttribute('focused')\n\t\t}\n\t}\n\n\tasync toggleMenu(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tif( this.openMenu ){\n\t\t\tthis.openMenu.resolve(false)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tthis.focused = true\n\t\t\n\t\tlet menuOpts = {\n\t\t\tminW: this.offsetWidth,\n\t\t\tselected: this._selected,\n\t\t\tmultiple: this.multiple ? 'always' : false,\n\t\t\tjumpNav: this.hasAttribute('jump-nav'),\n\t\t\t\n\t\t\t// only called when in multiple mode\n\t\t\tonSelect: selected=>{\n\t\t\t\tthis.selected = selected.map(m=>m.val)\n\t\t\t}\n\t\t}\n\n\t\tif( this.getAttribute('search') == 'false' )\n\t\t\tmenuOpts.search = false\n\t\t\n\t\tlet menu = this.options\n\t\tlet popoverOpts = {\n\t\t\talign: this.getAttribute('menu-align') || 'bottom',\n\t\t\tmaxHeight: this.getAttribute('menu-max-height') || 'auto',\n\t\t\tmaxWidth: this.getAttribute('menu-max-width') || 'none',\n\t\t\toverflowBoundry: this.getAttribute('menu-overflow') ? 'window' : null,\n\t\t\tadjustForMobile: this.getAttribute('adjust-for-mobile') == 'false' ? false : {type:'actionsheet'}\n\t\t}\n\t\t\n\t\tif( !menu || menu.length == 0 )\n\t\t\tmenu = [{'divider': 'No options available'}]\n\t\t\t\n\t\tthis.openMenu = new Menu(menu, menuOpts)\n\t\t\n\t\tthis.openMenu.el.setAttribute('select-field', this.className)\n\n\t\tlet val = await this.openMenu.popover(this.$('main'), popoverOpts)\n\t\t\n\t\tthis.openMenu = null\n\t\tthis.focused = false\n\t\t\n\t\tif( !device.is_mobile )\n\t\t\tthis._input.focus() // retain focus\n\t\t\n\t\tif( val === false ) return\n\t\t\n\t\tval = this.multiple ? val : [val]\n\t\t\n\t\tthis.selected = val.map(m=>m.val)\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n}\n\ncustomElements.define('select-field', SelectFieldElement)\n\nexport default customElements.get('select-field')\n","import {html, render} from 'lit-html'\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html'\nimport Popover from '../popover'\nimport Dialog from '../dialog'\nimport Panel from '../panel'\nimport Fuse from 'fuse.js'\nimport '../form-control/controls/check-box'\nimport '../form-control/controls/select-field'\nimport device from '../../util/device';\n\nexport const DefaultOpts = {\n\tselected: false,\n\tmultiple: false,\n\tsearch: 20, // true (always show) or number of results for it to show\n\tminW: false,\n\twidth: null,\n\tautoSelectFirst: false,\n\tjumpNav: false, // true (always show) or number of results for it to show\n\ttypeDelay: 700, // how long until typed characters reset\n\thasMenuIcon: 'right-open',\n\tonSelect: ()=>{}\n}\n\nconst SearchDefaults = {\n\tplaceholder: 'Search',\n\ticon: 'search',\n\tparse: (row)=>{\n\t\treturn {\n\t\t\tlabel: row.label || row.name || row.title || 'Unknown',\n\t\t\tval: row.val || row.id || null,\n\t\t\tdescription: row.description || ''\n\t\t}\n\t}\n}\n\nconst styles = require('./style.less')\n\nexport default class Menu {\n\t\n\tconstructor(menu=[], opts={}){\n\t\t\n\t\tthis.el = document.createElement('div')\n\t\tthis.el.classList.add('b-menu')\n\t\tthis.el.classList.add('nopadding')\n\t\tthis.el.menu = this\n\n\t\tif( opts.className )\n\t\t\topts.className.split(' ').forEach(cn=>{\n\t\t\t\tthis.el.classList.add(cn.trim())\n\t\t\t})\n\t\t\n\t\tthis.opts = Object.assign({}, DefaultOpts, opts)\n\t\tthis.menu = menu\n\t\t\n\t\tif( opts.multiple == undefined && this.opts.selected instanceof Array )\n\t\t\tthis.opts.multiple = true\n\t\t\n\t\tlet selected = (this.opts.selected || [])\n\t\tif( Array.isArray(selected) ) selected = selected.slice(0) // clone\n\t\tthis.selected = selected\n\t\t\n\t\tif( this.opts.minW )\n\t\t\tthis.el.style.minWidth = this.opts.minW\n\t\t\n\t\tif( this.opts.maxW )\n\t\t\tthis.el.style.maxWidth = this.opts.maxW\n\t\t\n\t\tif( this.opts.width )\n\t\t\tthis.el.style.width = this.opts.width\n\t\t\n\t\tthis.el.addEventListener('click', this.onClick.bind(this))\n\t\t\n\t\tthis.promise = new Promise(resolve=>{this._resolve = resolve})\n\t}\n\n\tset menu(menu){\n\n\t\tif( typeof menu == 'function' )\n\t\t\tmenu = menu()\n\n\t\tthis.__menu = menu\n\n\t\tif( this.searchUrl && !this.__origMenu )\n\t\t\tthis.__origMenu = menu || []\n\n\t\tif( !this.searchUrl )\n\t\tthis.__fuse = new Fuse(this.__menu, {\n\t\t\tkeys: [{\n\t\t\t\tname: 'dataTitle',\n\t\t\t\tweight: 0.7\n\t\t\t},{\n\t\t\t\tname: 'label',\n\t\t\t\tweight: 0.5\n\t\t\t}, {\n\t\t\t\tname: 'description',\n\t\t\t\tweight: 0.3\n\t\t\t}],\n\t\t\tminMatchCharLength: 3,\n\t\t\tthreshold: 0.4,\n\t\t\tlocation: 0,\n\t\t\tdistance: 300,\n\t\t})\n\t}\n\n\tget menu(){\n\t\treturn this.__menu || []\n\t}\n\n\tget displayMenu(){\n\t\tif( this.__filteredMenu )\n\t\t\treturn this.__filteredMenu\n\t\t\n\t\tif( this.searchIsOn && !this.searchShouldShowAll )\n\t\t\treturn []\n\n\t\tif( this.searchIsOn && this.hideUnselected )\n\t\t\treturn this.menu.filter(m=>m.label===undefined || m.selected)\n\n\t\treturn this.menu\n\t}\n\n\tset selected(keys){\n\n\t\t// always store selected values as an array\n\t\tif( !Array.isArray(keys) )\n\t\t\tkeys = [keys]\n\n\t\tlet keyVals = keys.map(k=>k&&k.val||k)\n\n\t\t// store selected values as the actual values (not just the keys)\n\t\tthis.__selected = this.menu.filter(m=>{\n\n\t\t\tif( m.val === undefined ) return false\n\n\t\t\tlet matchedIndex = keyVals.indexOf(m.val)\n\n\t\t\t// select/deselect each value\n\t\t\tif( matchedIndex > -1 ){\n\t\t\t\tlet mergeData = keys[matchedIndex]\n\t\t\t\t\n\t\t\t\tif( mergeData && typeof mergeData == 'object' )\n                    Object.assign(m, mergeData)\n\n\t\t\t\tm.selected = true\n\n\t\t\t}else{\n\t\t\t\tdelete m.selected\n\t\t\t\tdelete m.selection\n\t\t\t}\n\t\t\t\n\t\t\treturn m.selected\n\t\t})\n\n\t\t// keep values in the order that they were selected\n\t\tthis.__selected = this.__selected.sort((a,b)=>{\n\t\t\treturn keyVals.indexOf(a.val) - keyVals.indexOf(b.val)\n\t\t})\n\t}\n\t\n\tget selected(){\n\t\treturn this.opts.multiple ? this.__selected : this.__selected[0]\n\t}\n\n\ttoggleSelected(item){\n\t\tlet index = this.__selected.indexOf(item)\n\t\t\t\t\n\t\tif( index > -1 && !item.selection ){\n\t\t\titem.selected = false\n\t\t\tthis.__selected.splice(index, 1)\n\t\t\treturn false\n\t\t}else{\n\t\t\titem.selected = true\n\t\t\tthis.__selected.push(item)\n\t\t\treturn true\n\t\t}\n\t}\n\n\tfocusSearch(){\n\t\tlet input = this.el.querySelector('.menu-search-bar input')\n\t\tinput&&input.focus()\n\t}\n\n\tget searchIsOn(){\n\t\tlet s = this.opts.search\n\t\treturn s === true \n\t\t|| (typeof s == 'object')\n\t\t|| (typeof s == 'number' && this.menu.length >= s)\n\t}\n\n\tget searchUrl(){\n\t\treturn this.opts.search&&this.opts.search.url\n\t}\n\n\tget searchShouldShowAll(){\n\t\treturn this.opts.search&&this.opts.search.showAll!==false\n\t}\n\n\tget hideUnselected(){\n\t\treturn this.opts.search&&this.opts.search.hideUnselected===true\n\t}\n\n\tget searchParse(){\n\t\tlet parse = this.opts.search&&this.opts.search.parse\n\t\tif( typeof parse !== 'function' )\n\t\t\tparse = SearchDefaults.parse\n\t\treturn parse\n\t}\n\n\tget searchIcon(){\n\t\treturn (this.opts.search&&this.opts.search.icon) || SearchDefaults.icon\n\t}\n\n\tget searchPlaceholder(){\n\t\treturn (this.opts.search&&this.opts.search.placeholder) || SearchDefaults.placeholder\n\t}\n\n\tget searchSpinner(){\n\t\treturn this.__searchSpinner = this.__searchSpinner || this.el.querySelector('.menu-search-bar b-spinner')\n\t}\n\n\tasync fetchResults(term){\n\n\t\t// already in process of looking up this term\n\t\tif( this._fetchingTerm === term )\n\t\t\treturn\n\n\t\tthis._fetchingTerm = term\n\n\t\tlet url = this.searchUrl\n\n\t\t// URL can be a dynamic function\n\t\tif( typeof url == 'function' )\n\t\t\turl = url(term)\n\t\telse\n\t\t\turl += term\n\n\t\tthis.searchSpinner.hidden = false\n\n\t\tlet resp = await fetch(url).then(resp=>resp.json())\n\n\t\t// looks like we started searching for another term before we got\n\t\t// this response back, so ignore the results\n\t\tif( this._fetchingTerm !== term )\n\t\t\treturn\n\n\t\t// parse the search results to fit the expected \"menu\" structure\n\t\tif( Array.isArray(resp) )\n\t\t\tthis.menu = resp.map(row=>this.searchParse(row)) \n\t\telse\n\t\t\tthis.menu = []\n\n\t\tthis._fetchingTerm = null\n\t\tthis.searchSpinner.hidden = true\n\n\t\tthis.render()\n\t}\n\n\tappendTo(el){\n\t\tel.appendElement(this.el)\n\t\tthis.render()\n\t}\n\n\trender(){\n\n\t\tlet showJumpNav = this.opts.jumpNav === true\n\t\t\t\t\t\t|| (typeof this.opts.jumpNav == 'number' && this.displayMenu.length >= this.opts.jumpNav)\n\n\t\tthis._active = this.opts.autoSelectFirst ? 0 : null\n\n\t\trender(html`\n\n\t\t\t${this.searchIsOn?html`\n\t\t\t\t<div class=\"menu-search-bar\">\n\t\t\t\t\t<b-icon name=\"${this.searchIcon}\"></b-icon>\n\t\t\t\t\t<b-spinner hidden></b-spinner>\n\t\t\t\t\t<input type=\"text\" placeholder=\"${this.searchPlaceholder}\">\n\t\t\t\t</div>\n\t\t\t`:''}\n\n\t\t\t<div class=\"results\">\n\t\t\t\t\n\t\t\t\t${showJumpNav?html`\n\t\t\t\t\t<alphabet-jump-nav>\n\t\t\t\t\t\t<span style=\"color: red\">'alphabet-jump-nav' custom element not loaded</span>\n\t\t\t\t\t</alphabet-jump-nav>`\n\t\t\t\t:''}\n\n\t\t\t\t${this.displayMenu.map((m,i)=>this.renderItem(m,i))}\n\t\t\t</div>\n\n\t\t`, this.el)\n\n\t\t// update popover position\n\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\tthis.presenter._updatePosition()\n\n\t\treturn this\n\t}\n\t\n\trenderItem(m, i){\n\t\t\n\t\tif( m == 'divider' || (m.label == 'divider' && m.val == 'divider') )\n\t\t\treturn html`<b-hr></b-hr>`\n\n\t\tif( m.divider )\n\t\t\treturn html`<div class=\"menu-divider\">${m.divider}</div>`\n\t\t\n\t\tif( m.text )\n\t\t\treturn html`<div class=\"menu-text\">${m.text}</div>`\n\t\t\n\t\tif( m.title )\n\t\t\treturn html`<div class=\"menu-title\"><h2>${m.title}</h2></div>`\n\n\t\t// capture menu item index for use in resolve (if so desired)\n\t\tm.index = i\n\n\t\tlet icon = ''\n\t\t\n\t\tif( m.icon && typeof m.icon == 'string' )\n\t\t\ticon = html`<b-icon name=\"${m.icon}\"></b-icon>`\n\t\telse if( m.icon ) \n\t\t\ticon = html`<span class=\"icon\">${m.icon}</span>`\n\n\t\tlet checkbox = (this.opts.multiple && !m.clearsAll) || m.selected ? html`<check-box ?checked=${m.selected}></check-box>` : ''\n\t\tlet menuIcon = m.menu && this.opts.hasMenuIcon ? html`<b-icon class=\"has-menu\" name=\"${this.opts.hasMenuIcon}\"></b-icon>` :''\n\n\t\tif( m.selections ){\n\t\t\tlet selections = m.selections\n\t\t\t\n\t\t\tif( this.opts.multiple)\n\t\t\t\tselections = [{label: 'unset', val:''}].concat(selections)\n\n\t\t\tcheckbox = html`<select-field \n\t\t\t\t\t\t\t.options=${selections} \n\t\t\t\t\t\t\tplaceholder=\"unset\"\n\t\t\t\t\t\t\t@change=${this.selectOptionsChanged.bind(this)}\n\t\t\t\t\t\t\t.selected=${m.selection}\n\t\t\t\t\t\t\t></select-field>`\n\t\t}\n\n\t\tif( m.attrs && typeof m.attrs == 'object' )\n\t\t\tconsole.warn('`attrs` unsupported right now')\n\t\t// TODO: support this some how?\n\t\t// if( m.attrs && typeof m.attrs == 'object' ){\n\t\t// \tfor(let key in m.attrs)\n\t\t// \t\tel.setAttribute(key, m.attrs[key])\n\t\t// }\n\n\t\tlet extras = ''\n\t\tif( m.extras ){\n\t\t\textras = m.extras\n\t\t\t\t.filter(elName=>customElements.get(elName))\n\t\t\t\t.map(elName=>{\n\t\t\t\t\tlet el = document.createElement(elName)\n\t\t\t\t\tel.item = m\n\t\t\t\t\tel.classList.add('menu-item-extra')\n\t\t\t\t\treturn el\n\t\t\t\t})\n\t\t}\n\n\t\tlet dataTitle = (m.dataTitle || m.label+' '+m.description).trim().toLowerCase()\n\n\t\tlet label = m.label && m.label.constructor.name == 'TemplateResult' ? m.label : unsafeHTML(m.label||'')\n\t\tlet description = m.description && m.description.constructor.name == 'TemplateResult' ? m.description : unsafeHTML(m.description||'')\n\n\t\treturn html`\n\t\t\t<div class=\"menu-item ${m.className}\" val=${m.val} index=${i}\n\t\t\t\tdata-title=${dataTitle}\n\t\t\t\t?active=${this._active==i}\n\t\t\t\t?icon-only=${!m.label && !m.description} ?selected=${m.selected}>\n\t\t\t\t${checkbox}\n\t\t\t\t${icon}\n\t\t\t\t${m.view&&m.view instanceof HTMLElement ?m.view:html`\n\t\t\t\t\t<span class=\"mi-content\">\n\t\t\t\t\t\t<div class=\"mi-label\">${label}</div>\n\t\t\t\t\t\t<div class=\"mi-description\">${description}</div>\n\t\t\t\t\t</span>\n\t\t\t\t`}\n\t\t\t\t${extras}\n\t\t\t\t${menuIcon}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tselectOptionsChanged(e){\n\t\tlet val = e.currentTarget.value\n\t\tlet data = this.displayMenu[e.currentTarget.parentElement.getAttribute('index')]\n\t\tdata.selection = val\n\n\t\tif( !this.opts.multiple )\n\t\t\tthis.resolve(data)\n\t\telse\n\t\t\tthis.toggleSelected(data)\n\t}\n\t\n\tonClick(e){\n\t\t\n\t\tlet target = e.target\n\n\t\tif( target.tagName == 'SELECT-FIELD' )\n\t\t\treturn\n\n\t\tlet didClickCheckbox = target.tagName == 'CHECK-BOX'\n\t\t\n\t\twhile(target && !target.classList.contains('menu-item')){\n\t\t\ttarget = target.parentElement\n\t\t}\n\t\t\n\t\tif( target ){\n\t\t\t\n\t\t\tlet data = this.displayMenu[target.getAttribute('index')]\n\n\t\t\tif( data.selections && !data.selection )\n\t\t\t\tdata.selection = data.selections[0]&&data.selections[0].val||data.selections[0]\n\t\t\t\n\t\t\tif( data.menu )\n\t\t\t\treturn this._itemMenu(target, data)\n\n\t\t\tif( this.opts.multiple ){\n\n\t\t\t\tif( data.clearsAll || (this.opts.multiple !== 'always' && !didClickCheckbox) ){\n\t\t\t\t\treturn this.resolve([data])\n\t\t\t\t}\n\n\t\t\t\tlet isSelected = this.toggleSelected(data)\n\t\t\t\t\n\t\t\t\tif( this.searchIsOn && this.hideUnselected ){\n\t\t\t\t\tthis.render()\n\t\t\t\t\t// update popover position\n\t\t\t\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\t\t\t\tthis.presenter._updatePosition()\n\t\t\t\t}else if( isSelected ){\n\t\t\t\t\ttarget.classList.add('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = true\n\t\t\t\t}else{\n\t\t\t\t\ttarget.classList.remove('selected')\n\t\t\t\t\ttarget.querySelector('check-box').checked = false\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.opts.onSelect&&this.opts.onSelect(this.selected)\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.resolve(data)\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _itemMenu(target, data){\n\t\tlet menu = new Menu(data.menu, data.menuOpts||{})\n\n\t\tlet popoverOpts = data.menuOpts && data.menuOpts.popover || {}\n\t\tlet val = await menu.popover(target, popoverOpts) \n\t\tif( val ){\n\t\t\tdata.menuSelected = val\n\t\t\tthis.resolve(data)\n\t\t}\n\t}\n\t\n\tonKeydown(e){\n\n\t\tif( (e.which >= 65 && e.which <= 90) // a-z\n\t\t|| (e.which >= 48 && e.which <= 57) // 0-9\n\t\t|| [8].includes(e.which) ){ // delete\n\t\t\tthis.onLetterPress(e)\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif( e.code == 'Escape' ){\n\t\t\tthis.resolve(false)\n\t\t\treturn;\n\t\t}\n\n\t\tif( e.target.tagName == 'INPUT' && ['ArrowLeft', 'ArrowRight'].includes(e.code) )\n\t\t\treturn\n\t\t\n\t\tif( !['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter'].includes(e.code) ) return\n\t\t\n\t\tlet items = this.el.querySelectorAll('.menu-item')\n\t\tlet activeItem = items[this._active]\n\n\t\t// if active item has a menu open, dont perform any actions\n\t\tif( activeItem && activeItem.classList.contains('popover-open') )\n\t\t\treturn\n\n\t\tif( e.code == 'Enter' ){\n\t\t\tif( activeItem )\n\t\t\t\tactiveItem.click()\n\t\t\t\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( this._active == null )\n\t\t\tthis._active = -1;\n\t\t\n\t\tthis._active += ['ArrowUp', 'ArrowLeft'].includes(e.code) ? -1 : 1;\n\t\t\n\t\tif( this._active < 0 )\n\t\t\tthis._active = items.length - 1\n\t\t\t\n\t\tif( this._active >= items.length )\n\t\t\tthis._active = 0\n\t\t\n\t\tthis.setActiveItem(items[this._active])\n\t\t\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\n\tset active(index){\n\n\t\tif( index == null )\n\t\t\tindex = 0;\n\t\t\n\t\tif( index < 0 )\n\t\t\tindex = this.displayMenu.length - 1\n\t\t\t\n\t\tif( index >= this.displayMenu.length )\n\t\t\tindex = 0\n\t\t\n\t\tthis._active = index\n\t\t\n\n\t\tlet items = this.el.querySelectorAll('.menu-item')\n\t\t\n\t\tif( items.length == 0 ) return\n\n\t\tthis.setActiveItem(items[this._active])\n\t}\n\n\tsetActiveItem(el){\n\n\t\tlet items = Array.from(this.el.querySelectorAll('.menu-item'))\n\n\t\titems.forEach(el=>el.removeAttribute('active'))\n\n\t\tif( typeof el === 'number' )\n\t\t\tel = items[el]\n\t\t\n\t\tthis._active = null\n\t\t\n\t\tif( el ){\n\t\t\tthis._active = items.indexOf(el)\n\n\t\t\tel.setAttribute('active', '')\n\t\t\tel.scrollIntoViewIfNeeded()\n\t\t}\n\t}\n\n\tonLetterPress(e){\n\n\t\tif( e.target.tagName == 'INPUT' ){\n\n\t\t\tsetTimeout(()=>{\n\n\t\t\t\tlet val = e.target.value\n\n\t\t\t\t// interpret only 1 character as \"empty\"\n\t\t\t\tif( !val || val.length < 2 )\n\t\t\t\t\tval = ''\n\n\t\t\t\tif( val === this.__lastFilterVal ) return\n\t\t\t\tthis.__lastFilterVal = val\n\n\t\t\t\tif( this.searchUrl ){\n\n\t\t\t\t\t// must stop typing for a moment before fetching results\n\t\t\t\t\tclearTimeout(this.__searchTermDelay)\n\n\t\t\t\t\tif( !val ){\n\t\t\t\t\t\tthis.menu = this.__origMenu\n\t\t\t\t\t\tthis.render()\n\n\t\t\t\t\t\t// update popover position\n\t\t\t\t\t\tif( this.presenter && this.presenter._updatePosition )\n\t\t\t\t\t\t\tthis.presenter._updatePosition()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.__searchTermDelay = setTimeout(()=>{\n\t\t\t\t\t\tthis.fetchResults(val)\n\t\t\t\t\t}, 700)\n\n\t\t\t\t}else{\n\t\t\t\t\tif( !val )\n\t\t\t\t\t\tthis.__filteredMenu = null\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.__filteredMenu = this.__fuse.search(val)\n\t\t\t\t\t\n\t\t\t\t\tthis.render()\n\t\t\t\t\tthis.setActiveItem(this.opts.autoSelectFirst?0:null)\n\t\t\t\t}\n\n\t\t\t}, 0)\n\n\t\t\treturn\n\t\t}\n\n\t\tlet ts = new Date().getTime()\n\n\t\tif( !this._lastLetterPressTS || ts - this._lastLetterPressTS > this.opts.typeDelay )\n\t\t\tthis._lastLetterPress = ''\n\n\t\tthis._lastLetterPressTS = ts\n\n\t\tthis._lastLetterPress += e.key\n\n\t\tlet li = this.el.querySelector(`.menu-item[data-title^=\"${this._lastLetterPress}\"]`)\n\n\t\tif( li )\n\t\t\tthis.setActiveItem(li)\n\t}\n\t\n\tresolve(data){\n\t\t\n\t\t// if( this.opts.onSelect )\n\t\t// \tthis.opts.onSelect(data)\n\t\t\n\t\tif( this._resolve )\n\t\t\tthis._resolve(data)\n\t\t\t\n\t\tif( this.presenter )\n\t\t\tthis.presenter.close()\n\t}\n\t\n\tscrollToSelected(){\n\t\tsetTimeout(()=>{\n\t\t\tlet el = this.el.querySelector('.selected')\n\t\t\tel && this.setActiveItem(el)\n\t\t},0)\n\t}\n/*\n\tPresenters\n*/\n\tpopover(target, opts={}){\n\n\t\tif( opts.adjustForMobile && device.isMobile && !device.isiPad ){\n\t\t\tlet modalOpts = {btns: ['cancel','done']}\n\n\t\t\tif( this.searchIsOn )\n\t\t\t\tmodalOpts.anchor = 'top'\n\t\t\t\n\t\t\tif( typeof opts.adjustForMobile == 'object' )\n\t\t\t\tmodalOpts = Object.assign(modalOpts, opts.adjustForMobile)\n\n\t\t\treturn this.modal(modalOpts)\n\t\t}\n\t\t\n\t\tthis.render()\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tthis.presenter = new Popover(target, this.el, opts)\n\n\t\tthis.scrollToSelected()\n\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n\t\n\tmodal(opts={}, mobileOpts){\n\t\tif( mobileOpts && device.isMobile && device.minScreenSize <= 699 )\n\t\t\treturn this.panel(mobileOpts)\n\t\telse\n\t\t\treturn this.panel(opts)\n\t}\n\n\tactionsheet(opts={}){\n\t\treturn this.panel(Object.assign({\n\t\t\ttype: 'actionsheet'\n\t\t}, opts))\n\t}\n\n\tpanel(opts={}){\n\t\t\n\t\tthis.render()\n\t\t\n\t\topts = Object.assign({\n\t\t\ttype: 'modal',\n\t\t\t// animation: 'scale'\n\t\t}, opts)\n\n\t\topts.onKeydown = this.onKeydown.bind(this)\n\t\t\n\t\tlet onClose = opts.onClose\n\t\topts.onClose = ()=>{\n\t\t\tonClose&&onClose()\n\t\t\t\n\t\t\tthis.presenter = null\n\t\t\t\n\t\t\tif( this.opts.multiple )\n\t\t\t\tthis.resolve(this.selected)\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t}\n\t\t\n\n\t\tlet dialog = new Dialog({\n\t\t\ticon: opts.icon||'',\n\t\t\ttitle: opts.title||'',\n\t\t\tview: this.el,\n\t\t\tbtns: opts.btns||false\n\t\t})\n\t\tthis.presenter = new Panel(dialog.el, opts)\n\t\tthis.presenter.open()\n\n\t\t// if dialog btn clicked, take action\n\t\tdialog.promise.then(btn=>{\n\t\t\tif( btn )\n\t\t\t\tthis.resolve(btn)\n\t\t\t\t// this.presenter.close()\n\t\t\telse\n\t\t\t\tthis.resolve(false)\n\t\t})\n\n\t\tthis.scrollToSelected()\n\t\t\n\t\tif( this.searchIsOn )\n\t\t\tthis.focusSearch()\n\n\t\treturn this.promise\n\t}\n}","import {html} from 'lit-html'\n\nexport default class TabView {\n\n    constructor(view){\n        \n        // custom element - we lazy load these\n        if( typeof view === 'string' ){\n\n            this._viewName = view\n            this._viewClass = customElements.get(view)\n\n            if( this._viewClass && this._viewClass.title ){\n                this.__title = this._viewClass.title\n                this.__options = this._viewClass.tabOptions || {}\n                this.__icon = this._viewClass.icon\n                this.__id = this.__title\n            }else{\n                this.__id = this._viewName\n            }\n\n            if( this._viewClass.id )\n                this.__id = this._viewClass.id\n\n        // HTML element\n        }else{\n            view.hidden = true\n            this.__view = view\n            this.__title = view.title\n            this.__icon = view.getAttribute('icon')\n\n            if( view.hasAttribute('view-id') ){\n                this.__id = view.getAttribute('view-id')\n            }else{\n                this.__id = this.__title\n                this.__view.setAttribute('view-id', this.id)\n            }\n\n            this.__view.tabView = this\n            view.title = ''\n        }\n    }\n\n    render(onClick){\n        return this.canDisplay?html`\n            <div class=\"tab-bar-item\" ?active=${this.active} .tabView=${this} @click=${onClick}>\n                <slot name=\"menu:${this.id}\">${this.title}</slot>\n            </div>\n        `:''\n    }\n\n    get active(){ return this.__active }\n    set active(isActive){\n        let didChange = this.__active != isActive\n        this.__active = isActive\n        if( !this.__view ) return // view not created yet\n        \n        if( !didChange )\n            didChange = this.view.hidden == isActive\n\n        this.view.hidden = !isActive\n\n        if( !didChange ) return\n\n        if( isActive )\n            this.view.didBecomeActive&&this.view.didBecomeActive()\n        else\n            this.view.didBecomeInactive&&this.view.didBecomeInactive()\n    }\n\n    get view(){\n        // lazy loading the html element view\n        if( !this.__view ){\n            \n            if( this._viewClass ){\n                this.__view = new this._viewClass()\n                this.__view.tabView = this\n            }else{\n                this.__view = document.createElement('section')\n                this.__view.innerHTML = `<b-paper color=\"red\" border dense><b>${this._viewName}</b> is not a custom element</b-paper>`\n            }\n\n            this.__view.setAttribute('view-id', this.id)\n        }\n        return this.__view \n    }\n\n    get id(){\n        return this.__id\n    }\n\n    get title(){\n        return this.__title || 'No Title'\n    }\n\n    get options(){\n        return this.__options || {}\n    }\n\n    get icon(){ return this.__icon }\n\n    // NOTE: rename to \"route\" ?\n    get path(){\n        if( this._viewClass ){\n            return this._viewClass.path || this.id\n        }else if(this.__view) {\n            return this.__view.path || this.__view.getAttribute('path') || this.id\n        }\n    }\n\n    get canDisplay(){\n        if( !this._viewClass || this._viewClass.canDisplay === undefined ) return true\n        return this._viewClass.canDisplay\n    }\n}","import TabView from './view'\n\nexport default class TabViews extends Map {\n\n    set active(view){\n        \n        if( view instanceof HTMLElement )\n            view = view.tabBar.id\n        if( view instanceof TabView )\n            view = view.id\n        \n        view = this.get(view) || this.first\n        \n        // view is already the active one\n        // if( view && view == this.active )\n        //     return \n\n        if( view && !view.canDisplay ){\n\n            // find the first view we can display\n            let fallbackView\n            this.forEach(v=>{\n                if( !fallbackView && v.canDisplay )\n                    fallbackView = v\n            })\n\n            this.active = fallbackView\n            return false\n        }\n        \n        this.forEach(v=>v.active=false)\n\n        if( view ){\n            this.__active = view.id\n            view.active = true\n        }\n        \n        if( this.key )\n            view ? localStorage.setItem('tab-bar:'+this.key+':active', view.id) : localStorage.removeItem('tab-bar:'+this.key+':active')\n    }\n\n    get active(){\n        let active = this.key ? localStorage.getItem('tab-bar:'+this.key+':active') : this.__active\n        return active && this.get(active)\n    }\n    \n    get first(){\n        return this.at(0)\n    }\n\n    at(i){\n        return Array.from(this.values())[i]\n    }\n\n    get last(){\n        return this.at(this.size-1)\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { LitElement, html, css } from 'lit-element'\nimport Menu from '../menu'\nimport TabViews from './views'\nimport TabView from './view'\nimport debounce from 'lodash/debounce'\n\ncustomElements.define('b-tabs', class extends LitElement {\n\n    static get properties(){return {\n        key: {type: String, reflect: true},\n        layout: {type: String, reflect: true},\n        singlemenu: {type: Boolean, reflect: true}\n    }}\n\n    constructor(){\n        super()\n        this.singlemenu = false\n        this.key = ''\n        this.layout = 'top'\n\n        this._resizeHandler = debounce(()=>{\n            this.singlemenu = this.shouldBeSingleMenu\n        }, 250)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        // window.addEventListener('resize', this._resizeHandler)\n\n        if( !this.views ){\n            \n            let views = []\n            this.childNodes.forEach(node=>{\n\n                if( node.nodeName == '#text' ){\n                    let str = node.textContent.trim()\n                    if( !str ) return\n                    let _views = str.split(\"\\n\").map(s=>s.trim())\n                    _views = _views.filter(v=>v) // ignore empty lines\n                    views.push(..._views)\n                    node.textContent = ''\n                \n                }else if( node.slot || ['#comment', 'SCRIPT', 'STYLE'].includes(node.nodeName) ){\n                    // ignore views that have a slot name\n\n                }else if( node.title ){\n                    views.push(node)\n                }else{\n                    node.hidden = true\n                    console.error('Cannot use `'+node.tagName+'` as it is missing a `title`')\n                }\n            })\n\n            this.views = views\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        // window.removeEventListener('resize', this._resizeHandler)\n    }\n\n    // this breaks down when last item is hidden\n    get shouldBeSingleMenu(){\n        if( this.offsetWidth == 0 ) return false\n        let menuItems = this.shadowRoot.querySelectorAll('.tab-bar-item')\n        let last = menuItems[menuItems.length-1]\n        if( !last ) return false\n        return last.offsetLeft+last.offsetWidth >= this.offsetWidth || last.offsetTop+last.offsetHeight >= this.offsetHeight\n    }\n\n    get views(){ return this.__views }\n    set views(views){\n        this.__views = this.__views || new TabViews()\n        this.__views.key = this.key\n\n        views.forEach(v=>{\n            v = new TabView(v)\n            this.__views.set(v.id, v)\n        })\n\n        this.active = this.getAttribute('active') || this.views.active || this.views.first\n    }\n\n    static get styles(){return css`\n        :host {\n            position: relative;\n            display: grid;\n            flex: 1;\n            min-height: 0;\n\n            --menuBgd: none;\n            --menuFontSize: 1em;\n            --contentPadding: var(--view-gutter);\n            --menuItemPadding: .75em 1em;\n            --menuItemRadius: 4px;\n            --inactiveColor: var(--b-tabs-inactive-color, rgba(0,0,0,.4));\n            --activeColor:  var(--b-tabs-active-color, inherit);\n            --border-color: var(--b-tabs-border-color, rgba(0, 0, 0, 0.1));\n            --contentBgd: none;\n            --contentShadow: none;\n        }\n\n        .tab-bar {\n            display: flex;\n            font-size: var(--menuFontSize);\n            min-width: 0;\n            overflow: hidden;\n            background: var(--menuBgd);\n        }\n\n        .tab-bar-item {\n            padding: var(--menuItemPadding);\n            cursor: pointer;\n            box-sizing: border-box;\n            color: var(--inactiveColor);\n        }\n\n        .tab-bar-item[active] {\n            color: var(--activeColor)\n        }\n\n        :host(:not([singlemenu])) .single-menu {display: none;}\n        :host([singlemenu]) .tab-bar-item:not(.single-menu) {display: none;}\n\n        :host([sticky]) {\n            --menuBgd: #fff;\n        }\n        \n        :host([sticky]) header {\n            position: sticky;\n            top: 0px;\n            z-index: 1000;\n        }\n\n        :host([layout=\"top\"]) { grid-template-rows: auto 1fr; }\n        :host([layout=\"bottom\"]) { grid-template-rows: 1fr auto; }\n        :host([layout=\"left\"]) { grid-template-columns: auto 1fr; }\n        :host([layout=\"right\"]) { grid-template-columns: 1fr auto; }\n\n        :host([layout=\"left\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            flex-direction: column;\n        }\n\n        :host([layout=\"bottom\"]) .tab-bar,\n        :host([layout=\"right\"]) .tab-bar {\n            order: 2;\n        }\n\n        :host([layout=\"top\"]) .tab-bar { border-bottom: solid 1px var(--border-color); }\n        :host([layout=\"bottom\"]) .tab-bar { border-top: solid 1px var(--border-color); }\n        :host([layout=\"left\"]) .tab-bar { border-right: solid 1px var(--border-color); }\n        :host([layout=\"right\"]) .tab-bar { border-left: solid 1px var(--border-color); }\n\n        :host([layout=\"top\"]) .tab-bar-item { border-bottom: solid 2px transparent; }\n        :host([layout=\"bottom\"]) .tab-bar-item { border-top: solid 2px transparent; }\n        :host([layout=\"left\"]) .tab-bar-item { border-right: solid 2px transparent; }\n        :host([layout=\"right\"]) .tab-bar-item { border-left: solid 2px transparent; }\n\n        :host([layout=\"top\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item:hover { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item:hover { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item:hover { border-left-color: currentColor; }\n\n        :host([layout=\"top\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        :host([layout=\"bottom\"]) .tab-bar-item[active] { border-top-color: currentColor; }\n        :host([layout=\"left\"]) .tab-bar-item[active] { border-right-color: currentColor; }\n        :host([layout=\"right\"]) .tab-bar-item[active] { border-left-color: currentColor; }\n\n        @media (max-width: 550px) {\n\n            :host([layout=\"left\"]),\n            :host([layout=\"right\"]) {\n                grid-template-columns: none;\n                grid-template-rows: auto 1fr;\n            }\n\n            :host([layout=\"left\"]) .tab-bar,\n            :host([layout=\"right\"]) .tab-bar {\n                flex-direction: row;\n                overflow: auto;\n                -webkit-overflow-scrolling: touch;\n                border-bottom: solid 1px rgba(0,0,0,.1);\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item { border-right: none; }\n            :host([layout=\"right\"]) .tab-bar-item { border-left: none; }\n\n            :host([layout=\"left\"]) .tab-bar-item, \n            :host([layout=\"right\"]) .tab-bar-item {\n                border-bottom: solid 2px transparent;\n                flex-shrink: 0;\n            }\n\n            :host([layout=\"left\"]) .tab-bar-item:hover, \n            :host([layout=\"right\"]) .tab-bar-item:hover { border-bottom-color: currentColor; }\n\n            :host([layout=\"left\"]) .tab-bar-item[active], \n            :host([layout=\"right\"]) .tab-bar-item[active] { border-bottom-color: currentColor; }\n        }\n\n        /*\n            Slotted Content\n        */\n        slot.content {\n            display: flex;\n            background: var(--contentBgd);\n            box-shadow: var(--contentShadow);\n            overflow: var(--overflow, auto);\n        }\n\n        .content::slotted(*) {\n            flex: 1;\n            align-self: flex-start;\n            max-height: 100%;\n            box-sizing: border-box;\n        }\n        \n        /* dont add padding to custom elements */\n        .content::slotted(.padded),\n        .content::slotted(div),\n        .content::slotted(section) {\n            padding: var(--contentPadding);\n        }\n\n        .content::slotted([hidden]) {\n            display: none !important;\n        }\n        \n        /*\n        THEME: root-tabs\n        */\n        :host(.root-tabs) {\n            --activeColor: inherit;\n            --contentBgd: #fff;\n            --contentShadow: rgba(0,0,0,.2) 0 0 3px;\n            --menuFontSize: 1.1em;\n            --menuItemPadding: .65em 1em;\n        }\n\n        :host(.root-tabs) slot.content {\n            border-radius: 4px 0 0 0;\n        }\n\n        :host(.root-tabs) .tab-bar {\n            border: none !important;\n            padding-left: .35em;\n            padding-top: .25em;\n            z-index: 1;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar { padding: 0 0 .5em .5em; }\n        :host(.root-tabs[layout=\"left\"]) .tab-bar { padding: .5em 0 0 .5em; }\n        :host(.root-tabs[layout=\"right\"]) .tab-bar { padding: .5em .5em 0 0; }\n\n        :host(.root-tabs) .tab-bar-item {\n            border: solid 1px transparent;\n        }\n\n        :host(.root-tabs[layout=\"top\"]) .tab-bar-item {\n            border-bottom: none !important;\n            border-radius: var(--menuItemRadius) var(--menuItemRadius) 0 0;\n        }\n\n        :host(.root-tabs[layout=\"bottom\"]) .tab-bar-item {\n            border-top: none !important;\n            border-radius: 0 0 var(--menuItemRadius) var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"left\"]) .tab-bar-item {\n            border-right: none !important;\n            border-radius: var(--menuItemRadius) 0 0 var(--menuItemRadius);\n        }\n\n        :host(.root-tabs[layout=\"right\"]) .tab-bar-item {\n            border-left: none !important;\n            border-radius: 0 var(--menuItemRadius) var(--menuItemRadius) 0;\n        }\n\n        :host(.root-tabs) .tab-bar-item:hover:not([active]) {\n            border-color: rgba(0,0,0,.1);\n            color: rgba(0,0,0,.5);\n        }\n\n        :host(.root-tabs) .tab-bar-item[active] {\n            background: var(--contentBgd);\n            /* border: solid 1px rgba(0,0,0,.1); */\n            box-shadow: rgba(0,0,0,.2) 0 0 3px;\n        }\n    `}\n\n    renderTabBar(){\n\n        if( ['none', 'false'].includes(this.getAttribute('tab-bar')) )\n            return html`<div></div>`\n\n        if( this.getAttribute('tab-bar') ){\n\n            if( !this.__customTabBar ){\n                \n                let TabBar = customElements.get(this.getAttribute('tab-bar'))\n                if( !TabBar ) return console.error(`Tabs: ${this.getAttribute('tab-bar')} does not exist`)\n\n                this.__customTabBar = new TabBar()\n                this.__customTabBar.host = this\n                this.__customTabBar.model = this.model\n                this.__customTabBar.views = this.views\n                this.__customTabBar.onMenuClick = this.menuClick.bind(this)\n                this.__customTabBar.classList.add('tab-bar')\n            }else{\n                this.__customTabBar.update()\n            }\n\n            return this.__customTabBar\n\n        }else{\n\n            return html`\n            <header class=\"tab-bar\">\n                <slot name=\"menu:before\"></slot>\n                <div class=\"tab-bar-item single-menu\" active @click=${this.popoverMenu}>\n                    <b-icon name=\"menu\"></b-icon>\n                    ${this.views.active.title}\n                </div>\n                ${this.views.map(v=>v.render(this.menuClick))}\n                <slot name=\"menu:after\"></slot>\n            </header>`\n        }\n    }\n\n    render(){return html`\n        ${this.renderTabBar()}\n        <slot class=\"content\"></slot>\n    `}\n\n    async popoverMenu(e){\n\n        let selected = await new Menu(this.views.map(v=>{\n            return {label: v.title, val: v}\n        })).popover(e.target)\n\n        if( selected )\n            this.active = selected.val\n    }\n\n    menuClick(e){\n        let oldVal = this.active\n\n        if( !e.currentTarget.tabView ){\n            return console.error(`Tabs: tab menu items must have .tabView set`)\n        }\n\n        this.dispatchEvent(new CustomEvent('menu-clicked',{\n            detail: {\n                tabView: e.currentTarget.tabView,\n                oldTabView: this.views.get(oldVal)\n            },\n            bubbles: false, \n            composed: true\n        }))\n\n        this.active = e.currentTarget.tabView\n\n        if( this.active != oldVal )\n        this.dispatchEvent(new CustomEvent('active-changed',{\n            detail: {tabView: this.views.active},\n            bubbles: false, \n            composed: true\n        }))\n    }\n\n    onModelChange(){\n\n        // once a model has been set on the tabs (even if setting to null)\n        // we will then begin propagating the model to the tab views\n        this._propagateModel = true\n\n        if( this.views )\n            this.views.active.view.model = this.model\n    }\n\n    get active(){\n        return this.views && this.views.active && this.views.active.id\n    }\n\n    set active(val){\n        this.views.active = val\n        this.update()\n        \n        let view = this.views.active.view\n\n        this.setAttribute('active', this.views.active.id)\n\n        if( this._propagateModel )\n            view.model = this.model\n\n        if( view.parentElement != this)\n            this.appendChild( view )\n    }\n\n})\n\nexport default customElements.get('b-tabs')","import store from '../../util/store'\n\nclass FormHandler extends HTMLElement {\n\t\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis.editorsByKey = {}\n\t\t\n\t\t// bind context to functions\n\t\tthis.onModelSync = this.onModelSync.bind(this)\n\t\tthis.onModelChange = this.onModelChange.bind(this)\n\t\tthis.onModelEdited = this.onModelEdited.bind(this)\n\t\tthis.onEditorChange = this.onEditorChange.bind(this)\n\t}\n\n\tget noGridArea(){ return this.hasAttribute('no-grid-area') }\n\t\n\tget autoSave(){ return this.hasAttribute('autosave') }\n\tset autoSave(val){ val ? this.setAttribute('autosave', '') : this.removeAttribute('autosave') }\n\n\tget patchSave(){ return this.hasAttribute('patchsave') }\n\tset patchSave(val){ val ? this.setAttribute('patchsave', '') : this.removeAttribute('patchsave') }\n\t\n\tconnectedCallback(){\n\n\t\tlet host = this.getRootNode().host\n\t\tif( host && !host.formHandler )\n\t\t\thost.formHandler = this\n\n\t\t// allow for nested custom elements to render first\n\t\tsetTimeout(()=>{\n\t\t\tthis.bindControls()\n\t\t},0)\n\t}\n\n\tbindControls(){\n\t\t// TODO: change to `controls`?\n\t\tthis.editors = Array.from(this.querySelectorAll('form-control[key], check-box[key], radio-group[key], text-field[key], select-field[key]'))\n\n\t\tthis.editors.forEach(el=>{\n\t\t\tlet key = el.getAttribute('key')\n\t\t\tif( key ){\n\t\t\t\tthis.editorsByKey[key] = el\n\n\t\t\t\tif( !this.noGridArea )\n\t\t\t\t\tel.style.gridArea = key\n\t\t\t}\n\t\t})\n\n\t\tif( this.disabled || this.hasAttribute('disabled') )\n\t\t\tthis.disabled = true\n\n\t\tthis.addEventListener('change', this.onEditorChange, true)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstatic get observedAttributes(){ return ['disabled'] }\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tif( name == 'disabled' )\n\t\t\tthis.disabled = newValue !== null\n\t}\n\n\tdisconnectedCallback(){\n\t\tthis.editors = []\n\t\tthis.editorsByKey = {}\n\t\tthis.model = null\n\n\t\tthis.removeEventListener('change', this.onEditorChange)\n\t}\n\n\tget model(){ return this._model }\n\tset model(model){\n\n\t\tif( model == this.model ) return\n\n\t\tif( this.model ){\n\t\t\tthis.model.off('sync', null, this)\n\t\t\tthis.model.off('change', null, this)\n\t\t\tthis.model.off('edited', null, this)\n\t\t\tdelete this._model\n\t\t}\n\n\t\tif( !model ) return\n\n\t\tthis._model = model\n\t\tthis.model._editedAttrs = this.model._editedAttrs || {}\n\n\t\tthis.model.on('sync', this.onModelSync, this)\n\t\tthis.model.on('change', this.onModelChange, this)\n\t\tthis.model.on('edited', this.onModelEdited, this)\n\n\t\tthis._updateEditors()\n\t}\n\n\tstore(vals){\n\t\tlet key = this.getAttribute('store')\n\t\tif( !key ) return undefined\n\n\t\tlet data = store(key) || {}\n\n\t\tif( vals === undefined )\n\t\t\treturn data\n\n\t\tdata = Object.assign(data, vals)\n\n\t\tstore(key, data)\n\t}\n\n\tstoredValue(key, defaultVal=null){\n\t\tif( this.model )\n\t\t\treturn this.model.has(key) ? this.model.get(key): defaultVal\n\t\t\n\t\tlet data = this.store()\n\t\treturn data ? data[key] : defaultVal\n\t}\n\n\t_updateEditors(){\n\t\tif( this.editors && (this.model || this.hasAttribute('store')) )\n\t\tthis.editors.forEach(el=>{\n\t\t\t// set the value of each editor based on the value in the model\n\t\t\tlet key = el.getAttribute('key')\n\t\t\tlet val = this.storedValue(key)\n\n\t\t\tif( val && val._isAMomentObject )\n\t\t\t\tval = val.format(el.control._datePicker?el.control._datePicker.format:'MM/DD/YYYY')\n\n\t\t\tif( val !== undefined )\n\t\t\t\tel.value = val\n\t\t})\n\t}\n\t\n\tonModelSync(m, attrs, opts){\n\t\tlet trigger = false\n\t\t\n\t\t// see if we need to clear any \"edited\" attributes\n\t\tfor( let key in attrs ){\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] !== undefined ){\n\t\t\t\ttrigger = true\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if we cleared any edited attributes, trigger the change\n\t\tif( trigger )\n\t\t\tthis.model.trigger('edited', this.model.isEdited(), this.model.editedAttrs())\n\t}\n\t\n\tonModelEdited(isEdited, editedAttrs){\n\t\tthis.editors.forEach(el=>{\n\t\t\tif( editedAttrs[el.key] != undefined && !this.autoSave )\n\t\t\t\tel.setAttribute('unsaved', '')\n\t\t\telse\n\t\t\t\tel.removeAttribute('unsaved')\n\t\t})\n\t}\n\t\n\tonModelChange(m, opts={}){\n\t\t\n\t\tfor( let key in m.changed ){\n\t\t\t\n\t\t\t// if changed value is different than edited value, clear the edited value\n\t\t\tif( m._editedAttrs && m._editedAttrs[key] && m._editedAttrs[key] != m.changed[key]){\n\t\t\t\tdelete m._editedAttrs[key]\n\t\t\t}\n\t\t\t\n\t\t\t// set the editor with the new value\n\t\t\tif( this.editorsByKey[key] ){\n\t\t\t\tthis.editorsByKey[key].value = m.changed[key]\n\t\t\t\tthis.editorsByKey[key].removeAttribute('unsaved')\n\t\t\t\t\n\t\t\t\t// this causes problems with tracking \"editedAttr\"\n\t\t\t\t// if( m._origAttrs )\n\t\t\t\t// \tm._origAttrs[key] = m.changed[key]\n\t\t\t}\n\t\t}\n\t}\n\t\n\tasync onEditorChange(e){\n\n\t\tif( !e.detail ) return\n\n\t\tlet m = this.model\n\t\tlet el = e.target\n\t\tlet key = el.getAttribute('key')\n\t\tlet val = e.detail.value\n\t\t\n\t\tif( !key ) return\n\t\t\n\t\tlet changes = {}\n\t\tchanges[key] = val\n\t\t\n\t\tif( this.validateChange && await this.validateChange(m, changes, key, val) === false ){\n\t\t\tel.value = changes[key] !== undefined ? changes[key] : el.value\n\t\t\treturn\n\t\t}\n\n\t\t// optionally make other changes based on this change\n\t\t// TODO: think of a way to implement this again for the custom element?\n\t\t// if( this.opts.onEditorChange && this.opts.onEditorChange(m, changes, key, val) === false )\n\t\t// \treturn\n\t\t// if other changes where made from validate, propagate to other controls\n\t\tif( this.validateChange )\n\t\tfor( let _key in changes ){\n\t\t\tif( _key != key ){\n\t\t\t\tlet _el = this.get(_key)\n\t\t\t\tif( _el ) _el.value = changes[_key]\n\t\t\t}\n\t\t}\n\n\t\t// ugh, this is hacky and should be solved a better way\n\t\tif( el.control && el.control.type=='date' && val ){\n\t\t\tchanges[key] = el.control._datePicker.formatted('YYYY-MM-DD')\n\t\t}\n\n\t\tthis.store(changes)\n\t\t\n\t\tif( this.model ){\n\t\t\tif( this.autoSave === true ){\n\t\t\t\tthis.model.save(changes, {patch:this.patchSave||false})\n\t\t\t\tthis.model.trigger('edited', false, changes)\n\t\t\t}else{\n\t\t\t\tthis.model.editAttr(changes)\n\t\t\t}\n\t\t}\n\n\t\tthis.onChange&&this.onChange(changes)\n\t}\n\t\n\tget disabled(){ return this.__disabled || false }\n\tset disabled(disabled=false){\n\t\tthis.__disabled = disabled === true\n\t\tthis.editors&&this.editors.forEach(el=>el.disabled=this.__disabled)\n\t}\n\n\tget isInvalid(){\n\t\treturn !!this.editors.find(el=>el.isInvalid)\n\t}\n\t\n\tfocus(index=0){\n\t\tthis.editors[index]&&this.editors[index].focus()\n\t}\n\t\n\tget(key){\n\t\tif( typeof key == 'number' )\n\t\t\treturn this.editors[key]\n\t\t\t\n\t\treturn Array.from(this.editors).find(ed=>ed.key==key)\n\t}\n}\n\ncustomElements.define('form-handler', FormHandler)\n\nexport default customElements.get('form-handler')","import {css} from 'lit-element'\n\nexport default css`\nslot#value {\n\tdisplay: none;\n}\n\nslot[name=\"before\"] { grid-area: before }\nslot[name=\"help\"] { grid-area: help }\nslot[name=\"after\"] { grid-area: after }\n\nslot[name=\"before\"],\nslot[name=\"help\"],\nslot[name=\"after\"]{\n\tdisplay: block;\n}\n\n:host {\n\talign-self: flex-start;\n\t/* contain: content; */\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\t--placeholderColor: var(--fc-placeholder-color, rgba(0,0,0,.3));\n\t--selectionBgd: #FFECB3;\n\t--focusBgd: #FFF8E1;\n\t--focusColor: var(--fc-theme);\n\t --bgd:var(--fc-bgd, #fff);\n\t--borderColor: rgba(0,0,0,.3);\n\t--invalidColor: #ff1744;\n\t--unsavedColor: transparent; /*#FFC107;*/\n\t--disabledColor: var(--fc-disabled-color, rgba(0,0,0,.3));\n\t--labelFontFamily: inherit;\n\t--labelFontSize: inherit;\n\t--padY: 0;\n\t--padX: 0;\n}\n\n:host main {\n\tgrid-area: main;\n\twidth: 100%;\n\tposition: relative;\n\tz-index: 10;\n\tdisplay: flex;\n\tline-height: 1em;\n\tcaret-color: #E91E63;\n\tbox-sizing: border-box;\n}\n\n/* :host(:not([disabled]):hover) main, */\n/* :host(:not([disabled]):focus-within) main */\n/* :host(:not([disabled])[focused]) main { */\n\t/* background: var(--focusBgd);\n} */\n\n:host([disabled]) main {\n\tcolor: var(--disabledColor);\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd);\n}\n\n/* :host(:not([disabled])) main {\n\tcursor: text;\n} */\n\n.label {\n\tposition: absolute;\n\tz-index: 0;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\twhite-space: nowrap;\n\tfont-family: var(--labelFontFamily);\n\tfont-size: var(--labelFontSize);\n}\n\n:host([nolabel]) .label {\n\tdisplay: none !important;\n}\n\n.prefix {\n\torder: 10;\n}\n\n.suffix {\n\torder: 30;\n}\n\n.prefix, .suffix {\n\tposition: relative;\n\tz-index: 10;\n\tflex-shrink: 0;\n    color: var(--placeholderColor);\n\tdisplay: flex;\n\talign-items: center;\n}\n\nslot[name=\"prefix\"]::slotted(form-control),\nslot[name=\"suffix\"]::slotted(form-control) {\n\tcolor: #333;\n}\n\n/* .control {\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n} */\n\nslot[name=\"control\"]::slotted(*) {\n\t/* background: red; */\n\torder: 20;\n\tflex-grow: 1;\n\toutline: none;\n\tmin-width: .25em;\n\tposition: relative;\n\tz-index: 10;\n}\n\n:host(:not([disabled])) slot[name=\"control\"]::slotted(*) {\n\t-webkit-user-select: text;\n}\n\n/* .control[empty]:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n} */\n\n:host(:not([material])[invalid]) main {\n\tcolor: var(--invalidColor)\n}\n\n.btns {\n\tdisplay: none;\n}\n\n:host([btns]) .btns {\n\torder: 40;\n\tdisplay: grid;\n\t/* height: 100%; */\n\ttop: 0;\n\tflex-direction: column;\n\tmin-width: 0;\n\tflex-grow: 0;\n\tfont-size: 50%;\n\tposition: relative;\n\tcursor: pointer;\n}\n\n.btns > span {\n\tpadding: 0 .25em;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.btns > span svg {\n\theight: 2em;\n\twidth: 2em;\n}\n\n.btn-save:hover {\n\tcolor: green;\n\t/* background: blue; */\n}\n\n.btn-cancel:hover {\n\tcolor: red;\n\t/* background: orange; */\n}\n\n:host([hidden]),\n[hidden] {\n\tdisplay: none !important;\n}\n\nslot[name=\"help\"] {\n\tmargin: .5em 0 0;\n\tfont-size: .8em;\n\tcolor: var(--fc-help-color, rgba(0,0,0,.6));\n\tdisplay: block;\n}\n\n/* some default styles for native input controls */ \n::slotted(input) {\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tcolor: inherit;\n\twidth: 4em; /* flex will make it grow */\n\tborder: none;\n\tbackground: none;\n\tpadding: var(--padX) var(--padY);\n}\n\n/* doesn't appear to work */\n::slotted(input::placeholder) {\n\tcolor: var(--placeholderColor);\n}\n\n/* remove autofill blue/yellow background */\n::slotted(input:-webkit-autofill) {\n    -webkit-box-shadow:0 0 0 50px var(--bgd) inset;\n}\n\n::slotted(input:-webkit-autofill:focus) {\n    -webkit-box-shadow: 0 0 0 50px var(--bgd) inset;\n}\n\n:host([label]:not([material])) {\n\tmargin-top: 1em;\n}\n\n:host(:not([material])) .label {\n\ttop: -1em;\n}\n\n\n/*\n\tMaterial\n*/\n\n:host([material]) {\n\t--focusBgd: transparent;\n\tpadding-top: .25em;\n\t--padY: .6em;\n\t--borderColor: rgba(0,0,0,.2);\n}\n\n:host([material]) main {\n\tborder-bottom: solid 1px var(--borderColor);\n\tpadding-top: var(--padY);\n\tborder-radius: var(--fc-border-radius, 0px);\n}\n\n:host([material]:not(:focus-within):not([focused]):hover) main {\n\tbackground: var(--bgd);\n}\n\n:host([material]) main:before {\n\tcontent: '';\n\tborder: solid 2px transparent;\n\tposition: absolute;\n\twidth: calc(100% + 2px);\n\theight: calc(100% + 2px);\n\tbox-sizing: border-box;\n\ttop: -1px;\n\tleft: -1px;\n\tborder-radius: var(--fc-border-radius, 0px);\n}\n\n:host([material]) slot[name=\"control\"]::slotted(*) {\n\tpadding: var(--padY) 0;\n\t/* border-bottom: solid 1px transparent; */\n}\n\n:host([material]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .25em;\n}\n\n:host slot[name=\"control\"]::slotted(check-box) {\n\t border-bottom: solid 2px transparent\n}\n\n/* :host([unsaved]:not([material])) slot[name=\"control\"]::slotted(check-box) {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]) .label {\n\tcolor: var(--placeholderColor);\n\tdisplay: block;\n\ttransition: 120ms;\n\tposition: absolute;\n\tpadding: var(--padY) 0;\n}\n\n:host([material]) .prefix,\n:host([material]) .suffix {\n\tpadding: var(--padY) 0;\n}\n\n:host([material]:not([empty])),\n:host([material]:focus-within),\n:host([material][focused]) {\n\t--labelFontSize: .7em;\n}\n\n:host([material]) .control:not([empty]) ~ .label,\n:host([material]:not([empty])) .label,\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: inherit;\n\ttransform: translateY(calc(-50% - (var(--padY) / 2)));\n\tz-index: 11;\n}\n\n:host([material][empty]:not([nolabel]):not(:focus-within)) [name=\"control\"]::slotted(*),\n:host([material][empty]:not([nolabel]):not(:focus-within)) [name=\"main\"]::slotted(*) {\n\topacity: 0;\n}\n\n:host([material]:not([show*=\"prefix\"])) .prefix,\n:host([material]:not([show*=\"suffix\"])) .suffix {\n\topacity: 0;\n\ttransition: 120ms;\n}\n\n/* :host([material]) .control:not([empty]) ~ .prefix,\n:host([material]) .control:not([empty]) ~ .suffix, */\n:host([material]:not([empty])) .prefix,\n:host([material]:not([empty])) .suffix,\n:host([material]:focus-within) .prefix,\n:host([material]:focus-within) .suffix,\n:host([material][focused]) .prefix,\n:host([material][focused]) .suffix {\n\topacity: 1;\n}\n\n:host([material]:focus-within) main:before,\n:host([material][focused]) main:before {\n\tborder-bottom-color: var(--focusColor);\n}\n\n:host([material][invalid]) main:before {\n\tborder-bottom-color: var(--invalidColor);\n}\n\n/* :host([material][unsaved]) main:before {\n\tborder-bottom-color: var(--unsavedColor);\n} */\n\n:host([material]:focus-within) .label,\n:host([material][focused]) .label {\n\tcolor: var(--focusColor);\n}\n\n:host([material][invalid]) .label {\n\tcolor: var(--invalidColor);\n}\n\n\n/*\n\tMaterial Outline\n*/\n:host([material=\"outline\"]) {\n\t/* margin: 0 .5em .5em 0; */\n\t--padY: .75em;\n\t--padX: .75em;\n}\n\n:host([material=\"outline\"]),\n:host([material=\"outline\"]) main,\n:host([material=\"outline\"]) main:before {\n\tborder-radius: var(--fc-border-radius, 4px);\n}\n\t\n:host([material=\"outline\"]) main {\n\tborder: solid 1px var(--borderColor);\n\tpadding-top: 0;\n\tbackground: var(--bgd);\n}\n\n/* :host([material=\"outline\"]) .control, */\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"outline\"]) .label {\n\tpadding: var(--padX) var(--padY);\n\tborder-radius: var(--fc-border-radius, 3px);\n}\n\n:host([material=\"outline\"]) slot[name=\"control\"]::slotted(radio-group) {\n\t--padY: .25em;\n\t--padX: .5em;\n}\n\n:host([material=\"outline\"]) .label {\n\twidth: auto;\n}\n\n:host([material=\"outline\"]) .prefix {\n\tpadding: var(--padX) var(--padY);\n    padding-right: 0;\n    margin-right: calc(var(--padX) * -1);\n}\n\n:host([material=\"outline\"]) .suffix {\n\tpadding: var(--padX) var(--padY);\n    padding-left: 0;\n    margin-left: calc(var(--padX) * -1);\n}\n\n:host([material=\"outline\"]) .control:not([empty]) ~ .label,\n:host([material=\"outline\"]:not([empty])) .label,\n:host([material=\"outline\"]:focus-within) .label,\n:host([material=\"outline\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: var(--padX);\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"outline\"]:focus-within) main:before,\n:host([material=\"outline\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"outline\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"outline\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"outline\"]) slot[name=\"help\"] {\n\tmargin: .5em var(--padX) 0\n}\n\n/*\n\tFilled\n*/\t\t\n:host([material=\"filled\"]) {\n\t--bgd: var(--fc-bgd, #eee);\n\t--focusBgd: var(--bgd);\n\t--padY: .75em;\n\t--padX: .75em;\n\t--placeholderColor: var(--fc-placeholder-color, rgba(0,0,0,.3));\n\tmargin: 0 0 .5em 0;\n}\n\n:host([material=\"filled\"]) main {\n\tborder: solid 1px var(--bgd);\n\tpadding-top: 1em;\n\tborder-radius: var(--fc-border-radius, 4px);\n\tbackground: var(--bgd);\n}\n\n:host([material=\"filled\"].nolabel) main, /* deprecated, use attribute */\n:host([material=\"filled\"][nolabel]) main {\n\tpadding-top: 0;\n}\n\n:host([material=\"filled\"].dense) main, /* deprecated, use attribute */\n:host([material=\"filled\"][dense]) main {\n\t--padY: .5em;\n}\n\n:host([material=\"filled\"]) main:before {\n\tborder-radius: var(--fc-border-radius, 4px);\n}\n\n:host([material=\"filled\"]) .control,\n:host([material=\"filled\"]) slot[name=\"control\"]::slotted(*),\n:host([material=\"filled\"]) .label {\n\tpadding: var(--padY) var(--padX);\n\tborder-radius: 3px;\n}\n\n:host([material=\"filled\"]) slot[name=\"control\"]::slotted(input) {\n\tpadding: 0;\n    margin: var(--padY) var(--padX);\n    border-radius: 0;\n}\n\n:host([material=\"filled\"]) .label {\n\ttransform: translateY(-20%);\n\twidth: auto;\n}\n\n:host([material=\"filled\"]) .prefix {\n\tpadding: var(--padY) var(--padX);\n    padding-right: 0;\n    margin-right: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]) .suffix {\n\tpadding: var(--padY) var(--padX);\n    padding-left: 0;\n    margin-left: calc(-1 * var(--padX));\n}\n\n:host([material=\"filled\"]:not([empty])) .label,\n:host([material=\"filled\"]:focus-within) .label,\n:host([material=\"filled\"][focused]) .label {\n\tbackground: var(--bgd);\n\tpadding: 0 .35em;\n\tmargin-left: var(--padX);\n\ttransform: translateY(-50%);\n}\n\n:host([material=\"filled\"]:focus-within) main:before,\n:host([material=\"filled\"][focused]) main:before {\n\tborder-color: var(--focusColor);\n}\t\n\n:host([material=\"filled\"][invalid]) main:before {\n\tborder-color: var(--invalidColor);\n}\n\n/* :host([material=\"filled\"][unsaved]) main:before {\n\tborder-color: var(--unsavedColor);\n} */\n\n:host([material=\"filled\"]) slot[name=\"help\"] {\n\tmargin: var(--padY) var(--padX) 0;\n}\n`","export default (el, val)=>{\n\n    if( !val || val === '0' )\n        el.setAttribute('falsy', '')\n    else\n        el.removeAttribute('falsy')\n        \n        if( !val )\n        el.setAttribute('no-value', '')\n    else\n        el.removeAttribute('no-value')\n        \n    if( !val && !el.getAttribute('placeholder') )\n        el.setAttribute('empty', '')\n    else\n        el.removeAttribute('empty')\n}","export default (el, val) => {\n\n    let required = el.hasAttribute('required')\n\n    // `validate` is deprecated, use `pattern`\n    let pattern = el.getAttribute('pattern') || el.getAttribute('validate')\n\n    if( !pattern && el.validate )\n        return el.validate(val, el) !== false\n    \n    if( !pattern ) return required ? !!val : true\n    \n    switch(pattern){\n        case 'int':\n            pattern = '^\\\\d+$'; break;\n        case 'float':\n        case 'decimal':\n            pattern = '^\\\\d+(\\\\.\\\\d*)?$|^\\\\.\\\\d+$'; break;\n        case 'email':\n            pattern = '^\\\\S+@\\\\S+\\\\.\\\\S+$'; break;\n    }\n    \n    return !required && !val ? true : (new RegExp(pattern)).test(val)\n    \n}","export default (e, el, val) => {\n\n    let okKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Backspace', 'Delete', 'Tab']\n    let metaKey = (e.metaKey || e.ctrlKey)\n    let okPress = okKeys.includes(e.key) || metaKey\n        \n    let max = el.getAttribute('maxlength') || el.getAttribute('max')\n\n    if( max && val.length >= max && !okPress )\n        return true\n    \n    return false\n}","import setValueAttrs from './setValueAttrs'\nimport validatePattern from './validatePattern'\nimport stopMaxLength from './stopMaxLength'\n\nexport default function(input){\n\n    setTimeout(()=>{\n        setValueAttrs(input, input.value)\n    })\n\n    input.addEventListener('change:value', onChange)\n    input.addEventListener('input', onInput)\n    input.addEventListener('focus', onFocus)\n    input.addEventListener('blur', onBlur)\n    input.addEventListener('keydown', onKeyDown)\n\n    // let hasPattern = input.hasAttribute('pattern')\n    // let hasAutocomplete = input.hasAttribute('autoComplete')\n\n    if( input.type == 'email' ){\n        if( !input.pattern ) input.pattern = 'email'\n        if( !input.autocomplete ) input.autocomplete = 'email'\n    }\n\n    if( input.type == 'tel' ){\n        if( !input.autocomplete ) input.autocomplete = 'phone'\n    }\n}\n\n\nconst testPattern = input => {\n\n    if( validatePattern(input, input.value) ){\n        delete input.isInvalid\n        input.removeAttribute('invalid')\n\n    }else if(input.hasAttribute('reset-invalid')){\n        input.value = input._originalVal || ''\n        delete input.isInvalid\n        input.removeAttribute('invalid')\n\n    }else{\n        input.isInvalid = true\n        input.setAttribute('invalid', '')\n    }\n}\n\nconst onChange = e =>{\n    setValueAttrs(e.target, e.target.value)\n}\n\nconst onFocus = e =>{\n    e.target._originalVal = e.target.value\n}\n\nconst onBlur = e =>{\n    testPattern(e.target)\n    setValueAttrs(e.target, e.target.value)\n    delete e.target._originalVal\n}\n\nconst onInput = e =>{\n    setValueAttrs(e.target, e.target.value)\n}\n\nconst onKeyDown = e =>{\n    \n    if( e.target.hasAttribute('invalid') )\n        e.target.removeAttribute('invalid')\n\n    if( e.key == 'Escape' ){\n        e.target.value = e.target._originalVal || ''\n        e.target.blur()\n    }\n\n    // maxlength doesn't work on iOS, so let's implement our own\n    if( stopMaxLength(e, e.target, e.target.value) )\n        e.preventDefault()\n}\n","/*\n\tForm Control\n*/\n\nimport styles from './form-control.css.js'\nimport nativeInputHelper from './util/nativeInputHelper'\n\nclass FormControlElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\tlet prefix = this.getAttribute('prefix') || '<slot name=\"prefix\"></slot>'\n\t\tlet suffix = this.getAttribute('suffix') || '<slot name=\"suffix\"></slot>'\n\n\t\t// if prefix/suffix have spaces at the beginning or end of string assume the\n\t\t// developer wanted the sapce to show and replace with non-breaking space so it does\n\t\tprefix = prefix.replace(/^\\s+/, '&nbsp;')\n\t\tprefix = prefix.replace(/\\s+$/, '&nbsp;')\n\t\tsuffix = suffix.replace(/^\\s+/, '&nbsp;')\n\t\tsuffix = suffix.replace(/\\s+$/, '&nbsp;')\n\t\t\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<slot name=\"before\"></slot>\n\t\t\t<main>\n\t\t\t\t<slot name=\"control\"></slot>\n\t\t\t\t<slot name=\"main\"></slot>\n\t\t\t\t<div class=\"prefix\">${prefix}</div>\n\t\t\t\t<div class=\"label\">${label}</div>\n\t\t\t\t<div class=\"suffix\">${suffix}</div>\n\t\t\t\t<div class=\"btns\">\n\t\t\t\t\t<span class=\"btn-save\">\n\t\t\t\t\t\t<svg class=\"check\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"btn-cancel\">\n\t\t\t\t\t\t<svg class=\"j2dfb39\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path><path fill=\"none\" d=\"M0 0h24v24H0z\"></path></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t\t<slot name=\"help\"></slot>\n\t\t\t<slot name=\"after\"></slot>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis.control = this.querySelector('[slot=\"control\"], .control, text-field, rich-text-field, select-field, check-box, radio-group')\n\t\t\n\t\tif( this.control ){\n\t\t\t\n\t\t\tthis.control.slot = 'control'\n\n\t\t\tthis.mutationObserver = new MutationObserver(mutations=>{\n\t\t\t\tmutations.forEach(m=>{\n\t\t\t\t\t\n\t\t\t\t\t// mirror these attributes from the control onto the form-control\n\t\t\t\t\tif( ['invalid', 'empty', 'no-value', 'falsy', 'focused'].includes(m.attributeName) ){\n\t\t\t\t\t\tif( this.control.hasAttribute(m.attributeName) )\n\t\t\t\t\t\t\tthis.setAttribute(m.attributeName, true)\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.removeAttribute(m.attributeName)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\t\t\tthis.mutationObserver.observe(this.control, { attributes: true, childList: false, subtree: false });\n\n\t\t\t// if native input, we need to add a helper to set expected values for mutation observer above\n\t\t\tif( this.control.tagName == 'INPUT' )\n\t\t\t\tnativeInputHelper(this.control)\n\t\t}\n\t\t\n\t\tthis.addEventListener('click', this._onClick.bind(this), true)\n\t\t\n\t\tthis.addEventListener('change', this._onChange)\n    }\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\n\t\tif( e.target.tagName == 'FORM-CONTROL') return\n\t\t\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\tkey: this.key\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t\t\n\t\t// hide slots that are empty\n\t\tthis.$$('slot').forEach(slot=>{\n\t\t\tif( slot.assignedNodes().length == 0 )\n\t\t\t\tslot.setAttribute('hidden', '')\n\t\t\telse\n\t\t\t\tslot.removeAttribute('hidden')\n\t\t})\n\t\t\n\t\t// defer - then make sure the form-control remains as wide as the label\n\t\tsetTimeout(()=>{\n\t\t\tif( this.style.minWidth == '' )\n\t\t\t\tthis.style.minWidth = this.$('.label').offsetWidth\n\n\t\t\tif( this.control )\n\t\t\t\tthis.control.disabled = this.disabled\n\t\t},0)\n\t\t\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled']; }\n\t\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' && this.control && this.control.disabled !== undefined)\n\t\t\tthis.control.disabled = this.disabled\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){ val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\n\t\n\tget key(){ return this.getAttribute('key')}\n\t\n\tget value(){\n\t\treturn this.control && this.control.value\n\t}\n\t\n\tset value(val){\n\t\tif( this.control )\n\t\t\tthis.control.value = val\n\t\t\n\t\tif( this.control && this.control.tagName == 'INPUT' )\n\t\t\tthis.control.dispatchEvent(new CustomEvent('change:value'))\n\t}\n\n\tget dbValue(){\n\t\tlet control = this.control\n\t\tif( !control ) return undefined\n\t\tlet val = control.dbValue\n\t\treturn val !== undefined ? val : control.value\n\t}\n\t\n\tget options(){ return this.control && this.control.options}\n\t\n\tset options(val){\n\t\tif( this.control )\n\t\t\tthis.control.options = val\n\t}\n\t\t\n\tget isInvalid(){\n\t\treturn this.control&&this.control.isInvalid\n\t}\n\n\tget label(){ return this.$('.label').innerText }\n\tset label(str){\n\t\tthis.$('.label').innerHTML = str\n\t\tif( str ){\n\t\t\tthis.setAttribute('nolabel', '')\n\t\t}else{\n\t\t\tthis.removeAttribute('nolabel')\n\t\t}\n\t}\n\t\n\t_setClassNames(){\n\t\t\n\t\tlet labelNodes = this.$('.label').childNodes\n\t\t\n\t\tif( labelNodes.length == 0 || (labelNodes[0].tagName == 'SLOT' && labelNodes[0].assignedNodes().length == 0) )\n\t\t\tthis.setAttribute('nolabel', '')\n\t}\n\t\n\t_onClick(e){\n\t\t// console.log(e.target);\n\t\tif( e.target == this )\n\t\t\tthis.focus()\n\t\t// if( !e.target.isFocused && !e.target.slot)\n\t\t// \tthis.focus()\n\t}\n\t\n\tfocus(){\n\t\tthis.control && this.control.focus()\n\t}\n\n}\n\ncustomElements.define('form-control', FormControlElement)\n\nexport default customElements.get('form-control')\n","import moment from 'moment';\nimport {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n    display: inline-block;\n    --color: var(--fc-theme);\n    --radius: 4px;\n    text-align: left;\n    border-radius: var(--radius);\n    /* background: #fff; */\n}\n\nmain > header {\n    background: var(--color);\n    color: #fff;\n    padding: 1em 1em 1.25em 1em;\n    border-radius: var(--radius) var(--radius) 0 0;\n    display: grid;\n    grid-template-columns: 1fr auto\n}\n\nmain > header * {\n    margin: 0;\n    padding: 0;\n    font-weight: normal;\n    cursor: pointer;\n    display: inline-block;\n    justify-self: flex-start;\n}\n\nmain > header .today {\n    text-transform: uppercase;\n    font-size: .7em;\n    font-weight: bold;\n    justify-self: flex-end;\n    align-self: flex-start;\n    opacity: .6;\n}\n\nmain > header .today:hover {\n    opacity: 1;\n}\n\nmain > header h4 {\n    margin: 0 0 .75em 0;\n}\n\nmain:not(.pick-year) > header h4 {\n    color: rgba(255,255,255,.5);\n}\n\nmain.pick-year > header h1 {\n    color: rgba(255,255,255,.5);\n}\n\nsection {\n    padding: 1em;\n    position: relative;\n}\n\nnav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    user-select: none;\n}\n\nnav > svg {\n    height: 1.4em;\n    padding: .25em;\n    margin: -.25em;\n\tcolor: var(--theme-color, #000);\n    opacity: .4;\n    cursor: pointer;\n\n}\n\nnav > svg:hover {\n    opacity: 1;\n}\n\nsvg > * {\n\tpointer-events: none;\n}\n\nsection header,\nsection .days {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n    font-size: .8em;\n    text-align: center;\n}\n\nmain.pick-year section > *,\nmain.pick-month section > *{\n\tvisibility: hidden\n}\n\nsection header {\n    color: var(--theme-color-accent, rgba(0,0,0,.3));\n    margin: 1em 0;\n    font-size: .7em;\n}\n\nday {\n    padding: .7em;\n    height: 1.4em;\n    width: 1.4em;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 2em;\n    cursor: pointer;\n}\n\nday[active] {\n    background: var(--color);\n    color: #fff;\n}\n\nday[today]:not([active]) {\n    color: var(--color)\n}\n\n\nyears,\nmonths {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    overflow: auto;\n    /* background: #fff; */\n    border-radius: 0 0 var(--radius) var(--radius);\n\tvisibility: visible !important;\n}\n\nmain:not(.pick-year) years {\n    display: none;\n}\n\nyear {\n    padding: .5em 0;\n    cursor: pointer;\n}\n\nyear[active],\nmonth[active] {\n    color: var(--color);\n    font-size: 1.4em;\n}\n\nmonths {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\tgrid-template-rows: 1fr 1fr 1fr 1fr;\n\talign-content: space-around;\n}\n\nmonth {\n    justify-self: stretch;\n    align-self: stretch;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\nmain:not(.pick-month) months {\n    display: none;\n}\n\n:host([calendar-only]) main > header {\n    display: none;\n}`\n\nconst changeEvent = function(el, details={}){\n    var event = new CustomEvent('change', {\n        bubbles: true,\n        composed: true,\n        detail: Object.assign({}, details, {\n            value: el.value\n        })\n    });\n    \n    el.dispatchEvent(event)\n}\n\nclass DatePickerElement extends HTMLElement {\n\n\tconstructor(){\n\t\tsuper()\n\t\n\t\tlet htmlDaysHeader = moment.weekdaysMin().map(str=>`<div>${str}</div>`).join(\"\\n\")\n\n\t\tlet startYear = parseInt(this.getAttribute('year-start') || '1900')\n\t\tlet endYear = parseInt(this.getAttribute('year-end') || '2099')\n\t\tlet years = ''\n\t\twhile(startYear <= endYear){\n\t\t\tyears += `<year value=\"${startYear}\">${startYear++}</year>`\n        }\n        \n        let months = moment.monthsShort().map((m,i)=>`<month value=\"${i}\">${m}</month>`).join(\"\\n\")\n\n\t\tthis.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n        temp.innerHTML = `\n\t\t\t<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<header>\n\t\t\t\t\t<h4 class=\"selected-year\">Year</h4>\n\t\t\t\t\t<a class=\"today\">Today</a>\n\t\t\t\t\t<h1 class=\"selected-date\">Date, Day</h1>\n\t\t\t\t</header>\n\t\t\t\t<section>\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<svg class=\"back\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<div class=\"viewing-month\">Month</div>\n\t\t\t\t\t\t<svg class=\"forward\" focusable=\"false\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"></path>\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</nav>\n\t\t\t\t\t<header>${htmlDaysHeader}</header>\n\t\t\t\t\t<div class=\"days\"></div>\n                    <years>${years}</years>\n                    <months>${months}</months>\n\t\t\t\t</section>\n\t\t\t</main>`\n\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\t\n\t\tthis._yearEl = this.$('.selected-year')\n\t\tthis._dateEl = this.$('.selected-date')\n\t\tthis._monthEl = this.$('.viewing-month')\n\t\tthis._monthDays = this.$('main .days')\n\n\t\tthis.shadowRoot.querySelector('main').addEventListener('click', this._onClick.bind(this))\n\t}\n\n\tconnectedCallback(){\n\t\tthis._setDate(this.value)\n    }\n    \n    get value(){ return this.getAttribute('value') }\n\tset value(val){ this._setDate(val) }\n\n\tget format(){ return this.getAttribute('format') || 'MM/DD/YYYY'}\n\tset format(val){ this.setAttribute('format', val) }\n\n\tget date(){ return this._dateSelected.clone() }\n\tget isValid(){ return this._dateSelected.isValid() }\n\n\tformatted(format){\n\t\tif( format === undefined )\n\t\t\tformat = this.format\n\n\t\treturn this._dateSelected.format(format)\n\t}\n\n\t_renderMonth(){\n\n\t\tlet start = this._date.weekday()\n\t\tlet numDays = this._date.daysInMonth()\n\t\tlet days = new Array(7*6).fill('')\n\t\tlet i = 0\n\n\t\twhile(i<numDays){ days[i+start] = ++i }\n\n\t\tthis._monthDays.innerHTML = days.map(day=>`<day value=\"${day}\">${day}</day>`).join(\"\\n\")\n        this._monthEl.innerHTML = this._date.format('MMMM YYYY')\n        \n        if( this._lookingAtSelectedMonth ){\n\n            let elSelected = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( elSelected )\n\t\t\t\telSelected.setAttribute('active', '')\n        }\n\n        if( this._lookingAtToday ){\n            let el = this.$(`day[value=\"${this._today.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('today', '')\n        }\n\t}\n\n\tnextMonth(){\n\t\tthis._date.add('month', 1)\n\t\tthis._renderMonth()\n\t}\n\n\tprevMonth(){\n\t\tthis._date.add('month', -1)\n\t\tthis._renderMonth()\n\t}\n\n\tpickYear(show=true){\n\n        this.pickMonth(false)\n\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-year')\n\n\t\t\tlet activeYear = this.$('year[active]')\n\t\t\tif( activeYear )\n\t\t\t\tactiveYear.scrollIntoView()\n\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-year')\n    }\n    \n    pickMonth(show=true){\n\t\tif( show ){\n\t\t\tthis.$('main').classList.add('pick-month')\n\t\t}else\n\t\t\tthis.$('main').classList.remove('pick-month')\n\t}\n\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\n\t_onClick(e){\n\t\t\n\t\tif( e.target.tagName == 'DAY' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: this._date.year(),\n\t\t\t\t\tmonth: this._date.month(),\n\t\t\t\t\tdate: val\n                })\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.tagName == 'YEAR' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n\t\t\t\t\tyear: val\n\t\t\t\t})\n                this.pickYear(false)\n\t\t\t}\n\t\t\treturn\n        }\n        \n        if( e.target.tagName == 'MONTH' ){\n\t\t\tlet val = e.target.getAttribute('value')\n\t\t\tif( val ){\n\t\t\t\tthis._setDate({\n                    date: 1,\n\t\t\t\t\tmonth: val\n\t\t\t\t})\n                this.pickMonth(false)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif( e.target.classList.contains('selected-year') )\n\t\t\treturn this.pickYear()\n\n\t\tif( e.target.classList.contains('selected-date') )\n\t\t\treturn this.pickYear(false)\n\n\t\tif( e.target.classList.contains('today') ){\n            this.pickMonth(false)\n            this.pickYear(false)\n            return this._setDate()\n        }\n            \n        if( e.target.classList.contains('viewing-month') )\n            return this.pickMonth()\n\n\t\tif( e.target.tagName == 'svg' ){\n\t\t\te.target.classList.contains('back') ? this.prevMonth() : this.nextMonth()\n\t\t\treturn\n\t\t}\n    }\n    \n    get _lookingAtToday(){\n        this._today = this._today || moment()\n        return this._date.year() == this._today.year() && this._date.month() == this._today.month()\n    }\n\n    get _lookingAtSelectedMonth(){\n        this._today = this._today || moment()\n        return this._date.year() == this._dateSelected.year() && this._date.month() == this._dateSelected.month()\n    }\n\n\t_setDate(val){\n\n\t\tif( val && typeof val == 'object' ){\n\t\t\tthis._dateSelected.set(val)\n\t\t\tthis._date.set(val)\n\n\t\t\tchangeEvent(this, val)\n\t\t}else{\n\t\t\tthis._date = val ? moment(val, this.format) : moment()\n\t\t\tthis._dateSelected = this._date.clone()\n\t\t}\n\n\t\tthis._date.set({date: 1})\n\n\t\tthis._renderMonth()\n\t\tthis._refresh()\n\t}\n\n\t_refresh(){\n\n\t\tif( this._dateSelected.isValid() )\n\t\t\tthis.removeAttribute('invalid')\n\t\telse\n\t\t\tthis.setAttribute('invalid', '')\n\n\t\tthis.setAttribute('value', this.formatted())\n\n        this.$$('[active]').forEach(el=>el.removeAttribute('active'))\n\n\t\tif( !this._dateSelected.isValid() ){\n\t\t\tthis._yearEl.innerHTML = ''\n\t\t\tthis._dateEl.innerHTML = 'Invalid'\n\t\t\treturn\n\t\t}\n\n\t\tif( this._lookingAtSelectedMonth ){\n\t\t\tlet el = this.$(`day[value=\"${this._dateSelected.date()}\"]`)\n\t\t\tif( el )\n\t\t\t\tel.setAttribute('active', '')\n\t\t}\n\n\t\tlet yearEl = this.$(`year[value=\"${this._dateSelected.year()}\"]`)\n\t\tif( yearEl ){\n\t\t\tyearEl.setAttribute('active', '')\n        }\n        \n        let monthEl = this.$(`month[value=\"${this._dateSelected.month()}\"]`)\n\t\tif( monthEl ){\n\t\t\tmonthEl.setAttribute('active', '')\n\t\t}\n\n\t\tthis._yearEl.innerHTML = this._dateSelected.year()\n\t\tthis._dateEl.innerHTML = this.formatted('ddd, MMM D')\n    }\n}\n\n\ncustomElements.define('date-picker', DatePickerElement)\n\nexport default customElements.get('date-picker')\n","/*\n    HTML Cleaner\n\n    Takes a string of html and removes non-standard\n    html, removes inline styles and classes, and removes\n    any new lines. The end result is a much cleaner\n    underlying html structure.\n\n    ```\n    import {htmlCleaner} from 'util/html-cleander'\n    let html = htmlCleaner.clean(strOfHtml)\n    ```\n\n    You can override the parser if you need (for example, in node.js)\n    \n    ```\n    htmlCleaner.parser = function(str){ return [document, body] }\n    ```\n*/\n\nfunction parser(str){\n    if( typeof DOMParser === 'undefined' )\n        throw Error('DOMParser does not exist')\n        \n    var dom = new DOMParser().parseFromString(str, \"text/html\");\n    return [typeof document !== 'undefined' ? document : dom, dom.body||dom]\n}\n\nfunction stripHTML(str){\n    var [document, body] = this.parser(str)\n    let childNodes = Array.from(body.childNodes)\n    return childNodes.map(node=>node.textContent).join(' ')\n}\n\nfunction clean(str){\n\n    var [document, body] = this.parser(str)\n    var el = document.createElement('div')\n    var p = null\n\n    let childNodes = Array.from(body.childNodes)\n\n    // if there is only one child node and its a paragraph, lets loop \n    // through its child nodes (we'll recreate the <p> tag down below)\n    // we do this because I've seen copy that has fake paragraphs \n    // using br tags inside a paragraph: <p>para 1<br><br>para 2</p>\n    if( childNodes.length == 1 && childNodes[0].tagName == 'P' )\n        childNodes = Array.from(childNodes[0].childNodes)\n\n    childNodes.forEach(node=>{\n\n        // top level <br> tags terminate the current <p>\n        if( node.nodeName == 'BR' )\n            return p = null\n\n        // if we have a top level <p>, lets keep it\n        if( node.nodeName == 'P' ){\n            p = node\n\n            // clean all its children\n            cleanNode(null, p)\n\n            // if NOT empty after cleaning, keep it\n            if( p.innerText !== '')\n                el.appendChild(p)\n\n            return\n        \n        // all other tags\n        }else{\n\n            // create a top level <p> if we dont have one\n            if( !p ){\n                p = document.createElement('p')\n                el.appendChild(p)\n            }\n        \n            // cleaning will append to `p`\n            cleanNode(p, node)\n        }\n    })\n\n    let html = el.innerHTML ? el.innerHTML : Array.from(el.childNodes).map(node=>node.toString()).join('')\n\n    // remove line breaks as they dont provide anything and can cause problems in csv exports\n    html = html.replace(/[\\n\\r]/g, ' ')\n\n    return html\n}\n\nfunction cleanNode(parent, node){\n\n    // remove all attributes known to be a problem\n    if( node.removeAttribute ){\n        \n        let isItalic = node.style && node.style.fontStyle == 'italic'\n        let isBold = node.style && node.style.fontWeight == 'bold'\n        \n        node.removeAttribute('id')\n        node.removeAttribute('class')\n        node.removeAttribute('style')\n\n        // reapply certain styles // TODO: add option for whether we do this?\n        if( isItalic && !['I', 'EM'].includes(node.nodeName) )\n            node.style.fontStyle = 'italic'\n        if( isBold  && !['B', 'STRONG'].includes(node.nodeName) )\n            node.style.fontWeight = 'bold'\n    }\n\n    // if the node is a comment or a known weird tag (word docs have things like <o:p>) remove it\n    if( node.nodeName == '#comment' || node.nodeName.match(/:/) )\n        return node.remove()\n\n    // if text node, do some cleaning\n    else if( node.nodeName == \"#text\" ){\n\n        // if the text node is just spaces, remove them\n        // node.textContent = node.textContent.replace(/^\\s+$/g, '')\n\n        // swap multiple spaces in a row for just one space\n        node.textContent = node.textContent.replace(/\\s{2,}/g, ' ')\n\n        // optionally clean more data for platforms that need it\n        // TEST\n        // simplifyTextNode(node)\n    }\n\n    // clean all child nodes of this node\n    let childNodes = node.childNodes ? Array.from(node.childNodes) : []\n    childNodes.forEach(n=>cleanNode(node, n))\n\n    // remove any empty nodes (but keep <br> which are always empty)\n    if( node.nodeName != 'BR' && node.innerText == '' )\n        return node.remove()\n\n    // if( parent && parent.tagName == 'P' ){\n    if( parent ){\n\n        // keep spans that have styles since they will be bold/italics\n        if( node.nodeName == 'SPAN' && node.hasAttribute('style') ){\n            parent.appendChild(node)\n\n        // keep tags we want\n        // TODO: make list of tags an option?\n        }else if( ['#text', 'p', 'br', 'b', 'strong', 'em', 'i', 'ul', 'ol', 'li'].includes(node.nodeName.toLowerCase()) ){\n            // make sure inline elements dont start with a <br> tag ie <br><i><br> as this will parse to <p><i><br> and break Quill\n            if( ['i', 'b', 'strong', 'em'].includes(node.nodeName.toLowerCase()) ){\n                if( node.childNodes[0] && node.childNodes[0].nodeName == 'BR' )\n                    node.childNodes[0].remove()\n            }\n            // if( parent.tagName == 'P' )\n            parent.appendChild(node)\n\n        // remove tags we dont want, but keep their contents\n        // example: <font>we want to keep this text and any <b>good</b> tags</font>\n        }else{\n\n            if( node.remove )\n                node.remove()\n            else\n                node.parentNode.removeChild(node) // node.js xmldom\n\n            childNodes = Array.from(node.childNodes)\n            childNodes.forEach(child=>{\n                parent.appendChild(child)\n            })\n        }\n    }\n\n    return node\n}\n\n\nfunction simplifyTextNode(node){\n    // replace fancy quotes with simple ones\n    node.textContent = node.textContent.replace(/[]/g, '\"')\n    node.textContent = node.textContent.replace(/[]/g, \"'\")\n\n    // replace mdash and ndash with regular dashes\n    node.textContent = node.textContent.replace(/[]/g, \"-\")\n\n    // replace ellipsis\n    node.textContent = node.textContent.replace(//g, \"...\")\n}\n\n\nmodule.exports = {\n    clean: clean,\n    stripHTML: stripHTML,\n    parser: parser\n}","\nexport default (str='') => {\n    return str.replace(/\\b'\\b/g, \"\\u2019\")                      // apostrophes\n            .replace(/'(?=[^>]*<)\\b/g, \"\\u2018\")     \t\t\t// Opening singles\n            .replace(/\\b([\\.\\?\\!,]*)(?=[^>]*<)'/g, \"$1\\u2019\")  // Closing singles\n            .replace(/\"(?=[^>]*<)\\b/g, \"\\u201c\")     \t\t\t// Opening doubles\n            .replace(/\\b([\\.\\?\\!,]*)(?=[^>]*<)\"/g, \"$1\\u201d\")  // Closing doubles\n            .replace(/\\.\\.\\./g,  \"\\u2026\")     \t\t\t        // ellipsis\n            .replace(/--/g,  \"\\u2014\")     \t\t\t\t        // em-dashes\n}","// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nmodule.exports = (strData, {strDelimiter=',', hasHeader=true}={})=>{\n\n    // Create a regular expression to parse the CSV values.\n    var objPattern = new RegExp(\n        (\n            // Delimiters.\n            \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n            // Quoted fields.\n            \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n            // Standard fields.\n            \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"\n        ),\n            \"gi\"\n        );\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    var arrData = [[]];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    var arrMatches = null;\n\n    strData = strData.trim();\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    while (arrMatches = objPattern.exec( strData )){\n\n        // Get the delimiter that was found.\n        var strMatchedDelimiter = arrMatches[ 1 ];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n        ){\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push( [] );\n        }\n\n        var strMatchedValue;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[ 2 ]){\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[ 2 ].replace(\n            new RegExp( \"\\\"\\\"\", \"g\" ),\n                \"\\\"\"\n            );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[ 3 ];\n\n        }\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[ arrData.length - 1 ].push( strMatchedValue );\n    }\n\n    if( hasHeader ){\n        let header = arrData.shift()\n    \n        arrData = arrData.map(line=>{\n            let obj = {};\n            header.forEach((key, i) => obj[key] = line[i]);\n            return obj\n        })\n    }\n\n    // Return the parsed data.\n    return( arrData );\n}","/*\n\tPlural - create singular or plural sentence based on number given (all numbers but 1 return plural sentence)\n\n\tNew Plural (tagged template)\n\tplural`There {are|is} ${num} item[s]`\n\t\n\tPlaceholders:\n\t{plural|singular} => evaluates based on the following number\n\t[plural|singular] => evaulates based on the preceding number\n\t[plural]\n\n\tOld Plural:\n\tvar str = \"Do you want to delete this? There {are|is} [num] book{s} attached.\"\n\n\tvar num = 2 // or 0, 3, 4, ...\n\t\t\"Do you want to delete this? There are 2 books attached.\"\n\n\tvar num = 1\n\t\t\"Do you want to delete this? There is 1 book attached.\"\n*/\n\nmodule.exports = function(strings, ...keys){\n\t\n\tif( typeof strings == 'string')\n\t\treturn oldPlural(strings, keys[0])\n\t\n\tlet str = ''\n\tstrings.forEach((s,i)=>{\n\t\t\n\t\tlet valAfter = keys[i]||''\n\t\tif( valAfter && typeof valAfter == 'number' ){\n\t\t\tlet indx = valAfter == 1 ? 1 : 0;\n\t\t\ts = s.replace(/\\{(.[^}]*)}/g, function(wholematch,firstmatch){\n\t\t\t\tvar values = firstmatch.split('|');\n\t\t\t\treturn values[indx] || '';\n\t\t\t});\n\t\t}\n\t\t\n\t\tlet valBefore = keys[i-1]||''\n\t\t\n\t\tif( valBefore && typeof valBefore == 'number' ){\n\t\t\tlet indx = valBefore == 1 ? 1 : 0;\n\t\t\ts = s.replace(/\\[(.[^\\]]*)\\]/g, function(wholematch,firstmatch){\n\t\t\t\tvar values = firstmatch.split('|');\n\t\t\t\treturn values[indx] || '';\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tstr += valBefore + s\n\t})\n\treturn str\n}\n\n// DEPRECATED\nfunction oldPlural(str, num){\n\t\n\tif( num instanceof Array )\n\t\tnum = num.length\n\tif( num instanceof Object )\n\t\tnum = Object.keys(num).length\n\t\n\tvar indx = num == 1 ? 1 : 0;\n\n\tif( typeof num != 'number' ){\n\t\tif( globalThis._ === undefined )\n\t\t\treturn console.warn('underscore not installed')\n\n\t\tif( !_.numberFormat )\n\t\t\treturn console.warn('underscore.string not installed')\n\t\t\n\t\tnum = parseFloat(num)\n\t\tnum = _.numberFormat(parseFloat(num), ((num % 1)>0?1:0) )\n\t}\n\n\tstr = str.replace(/\\[num\\]/, num);\n\n\tstr = str.replace(/{(.[^}]*)}/g, function(wholematch,firstmatch){\n\n\t\tvar values = firstmatch.split('|');\n\n\t\treturn values[indx] || '';\n\t});\n\n\treturn str;\n}","\nexport default (file)=>{\n\n    return new Promise(resolve=>{\n\n        var reader = new FileReader();\n\n        reader.onload = e=>{\n            var text = reader.result;\n            resolve(text)\n        }\n\n        reader.readAsText(file);\n    \n    })\n\n}","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var toString = require('./toString'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nmodule.exports = capitalize;\n","import capitalize from 'lodash/capitalize'\n\nexport default str => {\n    return str.replace(/[\\-_]/g, ' ')\n            .split(' ')\n            .map(word=>capitalize(word))\n            .join(' ')\n}","\nexport default (rawData, opts)=>{\n\n\topts = Object.assign({\n\t\tdelimiter: ',',\n\t\tnewline: \"\\n\",\n\t\ttitle: '',\n\t\tdescription: '',\n\t\theader: true,\n\t}, opts)\n\n\n\tif( !rawData || rawData.length == 0 )\n\t\treturn console.log('No data to export');\n\n\t// see if the array of data contains Backbone Models or custom classes that implement `toCSV` or `toJSON`\n\trawData = rawData.map(d=>{\n\t\tif( d && d.toCSV )\n\t\t\treturn d.toCSV()\n\n\t\tif( d && d.toJSON )\n\t\t\treturn d.toJSON()\n\t\t\n\t\treturn d\n\t})\n\t\n\tvar header = Object.keys(rawData[0])\n\tvar rows = rawData.map(d=>Object.values(d))\n\t\t\t\t\n\tvar data = opts.header === false ? rows : [header].concat(rows);\n\n\tif( opts.title || opts.description )\n\t\tdata.unshift([]);\n\n\tif( opts.description )\n\t\tdata.unshift([opts.description]);\n\n\tif( opts.title )\n\t\tdata.unshift([opts.title]);\n\t\n\t// clean data\n\tdata = data.map(row=>{\n\t\treturn row.map(val=>{\n\t\n\t\t\t// encapsulate in \"\" if the value contains a delimiter or new line\n            // TODO: this needs to be dynamic to match the opts\n\t\t\tif( typeof val === 'string' && val.match(/,|\\n|\"/) ){\n\t\t\t\tval = '\"'+val.replace(/\"/gi,'\"\"')+'\"';\n\t\t\t}\n\t\n\t\t\treturn val;\n\t\t})\n\t})\n\t\n\tlet csvContent = \"\\ufeff\"; // utf-8 bom\n\tdata.forEach(function(infoArray, index){\n\t   let dataString = infoArray.join(opts.delimiter);\n\t   csvContent += index < data.length ? dataString+ opts.newline : dataString;\n\t});\n\n\t\n\treturn csvContent\n}","\nexport default (ts=0)=>{\n    return new Promise(resolve=>{\n        setTimeout(_=>{\n            resolve()\n        }, ts)\n    })\n}","export {default as htmlCleaner} from './htmlCleaner'\nexport {default as normalizeText} from './normalizeText'\nexport {default as csvToArray} from './csvToArray'\nexport {default as plural} from './plural'\nexport {default as readFile} from './readFile'\nexport {default as titleize} from './titleize'\nexport {default as toCSV} from './toCSV'\nexport {default as wait} from './wait'","import {css} from 'lit-element'\nimport moment from 'moment'\nimport Dialog from '../../dialog'\nimport './date-picker'\nimport setValueAttrs from '../util/setValueAttrs'\nimport validatePattern from '../util/validatePattern'\nimport stopMaxLength from '../util/stopMaxLength'\nimport {normalizeText, htmlCleaner} from '../../../util'\n\nconst styles = css`\n:host {\n\tdisplay: inline-block;\n\tcontain: layout;\n\tmin-width: .25em;\n}\n\n:host(:not([disabled])){\n\tcursor: text;\n}\n\n:host(:not([disabled])) main ::selection {\n\tbackground: var(--selectionBgd, #FFF8E1);\n}\n\nmain {\n\tdisplay: flex;\n}\n\n:host([input]) .editor {\n\tdisplay: none;\n}\n\n:host(:not([input])) .input {\n\tdisplay: none;\n}\n\n.input {\n\toutline: none;\n\twidth: 100%;\n\tdisplay: inline-block;\n\tmin-height: 1em;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tline-height: 1.2em;\n\tmargin: -.1em 0;\n\tborder: none;\n\tbackground: transparent;\n\t/* background: yellow; */\n}\n\n.editor {\n\tposition: relative;\n\toutline: none;\n\twidth: 100%;\n\tdisplay: inline-block;\n\twhite-space: pre-wrap;\n\tmin-height: 1em;\n\tline-height: 1.2em;\n\tmargin: -.1em 0;\n}\n\n.editor p:first-child{ margin-top: 0;}\n.editor p:last-child{ margin-bottom: 0;}\n\n/* :host([single-line]) .editor {\n\twhite-space: nowrap;\n\toverflow-x: auto;\n\toverflow-x: -moz-scrollbars-none; \n}\n\n:host([single-line]) .editor::-webkit-scrollbar {\n\twidth: 0 !important;\n} */\n\n:host([empty]) .editor:before {\n\tcontent: attr(data-placeholder);\n\tcolor: var(--placeholderColor);\n\t/* position: absolute; */\n}\n\n:host([multiline]) .editor:before {\n\tposition: absolute;\n\tleft: 0;\n    right: 0;\n}\n\n/* keep placeholder on one line, clipping to ellipsis when overflowed */\n:host(:not([multiline])) .editor:before {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 100%;\n}\n\n.calendar {\n\tdisplay: none;\n\topacity: .3;\n\theight: 1.2em;\n    margin: -0.3em -.5em -.5em 0;\n    padding: .25em;\n\tcursor: pointer;\n\tposition: relative;\n\tz-index: 1000;\n}\n\n:host([type=\"date\"]) .calendar {\n\tdisplay: inline-block;\n}\n\n:host([type=\"date\"][disabled]) .calendar {\n\tdisplay: none;\n}\n\n/* .calendar:hover,\n.calendar.popover-open {\n\topacity: .7;\n} */\n\n.input::-webkit-calendar-picker-indicator,\n.input::-webkit-inner-spin-button { \n    display: none;\n}\n\ninput:-webkit-autofill {\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tbackground: red;\n}\n\n/* remove autofill blue/yellow background */\ninput:-webkit-autofill {\n    -webkit-box-shadow:0 0 0 50px var(--bgd) inset;\n    /* -webkit-text-fill-color: #333; */\n}\n\ninput:-webkit-autofill:focus {\n    -webkit-box-shadow: 0 0 0 50px var(--bgd) inset;\n    /* -webkit-text-fill-color: #333; */\n} \n`\n\nclass TextFieldElement extends HTMLElement {\n\t\n\tconstructor() {\n        super()\n\t\t\n        let shadow = this.attachShadow({mode: 'open'})\n        let temp = document.createElement('template')\n\t\t\n\t\tlet placeholder = this.getAttribute('placeholder') || ''\n\t\t\n        temp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t\n\t\t\t\t<div class=\"editor\" contenteditable=\"true\" data-placeholder=\"${placeholder}\"></div>\n\t\t\t\t\n\t\t\t\t<input class=\"input\" placeholder=\"${placeholder}\" \n\t\t\t\t\t\ttype=\"${this.input||'text'}\" \n\t\t\t\t\t\tname=\"${this.name||this.input}\"\n\t\t\t\t\t\tautocomplete=\"${this.autocomplete}\">\n\t\t\t\t\t\t\n\t\t\t\t<b-icon name=\"calendar-3\" class=\"calendar\"></b-icon>\n\t\t\t</main>\n\t\t\t<slot id=\"value\"></slot>`\n\t\t\t\n        this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\n\t\tif( this.isMultiline )\n\t\t\tthis.removeAttribute('input')\n\t\t\n\t\tlet value = this.$('#value')\n\t\tthis._val = value.assignedNodes().map(el=>el.textContent.trim()).join(' ')\n\t\tthis._val = this._val.replace(/^\\n|\\n$/g, '').trim()\n\t\t\n\t\tthis._editor = this.$('.editor')\n\t\tthis._input = this.$('.input')\n\n\t\tif( this.type == 'date' ){\n\t\t\tthis._datePicker = document.createElement('date-picker')\n\t\t\tthis._datePicker.value = this.value\n\t\t\tthis._datePicker.format = this.format\n\n\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\tlet date = moment(this._val)\n\t\t\t\tthis._val = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( this._val ){\n\t\t\tthis._editor.innerHTML = htmlCleaner.clean(this._val)\n\t\t\tthis._input.value = this._val\n\t\t}\n\n\t\tif( !this._val && this.isMultiline && !this.isPlain ){\n\t\t\tthis._val = '<p><br></p>'\n\t\t\tthis._editor.innerHTML = this._val\n\t\t}\n\t\t\n\t\tthis.innerText = ''\n\t\t\n\t\tthis._editor.addEventListener('paste', this._onPaste.bind(this), true)\n\t\tthis._editor.addEventListener('keydown', this._onKeydown.bind(this), true)\n\t\tthis._input.addEventListener('keydown', this._onKeydown.bind(this), true)\n\t\tthis._editor.addEventListener('keyup', this._onKeypress.bind(this), true)\n\t\tthis._editor.addEventListener('blur', this._onBlur.bind(this))\n\t\tthis._input.addEventListener('blur', this._onBlur.bind(this))\n\n\t\tthis.shadowRoot.addEventListener('click', this._onClick.bind(this))\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\n\t\tthis.shadowRoot.querySelector('.calendar').addEventListener('click', this._onClick.bind(this))\n    }\n\t\n\t$(str){ return this.shadowRoot.querySelector(str)}\n\t$$(str){ return this.shadowRoot.querySelectorAll(str)}\n\t\n\tconnectedCallback(){\n\t\tthis._setClassNames()\n\t}\n\t\n\tdisconnectedCallback(){}\n\t\n\tstatic get observedAttributes() { return ['disabled', 'placeholder']; }\n\tattributeChangedCallback(name, oldValue, newValue){\n\t\t\n\t\tif( name === 'disabled' )\n\t\t\tthis._editor.contentEditable = !this.disabled\n\n\t\tif( name === 'placeholder' )\n\t\t\tthis._editor.dataset.placeholder = newValue\n\t}\n\t\n\tget input(){ return this.getAttribute('input') }\n\tget type(){ return this.getAttribute('type') }\n\tget name(){ return this.getAttribute('name') }\n\tget autocomplete(){ return this.getAttribute('autocomplete') }\n\tget format(){ return this.getAttribute('format') || 'MM/DD/YYYY' }\n\n\tget isMultiline(){ return this.hasAttribute('multiline') }\n\tget isHTML(){ return this.hasAttribute('html') }\n\t// get isPlain(){ return this.hasAttribute('plain') }\n\tget isPlain(){ return !this.isHTML }\n\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\tget value(){ return this._val}\n\n\tget textValue(){\n\t\tif( !this.value ) return this.value\n\t\tlet doc = (new DOMParser()).parseFromString(this.value, 'text/html')\n\t\treturn Array.from(doc.body.childNodes).map(node=>node.nodeValue||node.innerText).join(\"\\n\")\n\t}\n\t\n\tset value(val){\n\t\t\n\t\tthis._oldVal = this._val\n\t\t\n\t\tif( this.hasAttribute('default') && !val ){\n\t\t\tval = this.getAttribute('default')\n\t\t\t\n\t\t\tthis._val = val\n\t\t\t\n\t\t\tlet selection = this.select()\n\t\t\tdocument.execCommand('insertText', false, val)\n\t\t\tselection.removeAllRanges();\n\t\t}else{\n\n\t\t\tif( this.type == 'date' ){\n\t\t\t\t\n\t\t\t\tif( val === 'Invalid date' )\n\t\t\t\t\tval = null\n\n\t\t\t\tthis._datePicker.value = val\n\t\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tlet date = moment(val)\n\t\t\t\t\tval = this._datePicker.value = date.format(this._datePicker.format)\n\t\t\t\t}\n\n\t\t\t\tif( !this._datePicker.isValid ){\n\t\t\t\t\tval = this._val\n\t\t\t\t\tthis._datePicker.value = val\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis._val = val\n\n\t\t\tif( this._editor.innerHTML != val ){\n\t\t\t\t\n\t\t\t\tif( this.isMultiline && !this.isPlain )\n\t\t\t\t\tval = val || '<p><br></p>'\n\t\t\t\telse\n\t\t\t\t\tval = val || ''\n\n\t\t\t\tthis._editor.innerHTML = val\n\t\t\t}\n\t\t\t\t\n\t\t\tif( this._input.value != val )\n\t\t\t\tthis._input.value = val\n\t\t}\n\t\t\n\t\tthis._setClassNames()\n\t}\n\n\tget dbValue(){\n\t\tif( this._datePicker )\n\t\t\treturn this.value ? this._datePicker.formatted('YYYY-MM-DD') : this.value\n\t\treturn this.value\n\t}\n\n\tget currentValue(){\n\n\t\t// retain current empty value\n\t\tlet emptyVal = this.value === null ? null : ''\n\n\t\tif( this.isHTML )\n\t\t\treturn this._editor.innerHTML || emptyVal\n\t\t\n\t\tif( this.input )\n\t\t\treturn this._input.value || emptyVal\n\t\t\t\n\t\telse if( this._editor.innerHTML === '<p><br></p>' || this._editor.innerHTML === '<br>' )\n\t\t\treturn emptyVal\n\t\t\n\t\telse\n\t\t\treturn this._editor.innerText || this._editor.innerHTML || emptyVal\n\t}\n\t\n\tset isInvalid(invalid){\n\t\tthis._isInvalid = invalid\n\t\tif( invalid )\n\t\t\tthis.setAttribute('invalid', true)\n\t\telse\n\t\t\tthis.removeAttribute('invalid')\n\t}\n\t\n\tget isInvalid(){\n\t\treturn this._isInvalid\n\t}\n\t\n\tget isFocused(){\n\t\treturn this.shadowRoot.activeElement == this._editor\n\t\t\t|| this.shadowRoot.activeElement == this._input\n\t}\n\t\n\t_setClassNames(){\n\t\tsetValueAttrs(this, this._val)\n\t\tif( this._val && this._val !== '<p><br></p>' )\n\t\t\tthis.removeAttribute('empty')\n\t\telse\n\t\t\tthis.setAttribute('empty', '')\n\t}\n\t\n\t_onClick(e){\n\n\t\t// was calendar icon clicked?\n\t\tif( e.target.classList.contains('calendar') ){\n\t\t\te.stopPropagation()\n\t\t\treturn this.pickDate()\n\t\t}\n\n\t\tif( e.target != this )\n\t\t\treturn\n\n\t\tif( !e.target.isFocused )\n\t\t\tthis.focus()\n\t}\n\n\tasync pickDate(){\n\t\tthis._datePicker.value = this.value\n\t\tlet picker = new Dialog({view: this._datePicker, btns: ['cancel', 'ok']})\n\n\t\tif( await picker.popover(this.$('.calendar'), {\n\t\t\talign: 'left', \n\t\t\toverflowBoundry: 'window',\n\t\t\tmaxHeight: false, \n\t\t\tadjustForMobile: true})\n\t\t){\n\t\t\tthis._changeValue(picker.$('date-picker').value)\n\t\t}\n\t}\n\t\n\t_onPaste(e){\n\t\te.preventDefault();\n\n\t\tlet val = ''\n\n\t\tif( this.isHTML \n\t\t&& !e.clipboardData.types.includes('text/rtf')\n\t\t&& e.clipboardData.types.includes('text/html') )\n\t\t{\n\t\t\tval = e.clipboardData.getData('text/html')\n\t\t\tval = htmlCleaner.clean(val)\n\t\t}else{\n\t\t\tval = e.clipboardData.getData('text')\n\t\t\t\n\t\t\t// remove excessive line breaks\n\t\t\tval = val.replace(/\\n{2,}/g, \"\\n\")\n\t\t}\n\n\t\t// NOTE: using insertHTML (rather than insertText) keeps the browser from\n\t\t// converting line breaks to <div> and <br> tags\n\t\tdocument.execCommand('insertHTML', false, val);\n\t}\n\t\n\tget editorEl(){\n\t\treturn this.input ? this._input : this._editor\n\t}\n\t\n\tselect(range='all'){\n\n\t\tlet el = this.editorEl,\n\t\t    s = window.getSelection(),\n\t\t    r = document.createRange();\n\t\t\n\t\tif( range == 'start' ){\n\t\t\tr.setStart(el, 0);\n\t\t\tr.setEnd(el, 0);\n\t\t}else if( range == 'end' ){\n\t\t\tr.setStart(el, el.childNodes.length);\n\t\t\tr.setEnd(el, el.childNodes.length);\n\t\t}else{\n\t\t\tr.selectNodeContents(el);\n\t\t}\n\t\t\n\t\ts.removeAllRanges();\n\t\ts.addRange(r);\n\t\treturn s\n\t}\n\n\t_onKeypress(e){\n\t\tif( !this.input && this._editor.innerText.trim() == '' )\n\t\t\tthis.setAttribute('empty', '')\n\t\telse\n\t\t\tthis.removeAttribute('empty')\n\t}\n\t\n\t_onKeydown(e){\n\t\tlet stop = false\n\t\t\n\t\tthis.isInvalid = false\n\n\t\tif( e.key.length == 1)\n\t\t\tthis.removeAttribute('empty')\n\n\t\tif( e.key == 'Backspace' && this.isMultiline && this._editor.innerText.trim() == '' ){\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn false\n\t\t}\n\n\t\t// Multiline Plain  only use newlines (keep divs/br from appearing)\n\t\tif( e.key == 'Enter' && this.isMultiline && this.isPlain ){\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\n\t\t\tlet charLen = this._editor.innerText.length\n\t\t\tlet lastChar = this._editor.innerText[charLen-1]\n\t\t\tlet sel = this.shadowRoot.getSelection()\n\t\t\tlet range = sel.getRangeAt(0);\n\n\t\t\tif( range.endOffset < charLen || lastChar=='\\n' )\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, '\\n');\n\t\t\telse\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, '\\n\\n');\n\t\t\t\n\t\t\treturn false\n\t\t}\n\t\t\n\t\tif( e.key == 'Enter' && (!this.isMultiline || e.metaKey || e.ctrlKey )){\n\t\t\tstop = true\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\n\t\t\t// NOTE: will this be weird to not blur on enter?\n\t\t\tthis._onBlur() // doesn't actually blur, but does the logic like it did\n\t\t\t// this.blur() // will trigger a change if there is one\n\n\t\t\t// Force change event for empty search/ re-search\n\t\t\tif( !this.value )\n\t\t\t\tthis.dispatchEvent(new Event(\"change\"));\n\t\t\t\n\t\t\tthis.dispatchEvent(new Event(\"enterkey\")); // DEPRECATED\n\t\t\tthis.dispatchEvent(new Event(\"submit\")); // I think this makes more sense\n\t\t}\n\t\t\n\t\tif( e.key == 'Escape' ){\n\t\t\tthis.value = this.value // reset the value\n\t\t\tthis.blur()\n\t\t\tthis.dispatchEvent(new Event(\"esckey\"));\n\t\t}\n\n\t\tlet val = this.input ? this._input.value : this._editor.innerText\n\t\tstop = stopMaxLength(e, this, val)\n\n\t\tlet delay = this.getAttribute('change-delay')\n\t\tclearTimeout(this._changeDelay)\n\t\tif( delay !== null ){\n\t\t\tdelay = delay || 500\n\t\t\tthis._changeDelay = setTimeout(this._onBlur.bind(this), delay)\n\t\t}\n\n\t\tif( stop ){\n\t\t\te.preventDefault()\n\t\t}else if( !this.hasAttribute('bubble-keypress') ){\n\t\t\te.stopPropagation()\n\t\t}\n\t}\n\t\n\tfocus(){\n\t\tif( this.input )\n\t\t\tthis._input.focus()\n\t\telse\n\t\t\tthis.select()\n\t}\n\t\n\t_onBlur(){\n\t\t\n\t\tlet val = this.currentValue\n\t\t\n\t\tif( !validatePattern(this, val) ){\n\t\t\t\n\t\t\tif( this.hasAttribute('reset-invalid') ){\n\t\t\t\tthis.value = this.value\n\t\t\t}else{\n\t\t\t\tthis.value = val\n\t\t\t\tthis.isInvalid = true\n\t\t\t\tthis._setClassNames()\n\t\t\t}\n\t\t\t// }else{\n\t\t\t// \t\n\t\t\t// \tthis.focus()\n\t\t\t// }\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif( val == this.value )\n\t\t\treturn\n\t\t\n\t\tlet max = this.getAttribute('max')\n\t\tif( max )\n\t\t\tval = val.slice(0, max)\n\t\t\n\t\tthis._changeValue(val)\n\t}\n\n\t_changeValue(val){\n\t\tthis.value = val\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value,\n\t\t\t\toldVal: this._oldVal\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n}\n\ncustomElements.define('text-field', TextFieldElement)\n\nexport default customElements.get('text-field')\n","import {css} from 'lit-element'\n\nexport default css`\n\nrich-text-field {\n\tz-index: 1000;\n    --font-size: 1em;\n    --line-height: 1.2em;\n    --font-family: initial;\n    --paragraphSpacing: .75em\n}\n\nrich-text-field textarea.view-source {\n    display: none;\n    width: 100%;\n    height: auto;\n    min-height: 1em;\n    background: #f6f8fa;\n    border: none;\n    box-shadow: none;\n    font-family: monospace;\n    font-size: var(--font-size);\n}\n\nrich-text-field[view-source] textarea.view-source {\n    display: block;\n}\n\nrich-text-field[view-source] main {\n    display: none;\n}\n\nrich-text-field[serif] main {\n    font-family: Garamond;\n    font-size: 1.1em;\n}\n\nrich-text-field main {\n    min-width: 1em;\n    line-height: 1.3em;\n    margin: -.15em 0; /* make up for the line height */\n}\n\nrich-text-field main ul {\n    list-style: disc;\n}\n\nrich-text-field main ul,\nrich-text-field main ol {\n    margin: .5em 0 .5em 1.5em;\n    padding: 0;\n}\n\nrich-text-field .ql-container {\n    outline: none;\n    font-size: var(--font-size);\n    line-height: var(--line-height);\n    font-family: var(--font-family);\n}\n\nrich-text-field .ql-container:not(.ql-disabled) {\n    cursor: text;\n}\n\nrich-text-field .ql-editor {\n    outline: none;\n}\n\n/* rich-text-field .ql-editor.ql-blank > *  {\n    display: none;\n} */\n\nrich-text-field .ql-editor.ql-blank:before {\n    content: attr(data-placeholder);\n    color: rgba(0,0,0,.3);\n    position: absolute;\n}\n\nrich-text-field .ql-editor > p {\n    margin: 0;\n}\n\nrich-text-field .ql-editor > p:not(:last-child) {\n    margin-bottom: var(--paragraphSpacing);\n}\n\nrich-text-field toolbar {\n    font-size: .8em;\n    position: absolute;\n    display: flex;\n    background: #fff;\n    box-shadow: rgba(0,0,0,.1) 0 1px 3px;\n    border-radius: 3px;\n    top: -1em;\n    right: 0;\n    transform: translate(.5em, -50%);\n    user-select: none;\n    visibility: hidden;\n    opacity: 0;\n}\n\nrich-text-field toolbar * {\n    outline: none;\n}\n\nrich-text-field toolbar b-btn.active {\n    --color: var(--blue);\n}\n\nrich-text-field .ql-clipboard {\n    display: none;\n}\n\nform-control.nolabel rich-text-field toolbar {\n\ttop: 0;\n}\n\nrich-text-field:focus-within toolbar {\n\topacity: 1;\n\tvisibility: visible;\n}\n`","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Parchment\"] = factory();\n\telse\n\t\troot[\"Parchment\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3c334e19bc1efdeb80ab","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/registry.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../registry\");\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attributor/attributor.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = require(\"../../collection/linked-list\");\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/abstract/container.ts\n// module id = 2\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"../../attributor/attributor\");\nvar store_1 = require(\"../../attributor/store\");\nvar container_1 = require(\"./container\");\nvar Registry = require(\"../../registry\");\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/abstract/format.ts\n// module id = 3\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n        var _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/abstract/leaf.ts\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../../registry\");\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent_1 = Registry.create(this.statics.scope);\n            blot.wrap(parent_1);\n            parent_1.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/abstract/shadow.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nvar class_1 = require(\"./class\");\nvar style_1 = require(\"./style\");\nvar Registry = require(\"../registry\");\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attributor/store.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attributor/class.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attributor/style.ts\n// module id = 8\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./blot/abstract/container\");\nvar format_1 = require(\"./blot/abstract/format\");\nvar leaf_1 = require(\"./blot/abstract/leaf\");\nvar scroll_1 = require(\"./blot/scroll\");\nvar inline_1 = require(\"./blot/inline\");\nvar block_1 = require(\"./blot/block\");\nvar embed_1 = require(\"./blot/embed\");\nvar text_1 = require(\"./blot/text\");\nvar attributor_1 = require(\"./attributor/attributor\");\nvar class_1 = require(\"./attributor/class\");\nvar style_1 = require(\"./attributor/style\");\nvar store_1 = require(\"./attributor/store\");\nvar Registry = require(\"./registry\");\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/parchment.ts\n// module id = 10\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length_1 = cur.length();\n            if (index < length_1 ||\n                (inclusive && index === length_1 && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length_1;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/collection/linked-list.ts\n// module id = 11\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./abstract/container\");\nvar Registry = require(\"../registry\");\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/scroll.ts\n// module id = 12\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/inline.ts\n// module id = 13\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/block.ts\n// module id = 14\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/embed.ts\n// module id = 15\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar Registry = require(\"../registry\");\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/blot/text.ts\n// module id = 16\n// module chunks = 0","let elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  let _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function(token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function(searchString, position){\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function(searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '', '\\uD83D\\uDC2F' === ''\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\torigDefineProperty(obj, 'x', { enumerable: false, value: obj });\n\t\t// eslint-disable-next-line no-unused-vars, no-restricted-syntax\n\t\tfor (var _ in obj) { // jscs:ignore disallowUnusedVariables\n\t\t\treturn false;\n\t\t}\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar origSymbol = global.Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* globals\n\tAtomics,\n\tSharedArrayBuffer,\n*/\n\nvar undefined;\n\nvar $TypeError = TypeError;\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () { throw new $TypeError(); };\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar generator; // = function * () {};\nvar generatorFunction = generator ? getProto(generator) : undefined;\nvar asyncFn; // async function() {};\nvar asyncFunction = asyncFn ? asyncFn.constructor : undefined;\nvar asyncGen; // async function * () {};\nvar asyncGenFunction = asyncGen ? getProto(asyncGen) : undefined;\nvar asyncGenIterator = asyncGen ? asyncGen() : undefined;\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayBufferPrototype%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer.prototype,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%ArrayPrototype%': Array.prototype,\n\t'%ArrayProto_entries%': Array.prototype.entries,\n\t'%ArrayProto_forEach%': Array.prototype.forEach,\n\t'%ArrayProto_keys%': Array.prototype.keys,\n\t'%ArrayProto_values%': Array.prototype.values,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': asyncFunction,\n\t'%AsyncFunctionPrototype%': asyncFunction ? asyncFunction.prototype : undefined,\n\t'%AsyncGenerator%': asyncGen ? getProto(asyncGenIterator) : undefined,\n\t'%AsyncGeneratorFunction%': asyncGenFunction,\n\t'%AsyncGeneratorPrototype%': asyncGenFunction ? asyncGenFunction.prototype : undefined,\n\t'%AsyncIteratorPrototype%': asyncGenIterator && hasSymbols && Symbol.asyncIterator ? asyncGenIterator[Symbol.asyncIterator]() : undefined,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%Boolean%': Boolean,\n\t'%BooleanPrototype%': Boolean.prototype,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%DataViewPrototype%': typeof DataView === 'undefined' ? undefined : DataView.prototype,\n\t'%Date%': Date,\n\t'%DatePrototype%': Date.prototype,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%ErrorPrototype%': Error.prototype,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%EvalErrorPrototype%': EvalError.prototype,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float32ArrayPrototype%': typeof Float32Array === 'undefined' ? undefined : Float32Array.prototype,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%Float64ArrayPrototype%': typeof Float64Array === 'undefined' ? undefined : Float64Array.prototype,\n\t'%Function%': Function,\n\t'%FunctionPrototype%': Function.prototype,\n\t'%Generator%': generator ? getProto(generator()) : undefined,\n\t'%GeneratorFunction%': generatorFunction,\n\t'%GeneratorPrototype%': generatorFunction ? generatorFunction.prototype : undefined,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int8ArrayPrototype%': typeof Int8Array === 'undefined' ? undefined : Int8Array.prototype,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int16ArrayPrototype%': typeof Int16Array === 'undefined' ? undefined : Int8Array.prototype,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%Int32ArrayPrototype%': typeof Int32Array === 'undefined' ? undefined : Int32Array.prototype,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%JSONParse%': typeof JSON === 'object' ? JSON.parse : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%MapPrototype%': typeof Map === 'undefined' ? undefined : Map.prototype,\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%NumberPrototype%': Number.prototype,\n\t'%Object%': Object,\n\t'%ObjectPrototype%': Object.prototype,\n\t'%ObjProto_toString%': Object.prototype.toString,\n\t'%ObjProto_valueOf%': Object.prototype.valueOf,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%PromisePrototype%': typeof Promise === 'undefined' ? undefined : Promise.prototype,\n\t'%PromiseProto_then%': typeof Promise === 'undefined' ? undefined : Promise.prototype.then,\n\t'%Promise_all%': typeof Promise === 'undefined' ? undefined : Promise.all,\n\t'%Promise_reject%': typeof Promise === 'undefined' ? undefined : Promise.reject,\n\t'%Promise_resolve%': typeof Promise === 'undefined' ? undefined : Promise.resolve,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%RangeErrorPrototype%': RangeError.prototype,\n\t'%ReferenceError%': ReferenceError,\n\t'%ReferenceErrorPrototype%': ReferenceError.prototype,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%RegExpPrototype%': RegExp.prototype,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SetPrototype%': typeof Set === 'undefined' ? undefined : Set.prototype,\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%SharedArrayBufferPrototype%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer.prototype,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%StringPrototype%': String.prototype,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SymbolPrototype%': hasSymbols ? Symbol.prototype : undefined,\n\t'%SyntaxError%': SyntaxError,\n\t'%SyntaxErrorPrototype%': SyntaxError.prototype,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypedArrayPrototype%': TypedArray ? TypedArray.prototype : undefined,\n\t'%TypeError%': $TypeError,\n\t'%TypeErrorPrototype%': $TypeError.prototype,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ArrayPrototype%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array.prototype,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint8ClampedArrayPrototype%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray.prototype,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint16ArrayPrototype%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array.prototype,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%Uint32ArrayPrototype%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array.prototype,\n\t'%URIError%': URIError,\n\t'%URIErrorPrototype%': URIError.prototype,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakMapPrototype%': typeof WeakMap === 'undefined' ? undefined : WeakMap.prototype,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\t'%WeakSetPrototype%': typeof WeakSet === 'undefined' ? undefined : WeakSet.prototype\n};\n\nvar bind = require('function-bind');\nvar $replace = bind.call(Function.call, String.prototype.replace);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : (number || match);\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tif (!(name in INTRINSICS)) {\n\t\tthrow new SyntaxError('intrinsic ' + name + ' does not exist!');\n\t}\n\n\t// istanbul ignore if // hopefully this is impossible to test :-)\n\tif (typeof INTRINSICS[name] === 'undefined' && !allowMissing) {\n\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t}\n\n\treturn INTRINSICS[name];\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tvar parts = stringToPath(name);\n\n\tvar value = getBaseIntrinsic('%' + (parts.length > 0 ? parts[0] : '') + '%', allowMissing);\n\tfor (var i = 1; i < parts.length; i += 1) {\n\t\tif (value != null) {\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, parts[i]);\n\t\t\t\tif (!allowMissing && !(parts[i] in value)) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\tvalue = desc ? (desc.get || desc.value) : value[parts[i]];\n\t\t\t} else {\n\t\t\t\tvalue = value[parts[i]];\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar GetIntrinsic = require('../GetIntrinsic');\n\nvar $Function = GetIntrinsic('%Function%');\nvar $apply = $Function.apply;\nvar $call = $Function.call;\n\nmodule.exports = function callBind() {\n\treturn bind.apply($call, arguments);\n};\n\nmodule.exports.apply = function applyBind() {\n\treturn bind.apply($apply, arguments);\n};\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('es-abstract/helpers/callBind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar has = require('has');\nvar regexExec = RegExp.prototype.exec;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar tryRegexExecCall = function tryRegexExec(value) {\n\ttry {\n\t\tvar lastIndex = value.lastIndex;\n\t\tvalue.lastIndex = 0; // eslint-disable-line no-param-reassign\n\n\t\tregexExec.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tvalue.lastIndex = lastIndex; // eslint-disable-line no-param-reassign\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar regexClass = '[object RegExp]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isRegex(value) {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\tif (!hasToStringTag) {\n\t\treturn toStr.call(value) === regexClass;\n\t}\n\n\tvar descriptor = gOPD(value, 'lastIndex');\n\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\tif (!hasLastIndexDataProperty) {\n\t\treturn false;\n\t}\n\n\treturn tryRegexExecCall(value);\n};\n","'use strict';\n\nvar $Object = Object;\nvar $TypeError = TypeError;\n\nmodule.exports = function flags() {\n\tif (this != null && this !== $Object(this)) {\n\t\tthrow new $TypeError('RegExp.prototype.flags getter called on non-object');\n\t}\n\tvar result = '';\n\tif (this.global) {\n\t\tresult += 'g';\n\t}\n\tif (this.ignoreCase) {\n\t\tresult += 'i';\n\t}\n\tif (this.multiline) {\n\t\tresult += 'm';\n\t}\n\tif (this.dotAll) {\n\t\tresult += 's';\n\t}\n\tif (this.unicode) {\n\t\tresult += 'u';\n\t}\n\tif (this.sticky) {\n\t\tresult += 'y';\n\t}\n\treturn result;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar $gOPD = Object.getOwnPropertyDescriptor;\nvar $TypeError = TypeError;\n\nmodule.exports = function getPolyfill() {\n\tif (!supportsDescriptors) {\n\t\tthrow new $TypeError('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tif ((/a/mig).flags === 'gim') {\n\t\tvar descriptor = $gOPD(RegExp.prototype, 'flags');\n\t\tif (descriptor && typeof descriptor.get === 'function' && typeof (/a/).dotAll === 'boolean') {\n\t\t\treturn descriptor.get;\n\t\t}\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar getPolyfill = require('./polyfill');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar TypeErr = TypeError;\nvar getProto = Object.getPrototypeOf;\nvar regex = /a/;\n\nmodule.exports = function shimFlags() {\n\tif (!supportsDescriptors || !getProto) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tvar polyfill = getPolyfill();\n\tvar proto = getProto(regex);\n\tvar descriptor = gOPD(proto, 'flags');\n\tif (!descriptor || descriptor.get !== polyfill) {\n\t\tdefineProperty(proto, 'flags', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tget: polyfill\n\t\t});\n\t}\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('es-abstract/helpers/callBind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar flagsBound = callBind(implementation);\n\ndefine(flagsBound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = flagsBound;\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateGetDayCall(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","var objectKeys = require('object-keys');\nvar isArguments = require('is-arguments');\nvar is = require('object-is');\nvar isRegex = require('is-regex');\nvar flags = require('regexp.prototype.flags');\nvar isDate = require('is-date-object');\n\nvar getTime = Date.prototype.getTime;\n\nfunction deepEqual(actual, expected, options) {\n  var opts = options || {};\n\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (opts.strict ? is(actual, expected) : actual === expected) {\n    return true;\n  }\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object', equivalence is determined by ==.\n  if (!actual || !expected || (typeof actual !== 'object' && typeof expected !== 'object')) {\n    return opts.strict ? is(actual, expected) : actual == expected;\n  }\n\n  /*\n   * 7.4. For all other Object pairs, including Array objects, equivalence is\n   * determined by having the same number of owned properties (as verified\n   * with Object.prototype.hasOwnProperty.call), the same set of keys\n   * (although not necessarily the same order), equivalent values for every\n   * corresponding key, and an identical 'prototype' property. Note: this\n   * accounts for both named and indexed properties on Arrays.\n   */\n  // eslint-disable-next-line no-use-before-define\n  return objEquiv(actual, expected, opts);\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer(x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') {\n    return false;\n  }\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') {\n    return false;\n  }\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  /* eslint max-statements: [2, 50] */\n  var i, key;\n  if (typeof a !== typeof b) { return false; }\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) { return false; }\n\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) { return false; }\n\n  if (isArguments(a) !== isArguments(b)) { return false; }\n\n  var aIsRegex = isRegex(a);\n  var bIsRegex = isRegex(b);\n  if (aIsRegex !== bIsRegex) { return false; }\n  if (aIsRegex || bIsRegex) {\n    return a.source === b.source && flags(a) === flags(b);\n  }\n\n  if (isDate(a) && isDate(b)) {\n    return getTime.call(a) === getTime.call(b);\n  }\n\n  var aIsBuffer = isBuffer(a);\n  var bIsBuffer = isBuffer(b);\n  if (aIsBuffer !== bIsBuffer) { return false; }\n  if (aIsBuffer || bIsBuffer) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  if (typeof a !== typeof b) { return false; }\n\n  try {\n    var ka = objectKeys(a);\n    var kb = objectKeys(b);\n  } catch (e) { // happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates hasOwnProperty)\n  if (ka.length !== kb.length) { return false; }\n\n  // the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  // ~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) { return false; }\n  }\n  // equivalent values for every corresponding key, and ~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) { return false; }\n  }\n\n  return true;\n}\n\nmodule.exports = deepEqual;\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","var equal = require('deep-equal');\nvar extend = require('extend');\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\nIterator.prototype.rest = function () {\n  if (!this.hasNext()) {\n    return [];\n  } else if (this.offset === 0) {\n    return this.ops.slice(this.index);\n  } else {\n    var offset = this.offset;\n    var index = this.index;\n    var next = this.next();\n    var rest = this.ops.slice(this.index);\n    this.offset = offset;\n    this.index = index;\n    return [next].concat(rest);\n  }\n};\n\n\nmodule.exports = lib;\n","var diff = require('fast-diff');\nvar equal = require('deep-equal');\nvar extend = require('extend');\nvar op = require('./op');\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var ops = [];\n  var firstOther = otherIter.peek();\n  if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n    var firstLeft = firstOther.retain;\n    while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n      firstLeft -= thisIter.peekLength();\n      ops.push(thisIter.next());\n    }\n    if (firstOther.retain - firstLeft > 0) {\n      otherIter.next(firstOther.retain - firstLeft);\n    }\n  }\n  var delta = new Delta(ops);\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n\n        // Optimization if rest of other is just retain\n        if (!otherIter.hasNext() && equal(delta.ops[delta.ops.length - 1], newOp)) {\n          var rest = new Delta(thisIter.rest());\n          return delta.concat(rest).chop();\n        }\n\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n","import Parchment from 'parchment';\n\n\nclass Break extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  insertInto(parent, ref) {\n    if (parent.children.length === 0) {\n      super.insertInto(parent, ref);\n    } else {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\n\nexport default Break;\n","import Parchment from 'parchment';\n\nclass TextBlot extends Parchment.Text { }\n\nexport default TextBlot;\n","import Text from './text';\nimport Parchment from 'parchment';\n\n\nclass Inline extends Parchment.Inline {\n  static compare(self, other) {\n    let selfIndex = Inline.order.indexOf(self);\n    let otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    } else if (self === other) {\n      return 0;\n    } else if (self < other) {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && Parchment.query(name, Parchment.Scope.BLOT)) {\n      let blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline &&\n        Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      let parent = this.parent.isolate(this.offset(), this.length());\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nInline.allowedChildren = [Inline, Parchment.Embed, Text];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = [\n  'cursor', 'inline',   // Must be lower\n  'underline', 'strike', 'italic', 'bold', 'script',\n  'link', 'code'        // Must be higher\n];\n\n\nexport default Inline;\n","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Break from './break';\nimport Inline from './inline';\nimport TextBlot from './text';\n\n\nconst NEWLINE_LENGTH = 1;\n\n\nclass BlockEmbed extends Parchment.Embed {\n  attach() {\n    super.attach();\n    this.attributes = new Parchment.Attributor.Store(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), extend(this.formats(), this.attributes.values()));\n  }\n\n  format(name, value) {\n    let attribute = Parchment.query(name, Parchment.Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n\n  insertAt(index, value, def) {\n    if (typeof value === 'string' && value.endsWith('\\n')) {\n      let block = Parchment.create(Block.blotName);\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\n      block.insertAt(0, value.slice(0, -1));\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n}\nBlockEmbed.scope = Parchment.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nclass Block extends Parchment.Block {\n  constructor(domNode) {\n    super(domNode);\n    this.cache = {};\n  }\n\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = this.descendants(Parchment.Leaf).reduce((delta, leaf) => {\n        if (leaf.length() === 0) {\n          return delta;\n        } else {\n          return delta.insert(leaf.value(), bubbleFormats(leaf));\n        }\n      }, new Delta()).insert('\\n', bubbleFormats(this));\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return super.insertAt(index, value, def);\n    if (value.length === 0) return;\n    let lines = value.split('\\n');\n    let text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    let block = this;\n    lines.reduce(function(index, line) {\n      block = block.split(index, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot, ref) {\n    let head = this.children.head;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index) {\n    return super.path(index, true);\n  }\n\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index, force = false) {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      let clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      } else {\n        this.parent.insertBefore(clone, this.next);\n        return clone;\n      }\n    } else {\n      let next = super.split(index, force);\n      this.cache = {};\n      return next;\n    }\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [Inline, Parchment.Embed, TextBlot];\n\n\nfunction bubbleFormats(blot, formats = {}) {\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = extend(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\n\nexport { bubbleFormats, BlockEmbed, Block as default };\n","import Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Block from '../blots/block';\nimport Inline from '../blots/inline';\nimport TextBlot from '../blots/text';\n\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\n\nclass CodeBlock extends Block {\n  static create(value) {\n    let domNode = super.create(value);\n    domNode.setAttribute('spellcheck', false);\n    return domNode;\n  }\n\n  static formats() {\n    return true;\n  }\n\n  delta() {\n    let text = this.domNode.textContent;\n    if (text.endsWith('\\n')) {      // Should always be true\n      text = text.slice(0, -1);\n    }\n    return text.split('\\n').reduce((delta, frag) => {\n      return delta.insert(frag).insert('\\n', this.formats());\n    }, new Delta());\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) return;\n    let [text, ] = this.descendant(TextBlot, this.length() - 1);\n    if (text != null) {\n      text.deleteAt(text.length() - 1, 1);\n    }\n    super.format(name, value);\n  }\n\n  formatAt(index, length, name, value) {\n    if (length === 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK) == null ||\n        (name === this.statics.blotName && value === this.statics.formats(this.domNode))) {\n      return;\n    }\n    let nextNewline = this.newlineIndex(index);\n    if (nextNewline < 0 || nextNewline >= index + length) return;\n    let prevNewline = this.newlineIndex(index, true) + 1;\n    let isolateLength = nextNewline - prevNewline + 1;\n    let blot = this.isolate(prevNewline, isolateLength);\n    let next = blot.next;\n    blot.format(name, value);\n    if (next instanceof CodeBlock) {\n      next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n    }\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return;\n    let [text, offset] = this.descendant(TextBlot, index);\n    text.insertAt(offset, value);\n  }\n\n  length() {\n    let length = this.domNode.textContent.length;\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      return length + 1;\n    }\n    return length;\n  }\n\n  newlineIndex(searchIndex, reverse = false) {\n    if (!reverse) {\n      let offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n      return offset > -1 ? searchIndex + offset : -1;\n    } else {\n      return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n    }\n  }\n\n  optimize(context) {\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      this.appendChild(Parchment.create('text', '\\n'));\n    }\n    super.optimize(context);\n    let next = this.next;\n    if (next != null && next.prev === this &&\n        next.statics.blotName === this.statics.blotName &&\n        this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n      next.optimize(context);\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replace(target) {\n    super.replace(target);\n    [].slice.call(this.domNode.querySelectorAll('*')).forEach(function(node) {\n      let blot = Parchment.find(node);\n      if (blot == null) {\n        node.parentNode.removeChild(node);\n      } else if (blot instanceof Parchment.Embed) {\n        blot.remove();\n      } else {\n        blot.unwrap();\n      }\n    });\n  }\n}\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\n\nexport { Code, CodeBlock as default };\n","import Parchment from 'parchment';\nimport TextBlot from './text';\n\n\nclass Cursor extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  constructor(domNode, selection) {\n    super(domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this._length = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name, value) {\n    if (this._length !== 0) {\n      return super.format(name, value);\n    }\n    let target = this, index = 0;\n    while (target != null && target.statics.scope !== Parchment.Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this._length = Cursor.CONTENTS.length;\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this._length = 0;\n    }\n  }\n\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this._length;\n  }\n\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    this.parent = null;\n  }\n\n  restore() {\n    if (this.selection.composing || this.parent == null) return;\n    let textNode = this.textNode;\n    let range = this.selection.getNativeRange();\n    let restoreText, start, end;\n    if (range != null && range.start.node === textNode && range.end.node === textNode) {\n      [restoreText, start, end] = [textNode, range.start.offset, range.end.offset];\n    }\n    // Link format will insert text outside of anchor tag\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    if (this.textNode.data !== Cursor.CONTENTS) {\n      let text = this.textNode.data.split(Cursor.CONTENTS).join('');\n      if (this.next instanceof TextBlot) {\n        restoreText = this.next.domNode;\n        this.next.insertAt(0, text);\n        this.textNode.data = Cursor.CONTENTS;\n      } else {\n        this.textNode.data = text;\n        this.parent.insertBefore(Parchment.create(this.textNode), this);\n        this.textNode = document.createTextNode(Cursor.CONTENTS);\n        this.domNode.appendChild(this.textNode);\n      }\n    }\n    this.remove();\n    if (start != null) {\n      [start, end] = [start, end].map(function(offset) {\n        return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n      });\n      return {\n        startNode: restoreText,\n        startOffset: start,\n        endNode: restoreText,\n        endOffset: end\n      };\n    }\n  }\n\n  update(mutations, context) {\n    if (mutations.some((mutation) => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      let range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = \"\\uFEFF\";   // Zero width no break space\n\n\nexport default Cursor;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","import Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport CodeBlock from '../formats/code';\nimport CursorBlot from '../blots/cursor';\nimport Block, { bubbleFormats } from '../blots/block';\nimport Break from '../blots/break';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\n\n\nconst ASCII = /^[ -~]*$/;\n\n\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta) {\n    let consumeNextNewline = false;\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    delta = normalizeDelta(delta);\n    delta.reduce((index, op) => {\n      let length = op.retain || op.delete || op.insert.length || 1;\n      let attributes = op.attributes || {};\n      if (op.insert != null) {\n        if (typeof op.insert === 'string') {\n          let text = op.insert;\n          if (text.endsWith('\\n') && consumeNextNewline) {\n            consumeNextNewline = false;\n            text = text.slice(0, -1);\n          }\n          if (index >= scrollLength && !text.endsWith('\\n')) {\n            consumeNextNewline = true;\n          }\n          this.scroll.insertAt(index, text);\n          let [line, offset] = this.scroll.line(index);\n          let formats = extend({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            let [leaf, ] = line.descendant(Parchment.Leaf, offset);\n            formats = extend(formats, bubbleFormats(leaf));\n          }\n          attributes = DeltaOp.attributes.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          let key = Object.keys(op.insert)[0];  // There should only be one key\n          if (key == null) return index;\n          this.scroll.insertAt(index, key, op.insert[key]);\n        }\n        scrollLength += length;\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      return index + length;\n    }, 0);\n    delta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + (op.retain || op.insert.length || 1);\n    }, 0);\n    this.scroll.batchEnd();\n    return this.update(delta);\n  }\n\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(index, length, formats = {}) {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n      let lines = this.scroll.lines(index, Math.max(length, 1));\n      let lengthRemaining = length;\n      lines.forEach((line) => {\n        let lineLength = line.length();\n        if (!(line instanceof CodeBlock)) {\n          line.format(format, formats[format]);\n        } else {\n          let codeIndex = index - line.offset(this.scroll);\n          let codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n          line.formatAt(codeIndex, codeLength, format, formats[format]);\n        }\n        lengthRemaining -= lineLength;\n      });\n    });\n    this.scroll.optimize();\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  formatText(index, length, formats = {}) {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index, length = 0) {\n    let lines = [], leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(function(path) {\n        let [blot, ] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof Parchment.Leaf) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(Parchment.Leaf, index, length);\n    }\n    let formatsArr = [lines, leaves].map(function(blots) {\n      if (blots.length === 0) return {};\n      let formats = bubbleFormats(blots.shift());\n      while (Object.keys(formats).length > 0) {\n        let blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return extend.apply(extend, formatsArr);\n  }\n\n  getText(index, length) {\n    return this.getContents(index, length).filter(function(op) {\n      return typeof op.insert === 'string';\n    }).map(function(op) {\n      return op.insert;\n    }).join('');\n  }\n\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(index, text, formats = {}) {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\n  }\n\n  isBlank() {\n    if (this.scroll.children.length == 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    let block = this.scroll.children.head;\n    if (block.statics.blotName !== Block.blotName) return false;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index, length) {\n    let text = this.getText(index, length);\n    let [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0, suffix = new Delta();\n    if (line != null) {\n      if (!(line instanceof CodeBlock)) {\n        suffixLength = line.length() - offset;\n      } else {\n        suffixLength = line.newlineIndex(offset) - offset + 1;\n      }\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    let contents = this.getContents(index, length + suffixLength);\n    let diff = contents.diff(new Delta().insert(text).concat(suffix));\n    let delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(change, mutations = [], cursorIndex = undefined) {\n    let oldDelta = this.delta;\n    if (mutations.length === 1 &&\n        mutations[0].type === 'characterData' &&\n        mutations[0].target.data.match(ASCII) &&\n        Parchment.find(mutations[0].target)) {\n      // Optimization for character changes\n      let textBlot = Parchment.find(mutations[0].target);\n      let formats = bubbleFormats(textBlot);\n      let index = textBlot.offset(this.scroll);\n      let oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      let oldText = new Delta().insert(oldValue);\n      let newText = new Delta().insert(textBlot.value());\n      let diffDelta = new Delta().retain(index).concat(oldText.diff(newText, cursorIndex));\n      change = diffDelta.reduce(function(delta, op) {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        } else {\n          return delta.push(op);\n        }\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, cursorIndex);\n      }\n    }\n    return change;\n  }\n}\n\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function(merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function(delta, op) {\n    if (op.insert === 1) {\n      let attributes = clone(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = clone(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      let text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new Delta());\n}\n\n\nexport default Editor;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","let levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\n\nfunction debug(method, ...args) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    console[method](...args);  // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function(logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function(newLevel) {\n  level = newLevel;\n};\n\n\nexport default namespace;\n","/**\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\n// NOTE: copied from https://github.com/GoogleChromeLabs/shadow-selection-polyfill\n\nexport const SHADOW_SELECTIONCHANGE = '-shadow-selectionchange';\n\nconst hasShadow = 'attachShadow' in Element.prototype && 'getRootNode' in Element.prototype;\nconst hasSelection = !!(hasShadow && document.createElement('div').attachShadow({ mode: 'open' }).getSelection);\nconst hasShady = window.ShadyDOM && window.ShadyDOM.inUse;\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) ||\n  /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nconst useDocument = !hasShadow || hasShady || (!hasSelection && !isSafari);\n\nconst validNodeTypes = [Node.ELEMENT_NODE, Node.TEXT_NODE, Node.DOCUMENT_FRAGMENT_NODE];\nfunction isValidNode(node) {\n  return validNodeTypes.includes(node.nodeType);\n}\n\nfunction findNode(s, parentNode, isLeft) {\n  const nodes = parentNode.childNodes || parentNode.children;\n  if (!nodes) {\n    return parentNode; // found it, probably text\n  }\n\n  for (let i = 0; i < nodes.length; ++i) {\n    const j = isLeft ? i : (nodes.length - 1 - i);\n    const childNode = nodes[j];\n    if (!isValidNode(childNode)) {\n      continue; // eslint-disable-line no-continue\n    }\n\n    if (s.containsNode(childNode, true)) {\n      if (s.containsNode(childNode, false)) {\n        return childNode;\n      }\n      return findNode(s, childNode, isLeft);\n    }\n  }\n  return parentNode;\n}\n\n/**\n * @param {function(!Event)} fn to add to selectionchange internals\n */\nconst addInternalListener = (() => {\n  if (hasSelection || useDocument) {\n    // getSelection exists or document API can be used\n    document.addEventListener('selectionchange', () => {\n      document.dispatchEvent(new CustomEvent(SHADOW_SELECTIONCHANGE));\n    });\n    return () => {};\n  }\n\n  let withinInternals = false;\n  const handlers = [];\n\n  document.addEventListener('selectionchange', (ev) => {\n    if (withinInternals) {\n      return;\n    }\n    document.dispatchEvent(new CustomEvent(SHADOW_SELECTIONCHANGE));\n    withinInternals = true;\n    window.setTimeout(() => {\n      withinInternals = false;\n    }, 2); // FIXME: should be > 1 to prevent infinite Selection.update() loop\n    handlers.forEach((fn) => fn(ev));\n  });\n\n  return (fn) => handlers.push(fn);\n})();\n\nlet wasCaret = false;\nlet resolveTask = null;\naddInternalListener(() => {\n  const s = window.getSelection();\n  if (s.type === 'Caret') {\n    wasCaret = true;\n  } else if (wasCaret && !resolveTask) {\n    resolveTask = Promise.resolve(true).then(() => {\n      wasCaret = false;\n      resolveTask = null;\n    });\n  }\n});\n\n\n/**\n * @param {!Selection} s the window selection to use\n * @param {!Node} node the node to walk from\n * @param {boolean} walkForward should this walk in natural direction\n * @return {boolean} whether the selection contains the following node (even partially)\n */\nfunction containsNextElement(s, node, walkForward) {\n  const start = node;\n  while (node = walkFromNode(node, walkForward)) { // eslint-disable-line no-cond-assign\n    // walking (left) can contain our own parent, which we don't want\n    if (!node.contains(start)) {\n      break;\n    }\n  }\n  if (!node) {\n    return false;\n  }\n  // we look for Element as .containsNode says true for _every_ text node, and we only care about\n  // elements themselves\n  return node instanceof Element && s.containsNode(node, true);\n}\n\n\n/**\n * @param {!Selection} s the window selection to use\n * @param {!Node} leftNode the left node\n * @param {!Node} rightNode the right node\n * @return {boolean|undefined} whether this has natural direction\n */\nfunction getSelectionDirection(s, leftNode, rightNode) {\n  if (s.type !== 'Range') {\n    return undefined;  // no direction\n  }\n  const measure = () => s.toString().length;\n\n  const initialSize = measure();\n\n  if (initialSize === 1 && wasCaret && leftNode === rightNode) {\n    // nb. We need to reset a single selection as Safari _always_ tells us the cursor was dragged\n    // left to right (maybe RTL on those devices).\n    // To be fair, Chrome has the same bug.\n    s.extend(leftNode, 0);\n    s.collapseToEnd();\n    return undefined;\n  }\n\n  let updatedSize;\n\n  // Try extending forward and seeing what happens.\n  s.modify('extend', 'forward', 'character');\n  updatedSize = measure();\n\n  if (updatedSize > initialSize || containsNextElement(s, rightNode, true)) {\n    s.modify('extend', 'backward', 'character');\n    return true;\n  } else if (updatedSize < initialSize || !s.containsNode(leftNode)) {\n    s.modify('extend', 'backward', 'character');\n    return false;\n  }\n\n  // Maybe we were at the end of something. Extend backwards.\n  // TODO(samthor): We seem to be able to get away without the 'backwards' case.\n  s.modify('extend', 'backward', 'character');\n  updatedSize = measure();\n\n  if (updatedSize > initialSize || containsNextElement(s, leftNode, false)) {\n    s.modify('extend', 'forward', 'character');\n    return false;\n  } else if (updatedSize < initialSize || !s.containsNode(rightNode)) {\n    s.modify('extend', 'forward', 'character');\n    return true;\n  }\n\n  // This is likely a select-all.\n  return undefined;\n}\n\n/**\n * Returns the next valid node (element or text). This is needed as Safari doesn't support\n * TreeWalker inside Shadow DOM. Don't escape shadow roots.\n *\n * @param {!Node} node to start from\n * @param {boolean} walkForward should this walk in natural direction\n * @return {Node} node found, if any\n */\nfunction walkFromNode(node, walkForward) {\n  if (!walkForward) {\n    return node.previousSibling || node.parentNode || null;\n  }\n  while (node) {\n    if (node.nextSibling) {\n      return node.nextSibling;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\n\n/**\n * @param {!Node} node to check for initial space\n * @return {number} count of initial space\n */\nfunction initialSpace(node) {\n  if (node.nodeType !== Node.TEXT_NODE) {\n    return 0;\n  }\n  return /^\\s*/.exec(node.textContent)[0].length;\n}\n\n/**\n * @param {!Node} node to check for trailing space\n * @return {number} count of ignored trailing space\n */\nfunction ignoredTrailingSpace(node) {\n  if (node.nodeType !== Node.TEXT_NODE) {\n    return 0;\n  }\n  const trailingSpaceCount =  /\\s*$/.exec(node.textContent)[0].length;\n  if (!trailingSpaceCount) {\n    return 0;\n  }\n  return trailingSpaceCount - 1; // always allow single last\n}\n\nconst cachedRange = new Map();\nexport function getRange(root) {\n  if (hasSelection || useDocument) {\n    const s = (useDocument ? document : root).getSelection();\n    return s.rangeCount ? s.getRangeAt(0) : null;\n  }\n\n  const thisFrame = cachedRange.get(root);\n  if (thisFrame) {\n    return thisFrame;\n  }\n\n  const result = internalGetShadowSelection(root);\n\n  cachedRange.set(root, result.range);\n  window.setTimeout(() => {\n    cachedRange.delete(root);\n  }, 0);\n  return result.range;\n}\n\nconst fakeSelectionNode = document.createTextNode('');\nexport function internalGetShadowSelection(root) {\n  const range = document.createRange();\n\n  const s = window.getSelection();\n  if (!s.containsNode(root.host, true)) {\n    return {range: null, mode: 'none'};\n  }\n\n  // TODO: inserting fake nodes isn't ideal, but containsNode doesn't work on nearby adjacent\n  // text nodes (in fact it returns true for all text nodes on the page?!).\n\n  // insert a fake 'before' node to see if it's selected\n  root.insertBefore(fakeSelectionNode, root.childNodes[0]);\n  const includesBeforeRoot = s.containsNode(fakeSelectionNode);\n  fakeSelectionNode.remove();\n  if (includesBeforeRoot) {\n    return {range: null, mode: 'outside-before'};\n  }\n\n  // insert a fake 'after' node to see if it's selected\n  root.appendChild(fakeSelectionNode);\n  const includesAfterRoot = s.containsNode(fakeSelectionNode);\n  fakeSelectionNode.remove();\n  if (includesAfterRoot) {\n    return {range: null, mode: 'outside-after'};\n  }\n\n  const measure = () => s.toString().length;\n  if (!(s.type === 'Caret' || s.type === 'Range')) {\n    throw new TypeError('unexpected type: ' + s.type);\n  }\n\n  const leftNode = findNode(s, root, true);\n  let rightNode;\n  let isNaturalDirection;\n  if (s.type === 'Range') {\n    rightNode = findNode(s, root, false);  // get right node here _before_ getSelectionDirection\n    isNaturalDirection = getSelectionDirection(s, leftNode, rightNode);\n    // isNaturalDirection means \"going right\"\n  }\n\n  if (s.type === 'Caret') {\n    // we might transition to being a caret, so don't check initial value\n    s.extend(leftNode, 0);\n    const at = measure();\n    s.collapseToEnd();\n\n    range.setStart(leftNode, at);\n    range.setEnd(leftNode, at);\n    return {range, mode: 'caret'};\n  } else if (isNaturalDirection === undefined) {\n    if (s.type !== 'Range') {\n      throw new TypeError('unexpected type: ' + s.type);\n    }\n    // This occurs when we can't move because we can't extend left or right to measure the\n    // direction we're moving in. Good news though: we don't need to _change_ the selection\n    // to measure it, so just return immediately.\n    range.setStart(leftNode, 0);\n    range.setEnd(rightNode, rightNode.length);\n    return {range, mode: 'all'};\n  }\n\n  const size = measure();\n  let offsetLeft, offsetRight;\n\n  // only one newline/space char is cared about\n  const validRightLength = rightNode.length - ignoredTrailingSpace(rightNode);\n\n  if (isNaturalDirection) {\n    // walk in the opposite direction first\n    s.extend(leftNode, 0);\n    offsetLeft = measure() + initialSpace(leftNode);  // measure doesn't include initial space\n\n    // then in our actual direction\n    s.extend(rightNode, validRightLength);\n    offsetRight = validRightLength - (measure() - size);\n\n    // then revert to the original position\n    s.extend(rightNode, offsetRight);\n  } else {\n    // walk in the opposite direction first\n    s.extend(rightNode, validRightLength);\n    offsetRight = validRightLength - measure();\n\n    // then in our actual direction\n    s.extend(leftNode, 0);\n    offsetLeft = measure() - size + initialSpace(leftNode);  // doesn't include initial space\n\n    // then revert to the original position\n    s.extend(leftNode, offsetLeft);\n  }\n\n  range.setStart(leftNode, offsetLeft);\n  range.setEnd(rightNode, offsetRight);\n  return {\n    mode: isNaturalDirection ? 'right' : 'left',\n    range,\n  };\n}\n","import EventEmitter from 'eventemitter3';\nimport logger from './logger';\nimport { SHADOW_SELECTIONCHANGE } from './shadow-selection-polyfill';\n\nlet debug = logger('quill:events');\n\nconst EVENTS = [SHADOW_SELECTIONCHANGE, 'mousedown', 'mouseup', 'click'];\nconst EMITTERS = [];\nconst supportsRootNode = ('getRootNode' in document);\n\nEVENTS.forEach(function(eventName) {\n  document.addEventListener(eventName, (...args) => {\n    EMITTERS.forEach((em) => {\n      em.handleDOM(...args);\n    });\n  });\n});\n\n\nclass Emitter extends EventEmitter {\n  constructor() {\n    super();\n    this.listeners = {};\n    EMITTERS.push(this);\n    this.on('error', debug.error);\n  }\n\n  emit() {\n    debug.log.apply(debug, arguments);\n    super.emit.apply(this, arguments);\n  }\n\n  handleDOM(event, ...args) {\n    const target = (event.composedPath ? event.composedPath()[0] : event.target);\n    const containsNode = (node, target) => {\n      if (!supportsRootNode || target.getRootNode() === document) {\n        return node.contains(target);\n      }\n\n      while (!node.contains(target)) {\n        const root = target.getRootNode();\n        if (!root || !root.host) {\n          return false;\n        }\n        target = root.host;\n      }\n\n      return true;\n    };\n\n    (this.listeners[event.type] || []).forEach(function({ node, handler }) {\n      if (target === node || containsNode(node, target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName, node, handler) {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n    this.listeners[eventName].push({ node, handler })\n  }\n}\n\nEmitter.events = {\n  EDITOR_CHANGE        : 'editor-change',\n  SCROLL_BEFORE_UPDATE : 'scroll-before-update',\n  SCROLL_OPTIMIZE      : 'scroll-optimize',\n  SCROLL_UPDATE        : 'scroll-update',\n  SELECTION_CHANGE     : 'selection-change',\n  TEXT_CHANGE          : 'text-change'\n};\nEmitter.sources = {\n  API    : 'api',\n  SILENT : 'silent',\n  USER   : 'user'\n};\n\n\nexport default Emitter;\n","class Module {\n  constructor(quill, options = {}) {\n    this.quill = quill;\n    this.options = options;\n  }\n}\nModule.DEFAULTS = {};\n\n\nexport default Module;\n","import Parchment from 'parchment';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport Emitter from './emitter';\nimport logger from './logger';\nimport { SHADOW_SELECTIONCHANGE, getRange } from './shadow-selection-polyfill';\n\nlet debug = logger('quill:selection');\n\n\nclass Range {\n  constructor(index, length = 0) {\n    this.index = index;\n    this.length = length;\n  }\n}\n\n\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.rootDocument = (this.root.getRootNode ? this.root.getRootNode() : document);\n    this.cursor = Parchment.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM(SHADOW_SELECTIONCHANGE, document, () => {\n      if (!this.mouseDown) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type, delta) => {\n      if (type === Emitter.events.TEXT_CHANGE && delta.length() > 0) {\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      let native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return;  // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\n        try {\n          this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.root.addEventListener('compositionstart', () => {\n      this.composing = true;\n    });\n    this.root.addEventListener('compositionend', () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus();\n    this.setRange(this.savedRange);\n  }\n\n  format(format, value) {\n    if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n    this.scroll.update();\n    let nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || Parchment.query(format, Parchment.Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      let blot = Parchment.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof Parchment.Leaf) {\n        let after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        blot.insertBefore(this.cursor, nativeRange.start.node);  // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index, length = 0) {\n    let scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node, [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    [node, offset] = leaf.position(offset, true);\n    let range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    } else {\n      let side = 'left';\n      let rect;\n      if (node instanceof Text) {\n        if (offset < node.data.length) {\n          range.setStart(node, offset);\n          range.setEnd(node, offset + 1);\n        } else {\n          range.setStart(node, offset - 1);\n          range.setEnd(node, offset);\n          side = 'right';\n        }\n        rect = range.getBoundingClientRect();\n      } else {\n        rect = leaf.domNode.getBoundingClientRect();\n        if (offset > 0) side = 'right';\n      }\n      return {\n        bottom: rect.top + rect.height,\n        height: rect.height,\n        left: rect[side],\n        right: rect[side],\n        top: rect.top,\n        width: 0\n      };\n    }\n  }\n\n  getNativeRange() {\n    let nativeRange = getRange(this.rootDocument);\n    if (nativeRange == null) return null;\n    let range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange() {\n    let normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    let range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus() {\n    return this.rootDocument.activeElement === this.root;\n  }\n\n  normalizedToRange(range) {\n    let positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    let indexes = positions.map((position) => {\n      let [node, offset] = position;\n      let blot = Parchment.find(node, true);\n      let index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      } else if (blot instanceof Parchment.Container) {\n        return index + blot.length();\n      } else {\n        return index + blot.index(node, offset);\n      }\n    });\n    let end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    let start = Math.min(end, ...indexes);\n    return new Range(start, end-start);\n  }\n\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) ||\n        (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))) {\n      return null;\n    }\n    let range = {\n      start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(function(position) {\n      let node = position.node, offset = position.offset;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          node = node.lastChild;\n          offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n        } else {\n          break;\n        }\n      }\n      position.node = node, position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range) {\n    let indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n    let args = [];\n    let scrollLength = this.scroll.length();\n    indexes.forEach((index, i) => {\n      index = Math.min(scrollLength - 1, index);\n      let node, [leaf, offset] = this.scroll.leaf(index);\n      [node, offset] = leaf.position(offset, i !== 0);\n      args.push(node, offset);\n    });\n    if (args.length < 2) {\n      args = args.concat(args);\n    }\n    return args;\n  }\n\n  scrollIntoView(scrollingContainer) {\n    let range = this.lastRange;\n    if (range == null) return;\n    let bounds = this.getBounds(range.index, range.length);\n    if (bounds == null) return;\n    let limit = this.scroll.length()-1;\n    let [first, ] = this.scroll.line(Math.min(range.index, limit));\n    let last = first;\n    if (range.length > 0) {\n      [last, ] = this.scroll.line(Math.min(range.index + range.length, limit));\n    }\n    if (first == null || last == null) return;\n    let scrollBounds = scrollingContainer.getBoundingClientRect();\n    if (bounds.top < scrollBounds.top) {\n      scrollingContainer.scrollTop -= (scrollBounds.top - bounds.top);\n    } else if (bounds.bottom > scrollBounds.bottom) {\n      scrollingContainer.scrollTop += (bounds.bottom - scrollBounds.bottom);\n    }\n  }\n\n  setNativeRange(startNode, startOffset, endNode = startNode, endOffset = startOffset, force = false) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n      return;\n    }\n    let selection = typeof this.rootDocument.getSelection === 'function' ? this.rootDocument.getSelection() : document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus();\n      let native = (this.getNativeRange() || {}).native;\n      if (native == null || force ||\n          startNode !== native.startContainer ||\n          startOffset !== native.startOffset ||\n          endNode !== native.endContainer ||\n          endOffset !== native.endOffset) {\n\n        if (startNode.tagName == \"BR\") {\n          startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode.tagName == \"BR\") {\n          endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n          endNode = endNode.parentNode;\n        }\n        let range = document.createRange();\n        range.setStart(startNode, startOffset);\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n      document.body.focus();  // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n    }\n  }\n\n  setRange(range, force = false, source = Emitter.sources.API) {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      let args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let oldRange = this.lastRange;\n    let [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!equal(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        this.cursor.restore();\n      }\n      let args = [Emitter.events.SELECTION_CHANGE, clone(this.lastRange), clone(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\n\nexport { Range, Selection as default };\n","class Theme {\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name) {\n    let moduleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\n\nexport default Theme;\n","import './polyfill';\nimport Delta from 'quill-delta';\nimport Editor from './editor';\nimport Emitter from './emitter';\nimport Module from './module';\nimport Parchment from 'parchment';\nimport Selection, { Range } from './selection';\nimport extend from 'extend';\nimport logger from './logger';\nimport Theme from './theme';\n\nlet debug = logger('quill');\n\n\nclass Quill {\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node) {\n    return node.__quill || Parchment.find(node);\n  }\n\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(path, target, overwrite = false) {\n    if (typeof path !== 'string') {\n      let name = path.attrName || path.blotName;\n      if (typeof name === 'string') {\n        // register(Blot | Attributor, overwrite)\n        this.register('formats/' + name, path, target);\n      } else {\n        Object.keys(path).forEach((key) => {\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) &&\n          target.blotName !== 'abstract') {\n        Parchment.register(target);\n      } else if (path.startsWith('modules') && typeof target.register === 'function') {\n        target.register();\n      }\n    }\n  }\n\n  constructor(container, options = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    let html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new Emitter();\n    this.scroll = Parchment.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      let range = this.selection.lastRange;\n      let index = range && range.length === 0 ? range.index : undefined;\n      modify.call(this, () => {\n        return this.editor.update(null, mutations, index);\n      }, source);\n    });\n    let contents = this.clipboard.convert(`<div class='ql-editor' style=\"white-space: normal;\">${html}<p><br></p></div>`);\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  addContainer(container, refNode = null) {\n    if (typeof container === 'string') {\n      let className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1*length);\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus() {\n    let scrollTop = this.scrollingContainer.scrollTop;\n    this.selection.focus();\n    this.scrollingContainer.scrollTop = scrollTop;\n    this.scrollIntoView();\n  }\n\n  format(name, value, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      let range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) {\n        return change;\n      } else if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, { [name]: value });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, { [name]: value });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n\n  formatLine(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n\n  formatText(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n\n  getBounds(index, length = 0) {\n    let bounds;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    let containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index = this.getSelection(true), length = 0) {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    } else {\n      return this.editor.getFormat(index.index, index.length);\n    }\n  }\n\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n\n  getLines(index = 0, length = Number.MAX_VALUE) {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    } else {\n      return this.scroll.lines(index, length);\n    }\n  }\n\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus = false) {\n    if (focus) this.focus();\n    this.update();  // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getText(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n\n  insertText(index, text, name, value, source) {\n    let formats;\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n\n  isEnabled() {\n    return !this.container.classList.contains('ql-disabled');\n  }\n\n  off() {\n    return this.emitter.off.apply(this.emitter, arguments);\n  }\n\n  on() {\n    return this.emitter.on.apply(this.emitter, arguments);\n  }\n\n  once() {\n    return this.emitter.once.apply(this.emitter, arguments);\n  }\n\n  pasteHTML(index, html, source) {\n    this.clipboard.dangerouslyPasteHTML(index, html, source);\n  }\n\n  removeFormat(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n\n  scrollIntoView() {\n    this.selection.scrollIntoView(this.scrollingContainer);\n  }\n\n  setContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      let length = this.getLength();\n      let deleted = this.editor.deleteText(0, length);\n      let applied = this.editor.applyDelta(delta);\n      let lastOp = applied.ops[applied.ops.length - 1];\n      if (lastOp != null && typeof(lastOp.insert) === 'string' && lastOp.insert[lastOp.insert.length-1] === '\\n') {\n        this.editor.deleteText(this.getLength() - 1, 1);\n        applied.delete(1);\n      }\n      let ret = deleted.compose(applied);\n      return ret;\n    }, source);\n  }\n\n  setSelection(index, length, source) {\n    if (index == null) {\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(index, length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.selection.scrollIntoView(this.scrollingContainer);\n      }\n    }\n  }\n\n  setText(text, source = Emitter.sources.API) {\n    let delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let change = this.scroll.update(source);   // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    return change;\n  }\n\n  updateContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta, source);\n    }, source, true);\n  }\n}\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = Emitter.events;\nQuill.sources = Emitter.sources;\n// eslint-disable-next-line no-undef\nQuill.version = typeof(QUILL_VERSION) === 'undefined' ? 'dev' : QUILL_VERSION;\n\nQuill.imports = {\n  'delta'       : Delta,\n  'parchment'   : Parchment,\n  'core/module' : Module,\n  'core/theme'  : Theme\n};\n\n\nfunction expandConfig(container, userConfig) {\n  userConfig = extend(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = Theme;\n  } else {\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\n    if (userConfig.theme == null) {\n      throw new Error(`Invalid theme ${userConfig.theme}. Did you register it?`);\n    }\n  }\n  let themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function(config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function(module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  let moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  let moduleConfig = moduleNames.reduce(function(config, name) {\n    let moduleClass = Quill.import(`modules/${name}`);\n    if (moduleClass == null) {\n      debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar &&\n      userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = extend(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function(key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function(config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === Emitter.sources.USER) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  let oldDelta = this.editor.delta;\n  let change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    let args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  let start, end;\n  if (index instanceof Delta) {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      return index.transformPosition(pos, source !== Emitter.sources.USER);\n    });\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      if (pos < index || (pos === index && source === Emitter.sources.USER)) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n  }\n  return new Range(start, end - start);\n}\n\n\nexport { expandConfig, overload, Quill as default };\n","import Parchment from 'parchment';\nimport Block, { BlockEmbed } from './block';\n\n\nclass Container extends Parchment.Container { }\nContainer.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Container;\n","import Parchment from 'parchment';\nimport TextBlot from './text';\n\nconst GUARD_TEXT = \"\\uFEFF\";\n\n\nclass Embed extends Parchment.Embed {\n  constructor(node) {\n    super(node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node) {\n    let range, textNode;\n    let text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        let prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        }\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations, context) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'characterData' &&\n          (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        let range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\n\nexport default Embed;\n","import Parchment from 'parchment';\nimport Emitter from '../core/emitter';\nimport Block, { BlockEmbed } from './block';\nimport Break from './break';\nimport CodeBlock from '../formats/code';\nimport Container from './container';\n\n\nfunction isLine(blot) {\n  return (blot instanceof Block || blot instanceof BlockEmbed);\n}\n\n\nclass Scroll extends Parchment.Scroll {\n  constructor(domNode, config) {\n    super(domNode);\n    this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      this.whitelist = config.whitelist.reduce(function(whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    this.domNode.addEventListener('DOMNodeInserted', function() {});\n    this.optimize();\n    this.enable();\n  }\n\n  batchStart() {\n    this.batch = true;\n  }\n\n  batchEnd() {\n    this.batch = false;\n    this.optimize();\n  }\n\n  deleteAt(index, length) {\n    let [first, offset] = this.line(index);\n    let [last, ] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      if (first instanceof CodeBlock) {\n        let newlineIndex = first.newlineIndex(first.length(), true);\n        if (newlineIndex > -1) {\n          first = first.split(newlineIndex + 1);\n          if (first === last) {\n            this.optimize();\n            return;\n          }\n        }\n      } else if (last instanceof CodeBlock) {\n        let newlineIndex = last.newlineIndex(0);\n        if (newlineIndex > -1) {\n          last.split(newlineIndex + 1);\n        }\n      }\n      let ref = last.children.head instanceof Break ? null : last.children.head;\n      first.moveChildren(last, ref);\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled);\n  }\n\n  formatAt(index, length, format, value) {\n    if (this.whitelist != null && !this.whitelist[format]) return;\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index, value, def) {\n    if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n    if (index >= this.length()) {\n      if (def == null || Parchment.query(value, Parchment.Scope.BLOCK) == null) {\n        let blot = Parchment.create(this.statics.defaultChild);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          value = value.slice(0, -1);\n        }\n        blot.insertAt(0, value, def);\n      } else {\n        let embed = Parchment.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Parchment.Scope.INLINE_BLOT) {\n      let wrapper = Parchment.create(this.statics.defaultChild);\n      wrapper.appendChild(blot);\n      blot = wrapper;\n    }\n    super.insertBefore(blot, ref);\n  }\n\n  leaf(index) {\n    return this.path(index).pop() || [null, -1];\n  }\n\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE) {\n    let getLines = (blot, index, length) => {\n      let lines = [], lengthLeft = length;\n      blot.children.forEachAt(index, length, function(child, index, length) {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof Parchment.Container) {\n          lines = lines.concat(getLines(child, index, lengthLeft));\n        }\n        lengthLeft -= length;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(mutations = [], context = {}) {\n    if (this.batch === true) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index) {\n    return super.path(index).slice(1);  // Exclude self\n  }\n\n  update(mutations) {\n    if (this.batch === true) return;\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([]));   // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n}\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Scroll;\n","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nlet AlignAttribute = new Parchment.Attributor.Attribute('align', 'align', config);\nlet AlignClass = new Parchment.Attributor.Class('align', 'ql-align', config);\nlet AlignStyle = new Parchment.Attributor.Style('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n","import Parchment from 'parchment';\n\nclass ColorAttributor extends Parchment.Attributor.Style {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    return '#' + value.split(',').map(function(component) {\n      return ('00' + parseInt(component).toString(16)).slice(-2);\n    }).join('');\n  }\n}\n\nlet ColorClass = new Parchment.Attributor.Class('color', 'ql-color', {\n  scope: Parchment.Scope.INLINE\n});\nlet ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n","import Parchment from 'parchment';\nimport { ColorAttributor } from './color';\n\nlet BackgroundClass = new Parchment.Attributor.Class('background', 'ql-bg', {\n  scope: Parchment.Scope.INLINE\n});\nlet BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { BackgroundClass, BackgroundStyle };\n","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nlet DirectionAttribute = new Parchment.Attributor.Attribute('direction', 'dir', config);\nlet DirectionClass = new Parchment.Attributor.Class('direction', 'ql-direction', config);\nlet DirectionStyle = new Parchment.Attributor.Style('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nlet FontClass = new Parchment.Attributor.Class('font', 'ql-font', config);\n\nclass FontStyleAttributor extends Parchment.Attributor.Style {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nlet FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n","import Parchment from 'parchment';\n\nlet SizeClass = new Parchment.Attributor.Class('size', 'ql-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nlet SizeStyle = new Parchment.Attributor.Style('size', 'font-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexport { SizeClass, SizeStyle };\n","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nimport { AlignAttribute, AlignStyle } from '../formats/align';\nimport { BackgroundStyle } from '../formats/background';\nimport CodeBlock from '../formats/code';\nimport { ColorStyle } from '../formats/color';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\nimport { FontStyle } from '../formats/font';\nimport { SizeStyle } from '../formats/size';\n\nlet debug = logger('quill:clipboard');\n\n\nconst DOM_KEY = '__ql-matcher';\n\nconst CLIPBOARD_CONFIG = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchSpacing],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['b', matchAlias.bind(matchAlias, 'bold')],\n  ['i', matchAlias.bind(matchAlias, 'italic')],\n  ['style', matchIgnore]\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [\n  AlignAttribute,\n  DirectionAttribute\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\n\nclass Clipboard extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('paste', this.onPaste.bind(this));\n    this.container = this.quill.addContainer('ql-clipboard');\n    this.container.setAttribute('contenteditable', true);\n    this.container.setAttribute('tabindex', -1);\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(([selector, matcher]) => {\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      this.addMatcher(selector, matcher);\n    });\n  }\n\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(html) {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n      return this.convert();\n    }\n    const formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n    if (formats[CodeBlock.blotName]) {\n      const text = this.container.innerText;\n      this.container.innerHTML = '';\n      return new Delta().insert(text, { [CodeBlock.blotName]: formats[CodeBlock.blotName] });\n    }\n    let [elementMatchers, textMatchers] = this.prepareMatching();\n    let delta = traverse(this.container, elementMatchers, textMatchers);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n      delta = delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    debug.log('convert', this.container.innerHTML, delta);\n    this.container.innerHTML = '';\n    return delta;\n  }\n\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\n    if (typeof index === 'string') {\n      this.quill.setContents(this.convert(index), html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      let paste = this.convert(html);\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onPaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    let range = this.quill.getSelection();\n    let delta = new Delta().retain(range.index);\n    let scrollTop = this.quill.scrollingContainer.scrollTop;\n    this.container.focus();\n    this.quill.selection.update(Quill.sources.SILENT);\n    setTimeout(() => {\n      delta = delta.concat(this.convert()).delete(range.length);\n      this.quill.updateContents(delta, Quill.sources.USER);\n      // range.length contributes to delta.length()\n      this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n      this.quill.focus();\n    }, 1);\n  }\n\n  prepareMatching() {\n    let elementMatchers = [], textMatchers = [];\n    this.matchers.forEach((pair) => {\n      let [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          [].forEach.call(this.container.querySelectorAll(selector), (node) => {\n            // TODO use weakmap\n            node[DOM_KEY] = node[DOM_KEY] || [];\n            node[DOM_KEY].push(matcher);\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\n\nfunction applyFormat(delta, format, value) {\n  if (typeof format === 'object') {\n    return Object.keys(format).reduce(function(delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function(delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, extend({}, {[format]: value}, op.attributes));\n      }\n    }, new Delta());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  const DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  let endText = \"\";\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    let op  = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1*text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false;   // Exclude embed blocks\n  let style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function(delta, matcher) {\n      return matcher(node, delta);\n    }, new Delta());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], (delta, childNode) => {\n      let childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  } else {\n    return new Delta();\n  }\n}\n\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  let attributes = Parchment.Attributor.Attribute.keys(node);\n  let classes = Parchment.Attributor.Class.keys(node);\n  let styles = Parchment.Attributor.Style.keys(node);\n  let formats = {};\n  attributes.concat(classes).concat(styles).forEach((name) => {\n    let attr = Parchment.query(name, Parchment.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name]\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof Parchment.Embed) {\n    let embed = {};\n    let value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new Delta().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1, parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((Parchment.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new Delta().retain(delta.length() - 1).retain(1, { indent: indent}));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || (delta.length() > 0 && node.nextSibling && isLine(node.nextSibling))) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    let nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight*1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  let formats = {};\n  let style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') ||\n                           parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {  // Could be 0.5in\n    delta = new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    let replacer = function(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, '');    // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true));  // collapse whitespace\n    if ((node.previousSibling == null && isLine(node.parentNode)) ||\n        (node.previousSibling != null && isLine(node.previousSibling))) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if ((node.nextSibling == null && isLine(node.parentNode)) ||\n        (node.nextSibling != null && isLine(node.nextSibling))) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\n\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchSpacing, matchText };\n","import Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\n\n\nclass History extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.lastRecorded = 0;\n    this.ignoreChange = false;\n    this.clear();\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, delta, oldDelta, source) => {\n      if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\n      if (!this.options.userOnly || source === Quill.sources.USER) {\n        this.record(delta, oldDelta);\n      } else {\n        this.transform(delta);\n      }\n    });\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, this.redo.bind(this));\n    }\n  }\n\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    let delta = this.stack[source].pop();\n    this.stack[dest].push(delta);\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(delta[source], Quill.sources.USER);\n    this.ignoreChange = false;\n    let index = getLastChangeIndex(delta[source]);\n    this.quill.setSelection(index);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = this.quill.getContents().diff(oldDelta);\n    let timestamp = Date.now();\n    if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      let delta = this.stack.undo.pop();\n      undoDelta = undoDelta.compose(delta.undo);\n      changeDelta = delta.redo.compose(changeDelta);\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    this.stack.undo.push({\n      redo: changeDelta,\n      undo: undoDelta\n    });\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta) {\n    this.stack.undo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n    this.stack.redo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n}\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  let lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function(attr) {\n      return Parchment.query(attr, Parchment.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  let deleteLength = delta.reduce(function(length, op) {\n    length += (op.delete || 0);\n    return length;\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\n\nexport { History as default, getLastChangeIndex };\n","import clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\nimport Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nlet debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\n\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    binding = normalize(binding);\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function(key) {\n      return (!!binding[key] !== evt[key] && binding[key] !== null);\n    })) {\n      return false;\n    }\n    return binding.key === (evt.which || evt.keyCode);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    Object.keys(this.options.bindings).forEach((name) => {\n      if (name === 'list autofill' &&\n          quill.scroll.whitelist != null &&\n          !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (this.options.bindings[name]) {\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function() {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null },\n                    { collapsed: true, offset: 0 },\n                    handleBackspace);\n    this.listen();\n  }\n\n  addBinding(key, context = {}, handler = {}) {\n    let binding = normalize(key);\n    if (binding == null || binding.key == null) {\n      return debug.warn('Attempted to add invalid keyboard binding', binding);\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler: handler };\n    }\n    binding = extend(binding, context, handler);\n    this.bindings[binding.key] = this.bindings[binding.key] || [];\n    this.bindings[binding.key].push(binding);\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented) return;\n      let which = evt.which || evt.keyCode;\n      let bindings = (this.bindings[which] || []).filter(function(binding) {\n        return Keyboard.match(evt, binding);\n      });\n      if (bindings.length === 0) return;\n      let range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      let [line, offset] = this.quill.getLine(range.index);\n      let [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      let [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      let prefixText = leafStart instanceof Parchment.Text ? leafStart.value().slice(0, offsetStart) : '';\n      let suffixText = leafEnd instanceof Parchment.Text ? leafEnd.value().slice(offsetEnd) : '';\n      let curContext = {\n        collapsed: range.length === 0,\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        offset: offset,\n        prefix: prefixText,\n        suffix: suffixText\n      };\n      let prevented = bindings.some((binding) => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n        if (binding.empty != null && binding.empty !== curContext.empty) return false;\n        if (binding.offset != null && binding.offset !== curContext.offset) return false;\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(function(name) {\n            return curContext.format[name] == null;\n          })) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(function(name) {\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            return equal(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n        return binding.handler.call(this, range, curContext) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n}\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold'      : makeFormatHandler('bold'),\n    'italic'    : makeFormatHandler('italic'),\n    'underline' : makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function(range) {\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index)\n                               .delete(range.length)\n                               .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function(range, context) {\n        this.quill.format('list', false, Quill.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, Quill.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function(range) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let formats = extend({}, line.formats(), { list: 'checked' });\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', formats)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function(range, context) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', context.format)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function(range, context) {\n        let length = context.prefix.length;\n        let [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]': case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-': case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index - offset)\n                               .delete(length + 1)\n                               .retain(line.length() - 2 - offset)\n                               .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index + line.length() - offset - 2)\n          .retain(1, { 'code-block': null })\n          .delete(1);\n        this.quill.updateContents(delta, Quill.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler: function(range) {\n      let index = range.index;\n      if (key === Keyboard.keys.RIGHT) {\n        index += (range.length + 1);\n      }\n      const [leaf, ] = this.quill.getLeaf(index);\n      if (!(leaf instanceof Parchment.Embed)) return true;\n      if (key === Keyboard.keys.LEFT) {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else {\n        if (shiftKey) {\n          this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n        }\n      }\n      return false;\n    }\n  };\n}\n\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n  let [line, ] = this.quill.getLine(range.index);\n  let formats = {};\n  if (context.offset === 0) {\n    let [prev, ] = this.quill.getLine(range.index - 1);\n    if (prev != null && prev.length() > 1) {\n      let curFormats = line.formats();\n      let prevFormats = this.quill.getFormat(range.index-1, 1);\n      formats = DeltaOp.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  let length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index-length, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index-length, length, formats, Quill.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  let length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  let formats = {}, nextLength = 0;\n  let [line, ] = this.quill.getLine(range.index);\n  if (context.offset >= line.length() - 1) {\n    let [next, ] = this.quill.getLine(range.index + 1);\n    if (next) {\n      let curFormats = line.formats();\n      let nextFormats = this.quill.getFormat(range.index, 1);\n      formats = DeltaOp.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, Quill.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  let lines = this.quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    let firstFormats = lines[0].formats();\n    let lastFormats = lines[lines.length - 1].formats();\n    formats = DeltaOp.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  this.quill.setSelection(range.index, Quill.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length);  // So we do not trigger text-change\n  }\n  let lineFormats = Object.keys(context.format).reduce(function(lineFormats, format) {\n    if (Parchment.query(format, Parchment.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, Quill.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach((name) => {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    this.quill.format(name, context.format[name], Quill.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: {'code-block': true },\n    handler: function(range) {\n      let CodeBlock = Parchment.query('code-block');\n      let index = range.index, length = range.length;\n      let [block, offset] = this.quill.scroll.descendant(CodeBlock, index);\n      if (block == null) return;\n      let scrollIndex = this.quill.getIndex(block);\n      let start = block.newlineIndex(offset, true) + 1;\n      let end = block.newlineIndex(scrollIndex + offset + length);\n      let lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach((line, i) => {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if (typeof binding === 'object') {\n    binding = clone(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n\nexport { Keyboard as default, SHORTKEY };\n","import Parchment from 'parchment';\nimport Quill from './core/quill';\n\nimport Block, { BlockEmbed } from './blots/block';\nimport Break from './blots/break';\nimport Container from './blots/container';\nimport Cursor from './blots/cursor';\nimport Embed from './blots/embed';\nimport Inline from './blots/inline';\nimport Scroll from './blots/scroll';\nimport TextBlot from './blots/text';\n\nimport Clipboard from './modules/clipboard';\nimport History from './modules/history';\nimport Keyboard from './modules/keyboard';\n\nQuill.register({\n  'blots/block'        : Block,\n  'blots/block/embed'  : BlockEmbed,\n  'blots/break'        : Break,\n  'blots/container'    : Container,\n  'blots/cursor'       : Cursor,\n  'blots/embed'        : Embed,\n  'blots/inline'       : Inline,\n  'blots/scroll'       : Scroll,\n  'blots/text'         : TextBlot,\n\n  'modules/clipboard'  : Clipboard,\n  'modules/history'    : History,\n  'modules/keyboard'   : Keyboard\n});\n\nParchment.register(Block, Break, Cursor, Inline, Scroll, TextBlot);\n\n\nexport default Quill;\n","import Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nconst supportsRootNode = ('getRootNode' in document);\nlet debug = logger('quill:toolbar');\n\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      let container = document.createElement('div');\n      addControls(container, this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      const rootDocument = (supportsRootNode ? quill.container.getRootNode() : document);\n      this.container = rootDocument.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      return debug.error('Container required for toolbar', this.options);\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    Object.keys(this.options.handlers).forEach((format) => {\n      this.addHandler(format, this.options.handlers[format]);\n    });\n    [].forEach.call(this.container.querySelectorAll('button, select'), (input) => {\n      this.attach(input);\n    });\n    this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\n      if (type === Quill.events.SELECTION_CHANGE) {\n        this.update(range);\n      }\n    });\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      let [range, ] = this.quill.selection.getRange();  // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input) {\n    let format = [].find.call(input.classList, (className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (this.handlers[format] == null) {\n      if (this.quill.scroll.whitelist != null && this.quill.scroll.whitelist[format] == null) {\n        debug.warn('ignoring attaching to disabled format', format, input);\n        return;\n      }\n      if (Parchment.query(format) == null) {\n        debug.warn('ignoring attaching to nonexistent format', format, input);\n        return;\n      }\n    }\n    let eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        if (input.selectedIndex < 0) return;\n        let selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      let [range, ] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (Parchment.query(format).prototype instanceof Parchment.Embed) {\n        value = prompt(`Enter ${format}`);\n        if (!value) return;\n        this.quill.updateContents(new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert({ [format]: value })\n        , Quill.sources.USER);\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    // TODO use weakmap\n    this.controls.push([format, input]);\n  }\n\n  update(range) {\n    let formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(function(pair) {\n      let [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\\\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          input.value = '';   // TODO make configurable?\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else {\n        if (range == null) {\n          input.classList.remove('ql-active');\n        } else if (input.hasAttribute('value')) {\n          // both being null should match (default values)\n          // '1' should match with 1 (headers)\n          let isActive = formats[format] === input.getAttribute('value') ||\n                         (formats[format] != null && formats[format].toString() === input.getAttribute('value')) ||\n                         (formats[format] == null && !input.getAttribute('value'));\n          input.classList.toggle('ql-active', isActive);\n        } else {\n          input.classList.toggle('ql-active', formats[format] != null);\n        }\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\n\nfunction addButton(container, format, value) {\n  let input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add('ql-' + format);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(function(controls) {\n    let group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(function(control) {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        let format = Object.keys(control)[0];\n        let value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  let input = document.createElement('select');\n  input.classList.add('ql-' + format);\n  values.forEach(function(value) {\n    let option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean: function() {\n      let range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length == 0) {\n        let formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (Parchment.query(name, Parchment.Scope.INLINE) != null) {\n            this.quill.format(name, false);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, Quill.sources.USER);\n      }\n    },\n    direction: function(value) {\n      let align = this.quill.getFormat()['align'];\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent: function(value) {\n      let range = this.quill.getSelection();\n      let formats = this.quill.getFormat(range);\n      let indent = parseInt(formats.indent || 0);\n      if (value === '+1' || value === '-1') {\n        let modifier = (value === '+1') ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link: function(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:');\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list: function(value) {\n      let range = this.quill.getSelection();\n      let formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats['list'] === 'checked' || formats['list'] === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    }\n  }\n}\n\n\nexport { Toolbar as default, addControls };\n","import Inline from '../blots/inline';\n\nclass Bold extends Inline {\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexport default Bold;\n","import Bold from './bold';\n\nclass Italic extends Bold { }\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexport default Italic;\n","import Parchment from 'parchment';\nimport Block from '../blots/block';\nimport Container from '../blots/container';\n\n\nclass ListItem extends Block {\n  static formats(domNode) {\n    return domNode.tagName === this.tagName ? undefined : super.formats(domNode);\n  }\n\n  format(name, value) {\n    if (name === List.blotName && !value) {\n      this.replaceWith(Parchment.create(this.statics.scope));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  remove() {\n    if (this.prev == null && this.next == null) {\n      this.parent.remove();\n    } else {\n      super.remove();\n    }\n  }\n\n  replaceWith(name, value) {\n    this.parent.isolate(this.offset(this.parent), this.length());\n    if (name === this.parent.statics.blotName) {\n      this.parent.replaceWith(name, value);\n      return this;\n    } else {\n      this.parent.unwrap();\n      return super.replaceWith(name, value);\n    }\n  }\n}\nListItem.blotName = 'list-item';\nListItem.tagName = 'LI';\n\n\nclass List extends Container {\n  static create(value) {\n    let tagName = value === 'ordered' ? 'OL' : 'UL';\n    let node = super.create(tagName);\n    if (value === 'checked' || value === 'unchecked') {\n      node.setAttribute('data-checked', value === 'checked');\n    }\n    return node;\n  }\n\n  static formats(domNode) {\n    if (domNode.tagName === 'OL') return 'ordered';\n    if (domNode.tagName === 'UL') {\n      if (domNode.hasAttribute('data-checked')) {\n        return domNode.getAttribute('data-checked') === 'true' ? 'checked' : 'unchecked';\n      } else {\n        return 'bullet';\n      }\n    }\n    return undefined;\n  }\n\n  constructor(domNode) {\n    super(domNode);\n    const listEventHandler = (e) => {\n      if (e.target.parentNode !== domNode) return;\n      let format = this.statics.formats(domNode);\n      let blot = Parchment.find(e.target);\n      if (format === 'checked') {\n        blot.format('list', 'unchecked');\n      } else if(format === 'unchecked') {\n        blot.format('list', 'checked');\n      }\n    }\n\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n  }\n\n  format(name, value) {\n    if (this.children.length > 0) {\n      this.children.tail.format(name, value);\n    }\n  }\n\n  formats() {\n    // We don't inherit from FormatBlot\n    return { [this.statics.blotName]: this.statics.formats(this.domNode) };\n  }\n\n  insertBefore(blot, ref) {\n    if (blot instanceof ListItem) {\n      super.insertBefore(blot, ref);\n    } else {\n      let index = ref == null ? this.length() : ref.offset(this);\n      let after = this.split(index);\n      after.parent.insertBefore(blot, after);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    let next = this.next;\n    if (next != null && next.prev === this &&\n        next.statics.blotName === this.statics.blotName &&\n        next.domNode.tagName === this.domNode.tagName &&\n        next.domNode.getAttribute('data-checked') === this.domNode.getAttribute('data-checked')) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = Parchment.create(this.statics.defaultChild);\n      target.moveChildren(item);\n      this.appendChild(item);\n    }\n    super.replace(target);\n  }\n}\nList.blotName = 'list';\nList.scope = Parchment.Scope.BLOCK_BLOT;\nList.tagName = ['OL', 'UL'];\nList.defaultChild = 'list-item';\nList.allowedChildren = [ListItem];\n\n\nexport { ListItem, List as default };\n","import Quill from 'quill/core';\nimport Clipboard from 'quill/modules/clipboard';\nimport {normalizeText, htmlCleaner} from '../../../../util';\n\nconst Delta = Quill.import('delta')\n\n// helpful: https://github.com/quilljs/quill/issues/1184#issuecomment-403657128\nclass BUIClipboard extends Clipboard {\n    onPaste (e) {\n        e.preventDefault()\n        // only supporting these 2 types see https://www.w3.org/TR/clipboard-apis/#mandatory-data-types\n        var copyType = e.clipboardData.types.includes('text/html')?'text/html':'text/plain'\n        \n        const dirtyHtml = e.clipboardData.getData(copyType)\n        \n        this.insertHTML(dirtyHtml, true)\n    }\n\n    insertHTML(html, clean=true){\n        const range = this.quill.getSelection()\n        \n        html = htmlCleaner.clean(html)\n        html = normalizeText(html)\n\n        // delete any contents the user has selected\n        const delta = new Delta()\n            .retain(range.index)\n            .delete(range.length)\n\n        this.quill.updateContents(delta, 'silent')\n        this.quill.setSelection(range.index, 0, 'silent')\n\n        // paste the cleaned html\n        this.dangerouslyPasteHTML(range.index, html, 'user')\n    }\n}\n\nQuill.debug('error')\nQuill.register({\n    'modules/clipboard': BUIClipboard\n})","import Quill from 'quill/core'\n\nconst BlockEmbed = Quill.import('blots/block/embed');\n\n// https://quilljs.com/guides/cloning-medium-with-parchment/#dividers\nclass DividerBlot extends BlockEmbed { }\nDividerBlot.blotName = 'divider';\nDividerBlot.tagName = 'hr';\n\nQuill.register(DividerBlot);","// https://codepen.io/mackermedia/pen/gmNwZP\n\nimport Quill from 'quill/core'\nimport Break from 'quill/blots/break'\nimport Embed from 'quill/blots/embed'\n\nconst Delta = Quill.import('delta')\n\nclass SmartBreak extends Break {\n    length () {\n        return 1\n    }\n    value () {\n        return '\\n'\n    }\n\n    insertInto(parent, ref) {\n        Embed.prototype.insertInto.call(this, parent, ref)\n    }\n}\n\nSmartBreak.blotName = 'break';\nSmartBreak.tagName = 'BR'\n\nQuill.register(SmartBreak, true)\n\nexport function lineBreakMatcher() {\n  var newDelta = new Delta();\n  newDelta.insert({'break': ''});\n  return newDelta;\n}\n\nexport const keyboardLinebreak = {\n    key: 13,\n    shiftKey: true,\n    handler: function (range) {\n\n        let currentLeaf = this.quill.getLeaf(range.index)[0]\n        let nextLeaf = this.quill.getLeaf(range.index + 1)[0]\n\n        this.quill.insertEmbed(range.index, 'break', true, 'user');\n\n        // Insert a second break if:\n        // At the end of the editor, OR next leaf has a different parent (<p>)\n        if (nextLeaf === null || (currentLeaf.parent !== nextLeaf.parent)) {\n            this.quill.insertEmbed(range.index, 'break', true, 'user');\n        }\n\n        // Now that we've inserted a line break, move the cursor forward\n        this.quill.setSelection(range.index + 1, 'use'); // Quill.sources.SILENT\n    }\n}\n","import Quill from 'quill/core';\nimport Toolbar from 'quill/modules/toolbar';\nimport Bold from 'quill/formats/bold';\nimport Italic from 'quill/formats/italic';\n// import Header from 'quill/formats/header';\n// import Blockquote from 'quill/formats/blockquote';\nimport List, { ListItem } from 'quill/formats/list';\n\n// custom modules\nimport './clipboard'\nimport './divider'\nimport {lineBreakMatcher, keyboardLinebreak} from './break'\n\nQuill.register({\n  'modules/toolbar': Toolbar,\n  'formats/bold': Bold,\n  'formats/italic': Italic,\n//   'formats/header': Header,\n//   'formats/blockquote': Blockquote,\n  'formats/list': List,\n  'formats/list-item': ListItem,\n});\n\nexport {\n    Quill,\n    lineBreakMatcher,\n    keyboardLinebreak\n}","import { render, html } from \"lit-html\";\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\nimport {normalizeText, htmlCleaner} from '../../../../util'\nimport Menu from '../../../menu'\nimport styles from './style'\nimport {Quill, lineBreakMatcher, keyboardLinebreak} from './quill'\n\nclass RichTextField extends HTMLElement {\n\n    connectedCallback(){\n        if( !this.__firstUpdated ){\n            this.__firstUpdated = true\n            this.firstUpdated()\n        }\n\n        let root = this.getRootNode()\n        if( root && root instanceof ShadowRoot ){\n            // console.warn('<rich-text-field> does not work properly in the shadow dom')\n        }\n\n        this.setStateAttributes()\n    }\n\n    get disabled(){ return this.__disabled || false }\n    set disabled(val){\n        this.__disabled = Boolean(val)\n        if( this.quill )\n            this.__disabled ? this.quill.disable() : this.quill.enable()\n    }\n\n    // TODO: add an opt out feature?\n    normalizeText(str){\n        return normalizeText(str)\n    }\n\n    get value(){\n        return this.quill ? this.normalizeText(this.quill.root.innerHTML) : this.__value\n    }\n\n    set value(html){\n        html = html || ''\n\n        // NOTE: okay to always do this here? its the same as in copy/paste above\n        html = htmlCleaner.clean(html)\n        html = this.normalizeText(html)\n\n        this.__value = html\n        if( !this.quill ) return\n\n        // NOTE: we hide the \"contenteditable\" so that the browser does not \"focus\"\n        // on the element (which can cause views to scroll to the last focused editor)\n        // see https://github.com/quilljs/quill/issues/2156 and https://github.com/quilljs/quill/issues/2415\n        this.quill.root.hidden = true\n        \n        this.__settingValue = true\n        this.quill.root.innerHTML = ''\n        this.quill.clipboard.dangerouslyPasteHTML(0, html, 'silent') // silent or something different?\n        this.__settingValue = false\n        this.blur()\n\n        // this.quill.root.innerHTML = html\n        this.setStateAttributes()\n\n        this.quill.root.hidden = false\n        this.setStateAttributes()\n    }\n\n    get dbValue(){\n        return this.isEmpty ? '' : this.value\n    }\n\n    html(){ return html`\n        <style>${styles.cssText}</style>\n        <textarea class=\"view-source\"></textarea>\n        <main class=\"ql-editor\">${this.__value?unsafeHTML(this.__value):''}</main>\n        <toolbar>\n            <b-btn tabindex=0 format=\"bold\" text @click=${this.format} icon=\"bold\"></b-btn>\n            <b-btn tabindex=0 format=\"italic\" text @click=${this.format} icon=\"italic\"></b-btn>\n            <b-btn tabindex=0 format=\"list\" value=\"ordered\" text @click=${this.format} icon=\"list-numbered\"></b-btn>\n            <b-btn tabindex=0 format=\"list\" value=\"bullet\" text @click=${this.format} icon=\"list2\"></b-btn>\n            <!-- <b-btn tabindex=0 @click=${this.insertDivider} text icon=\"minus\"></b-btn> -->\n            <b-btn tabindex=0 @click=${this.insertSpecial} text icon=\"quote-right\"></b-btn>\n            <!-- <b-btn tabindex=0 @click=${this.toggleSource} text icon=\"code\" title=\"Toggle source code\"></b-btn> -->\n        </toolbar>\n    `}\n\n    toggleSource(){\n        let src = this.querySelector('textarea.view-source')\n        let main = this.querySelector('main')\n\n        if( this.hasAttribute('view-source') ){\n            this.removeAttribute('view-source')\n            src.style.height = 0\n            // this.value = src.value\n            src.value = ''\n        }else{\n            src.style.height = main.offsetHeight\n            this.setAttribute('view-source', '')\n            src.value = this.value\n        }\n    }\n\n    async insertDivider(e){\n        // this.insertHTML('<hr>', false)\n\n        var range = this.quill.getSelection(true);\n        console.log(range);\n        if (range) {\n            // insert the <hr> where the cursor is\n            this.quill.insertText(range.index, '\\n', Quill.sources.USER);\n            this.quill.insertEmbed(range.index+1, 'divider', true, Quill.sources.USER)\n            this.quill.setSelection(range.index + 2, Quill.sources.SILENT); // focus after divider\n        }\n    }\n\n    async insertSpecial(e){\n        let menu = [\n            {label: ' Quote Left', val: \"\"},\n            {label: ' Quote Right', val: \"\"},\n            {label: ' Single Quote Left', val: \"\"},\n            {label: ' Single Quote Right', val: \"\"},\n            {label: ' Em-Dash', val: \"\"},\n            {label: ' En-Dash', val: \"\"},\n            {label: ' Ellipsis', val: \"\"}\n        ]\n\n        let selected = await new Menu(menu).popover(e.target, {align: 'bottom-end'})\n\n        if( selected ){\n            this.insertText(selected.val)\n        }\n    }\n\n    insertText(str){\n        this.quill.focus()\n        let range = this.quill.getSelection()\n        this.quill.insertText(range.index, str, 'user')\n        this.quill.setSelection(range.index+str.length, 'silent')\n    }\n\n    insertHTML(html, clean=true){\n        this.quill.clipboard.insertHTML(html, clean)\n    }\n\n    focus(){ this.quill.focus() }\n    blur(){ this.quill.blur() }\n\n    selectAll(){\n        this.quill.setSelection(0, this.quill.getText().length)\n    }\n\n    format(e){\n        \n        e.preventDefault()\n        \n        let btn = e.currentTarget\n        let format = btn.getAttribute('format')\n        let val = btn.getAttribute('value') || true\n\n        if( btn.classList.contains('active') )\n            val = false\n\n        // console.log(format, val);\n        \n        this.quill.format(format, val)\n    }\n\n    render(){\n        render(this.html(), this, {eventContext: this})\n    }\n\n    firstUpdated(){\n\n        this.render()\n\n        this.main = this.querySelector('main')\n        this.toolbar = this.querySelector('toolbar')\n        \n        this.quill = new Quill(this.main, {\n            formats: ['bold', 'italic', 'list', 'break'], // , 'divider'\n            placeholder: this.getAttribute('placeholder') || '',\n            modules: {\n                clipboard: {\n                    matchers: [\n                        ['BR', lineBreakMatcher] \n                    ]\n                },\n                keyboard: {\n                    bindings: {\n                        linebreak: keyboardLinebreak\n                    }\n                }\n            }\n        });\n\n        // https://codepen.io/mackermedia/pen/gmNwZP\n        var length = this.quill.getLength()\n        var text = this.quill.getText(length - 2, 2)\n\n        // Remove extraneous new lines\n        if (text === '\\n\\n') {\n            this.quill.deleteText(this.quill.getLength() - 2, 2)\n        }\n\n        if( this.disabled )\n            this.disabled = this.disabled\n\n        this.quill.root.addEventListener('focus', this._onFocus.bind(this))\n        this.quill.root.addEventListener('blur', this._onBlur.bind(this))\n\n        this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\n            if (type === Quill.events.SELECTION_CHANGE) {\n                this.updateToolbar(range);\n            }\n\n            if( type === Quill.events.TEXT_CHANGE && !this.__settingValue ){\n                this.dispatchEvent(new Event('text-change'))\n            }\n        }, this);\n\n        this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n            let [range, ] = this.quill.selection.getRange();  // quill.getSelection triggers update\n            this.updateToolbar(range);\n        }, this);\n    }\n\n    get characterCount(){\n        return this.quill ? this.quill.root.innerText.length : 0\n    }\n\n    _onFocus(){\n\n        if( this.__settingValue ) return\n\n        if( !this._blurDelay ){\n            this._origVal = this.value\n        }\n        \n        clearTimeout(this._blurDelay)\n        this._blurDelay = null\n    }\n\n    _onBlur(){\n\n        if( this.__settingValue ) return\n\n        if( !this._blurDelay ){\n            this._blurDelay = setTimeout(()=>{\n                this._onBlur()\n                this._blurDelay = null\n            }, 100)\n            return\n        }\n\n        if( this._cleaningFromBlur ) return\n        \n        this._cleaningFromBlur = true\n\n        // not \"empty\" but effectively is empty, so make it so\n        if( !this.isEmpty && this.quill.root.innerText.trim() == '' ){\n            this.value = ''\n            this.blur()\n        }\n\n        this.setStateAttributes()\n\n        let val = this.value\n\n        this._cleaningFromBlur = false\n\n        if( this._origVal != val ){\n            var event = new CustomEvent('change', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    value: val,\n                    oldVal: this._origVal\n                }\n            });\n            \n            this.dispatchEvent(event)\n        }\n    }\n\n    get isEmpty(){\n        return !this.value || this.value === '<p><br></p>'\n    }\n\n    setStateAttributes(){\n        if( this.isEmpty )\n            this.setAttribute('empty', '')\n        else\n            this.removeAttribute('empty')\n    }\n\n    updateToolbar(range){\n        let formats = range == null ? {} : this.quill.getFormat(range);\n\n        // console.log(formats);\n\n        this.toolbar.querySelectorAll('[format]').forEach(el=>{\n\n            let format = el.getAttribute('format')\n\n            if( formats[format] && (el.value == undefined || el.value == formats[format]) )\n                el.classList.add('active')\n            else\n                el.classList.remove('active')\n\n        })\n    }\n}\n\ncustomElements.define('rich-text-field', RichTextField)\n\nexport default customElements.get('rich-text-field')","import {css} from 'lit-element'\n\nconst styles = css`\n\n:host {\n\t--size: 1.6em;\n\t--color: var(--fc-theme);\n\t--colorDisabled: var(--fc-disabled-color, rgba(0, 0, 0, 0.26));\n\t--labelSize: 1em;\n\t--labelColor: currentColor;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n:host(.control) {\n\tflex-grow: 0 !important;\n}\n\n:host([active]) svg.inactive,\n:host(:not([active])) svg.active {\n\tdisplay: none\n}\n\nmain {\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n:host([placement=\"top\"]) main { flex-direction: column-reverse; }\n:host([placement=\"bottom\"]) main { flex-direction: column; }\n:host([placement=\"left\"]) main { flex-direction: row-reverse; }\n:host([placement=\"right\"]) main { flex-direction: row; }\n\nsvg {\n\tfill: currentColor;\n\twidth: var(--size);\n\theight: var(--size);\n\tdisplay: inline-block;\n\ttransition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n\tuser-select: none;\n\tflex-shrink: 0;\n\tpadding: .25em;\n}\n\nsvg.active {\n\tfill: var(--color);\n}\n\n:host([disabled]) svg {\n\tfill: var(--colorDisabled);\n}\n\n:host([disabled]) label {\n\tcolor: var(--colorDisabled);\n}\n\nlabel {\n\tfont-size: var(--labelSize);\n\tcolor: var(--labelColor);\n}\n\nmain label {\n\tcursor: pointer;\n}`\n\nclass RadioBtnElement extends HTMLElement {\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\tlet shadow = this.attachShadow({mode: 'open'})\n\t\tlet temp = document.createElement('template')\n\t\t\n\t\tlet label = this.getAttribute('label') || '<slot name=\"label\"></slot>'\n\t\t\n\t\ttemp.innerHTML = `<style>${styles.cssText}</style>\n\t\t\t<main>\n\t\t\t\t<svg class=\"inactive\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<svg class=\"active\" focusable=\"false\" viewBox=\"0 0 24 24\"><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></svg>\n\t\t\t\t<label>${label}</label>\n\t\t\t</main>\n\t\t\t`\n\t\t\t\n\t\tthis.shadowRoot.appendChild(temp.content.cloneNode(true));\n\t\tthis.addEventListener('click', this._onClick.bind(this))\n\t}\n\t\n\t_onClick(){\n\t\t\n\t\tif( this.disabled ) return\n\t\t\n\t\tthis.active = !this.active\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tset active(val){\n\t\tval ? this.setAttribute('active', '') : this.removeAttribute('active')\n\t}\n\t\n\tget active(){ return this.hasAttribute('active') }\n\tget value(){ return this.hasAttribute('value') ? (this.getAttribute('value')||null) : this.getAttribute('label') }\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){val ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')}\n\t\n}\n\ncustomElements.define('radio-btn', RadioBtnElement)\n\nexport default customElements.get('radio-btn')\n","\nclass RadioGroupElement extends HTMLElement {\n\n\tget key(){ return this.getAttribute('key')}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\t\n\t\t// let shadow = this.attachShadow({mode: 'open'})\n\t\t// let temp = document.createElement('template')\n\t\t// temp.innerHTML = `<style>${styles}</style>`\n\t\t// this.shadowRoot.appendChild(temp.content.cloneNode(true));\n\n\t\tthis.style.outline = 'none'\n\t\t\n\t\tthis.addEventListener('change', this._onChange.bind(this), true)\n\t\t\n\t\tthis.addEventListener('keydown', e=>{\n\t\t\tif( ['ArrowLeft', 'ArrowUp'].includes(e.code) ){\n\t\t\t\tthis.nav(-1)\n\t\t\t}else if( ['ArrowRight', 'ArrowDown'].includes(e.code) ){\n\t\t\t\tthis.nav(1)\n\t\t\t}\n\t\t})\n\n\t\tthis.onChildrenChange = this.onChildrenChange.bind(this)\n\t\tconst observer = new MutationObserver(this.onChildrenChange);\n\t\tobserver.observe(this, {attributes: false, childList: true, subtree: false});\n\t}\n\n\tonChildrenChange(e){\n\t\tthis.radios = Array.from(this.querySelectorAll('radio-btn'))\n\t}\n\t\n\tconnectedCallback(){\n\t\tif( !this.hasAttribute('tabindex') )\n\t\t\tthis.setAttribute('tabindex', '0')\n\n\t\tthis.radios = Array.from(this.querySelectorAll('radio-btn'))\n\t}\n\t\n\tnav(dir=1){\n\t\tlet i = this.radios.indexOf(this.active)\n\t\t\n\t\tif( i == undefined ) i = dir < 0 ? this.radios.length-1 : 0\n\t\telse i += dir\n\t\t\n\t\tif( i >= this.radios.length ) i = 0\n\t\telse if( i < 0 ) i = this.radios.length-1\n\t\t\n\t\tthis.value = this.radios[i].value\n\t}\n\t\n\t_onChange(e){\n\t\t\n\t\tif( e.target == this ) return\n\t\t\n\t\tthis.value = e.target.value\n\t\tthis.setAttribute('value', this.value)\n\t\te.stopPropagation()\n\t\t\n\t\tvar event = new CustomEvent('change', {\n\t\t\tbubbles: true,\n\t\t\tcomposed: true,\n\t\t\tdetail: {\n\t\t\t\tvalue: this.value\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.dispatchEvent(event)\n\t}\n\t\n\tget active(){\n\t\treturn this.radios.find(el=>el.active)\n\t}\n\t\n\tget value(){\n\t\tlet radio = this.active\n\t\treturn radio && radio.value\n\t}\n\t\n\tset value(val){\n\t\tthis.radios.forEach(el=>{\n\t\t\tif( el.value == val )\n\t\t\t\tel.active=true\n\t\t\telse\n\t\t\t\tel.active=false\n\t\t})\n\t\tthis.setAttribute('value', val)\n\t}\n\t\n\tget disabled(){ return this.hasAttribute('disabled') }\n\tset disabled(val=true){\n\t\tval ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n\t\tthis.radios.forEach(el=>el.disabled=val)\n\t}\n\t\n}\n\ncustomElements.define('radio-group', RadioGroupElement)\n\nexport default customElements.get('radio-group')\n","/*\n\tForm Controls\n*/\nimport './form-handler'\nimport './form-control'\nimport './controls/text-field'\nimport './controls/rich-text-field'\nimport './controls/select-field'\nimport './controls/check-box'\nimport './controls/radio-btn'\nimport './controls/radio-group'\nimport './controls/touch-ripple'\nimport './controls/range-slider'\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import Emitter from 'component-emitter'\n\nexport default class DataSource {\n\n    constructor(opts={}){\n        this.reset()\n\n        this.opts = Object.assign({\n            perPage: 30,\n            fetch: true,\n            fetchOnLoad: true\n        }, opts)   \n    }\n\n    reset(){\n        this._pageFetched = null\n        this.lastFiltered = 0\n        this._rawData = []      // unaltered data from server\n        this._filteredData = [] // raw data with after filters applied\n        this.data = []          // filtered data with \"search term\" applied\n    }\n\n    set coll(coll){\n        this.hasFetched = false\n        this.__coll = coll\n    }\n    get coll(){ return this.__coll}\n\n    async refilter(){\n        this.lastFiltered = 0\n        this._rawData = this.coll.models || this.coll\n        this._filteredData = this._rawData\n        this.data = this._rawData\n\n        await this.applyFilters()\n    }\n\n    get perPage(){ return this.opts.perPage }\n\n    async length(){\n\n        if( this._fetching )\n            await this._fetching\n\n        return this.data.length\n    }\n    \n    at(i){ return this.data[i] }\n    first(i){ return this.data[0] }\n    last(){ return this.data[this.data.length-1]}\n\n    forEach(fn){ return this.data.forEach(fn) }\n    map(fn){ return this.data.map(fn) }\n    flatMap(fn){ return this.data.flatMap(fn) }\n    filter(fn){ return this.data.filter(fn) }\n    reduce(fn, start=0){ return this.data.reduce(fn, start) }\n\n    async _fetchFromServer(pageAt){\n\n        // TODO: support fetching data with `fetch` and a url?\n        if( this.coll && this.coll.fetchSync ){\n\n            let data = {term:this.filters.term||''}\n\n            if( this.opts.fetch == 'more' ){\n                data.pageAt = pageAt\n                data.perPage = this.perPage\n            }\n\n            if( this.filters )\n                data.filters = this.filters.value()\n\n            if( this.sorts )\n                data.sorts = this.sorts.value\n\n            await this.coll.fetchSync({data:data})\n        }\n    }\n\n    fetch(pageAt){\n        return this._fetching = new Promise(async resolve=>{\n\n            if( (pageAt == 0 && this._rawData.length == 0) \n            || (this._pageFetched != pageAt && this._rawData.length == pageAt && this.opts.fetch == 'more' ) ){\n\n                this._pageFetched = pageAt\n\n                if( this.opts.fetch )\n                    await this._fetchFromServer(pageAt)\n                \n                await this.refilter()\n            }\n\n            if( this._rawData.length > pageAt )\n                this.emit('change:count', this._rawData.length)\n\n            if( this._filtering )\n                await this._filtering\n\n            if( this._sorting )\n                await this._sorting\n\n            this.hasFetched = true\n\n            resolve(this.data.slice(pageAt, pageAt+this.opts.perPage))\n        }).finally(_=>delete this._fetching)\n    }\n\n    applyFilters(){\n        return this._filtering = new Promise(async resolve=>{\n\n            if( !this.filters ) return resolve(this.data)\n\n            if( this.lastFiltered < this.filters.lastChanged ){\n                this.data = await this.filters.filter(this._rawData)\n                await this.sort()\n                this._filteredData = this.data\n            }\n\n            this.data = await this.filters.filterByTerm(this._filteredData)\n\n            resolve(this.data)\n\n            this.lastFiltered = new Date().getTime()\n\n        }).finally(_=>delete this._filtering)\n    }\n\n    sort(){\n        return this._sorting = new Promise(async resolve=>{\n\n            if( !this.sorts ) return resolve(this.data)\n\n            this.data = await this.sorts.sort(this.data)\n\n            resolve(this.data)\n\n        }).finally(_=>delete this._sorting)\n    }\n}\n\nEmitter(DataSource.prototype)","import { LitElement, html, css } from 'lit-element'\nimport moment from 'moment'\n\ncustomElements.define('b-list-filter-view-date', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        header {\n            display: grid;\n        }\n\n        footer {\n            display: flex;\n            justify-content: flex-end;\n        }\n\n        b-btn {\n            margin: .05em 0;\n            padding: .1em;\n        }\n\n        b-btn:hover {\n            --bgdColor: rgba(0, 0, 0, 0.1);\n        }\n\n        text-field {\n            /* padding-right: .5em; */\n            /* margin-right: -.5em; */\n            /* width: 160px; */\n        }\n\n        b-hr {\n            margin: .25em -.25em;\n        }\n        \n        .controls {\n            padding: .25em .5em;\n            /* font-size: 1.4em; */\n            display: flex;\n            align-items: center;\n            /* flex-direction: column; */\n        }\n\n        .controls span {\n            margin: 0 .25em;\n        }\n\n        form-control:first-child {\n            margin-bottom: .35em;\n        }\n\n        footer {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n        }\n\n        b-label {\n            margin: 0 .5rem;\n        }\n    `}\n\n    firstUpdated(){\n        this.editors = this.shadowRoot.querySelectorAll('form-control')\n\n        let value = this.filter.value\n\n        if( value )\n            this.editors.forEach((el,i)=>el.value=value[i])\n    }\n\n    render(){return html`\n\n        <b-btn text md @click=${this.clearDates}>Clear</b-btn>\n        <b-hr></b-hr>\n\n        <div class=\"controls\">\n            <form-control material=\"filled\" key=\"date1\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\" @enterkey=${this.onEnter}></text-field>\n            </form-control>\n            \n            <span></span>\n            \n            <form-control material=\"filled\" key=\"date2\">\n                <text-field reset-invalid placeholder=\"00/00/0000\" type=\"date\" @enterkey=${this.onEnter}></text-field>\n            </form-control>\n        </div>\n\n        <b-label sm divider>Presets</b-label>\n        <footer>\n            <b-btn text md @click=${this.usePreset}>Today</b-btn>\n            <b-btn text md @click=${this.usePreset}>Yesterday</b-btn>\n            <b-btn text md @click=${this.usePreset}>30 Days</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Month</b-btn>\n            <b-btn text md @click=${this.usePreset}>This Year</b-btn>\n        </footer>\n    `}\n\n    get value(){\n        let value = []\n\n        // editors not setup yet, so just use the value from the filter object\n        if( !this.editors )\n            return this.filter.value\n\n        this.editors.forEach(el=>{\n            let v = el.dbValue\n            if( v )\n                value.push(v)\n        })\n\n        if( value.length == 0 )\n            return null\n\n        if( value.length == 1 )\n            value = [value[0], value[0]]\n\n        value.sort()\n\n        return value\n    }\n\n    set value(val){\n\n        if( !val || val.length == 0 )\n            val = [null, null]\n\n        if( typeof val == 'string' )\n            val = [val, val]\n        \n        if( val.length == 0 )\n            val = [val[0], val[0]]\n\n        this.editors.forEach((el,i)=>{\n            el.value = val[i]||null\n        })\n    }\n\n    /*\n        We do a bunch of fancy logic to display a label that is hopefully\n        the easy to scan while taking up the least amount of space\n    */\n    get label(){\n\n        let val = this.value\n\n        if( !val )\n            return ''\n\n        let [d1, d2] = val\n        let m = moment().startOf('day')\n        let m1 = moment(d1)\n        let m2 = moment(d2)\n        let thisYear = m1.year() == m.year() && m2.year() == m2.year()\n        let sameYear = m1.year() == m2.year()\n\n        // single day selected\n        if( d1 == d2 ){\n            let m1 = moment(d1)\n\n            if( m.isSame(m1) )\n                return 'Today'\n\n            let diffDays = m.diff(m1, 'days')\n\n            if( diffDays == 1 )\n                return 'Yesterday'\n\n            if( diffDays > 1 && diffDays <= 14 )\n                return diffDays+' days ago'\n\n            // leave off the year since it's this year\n            if( thisYear )\n                return m1.format('MMM D')\n\n            return m1.format('M/D/YY')\n        }\n\n        // month range (beginning of one month to end of another month)\n        if( m1.date() == 1 && m2.date() == m2.clone().endOf('month').date() ){\n\n            let month1 = m1.format('MMM')\n            let month2 = m2.format('MMM')\n            \n            if( month1 == month2 && sameYear ){\n\n                if( month1 == m.format('MMM') && thisYear )\n                    return 'This Month'\n                \n                if( thisYear )\n                    return month1\n\n                return month1+' '+m1.format('YY')\n            }\n\n            if( thisYear && sameYear && m1.month() == 0 && m2.month() == 11)\n                return 'This Year'\n            else if( thisYear && sameYear )\n                return month1+' - '+month2\n            else if( sameYear )\n                return month1+' - '+month2+' '+m2.format('YYYY')\n            else\n                return month1+' '+m1.format('YY')+' - '+month2+' '+m2.format('YY')\n        }\n\n        // leave off the year since it's this year\n        if( thisYear )\n            return m1.format('MMM D')+' - '+m2.format('MMM D')\n\n        return m1.format('M/D/YY')+' - '+m2.format('M/D/YY')\n    }\n\n    onEnter(){\n        this.close()\n    }\n\n    clearDates(){\n        this.value = null\n        this.close()\n    }\n\n    usePreset(e){\n        let preset = e.target.innerText\n        let values = []\n        let date = moment()\n        let format = 'YYYY-MM-DD'\n\n        switch(preset){\n            case 'Today':\n                values = [date.format(format)]\n                break;\n\n            case 'Yesterday':\n                date.subtract('1', 'day')\n                values = [date.format(format)]\n                break;\n\n            case '30 Days':\n                values = [date.clone().subtract('30', 'day').format(format), date.format(format)]\n                break;\n\n            case 'This Month':\n                values = [date.startOf('month').format(format), date.endOf('month').format(format)]\n                break;\n\n            case 'This Year':\n                values = [date.startOf('year').format(format), date.endOf('year').format(format)]\n                break;\n        }\n\n        this.value = values\n        this.close()\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-date')","import { LitElement, html, css } from 'lit-element'\nimport moment from 'moment'\n\ncustomElements.define('b-list-filter-view-input', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .5em;\n        }\n\n        form-control {\n            margin:0;\n        }\n\n        b-btn.cancel {\n            margin: -.5em -.5em -.5em 0;\n            vertical-align: middle;\n        }\n\n        [empty] ~ b-btn.cancel {\n            visibility: hidden;\n        }\n\n    `}\n\n    firstUpdated(){\n\n        this.input = this.shadowRoot.querySelector('form-control')\n\n        let value = this.filter.value\n\n        if( value )\n            this.input.value = value\n    }\n\n    render(){return html`\n        <form-control material=\"filled\" style=\"width:${this.get('width'), '200px'}\">\n            <text-field reset-invalid placeholder=\"${this.get('placeholder')}\" @enterkey=${this.onEnter}></text-field>\n            <span slot=\"help\">${this.get('helpText')}</span>\n            <b-btn slot=\"suffix\" class=\"cancel\" icon=\"cancel-circled\" text @click=${this.clearValue}></b-btn>\n        </form-control>\n    `}\n\n    get(key, defaultVal=''){\n        let val = this.filter.attrs[key]\n        return val != undefined ? val : defaultVal\n    }\n\n    get value(){\n        let value = ''\n\n        // editors not setup yet, so just use the value from the filter object\n        if( !this.input )\n            return this.filter.value\n\n        return this.input.value\n    }\n\n    set value(val){\n        if( this.input ) \n            this.input.value = val\n    }\n\n    /*\n        We do a bunch of fancy logic to display a label that is hopefully\n        the easy to scan while taking up the least amount of space\n    */\n    get label(){\n        return this.value || this.get('defaultLabel', 'unset')\n    }\n\n    onEnter(){\n        this.close()\n    }\n\n    clearValue(){\n        this.value = null\n        this.close()\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-input')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-view-slider', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            position:relative;\n            padding: .25em;\n        }\n\n        range-slider {\n            width: 100%;\n            margin: 1em 1.5em .5em 1.5em;\n        }\n    `}\n\n    constructor(opts={}){\n        super()\n        \n        this.opts = Object.assign({\n            range: false,\n            min: 0,\n            max: 100,\n            step: 1,\n            label: 'show',\n            width: '160px',\n            prefix: '',\n            suffix: ''\n        }, opts)\n    }\n\n    render(){return html`\n        \n        <b-btn text @click=${this.clearVal}>Clear</b-btn>\n\n        <b-hr></b-hr>\n\n        <range-slider \n            style=\"width:${this.opts.width}\"\n            @change=${this.onChange}\n            ?range=${this.opts.range}\n            min=${this.opts.min}\n            max=${this.opts.max}\n            step=${this.opts.step}\n            label=${this.opts.label}\n            .value=${this.value}\n        ></range-slider>\n    `}\n\n    clearVal(){\n        this.value = null\n        \n        this.shadowRoot.querySelector('range-slider').reset()\n        this.close()\n    }\n\n    onChange(e){\n        this.value = e.target.value\n        // this.close()\n    }\n\n    get value(){\n\n        if( this.__value === undefined )\n            this.__value = this.filter.value || null\n\n        return this.__value\n    }\n\n    set value(val){\n        // let oldVal = this.value\n        this.__value = val\n        // this.requestUpdate('value', oldVal)\n    }\n\n    get label(){\n        let val = this.value\n        \n        if( val === null || val === '' ) return ''\n\n        let str = Array.isArray(val) ? (val[0] == val[1] ? val[0] : val.join('-')) : val\n\n        return this.opts.prefix+str+this.opts.suffix\n    }\n\n})\n\nexport default customElements.get('b-list-filter-view-slider')","import Menu from '../../menu'\nimport Dialog from '../../dialog'\nimport Popover from '../../popover'\nimport titleize from '../../../util/titleize'\nimport Fuse from 'fuse.js'\nimport Emitter from 'component-emitter'\nimport FilterViewDate from '../toolbar/filter-view-date'\nimport FilterViewInput from '../toolbar/filter-view-input'\nimport FilterViewSlider from '../toolbar/filter-view-slider'\n\nconst CustomViews = {\n    'date': FilterViewDate,\n    'input': FilterViewInput,\n    'slider': FilterViewSlider\n}\n\n// do NOT include 0 or false as unset values\nconst unsetValues = [undefined, null, '']\n\nconst defaultSearch = model => {\n    let data = {};\n    ['id', 'title', 'name', 'label', 'file', 'dir'].forEach(key=>{\n        if( model.has !== undefined ){\n            if( model.has(key) )\n                data[key] = model.get(key)\n        }else if( model[key] !== undefined )\n            data[key] = model[key]\n    })\n    return data;\n};\n\nconst defaultFilterby = (model, val, key) => {\n    if( Array.isArray(val) )\n        return val.includes(model.get(key))\n    else\n        return val == model.get(key)\n};\n\nexport default class Filters extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':filters' }\n\n    reset(){\n        this.queuing = false\n        let resetData = {}\n        this.map(filter=>{\n            resetData[filter.key] = filter.defaultVal\n        })\n        this.value(resetData)\n    }\n\n    toString(){\n        let active = []\n        this.forEach(filter=>{\n            if( filter.isActive )\n                active.push(`${filter.label}: ${filter.valueLabel}`)\n        })\n\n        return active.join(' | ')\n    }\n\n    value(key, val){\n        // first time getting value, get it from local storage\n        if( this.__value === undefined ){\n            this.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        // SETTING\n        if( val !== undefined || typeof key == 'object' ){\n\n            this.lastChanged = new Date().getTime()\n            \n            // may be setting more than one value\n            let changes = typeof key == 'object' ? key : {[key]:val}\n            let didChange = []\n\n            for( let k in changes){\n                \n                let changeFrom = this.__value[k]\n                let changeTo = changes[k]\n\n                // is the selected value effectively \"unset\" (`multi` filters will be an array: `[null]` )\n                if( [null, undefined].includes(changeTo)\n                || (Array.isArray(changeTo) && [null, undefined].includes(changeTo[0]) ) )\n                    delete this.__value[k]\n                else\n                    this.__value[k] = changeTo\n\n                // converting to JSON string so we can compare arrays\n                if( JSON.stringify(this.__value[k]) != JSON.stringify(changeFrom) ){\n                    didChange.push(k)\n                }else{\n                    delete changes[k]\n                }\n            }\n            \n            if( this.key )\n                localStorage.setItem(this._storeKey, JSON.stringify(this.__value))\n\n            if( didChange.length > 0 ){\n                // emit a change on each filter\n                didChange.forEach(k=>{\n                    let filter = this.get(k)    \n                    if( filter.isCustomView )\n                        filter.customView.value = val\n                    filter.emit('change', val)\n                })\n\n                if( this.queuing )\n                    this.queuedChanges = changes\n                else\n                    this.emit('change', changes)\n            }\n\n        // GETTING\n        }else{\n            return key ? this.__value[key] : this.__value\n        }\n    }\n\n    get queuing(){return this.__queue || false }\n    set queuing(val){\n        this.__queue = Boolean(val)\n\n        if( !this.queuing && this.queuedChanges ){\n            this.emit('change', this.queuedChanges)\n            this.queuedChanges = null\n        }\n    }\n\n    get queuedChanges(){ return this.__queuedChanges }\n    set queuedChanges(changes){\n        if( !changes ){\n            delete this.__queuedChanges\n            this.emit('queuing', false)\n            return\n        }\n\n        this.__queuedChanges = Object.assign((this.__queuedChanges || {}), changes)\n\n        this.emit('queuing', Object.keys(this.__queuedChanges).length )\n    }\n\n    use(filters){\n        \n        if( filters == this.__lastFilters )\n            return\n\n        this.__lastFilters = filters\n\n        this.forEach(filter=>delete filter.parent)\n        this.clear()\n\n        for( let key in filters ){\n\n            if( !filters[key] )\n                continue\n\n            if( key == 'search' ){\n                this.searchOptions = filters[key]\n                continue\n            }\n\n            let filter = new Filter(key, filters[key])\n            filter.parent = this\n            this.set(key, filter)\n        }\n\n        this.lastChanged = new Date().getTime()\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n    set searchOptions(opts){\n        if( opts === false )\n            this.__searchOptions = {data:false} // turns search off\n\n        if( typeof opts == 'object' )\n            this.__searchOptions = opts\n    }\n    \n    get searchOptions(){\n        return Object.assign({\n            data: defaultSearch,\n            includeMatches: true,\n            minMatchCharLength: 3,\n            threshold: 0.2,\n            location: 0,\n            distance: 100,\n            placeholder: 'Search',\n            delay: 0\n        }, this.__searchOptions||{})\n    }\n\n    get showSearch(){\n        return typeof this.searchOptions.data == 'function'\n    }\n\n    filterByTerm(data){\n        return new Promise(resolve=>{\n            \n            let searchOptions = Object.assign({}, this.searchOptions)\n            let keys = searchOptions.keys\n\n            data.forEach(m=>{\n                m.searchMatches = {}\n            })\n\n            if( !this.term \n            || !searchOptions.data\n            || this.term.length < searchOptions.minMatchCharLength )\n                return resolve(data)\n\n            data.forEach(m=>{\n                m._fuseSearch=searchOptions.data(m)\n\n                // no search option keys set yet, so set them automatically\n                if( !keys )\n                    keys = Object.keys(m._fuseSearch)\n            })\n\n            // prefix all keys with `_fuseSearch.` so the data is searched properly\n            // keys can be an array of strings or objects with name/weight\n            if( keys )\n            searchOptions.keys = keys.map(key=>{\n                if( typeof key == 'string' )\n                    return '_fuseSearch.'+key\n                \n                let newKey = Object.assign({}, key)\n                newKey.name = '_fuseSearch.'+newKey.name\n                return newKey\n            })\n\n            let fuse = new Fuse(data, searchOptions)\n            data = fuse.search(this.term)\n\n            // reformat to array of models\n            if( searchOptions.includeMatches )\n                data = data.map(d=>{\n                    d.item.searchMatches = {}\n                    d.matches.forEach(m=>{\n                        d.item.searchMatches[m.key.replace('_fuseSearch.', '')] = m.value\n                    })\n                    return d.item\n                })\n\n            resolve(data)\n        })\n    }\n\n    async filter(data){\n        let filters = this.map(filter=>filter)\n\n        // apply each filter, waiting for the first one to finish before moving on to the next filter\n        return filters.reduce((promise, filter) => {\n            return promise.then(data=>filter.filterData(data));\n        }, Promise.resolve(data))\n\n    }\n\n    needsDatabaseFetch(changes){\n        for( let key in changes ){\n            if( this.get(key).isDB )\n                return true\n        }\n        return false\n    }\n\n}\n\n/*\n    Filter\n*/\nexport class Filter {\n\n    constructor(key, attrs){\n        this.key = key\n        this.attrs = attrs\n    }\n\n    get values(){\n        // TODO: implement \"context\" for function?\n        let values = this.attrs.values\n        values = typeof values == 'function' ? values.call(this.parent.list) : values\n\n        values = values.map(v=>{\n            if( typeof v == 'string' && !['divider'].includes(v) )\n                v = {label: v, val: v}\n\n            // make \"unset\" values uniform\n            if( typeof v == 'object' && unsetValues.includes(v.val) ){\n                v.val = null\n                v.clearsAll = true\n            }\n\n            return v\n        })\n\n        return values\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get icon(){\n        return this.attrs.icon || null\n    }\n\n    get filterBy(){\n        if( !this.attrs.filterBy && this.isCustomView && this.customView.filterBy )\n            return this.customView.filterBy\n\n        return this.attrs.filterBy || defaultFilterby\n    }\n\n    // is a database filter\n    get isDB(){\n        return this.attrs.db === true\n    }\n\n    get isCustomView(){\n        return !!this.attrs.view\n    }\n\n    get isActive(){\n        let val = this.isMulti ? this.value&&this.value[0] : this.value\n        return !unsetValues.includes(val)\n    }\n\n    get isMulti(){\n        return this.attrs.multi === true\n    }\n\n    get value(){\n        return this.parent.value(this.key)\n    }\n\n    set value(val){\n        this.parent.value(this.key, val)\n    }\n\n    get defaultVal(){\n        if( this.attrs.defaultVal ) return this.attrs.defaultVal\n        \n        if( this.isCustomView )\n            return this.customView.defaultVal ? this.customView.defaultVal : null\n\n        let first = this.values[0]\n        return first ? first.val : null\n    }\n\n    get valueLabel(){\n        let val = this.value\n        \n        if( Array.isArray(val) )\n            val = val.map(v=>v.val||v)\n        else\n            val = val&&(val.val||val)\n\n        if( this.isCustomView ){\n            let view = this.customView\n            return view ? view.label : 'UNSUPORRTED'\n        }\n\n        let matchedVal = this.values.filter((v,i)=>{\n            if( typeof v == 'string' || v.divider || v.text || v.noDisplay ) return false\n            // return v.val==val\n\n            if( !Array.isArray(val) ){\n                if( v.val==val ){\n                    Object.assign(v, this.value)\n                    return true\n                }\n                return false\n            }\n\n            let matchedIndex = val.indexOf(v.val)\n\n            if( matchedIndex > -1 ){\n                \n                let mergeData = this.value[matchedIndex]\n                \n                if( mergeData && typeof mergeData == 'object' ){\n                    Object.assign(v, mergeData)\n                }\n\n                return true\n            }\n            \n            return false\n        })\n\n        return matchedVal \n        ? matchedVal.map(f=>{\n            return [f.selection, f.toolbarLabel||f.label].filter(s=>s).join(' ')\n        }).join(', ')\n        : val\n    }\n\n    async showMenu(el){\n\n        if( this.isCustomView  )\n            return this.showCustomView(el)\n\n        let selected = await new Menu(this.values, {\n            selected: this.value,\n            multiple: this.isMulti,\n            width: this.attrs.width||null\n        }).popover(el, {\n            overflowBoundry: this.attrs.overflowBoundry || 'scrollParent',\n            maxHeight: this.attrs.maxHeight || '60vh',\n            adjustForMobile: true\n        })\n\n        let oldVal = this.value\n\n        if( selected === false || selected.length == 0  ) return\n            // this.value = null\n        else if( Array.isArray(selected))\n            this.value = selected.map(s=>{\n                return s.selection ? {val: s.val, selection: s.selection} : s.val\n            })\n        else\n            this.value = selected.selection ? {val: selected.val, selection: selected.selection} : selected.val\n    }\n\n    get customView(){\n        let viewName = this.attrs.view\n        let View = null\n\n        if( !this._customView ){\n\n            if( CustomViews[viewName] ){\n                View = CustomViews[viewName]\n            }else if( typeof viewName == 'string' ) {\n                View = customElements.get(viewName)\n            }else if( typeof viewName == HTMLElement ){\n                View = viewName\n            }\n\n            if( View ){\n                View.prototype.close = function(){\n                    this.popover._close() // to trigger onClose\n                }\n                this._customView = new View((this.attrs.viewOpts||{}))\n                this._customView.filter = this\n            }\n        }\n\n        return this._customView\n    }\n\n    async showCustomView(el){\n\n        if( !this.customView )\n            return Dialog.warn({msg:`${this.key}: unsupported view`}).popover(el)\n        \n        let onClose = _=>{\n            // let menu close before attempting to set value\n            // with larger datasets, a user can feel it lag for a split second\n            setTimeout(()=>{\n                this.value = this.customView.value\n            })\n        }\n        \n        // TODO: support `adjustForMobile`\n        new Popover(el, this.customView, {\n            onClose: onClose,\n        })\n    }\n\n    filterData(data){\n        return new Promise(resolve=>{\n\n            // pass through the data unchanged if any of these are met\n            if( !this.isActive ) return resolve(data)\n            if( !this.filterBy ) return resolve(data)\n            if( this.isDB ) return resolve(data)\n\n            let val = this.value\n            data = data.filter(m=>this.filterBy.call(this.parent.list, m, val, this.key))\n            resolve(data)\n        })\n    }\n\n}\n\nEmitter(Filters.prototype)\nEmitter(Filter.prototype)","import {html} from 'lit-element'\nimport Menu from '../../menu'\nimport titleize from '../../../util/titleize'\nimport device from '../../../util/device'\nimport Emitter from 'component-emitter'\n\nexport default class Sorts extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':sort'}\n\n    get value(){\n        // first time getting value, get it from local storage\n    \tif( this.__value === undefined ){\n\t\t\tthis.__value = this.key && JSON.parse(localStorage.getItem(this._storeKey)) || {}\n        }\n\n        return this.__value\n    }\n\n    set value(val){\n\n        let didChange = JSON.stringify(this.__value) != JSON.stringify(val)\n\n        this.__value = val\n\n        if( this.key ){\n            if( val == null || val == undefined )\n                localStorage.removeItem(this._storeKey)\n            else\n                localStorage.setItem(this._storeKey, JSON.stringify(val))\n        }\n\n        this.forEach(sort=>sort.selected=this.value[sort.key])\n\n        if( didChange )\n            this.emit('change', val)\n    }\n\n    get unset(){\n        return Object.keys(this.value).length == 0 \n    }\n\n    use(sorts){\n\n        if( sorts.db ){\n            this.sortOnDB = true\n            delete sorts.db\n        }\n\n        if( sorts.defaults ){\n            let defaultVals = {}\n\n            sorts.defaults.map(key=>{\n\n                if( !sorts[key] ) return\n\n                defaultVals[key] = {\n                    desc: sorts[key].desc || false\n                }\n            })\n\n            if( this.unset ){\n                this.__value = defaultVals\n                localStorage.setItem(this._storeKey, JSON.stringify(defaultVals))\n            }\n\n            delete sorts.defaults\n        }\n\n        if( sorts == this.__lastSorts )\n            return\n\n        this.__lastSorts = sorts\n        \n        this.clear()\n\n        for( let key in sorts ){\n            let sort = new Sort(key, sorts[key])\n            sort.selected = this.value[key]\n            this.set(key, sort)\n        }\n    }\n\n    map(fn){\n        let resp = []\n        this.forEach((v, key)=>resp.push(fn(v, key)))\n        return resp\n    }\n\n\tget label(){\n        let active = this.active\n        return active.length == 0 ? 'None' : active.map(sort=>sort.label).join(', ')\n\t}\n\n\tget active(){\n        let active = []\n        Object.keys(this.value).forEach(key=>{\n            if( this.get(key) )\n                active.push( this.get(key) )\n        })\n        return active\n\t}\n\n    async showMenu(el){\n\n        let oldVal = this.value\n\n        let menu = this.map(sort=>{\n            return {\n                label: sort.label,\n                val: sort.key,\n                description: sort.description,\n                desc: sort.isDesc,\n                extras: ['b-list-sort-dir-btn']\n            }\n        })\n\n        menu.push({text: html`Sorts will be applied in the order they are chosen.`})\n\n        let selected = await new Menu(menu, {\n            className: 'b-list-sort-menu',\n            multiple: true,\n\t\t\tselected: Object.keys(oldVal)\n        }).popover(el, {adjustForMobile:true})\n\n        if( selected === false ) return\n\n        // reformat selected values to what we need\n        let val = {}\n        selected.forEach(s=>val[s.val]={desc:s.desc})\n\t\tthis.value = val\n    }\n\n\tsort(data){\n        // return\n\t\tlet sorts = this.active\n\n\t\treturn new Promise(resolve=>{\n\t\t\t\n\t\t\tif( sorts.length == 0 ) return resolve(data)\n\n            data.sort(function (m1, m2) {\n\n                for( let sort of sorts ){\n\n                    let val = sort.sortCompare(m1, m2);\n\n                    // the sort compare found different values\n                    if( val !== false )\n                        return val\n                }\n\n            });\n\n\t\t\tresolve(data)\n\t\t})\t\n\t}\n\n}\n\n\nEmitter(Sorts.prototype)\n\n\nclass Sort {\n    \n    constructor(key, attrs){\n        this.key = key\n\n        if( typeof attrs == 'function' )\n            attrs = {sortBy: attrs}\n\n        this.attrs = attrs\n    }\n\n    get sortBy(){\n        return this.attrs.sortBy || (m=>m.get(this.key))\n    }\n\n    get label(){\n        return this.attrs.label || titleize(this.key)\n    }\n\n    get description(){\n        return this.attrs.description || null\n    }\n\n    get isDesc(){\n        return this.selected ? this.selected.desc : (this.attrs.desc || false )\n    }\n\n    sortCompare(m1, m2){\n        let v1 = this.sortBy(m1)\n        let v2 = this.sortBy(m2)\n\n        if( v1 > v2 ) return this.isDesc ? -1 : 1\n        if( v1 < v2 ) return this.isDesc ? 1 : -1\n\n        return false\n    }\n\n}\n","import Emitter from 'component-emitter'\n\nexport default class Layouts extends Map {\n\n    get _storeKey(){ return 'b-list:'+this.key+':layout'}\n\n    constructor(layouts){\n        if( !Array.isArray(layouts) )\n            layouts = Object.entries(layouts)\n\n        super(layouts)\n    }\n\n    at(index){\n        return Array.from(this.keys())[index]\n    }\n\n    next(){\n        let keys = Array.from(this.keys())\n        let index = keys.indexOf(this.active)\n        index++\n\n        if( index >= keys.length )\n            index = 0\n        \n        this.active = this.at(index)\n    }\n\n    get active(){\n        return this.__layout || localStorage.getItem(this._storeKey) || this.at(0)\n    }\n\n    set active(val){\n        let oldVal = this.active\n\n        if( !this.has(val) )\n            val = this.at(0)\n\n        this.__layout = val\n\n        if( this.key && val )\n            localStorage.setItem(this._storeKey, this.__layout)\n        \n        else if( this.key && !val )\n            localStorage.removeItem(this._storeKey)\n\n        if( val != oldVal )\n            this.emit('change', val)\n    }\n\n}\n\nEmitter(Layouts.prototype)","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        b-btn {\n            --color: var(--toolbarTextColor);\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            color: var(--toolbarTextColor);\n            grid-area: unset !important;\n        }\n\n        .none:not(:first-child) {\n            display: none;\n        }\n\n        .count {\n            display: none;\n            vertical-align: super;\n            margin: -1em 0;\n            font-weight: normal;\n            opacity: .5;\n            font-size: .8em;\n        }\n\n        @media (max-width:999px){\n            .count:not([val=\"0\"]) {\n                display: inline-block;\n            }\n\n            .sort ~ .sort {\n                display: none;\n            }\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: var(--toolbarTextColor);\n            opacity: .5;\n        }\n\n        /* b-icon:hover {\n            cursor: pointer;\n            color: var(--primaryColor)\n        } */\n    `}\n\n    render(){return html`\n        <b-btn text class=\"sorts\" @click=${this.sortMenu}>\n            <main>\n                <b-label xs>Sort</b-label>\n\n                <div>\n                    ${this.sorts.active.map(sort=>html`\n                        <span class=\"sort\" .sort=${sort}>\n                            <b-icon name=\"${sort.isDesc?'sort-alt-down':'sort-alt-up'}\"></b-icon> ${sort.label}\n                        </span>\n                    `)}\n                    \n                    <span class=\"none\">None</span>\n                    \n                    <span class=\"count\" val=\"${this.sorts.active.length-1}\">\n                        +${this.sorts.active.length-1}\n                    </span>\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.sorts.on('change', this.update)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.sorts.off('change', this.update)\n    }\n\n    // changeDir(e){\n    //     e.stopPropagation()\n    //     let sort = e.currentTarget.parentElement.sort\n    // }\n\n    sortMenu(e){\n        this.sorts.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-sort-btn')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-sort-dir-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        b-btn {\n            margin-top: -.5em;\n            margin-bottom: -.5em;\n            margin-right: -.5em;\n        }\n\n        b-btn:hover {\n            --bgdColor: none !important;\n            --textColor: var(--primaryColor)\n        }\n    `}\n\n    firstUpdated(){\n        this.classList.add('when-active')\n    }\n\n    render(){return html`\n        <b-btn clear icon=\"${this.item.desc?'sort-alt-down':'sort-alt-up'}\" @click=${this.onClick}></b-btn>\n    `}\n\n    onClick(e){\n        e.stopPropagation()\n        this.item.desc = !this.item.desc\n        this.update()\n    }\n})\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-filter-btn', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: inline-block;\n        }\n\n        b-btn {\n            --color: var(--toolbarTextColor);\n        }\n\n        main {\n            display: inline-grid;\n            line-height: 1.2em;\n        }\n\n        b-label {\n            grid-area: unset;\n            color: var(--toolbarTextColor);\n            /* opacity: .4; */\n        }\n\n        b-icon {\n            font-size: .8em;\n            vertical-align: baseline;\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn:not([active]) {\n            color: var(--toolbarTextColor);\n            opacity: .4;\n        }\n\n        b-btn[active] {\n            font-weight: bold;\n        }\n    `}\n\n    render(){return html`\n        <b-btn text ?active=${this.filter.isActive} @click=${this.showMenu}>\n            <main>\n                <b-label xs>${this.filter.label}</b-label>\n                <div>\n                    ${this.filter.icon?html`<b-icon name=\"${this.filter.icon}\"></b-icon>`:''}\n                    ${this.filter.valueLabel}\n                </div>\n            </main>\n        </b-btn>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.update = this.update.bind(this)\n        this.filter.on('change', this.update)\n        // this.addEventListener('filter-changed', this.update, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.filter.off('change', this.update)\n        // this.removeEventListener('filter-changed', this.update, true)\n    }\n\n    showMenu(e){\n        this.filter.showMenu(e.currentTarget)\n    }\n\n})\n\nexport default customElements.get('b-list-filter-btn')","import { LitElement, html, css } from 'lit-element'\nimport './filter-btn'\n\ncustomElements.define('b-list-filters', class extends LitElement{\n\n    static get properties(){return {\n        count: {type: Number},\n        queuing: {type: Number}\n    }}\n\n    constructor(){\n        super()\n        this.onFilterQueuing = this.onFilterQueuing.bind(this)\n        this.onFilterChange = this.onFilterChange.bind(this)\n    }\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            align-items: center;\n            overflow: -moz-scrollbars-none;\n            flex: 1;\n        }\n\n        [icon='erase'] { display: none; }\n        b-list-filter-btn[active] ~ [icon=\"erase\"] {\n            display: inline-block\n        }\n\n        b-list-filter-btn {\n            flex-shrink: 0;\n        }\n\n        @media (max-width:699px) {\n            /* move active filters  to front on small devices */\n            .filters b-list-filter-btn[active] {\n                order: -1;\n            }\n        }\n    `}\n\n    render(){return html`\n        <b-btn icon=\"layers\" ?hidden=${!this.queuing} title=\"Apply queued filters\" text\n            @click=${this.applyQueuedFilters}>${this.queuing}</b-btn>\n        \n        ${this.filters.map(filter=>html`\n            <b-list-filter-btn ?active=${filter.isActive} .filter=${filter}></b-list-filter-btn>\n        `)}\n        \n        <b-btn color=\"hover-red\" title=\"Clear filters\" icon=\"erase\" text @click=${this.resetFilters}></b-btn>\n    `}\n\n    applyQueuedFilters(){\n        this.filters.queuing = false\n    }\n\n    resetFilters(){\n        this.filters.reset()\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        if( this.filters ){\n            this.filters.on('queuing', this.onFilterQueuing)\n            this.filters.on('change', this.onFilterChange)\n        }\n        \n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        \n        if( this.filters ){\n            this.filters.off('queuing', this.onFilterQueuing)\n            this.filters.off('change', this.onFilterChange)\n        }\n    }\n\n    onFilterQueuing(length){\n        this.queuing = length\n    }\n\n    onFilterChange(){\n        this.update()\n    }\n\n})\n\nexport default customElements.get('b-list-filters')","import Btn from '../../../elements/btn'\n\ncustomElements.define('b-list-layout-btn', class extends Btn{\n\n    firstUpdated(){\n        this.setIcon()\n        this.addEventListener('click', e=>{\n            this.layouts.next()\n        })\n    }\n\n    setIcon(){\n        this.icon = this.layouts.get(this.layouts.active)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        this.setIcon = this.setIcon.bind(this)\n        this.layouts.on('change', this.setIcon)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.layouts.off('change', this.setIcon)\n    }\n\n})\n\nexport default customElements.get('b-list-layout-btn')","import { LitElement, html, css } from 'lit-element'\nimport '../../form-control/form-control'\nimport '../../form-control/controls/text-field'\n\ncustomElements.define('b-list-search-bar', class extends LitElement{\n\n    static get properties(){return {\n        placeholder: {type: String}\n    }}\n\n    constructor(){\n        super()\n        this.placeholder = 'Search'\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block\n        }\n\n        form-control {\n            padding: .5em .65em;\n            background: var(--searchBgd, #f5f5f5); /* backwards comp */\n            background: var(--list-search-bgd, var(--searchBgd));\n            border-radius: 30px;\n            /* max-width: 140px; */\n        }\n\n        text-field {\n            min-width: 70px;\n            /* transition: 300ms; */\n        }\n\n        form-control[falsy]:not(:focus-within):not(:hover){\n            background: none;\n        }\n\n        form-control[falsy]:not(:focus-within){\n            cursor: pointer;\n        }\n\n        form-control[falsy]:not(:focus-within) text-field {\n            height: 1em;\n            overflow: hidden;\n            min-width: 0;\n            width: 0;\n            margin-right: -.5em;\n        }\n\n        b-icon {\n            color: var(--theme-color,#444);\n            margin-right: .5em;\n        }\n    `}\n\n    render(){return html`\n        <form-control>\n            <text-field placeholder=\"${this.placeholder}\" bubble-keypress single-line></text-field>\n            <b-icon @click=${this.focus} name=\"search\" slot=\"prefix\"></b-icon>\n        </form-control>\n    `}\n\n    focus(){\n        this.shadowRoot.querySelector('form-control').focus()\n    }\n\n    get value(){\n        this.textField = this.textField || this.shadowRoot.querySelector('text-field')\n        return this.textField.currentValue\n    }\n\n})\n\nexport default customElements.get('b-list-search-bar')","import { LitElement, html, css } from 'lit-element'\nimport Popover from '../../popover'\nimport './sort-btn'\nimport './sort-dir-btn'\nimport './filters-view'\nimport './layout-btn'\nimport './search'\n\ncustomElements.define('b-list-toolbar', class extends LitElement{\n\n    static get properties(){return {\n        count: {type: Number},\n    }}\n\n    constructor(){\n        super()\n        this.count = 0\n    }\n\n    static get styles(){return css`\n        :host {\n            display: flex;\n            align-items: center;\n            min-width: 0;\n            position: relative;\n        }\n\n        [hidden] { display: none; }\n\n        b-list-sort-btn {\n            flex-shrink: 0;\n        }\n\n        b-btn {\n            color: var(--toolbarTextColor);\n        }\n\n        .scroller {\n            display: flex;\n            overflow-y: auto;\n            align-items: center;\n            overflow: -moz-scrollbars-none;\n            flex: 1;\n        }\n\n        .scroller::-webkit-scrollbar { width: 0 !important; height: 0 !important; }\n\n        b-list-sort-btn + b-list-filters {\n            border-left: solid 2px rgba(0,0,0,.1);\n            margin-left: .25em;\n            padding-left: .25em;\n        }\n\n        .after {\n            margin-left: auto;\n            display: flex;\n            align-items: center;\n        }\n\n        .count {\n            align-self: stretch;\n            display: flex;\n            align-items: center;\n            border-right: 2px solid rgba(0, 0, 0, 0.1);\n            padding: 0 .75em 0 .25em;\n            margin-right: .25em;\n        }\n\n        .controls {\n            display: inline-grid;\n        }\n\n        .controls > b-icon {\n            font-size: .8em;\n            padding: .2em .35em;\n            color: rgba(0, 0, 0, 0.4);\n        }\n\n        .controls > b-icon:hover {\n            color: #333;\n        }\n    `}\n\n    render(){return html`\n        <slot name=\"before\"></slot>\n\n        <div class=\"count\">${this.count}</div>\n\n        <div class=\"scroller\">\n\n            ${!this.sorts?'':html`\n                <b-list-sort-btn .sorts=${this.sorts}></b-list-sort-btn>\n            `}\n            \n            ${!this.filters?'':html`\n                <b-list-filters .filters=${this.filters}></b-list-filters>\n            `}\n\n        </div>\n        \n        <div class=\"after\">\n\n            ${!this.filters||!this.filters.showSearch?'':html`\n            <b-list-search-bar @keydown=${this.onKeyDown} placeholder=${this.filters.searchOptions.placeholder}></b-list-search-bar>\n            `}\n\n            ${!this.layouts?'':html`\n                <b-list-layout-btn .layouts=${this.layouts} pill text></b-list-layout-btn>\n            `}\n\n            <slot name=\"refresh-btn\"></slot>\n\n            <slot name=\"after\"></slot>\n\n            <slot></slot>\n        </div>\n    `}\n\n    // not used, testing idea\n    openOver(el, opts){\n        new Popover(el, this, opts)\n    }\n\n    onKeyDown(e){\n        let target = e.target\n        let ts = this.filters.searchOptions.delay\n\n        clearTimeout(this._keydownTimeout)\n        this._keydownTimeout = setTimeout(_=>{\n\n            let term = target.value\n\n            if( term == this.filters.term ) return\n\n            this.filters.term = term\n\n            this.dispatchEvent(new CustomEvent('filter-term-changed', {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    term: term\n                }\n            }))\n\n        }, ts)\n    }\n\n})\n\nexport default customElements.get('b-list-toolbar')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-selection-bar', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            position:absolute;\n            z-index: 10;\n            left: 0;\n            top: 0;\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            background: var(--theme-bgd); /* FIXME: */\n\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-width: 0;\n            padding: 0 .5em;\n        }\n\n        :host(:not(.show)) {\n            display: none;\n        }\n\n        .cancel-btn {\n            margin-right: .5em;\n            /* margin: 0 1em; */\n        }\n\n        @media (max-width: 699px) {\n            .count > span {\n                display: none;\n            }\n        }\n\n    `}\n\n    set selection(selection){\n        this.__selection = selection\n        \n        // TODO: unbind when changing?\n        selection.on('begin', e=>{\n            this.classList.add('show')\n            this.update()\n        })\n\n        selection.on('end', e=>{\n            this.classList.remove('show')\n        })\n\n        selection.on('change', result=>{\n            this.update()\n        })\n    }\n\n    get selection(){ return this.__selection }\n\n    render(){return html`\n        ${this.selection?html`\n\n            <div>\n                <b-btn class=\"cancel-btn\" icon=\"cancel-1\" @click=${this.end} outline></b-btn>\n\n                <span class=\"count\">\n                ${this.selection.result.size} <span>selected</span>\n                </span>\n\n                <slot name=\"left\"></slot>\n            </div>\n\n            <div>\n                <slot name=\"right\"></slot>\n            </div>\n        `:''}\n    `}\n\n    end(){\n        this.selection.end()\n    }\n\n})\n","import { LitElement, html, css } from 'lit-element'\nimport '../../elements/empty-state'\n\ncustomElements.define('b-infinite-list', class extends LitElement {\n\n    createRenderRoot(){ return this }\n\n    // static get styles(){return css`\n    //     :host {\n    //         display: block\n    //     }\n    // `}\n    \n    constructor(){\n        super()\n        this.pageAt = 0\n        this.threshold = 400\n    }\n\n    firstUpdated(){\n        // after first updating, reset and get content\n        let loadContent = this.getAttribute('fetch-on-load') !== 'false'\n        this.reset(loadContent)\n    }\n    \n    connectedCallback(){\n        super.connectedCallback()\n        this.addEventListener('scroll', this.onScroll, true)\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        this.removeEventListener('scroll', this.onScroll, true)\n    }\n\n    async reset(andLoadContent=true){\n        this.pageAt = 0\n        this.scrollTop = 0\n        this.prevModel = null\n        \n        if( andLoadContent )\n            await this.getContent({clear:true})\n        else\n            this.addContent([], {clear:true})\n    }\n\n    onScroll(){\n\n        let delta = this.scrollHeight - this.scrollTop - this.offsetHeight\n        let down = !this._scrollDelta || delta < this._scrollDelta\n\n        this._scrollDelta = delta\n\n        if( !down || delta == 0 ) return\n        \n        if( delta <= this.threshold )\n            this.getContent()\n    }\n\n    async getContent({clear=false}={}){\n        \n        if( !this.dataSource ) return\n\n        if( this._fetching ) return;\n\n        let pageAt = this.pageAt\n\n        this._fetching = true\n        let models = await this.dataSource.fetch(pageAt)\n        this.addContent(models, {clear:clear})\n        this._fetching = null\n\n        if( pageAt == 0 ){\n            this.dispatchEvent(new CustomEvent('content-changed',{\n                detail: {data: this.dataSource},\n                bubbles: true, \n                composed: true\n            }))\n        }\n    }\n\n    // get emptyElement(){return this.getAttribute('empty') || 'b-empty-state'}\n\n    addContent(models, {clear=false}={}){\n        \n        this.pageAt += models.length\n\n        if( clear )\n            this.innerHTML = ''\n\n        if( this.pageAt == 0 ){\n            let emptyView = this.empty && this.empty()\n            if( emptyView )\n                this.appendChild(emptyView)\n            return \n        }\n\n        models.forEach(model=>{\n\n            let divider = this.divider && this.divider(this.prevModel, model)\n            if( divider ){\n                this.appendChild(divider)\n            }\n\n            let row = this.row && this.row(model)\n            if( row ){\n                this.appendChild(row)\n            }\n            \n            this.prevModel = model\n        })\n\n        setTimeout(this.checkNotEnoughContent.bind(this))\n    }\n\n    checkNotEnoughContent(){\n        if( this.scrollHeight <= this.offsetHeight ){\n            this.getContent()\n        }\n    }\n\n})\n\nexport default customElements.get('b-infinite-list')","/*\n    Creates shortcuts for selector querying\n*/\nimport {LitElement} from 'lit-element'\n\nLitElement.prototype.$ = function(query){\n    return this.querySelector(query)\n}\n\nLitElement.prototype.$all = function(query){\n    return this.querySelectorAll(query)\n}\n\nLitElement.prototype.$$ = function(query){\n    return this.shadowRoot ? this.shadowRoot.querySelector(query) : this.querySelector(query)\n}\n\nLitElement.prototype.$$all = function(query){\n    return this.shadowRoot ? this.shadowRoot.querySelectorAll(query) : this.querySelectorAll(query)\n}","import Emitter from 'component-emitter'\n\nconst isTouch = 'ontouchstart' in window\n\nclass ResultMap extends Map {\n    \n    get models(){\n        return Array.from(this.values())\n    }\n\n    get elements(){\n        return Array.from(this.keys())\n    }\n\n    get length(){ return this.size }\n}\n\nconst DISABLE_EVENTS =[\n    'longpress', \n    'contextmenu', \n    'dragstart', \n    'mouseenter', \n    'mousemove', \n    'click'\n]\n\nexport default class Selection {\n\n    constructor(list, itemTagName, opts={}){\n\n        this.opts = Object.assign({\n            toolbar: null,\n            selectedAttr: 'isSelected',\n            endWhenNoResults: true,\n            endOnEsc: true,\n            autoScrollThreshold: 48,\n            autoScrollAcceleration: 5,\n            onBegin: ()=>{},\n            onEnd: ()=>{},\n            onChange: result=>{}\n        }, opts)\n\n        this.EVENTS = {\n            DOWN: isTouch ? 'touchstart' : 'mousedown',\n            UP: isTouch ? 'touchend' : 'mouseup',\n            DRAG: isTouch ? 'touchmove' : 'mouseover'\n        }\n\n        if( this.opts.toolbar )\n            this.opts.toolbar.selection = this\n        \n        this.result = new ResultMap()\n\n        this.list = list\n        this.itemTagName = itemTagName.toUpperCase()\n\n        this.SELECTED = this.opts.selectedAttr\n\n        // bind method context\n        this.stopPropagation = this.stopPropagation.bind(this)\n        // this.onClick = this.onClick.bind(this)\n        this.onScroll = this.onScroll.bind(this)\n        this.onKeydown = this.onKeydown.bind(this)\n        this.onEventDown = this.onEventDown.bind(this)\n        this.onEventUp = this.onEventUp.bind(this)\n        this.onEventDrag = this.onEventDrag.bind(this)\n    }\n\n    get isOn(){ return this.__on === true }\n\n    begin(e){\n\n        if( this.isOn ) return\n\n        this.__on = true\n\n        this.bindEvents(e)\n\n        // select the item that triggered the selection\n        if( e ){\n            this._dragging = true\n            this._startItem = this.itemInEvent(e)\n            this.select(this._startItem)\n        }\n\n        this.opts.onBegin()\n        this.emit('begin')\n    }\n\n    end(){\n        this.__on = false\n        this.unbindEvents()\n        let {items} = this.getItems()\n        items.forEach(item=>{\n            this._deselect(item)\n        })\n\n        this.opts.onEnd()\n        this.emit('end')\n    }\n\n    bindEvents(e){\n        // incase other code is listening for these events\n        // disable them while we are in selection mode\n        DISABLE_EVENTS.forEach(evt=>{\n            this.list.addEventListener(evt, this.stopPropagation, true)    \n        })\n        \n        window.addEventListener('keydown', this.onKeydown)\n        this.list.addEventListener('scroll', this.onScroll, true)\n        this.list.addEventListener(this.EVENTS.DOWN, this.onEventDown, true)\n        this.list.addEventListener(this.EVENTS.UP, this.onEventUp, true)\n\n        if( e && e.detail && e.detail.dragging )\n            this.list.addEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n    }\n\n    unbindEvents(){\n        DISABLE_EVENTS.forEach(evt=>{\n            this.list.removeEventListener(evt, this.stopPropagation, true)    \n        })\n        \n        window.removeEventListener('keydown', this.onKeydown)\n        this.list.removeEventListener('scroll', this.onScroll, true)\n        this.list.removeEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n        this.list.removeEventListener(this.EVENTS.DOWN, this.onEventDown, true)\n        this.list.removeEventListener(this.EVENTS.UP, this.onEventUp, true)\n    }\n\n    getItems(start, end){\n        let items = Array.from(this.list.querySelectorAll(this.itemTagName))\n\n        if( typeof start === 'number' )\n            start = items[start]\n        \n        if( typeof end === 'number' )\n            end = items[end]\n        \n        let oldStart = this._dragging&&this._dragging.start\n        let oldEnd = this._dragging&&this._dragging.end\n\n        if( start && end ){\n            let startIndex = items.indexOf(start)\n            let endIndex = items.indexOf(end)\n\n            if( startIndex == -1 || endIndex == -1 ){\n                start = null\n                end = null\n            }else{\n                start = startIndex < endIndex ? startIndex : endIndex\n                end = startIndex < endIndex ? endIndex : startIndex\n            }\n\n            this._dragging = {items, start, end}\n        }\n\n        return {items, start, end, oldStart, oldEnd}\n    }\n\n    select(item, startItem){\n        \n        if( item instanceof Event )\n            item = this.itemInEvent(item)\n\n        if( !item ) return\n\n        if( !startItem ){\n            this._toggleSelect(item)\n\n            this.opts.onChange(this.result)\n            this.emit('change', this.result)\n            \n            if( this.opts.endWhenNoResults && this.result.size == 0 )\n                setTimeout(()=>this.end()) // let mouseup finish\n\n            return\n        }\n\n        let {items, start, end, oldStart, oldEnd} = this.getItems(startItem, item)\n        let shouldSelect = startItem.hasAttribute(this.SELECTED)\n\n        items.forEach((_item,i)=>{\n            if( i >= start && i <= end)\n               shouldSelect ? this._select(_item) : this._deselect(_item)\n            \n            else if( oldStart !== false && oldEnd !== false && i >= oldStart && i <= oldEnd)\n                this._deselect(_item)\n        })\n\n        this.emit('change', this.result)\n        \n        if( this.opts.endWhenNoResults && this.result.size == 0 )\n            setTimeout(()=>this.end()) // let mouseup finish\n    }\n\n    _toggleSelect(item){\n        if( item.hasAttribute(this.SELECTED))\n            this._deselect(item)\n        else\n            this._select(item)\n    }\n\n    _select(item){\n        item.setAttribute(this.SELECTED, '')\n        this.result.set(item, item.model||item)\n    }\n\n    _deselect(item){\n        item.removeAttribute(this.SELECTED)\n        this.result.delete(item)\n    }\n\n    stopPropagation(e){\n        e.preventDefault()\n        e.stopImmediatePropagation()\n        e.stopPropagation()\n    }\n\n    onScroll(){\n        if( isTouch && !this._autoScroll && !this._dragging ){\n            this._scrolling = new Date().getTime()\n        }\n    }\n\n    onKeydown(e){\n        if( this.opts.endOnEsc && e.key == 'Escape' )\n            this.end()\n    }\n\n    onEventDown(e){\n\n        // only work on \"main\" buttons\n        if( e.button !== undefined && e.button !== 0 ) return\n\n        e.stopPropagation()\n\n        // while mouse/touch is down...watch dragging\n        this.list.addEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n\n        let item = this.itemInEvent(e)\n\n        if( item )\n        this.isClickEvent = setTimeout(()=>{\n            \n            let ts = new Date().getTime()\n\n            // no longer a mouse click\n            delete this.isClickEvent\n\n            if( this._scrolling && ts-this._scrolling<=50 ) return\n\n            delete this._scrolling\n\n            this._dragging = true\n            this._startItem = item\n            this._select(item)\n\n        }, 200)\n    }\n\n    onEventUp(e){\n\n        this.stopPropagation(e)\n        this._dragging = false\n        this.autoScroll(false)\n        clearTimeout(this.isClickEvent)\n\n        let ts = new Date().getTime()\n\n        if( this.isClickEvent && (!this._scrolling || ts-this._scrolling>50) ){\n\n            delete this.isClickEvent\n            let item = this.itemInEvent(e)\n            this.select(item, e.shiftKey?this._startItem:null)\n\n            if( !e.shiftKey )\n                this._startItem = item\n\n        }else{\n            delete this._startItem\n            delete this._lastTouchItem\n        }\n\n        delete this._scrolling\n        this.list.removeEventListener(this.EVENTS.DRAG, this.onEventDrag, true)\n    }\n\n    onEventDrag(e){\n\n        if( this._dragging )\n            this.stopPropagation(e)\n\n        if( this.isClickEvent || (this._scrolling && !this._autoScroll) ) return\n\n        // touch devices\n        if( e.changedTouches ){\n\n            let {clientX, clientY} = e.changedTouches[0]\n        \n            if( this.opts.autoScrollThreshold !== false){\n\n                let listRect = this.list.getBoundingClientRect()\n                \n                let top = listRect.y + this.opts.autoScrollThreshold\n                let bottom = listRect.y + listRect.height - this.opts.autoScrollThreshold\n\n                let acceleration = (this.opts.autoScrollAcceleration||1) / 10\n\n                // scroll up\n                if( clientY < top )\n                    this.autoScroll(-1 - Math.round(Math.pow(top-clientY, acceleration)))\n                \n                // scroll down\n                else if( clientY > bottom )\n                    this.autoScroll(1 + Math.round(Math.pow(clientY-bottom, acceleration)))\n                \n                // not within threshold, stop scrolling\n                else\n                    this.autoScroll(false)\n\n            }\n\n            let item = this.list.getRootNode().elementFromPoint(clientX, clientY);\n\n            if( item && item.tagName == this.itemTagName \n            && item != this._lastTouchItem ){\n                this._lastTouchItem = item\n                this.select(item, this._startItem)\n            }\n            \n        // mouse event\n        }else{\n            let item = e.relatedTarget && e.relatedTarget.tagName == this.itemTagName ? e.relatedTarget : e\n            this.select(item, this._startItem)\n        }\n    }\n\n    itemInEvent(e){\n        let path = e.composedPath()\n        return path.find(_el=>_el.tagName==this.itemTagName)\n    }\n\n    autoScroll(speed=2){\n        \n        if( speed == false || this._autoScrollSpeed != speed ){\n            clearInterval(this._autoScroll)\n\n            if( speed == false ){\n                delete this._autoScroll\n                delete this._autoScrollSpeed\n            }\n        }\n        \n        if( speed !== false && this._autoScrollSpeed != speed ){\n            this._autoScrollSpeed = speed\n            \n            this.list.scrollTop = this.list.scrollTop+this._autoScrollSpeed\n            \n            this._autoScroll = setInterval(()=>{\n                this.list.scrollTop = this.list.scrollTop+this._autoScrollSpeed\n            },10)\n        }\n    }\n    \n}\n\nEmitter(Selection.prototype)\n","import { LitElement, html, css } from 'lit-element'\nimport DataSource from './data/source'\nimport Filters from './data/filters'\nimport Sorts from './data/sorts'\nimport Layouts from './data/layouts'\nimport './toolbar'\nimport './toolbar/selection-bar'\nimport './infinite-list'\nimport '../../elements/spinner-overlay'\nimport '../../helpers/lit-element/selectors'\nimport Selection from '../selection'\n\ncustomElements.define('b-list', class extends LitElement {\n\n    constructor(){\n        super()\n\n        this.onKeydown = this.onKeydown.bind(this)\n        this.onKeyup = this.onKeyup.bind(this)\n        this.createRow = this.createRow.bind(this)\n        this.createEmptyElement = this.createEmptyElement.bind(this)\n        this.createDivider = this.createDivider.bind(this)\n    }\n\n    get coll(){ return this.__coll }\n    set coll(coll){\n        let didChange = !!this.__coll && this.__coll != coll\n        this.__coll = coll\n        this.dataSource.coll = coll\n\n        // I think this is ok to do here\n        if( didChange )\n            this.shouldFetchData ? this.refresh() : this.reload() \n    }\n\n    set key(key){ this.__key = key }\n    get key(){\n        return this.__key || this.getAttribute('key')\n    }\n\n    get filters(){\n        if( !this.__filters )\n            this.filters = {}\n\n        return this.__filters\n    }\n    set filters(filters){\n        if( !this.__filters ){    \n            this.__filters = new Filters()\n            this.filters.key = this.key\n            this.filters.list = this\n            this.dataSource.filters = this.filters\n            this.filters.on('change', this.onFilterChange.bind(this))\n        }\n\n        this.filters.use(filters)\n    }\n\n    get sorts(){ return this.__sorts }\n    set sorts(sorts){\n        if( !this.__sorts ){\n            this.__sorts = new Sorts()\n            this.sorts.key = this.key\n            this.sorts.list = this\n            this.dataSource.sorts = this.sorts\n            this.sorts.on('change', this.onSortChange.bind(this))\n        }\n        \n        this.sorts.use(sorts)\n    }\n\n    get layout(){ return this.layouts&&this.layouts.active}\n    set layout(val){ if(this.layouts) this.layouts.active = val}\n    get layouts(){\n        if( !this.__layouts && this.listOptions && this.listOptions.layouts){\n            this.__layouts = new Layouts(this.listOptions.layouts)\n            this.layouts.key = this.key\n            this.layouts.list = this\n            this.setAttribute('layout', this.layout)\n            this.layouts.on('change', layout=>{\n                this.setAttribute('layout', this.layout)\n                this.update()\n                this.reload()\n            })\n        }\n\n        return this.__layouts\n    }\n\n    get dataSource(){\n        if( !this.__dataSource ){\n            this.__dataSource = new DataSource(this.listOptions)\n            this.__dataSource.on('change:count', count=>{\n                this.toolbar.count = count\n            })\n        }\n        return this.__dataSource\n    }\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-rows: auto auto 1fr;\n            overflow: hidden;\n            flex: 1;\n            position: relative;\n        }\n\n        slot[name=\"header\"] {\n            display: block;\n            overflow-x: auto;\n        }\n\n        slot[name=\"header\"]::-webkit-scrollbar {\n            display: none;\n            width: 0 !important;\n            height: 0 !important;\n        }\n\n        b-spinner-overlay {\n            --spinnerSize: 6em;\n        }\n\n        b-list-toolbar {\n            box-shadow: var(--list-toolbar-shadow, rgba(0,0,0,.2) 0 0 6px);\n            padding: .25em .5em;\n            z-index: 10;\n        }\n\n        b-list-toolbar b-btn {\n            color: var(--toolbarTextColor);\n        }\n\n        b-infinite-list {\n            display: block;\n            flex: 1;\n            overflow: auto;\n            position: relative;\n            -webkit-overflow-scrolling: touch;\n        }\n\n        b-infinite-list > [selected] {\n            position: relative;\n        }\n\n        b-infinite-list > [selected]:before {\n            position: absolute;\n            content: '';\n            border: solid 1.4em #E3F2FD;\n            border-left-width: 2em;\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n        }\n\n        contract-draft-row { /* FIXME: remove? */\n            padding: 2em;\n        }\n\n        contract-draft-row:not(:last-child) {\n            border-bottom: solid 1px rgba(0,0,0,.1);\n        }\n\n        /* .queuing-overlay {\n            display: none;\n            background: rgba(255,255,255,.8);\n            color: #888;\n            z-index: 1000;\n        }\n\n        :host([queuing]) .queuing-overlay {\n            display: flex;\n        } */\n    `}\n\n    get spinner(){\n        return this.__spinner = this.__spinner \n                            || this.querySelector('[slot=\"spinner\"]')\n                            || this.shadowRoot.querySelector('b-spinner-overlay')\n    }\n\n    render(){return html`\n\n        <style>${this.customStyles||''}</style>\n        \n        <slot name=\"spinner\">\n            <b-spinner-overlay></b-spinner-overlay>\n        </slot>\n        \n        <b-list-toolbar .filters=${this.filters} .sorts=${this.sorts} .layouts=${this.layouts}\n            @filter-term-changed=${this.onFilterTermChange}>\n            <slot name=\"toolbar:before\" slot=\"before\"></slot>\n            <slot name=\"toolbar:after\" slot=\"after\"></slot>\n            <slot name=\"toolbar:refresh\" slot=\"refresh-btn\">\n                <b-btn text pill icon=\"arrows-ccw\" @click=${this.refresh}></b-btn>\n            </slot>\n            <!-- <b-label slot=\"after\" class=\"queuing-label\">Queuing filters, release to apply</b-label> -->\n            <b-list-selection-bar>\n                <slot name=\"actions:left\" slot=\"left\"></slot>\n                <slot name=\"actions:right\" slot=\"right\"></slot>\n            </b-list-selection-bar>\n        </b-list-toolbar>\n\n        <slot name=\"header\"></slot>\n        <b-infinite-list\n            .empty=\"${this.createEmptyElement}\"\n            .row=\"${this.createRow}\"\n            .divider=${this.createDivider}\n            .dataSource=${this.dataSource}\n            fetch-on-load=${(this.listOptions&&this.listOptions.fetchOnLoad)}\n            layout=\"${this.layout}\"\n        ></b-infinite-list>\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        window.addEventListener('keydown', this.onKeydown, true)\n        window.addEventListener('keyup', this.onKeyup, true)\n\n        let host = this.getRootNode().host\n\n\t\tif( host ){\n            this.host = host\n            host.list = host.list || this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n\n        window.removeEventListener('keydown', this.onKeydown, true)\n        window.removeEventListener('keyup', this.onKeyup, true)\n\n        if( this.host && this.host.list == this )\n            delete this.host\n    }\n\n    onKeydown(e){\n        if( e.target !== document.body ) return\n        if( !e.metaKey && !e.ctrlKey ) return\n        this.queuing = true\n    }\n\n    onKeyup(e){\n        if( this.queuing && !this.filters.queuedChanges )\n            this.queuing =  false\n    }\n\n    get queuing(){ return this.filters && this.filters.queuing }\n    set queuing(doQueue){\n        if( !this.filters ) return\n\n        this.filters.queuing = doQueue\n\n        doQueue ? this.setAttribute('queuing', '') : this.removeAttribute('queuing')\n    }\n\n    get rowElement(){ return this.getAttribute('row') || ''}\n    get emptyElement(){ return this.getAttribute('empty') || 'b-empty-state'}\n\n    get toolbar(){\n        return this.shadowRoot.querySelector('b-list-toolbar')\n    }\n\n    get list(){\n        return this.shadowRoot.querySelector('b-infinite-list')\n    }\n\n    createRow(model){\n\n        let row = customElements.get(this.rowElement)\n\n        if( row ){\n            row = new row()\n            row.model = model\n            row.list = this\n            return row\n        }\n    }\n\n    createEmptyElement(){\n        this.emptyView = this.emptyView || document.createElement(this.emptyElement)\n        this.emptyView.list = this\n        this.emptyView.dataSource = this.dataSource\n        \n        let term = this.dataSource.filters&&this.dataSource.filters.term\n        this.emptyView.value = term ? `No results for ${term}` : (this.getAttribute('placeholder') || 'No results')\n        this.emptyView.requestUpdate()\n        return this.emptyView\n    }\n\n    createDivider(prevModel, model){\n\n        let divider = this.getAttribute('divider')\n        \n        divider = divider && customElements.get(divider)\n\n        if( divider && divider.shouldDisplay && divider.shouldDisplay(prevModel, model, this) ){\n            divider = new divider(prevModel, model, this)\n            divider.list = this\n            divider.model = model\n            divider.prevModel = prevModel\n            return divider\n        }\n\n        return null\n    }\n\n    async firstUpdated(){\n\n        // defer to end of callstack to let infinite list view render and begin fetching\n        setTimeout(async ()=>{\n            this.spinner.show = true\n            this.toolbar.count = await this.dataSource.length()\n            this.spinner.show = false\n        })\n\n        this.header = this.$$('[name=\"header\"]').assignedNodes()[0]\n\n        if( this.header )\n        this.list.addEventListener('scroll', e=>{\n            this.header.scrollLeft = e.currentTarget.scrollLeft\n            \n            if( e.currentTarget.scrollLeft == 0 )\n                this.removeAttribute('scrolled-x')\n            else\n                this.setAttribute('scrolled-x', '')\n        })\n\n        // TODO: unbind on disconnect?\n        this.selection = new Selection(this.list, this.rowElement, {\n            toolbar: this.shadowRoot.querySelector('b-list-selection-bar')\n        })\n        \n        this.addEventListener('selection:begin', e=>{\n            e.stopPropagation()\n            this.selection.begin(e)\n        })\n    }\n\n    async refresh(){\n        this.spinner.show = true\n        this.dataSource.reset()\n        this.list.reset()\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    async reload(){\n        this.dataSource.refilter()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    get shouldFetchData(){\n        return this.dataSource.hasFetched || this.listOptions&&this.listOptions.fetchOnLoad\n    }\n\n    async onFilterTermChange(changes){\n\n        // TODO: probably need an opt in feature\n        if( this.listOptions && this.listOptions.fetch == 'more' ){\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n    }\n\n    async onFilterChange(changes){\n        \n        if( this.filters.needsDatabaseFetch(changes) ){\n            this.spinner.show = true\n            this.dataSource.reset()\n        }\n\n        this.dataSource.applyFilters()\n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n    async onSortChange(){\n\n        if( this.sorts.sortOnDB === true ){\n            this.spinner.show = true\n            this.dataSource.reset()\n        }else{\n            this.dataSource.sort()\n        }\n        \n        this.list.reset(this.shouldFetchData)\n        this.toolbar.count = await this.dataSource.length()\n        this.spinner.show = false\n    }\n\n})\n\nexport default customElements.get('b-list')","import {LitElement} from 'lit-element'\n\nLitElement.prototype.emitEvent = function(eventName, detail=null){\n\n    var event = new CustomEvent(eventName, {\n        bubbles: true,\n        composed: true,\n        detail: detail\n    });\n    \n    this.dispatchEvent(event)\n}\n\n","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-cal-day', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            grid-template-rows: auto 1fr;\n            overflow: hidden;\n            padding: .25em;\n        }\n\n        header {\n            text-align: right;\n        }\n\n        main {\n            overflow: auto;\n        }\n\n        .date {\n            height: 1.8em;\n            min-width: 1.8em;\n            box-sizing: border-box;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 1em;\n        }\n\n        :host([overflow]) .date {\n            color: var(--theme-color-accent, #999);\n            padding: 0 .35em;\n        }\n\n        :host([today]) .date {\n            color: #fff;\n            background: var(--theme, var(--blue, #2196F3));\n        }\n    `}\n\n    get isOverflow(){\n        return this.caldate.month() != this.date.month()\n    }\n\n    get isWeekend(){\n        return [0, 6].includes(this.date.weekday())\n    }\n\n    get isToday(){\n        return this.date.isSame(new Date(), 'day')\n    }\n\n    render(){return html`\n\n        <header>\n            <div class=\"date\">\n                ${this.date.date()==1?this.date.format('MMM'):''}\n                ${this.date.get('date')}\n            </div>\n        </header>\n        <main>\n            <slot></slot>\n        </main>\n    `}\n\n    set date(date){\n        this.__date = date\n\n        this.toggleAttribute('weekend', this.isWeekend)\n        this.toggleAttribute('overflow', this.isOverflow)\n        this.toggleAttribute('today', this.isToday)\n\n        this.requestUpdate()\n    }\n\n    get date(){\n        return this.__date\n    }\n\n    // firstUpdated(){\n    //     let slot = this.shadowRoot.querySelector('slot');\n    //     this.main = this.shadowRoot.querySelector('main');\n    //     slot.addEventListener('slotchange', this.onSlotChange.bind(this));\n    // }\n\n    // onSlotChange(e){\n    //     let nodes = e.target.assignedNodes();\n\n    //     if( nodes[0] && nodes[0].nodeName == '#text' )\n    //         return\n\n    //     let doesOverflow = this.main.offsetHeight < this.main.scrollHeight\n\n    //     console.log(doesOverflow);\n    // }\n\n})\n\nexport default customElements.get('b-cal-day')","import { LitElement, html, css } from 'lit-element'\nimport '../../elements/btn-group'\nimport '../../helpers/lit-element/events'\nimport moment from 'moment'\nimport './day'\n\ncustomElements.define('b-cal', class extends LitElement{\n\n    constructor(){\n        super()\n\n        this.weekdays = moment.weekdaysMin()\n\n        this.days = new Array(7*6).fill('')\n        this.date = this._date || this.getAttribute('date') || moment()\n    }\n\n    static get styles(){return css`\n        :host {\n            /* height: 100%; */\n            display: grid;\n            position:relative;\n            display: grid;\n            grid-template-rows: auto 1fr;\n            --grid-cols: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n        }\n\n        :host([collapse-weekend]) {\n            --grid-cols: 2.5em 1fr 1fr 1fr 1fr 1fr 2.5em;\n        }\n\n        header {\n            position: sticky;\n            top: 0;\n            z-index: 10;\n            background: var(--b-cal-header-bgd, var(--theme-bgd, #fff));\n            border-bottom: solid 1px rgba(var(--theme-rgb, 0,0,0), .1);\n            display: grid;\n            grid-template-columns: max-content max-content;\n            justify-content: space-between;\n            align-items: center;\n            padding: .75em 1em 0;\n        }\n\n        header .title,\n        header .nav {\n            display: flex;\n            align-items: center;\n        }\n\n        h1, h2, h3 {\n            margin: 0;\n        }\n\n        .weekdays {\n            margin: .75em -1em 0;\n            grid-column: 1/-1;\n            display: grid;\n            grid-template-columns: var(--grid-cols);\n            text-align: right;\n        }\n\n        .weekdays > div {\n            padding-right: .75em;\n            padding-bottom: .5em;\n        }\n\n        main {\n            /* height: 100%; */\n            display: grid;\n            position:relative;\n            display: grid;\n            grid-template-columns: var(--grid-cols);\n            grid-template-rows: repeat(6, 1fr);\n            gap: 1px;\n            /* min-height: 0; */\n        }\n\n        b-cal-day {\n            border-right: solid 1px rgba(var(--theme-rgb, 0,0,0), .1);\n            border-bottom: solid 1px rgba(var(--theme-rgb, 0,0,0), .1);\n            flex-shrink: 0;\n            min-width: 0;\n        }\n\n        b-cal-day[weekend] {\n            background: var(--theme-bgd-accent, #f5f5f5);\n        }\n    `}\n\n    get date(){ return this._date }\n\n    set date(val){\n        \n        let oldDate = this._date && this._date.clone()\n\n        if( val instanceof moment ){\n            this._date = val\n\t\t\tthis._dateSelected = this._date.clone()\n\n        }else if( typeof val == 'string' ){\n\n            this._date = moment(val)\n\t\t\tthis._dateSelected = this._date.clone()\n\n\t\t}else if( val && typeof val == 'object' ){\n\t\t\tthis._dateSelected.set(val)\n\t\t\tthis._date.set(val)\n        }\n\n\t\tthis._date.set({date: 1})\n\n        if( oldDate && this._date.isSame(oldDate) )\n            return\n\n        this._loadDays()\n\n        this.emitEvent('date-changed', this.range)\n\t}\n\n    firstUpdated(){\n        this.emitEvent('date-changed', this.range)\n    }\n\n    _loadDays(){\n        let start = this._date.weekday()\n\t\tlet numDays = this._date.daysInMonth()\n\n        this.days = this.days.map((_, i)=>{\n            return this._date.clone().add(i-start, 'day')\n        })\n    }\n\n    get range(){\n        return [this.days[0], this.days[this.days.length-1]]\n    }\n\n    nextMonth(){\n\t\tthis.date = this._date.clone().add('month', 1)\n        this.update()\n\t}\n\n\tprevMonth(){\n\t\tthis.date = this._date.clone().add('month', -1)\n        this.update()\n\t}\n\n    goToToday(){\n        this.date = moment()\n        this.update()\n    }\n\n    render(){return html`\n        <header>\n            <div class=\"title\">\n                <h1>${this.date.format('MMMM YYYY')}</h1>\n                <slot name=\"after-title\"></slot>\n            </div>\n            <div class=\"nav\">\n                <slot name=\"before-nav\"></slot>\n                <div>\n                    <b-btn text icon=\"left-open-big\" @click=${this.prevMonth}></b-btn>\n                    <b-btn text @click=${this.goToToday}>Today</b-btn>\n                    <b-btn text icon=\"right-open-big\" @click=${this.nextMonth}></b-btn>\n                </div>\n                <slot name=\"after-nav\"></slot>\n            </div>\n\n            <div class=\"weekdays\">${this.weekdays.map((str,i)=>html`\n                ${i==0||i==6?html`\n                    <div @click=${this.toggleCollapseWeekend}>${str}</div>\n                `:html`\n                    <div>${str}</div>\n                `}\n            `)}</div>\n\n        </header>\n        <main>\n        ${this.days.map(date=>html`\n            <b-cal-day .caldate=${this._date} .date=${date}>\n                <slot name=\"${date.format('YYYY-MM-DD')}\"></slot>\n            </b-cal-day>\n        `)}\n        </main>\n    `}\n\n    toggleCollapseWeekend(){\n        this.toggleAttribute('collapse-weekend', !this.hasAttribute('collapse-weekend'))\n    }\n\n})\n\nexport default customElements.get('b-cal')","import { LitElement, html, css } from 'lit-element'\n\ncustomElements.define('b-list-of-colors', class extends LitElement{\n\n    static get styles(){return css`\n        :host {\n            display: grid;\n            --grids: 1fr 1fr 1fr 1fr;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        [group=\"default\"] {\n            grid-column: 1/5;\n        }\n\n        [group=\"default\"] .colors {\n            display: grid;\n            grid-template-columns: var(--grids);\n            gap: 1em;\n        }\n\n        .color {\n            border: 1px solid rgba(0,0,0,.12);\n            padding: .5em;\n            /* display: flex;\n            justify-content: space-between;\n            align-items: center; */\n        }\n\n        [num=\"900\"] + [num] {\n            margin-top: .5em;\n        }\n\n        @media (max-width: 550px) {\n            :host {\n                --grids: 1fr 1fr;\n            }\n\n            [group=\"default\"] {\n                grid-column: 1/3\n            }\n        }\n    `}\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        this.colors = []\n\n        for( let sheet of document.styleSheets ){\n\n            let rules = null\n\n            try{ rules = sheet.cssRules }catch(e){}\n\n            if( rules )\n            for( let rule of rules ){\n\n                if( rule.cssText.match(/:root { --color/) ){\n                    \n                    let matches = rule.cssText.match(/--.[^:)]+: (.[^;]+);/g)\n                    let colors = {}\n                    \n                    matches.map(v=>{\n\n                        let [str, name, num, color] = v.match(/--(.[^\\d(A\\d)]+)(?:-(.+))?: (.[^;]+);/)\n                        let key = name + (num?'-'+num:'')\n                        \n                        if( num ){\n                            colors[name] = colors[name] || {name: name, colors: []}\n                            colors[name].colors.push({ key, name, num, color })\n                        }else{\n                            colors['default'] = colors['default'] || {name: 'default', colors: []}\n                            colors['default'].colors.push({ key, name, num, color})\n                        }\n                            \n                    })\n\n                    this.colors = Object.values(colors)\n                }\n            }\n        }\n    }\n\n    render(){return html`\n        ${this.colors.map(g=>html`\n            <div group=\"${g.name}\">\n                <h3>${g.name}</h3>\n                <div class=\"colors\">\n                ${g.colors.map(c=>html`\n                    <div num=${c.num} key=\"${c.key}\" class=\"color\" style=\"background-color: var(--${c.key});\">\n                        <div>${c.key}</div>\n                        <!-- <b-sub>${c.num?c.color:''}</b-sub> -->\n                    </div>\n                `)}\n                </div>\n            </div>\n        `)}\n    `}\n\n})","\nimport { LitElement, html, css } from 'lit-element'\n\nexport const fileIconColors = {\n\n    pdf: css`:host([ext=\"pdf\"]){ --bgd: #b40808; }`,\n    js: css` :host([ext=\"js\"]){ --bgd: #f8dc3d; --color: #333;}`,\n    json: css`:host([ext=\"json\"]){ --bgd: #f8dc3d; --color: #333;}`,\n    video: css`:host([ext=\"mp4\"]){ --bgd: var(--red);}`,\n    html: css`:host([ext=\"html\"]){ --bgd: #e54c21}`,\n    xml: css`:host([ext=\"xml\"]){ --bgd: #f26524}`,\n    onix: css`:host([ext=\"onix\"]){ --bgd: #626a7f;}`,\n    zip: css`:host([ext=\"zip\"]){ --bgd: var(--gray-600);}`,\n\n    jpg: css`:host([ext=\"jpg\"]){ --bgd: var(--blue); }`,\n    jpeg: css`:host([ext=\"jpeg\"]){ --bgd: var(--blue); }`,\n    png: css`:host([ext=\"png\"]){ --bgd: var(--blue); }`,\n    gif: css`:host([ext=\"gif\"]){ --bgd: var(--blue); }`,\n\n    wav: css`:host([ext=\"wav\"]){ --bgd: var(--deep-purple); }`,\n    mp3: css`:host([ext=\"mp3\"]){ --bgd: var(--deep-purple); }`,\n    flac: css`:host([ext=\"flac\"]){ --bgd: var(--deep-purple); }`,\n    m4a: css`:host([ext=\"m4a\"]){ --bgd: var(--deep-purple); }`,\n\n    // Microsoft\n    word: css`\n        :host([ext=\"doc\"]),\n        :host([ext=\"docx\"]) {\n            --bgd: #0f52b7;\n        }\n    `,\n    excel: css`\n        :host([ext=\"xls\"]),\n        :host([ext=\"xlsx\"]),\n        :host([ext=\"xlsm\"]) {\n            --bgd: #0a8144;\n        }\n    `,\n\n    // Adobe\n    psd: css`\n        :host([ext=\"psd\"]) {\n            --bgd: #011c24;\n            --color: #00c8ff;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    indd: css`\n        :host([ext=\"indd\"]),\n        :host([ext=\"idml\"]) {\n            --bgd: #2a020b;\n            --color: #ff3c95;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    icml: css`\n        :host([ext=\"icml\"]) {\n            --bgd: #2a0c2a;\n            --color: #eb72eb;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    ai: css`\n        :host([ext=\"ai\"]),\n        :host([ext=\"ait\"]) {\n            --bgd: #251300;\n            --color: #fe7c00;\n            --dog-ear-bgd: var(--color);\n            --border-color: var(--color);\n        }\n    `,\n    pdf: css`\n        :host([ext=\"pdf\"]) {\n            --bgd: #2f1208;\n            --color: #fff;\n            --dog-ear-bgd: #fd3406;\n            --border-color: #fd3406;\n        }\n    `\n\n\n}\n\nexport const fileIconLabels = {\n    'json': html`<span>{ }</span>`,\n    'mp4': html`<b-icon name=\"videocam\"></b-icon>`,\n    \n    'mp3': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n    'wav': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n    'flac': ext=>html`<b-icon name=\"music\"></b-icon><sub>${ext}</sub>`,\n\n    'html': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    'xml': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    'onix': ext=>html`<b-icon name=\"code\"></b-icon><sub>${ext}</sub>`,\n    \n    'dpl': html`<b-icon name=\"cd\"></b-icon>`,\n    'iso': html`<b-icon name=\"cd\"></b-icon>`,\n\n    'zip': html`<b-icon name=\"file-archive\"></b-icon>`,\n    'epub': ext=>html`<b-icon name=\"book-open\"></b-icon><sub>${ext}</sub>`,\n}\n\n\nexport default function(customColors={}, customLabels={}){\n\nObject.assign(fileIconColors, customColors)\nObject.assign(fileIconLabels, customLabels)\n\ncustomElements.define('b-file-icon', class extends LitElement{\n\n    static get properties(){ return {\n        ext: {type: String, reflect: true}\n    }}\n\n    static get styles(){\n        return [css`\n        :host {\n            display: inline-block;\n            position:relative;\n            --color: var(--b-file-icon-color-default, #fff);\n            --bgd: var(--b-file-icon-bgd-default, #aaa);\n            --size: var(--b-file-icon-size, 2em);\n            --radius: var(--b-file-icon-radius, 0px);\n            --border-color: transparent;\n\n            width: calc(.8 * var(--size));\n            height: var(--size);\n            text-transform: uppercase;\n        }\n\n        main {\n            padding: 20%;\n            padding-top: 30%; /* appears more center */\n            box-sizing: border-box;\n            position: relative;\n            width: 100%;\n            height: 100%;\n            background: var(--bgd);\n            border-radius: var(--radius);\n            border-bottom: calc(var(--size) * .02) solid rgba(0, 0, 0, 0.4);\n            -webkit-clip-path: polygon(0 0, 66% 0, 100% 26.4%, 100% 100%, 0 100%);\n            clip-path: polygon(0 0, 66% 0, 100% 26.4%, 100% 100%, 0 100%);\n\n            text-align: center;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color: var(--color);\n            box-shadow: 0 0 0 calc(.05 * var(--size)) var(--border-color) inset;\n        }\n\n        .dogear {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: var(--dog-ear-bgd, rgba(0,0,0,.4));\n            border-radius: 0 0 0 var(--radius);\n\n            height: calc(.8 * var(--size) * .34);\n            width: calc(.8 * var(--size) * .34);\n            -webkit-clip-path: polygon(0 0, 0% 100%, 100% 100%);\n            clip-path: polygon(0 0, 0% 100%, 100% 100%);\n        }\n\n        label,\n        ::slotted(*) {\n            font-size: calc(var(--size) * .25);\n            line-height: .5em;\n        }\n\n        label > span,\n        label > b-icon {\n            font-size: 1.4em;\n        }\n\n        label sub {\n            font-size: .6em;\n            vertical-align: baseline;\n            line-height: 0em;\n        }\n\n        ::slotted(b-icon) {\n            /* font-size: 1em; */\n        }\n    `].concat(Object.values(fileIconColors)) }\n\n    render(){return html`\n        <main>\n            <div class=\"dogear\"></div>\n            <slot name=\"label\">\n                <label>${this.label}</label>\n            </slot>\n        </main>\n        <slot></slot>\n    `}\n\n    get label(){\n        let label = fileIconLabels[this.ext]\n\n        if( label )\n            return typeof label == 'function' ? label(this.ext) : label\n\n        return this.ext\n    }\n\n})\n\n}","import { LitElement, html, css } from 'lit-element'\n\nconst NotifControllers = {}\n\ncustomElements.define('b-notifs', class extends LitElement{\n\n    // createRenderRoot(){ return this }\n\n    static get(name='main'){\n\n        if( name == 'main' && !NotifControllers[name] ){\n            let controller = document.createElement('b-notifs')\n            controller.setAttribute('name', 'main')\n            document.body.appendChild(controller)\n            NotifControllers[name] = controller\n        }\n\n        return NotifControllers[name]\n    }\n\n    get name(){\n        return this.hasAttribute('name') ? this.getAttribute('name') : undefined\n    }\n\n    constructor(){\n        super()\n\n        if( this.name ){\n            if( NotifControllers[this.name] )\n                console.warn('A `b-notifs` controller already exists with the name: ', this.name)\n            else\n                NotifControllers[this.name] = this\n        }\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        if( this.name )\n            delete NotifControllers[this.name]\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n        if( this.name && !NotifControllers[this.name] )\n            NotifControllers[this.name] = this\n    }\n\n    static get styles(){return css`\n        :host {\n            display: block;\n            pointer-events: none;\n            \n            overflow: hidden;\n            position:absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            z-index: 1200;\n            --padding: var(--b-notif-padding, 1em);\n        }\n\n        :host([name=\"main\"]) {\n            position: fixed;\n            top: env(safe-area-inset-top);\n            left: env(safe-area-inset-left);\n            bottom: env(safe-area-inset-bottom);\n            right: env(safe-area-inset-right);\n        }\n\n        @media (max-width:699px), (max-height: 699px) {\n            :host {\n                position: fixed;\n                top: env(safe-area-inset-top);\n                left: env(safe-area-inset-left);\n                bottom: env(safe-area-inset-bottom);\n                right: env(safe-area-inset-right);\n            }\n        }\n\n        slot {\n            position: absolute;\n            display: flex;\n        }\n\n        slot[name=\"top\"],\n        slot[name=\"bottom\"] {\n            width: 100%;\n            align-items: center;\n        }\n\n        slot[name*=\"top\"] {\n            top: 0;\n            flex-direction: column;\n            padding-top: var(--padding);\n        }\n\n        slot[name*=\"bottom\"] {\n            bottom: 0;\n            flex-direction: column-reverse;\n            padding-bottom: var(--padding);\n        }\n\n        slot[name*=\"left\"] {\n            left: 0;\n            padding-left: var(--padding);\n            align-items: flex-start;\n        }\n\n        slot[name*=\"right\"] {\n            right: 0;\n            padding-right: var(--padding);\n            align-items: flex-end;\n        }\n\n        @media (max-width:699px) {\n            slot {\n                padding: 0 !important;\n                position: static !important;\n                --b-notif-width: 100%;\n            }\n\n            .top {\n                position: absolute;\n                top: 0;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                padding: var(--padding);\n                box-sizing: border-box;\n            }\n\n            .bottom {\n                position: absolute;\n                bottom: 0;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                padding: var(--padding);\n                box-sizing: border-box;\n            }\n        }\n    `}\n\n    render(){return html`\n        <div class=\"bottom\">\n            <slot name=\"bottom-left\"></slot>\n            <slot name=\"bottom\"></slot>\n            <slot name=\"bottom-right\"></slot>\n        </div>\n\n        <div class=\"top\">\n            <slot name=\"top-left\"></slot>\n            <slot name=\"top\"></slot>\n            <slot name=\"top-right\"></slot>\n        </div>\n        \n    `}\n\n})\n\nexport default customElements.get('b-notifs')","import { LitElement, html, css } from 'lit-element'\n\nexport default css`\n:host {\n    display: block;\n    position:relative;\n    pointer-events: all;\n    width: var(--b-notif-width, 300px);\n    max-width: 100%;\n\n    /* overflow: hidden; */\n\n    transition: \n        height 300ms cubic-bezier(0.4, 0, 0.2, 1) 300ms,\n        opacity 300ms,\n        transform 300ms cubic-bezier(0.4, 0, 0.2, 1);\n\n    opacity: 0;\n    will-change: transform; \n}\n\n:host([slot*=\"right\"]) { transform: translateX(100%); }\n:host([slot*=\"left\"]) { transform: translateX(-100%); }\n:host([slot=\"top\"]) { transform: translateY(-100%); }\n:host([slot=\"bottom\"]) { transform: translateY(100%); }\n\n:host([animation=\"grow\"]) {\n    transform: scale(.8)\n}\n\n:host([animation=\"bounce\"]) {\n    transform: none;\n}\n\n:host([animation=\"bounce\"].entered) {\n    animation-name: bounce;\n    animation-duration: 700ms;\n    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    animation-fill-mode: forwards;\n}\n\n:host([animation=\"fade\"]) {\n    transform: none;\n}\n\n:host([slot*=\"top\"]) {\n    --spacing-bottom: var(--padding);\n}\n\n:host([slot*=\"bottom\"]) {\n    --spacing-top: var(--padding);\n}\n\n:host(.entered) {\n    opacity: 1;\n    transform: none;\n}\n\n:host(.exit) {\n    height: 0 !important;\n}\n\n:host([color=\"red\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--red);\n}\n\n:host([color=\"blue\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--blue);\n}\n\n:host([color=\"green\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--green);\n}\n\n:host([color=\"orange\"]) {\n    --b-notif-color: #fff;\n    --b-notif-bgd: var(--orange);\n}\n\n:host([color=\"amber\"]) {\n    --b-notif-color: var(--gray-900);\n    --b-notif-bgd: var(--amber);\n}\n\nmain {\n    border-radius: var(--b-notif-radius, 4px);\n    color: var(--b-notif-color, #fff);\n    background: var(--b-notif-bgd, #333);\n    margin-top: var(--spacing-top, 0);\n    margin-bottom: var(--spacing-bottom, 0);\n\n    box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),\n                0px 6px 10px 0px rgba(0,0,0,0.14),\n                0px 1px 18px 0px rgba(0,0,0,0.12);\n}\n\nslot {\n    display: block;\n}\n\n\n:host {\n    --b-notif-btn-color: var(--b-notif-color);\n}\n\n:host([color]) {\n    --b-notif-btn-bgd: rgba(255,255,255,.1);\n}\n\n@keyframes bounce {\n  0% { transform: scale(0.8); }\n  14% { transform: scale(1.1); }\n  28% { transform: scale(.9); }\n  42% { transform: scale(1.1); }\n  70% { transform: scale(1); }\n`","export default {\n    alert: {\n    },\n    error: {\n        icon: 'attention-circle',\n        color: 'red',\n        animation: 'bounce'\n    },\n    failed: {\n        icon: 'cancel-circled',\n        color: 'red'\n    },\n    success: {\n        icon: 'ok-circled',\n        color: 'green'\n    },\n    info: {\n        icon: 'info-circled',\n        color: 'blue'\n    },\n    warning: {\n        icon: 'attention-1',\n        color: 'orange'\n    }\n}","import { LitElement, html, css } from 'lit-element'\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html'\nimport makeBtn, {cancelBtns} from '../dialog/make-btn'\nimport '../../helpers/lit-element/events'\n\ncustomElements.define('b-snackbar', class extends LitElement{\n\n    static get properties(){ return {\n        msg: {type: String},\n        btns: {type: Array},\n        icon: {type: String},\n    }}\n\n    static get styles(){return css`\n        :host {\n            padding: var(--b-snackbar-padding, .85em 1em);\n            display: grid;\n            grid-template-columns: auto 1fr max-content;\n            align-items: center;\n        }\n\n        .icon {\n            line-height: 0;\n        }\n\n        .icon > b-icon,\n        .icon > .icon {\n            margin: -.5em 0;\n            margin-right: .75em;\n            --size: 1.2em;\n            vertical-align: middle;\n        }\n\n        .msg {\n            margin: 0.05em 0 -.05em; /* better alignment with icon and btns */\n        }\n\n        .btns {\n            margin-top: -0.05em;\n            margin-right: calc(-.5 * var(--padding));\n            margin-left: calc(-.5 * var(--padding));\n        }\n\n        .btns b-btn {\n            font-weight: bold;\n            text-transform: uppercase;\n            margin: -1em 0;\n            vertical-align: middle;\n        }\n\n        .btns b-btn[color=''] {\n            color: var(--b-notif-btn-color, #fff);\n        }\n\n        :host([color]) .btns b-btn  {\n            color: var(--b-notif-btn-color, #fff);\n        }\n\n        @media (hover){\n            .btns b-btn:hover {\n                --bgdColor: var(--b-notif-btn-bgd, rgba(0,0,0,.05));\n            }\n        }\n    `}\n\n    render(){return html`\n        <div class=\"icon\">${this.renderIcon()}</div>\n        <div class=\"msg\">${this.msg}</div>\n        <div class=\"btns\" @click=${this.onBtnClick}>\n            ${this.btns.map(btn=>this.renderBtn(btn))}\n        </div>\n    `}\n\n    renderIcon(){\n        if( !this.icon ) return ''\n\n        if( typeof this.icon == 'string' )\n            return html`<b-icon name=\"${this.icon}\"></b-icon>`\n        \n        else\n            return this.icon\n    }\n\n    renderBtn(btn){\n        return html`${unsafeHTML(makeBtn(btn))}`\n    }\n\n    onBtnClick(e){\n\n        e.stopPropagation()\n        let index = Array.from(e.currentTarget.children).indexOf(e.target)\n        let btnData = index > -1 ? this.btns[index] : e.target\n\n        if( cancelBtns.includes(btnData) )\n            btnData = undefined\n\n        this.emitEvent('click', btnData)\n    }\n\n})\n\nexport default customElements.get('b-snackbar')","import { LitElement, html, css } from 'lit-element'\nimport Controller from './controller'\nimport device from '../../util/device'\nimport style from './style'\nimport TYPES from './types'\nimport './snackbar'\n\n// list of open notifs\nconst NOTIFS = new Map()\n\nwindow.NOTIFS = NOTIFS\n\ncustomElements.define('b-notif', class extends LitElement{\n\n    static get styles(){return style}\n\n    static get properties(){ return {\n        nid: {type: String, reflect: true},\n        msg: {type: String},\n        btns: {type: Array},\n        icon: {type: String},\n        color: {type: String, reflect: true},\n        width: {type: String},\n        animation: {type: String, reflect: true},\n    }}\n\n    constructor(opts={}){\n        super()\n\n        this.onWindowFocus = this.onWindowFocus.bind(this)\n        this.onWindowBlur = this.onWindowBlur.bind(this)\n\n        let controller = Controller.get(opts.controller || 'main')\n\n        this.opts = Object.assign({\n            nid: String(Math.round(Math.random() * 10000)),\n            msg: '',\n            icon: '',\n            btns: [],\n\n            animation: device.minScreenSize <= 699 ? 'grow' : 'slide',\n            animationForReplace: 'grow',\n            \n            autoClose: 4000,\n            closeOnClick: true,\n\n            anchor: 'bottom-right', //device.minScreenSize <= 699 ? 'bottom' : 'bottom-right',\n\n            onClose(){},\n            onClick(){}\n        }, (TYPES[opts.type]||{}), (controller.defaults||{}), opts)\n\n        let props = this.constructor.properties\n\n        for( let key in this.opts ){\n            if( props[key] != undefined )\n                this[key] = this.opts[key]\n        }        \n\n        this.slot = this.opts.anchor\n        \n        this.addEventListener('click', this.onClick, false)\n        this.addEventListener(device.isMobile?'touchdown':'mouseover', this.onMouseOver)\n        this.addEventListener(device.isMobile?'touchend':'mouseout', this.onMouseOut)\n\n        if( this.opts.view ){\n            this.appendChild(this.opts.view)\n            this.opts.view.notif = this\n        }\n\n        let existingNotif = NOTIFS.get(this.nid)\n\n        NOTIFS.set(this.nid, this)\n\n        if( existingNotif ){\n            existingNotif.replaceWith(this)\n            return\n        }\n        \n        if( controller )\n            controller.appendChild(this)\n    }\n\n    close(btn){\n        return new Promise(resolve=>{\n\n            this.style.height = (this.getBoundingClientRect().height)+'px';\n            this.classList.remove('entered')\n            \n            setTimeout(()=>{\n                this.classList.add('exit')\n            },100)\n\n            setTimeout(()=>{\n                this.remove()\n                NOTIFS.delete(this.nid)\n                this.opts.onClose(this)\n                \n                if( this.opts.view )\n                    delete this.opts.view.notif\n\n                resolve(btn)\n            },700)\n\n        })\n    }\n\n    replaceWith(el){\n        let animation = el.animation\n        \n        // let's reduce visual animation when replacing\n        if( animation == 'slide' ){\n            this.animation = this.opts.animationForReplace\n            el.animation = this.opts.animationForReplace\n        }\n        \n        this.classList.remove('entered')\n        \n        // setTimeout(()=>{\n            super.replaceWith(el)\n\n            this.opts.onClose(this)\n            \n            if( this.opts.view )\n                delete this.opts.view.notif\n\n            setTimeout(()=>{\n                el.animation = animation\n            },310)\n\n        // },310)\n    }\n\n    onClick(btn){\n        \n        if( btn instanceof MouseEvent || (window.TouchEvent && btn instanceof TouchEvent) )\n            btn = undefined\n\n        if( this.opts.onClick(this, btn) !== false && this.opts.closeOnClick )\n            this.close(btn)\n    }\n\n    onWindowFocus(){\n        this.autoClose(3000)\n    }\n\n    onWindowBlur(){\n        // this.autoClose(false)\n    }\n\n    onMouseOver(e){\n        e.stopPropagation()\n        this.autoClose(false)\n    }\n\n    onMouseOut(e){\n        e.stopPropagation()\n        this.autoClose(3000)\n    }\n\n    connectedCallback(){\n        super.connectedCallback()\n\n        window.addEventListener('blur', this.onWindowBlur)\n        window.addEventListener('focus', this.onWindowFocus)\n\n        if( this.opts.width )\n            this.style.width = this.opts.width\n\n        setTimeout(()=>{\n            this.classList.add('entered')\n        },100)\n\n        this.autoClose()\n    }\n\n    disconnectedCallback(){\n        super.disconnectedCallback()\n        window.removeEventListener('blur', this.onWindowBlur)\n        window.removeEventListener('focus', this.onWindowFocus)\n    }\n\n    autoClose(start=true){\n\n        clearTimeout(this._autoCloseTimeout)\n\n        if( !document.hasFocus() ) return\n\n        // use the `autoClose` delay if no time given OR we've never started the autoClose\n        let delay = start===true||!this._autoCloseTimeout?this.opts.autoClose:start\n\n        // requested to stop, or setting turned off\n        if( !start || !this.opts.autoClose ) return\n        \n        this._autoCloseTimeout = setTimeout(()=>{\n            this.close()\n        }, delay)\n    }\n\n    render(){return html`\n        <main>\n        <slot>\n            <b-snackbar\n                .icon=${this.icon}\n                .msg=${this.msg}\n                .btns=${this.btns}\n                ?color=${!!this.color}\n                @click=${this.onSnackbarClick}></b-snackbar>\n        </slot>\n        </main>\n    `}\n\n    onSnackbarClick(e){\n        e.stopPropagation()\n        let data = e.constructor.name == 'CustomEvent' ? e.detail : undefined\n        this.onClick(data)\n    }\n    \n\n})\n\nexport default customElements.get('b-notif')\n\nlet notifClass = customElements.get('b-notif')\n\nfor( let key in TYPES ){\n    if( !notifClass[key] )\n        notifClass[key] = (msg, opts={})=>{\n            if( typeof msg == 'string' ){\n                opts = opts || {}\n                opts.msg = msg\n            }\n\n            let Notif = customElements.get('b-notif')\n            return new Notif(Object.assign({}, TYPES[key], opts))\n        }\n}\n","import '../elements/icon'\nimport '../elements/btn'\nimport '../elements/btn-group'\nimport '../elements/spinner'\nimport '../elements/spinner-overlay'\nimport '../elements/uploader'\nimport '../elements/paper'\nimport '../elements/text'\nimport '../elements/grid'\nimport '../elements/carousel'\nimport '../elements/timer'\nimport '../elements/empty-state'\nimport '../elements/label'\nimport '../elements/ribbon'\nimport '../elements/hr'\nimport '../elements/sub'\nimport '../elements/ts'\nimport '../elements/avatar'\nimport '../elements/code'\nimport '../elements/embed'\nimport '../elements/audio'\nimport '../presenters/tabs'\nimport '../presenters/form-control'\nimport '../presenters/list'\nimport '../presenters/cal'\nimport '../helpers/colors-list'\nimport '../styles/colors.less';\n\nimport defineFileIcon from '../elements/file-icon'\ndefineFileIcon()\n\nimport Dialog from '../presenters/dialog'\nwindow.Dialog = Dialog\n\nimport Menu from '../presenters/menu'\nwindow.Menu = Menu\n\nimport Notif from '../presenters/notif'\nwindow.Notif = Notif\n\n\nfunction convertComments(){\n    var tw = document.createTreeWalker(document, NodeFilter.SHOW_COMMENT, null, null)\n    var comment\n    var comments = []\n\n    while( comment = tw.nextNode() ){\n        comments.push(comment)\n    }\n\n    comments.forEach(com=>{\n        let div = document.createElement('div')\n        div.classList.add('demo-block')\n\n        let str = com.textContent\n        let strs = str.split(\"\\n\")\n        let type = strs.shift()\n        str = strs.join(\"\\n\")\n        div.innerHTML = str;\n\n        if( type )\n            div.setAttribute('type', type)\n\n        let script = div.querySelector('script')\n        if( script )\n            eval(script.innerText)\n\n        com.replaceWith(div)\n    })\n}\n\nconvertComments()\n\n// popstate\nhistory.pushState = ( f => function pushState(){\n    var ret = f.apply(this, arguments);\n    convertComments()\n    return ret;\n})(history.pushState);\n\nhistory.replaceState = ( f => function replaceState(){\n    var ret = f.apply(this, arguments);\n    convertComments()\n    return ret;\n})(history.replaceState);\n\nwindow.addEventListener('popstate', function(){\n    convertComments()\n})\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","module.exports = function loadHTMLBundle(bundle) {\n  return fetch(bundle).then(function (res) {\n    return res.text();\n  });\n};\n"]}